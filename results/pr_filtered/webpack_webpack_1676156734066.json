[
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/15899",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/15899/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/15899/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/15899/events",
    "html_url": "https://github.com/webpack/webpack/pull/15899",
    "id": 1257993206,
    "node_id": "PR_kwDOADgiC84493IN",
    "number": 15899,
    "title": "fix quadratic evaluation performance of async modules",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2022-06-02T10:26:14Z",
    "updated_at": "2022-07-30T13:25:21Z",
    "closed_at": "2022-06-02T11:18:30Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/15899",
      "html_url": "https://github.com/webpack/webpack/pull/15899",
      "diff_url": "https://github.com/webpack/webpack/pull/15899.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/15899.patch",
      "merged_at": "2022-06-02T11:18:29Z"
    },
    "body": "improve runtime code for async modules\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/15899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/15899/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5da0ee4e9bdb19b73155c743631609df8fba9957",
        "filename": "lib/runtime/AsyncModuleRuntimeModule.js",
        "status": "modified",
        "additions": 34,
        "deletions": 58,
        "changes": 92,
        "blob_url": "https://github.com/webpack/webpack/blob/509a06002526cf94b60c72af70a84e355ee37714/lib%2Fruntime%2FAsyncModuleRuntimeModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/509a06002526cf94b60c72af70a84e355ee37714/lib%2Fruntime%2FAsyncModuleRuntimeModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fruntime%2FAsyncModuleRuntimeModule.js?ref=509a06002526cf94b60c72af70a84e355ee37714",
        "patch": "@@ -20,12 +20,13 @@ class AsyncModuleRuntimeModule extends HelperRuntimeModule {\n \t\tconst { runtimeTemplate } = this.compilation;\n \t\tconst fn = RuntimeGlobals.asyncModule;\n \t\treturn Template.asString([\n-\t\t\t'var webpackThen = typeof Symbol === \"function\" ? Symbol(\"webpack then\") : \"__webpack_then__\";',\n+\t\t\t'var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";',\n \t\t\t'var webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";',\n \t\t\t'var webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";',\n-\t\t\t`var completeQueue = ${runtimeTemplate.basicFunction(\"queue\", [\n-\t\t\t\t\"if(queue) {\",\n+\t\t\t`var resolveQueue = ${runtimeTemplate.basicFunction(\"queue\", [\n+\t\t\t\t\"if(queue && !queue.d) {\",\n \t\t\t\tTemplate.indent([\n+\t\t\t\t\t\"queue.d = 1;\",\n \t\t\t\t\t`queue.forEach(${runtimeTemplate.expressionFunction(\n \t\t\t\t\t\t\"fn.r--\",\n \t\t\t\t\t\t\"fn\"\n@@ -37,91 +38,58 @@ class AsyncModuleRuntimeModule extends HelperRuntimeModule {\n \t\t\t\t]),\n \t\t\t\t\"}\"\n \t\t\t])}`,\n-\t\t\t`var completeFunction = ${runtimeTemplate.expressionFunction(\n-\t\t\t\t\"!--fn.r && fn()\",\n-\t\t\t\t\"fn\"\n-\t\t\t)};`,\n-\t\t\t`var queueFunction = ${runtimeTemplate.expressionFunction(\n-\t\t\t\t\"queue ? queue.push(fn) : completeFunction(fn)\",\n-\t\t\t\t\"queue, fn\"\n-\t\t\t)};`,\n \t\t\t`var wrapDeps = ${runtimeTemplate.returningFunction(\n \t\t\t\t`deps.map(${runtimeTemplate.basicFunction(\"dep\", [\n \t\t\t\t\t'if(dep !== null && typeof dep === \"object\") {',\n \t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\"if(dep[webpackThen]) return dep;\",\n+\t\t\t\t\t\t\"if(dep[webpackQueues]) return dep;\",\n \t\t\t\t\t\t\"if(dep.then) {\",\n \t\t\t\t\t\tTemplate.indent([\n \t\t\t\t\t\t\t\"var queue = [];\",\n+\t\t\t\t\t\t\t\"queue.d = 0;\",\n \t\t\t\t\t\t\t`dep.then(${runtimeTemplate.basicFunction(\"r\", [\n \t\t\t\t\t\t\t\t\"obj[webpackExports] = r;\",\n-\t\t\t\t\t\t\t\t\"completeQueue(queue);\",\n-\t\t\t\t\t\t\t\t\"queue = 0;\"\n+\t\t\t\t\t\t\t\t\"resolveQueue(queue);\"\n \t\t\t\t\t\t\t])}, ${runtimeTemplate.basicFunction(\"e\", [\n \t\t\t\t\t\t\t\t\"obj[webpackError] = e;\",\n-\t\t\t\t\t\t\t\t\"completeQueue(queue);\",\n-\t\t\t\t\t\t\t\t\"queue = 0;\"\n+\t\t\t\t\t\t\t\t\"resolveQueue(queue);\"\n \t\t\t\t\t\t\t])});`,\n \t\t\t\t\t\t\t\"var obj = {};\",\n-\t\t\t\t\t\t\t`obj[webpackThen] = ${runtimeTemplate.expressionFunction(\n-\t\t\t\t\t\t\t\t\"queueFunction(queue, fn), dep['catch'](reject)\",\n-\t\t\t\t\t\t\t\t\"fn, reject\"\n+\t\t\t\t\t\t\t`obj[webpackQueues] = ${runtimeTemplate.expressionFunction(\n+\t\t\t\t\t\t\t\t`fn(queue)`,\n+\t\t\t\t\t\t\t\t\"fn\"\n \t\t\t\t\t\t\t)};`,\n \t\t\t\t\t\t\t\"return obj;\"\n \t\t\t\t\t\t]),\n \t\t\t\t\t\t\"}\"\n \t\t\t\t\t]),\n \t\t\t\t\t\"}\",\n \t\t\t\t\t\"var ret = {};\",\n-\t\t\t\t\t`ret[webpackThen] = ${runtimeTemplate.expressionFunction(\n-\t\t\t\t\t\t\"completeFunction(fn)\",\n-\t\t\t\t\t\t\"fn\"\n-\t\t\t\t\t)};`,\n+\t\t\t\t\t`ret[webpackQueues] = ${runtimeTemplate.emptyFunction()};`,\n \t\t\t\t\t\"ret[webpackExports] = dep;\",\n \t\t\t\t\t\"return ret;\"\n \t\t\t\t])})`,\n \t\t\t\t\"deps\"\n \t\t\t)};`,\n \t\t\t`${fn} = ${runtimeTemplate.basicFunction(\"module, body, hasAwait\", [\n-\t\t\t\t\"var queue = hasAwait && [];\",\n+\t\t\t\t\"var queue;\",\n+\t\t\t\t\"hasAwait && ((queue = []).d = 1);\",\n+\t\t\t\t\"if(queue) queue.moduleId = module.id;\",\n+\t\t\t\t\"var depQueues = new Set();\",\n \t\t\t\t\"var exports = module.exports;\",\n \t\t\t\t\"var currentDeps;\",\n \t\t\t\t\"var outerResolve;\",\n \t\t\t\t\"var reject;\",\n-\t\t\t\t\"var isEvaluating = true;\",\n-\t\t\t\t\"var nested = false;\",\n-\t\t\t\t`var whenAll = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\"deps, onResolve, onReject\",\n-\t\t\t\t\t[\n-\t\t\t\t\t\t\"if (nested) return;\",\n-\t\t\t\t\t\t\"nested = true;\",\n-\t\t\t\t\t\t\"onResolve.r += deps.length;\",\n-\t\t\t\t\t\t`deps.map(${runtimeTemplate.expressionFunction(\n-\t\t\t\t\t\t\t\"dep[webpackThen](onResolve, onReject)\",\n-\t\t\t\t\t\t\t\"dep, i\"\n-\t\t\t\t\t\t)});`,\n-\t\t\t\t\t\t\"nested = false;\"\n-\t\t\t\t\t]\n-\t\t\t\t)};`,\n \t\t\t\t`var promise = new Promise(${runtimeTemplate.basicFunction(\n \t\t\t\t\t\"resolve, rej\",\n-\t\t\t\t\t[\n-\t\t\t\t\t\t\"reject = rej;\",\n-\t\t\t\t\t\t`outerResolve = ${runtimeTemplate.expressionFunction(\n-\t\t\t\t\t\t\t\"resolve(exports), completeQueue(queue), queue = 0\"\n-\t\t\t\t\t\t)};`\n-\t\t\t\t\t]\n+\t\t\t\t\t[\"reject = rej;\", \"outerResolve = resolve;\"]\n \t\t\t\t)});`,\n \t\t\t\t\"promise[webpackExports] = exports;\",\n-\t\t\t\t`promise[webpackThen] = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\"fn, rejectFn\",\n-\t\t\t\t\t[\n-\t\t\t\t\t\t\"if (isEvaluating) { return completeFunction(fn); }\",\n-\t\t\t\t\t\t\"if (currentDeps) whenAll(currentDeps, fn, rejectFn);\",\n-\t\t\t\t\t\t\"queueFunction(queue, fn);\",\n-\t\t\t\t\t\t\"promise['catch'](rejectFn);\"\n-\t\t\t\t\t]\n+\t\t\t\t`promise[webpackQueues] = ${runtimeTemplate.expressionFunction(\n+\t\t\t\t\t`queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](${runtimeTemplate.emptyFunction()})`,\n+\t\t\t\t\t\"fn\"\n \t\t\t\t)};`,\n+\t\t\t\t\"promise.moduleId = module.id;\",\n \t\t\t\t\"module.exports = promise;\",\n \t\t\t\t`body(${runtimeTemplate.basicFunction(\"deps\", [\n \t\t\t\t\t\"currentDeps = wrapDeps(deps);\",\n@@ -133,21 +101,29 @@ class AsyncModuleRuntimeModule extends HelperRuntimeModule {\n \t\t\t\t\t\t])})`\n \t\t\t\t\t)}`,\n \t\t\t\t\t`var promise = new Promise(${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\"resolve, reject\",\n+\t\t\t\t\t\t\"resolve\",\n \t\t\t\t\t\t[\n \t\t\t\t\t\t\t`fn = ${runtimeTemplate.expressionFunction(\n-\t\t\t\t\t\t\t\t\"resolve(getResult)\"\n+\t\t\t\t\t\t\t\t\"resolve(getResult)\",\n+\t\t\t\t\t\t\t\t\"\"\n \t\t\t\t\t\t\t)};`,\n \t\t\t\t\t\t\t\"fn.r = 0;\",\n-\t\t\t\t\t\t\t\"whenAll(currentDeps, fn, reject);\"\n+\t\t\t\t\t\t\t`var fnQueue = ${runtimeTemplate.expressionFunction(\n+\t\t\t\t\t\t\t\t\"q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn)))\",\n+\t\t\t\t\t\t\t\t\"q\"\n+\t\t\t\t\t\t\t)};`,\n+\t\t\t\t\t\t\t`currentDeps.map(${runtimeTemplate.expressionFunction(\n+\t\t\t\t\t\t\t\t\"dep[webpackQueues](fnQueue)\",\n+\t\t\t\t\t\t\t\t\"dep\"\n+\t\t\t\t\t\t\t)});`\n \t\t\t\t\t\t]\n \t\t\t\t\t)});`,\n \t\t\t\t\t\"return fn.r ? promise : getResult();\"\n \t\t\t\t])}, ${runtimeTemplate.expressionFunction(\n-\t\t\t\t\t\"err && reject(promise[webpackError] = err), outerResolve()\",\n+\t\t\t\t\t\"(err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)\",\n \t\t\t\t\t\"err\"\n \t\t\t\t)});`,\n-\t\t\t\t\"isEvaluating = false;\"\n+\t\t\t\t\"queue && (queue.d = 0);\"\n \t\t\t])};`\n \t\t]);\n \t}"
      },
      {
        "sha": "2cf23d3ed27803de7fdd0b69766016e03316a3fb",
        "filename": "test/__snapshots__/StatsTestCases.basictest.js.snap",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/509a06002526cf94b60c72af70a84e355ee37714/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/509a06002526cf94b60c72af70a84e355ee37714/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap?ref=509a06002526cf94b60c72af70a84e355ee37714",
        "patch": "@@ -4611,8 +4611,8 @@ webpack x.x.x compiled with 1 warning in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"assets by path *.js 22.2 KiB\n-  asset bundle.js 16.7 KiB [emitted] (name: main)\n+\"assets by path *.js 21.8 KiB\n+  asset bundle.js 16.3 KiB [emitted] (name: main)\n   asset 325.bundle.js 3.9 KiB [emitted]\n   asset 795.bundle.js 557 bytes [emitted]\n   asset 526.bundle.js 366 bytes [emitted] (id hint: vendors)\n@@ -4628,8 +4628,8 @@ assets by path *.wasm 1.37 KiB\n   asset 0301cb3f9f4151b567f5.module.wasm 120 bytes [emitted] [immutable]\n chunk (runtime: main) 20.bundle.js 50 bytes (javascript) 531 bytes (webassembly) [rendered]\n   ./duff.wasm 50 bytes (javascript) 531 bytes (webassembly) [built] [code generated]\n-chunk (runtime: main) bundle.js (main) 586 bytes (javascript) 9.49 KiB (runtime) [entry] [rendered]\n-  runtime modules 9.49 KiB 11 modules\n+chunk (runtime: main) bundle.js (main) 586 bytes (javascript) 9.19 KiB (runtime) [entry] [rendered]\n+  runtime modules 9.19 KiB 11 modules\n   ./index.js 586 bytes [built] [code generated]\n chunk (runtime: main) 189.bundle.js 50 bytes (javascript) 156 bytes (webassembly) [rendered]\n   ./Q_rsqrt.wasm 50 bytes (javascript) 156 bytes (webassembly) [built] [code generated]\n@@ -4643,7 +4643,7 @@ chunk (runtime: main) 526.bundle.js (id hint: vendors) 34 bytes [rendered] split\n chunk (runtime: main) 795.bundle.js 110 bytes (javascript) 444 bytes (webassembly) [rendered]\n   ./fact.wasm 50 bytes (javascript) 154 bytes (webassembly) [built] [code generated]\n   ./fast-math.wasm 60 bytes (javascript) 290 bytes (webassembly) [built] [code generated]\n-runtime modules 9.49 KiB 11 modules\n+runtime modules 9.19 KiB 11 modules\n cacheable modules 2.31 KiB (javascript) 1.37 KiB (webassembly)\n   webassembly modules 310 bytes (javascript) 1.37 KiB (webassembly)\n     ./Q_rsqrt.wasm 50 bytes (javascript) 156 bytes (webassembly) [built] [code generated]"
      },
      {
        "sha": "03ed4ae466317c9bbfe3fea339e237f34f7aed88",
        "filename": "test/cases/async-modules/runtime-performance/async.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/509a06002526cf94b60c72af70a84e355ee37714/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Fasync.js",
        "raw_url": "https://github.com/webpack/webpack/raw/509a06002526cf94b60c72af70a84e355ee37714/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Fasync.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Fasync.js?ref=509a06002526cf94b60c72af70a84e355ee37714",
        "patch": "@@ -0,0 +1,2 @@\n+await 1;\n+export default 1;"
      },
      {
        "sha": "1aca8000cd467828ef377a68bb220c6f00c2fa13",
        "filename": "test/cases/async-modules/runtime-performance/index.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/509a06002526cf94b60c72af70a84e355ee37714/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/509a06002526cf94b60c72af70a84e355ee37714/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Findex.js?ref=509a06002526cf94b60c72af70a84e355ee37714",
        "patch": "@@ -0,0 +1,5 @@\n+it(\"should not take too long to evaluate nested async modules\", async () => {\n+\tconst start = Date.now();\n+\tawait import(/* webpackMode: \"eager\" */ \"./loader.js?i=40!./loader.js\");\n+\texpect(Date.now() - start).toBeLessThan(100);\n+});"
      },
      {
        "sha": "ea46f2bea9b0319d7f5137b2a5a2b1cca4e122f7",
        "filename": "test/cases/async-modules/runtime-performance/loader.js",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/509a06002526cf94b60c72af70a84e355ee37714/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Floader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/509a06002526cf94b60c72af70a84e355ee37714/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Floader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Fasync-modules%2Fruntime-performance%2Floader.js?ref=509a06002526cf94b60c72af70a84e355ee37714",
        "patch": "@@ -0,0 +1,14 @@\n+/** @type {import(\"../../../../\").LoaderDefinition<{ i: string }>} */\n+module.exports = function () {\n+\tconst options = this.getOptions();\n+\tconst i = +options.i;\n+\tlet src = `import n from \"./async.js\";\\n`;\n+\tif (i > 0) {\n+\t\tsrc += `import a from \"./loader.js?i=${i - 1}&a!./loader.js\";\\n`;\n+\t\tsrc += `import b from \"./loader.js?i=${i - 1}&b!./loader.js\";\\n`;\n+\t\tsrc += `export default n + a + b;\\n`;\n+\t} else {\n+\t\tsrc += `export default n;\\n`;\n+\t}\n+\treturn src;\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/15991",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/15991/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/15991/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/15991/events",
    "html_url": "https://github.com/webpack/webpack/pull/15991",
    "id": 1286516549,
    "node_id": "PR_kwDOADgiC846dCy5",
    "number": 15991,
    "title": "Improve watch performance by using stable identities for Snapshot iterables",
    "user": {
      "login": "gluxon",
      "id": 906558,
      "node_id": "MDQ6VXNlcjkwNjU1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/906558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gluxon",
      "html_url": "https://github.com/gluxon",
      "followers_url": "https://api.github.com/users/gluxon/followers",
      "following_url": "https://api.github.com/users/gluxon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gluxon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gluxon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gluxon/subscriptions",
      "organizations_url": "https://api.github.com/users/gluxon/orgs",
      "repos_url": "https://api.github.com/users/gluxon/repos",
      "events_url": "https://api.github.com/users/gluxon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gluxon/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817412,
        "node_id": "MDU6TGFiZWw1NzI4MTc0MTI=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20review-outdated",
        "name": "PR: review-outdated",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 16,
    "created_at": "2022-06-27T22:35:05Z",
    "updated_at": "2022-07-05T15:24:58Z",
    "closed_at": "2022-07-05T08:28:34Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/15991",
      "html_url": "https://github.com/webpack/webpack/pull/15991",
      "diff_url": "https://github.com/webpack/webpack/pull/15991.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/15991.patch",
      "merged_at": "2022-07-05T08:28:34Z"
    },
    "body": "A large monorepo my team works on is seeing an issue where Webpack rebuilds report as finished, but `webpack-dev-server` doesn't respond until a minute later.\r\n\r\n## Summary\r\n\r\nStarting with performance changes up front. (See below for a description of what we were seeing.) Here's the `LazySet` [`merge`](https://github.com/webpack/webpack/blob/93ce24d2dc40ee972a2ea5138f3c181563c913fd/lib/util/LazySet.js#L16-L22) performance for `compilation.fileDependencies` in this monorepo before/after:\r\n\r\n| |`merge` Loop Iterations|Timing(ms)|\r\n|-|-|-|\r\n|Before|1,198,677|23,045.10|\r\n|After|464,918|1,726.25|\r\n\r\nThese aren't scientific timings ran over multiple trials. I can perform that if needed.\r\n\r\n## Investigation\r\n\r\n### CPU Profiling\r\n\r\nRunning the build in a CPU profiler revealed a large amount of time spent calling watchpack's `watch` function. This is after the initial Webpack build. The white space in the profile below is in between the initial build, and saving a file in the repo that has just been modified.\r\n\r\nhttps://github.com/webpack/webpack/blob/e2f1592f7e4d8f0578e5bb23d6a863b4a2b5f309/lib/Watching.js#L303-L307\r\n\r\n![Screen Shot 2022-06-22 at 5 51 29 PM](https://user-images.githubusercontent.com/906558/176036043-5053f7fa-6f9d-4b56-a558-3a2effa0b3fa.png)\r\n\r\nGoing down the call stack, it looks like watchpack iterates over `compilation.fileDependencies`, triggering `LazySet`'s `merge` function.\r\n\r\nhttps://github.com/webpack/webpack/blob/93ce24d2dc40ee972a2ea5138f3c181563c913fd/lib/util/LazySet.js#L16-L22\r\n\r\nI patched the `merge` function to output how many items were being iterated over and their time.\r\n```js\r\nconst { performance } = require(\"perf_hooks\");\r\nconst merge = (targetSet, toMerge) => {\r\n    let count = 0;\r\n    const before = performance.now();\r\n    for (const set of toMerge) {\r\n        for (const item of set) {\r\n            targetSet.add(item);\r\n            count++\r\n        }\r\n    }\r\n    if (count > 5000) {\r\n        const duration = performance.now() - before;\r\n        console.log(`Items iterated during merge: ${count}, ${duration} ms`)\r\n    }\r\n};\r\n```\r\n\r\nThe results:\r\n\r\n```\r\nItems iterated during merge: 1198677, 23045.103875994682 ms\r\nItems iterated during merge: 726370, 8386.988652005792 ms\r\n```\r\n\r\nThe 1st set iterated corresponds to `compilation.fileDependencies`.\r\n\r\n### LazySet toMerge Duplicates\r\n\r\nInspecting `compilation.fileDependencies` in an interactive debugger shows that this `LazySet` has a lot of duplicates in its `toMerge` field.\r\n\r\nAdding a breakpoint to the `merge` function commented on above and inspecting the `toMerge` argument:\r\n\r\n```\r\n❯ toMerge.size\r\n128116\r\n❯ new Set([...toMerge].map(snapshotIterable => snapshotIterable.snapshot)).size\r\n62175\r\n```\r\n\r\nThis is after `LazySet._toMerge` has had its contents moved from `LazySet._toDeepMerge`. Attaching a screenshot of the call stack in VS Code's debugger if that helps.\r\n\r\n![Screen Shot 2022-06-27 at 6 29 16 PM](https://user-images.githubusercontent.com/906558/176046681-5bf87ded-d991-4b53-a6ab-5053f604f9ce.png)\r\n\r\n---\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\n\r\nOne of the reasons `_toMerge` gets so large is because every `SnapshotIterable` is uniquely constructed, even if they're derived from the same underlying `Snapshot` class.\r\n\r\nThis PR gives snapshot iterables stable identifiers, which reduces the items in the `_toMerge` set and significantly improved performance in this app.\r\n\r\nAfter this change, the log output from above becomes:\r\n\r\n```\r\nItems iterated during merge: 464918, 1726.2539209723473 ms\r\nItems iterated during merge: 561334, 222.49260300397873 ms\r\n```\r\n\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\n\r\nI added tests to ensure the snapshot iterables returned are stable across multiple calls, but the tests could probably be written better. I'd appreciate a gut check from the Webpack team that this change makes sense before improving tests more.\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nIt does not.\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n\r\n## Questions for Reviewers\r\n\r\nThanks for looking at this!\r\n\r\n- Does this change make sense, or should I investigate improving performance of this `watch` call in a different way?\r\n- Would it make sense to use [`WeakRef`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakRef) to prevent these saved iterable objects from living longer than necessary? I think we'd have to check for the API's existence and gracefully fallback to support older Node.js versions.\r\n\r\nfixes #15231",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/15991/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 3,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/15991/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "87221acfa2583ef7690d79b25bed9f6b4dd8ff9a",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 31,
        "deletions": 13,
        "changes": 44,
        "blob_url": "https://github.com/webpack/webpack/blob/7b3f4c0dbd5a4cc52ead3318a6f54a4cea340533/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7b3f4c0dbd5a4cc52ead3318a6f54a4cea340533/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=7b3f4c0dbd5a4cc52ead3318a6f54a4cea340533",
        "patch": "@@ -208,6 +208,12 @@ class SnapshotIterable {\n class Snapshot {\n \tconstructor() {\n \t\tthis._flags = 0;\n+\t\t/** @type {Iterable<string> | undefined} */\n+\t\tthis._cachedFileIterable = undefined;\n+\t\t/** @type {Iterable<string> | undefined} */\n+\t\tthis._cachedContextIterable = undefined;\n+\t\t/** @type {Iterable<string> | undefined} */\n+\t\tthis._cachedMissingIterable = undefined;\n \t\t/** @type {number | undefined} */\n \t\tthis.startTime = undefined;\n \t\t/** @type {Map<string, FileSystemInfoEntry | null> | undefined} */\n@@ -418,31 +424,43 @@ class Snapshot {\n \t * @returns {Iterable<string>} iterable\n \t */\n \tgetFileIterable() {\n-\t\treturn this._createIterable(s => [\n-\t\t\ts.fileTimestamps,\n-\t\t\ts.fileHashes,\n-\t\t\ts.fileTshs,\n-\t\t\ts.managedFiles\n-\t\t]);\n+\t\tif (this._cachedFileIterable === undefined) {\n+\t\t\tthis._cachedFileIterable = this._createIterable(s => [\n+\t\t\t\ts.fileTimestamps,\n+\t\t\t\ts.fileHashes,\n+\t\t\t\ts.fileTshs,\n+\t\t\t\ts.managedFiles\n+\t\t\t]);\n+\t\t}\n+\t\treturn this._cachedFileIterable;\n \t}\n \n \t/**\n \t * @returns {Iterable<string>} iterable\n \t */\n \tgetContextIterable() {\n-\t\treturn this._createIterable(s => [\n-\t\t\ts.contextTimestamps,\n-\t\t\ts.contextHashes,\n-\t\t\ts.contextTshs,\n-\t\t\ts.managedContexts\n-\t\t]);\n+\t\tif (this._cachedContextIterable === undefined) {\n+\t\t\tthis._cachedContextIterable = this._createIterable(s => [\n+\t\t\t\ts.contextTimestamps,\n+\t\t\t\ts.contextHashes,\n+\t\t\t\ts.contextTshs,\n+\t\t\t\ts.managedContexts\n+\t\t\t]);\n+\t\t}\n+\t\treturn this._cachedContextIterable;\n \t}\n \n \t/**\n \t * @returns {Iterable<string>} iterable\n \t */\n \tgetMissingIterable() {\n-\t\treturn this._createIterable(s => [s.missingExistence, s.managedMissing]);\n+\t\tif (this._cachedMissingIterable === undefined) {\n+\t\t\tthis._cachedMissingIterable = this._createIterable(s => [\n+\t\t\t\ts.missingExistence,\n+\t\t\t\ts.managedMissing\n+\t\t\t]);\n+\t\t}\n+\t\treturn this._cachedMissingIterable;\n \t}\n }\n "
      },
      {
        "sha": "fbca60f9cfeec642f06a7209bdf84f4a6ec15a3f",
        "filename": "test/FileSystemInfo.unittest.js",
        "status": "modified",
        "additions": 46,
        "deletions": 0,
        "changes": 46,
        "blob_url": "https://github.com/webpack/webpack/blob/7b3f4c0dbd5a4cc52ead3318a6f54a4cea340533/test%2FFileSystemInfo.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7b3f4c0dbd5a4cc52ead3318a6f54a4cea340533/test%2FFileSystemInfo.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FFileSystemInfo.unittest.js?ref=7b3f4c0dbd5a4cc52ead3318a6f54a4cea340533",
        "patch": "@@ -363,4 +363,50 @@ ${details(snapshot)}`)\n \t\t\t}\n \t\t});\n \t}\n+\n+\tdescribe(\"stable iterables identity\", () => {\n+\t\tconst options = { timestamp: true };\n+\n+\t\t/**\n+\t\t * @param {function((WebpackError | null)=, (Snapshot | null)=): void} callback callback function\n+\t\t */\n+\t\tfunction getSnapshot(callback) {\n+\t\t\tconst fs = createFs();\n+\t\t\tconst fsInfo = createFsInfo(fs);\n+\t\t\tfsInfo.createSnapshot(\n+\t\t\t\tDate.now() + 10000,\n+\t\t\t\tfiles,\n+\t\t\t\tdirectories,\n+\t\t\t\tmissing,\n+\t\t\t\toptions,\n+\t\t\t\tcallback\n+\t\t\t);\n+\t\t}\n+\n+\t\tit(\"should return same iterable for getFileIterable()\", done => {\n+\t\t\tgetSnapshot((err, snapshot) => {\n+\t\t\t\tif (err) done(err);\n+\t\t\t\texpect(snapshot.getFileIterable()).toEqual(snapshot.getFileIterable());\n+\t\t\t\tdone();\n+\t\t\t});\n+\t\t});\n+\n+\t\tit(\"should return same iterable for getContextIterable()\", done => {\n+\t\t\tgetSnapshot((err, snapshot) => {\n+\t\t\t\tif (err) done(err);\n+\t\t\t\texpect(snapshot.getContextIterable()).toEqual(\n+\t\t\t\t\tsnapshot.getContextIterable()\n+\t\t\t\t);\n+\t\t\t\tdone();\n+\t\t\t});\n+\t\t});\n+\n+\t\tit(\"should return same iterable for getMissingIterable()\", done => {\n+\t\t\tgetSnapshot((err, snapshot) => {\n+\t\t\t\tif (err) done(err);\n+\t\t\t\texpect(snapshot.getFileIterable()).toEqual(snapshot.getFileIterable());\n+\t\t\t\tdone();\n+\t\t\t});\n+\t\t});\n+\t});\n });"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5786",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5786/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5786/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5786/events",
    "html_url": "https://github.com/webpack/webpack/pull/5786",
    "id": 264209857,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ1Njc4NjQ5",
    "number": 5786,
    "title": "improve chunk graph building performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 575750469,
        "node_id": "MDU6TGFiZWw1NzU3NTA0Njk=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20non-main",
        "name": "PR: non-main",
        "color": "dbb2f3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2017-10-10T12:31:55Z",
    "updated_at": "2021-12-15T10:01:55Z",
    "closed_at": "2017-10-11T15:05:21Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5786",
      "html_url": "https://github.com/webpack/webpack/pull/5786",
      "diff_url": "https://github.com/webpack/webpack/pull/5786.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5786.patch",
      "merged_at": "2017-10-11T15:05:21Z"
    },
    "body": "\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nrefactoring for performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nsee source code\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nRefactor algorithm to traverse less nodes, more efficient datastructures, better detection of circles.\r\n\r\nfixes #5785\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n@kenotron could you check if this fulfills your performance needs?",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5786/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5786/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "1fd5c4c5dbc5ed8e90ae8bbf2adeada0dadfc813",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 121,
        "deletions": 29,
        "changes": 150,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -846,61 +846,90 @@ class Compilation extends Tapable {\n \t\t}\n \t}\n \n+\t// This method creates the Chunk graph from the Module graph\n \tprocessDependenciesBlocksForChunks(inputChunks) {\n+\t\t// Process is splitting into two parts:\n+\t\t// Part one traverse the module graph and builds a very basic chunks graph\n+\t\t//   in chunkDependencies.\n+\t\t// Part two traverse every possible way through the basic chunk graph and\n+\t\t//   tracks the available modules. While traversing it connects chunks with\n+\t\t//   eachother and Blocks with Chunks. It stops traversing when all modules\n+\t\t//   for a chunk are already available. So it doesn't connect unneeded chunks.\n+\n \t\tconst chunkDependencies = new Map(); // Map<Chunk, Array<{Module, Chunk}>>\n+\t\tconst allCreatedChunks = new Set();\n+\n+\t\t// PART ONE\n \n+\t\tconst blockChunks = new Map();\n+\n+\t\t// Start with the provided modules/chunks\n \t\tconst queue = inputChunks.map(chunk => ({\n \t\t\tblock: chunk.entryModule,\n-\t\t\tmodule: chunk.entryModule,\n \t\t\tchunk: chunk\n \t\t}));\n \n-\t\tlet block, module, chunk;\n+\t\tlet block, chunk;\n+\n+\t\t// For each async Block in graph\n \t\tconst iteratorBlock = b => {\n-\t\t\tlet c;\n-\t\t\tif(!b.chunks) {\n+\t\t\t// 1. We create a chunk for this Block\n+\t\t\t// but only once (blockChunks map)\n+\t\t\tlet c = blockChunks.get(b);\n+\t\t\tif(c === undefined) {\n \t\t\t\tc = this.addChunk(b.chunkName, b.module, b.loc);\n-\t\t\t\tb.chunks = [c];\n-\t\t\t\tc.addBlock(b);\n-\t\t\t} else {\n-\t\t\t\tc = b.chunks[0];\n+\t\t\t\tblockChunks.set(b, c);\n+\t\t\t\tallCreatedChunks.add(c);\n+\t\t\t\t// We initialize the chunks property\n+\t\t\t\t// this is later filled with the chunk when needed\n+\t\t\t\tb.chunks = [];\n \t\t\t}\n+\n+\t\t\t// 2. We store the Block+Chunk mapping as dependency for the chunk\n \t\t\tlet deps = chunkDependencies.get(chunk);\n \t\t\tif(!deps) chunkDependencies.set(chunk, deps = []);\n \t\t\tdeps.push({\n-\t\t\t\tchunk: c,\n-\t\t\t\tmodule\n+\t\t\t\tblock: b,\n+\t\t\t\tchunk: c\n \t\t\t});\n+\n+\t\t\t// 3. We enqueue the DependenciesBlock for traversal\n \t\t\tqueue.push({\n \t\t\t\tblock: b,\n-\t\t\t\tmodule: null,\n \t\t\t\tchunk: c\n \t\t\t});\n \t\t};\n \n+\t\t// For each Dependency in the graph\n \t\tconst iteratorDependency = d => {\n+\t\t\t// We skip Dependencies without Module pointer\n \t\t\tif(!d.module) {\n \t\t\t\treturn;\n \t\t\t}\n+\t\t\t// We skip weak Dependencies\n \t\t\tif(d.weak) {\n \t\t\t\treturn;\n \t\t\t}\n+\t\t\t// We connect Module and Chunk when not already done\n \t\t\tif(chunk.addModule(d.module)) {\n \t\t\t\td.module.addChunk(chunk);\n+\n+\t\t\t\t// And enqueue the Module for traversal\n \t\t\t\tqueue.push({\n \t\t\t\t\tblock: d.module,\n-\t\t\t\t\tmodule: d.module,\n \t\t\t\t\tchunk\n \t\t\t\t});\n \t\t\t}\n \t\t};\n \n+\t\t// Iterative traversal of the Module graph\n+\t\t// Recursive would be simpler to write but could result in Stack Overflows\n \t\twhile(queue.length) {\n \t\t\tconst queueItem = queue.pop();\n \t\t\tblock = queueItem.block;\n-\t\t\tmodule = queueItem.module;\n \t\t\tchunk = queueItem.chunk;\n \n+\t\t\t// Traverse all variables, Dependencies and Blocks\n \t\t\tif(block.variables) {\n \t\t\t\titerationBlockVariable(block.variables, iteratorDependency);\n \t\t\t}\n@@ -914,45 +943,108 @@ class Compilation extends Tapable {\n \t\t\t}\n \t\t}\n \n+\t\t// PART TWO\n+\n+\t\tlet availableModules;\n+\t\tlet newAvailableModules;\n \t\tconst queue2 = inputChunks.map(chunk => ({\n \t\t\tchunk,\n-\t\t\tchunks: new Set()\n+\t\t\tavailableModules: new Set()\n \t\t}));\n \n-\t\tlet chunks;\n-\t\tconst filterFn = dep => {\n-\t\t\tif(chunks.has(dep.chunk)) return false;\n-\t\t\tfor(const chunk of chunks) {\n-\t\t\t\tif(chunk.containsModule(dep.module))\n+\t\t// Helper function to check if all modules of a chunk are available\n+\t\tconst areModulesAvailable = (chunk, availableModules) => {\n+\t\t\tfor(const module of chunk.modulesIterable) {\n+\t\t\t\tif(!availableModules.has(module))\n \t\t\t\t\treturn false;\n \t\t\t}\n \t\t\treturn true;\n \t\t};\n \n+\t\t// For each edge in the basic chunk graph\n+\t\tconst filterFn = dep => {\n+\t\t\t// Filter egdes that are not needed because all modules are already available\n+\t\t\t// This also filters circular dependencies in the chunks graph\n+\t\t\tconst depChunk = dep.chunk;\n+\t\t\tif(areModulesAvailable(depChunk, newAvailableModules))\n+\t\t\t\treturn false; // break all modules are already available\n+\t\t\treturn true;\n+\t\t};\n+\n+\t\tconst minAvailableModulesMap = new Map();\n+\n+\t\t// Iterative traversing of the basic chunk graph\n \t\twhile(queue2.length) {\n \t\t\tconst queueItem = queue2.pop();\n \t\t\tchunk = queueItem.chunk;\n-\t\t\tchunks = queueItem.chunks;\n+\t\t\tavailableModules = queueItem.availableModules;\n+\n+\t\t\t// 1. Get minimal available modules\n+\t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n+\t\t\t// This step calculates the minimal available modules and skips traversal when\n+\t\t\t// the list didn't shrink.\n+\t\t\tlet minAvailableModules = minAvailableModulesMap.get(chunk);\n+\t\t\tif(minAvailableModules === undefined) {\n+\t\t\t\tminAvailableModulesMap.set(chunk, new Set(availableModules));\n+\t\t\t} else {\n+\t\t\t\tlet deletedModules = false;\n+\t\t\t\tfor(const m of minAvailableModules) {\n+\t\t\t\t\tif(!availableModules.has(m)) {\n+\t\t\t\t\t\tminAvailableModules.delete(m);\n+\t\t\t\t\t\tdeletedModules = true;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif(!deletedModules)\n+\t\t\t\t\tcontinue;\n+\t\t\t}\n \n+\t\t\t// 2. Get the edges at this point of the graph\n \t\t\tconst deps = chunkDependencies.get(chunk);\n \t\t\tif(!deps) continue;\n+\t\t\tif(deps.length === 0) continue;\n \n-\t\t\tconst depsFiltered = deps.filter(filterFn);\n+\t\t\t// 3. Create a new Set of available modules at this points\n+\t\t\tnewAvailableModules = new Set(availableModules);\n+\t\t\tfor(const m of chunk.modulesIterable)\n+\t\t\t\tnewAvailableModules.add(m);\n \n-\t\t\tfor(let i = 0; i < depsFiltered.length; i++) {\n-\t\t\t\tconst dep = depsFiltered[i];\n+\t\t\t// 4. Filter edges with available modules\n+\t\t\tconst filteredDeps = deps.filter(filterFn);\n+\n+\t\t\t// 5. Foreach remaining edge\n+\t\t\tconst nextChunks = new Set();\n+\t\t\tfor(let i = 0; i < filteredDeps.length; i++) {\n+\t\t\t\tconst dep = filteredDeps[i];\n \t\t\t\tconst depChunk = dep.chunk;\n-\t\t\t\tchunk.addChunk(depChunk);\n-\t\t\t\tdepChunk.addParent(chunk);\n+\t\t\t\tconst depBlock = dep.block;\n \n-\t\t\t\tconst newChunks = depsFiltered.length > 1 ? new Set(chunks) : chunks;\n-\t\t\t\tnewChunks.add(chunk);\n+\t\t\t\t// 6. Connnect block with chunk\n+\t\t\t\tif(depChunk.addBlock(depBlock)) {\n+\t\t\t\t\tdepBlock.chunks.push(depChunk);\n+\t\t\t\t}\n+\n+\t\t\t\t// 7. Connect chunk with parent\n+\t\t\t\tif(chunk.addChunk(depChunk)) {\n+\t\t\t\t\tdepChunk.addParent(chunk);\n+\t\t\t\t}\n+\n+\t\t\t\tnextChunks.add(depChunk);\n+\t\t\t}\n+\n+\t\t\t// 8. Enqueue further traversal\n+\t\t\tfor(const nextChunk of nextChunks) {\n \t\t\t\tqueue2.push({\n-\t\t\t\t\tchunk: depChunk,\n-\t\t\t\t\tchunks: newChunks\n+\t\t\t\t\tchunk: nextChunk,\n+\t\t\t\t\tavailableModules: newAvailableModules\n \t\t\t\t});\n \t\t\t}\n \t\t}\n+\n+\t\t// Remove all unconnected chunks\n+\t\tfor(const chunk of allCreatedChunks) {\n+\t\t\tif(chunk.parents.length === 0)\n+\t\t\t\tchunk.remove(\"unconnected\");\n+\t\t}\n \t}\n \n \tremoveChunkFromDependencies(block, chunk) {"
      },
      {
        "sha": "ac334e80048625acf0cd9208b5e08599c680985e",
        "filename": "test/configCases/performance/many-async-imports/index.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Findex.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -0,0 +1,5 @@\n+import promise from \"./start\";\n+\n+it(\"should compile a module with many async imports in acceptable time\", function(done) {\n+\tpromise.then(() => done(), e => done(e));\n+});"
      },
      {
        "sha": "cc2609ac1ed55b6eff2d18f743e2be7ce37afe0e",
        "filename": "test/configCases/performance/many-async-imports/leaf.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fleaf.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fleaf.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fleaf.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -0,0 +1 @@\n+import(\"./start\");"
      },
      {
        "sha": "f44ceced67af3b935bc2a4629af4f59a533ab923",
        "filename": "test/configCases/performance/many-async-imports/reexport.loader.js",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Freexport.loader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Freexport.loader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Freexport.loader.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -0,0 +1,10 @@\n+module.exports = function() {\n+\tvar str = \"export default Promise.all([\\n\";\n+\tfor(var i = 0; i < 6; i++) {\n+\t\tfor(var j = 0; j < 2; j++) {\n+\t\t\tstr += `import(\"./reexport.loader.js!?${i}\"),\\n`;\n+\t\t}\n+\t}\n+\tstr += \"]);\";\n+\treturn str;\n+};"
      },
      {
        "sha": "6e64e677f7ec28b97f096e86be656b8df4d1041d",
        "filename": "test/configCases/performance/many-async-imports/start.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fstart.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fstart.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fstart.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -0,0 +1 @@\n+export { default } from \"./reexport.loader.js!\";"
      },
      {
        "sha": "3f84fd04e2f573c54730a05b1034da9c4dca3030",
        "filename": "test/configCases/performance/many-async-imports/test.config.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Ftest.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Ftest.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Ftest.config.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = {\n+\ttimeout: 10000\n+};"
      },
      {
        "sha": "6a8d56378febebfa98c12fcda58677f2fe87e70e",
        "filename": "test/configCases/performance/many-async-imports/test.filter.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Ftest.filter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Ftest.filter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Ftest.filter.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = function(config) {\n+\treturn !/^v4/.test(process.version);\n+};"
      },
      {
        "sha": "f053ebf7976e3726d11f3c03fade2170903889a5",
        "filename": "test/configCases/performance/many-async-imports/webpack.config.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-async-imports%2Fwebpack.config.js?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -0,0 +1 @@\n+module.exports = {};"
      },
      {
        "sha": "d32c28386b38bd5baf0e2dbaaeafc8352cf073f9",
        "filename": "test/statsCases/optimize-chunks/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/7870bfc01d1355e20c3b07dd3722afd8d94fa254/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt?ref=7870bfc01d1355e20c3b07dd3722afd8d94fa254",
        "patch": "@@ -9,7 +9,7 @@ Time: Xms\n    5.js  306 bytes    5, 3  [emitted]  cir2 from cir1\n    6.js   80 bytes       6  [emitted]  ac in ab\n main.js    6.78 kB       7  [emitted]  main\n-chunk    {0} 0.js (cir1) 81 bytes {3} {5} {7} [rendered]\n+chunk    {0} 0.js (cir1) 81 bytes {3} {7} [rendered]\n     > duplicate cir1 from cir2 [6] (webpack)/test/statsCases/optimize-chunks/circular2.js 1:0-79\n     > duplicate cir1 [7] (webpack)/test/statsCases/optimize-chunks/index.js 13:0-54\n     [5] (webpack)/test/statsCases/optimize-chunks/circular1.js 81 bytes {0} [built]"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14342",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14342/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14342/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14342/events",
    "html_url": "https://github.com/webpack/webpack/pull/14342",
    "id": 1008476992,
    "node_id": "PR_kwDOADgiC84sVG00",
    "number": 14342,
    "title": "improve unsafe cache performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-09-27T18:47:21Z",
    "updated_at": "2021-09-28T13:50:13Z",
    "closed_at": "2021-09-28T13:50:12Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14342",
      "html_url": "https://github.com/webpack/webpack/pull/14342",
      "diff_url": "https://github.com/webpack/webpack/pull/14342.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14342.patch",
      "merged_at": "2021-09-28T13:50:12Z"
    },
    "body": "move unsafe cache from NormalModuleFactory to Compilation to skip more processing\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14342/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5431aab3e40122d25ce3d93703b16a3786e0a5d4",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 303,
        "deletions": 126,
        "changes": 429,
        "blob_url": "https://github.com/webpack/webpack/blob/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=8ef452a5b813986ce95b590fc2d51ec510a7ca3c",
        "patch": "@@ -93,6 +93,7 @@ const { isSourceEqual } = require(\"./util/source\");\n /** @typedef {import(\"./CacheFacade\")} CacheFacade */\n /** @typedef {import(\"./ChunkGroup\").ChunkGroupOptions} ChunkGroupOptions */\n /** @typedef {import(\"./Compiler\")} Compiler */\n+/** @typedef {import(\"./Compiler\").CompilationParams} CompilationParams */\n /** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n /** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n /** @typedef {import(\"./Dependency\").ReferencedExport} ReferencedExport */\n@@ -101,6 +102,7 @@ const { isSourceEqual } = require(\"./util/source\");\n /** @typedef {import(\"./Module\").CodeGenerationResult} CodeGenerationResult */\n /** @typedef {import(\"./ModuleFactory\")} ModuleFactory */\n /** @typedef {import(\"./ModuleFactory\").ModuleFactoryCreateDataContextInfo} ModuleFactoryCreateDataContextInfo */\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n /** @typedef {import(\"./RequestShortener\")} RequestShortener */\n /** @typedef {import(\"./RuntimeModule\")} RuntimeModule */\n /** @typedef {import(\"./Template\").RenderManifestEntry} RenderManifestEntry */\n@@ -125,6 +127,20 @@ const { isSourceEqual } = require(\"./util/source\");\n  * @returns {void}\n  */\n \n+/**\n+ * @callback ModuleFactoryResultCallback\n+ * @param {WebpackError=} err\n+ * @param {ModuleFactoryResult=} result\n+ * @returns {void}\n+ */\n+\n+/**\n+ * @callback ModuleOrFactoryResultCallback\n+ * @param {WebpackError=} err\n+ * @param {Module | ModuleFactoryResult=} result\n+ * @returns {void}\n+ */\n+\n /**\n  * @callback ExecuteModuleCallback\n  * @param {WebpackError=} err\n@@ -400,12 +416,19 @@ const byLocation = compareSelect(err => err.loc, compareLocations);\n \n const compareErrors = concatComparators(byModule, byLocation, byMessage);\n \n+/** @type {WeakMap<Dependency, Module & { restoreFromUnsafeCache: Function }>} */\n+const unsafeCacheDependencies = new WeakMap();\n+\n+/** @type {WeakMap<Module, object>} */\n+const unsafeCacheData = new WeakMap();\n+\n class Compilation {\n \t/**\n \t * Creates an instance of Compilation.\n \t * @param {Compiler} compiler the compiler which created the compilation\n+\t * @param {CompilationParams} params the compilation parameters\n \t */\n-\tconstructor(compiler) {\n+\tconstructor(compiler, params) {\n \t\tconst getNormalModuleLoader = () => deprecatedNormalModuleLoaderHook(this);\n \t\t/** @typedef {{ additionalAssets?: true | Function }} ProcessAssetsAdditionalOptions */\n \t\t/** @type {AsyncSeriesHook<[CompilationAssets], ProcessAssetsAdditionalOptions>} */\n@@ -880,6 +903,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t/** @type {boolean} */\n \t\tthis.profile = (options && options.profile) || false;\n \n+\t\tthis.params = params;\n \t\tthis.mainTemplate = new MainTemplate(this.outputOptions, this);\n \t\tthis.chunkTemplate = new ChunkTemplate(this.outputOptions, this);\n \t\tthis.runtimeTemplate = new RuntimeTemplate(\n@@ -914,7 +938,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\tgetKey: module => module.identifier(),\n \t\t\tprocessor: this._addModule.bind(this)\n \t\t});\n-\t\t/** @type {AsyncQueue<FactorizeModuleOptions, string, Module>} */\n+\t\t/** @type {AsyncQueue<FactorizeModuleOptions, string, Module | ModuleFactoryResult>} */\n \t\tthis.factorizeQueue = new AsyncQueue({\n \t\t\tname: \"factorize\",\n \t\t\tparent: this.addModuleQueue,\n@@ -997,6 +1021,8 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\tthis.usedModuleIds = null;\n \t\t/** @type {boolean} */\n \t\tthis.needAdditionalPass = false;\n+\t\t/** @type {Set<Module>} */\n+\t\tthis._restoredUnsafeCacheEntries = new Set();\n \t\t/** @type {WeakSet<Module>} */\n \t\tthis.builtModules = new WeakSet();\n \t\t/** @type {WeakSet<Module>} */\n@@ -1029,6 +1055,11 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\tthis._modulesCache = this.getCache(\"Compilation/modules\");\n \t\tthis._assetsCache = this.getCache(\"Compilation/assets\");\n \t\tthis._codeGenerationCache = this.getCache(\"Compilation/codeGeneration\");\n+\n+\t\tconst unsafeCache = options.module.unsafeCache;\n+\t\tthis._unsafeCache = !!unsafeCache;\n+\t\tthis._unsafeCachePredicate =\n+\t\t\ttypeof unsafeCache === \"function\" ? unsafeCache : () => true;\n \t}\n \n \tgetStats() {\n@@ -1413,12 +1444,44 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t/** @type {Dependency[]} */\n \t\tlet listCacheValue;\n \n+\t\tconst unsafeRestoredModules = new Set();\n+\n \t\t/**\n \t\t * @param {Dependency} dep dependency\n \t\t * @returns {void}\n \t\t */\n \t\tconst processDependency = dep => {\n \t\t\tthis.moduleGraph.setParents(dep, currentBlock, module);\n+\t\t\tif (this._unsafeCache) {\n+\t\t\t\ttry {\n+\t\t\t\t\tconst cachedModule = unsafeCacheDependencies.get(dep);\n+\t\t\t\t\tif (cachedModule === null) return;\n+\t\t\t\t\tif (cachedModule !== undefined) {\n+\t\t\t\t\t\tif (!this._restoredUnsafeCacheEntries.has(cachedModule)) {\n+\t\t\t\t\t\t\tconst data = unsafeCacheData.get(cachedModule);\n+\t\t\t\t\t\t\tcachedModule.restoreFromUnsafeCache(\n+\t\t\t\t\t\t\t\tdata,\n+\t\t\t\t\t\t\t\tthis.params.normalModuleFactory,\n+\t\t\t\t\t\t\t\tthis.params\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tthis._restoredUnsafeCacheEntries.add(cachedModule);\n+\t\t\t\t\t\t\tif (!this.modules.has(cachedModule)) {\n+\t\t\t\t\t\t\t\tthis._handleNewModuleFromUnsafeCache(module, dep, cachedModule);\n+\t\t\t\t\t\t\t\tunsafeRestoredModules.add(cachedModule);\n+\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tthis._handleExistingModuleFromUnsafeCache(\n+\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\tdep,\n+\t\t\t\t\t\t\tcachedModule\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\treturn;\n+\t\t\t\t\t}\n+\t\t\t\t} catch (e) {\n+\t\t\t\t\tconsole.error(e);\n+\t\t\t\t}\n+\t\t\t}\n \t\t\tconst resourceIdent = dep.getResourceIdentifier();\n \t\t\tif (resourceIdent !== undefined && resourceIdent !== null) {\n \t\t\t\tconst category = dep.category;\n@@ -1502,35 +1565,86 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\treturn callback(e);\n \t\t}\n \n-\t\tif (sortedDependencies.length === 0) {\n+\t\tif (sortedDependencies.length === 0 && unsafeRestoredModules.size === 0) {\n \t\t\tcallback();\n \t\t\treturn;\n \t\t}\n \n \t\t// This is nested so we need to allow one additional task\n \t\tthis.processDependenciesQueue.increaseParallelism();\n \n-\t\tasyncLib.forEach(\n-\t\t\tsortedDependencies,\n-\t\t\t(item, callback) => {\n-\t\t\t\tthis.handleModuleCreation(item, err => {\n-\t\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n-\t\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n-\t\t\t\t\t// leaking the Compilation object.\n-\t\t\t\t\tif (err && this.bail) {\n-\t\t\t\t\t\t// eslint-disable-next-line no-self-assign\n-\t\t\t\t\t\terr.stack = err.stack;\n-\t\t\t\t\t\treturn callback(err);\n-\t\t\t\t\t}\n-\t\t\t\t\tcallback();\n-\t\t\t\t});\n-\t\t\t},\n-\t\t\terr => {\n-\t\t\t\tthis.processDependenciesQueue.decreaseParallelism();\n+\t\tconst processSortedDependency = (item, callback) => {\n+\t\t\tthis.handleModuleCreation(item, err => {\n+\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n+\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n+\t\t\t\t// leaking the Compilation object.\n+\t\t\t\tif (err && this.bail) {\n+\t\t\t\t\t// eslint-disable-next-line no-self-assign\n+\t\t\t\t\terr.stack = err.stack;\n+\t\t\t\t\treturn callback(err);\n+\t\t\t\t}\n+\t\t\t\tcallback();\n+\t\t\t});\n+\t\t};\n \n-\t\t\t\treturn callback(err);\n-\t\t\t}\n+\t\tconst processUnsafeRestoredModule = (item, callback) => {\n+\t\t\tthis._handleModuleBuildAndDependencies(module, item, true, callback);\n+\t\t};\n+\n+\t\tconst finalCallback = err => {\n+\t\t\tthis.processDependenciesQueue.decreaseParallelism();\n+\n+\t\t\treturn callback(err);\n+\t\t};\n+\n+\t\tif (sortedDependencies.length === 0) {\n+\t\t\tasyncLib.forEach(\n+\t\t\t\tunsafeRestoredModules,\n+\t\t\t\tprocessUnsafeRestoredModule,\n+\t\t\t\tfinalCallback\n+\t\t\t);\n+\t\t} else if (unsafeRestoredModules.size === 0) {\n+\t\t\tasyncLib.forEach(\n+\t\t\t\tsortedDependencies,\n+\t\t\t\tprocessSortedDependency,\n+\t\t\t\tfinalCallback\n+\t\t\t);\n+\t\t} else {\n+\t\t\tasyncLib.parallel(\n+\t\t\t\t[\n+\t\t\t\t\tcb =>\n+\t\t\t\t\t\tasyncLib.forEach(\n+\t\t\t\t\t\t\tunsafeRestoredModules,\n+\t\t\t\t\t\t\tprocessUnsafeRestoredModule,\n+\t\t\t\t\t\t\tcb\n+\t\t\t\t\t\t),\n+\t\t\t\t\tcb =>\n+\t\t\t\t\t\tasyncLib.forEach(sortedDependencies, processSortedDependency, cb)\n+\t\t\t\t],\n+\t\t\t\tfinalCallback\n+\t\t\t);\n+\t\t}\n+\t}\n+\n+\t_handleNewModuleFromUnsafeCache(originModule, dependency, module) {\n+\t\tconst moduleGraph = this.moduleGraph;\n+\n+\t\tmoduleGraph.setResolvedModule(originModule, dependency, module);\n+\n+\t\tmoduleGraph.setIssuerIfUnset(\n+\t\t\tmodule,\n+\t\t\toriginModule !== undefined ? originModule : null\n \t\t);\n+\n+\t\tthis._modules.set(module.identifier(), module);\n+\t\tthis.modules.add(module);\n+\t\tModuleGraph.setModuleGraphForModule(module, this.moduleGraph);\n+\t}\n+\n+\t_handleExistingModuleFromUnsafeCache(originModule, dependency, module) {\n+\t\tconst moduleGraph = this.moduleGraph;\n+\n+\t\tmoduleGraph.setResolvedModule(originModule, dependency, module);\n \t}\n \n \t/**\n@@ -1570,12 +1684,27 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\tcurrentProfile,\n \t\t\t\tfactory,\n \t\t\t\tdependencies,\n+\t\t\t\tfactoryResult: true,\n \t\t\t\toriginModule,\n \t\t\t\tcontextInfo,\n \t\t\t\tcontext\n \t\t\t},\n-\t\t\t(err, newModule) => {\n+\t\t\t(err, factoryResult) => {\n+\t\t\t\tconst applyFactoryResultDependencies = () => {\n+\t\t\t\t\tconst { fileDependencies, contextDependencies, missingDependencies } =\n+\t\t\t\t\t\tfactoryResult;\n+\t\t\t\t\tif (fileDependencies) {\n+\t\t\t\t\t\tthis.fileDependencies.addAll(fileDependencies);\n+\t\t\t\t\t}\n+\t\t\t\t\tif (contextDependencies) {\n+\t\t\t\t\t\tthis.contextDependencies.addAll(contextDependencies);\n+\t\t\t\t\t}\n+\t\t\t\t\tif (missingDependencies) {\n+\t\t\t\t\t\tthis.missingDependencies.addAll(missingDependencies);\n+\t\t\t\t\t}\n+\t\t\t\t};\n \t\t\t\tif (err) {\n+\t\t\t\t\tif (factoryResult) applyFactoryResultDependencies();\n \t\t\t\t\tif (dependencies.every(d => d.optional)) {\n \t\t\t\t\t\tthis.warnings.push(err);\n \t\t\t\t\t\treturn callback();\n@@ -1585,7 +1714,10 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t}\n \t\t\t\t}\n \n+\t\t\t\tconst newModule = factoryResult.module;\n+\n \t\t\t\tif (!newModule) {\n+\t\t\t\t\tapplyFactoryResultDependencies();\n \t\t\t\t\treturn callback();\n \t\t\t\t}\n \n@@ -1595,6 +1727,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \n \t\t\t\tthis.addModule(newModule, (err, module) => {\n \t\t\t\t\tif (err) {\n+\t\t\t\t\t\tapplyFactoryResultDependencies();\n \t\t\t\t\t\tif (!err.module) {\n \t\t\t\t\t\t\terr.module = module;\n \t\t\t\t\t\t}\n@@ -1603,13 +1736,37 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t\treturn callback(err);\n \t\t\t\t\t}\n \n-\t\t\t\t\tfor (let i = 0; i < dependencies.length; i++) {\n-\t\t\t\t\t\tconst dependency = dependencies[i];\n-\t\t\t\t\t\tmoduleGraph.setResolvedModule(\n-\t\t\t\t\t\t\tconnectOrigin ? originModule : null,\n-\t\t\t\t\t\t\tdependency,\n-\t\t\t\t\t\t\tmodule\n-\t\t\t\t\t\t);\n+\t\t\t\t\tif (\n+\t\t\t\t\t\tthis._unsafeCache &&\n+\t\t\t\t\t\tfactoryResult.cacheable !== false &&\n+\t\t\t\t\t\t/** @type {any} */ (module).restoreFromUnsafeCache &&\n+\t\t\t\t\t\tthis._unsafeCachePredicate(module)\n+\t\t\t\t\t) {\n+\t\t\t\t\t\tfor (let i = 0; i < dependencies.length; i++) {\n+\t\t\t\t\t\t\tconst dependency = dependencies[i];\n+\t\t\t\t\t\t\tmoduleGraph.setResolvedModule(\n+\t\t\t\t\t\t\t\tconnectOrigin ? originModule : null,\n+\t\t\t\t\t\t\t\tdependency,\n+\t\t\t\t\t\t\t\tmodule\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tunsafeCacheDependencies.set(\n+\t\t\t\t\t\t\t\tdependency,\n+\t\t\t\t\t\t\t\t/** @type {any} */ (module)\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (!unsafeCacheData.has(module)) {\n+\t\t\t\t\t\t\tunsafeCacheData.set(module, module.getUnsafeCacheData());\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tapplyFactoryResultDependencies();\n+\t\t\t\t\t\tfor (let i = 0; i < dependencies.length; i++) {\n+\t\t\t\t\t\t\tconst dependency = dependencies[i];\n+\t\t\t\t\t\t\tmoduleGraph.setResolvedModule(\n+\t\t\t\t\t\t\t\tconnectOrigin ? originModule : null,\n+\t\t\t\t\t\t\t\tdependency,\n+\t\t\t\t\t\t\t\tmodule\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \n \t\t\t\t\tmoduleGraph.setIssuerIfUnset(\n@@ -1627,99 +1784,89 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \n-\t\t\t\t\t// Check for cycles when build is trigger inside another build\n-\t\t\t\t\tlet creatingModuleDuringBuildSet = undefined;\n-\t\t\t\t\tif (!recursive && this.buildQueue.isProcessing(originModule)) {\n-\t\t\t\t\t\t// Track build dependency\n-\t\t\t\t\t\tcreatingModuleDuringBuildSet =\n-\t\t\t\t\t\t\tthis.creatingModuleDuringBuild.get(originModule);\n-\t\t\t\t\t\tif (creatingModuleDuringBuildSet === undefined) {\n-\t\t\t\t\t\t\tcreatingModuleDuringBuildSet = new Set();\n-\t\t\t\t\t\t\tthis.creatingModuleDuringBuild.set(\n-\t\t\t\t\t\t\t\toriginModule,\n-\t\t\t\t\t\t\t\tcreatingModuleDuringBuildSet\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tcreatingModuleDuringBuildSet.add(originModule);\n-\n-\t\t\t\t\t\t// When building is blocked by another module\n-\t\t\t\t\t\t// search for a cycle, cancel the cycle by throwing\n-\t\t\t\t\t\t// an error (otherwise this would deadlock)\n-\t\t\t\t\t\tconst blockReasons = this.creatingModuleDuringBuild.get(module);\n-\t\t\t\t\t\tif (blockReasons !== undefined) {\n-\t\t\t\t\t\t\tconst set = new Set(blockReasons);\n-\t\t\t\t\t\t\tfor (const item of set) {\n-\t\t\t\t\t\t\t\tconst blockReasons = this.creatingModuleDuringBuild.get(item);\n-\t\t\t\t\t\t\t\tif (blockReasons !== undefined) {\n-\t\t\t\t\t\t\t\t\tfor (const m of blockReasons) {\n-\t\t\t\t\t\t\t\t\t\tif (m === module) {\n-\t\t\t\t\t\t\t\t\t\t\treturn callback(new BuildCycleError(module));\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\tset.add(m);\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n+\t\t\t\t\tthis._handleModuleBuildAndDependencies(\n+\t\t\t\t\t\toriginModule,\n+\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\trecursive,\n+\t\t\t\t\t\tcallback\n+\t\t\t\t\t);\n+\t\t\t\t});\n+\t\t\t}\n+\t\t);\n+\t}\n \n-\t\t\t\t\tthis.buildModule(module, err => {\n-\t\t\t\t\t\tif (creatingModuleDuringBuildSet !== undefined) {\n-\t\t\t\t\t\t\tcreatingModuleDuringBuildSet.delete(module);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\tif (!err.module) {\n-\t\t\t\t\t\t\t\terr.module = module;\n+\t_handleModuleBuildAndDependencies(originModule, module, recursive, callback) {\n+\t\t// Check for cycles when build is trigger inside another build\n+\t\tlet creatingModuleDuringBuildSet = undefined;\n+\t\tif (!recursive && this.buildQueue.isProcessing(originModule)) {\n+\t\t\t// Track build dependency\n+\t\t\tcreatingModuleDuringBuildSet =\n+\t\t\t\tthis.creatingModuleDuringBuild.get(originModule);\n+\t\t\tif (creatingModuleDuringBuildSet === undefined) {\n+\t\t\t\tcreatingModuleDuringBuildSet = new Set();\n+\t\t\t\tthis.creatingModuleDuringBuild.set(\n+\t\t\t\t\toriginModule,\n+\t\t\t\t\tcreatingModuleDuringBuildSet\n+\t\t\t\t);\n+\t\t\t}\n+\t\t\tcreatingModuleDuringBuildSet.add(originModule);\n+\n+\t\t\t// When building is blocked by another module\n+\t\t\t// search for a cycle, cancel the cycle by throwing\n+\t\t\t// an error (otherwise this would deadlock)\n+\t\t\tconst blockReasons = this.creatingModuleDuringBuild.get(module);\n+\t\t\tif (blockReasons !== undefined) {\n+\t\t\t\tconst set = new Set(blockReasons);\n+\t\t\t\tfor (const item of set) {\n+\t\t\t\t\tconst blockReasons = this.creatingModuleDuringBuild.get(item);\n+\t\t\t\t\tif (blockReasons !== undefined) {\n+\t\t\t\t\t\tfor (const m of blockReasons) {\n+\t\t\t\t\t\t\tif (m === module) {\n+\t\t\t\t\t\t\t\treturn callback(new BuildCycleError(module));\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tthis.errors.push(err);\n-\n-\t\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\t\tset.add(m);\n \t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n \n-\t\t\t\t\t\tif (!recursive) {\n-\t\t\t\t\t\t\tthis.processModuleDependenciesNonRecursive(module);\n-\t\t\t\t\t\t\tcallback(null, module);\n-\t\t\t\t\t\t\treturn;\n-\t\t\t\t\t\t}\n+\t\tthis.buildModule(module, err => {\n+\t\t\tif (creatingModuleDuringBuildSet !== undefined) {\n+\t\t\t\tcreatingModuleDuringBuildSet.delete(module);\n+\t\t\t}\n+\t\t\tif (err) {\n+\t\t\t\tif (!err.module) {\n+\t\t\t\t\terr.module = module;\n+\t\t\t\t}\n+\t\t\t\tthis.errors.push(err);\n \n-\t\t\t\t\t\t// This avoids deadlocks for circular dependencies\n-\t\t\t\t\t\tif (this.processDependenciesQueue.isProcessing(module)) {\n-\t\t\t\t\t\t\treturn callback();\n-\t\t\t\t\t\t}\n+\t\t\t\treturn callback(err);\n+\t\t\t}\n \n-\t\t\t\t\t\tthis.processModuleDependencies(module, err => {\n-\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\treturn callback(err);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tcallback(null, module);\n-\t\t\t\t\t\t});\n-\t\t\t\t\t});\n-\t\t\t\t});\n+\t\t\tif (!recursive) {\n+\t\t\t\tthis.processModuleDependenciesNonRecursive(module);\n+\t\t\t\tcallback(null, module);\n+\t\t\t\treturn;\n \t\t\t}\n-\t\t);\n-\t}\n \n-\t/**\n-\t * @typedef {Object} FactorizeModuleOptions\n-\t * @property {ModuleProfile} currentProfile\n-\t * @property {ModuleFactory} factory\n-\t * @property {Dependency[]} dependencies\n-\t * @property {Module | null} originModule\n-\t * @property {Partial<ModuleFactoryCreateDataContextInfo>=} contextInfo\n-\t * @property {string=} context\n-\t */\n+\t\t\t// This avoids deadlocks for circular dependencies\n+\t\t\tif (this.processDependenciesQueue.isProcessing(module)) {\n+\t\t\t\treturn callback();\n+\t\t\t}\n \n-\t/**\n-\t * @param {FactorizeModuleOptions} options options object\n-\t * @param {ModuleCallback} callback callback\n-\t * @returns {void}\n-\t */\n-\tfactorizeModule(options, callback) {\n-\t\tthis.factorizeQueue.add(options, callback);\n+\t\t\tthis.processModuleDependencies(module, err => {\n+\t\t\t\tif (err) {\n+\t\t\t\t\treturn callback(err);\n+\t\t\t\t}\n+\t\t\t\tcallback(null, module);\n+\t\t\t});\n+\t\t});\n \t}\n \n \t/**\n \t * @param {FactorizeModuleOptions} options options object\n-\t * @param {ModuleCallback} callback callback\n+\t * @param {ModuleOrFactoryResultCallback} callback callback\n \t * @returns {void}\n \t */\n \t_factorizeModule(\n@@ -1728,6 +1875,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\tfactory,\n \t\t\tdependencies,\n \t\t\toriginModule,\n+\t\t\tfactoryResult,\n \t\t\tcontextInfo,\n \t\t\tcontext\n \t\t},\n@@ -1761,16 +1909,21 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t\t\tmodule: result\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n-\t\t\t\t\tconst { fileDependencies, contextDependencies, missingDependencies } =\n-\t\t\t\t\t\tresult;\n-\t\t\t\t\tif (fileDependencies) {\n-\t\t\t\t\t\tthis.fileDependencies.addAll(fileDependencies);\n-\t\t\t\t\t}\n-\t\t\t\t\tif (contextDependencies) {\n-\t\t\t\t\t\tthis.contextDependencies.addAll(contextDependencies);\n-\t\t\t\t\t}\n-\t\t\t\t\tif (missingDependencies) {\n-\t\t\t\t\t\tthis.missingDependencies.addAll(missingDependencies);\n+\t\t\t\t\tif (!factoryResult) {\n+\t\t\t\t\t\tconst {\n+\t\t\t\t\t\t\tfileDependencies,\n+\t\t\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\t\t\tmissingDependencies\n+\t\t\t\t\t\t} = result;\n+\t\t\t\t\t\tif (fileDependencies) {\n+\t\t\t\t\t\t\tthis.fileDependencies.addAll(fileDependencies);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (contextDependencies) {\n+\t\t\t\t\t\t\tthis.contextDependencies.addAll(contextDependencies);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (missingDependencies) {\n+\t\t\t\t\t\t\tthis.missingDependencies.addAll(missingDependencies);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (err) {\n@@ -1779,20 +1932,17 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t\terr,\n \t\t\t\t\t\tdependencies.map(d => d.loc).filter(Boolean)[0]\n \t\t\t\t\t);\n-\t\t\t\t\treturn callback(notFoundError);\n+\t\t\t\t\treturn callback(notFoundError, factoryResult ? result : undefined);\n \t\t\t\t}\n \t\t\t\tif (!result) {\n \t\t\t\t\treturn callback();\n \t\t\t\t}\n-\t\t\t\tconst newModule = result.module;\n-\t\t\t\tif (!newModule) {\n-\t\t\t\t\treturn callback();\n-\t\t\t\t}\n+\n \t\t\t\tif (currentProfile !== undefined) {\n \t\t\t\t\tcurrentProfile.markFactoryEnd();\n \t\t\t\t}\n \n-\t\t\t\tcallback(null, newModule);\n+\t\t\t\tcallback(null, factoryResult ? result : result.module);\n \t\t\t}\n \t\t);\n \t}\n@@ -4646,6 +4796,33 @@ This prevents using hashes of each other and should be avoided.`);\n \t}\n }\n \n+/**\n+ * @typedef {Object} FactorizeModuleOptions\n+ * @property {ModuleProfile} currentProfile\n+ * @property {ModuleFactory} factory\n+ * @property {Dependency[]} dependencies\n+ * @property {boolean=} factoryResult return full ModuleFactoryResult instead of only module\n+ * @property {Module | null} originModule\n+ * @property {Partial<ModuleFactoryCreateDataContextInfo>=} contextInfo\n+ * @property {string=} context\n+ */\n+\n+/**\n+ * @param {FactorizeModuleOptions} options options object\n+ * @param {ModuleCallback | ModuleFactoryResultCallback} callback callback\n+ * @returns {void}\n+ */\n+\n+// Workaround for typescript as it doesn't support function overloading in jsdoc within a class\n+Compilation.prototype.factorizeModule = /** @type {{\n+\t(options: FactorizeModuleOptions & { factoryResult?: false }, callback: ModuleCallback): void;\n+\t(options: FactorizeModuleOptions & { factoryResult: true }, callback: ModuleFactoryResultCallback): void;\n+}} */ (\n+\tfunction (options, callback) {\n+\t\tthis.factorizeQueue.add(options, callback);\n+\t}\n+);\n+\n // Hide from typescript\n const compilationPrototype = Compilation.prototype;\n "
      },
      {
        "sha": "eade25766d6a13e86a9ccbef1187d0ff4b3aafb9",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=8ef452a5b813986ce95b590fc2d51ec510a7ca3c",
        "patch": "@@ -1035,17 +1035,17 @@ ${other}`);\n \t\treturn !!this.parentCompilation;\n \t}\n \n-\tcreateCompilation() {\n+\tcreateCompilation(params) {\n \t\tthis._cleanupLastCompilation();\n-\t\treturn (this._lastCompilation = new Compilation(this));\n+\t\treturn (this._lastCompilation = new Compilation(this, params));\n \t}\n \n \t/**\n \t * @param {CompilationParams} params the compilation parameters\n \t * @returns {Compilation} the created compilation\n \t */\n \tnewCompilation(params) {\n-\t\tconst compilation = this.createCompilation();\n+\t\tconst compilation = this.createCompilation(params);\n \t\tcompilation.name = this.name;\n \t\tcompilation.records = this.records;\n \t\tthis.hooks.thisCompilation.call(compilation, params);"
      },
      {
        "sha": "0cc084c061596e16fc928484588fe6942e107a51",
        "filename": "lib/ModuleFactory.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleFactory.js?ref=8ef452a5b813986ce95b590fc2d51ec510a7ca3c",
        "patch": "@@ -15,6 +15,7 @@\n  * @property {Set<string>=} fileDependencies\n  * @property {Set<string>=} contextDependencies\n  * @property {Set<string>=} missingDependencies\n+ * @property {boolean=} cacheable allow to use the unsafe cache\n  */\n \n /**"
      },
      {
        "sha": "9a1b22519e47cb3ea8fbcfd315d52da7d63aeec1",
        "filename": "lib/NormalModuleFactory.js",
        "status": "modified",
        "additions": 8,
        "deletions": 43,
        "changes": 51,
        "blob_url": "https://github.com/webpack/webpack/blob/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FNormalModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/lib%2FNormalModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModuleFactory.js?ref=8ef452a5b813986ce95b590fc2d51ec510a7ca3c",
        "patch": "@@ -167,12 +167,6 @@ const deprecationChangedHookMessage = (name, hook) => {\n \t);\n };\n \n-/** @type {WeakMap<ModuleDependency, ModuleFactoryResult & { module: { restoreFromUnsafeCache: Function }}>} */\n-const unsafeCacheDependencies = new WeakMap();\n-\n-/** @type {WeakMap<Module, object>} */\n-const unsafeCacheData = new WeakMap();\n-\n const ruleSetCompiler = new RuleSetCompiler([\n \tnew BasicMatcherRulePlugin(\"test\", \"resource\"),\n \tnew BasicMatcherRulePlugin(\"scheme\"),\n@@ -256,11 +250,6 @@ class NormalModuleFactory extends ModuleFactory {\n \t\t\t\trules: options.rules\n \t\t\t}\n \t\t]);\n-\t\tthis.unsafeCache = !!options.unsafeCache;\n-\t\tthis.cachePredicate =\n-\t\t\ttypeof options.unsafeCache === \"function\"\n-\t\t\t\t? options.unsafeCache\n-\t\t\t\t: () => true;\n \t\tthis.context = context || \"\";\n \t\tthis.fs = fs;\n \t\tthis._globalParserOptions = options.parser;\n@@ -745,18 +734,6 @@ class NormalModuleFactory extends ModuleFactory {\n \t */\n \tcreate(data, callback) {\n \t\tconst dependencies = /** @type {ModuleDependency[]} */ (data.dependencies);\n-\t\tif (this.unsafeCache) {\n-\t\t\tconst cacheEntry = unsafeCacheDependencies.get(dependencies[0]);\n-\t\t\tif (cacheEntry) {\n-\t\t\t\tconst { module } = cacheEntry;\n-\t\t\t\tif (!this._restoredUnsafeCacheEntries.has(module)) {\n-\t\t\t\t\tconst data = unsafeCacheData.get(module);\n-\t\t\t\t\tmodule.restoreFromUnsafeCache(data, this);\n-\t\t\t\t\tthis._restoredUnsafeCacheEntries.add(module);\n-\t\t\t\t}\n-\t\t\t\treturn callback(null, cacheEntry);\n-\t\t\t}\n-\t\t}\n \t\tconst context = data.context || this.context;\n \t\tconst resolveOptions = data.resolveOptions || EMPTY_RESOLVE_OPTIONS;\n \t\tconst dependency = dependencies[0];\n@@ -788,7 +765,8 @@ class NormalModuleFactory extends ModuleFactory {\n \t\t\t\treturn callback(err, {\n \t\t\t\t\tfileDependencies,\n \t\t\t\t\tmissingDependencies,\n-\t\t\t\t\tcontextDependencies\n+\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\tcacheable: false\n \t\t\t\t});\n \t\t\t}\n \n@@ -797,7 +775,8 @@ class NormalModuleFactory extends ModuleFactory {\n \t\t\t\treturn callback(null, {\n \t\t\t\t\tfileDependencies,\n \t\t\t\t\tmissingDependencies,\n-\t\t\t\t\tcontextDependencies\n+\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\tcacheable: resolveData.cacheable\n \t\t\t\t});\n \t\t\t}\n \n@@ -814,33 +793,19 @@ class NormalModuleFactory extends ModuleFactory {\n \t\t\t\t\treturn callback(err, {\n \t\t\t\t\t\tfileDependencies,\n \t\t\t\t\t\tmissingDependencies,\n-\t\t\t\t\t\tcontextDependencies\n+\t\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\t\tcacheable: false\n \t\t\t\t\t});\n \t\t\t\t}\n \n \t\t\t\tconst factoryResult = {\n \t\t\t\t\tmodule,\n \t\t\t\t\tfileDependencies,\n \t\t\t\t\tmissingDependencies,\n-\t\t\t\t\tcontextDependencies\n+\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\tcacheable: resolveData.cacheable\n \t\t\t\t};\n \n-\t\t\t\tif (\n-\t\t\t\t\tthis.unsafeCache &&\n-\t\t\t\t\tresolveData.cacheable &&\n-\t\t\t\t\tmodule &&\n-\t\t\t\t\tmodule.restoreFromUnsafeCache &&\n-\t\t\t\t\tthis.cachePredicate(module)\n-\t\t\t\t) {\n-\t\t\t\t\tfor (const d of dependencies) {\n-\t\t\t\t\t\tunsafeCacheDependencies.set(d, factoryResult);\n-\t\t\t\t\t}\n-\t\t\t\t\tif (!unsafeCacheData.has(module)) {\n-\t\t\t\t\t\tunsafeCacheData.set(module, module.getUnsafeCacheData());\n-\t\t\t\t\t}\n-\t\t\t\t\tthis._restoredUnsafeCacheEntries.add(module);\n-\t\t\t\t}\n-\n \t\t\t\tcallback(null, factoryResult);\n \t\t\t});\n \t\t});"
      },
      {
        "sha": "e79abba3493bdcad8a0e263367332d2979448d96",
        "filename": "test/configCases/cache-dependencies/managed-items/webpack.config.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/test%2FconfigCases%2Fcache-dependencies%2Fmanaged-items%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/test%2FconfigCases%2Fcache-dependencies%2Fmanaged-items%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcache-dependencies%2Fmanaged-items%2Fwebpack.config.js?ref=8ef452a5b813986ce95b590fc2d51ec510a7ca3c",
        "patch": "@@ -23,5 +23,8 @@ module.exports = {\n \t\t\t\texpect(fileDeps).toContain(path.resolve(__dirname, \"index.js\"));\n \t\t\t});\n \t\t}\n-\t]\n+\t],\n+\tmodule: {\n+\t\tunsafeCache: false\n+\t}\n };"
      },
      {
        "sha": "8021c4c8df441f3b8d6ac6f8b31e180b8997e429",
        "filename": "test/watchCases/snapshot/unable-to-snapshot/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/test%2FwatchCases%2Fsnapshot%2Funable-to-snapshot%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/test%2FwatchCases%2Fsnapshot%2Funable-to-snapshot%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fsnapshot%2Funable-to-snapshot%2Fwebpack.config.js?ref=8ef452a5b813986ce95b590fc2d51ec510a7ca3c",
        "patch": "@@ -6,5 +6,8 @@ module.exports = (env, { srcPath }) => ({\n \t},\n \tsnapshot: {\n \t\tmanagedPaths: [path.resolve(srcPath, \"node_modules\")]\n+\t},\n+\tmodule: {\n+\t\tunsafeCache: false\n \t}\n });"
      },
      {
        "sha": "d00da846c9c065450d0fbd86f424d12a1f07bd7d",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 28,
        "deletions": 9,
        "changes": 37,
        "blob_url": "https://github.com/webpack/webpack/blob/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/8ef452a5b813986ce95b590fc2d51ec510a7ca3c/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=8ef452a5b813986ce95b590fc2d51ec510a7ca3c",
        "patch": "@@ -1299,7 +1299,7 @@ declare class Compilation {\n \t/**\n \t * Creates an instance of Compilation.\n \t */\n-\tconstructor(compiler: Compiler);\n+\tconstructor(compiler: Compiler, params: CompilationParams);\n \thooks: Readonly<{\n \t\tbuildModule: SyncHook<[Module]>;\n \t\trebuildModule: SyncHook<[Module]>;\n@@ -1455,6 +1455,7 @@ declare class Compilation {\n \toutputOptions: OutputNormalized;\n \tbail: boolean;\n \tprofile: boolean;\n+\tparams: CompilationParams;\n \tmainTemplate: MainTemplate;\n \tchunkTemplate: ChunkTemplate;\n \truntimeTemplate: RuntimeTemplate;\n@@ -1465,7 +1466,11 @@ declare class Compilation {\n \tcodeGenerationResults: CodeGenerationResults;\n \tprocessDependenciesQueue: AsyncQueue<Module, Module, Module>;\n \taddModuleQueue: AsyncQueue<Module, string, Module>;\n-\tfactorizeQueue: AsyncQueue<FactorizeModuleOptions, string, Module>;\n+\tfactorizeQueue: AsyncQueue<\n+\t\tFactorizeModuleOptions,\n+\t\tstring,\n+\t\tModule | ModuleFactoryResult\n+\t>;\n \tbuildQueue: AsyncQueue<Module, Module, Module>;\n \trebuildQueue: AsyncQueue<Module, Module, Module>;\n \n@@ -1548,10 +1553,6 @@ declare class Compilation {\n \t\t__0: HandleModuleCreationOptions,\n \t\tcallback: (err?: WebpackError, result?: Module) => void\n \t): void;\n-\tfactorizeModule(\n-\t\toptions: FactorizeModuleOptions,\n-\t\tcallback: (err?: WebpackError, result?: Module) => void\n-\t): void;\n \taddModuleChain(\n \t\tcontext: string,\n \t\tdependency: Dependency,\n@@ -1718,6 +1719,16 @@ declare class Compilation {\n \t\tcallback: (err?: WebpackError, result?: ExecuteModuleResult) => void\n \t): void;\n \tcheckConstraints(): void;\n+\tfactorizeModule: {\n+\t\t(\n+\t\t\toptions: FactorizeModuleOptions & { factoryResult?: false },\n+\t\t\tcallback: (err?: WebpackError, result?: Module) => void\n+\t\t): void;\n+\t\t(\n+\t\t\toptions: FactorizeModuleOptions & { factoryResult: true },\n+\t\t\tcallback: (err?: WebpackError, result?: ModuleFactoryResult) => void\n+\t\t): void;\n+\t};\n \n \t/**\n \t * Add additional assets to the compilation.\n@@ -1923,7 +1934,7 @@ declare class Compiler {\n \t\tplugins?: WebpackPluginInstance[]\n \t): Compiler;\n \tisChild(): boolean;\n-\tcreateCompilation(): Compilation;\n+\tcreateCompilation(params?: any): Compilation;\n \tnewCompilation(params: CompilationParams): Compilation;\n \tcreateNormalModuleFactory(): NormalModuleFactory;\n \tcreateContextModuleFactory(): ContextModuleFactory;\n@@ -3824,6 +3835,11 @@ declare interface FactorizeModuleOptions {\n \tcurrentProfile: ModuleProfile;\n \tfactory: ModuleFactory;\n \tdependencies: Dependency[];\n+\n+\t/**\n+\t * return full ModuleFactoryResult instead of only module\n+\t */\n+\tfactoryResult?: boolean;\n \toriginModule: null | Module;\n \tcontextInfo?: Partial<ModuleFactoryCreateDataContextInfo>;\n \tcontext?: string;\n@@ -6551,6 +6567,11 @@ declare interface ModuleFactoryResult {\n \tfileDependencies?: Set<string>;\n \tcontextDependencies?: Set<string>;\n \tmissingDependencies?: Set<string>;\n+\n+\t/**\n+\t * allow to use the unsafe cache\n+\t */\n+\tcacheable?: boolean;\n }\n declare class ModuleFederationPlugin {\n \tconstructor(options: ModuleFederationPluginOptions);\n@@ -7371,8 +7392,6 @@ declare abstract class NormalModuleFactory extends ModuleFactory {\n \t}>;\n \tresolverFactory: ResolverFactory;\n \truleSet: RuleSet;\n-\tunsafeCache: boolean;\n-\tcachePredicate: Function;\n \tcontext: string;\n \tfs: InputFileSystem;\n \tparserCache: Map<string, WeakMap<Object, any>>;"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14414",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14414/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14414/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14414/events",
    "html_url": "https://github.com/webpack/webpack/pull/14414",
    "id": 1016660299,
    "node_id": "PR_kwDOADgiC84stl7K",
    "number": 14414,
    "title": "improve chunk graph creation performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-10-05T18:38:22Z",
    "updated_at": "2021-10-06T18:18:44Z",
    "closed_at": "2021-10-06T18:18:43Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14414",
      "html_url": "https://github.com/webpack/webpack/pull/14414",
      "diff_url": "https://github.com/webpack/webpack/pull/14414.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14414.patch",
      "merged_at": "2021-10-06T18:18:43Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance, caching\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14414/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14414/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5fddec389632a42203c500b75f03c8421b2bf581",
        "filename": "lib/AsyncDependenciesBlock.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FAsyncDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FAsyncDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FAsyncDependenciesBlock.js?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -33,8 +33,6 @@ class AsyncDependenciesBlock extends DependenciesBlock {\n \t\tthis.groupOptions = groupOptions;\n \t\tthis.loc = loc;\n \t\tthis.request = request;\n-\t\t/** @type {DependenciesBlock} */\n-\t\tthis.parent = undefined;\n \t\tthis._stringifiedGroupOptions = undefined;\n \t}\n "
      },
      {
        "sha": "9fd620e21fe652e480f15aa8d696b7c3aed71e8b",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 7,
        "deletions": 4,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -1405,8 +1405,9 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \tprocessModuleDependenciesNonRecursive(module) {\n \t\tconst processDependenciesBlock = block => {\n \t\t\tif (block.dependencies) {\n+\t\t\t\tlet i = 0;\n \t\t\t\tfor (const dep of block.dependencies) {\n-\t\t\t\t\tthis.moduleGraph.setParents(dep, block, module);\n+\t\t\t\t\tthis.moduleGraph.setParents(dep, block, module, i++);\n \t\t\t\t}\n \t\t\t}\n \t\t\tif (block.blocks) {\n@@ -1450,10 +1451,11 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \n \t\t/**\n \t\t * @param {Dependency} dep dependency\n+\t\t * @param {number} index index in block\n \t\t * @returns {void}\n \t\t */\n-\t\tconst processDependency = dep => {\n-\t\t\tthis.moduleGraph.setParents(dep, currentBlock, module);\n+\t\tconst processDependency = (dep, index) => {\n+\t\t\tthis.moduleGraph.setParents(dep, currentBlock, module, index);\n \t\t\tif (this._unsafeCache) {\n \t\t\t\ttry {\n \t\t\t\t\tconst cachedModule = unsafeCacheDependencies.get(dep);\n@@ -1557,7 +1559,8 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\tconst block = queue.pop();\n \t\t\t\tif (block.dependencies) {\n \t\t\t\t\tcurrentBlock = block;\n-\t\t\t\t\tfor (const dep of block.dependencies) processDependency(dep);\n+\t\t\t\t\tlet i = 0;\n+\t\t\t\t\tfor (const dep of block.dependencies) processDependency(dep, i++);\n \t\t\t\t}\n \t\t\t\tif (block.blocks) {\n \t\t\t\t\tfor (const b of block.blocks) queue.push(b);"
      },
      {
        "sha": "5309a6172a9cd0ec684d1f0c23f8e80e935c7ae0",
        "filename": "lib/DependenciesBlock.js",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependenciesBlock.js?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -22,6 +22,15 @@ class DependenciesBlock {\n \t\tthis.dependencies = [];\n \t\t/** @type {AsyncDependenciesBlock[]} */\n \t\tthis.blocks = [];\n+\t\t/** @type {DependenciesBlock} */\n+\t\tthis.parent = undefined;\n+\t}\n+\n+\tgetRootBlock() {\n+\t\t/** @type {DependenciesBlock} */\n+\t\tlet current = this;\n+\t\twhile (current.parent) current = current.parent;\n+\t\treturn current;\n \t}\n \n \t/**"
      },
      {
        "sha": "ee20d84ab9b2fa2bcc91cbe4a0e748d11e337345",
        "filename": "lib/Dependency.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependency.js?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -91,6 +91,8 @@ class Dependency {\n \t\tthis._parentModule = undefined;\n \t\t/** @type {DependenciesBlock} */\n \t\tthis._parentDependenciesBlock = undefined;\n+\t\t/** @type {number} */\n+\t\tthis._parentDependenciesBlockIndex = -1;\n \t\t// TODO check if this can be moved into ModuleDependency\n \t\t/** @type {boolean} */\n \t\tthis.weak = false;"
      },
      {
        "sha": "1e3626de8c71131196660d616fc581822d2f27a4",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -163,9 +163,11 @@ class ModuleGraph {\n \t * @param {Dependency} dependency the dependency\n \t * @param {DependenciesBlock} block parent block\n \t * @param {Module} module parent module\n+\t * @param {number=} indexInBlock position in block\n \t * @returns {void}\n \t */\n-\tsetParents(dependency, block, module) {\n+\tsetParents(dependency, block, module, indexInBlock = -1) {\n+\t\tdependency._parentDependenciesBlockIndex = indexInBlock;\n \t\tdependency._parentDependenciesBlock = block;\n \t\tdependency._parentModule = module;\n \t}\n@@ -186,6 +188,14 @@ class ModuleGraph {\n \t\treturn dependency._parentDependenciesBlock;\n \t}\n \n+\t/**\n+\t * @param {Dependency} dependency the dependency\n+\t * @returns {number} index\n+\t */\n+\tgetParentBlockIndex(dependency) {\n+\t\treturn dependency._parentDependenciesBlockIndex;\n+\t}\n+\n \t/**\n \t * @param {Module} originModule the referencing module\n \t * @param {Dependency} dependency the referencing dependency"
      },
      {
        "sha": "1fa149438e52d8460c9adf8eaeb25da4465ed366",
        "filename": "lib/buildChunkGraph.js",
        "status": "modified",
        "additions": 157,
        "deletions": 100,
        "changes": 257,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -43,7 +43,7 @@ const { getEntryRuntime, mergeRuntime } = require(\"./util/runtime\");\n  * @property {boolean} minAvailableModulesOwned true, if minAvailableModules is owned and can be modified\n  * @property {ModuleSetPlus[]} availableModulesToBeMerged enqueued updates to the minimal set of available modules\n  * @property {Set<Module>=} skippedItems modules that were skipped because module is already available in parent chunks (need to reconsider when minAvailableModules is shrinking)\n- * @property {Set<[Module, ModuleGraphConnection[]]>=} skippedModuleConnections referenced modules that where skipped because they were not active in this runtime\n+ * @property {Set<[Module, ConnectionState]>=} skippedModuleConnections referenced modules that where skipped because they were not active in this runtime\n  * @property {ModuleSetPlus} resultingAvailableModules set of modules available including modules from this chunk group\n  * @property {Set<ChunkGroupInfo>} children set of children chunk groups, that will be revisited when availableModules shrink\n  * @property {Set<ChunkGroupInfo>} availableSources set of chunk groups that are the source for minAvailableModules\n@@ -70,97 +70,106 @@ const bySetSize = (a, b) => {\n \treturn b.size + b.plus.size - a.size - a.plus.size;\n };\n \n-/**\n- *\n- * @param {ModuleGraphConnection[]} connections list of connections\n- * @param {RuntimeSpec} runtime for which runtime\n- * @returns {ConnectionState} connection state\n- */\n-const getActiveStateOfConnections = (connections, runtime) => {\n-\tlet merged = connections[0].getActiveState(runtime);\n-\tif (merged === true) return true;\n-\tfor (let i = 1; i < connections.length; i++) {\n-\t\tconst c = connections[i];\n-\t\tmerged = ModuleGraphConnection.addConnectionStates(\n-\t\t\tmerged,\n-\t\t\tc.getActiveState(runtime)\n-\t\t);\n-\t\tif (merged === true) return true;\n+const extractBlockModules = (module, moduleGraph, runtime, blockModulesMap) => {\n+\tlet blockCache;\n+\tlet modules;\n+\n+\tconst arrays = [];\n+\n+\tconst queue = [module];\n+\twhile (queue.length > 0) {\n+\t\tconst block = queue.pop();\n+\t\tconst arr = [];\n+\t\tarrays.push(arr);\n+\t\tblockModulesMap.set(block, arr);\n+\t\tfor (const b of block.blocks) {\n+\t\t\tqueue.push(b);\n+\t\t}\n \t}\n-\treturn merged;\n-};\n \n-/**\n- * Extracts block to modules mapping from all modules\n- * @param {Compilation} compilation the compilation\n- * @returns {Map<DependenciesBlock, Map<Module, ModuleGraphConnection[]>>} the mapping block to modules\n- */\n-const extractBlockModulesMap = compilation => {\n-\tconst { moduleGraph } = compilation;\n-\n-\t/** @type {Map<DependenciesBlock, Map<Module, ModuleGraphConnection[]>>} */\n-\tconst blockModulesMap = new Map();\n-\n-\tconst blockQueue = new Set();\n-\n-\tfor (const module of compilation.modules) {\n-\t\t/** @type {WeakMap<Dependency, ModuleGraphConnection>} */\n-\t\tlet moduleMap;\n-\n-\t\tfor (const connection of moduleGraph.getOutgoingConnections(module)) {\n-\t\t\tconst d = connection.dependency;\n-\t\t\t// We skip connections without dependency\n-\t\t\tif (!d) continue;\n-\t\t\tconst m = connection.module;\n-\t\t\t// We skip connections without Module pointer\n-\t\t\tif (!m) continue;\n-\t\t\t// We skip weak connections\n-\t\t\tif (connection.weak) continue;\n-\t\t\tconst state = connection.getActiveState(undefined);\n-\t\t\t// We skip inactive connections\n-\t\t\tif (state === false) continue;\n-\t\t\t// Store Dependency to Module mapping in local map\n-\t\t\t// to allow to access it faster compared to\n-\t\t\t// moduleGraph.getConnection()\n-\t\t\tif (moduleMap === undefined) {\n-\t\t\t\tmoduleMap = new WeakMap();\n-\t\t\t}\n-\t\t\tmoduleMap.set(connection.dependency, connection);\n+\tfor (const connection of moduleGraph.getOutgoingConnections(module)) {\n+\t\tconst d = connection.dependency;\n+\t\t// We skip connections without dependency\n+\t\tif (!d) continue;\n+\t\tconst m = connection.module;\n+\t\t// We skip connections without Module pointer\n+\t\tif (!m) continue;\n+\t\t// We skip weak connections\n+\t\tif (connection.weak) continue;\n+\t\tconst state = connection.getActiveState(runtime);\n+\t\t// We skip inactive connections\n+\t\tif (state === false) continue;\n+\n+\t\tconst block = moduleGraph.getParentBlock(d);\n+\t\tlet index = moduleGraph.getParentBlockIndex(d);\n+\n+\t\t// deprecated fallback\n+\t\tif (index < 0) {\n+\t\t\tindex = block.dependencies.indexOf(d);\n \t\t}\n \n-\t\tblockQueue.clear();\n-\t\tblockQueue.add(module);\n-\t\tfor (const block of blockQueue) {\n-\t\t\tlet modules;\n-\n-\t\t\tif (moduleMap !== undefined && block.dependencies) {\n-\t\t\t\tfor (const dep of block.dependencies) {\n-\t\t\t\t\tconst connection = moduleMap.get(dep);\n-\t\t\t\t\tif (connection !== undefined) {\n-\t\t\t\t\t\tconst { module } = connection;\n-\t\t\t\t\t\tif (modules === undefined) {\n-\t\t\t\t\t\t\tmodules = new Map();\n-\t\t\t\t\t\t\tblockModulesMap.set(block, modules);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tconst old = modules.get(module);\n-\t\t\t\t\t\tif (old !== undefined) {\n-\t\t\t\t\t\t\told.push(connection);\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tmodules.set(module, [connection]);\n-\t\t\t\t\t\t}\n+\t\tif (blockCache !== block) {\n+\t\t\tmodules = blockModulesMap.get((blockCache = block));\n+\t\t}\n+\n+\t\tconst i = index << 2;\n+\t\tmodules[i] = m;\n+\t\tmodules[i + 1] = state;\n+\t}\n+\n+\tfor (const modules of arrays) {\n+\t\tif (modules.length === 0) continue;\n+\t\tlet indexMap;\n+\t\tlet length = 0;\n+\t\touter: for (let j = 0; j < modules.length; j += 2) {\n+\t\t\tconst m = modules[j];\n+\t\t\tif (m === undefined) continue;\n+\t\t\tconst state = modules[j + 1];\n+\t\t\tif (indexMap === undefined) {\n+\t\t\t\tlet i = 0;\n+\t\t\t\tfor (; i < length; i += 2) {\n+\t\t\t\t\tif (modules[i] === m) {\n+\t\t\t\t\t\tconst merged = modules[i + 1];\n+\t\t\t\t\t\tif (merged === true) continue outer;\n+\t\t\t\t\t\tmodules[i + 1] = ModuleGraphConnection.addConnectionStates(\n+\t\t\t\t\t\t\tmerged,\n+\t\t\t\t\t\t\tstate\n+\t\t\t\t\t\t);\n \t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t}\n-\n-\t\t\tif (block.blocks) {\n-\t\t\t\tfor (const b of block.blocks) {\n-\t\t\t\t\tblockQueue.add(b);\n+\t\t\t\tmodules[length] = m;\n+\t\t\t\tlength++;\n+\t\t\t\tmodules[length] = state;\n+\t\t\t\tlength++;\n+\t\t\t\tif (length > 30) {\n+\t\t\t\t\t// To avoid worse case performance, we will use an index map for\n+\t\t\t\t\t// linear cost access, which allows to maintain O(n) complexity\n+\t\t\t\t\t// while keeping allocations down to a minimum\n+\t\t\t\t\tindexMap = new Map();\n+\t\t\t\t\tfor (let i = 0; i < length; i += 2) {\n+\t\t\t\t\t\tindexMap.set(modules[i], i + 1);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tconst idx = indexMap.get(m);\n+\t\t\t\tif (idx !== undefined) {\n+\t\t\t\t\tconst merged = modules[idx];\n+\t\t\t\t\tif (merged === true) continue outer;\n+\t\t\t\t\tmodules[idx] = ModuleGraphConnection.addConnectionStates(\n+\t\t\t\t\t\tmerged,\n+\t\t\t\t\t\tstate\n+\t\t\t\t\t);\n+\t\t\t\t} else {\n+\t\t\t\t\tmodules[length] = m;\n+\t\t\t\t\tlength++;\n+\t\t\t\t\tmodules[length] = state;\n+\t\t\t\t\tindexMap.set(m, length);\n+\t\t\t\t\tlength++;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\tmodules.length = length;\n \t}\n-\n-\treturn blockModulesMap;\n };\n \n /**\n@@ -182,10 +191,55 @@ const visitModules = (\n \tblocksWithNestedBlocks,\n \tallCreatedChunkGroups\n ) => {\n-\tconst { moduleGraph, chunkGraph } = compilation;\n+\tconst { moduleGraph, chunkGraph, moduleMemCaches } = compilation;\n \n-\tlogger.time(\"visitModules: prepare\");\n-\tconst blockModulesMap = extractBlockModulesMap(compilation);\n+\tconst blockModulesRuntimeMap = new Map();\n+\n+\t/** @type {RuntimeSpec | false} */\n+\tlet blockModulesMapRuntime = false;\n+\tlet blockModulesMap;\n+\n+\t/**\n+\t *\n+\t * @param {DependenciesBlock} block block\n+\t * @param {RuntimeSpec} runtime runtime\n+\t * @returns {(Module | ConnectionState)[]} block modules in flatten tuples\n+\t */\n+\tconst getBlockModules = (block, runtime) => {\n+\t\tif (blockModulesMapRuntime !== runtime) {\n+\t\t\tblockModulesMap = blockModulesRuntimeMap.get(runtime);\n+\t\t\tif (blockModulesMap === undefined) {\n+\t\t\t\tblockModulesMap = new Map();\n+\t\t\t\tblockModulesRuntimeMap.set(runtime, blockModulesMap);\n+\t\t\t}\n+\t\t}\n+\t\tlet blockModules = blockModulesMap.get(block);\n+\t\tif (blockModules !== undefined) return blockModules;\n+\t\tconst module = /** @type {Module} */ (block.getRootBlock());\n+\t\tconst memCache = moduleMemCaches && moduleMemCaches.get(module);\n+\t\tif (memCache !== undefined) {\n+\t\t\tconst map = memCache.provide(\n+\t\t\t\t\"bundleChunkGraph.blockModules\",\n+\t\t\t\truntime,\n+\t\t\t\t() => {\n+\t\t\t\t\tlogger.time(\"visitModules: prepare\");\n+\t\t\t\t\tconst map = new Map();\n+\t\t\t\t\textractBlockModules(module, moduleGraph, runtime, map);\n+\t\t\t\t\tlogger.timeAggregate(\"visitModules: prepare\");\n+\t\t\t\t\treturn map;\n+\t\t\t\t}\n+\t\t\t);\n+\t\t\tfor (const [block, blockModules] of map)\n+\t\t\t\tblockModulesMap.set(block, blockModules);\n+\t\t\treturn map.get(block);\n+\t\t} else {\n+\t\t\tlogger.time(\"visitModules: prepare\");\n+\t\t\textractBlockModules(module, moduleGraph, runtime, blockModulesMap);\n+\t\t\tblockModules = blockModulesMap.get(block);\n+\t\t\tlogger.timeAggregate(\"visitModules: prepare\");\n+\t\t\treturn blockModules;\n+\t\t}\n+\t};\n \n \tlet statProcessedQueueItems = 0;\n \tlet statProcessedBlocks = 0;\n@@ -308,9 +362,7 @@ const visitModules = (\n \t/** @type {QueueItem[]} */\n \tlet queueDelayed = [];\n \n-\tlogger.timeEnd(\"visitModules: prepare\");\n-\n-\t/** @type {[Module, ModuleGraphConnection[]][]} */\n+\t/** @type {[Module, ConnectionState][]} */\n \tconst skipConnectionBuffer = [];\n \t/** @type {Module[]} */\n \tconst skipBuffer = [];\n@@ -478,21 +530,23 @@ const visitModules = (\n \tconst processBlock = block => {\n \t\tstatProcessedBlocks++;\n \t\t// get prepared block info\n-\t\tconst blockModules = blockModulesMap.get(block);\n+\t\tconst blockModules = getBlockModules(block, chunkGroupInfo.runtime);\n \n \t\tif (blockModules !== undefined) {\n-\t\t\tconst { minAvailableModules, runtime } = chunkGroupInfo;\n+\t\t\tconst { minAvailableModules } = chunkGroupInfo;\n \t\t\t// Buffer items because order need to be reversed to get indices correct\n \t\t\t// Traverse all referenced modules\n-\t\t\tfor (const entry of blockModules) {\n-\t\t\t\tconst [refModule, connections] = entry;\n+\t\t\tfor (let i = 0; i < blockModules.length; i += 2) {\n+\t\t\t\tconst refModule = /** @type {Module} */ (blockModules[i]);\n \t\t\t\tif (chunkGraph.isModuleInChunk(refModule, chunk)) {\n \t\t\t\t\t// skip early if already connected\n \t\t\t\t\tcontinue;\n \t\t\t\t}\n-\t\t\t\tconst activeState = getActiveStateOfConnections(connections, runtime);\n+\t\t\t\tconst activeState = /** @type {ConnectionState} */ (\n+\t\t\t\t\tblockModules[i + 1]\n+\t\t\t\t);\n \t\t\t\tif (activeState !== true) {\n-\t\t\t\t\tskipConnectionBuffer.push(entry);\n+\t\t\t\t\tskipConnectionBuffer.push([refModule, activeState]);\n \t\t\t\t\tif (activeState === false) continue;\n \t\t\t\t}\n \t\t\t\tif (\n@@ -562,12 +616,15 @@ const visitModules = (\n \tconst processEntryBlock = block => {\n \t\tstatProcessedBlocks++;\n \t\t// get prepared block info\n-\t\tconst blockModules = blockModulesMap.get(block);\n+\t\tconst blockModules = getBlockModules(block, chunkGroupInfo.runtime);\n \n \t\tif (blockModules !== undefined) {\n \t\t\t// Traverse all referenced modules\n-\t\t\tfor (const [refModule, connections] of blockModules) {\n-\t\t\t\tconst activeState = getActiveStateOfConnections(connections, undefined);\n+\t\t\tfor (let i = 0; i < blockModules.length; i += 2) {\n+\t\t\t\tconst refModule = /** @type {Module} */ (blockModules[i]);\n+\t\t\t\tconst activeState = /** @type {ConnectionState} */ (\n+\t\t\t\t\tblockModules[i + 1]\n+\t\t\t\t);\n \t\t\t\t// enqueue, then add and enter to be in the correct order\n \t\t\t\t// this is relevant with circular dependencies\n \t\t\t\tqueueBuffer.push({\n@@ -1059,10 +1116,9 @@ const visitModules = (\n \n \t\t\t// 2. Reconsider skipped connections\n \t\t\tif (info.skippedModuleConnections !== undefined) {\n-\t\t\t\tconst { minAvailableModules, runtime } = info;\n+\t\t\t\tconst { minAvailableModules } = info;\n \t\t\t\tfor (const entry of info.skippedModuleConnections) {\n-\t\t\t\t\tconst [module, connections] = entry;\n-\t\t\t\t\tconst activeState = getActiveStateOfConnections(connections, runtime);\n+\t\t\t\t\tconst [module, activeState] = entry;\n \t\t\t\t\tif (activeState === false) continue;\n \t\t\t\t\tif (activeState === true) {\n \t\t\t\t\t\tinfo.skippedModuleConnections.delete(entry);\n@@ -1114,6 +1170,7 @@ const visitModules = (\n \twhile (queue.length || queueConnect.size) {\n \t\tlogger.time(\"visitModules: visiting\");\n \t\tprocessQueue();\n+\t\tlogger.timeAggregateEnd(\"visitModules: prepare\");\n \t\tlogger.timeEnd(\"visitModules: visiting\");\n \n \t\tif (chunkGroupsForCombining.size > 0) {"
      },
      {
        "sha": "8258027a47b319053d037b60a310ca4104fc7691",
        "filename": "lib/logging/Logger.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2Flogging%2FLogger.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/lib%2Flogging%2FLogger.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Flogging%2FLogger.js?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -155,6 +155,7 @@ class WebpackLogger {\n \t\tif (this[TIMERS_AGGREGATES_SYMBOL] === undefined) return;\n \t\tconst time = this[TIMERS_AGGREGATES_SYMBOL].get(label);\n \t\tif (time === undefined) return;\n+\t\tthis[TIMERS_AGGREGATES_SYMBOL].delete(label);\n \t\tthis[LOG_SYMBOL](LogType.time, [label, ...time]);\n \t}\n }"
      },
      {
        "sha": "1588ffa9e2a7c32865f672deada0ba301dd46e2b",
        "filename": "test/__snapshots__/StatsTestCases.basictest.js.snap",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -2072,7 +2072,7 @@ LOG from webpack.buildChunkGraph\n     3 chunk groups connected\n     3 chunk groups processed for merging (3 module sets, 0 forked, 0 + 0 modules forked, 0 + 0 modules merged into fork, 0 resulting modules)\n     3 chunk group info updated (0 already connected chunk groups reconnected)\n-+ 13 hidden lines\n++ 15 hidden lines\n \n LOG from webpack.FileSystemInfo\n     6 new snapshots created\n@@ -2421,10 +2421,12 @@ LOG from webpack.buildChunkGraph\n <t> visitModules: calculating available modules: X ms\n <t> visitModules: merging available modules: X ms\n <t> visitModules: check modules for revisit: X ms\n+<t> visitModules: prepare: X ms\n <t> visitModules: visiting: X ms\n <t> visitModules: calculating available modules: X ms\n <t> visitModules: merging available modules: X ms\n <t> visitModules: check modules for revisit: X ms\n+<t> visitModules: prepare: X ms\n <t> visitModules: visiting: X ms\n     15 queue items processed (9 blocks)\n     3 chunk groups connected"
      },
      {
        "sha": "8d454771b9b07ff7e4bf1e2060930796d847a02a",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/e1aa5abff056c20d9a240e069e55bf84088c9eae/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/e1aa5abff056c20d9a240e069e55bf84088c9eae/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=e1aa5abff056c20d9a240e069e55bf84088c9eae",
        "patch": "@@ -335,7 +335,6 @@ declare class AsyncDependenciesBlock extends DependenciesBlock {\n \t};\n \tloc?: SyntheticDependencyLocation | RealDependencyLocation;\n \trequest?: string;\n-\tparent: DependenciesBlock;\n \tchunkName: string;\n \tmodule: any;\n }\n@@ -2544,6 +2543,8 @@ declare interface DepConstructor {\n declare abstract class DependenciesBlock {\n \tdependencies: Dependency[];\n \tblocks: AsyncDependenciesBlock[];\n+\tparent: DependenciesBlock;\n+\tgetRootBlock(): DependenciesBlock;\n \n \t/**\n \t * Adds a DependencyBlock to DependencyBlock relationship.\n@@ -6669,10 +6670,12 @@ declare class ModuleGraph {\n \tsetParents(\n \t\tdependency: Dependency,\n \t\tblock: DependenciesBlock,\n-\t\tmodule: Module\n+\t\tmodule: Module,\n+\t\tindexInBlock?: number\n \t): void;\n \tgetParentModule(dependency: Dependency): Module;\n \tgetParentBlock(dependency: Dependency): DependenciesBlock;\n+\tgetParentBlockIndex(dependency: Dependency): number;\n \tsetResolvedModule(\n \t\toriginModule: Module,\n \t\tdependency: Dependency,"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14404",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14404/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14404/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14404/events",
    "html_url": "https://github.com/webpack/webpack/pull/14404",
    "id": 1015500120,
    "node_id": "PR_kwDOADgiC84sp-HB",
    "number": 14404,
    "title": "Allow ignoring errors and warnings from import-exports",
    "user": {
      "login": "markjm",
      "id": 16494982,
      "node_id": "MDQ6VXNlcjE2NDk0OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/16494982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markjm",
      "html_url": "https://github.com/markjm",
      "followers_url": "https://api.github.com/users/markjm/followers",
      "following_url": "https://api.github.com/users/markjm/following{/other_user}",
      "gists_url": "https://api.github.com/users/markjm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markjm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markjm/subscriptions",
      "organizations_url": "https://api.github.com/users/markjm/orgs",
      "repos_url": "https://api.github.com/users/markjm/repos",
      "events_url": "https://api.github.com/users/markjm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markjm/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2021-10-04T18:32:51Z",
    "updated_at": "2021-11-05T14:51:05Z",
    "closed_at": "2021-11-03T11:42:59Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14404",
      "html_url": "https://github.com/webpack/webpack/pull/14404",
      "diff_url": "https://github.com/webpack/webpack/pull/14404.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14404.patch",
      "merged_at": "2021-11-03T11:42:58Z"
    },
    "body": "Also fixes #14367\r\n\r\n**What kind of change does this PR introduce?**\r\n\r\nperformance\r\n\r\n**Did you add tests for your changes?**\r\n\r\nnot yet\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nno\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\n* add `parser.javascript.exportsPresence`\r\n* add `parser.javascript.reexportExportsPresence`\r\n* add `parser.javascript.importExportsPresence`\r\n* deprecate `parser.javascript.strictExportPresence`",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14404/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "fcf3219f2f2ed757a13583ba2574123fe026da6b",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 13,
        "deletions": 1,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -2849,6 +2849,10 @@ export interface JavascriptParserOptions {\n \t * Enable/disable parsing of magic comments in CommonJs syntax.\n \t */\n \tcommonjsMagicComments?: boolean;\n+\t/**\n+\t * Specifies the behavior of invalid export names in \"import ... from ...\" and \"export ... from ...\".\n+\t */\n+\texportsPresence?: \"error\" | \"warn\" | \"auto\" | false;\n \t/**\n \t * Enable warnings for full dynamic dependencies.\n \t */\n@@ -2873,10 +2877,18 @@ export interface JavascriptParserOptions {\n \t * Enable/disable parsing of import() syntax.\n \t */\n \timport?: boolean;\n+\t/**\n+\t * Specifies the behavior of invalid export names in \"import ... from ...\".\n+\t */\n+\timportExportsPresence?: \"error\" | \"warn\" | \"auto\" | false;\n \t/**\n \t * Include polyfills or mocks for various node stuff.\n \t */\n \tnode?: Node;\n+\t/**\n+\t * Specifies the behavior of invalid export names in \"export ... from ...\". This might be useful to disable during the migration from \"export ... from ...\" to \"export type ... from ...\" when reexporting types in TypeScript.\n+\t */\n+\treexportExportsPresence?: \"error\" | \"warn\" | \"auto\" | false;\n \t/**\n \t * Enable/disable parsing of require.context syntax.\n \t */\n@@ -2894,7 +2906,7 @@ export interface JavascriptParserOptions {\n \t */\n \trequireJs?: boolean;\n \t/**\n-\t * Emit errors instead of warnings when imported names don't exist in imported module.\n+\t * Deprecated in favor of \"exportsPresence\". Emit errors instead of warnings when imported names don't exist in imported module.\n \t */\n \tstrictExportPresence?: boolean;\n \t/**"
      },
      {
        "sha": "a0734ac9127130e6c55fa42860b6c9ffd8378a2e",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -442,8 +442,6 @@ const applyJavascriptParserOptionsDefaults = parserOptions => {\n \tD(parserOptions, \"wrappedContextRegExp\", /.*/);\n \tD(parserOptions, \"wrappedContextRecursive\", true);\n \tD(parserOptions, \"wrappedContextCritical\", false);\n-\n-\tD(parserOptions, \"strictExportPresence\", false);\n \tD(parserOptions, \"strictThisContextOnImports\", false);\n };\n "
      },
      {
        "sha": "038b2f375ab7cd9c5193b3a17e289f2e9b38c27d",
        "filename": "lib/dependencies/HarmonyExportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 12,
        "deletions": 3,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -11,6 +11,7 @@ const HarmonyExportExpressionDependency = require(\"./HarmonyExportExpressionDepe\n const HarmonyExportHeaderDependency = require(\"./HarmonyExportHeaderDependency\");\n const HarmonyExportImportedSpecifierDependency = require(\"./HarmonyExportImportedSpecifierDependency\");\n const HarmonyExportSpecifierDependency = require(\"./HarmonyExportSpecifierDependency\");\n+const { ExportPresenceModes } = require(\"./HarmonyImportDependency\");\n const {\n \tharmonySpecifierTag,\n \tgetAssertions\n@@ -21,10 +22,18 @@ const { HarmonyStarExportsList } = HarmonyExportImportedSpecifierDependency;\n \n module.exports = class HarmonyExportDependencyParserPlugin {\n \tconstructor(options) {\n-\t\tthis.strictExportPresence = options.strictExportPresence;\n+\t\tthis.exportPresenceMode =\n+\t\t\toptions.reexportExportPresence !== undefined\n+\t\t\t\t? ExportPresenceModes.fromUserOption(options.reexportExportPresence)\n+\t\t\t\t: options.exportPresence !== undefined\n+\t\t\t\t? ExportPresenceModes.fromUserOption(options.exportPresence)\n+\t\t\t\t: options.strictExportPresence\n+\t\t\t\t? ExportPresenceModes.ERROR\n+\t\t\t\t: ExportPresenceModes.AUTO;\n \t}\n \n \tapply(parser) {\n+\t\tconst { exportPresenceMode } = this;\n \t\tparser.hooks.export.tap(\n \t\t\t\"HarmonyExportDependencyParserPlugin\",\n \t\t\tstatement => {\n@@ -128,7 +137,7 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\t\t\tname,\n \t\t\t\t\t\tharmonyNamedExports,\n \t\t\t\t\t\tnull,\n-\t\t\t\t\t\tthis.strictExportPresence,\n+\t\t\t\t\t\texportPresenceMode,\n \t\t\t\t\t\tnull,\n \t\t\t\t\t\tsettings.assertions\n \t\t\t\t\t);\n@@ -160,7 +169,7 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\t\tname,\n \t\t\t\t\tharmonyNamedExports,\n \t\t\t\t\tharmonyStarExports && harmonyStarExports.slice(),\n-\t\t\t\t\tthis.strictExportPresence,\n+\t\t\t\t\texportPresenceMode,\n \t\t\t\t\tharmonyStarExports\n \t\t\t\t);\n \t\t\t\tif (harmonyStarExports) {"
      },
      {
        "sha": "c49967d77db254f525acc131f3d6b4e77bed4bc4",
        "filename": "lib/dependencies/HarmonyExportImportedSpecifierDependency.js",
        "status": "modified",
        "additions": 25,
        "deletions": 17,
        "changes": 42,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -40,6 +40,8 @@ const processExportInfo = require(\"./processExportInfo\");\n \n /** @typedef {\"missing\"|\"unused\"|\"empty-star\"|\"reexport-dynamic-default\"|\"reexport-named-default\"|\"reexport-namespace-object\"|\"reexport-fake-namespace-object\"|\"reexport-undefined\"|\"normal-reexport\"|\"dynamic-reexport\"} ExportModeType */\n \n+const { ExportPresenceModes } = HarmonyImportDependency;\n+\n const idsSymbol = Symbol(\"HarmonyExportImportedSpecifierDependency.ids\");\n \n class NormalReexportItem {\n@@ -325,7 +327,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t * @param {string | null} name the export name of for this module\n \t * @param {Set<string>} activeExports other named exports in the module\n \t * @param {ReadonlyArray<HarmonyExportImportedSpecifierDependency> | Iterable<HarmonyExportImportedSpecifierDependency>} otherStarExports other star exports in the module before this import\n-\t * @param {boolean} strictExportPresence when true, missing exports in the imported module lead to errors instead of warnings\n+\t * @param {number} exportPresenceMode mode of checking export names\n \t * @param {HarmonyStarExportsList} allStarExports all star exports in the module\n \t * @param {Record<string, any>=} assertions import assertions\n \t */\n@@ -336,7 +338,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tname,\n \t\tactiveExports,\n \t\totherStarExports,\n-\t\tstrictExportPresence,\n+\t\texportPresenceMode,\n \t\tallStarExports,\n \t\tassertions\n \t) {\n@@ -346,7 +348,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tthis.name = name;\n \t\tthis.activeExports = activeExports;\n \t\tthis.otherStarExports = otherStarExports;\n-\t\tthis.strictExportPresence = strictExportPresence;\n+\t\tthis.exportPresenceMode = exportPresenceMode;\n \t\tthis.allStarExports = allStarExports;\n \t}\n \n@@ -735,20 +737,29 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t}\n \t}\n \n+\t/**\n+\t * @param {ModuleGraph} moduleGraph module graph\n+\t * @returns {number} effective mode\n+\t */\n+\t_getEffectiveExportPresenceLevel(moduleGraph) {\n+\t\tif (this.exportPresenceMode !== ExportPresenceModes.AUTO)\n+\t\t\treturn this.exportPresenceMode;\n+\t\treturn moduleGraph.getParentModule(this).buildMeta.strictHarmonyModule\n+\t\t\t? ExportPresenceModes.ERROR\n+\t\t\t: ExportPresenceModes.WARN;\n+\t}\n+\n \t/**\n \t * Returns warnings\n \t * @param {ModuleGraph} moduleGraph module graph\n \t * @returns {WebpackError[]} warnings\n \t */\n \tgetWarnings(moduleGraph) {\n-\t\tif (\n-\t\t\tthis.strictExportPresence ||\n-\t\t\tmoduleGraph.getParentModule(this).buildMeta.strictHarmonyModule\n-\t\t) {\n-\t\t\treturn null;\n+\t\tconst exportPresence = this._getEffectiveExportPresenceLevel(moduleGraph);\n+\t\tif (exportPresence === ExportPresenceModes.WARN) {\n+\t\t\treturn this._getErrors(moduleGraph);\n \t\t}\n-\n-\t\treturn this._getErrors(moduleGraph);\n+\t\treturn null;\n \t}\n \n \t/**\n@@ -757,13 +768,10 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t * @returns {WebpackError[]} errors\n \t */\n \tgetErrors(moduleGraph) {\n-\t\tif (\n-\t\t\tthis.strictExportPresence ||\n-\t\t\tmoduleGraph.getParentModule(this).buildMeta.strictHarmonyModule\n-\t\t) {\n+\t\tconst exportPresence = this._getEffectiveExportPresenceLevel(moduleGraph);\n+\t\tif (exportPresence === ExportPresenceModes.ERROR) {\n \t\t\treturn this._getErrors(moduleGraph);\n \t\t}\n-\n \t\treturn null;\n \t}\n \n@@ -856,7 +864,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\twrite(this.name);\n \t\twrite(this.activeExports);\n \t\twrite(this.otherStarExports);\n-\t\twrite(this.strictExportPresence);\n+\t\twrite(this.exportPresenceMode);\n \t\twrite(this.allStarExports);\n \n \t\tsuper.serialize(context);\n@@ -870,7 +878,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tthis.name = read();\n \t\tthis.activeExports = read();\n \t\tthis.otherStarExports = read();\n-\t\tthis.strictExportPresence = read();\n+\t\tthis.exportPresenceMode = read();\n \t\tthis.allStarExports = read();\n \n \t\tsuper.deserialize(context);"
      },
      {
        "sha": "7ee1621e1c5ff2e9f0f1290ad1465def9a6dd804",
        "filename": "lib/dependencies/HarmonyImportDependency.js",
        "status": "modified",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependency.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -27,6 +27,25 @@ const ModuleDependency = require(\"./ModuleDependency\");\n /** @typedef {import(\"../util/Hash\")} Hash */\n /** @typedef {import(\"../util/runtime\").RuntimeSpec} RuntimeSpec */\n \n+const ExportPresenceModes = {\n+\tNONE: /** @type {0} */ (0),\n+\tWARN: /** @type {1} */ (1),\n+\tAUTO: /** @type {2} */ (2),\n+\tERROR: /** @type {3} */ (3),\n+\tfromUserOption(str) {\n+\t\tswitch (str) {\n+\t\t\tcase \"error\":\n+\t\t\t\treturn ExportPresenceModes.ERROR;\n+\t\t\tcase \"warn\":\n+\t\t\t\treturn ExportPresenceModes.WARN;\n+\t\t\tcase false:\n+\t\t\t\treturn ExportPresenceModes.NONE;\n+\t\t\tdefault:\n+\t\t\t\tthrow new Error(`Invalid export presence value ${str}`);\n+\t\t}\n+\t}\n+};\n+\n class HarmonyImportDependency extends ModuleDependency {\n \t/**\n \t *\n@@ -334,3 +353,5 @@ HarmonyImportDependency.Template = class HarmonyImportDependencyTemplate extends\n \t\treturn emittedModules.get(referencedModule) || false;\n \t}\n };\n+\n+module.exports.ExportPresenceModes = ExportPresenceModes;"
      },
      {
        "sha": "4096eb97c0dba0a68a30f8fca4ea513cc463c4f7",
        "filename": "lib/dependencies/HarmonyImportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 17,
        "deletions": 4,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -11,6 +11,7 @@ const ConstDependency = require(\"./ConstDependency\");\n const HarmonyAcceptDependency = require(\"./HarmonyAcceptDependency\");\n const HarmonyAcceptImportDependency = require(\"./HarmonyAcceptImportDependency\");\n const HarmonyExports = require(\"./HarmonyExports\");\n+const { ExportPresenceModes } = require(\"./HarmonyImportDependency\");\n const HarmonyImportSideEffectDependency = require(\"./HarmonyImportSideEffectDependency\");\n const HarmonyImportSpecifierDependency = require(\"./HarmonyImportSpecifierDependency\");\n \n@@ -19,6 +20,7 @@ const HarmonyImportSpecifierDependency = require(\"./HarmonyImportSpecifierDepend\n /** @typedef {import(\"estree\").Identifier} Identifier */\n /** @typedef {import(\"estree\").ImportDeclaration} ImportDeclaration */\n /** @typedef {import(\"estree\").ImportExpression} ImportExpression */\n+/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n /** @typedef {import(\"../javascript/JavascriptParser\")} JavascriptParser */\n /** @typedef {import(\"../optimize/InnerGraph\").InnerGraph} InnerGraph */\n /** @typedef {import(\"../optimize/InnerGraph\").TopLevelSymbol} TopLevelSymbol */\n@@ -60,8 +62,18 @@ function getAssertions(node) {\n }\n \n module.exports = class HarmonyImportDependencyParserPlugin {\n+\t/**\n+\t * @param {JavascriptParserOptions} options options\n+\t */\n \tconstructor(options) {\n-\t\tthis.strictExportPresence = options.strictExportPresence;\n+\t\tthis.exportPresenceMode =\n+\t\t\toptions.importExportPresence !== undefined\n+\t\t\t\t? ExportPresenceModes.fromUserOption(options.importExportPresence)\n+\t\t\t\t: options.exportPresence !== undefined\n+\t\t\t\t? ExportPresenceModes.fromUserOption(options.exportPresence)\n+\t\t\t\t: options.strictExportPresence\n+\t\t\t\t? ExportPresenceModes.ERROR\n+\t\t\t\t: ExportPresenceModes.AUTO;\n \t\tthis.strictThisContextOnImports = options.strictThisContextOnImports;\n \t}\n \n@@ -70,6 +82,7 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t * @returns {void}\n \t */\n \tapply(parser) {\n+\t\tconst { exportPresenceMode } = this;\n \t\tparser.hooks.isPure\n \t\t\t.for(\"Identifier\")\n \t\t\t.tap(\"HarmonyImportDependencyParserPlugin\", expression => {\n@@ -128,7 +141,7 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\tsettings.ids,\n \t\t\t\t\tsettings.name,\n \t\t\t\t\texpr.range,\n-\t\t\t\t\tthis.strictExportPresence,\n+\t\t\t\t\texportPresenceMode,\n \t\t\t\t\tsettings.assertions\n \t\t\t\t);\n \t\t\t\tdep.shorthand = parser.scope.inShorthand;\n@@ -150,7 +163,7 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\tids,\n \t\t\t\t\tsettings.name,\n \t\t\t\t\texpr.range,\n-\t\t\t\t\tthis.strictExportPresence,\n+\t\t\t\t\texportPresenceMode,\n \t\t\t\t\tsettings.assertions\n \t\t\t\t);\n \t\t\t\tdep.asiSafe = !parser.isAsiPosition(expr.range[0]);\n@@ -171,7 +184,7 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\tids,\n \t\t\t\t\tsettings.name,\n \t\t\t\t\tcallee.range,\n-\t\t\t\t\tthis.strictExportPresence,\n+\t\t\t\t\texportPresenceMode,\n \t\t\t\t\tsettings.assertions\n \t\t\t\t);\n \t\t\t\tdep.directImport = members.length === 0;"
      },
      {
        "sha": "52884bf55c2119beaa6cf4e757ddce9a585812e3",
        "filename": "lib/dependencies/HarmonyImportSpecifierDependency.js",
        "status": "modified",
        "additions": 24,
        "deletions": 14,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -28,21 +28,23 @@ const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n \n const idsSymbol = Symbol(\"HarmonyImportSpecifierDependency.ids\");\n \n+const { ExportPresenceModes } = HarmonyImportDependency;\n+\n class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \tconstructor(\n \t\trequest,\n \t\tsourceOrder,\n \t\tids,\n \t\tname,\n \t\trange,\n-\t\tstrictExportPresence,\n+\t\texportPresenceMode,\n \t\tassertions\n \t) {\n \t\tsuper(request, sourceOrder, assertions);\n \t\tthis.ids = ids;\n \t\tthis.name = name;\n \t\tthis.range = range;\n-\t\tthis.strictExportPresence = strictExportPresence;\n+\t\tthis.exportPresenceMode = exportPresenceMode;\n \t\tthis.namespaceObjectAsContext = false;\n \t\tthis.call = undefined;\n \t\tthis.directImport = undefined;\n@@ -153,19 +155,29 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\treturn [ids];\n \t}\n \n+\t/**\n+\t * @param {ModuleGraph} moduleGraph module graph\n+\t * @returns {number} effective mode\n+\t */\n+\t_getEffectiveExportPresenceLevel(moduleGraph) {\n+\t\tif (this.exportPresenceMode !== ExportPresenceModes.AUTO)\n+\t\t\treturn this.exportPresenceMode;\n+\t\treturn moduleGraph.getParentModule(this).buildMeta.strictHarmonyModule\n+\t\t\t? ExportPresenceModes.ERROR\n+\t\t\t: ExportPresenceModes.WARN;\n+\t}\n+\n \t/**\n \t * Returns warnings\n \t * @param {ModuleGraph} moduleGraph module graph\n \t * @returns {WebpackError[]} warnings\n \t */\n \tgetWarnings(moduleGraph) {\n-\t\tif (\n-\t\t\tthis.strictExportPresence ||\n-\t\t\tmoduleGraph.getParentModule(this).buildMeta.strictHarmonyModule\n-\t\t) {\n-\t\t\treturn null;\n+\t\tconst exportPresence = this._getEffectiveExportPresenceLevel(moduleGraph);\n+\t\tif (exportPresence === ExportPresenceModes.WARN) {\n+\t\t\treturn this._getErrors(moduleGraph);\n \t\t}\n-\t\treturn this._getErrors(moduleGraph);\n+\t\treturn null;\n \t}\n \n \t/**\n@@ -174,10 +186,8 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t * @returns {WebpackError[]} errors\n \t */\n \tgetErrors(moduleGraph) {\n-\t\tif (\n-\t\t\tthis.strictExportPresence ||\n-\t\t\tmoduleGraph.getParentModule(this).buildMeta.strictHarmonyModule\n-\t\t) {\n+\t\tconst exportPresence = this._getEffectiveExportPresenceLevel(moduleGraph);\n+\t\tif (exportPresence === ExportPresenceModes.ERROR) {\n \t\t\treturn this._getErrors(moduleGraph);\n \t\t}\n \t\treturn null;\n@@ -209,7 +219,7 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\twrite(this.ids);\n \t\twrite(this.name);\n \t\twrite(this.range);\n-\t\twrite(this.strictExportPresence);\n+\t\twrite(this.exportPresenceMode);\n \t\twrite(this.namespaceObjectAsContext);\n \t\twrite(this.call);\n \t\twrite(this.directImport);\n@@ -224,7 +234,7 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\tthis.ids = read();\n \t\tthis.name = read();\n \t\tthis.range = read();\n-\t\tthis.strictExportPresence = read();\n+\t\tthis.exportPresenceMode = read();\n \t\tthis.namespaceObjectAsContext = read();\n \t\tthis.call = read();\n \t\tthis.directImport = read();"
      },
      {
        "sha": "878808263c23264b3760be567113b9e9af2b1cbf",
        "filename": "schemas/WebpackOptions.check.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/schemas%2FWebpackOptions.check.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/schemas%2FWebpackOptions.check.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.check.js?ref=53fbc868876011984a01f51f7c504896a8ea9430"
      },
      {
        "sha": "36fd3571822469e19264989ec57c5a3479c6bb0e",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 13,
        "deletions": 1,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -1474,6 +1474,10 @@\n           \"description\": \"Enable/disable parsing of magic comments in CommonJs syntax.\",\n           \"type\": \"boolean\"\n         },\n+        \"exportsPresence\": {\n+          \"description\": \"Specifies the behavior of invalid export names in \\\"import ... from ...\\\" and \\\"export ... from ...\\\".\",\n+          \"enum\": [\"error\", \"warn\", \"auto\", false]\n+        },\n         \"exprContextCritical\": {\n           \"description\": \"Enable warnings for full dynamic dependencies.\",\n           \"type\": \"boolean\"\n@@ -1506,9 +1510,17 @@\n           \"description\": \"Enable/disable parsing of import() syntax.\",\n           \"type\": \"boolean\"\n         },\n+        \"importExportsPresence\": {\n+          \"description\": \"Specifies the behavior of invalid export names in \\\"import ... from ...\\\".\",\n+          \"enum\": [\"error\", \"warn\", \"auto\", false]\n+        },\n         \"node\": {\n           \"$ref\": \"#/definitions/Node\"\n         },\n+        \"reexportExportsPresence\": {\n+          \"description\": \"Specifies the behavior of invalid export names in \\\"export ... from ...\\\". This might be useful to disable during the migration from \\\"export ... from ...\\\" to \\\"export type ... from ...\\\" when reexporting types in TypeScript.\",\n+          \"enum\": [\"error\", \"warn\", \"auto\", false]\n+        },\n         \"requireContext\": {\n           \"description\": \"Enable/disable parsing of require.context syntax.\",\n           \"type\": \"boolean\"\n@@ -1526,7 +1538,7 @@\n           \"type\": \"boolean\"\n         },\n         \"strictExportPresence\": {\n-          \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+          \"description\": \"Deprecated in favor of \\\"exportsPresence\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n           \"type\": \"boolean\"\n         },\n         \"strictThisContextOnImports\": {"
      },
      {
        "sha": "976925498585803c614bdb0a25213aa281a9c214",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -217,7 +217,7 @@ Object {\n         \"exprContextRecursive\": true,\n         \"exprContextRegExp\": false,\n         \"exprContextRequest\": \".\",\n-        \"strictExportPresence\": false,\n+        \"strictExportPresence\": undefined,\n         \"strictThisContextOnImports\": false,\n         \"unknownContextCritical\": true,\n         \"unknownContextRecursive\": true,"
      },
      {
        "sha": "498b5ee683d2182e6352efacb3a1c4e6f791c6fa",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 236,
        "deletions": 8,
        "changes": 244,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -1437,6 +1437,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"module-parser-javascript-auto-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/auto.exportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-auto-expr-context-critical\": Object {\n     \"configs\": Array [\n       Object {\n@@ -1521,6 +1540,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"module-parser-javascript-auto-import-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/auto.importExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-auto-node\": Object {\n     \"configs\": Array [\n       Object {\n@@ -1595,6 +1633,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"module-parser-javascript-auto-reexport-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/auto.reexportExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-auto-require-context\": Object {\n     \"configs\": Array [\n       Object {\n@@ -1650,13 +1707,13 @@ Object {\n   \"module-parser-javascript-auto-strict-export-presence\": Object {\n     \"configs\": Array [\n       Object {\n-        \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+        \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n         \"multiple\": false,\n         \"path\": \"module.parser.javascript/auto.strictExportPresence\",\n         \"type\": \"boolean\",\n       },\n     ],\n-    \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+    \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n@@ -1931,6 +1988,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"module-parser-javascript-dynamic-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/dynamic.exportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-dynamic-expr-context-critical\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2015,6 +2091,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"module-parser-javascript-dynamic-import-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/dynamic.importExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-dynamic-node\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2089,6 +2184,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"module-parser-javascript-dynamic-reexport-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/dynamic.reexportExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-dynamic-require-context\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2144,13 +2258,13 @@ Object {\n   \"module-parser-javascript-dynamic-strict-export-presence\": Object {\n     \"configs\": Array [\n       Object {\n-        \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+        \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n         \"multiple\": false,\n         \"path\": \"module.parser.javascript/dynamic.strictExportPresence\",\n         \"type\": \"boolean\",\n       },\n     ],\n-    \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+    \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n@@ -2386,6 +2500,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"module-parser-javascript-esm-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/esm.exportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-esm-expr-context-critical\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2470,6 +2603,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"module-parser-javascript-esm-import-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/esm.importExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-esm-node\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2544,6 +2696,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"module-parser-javascript-esm-reexport-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript/esm.reexportExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-esm-require-context\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2599,13 +2770,13 @@ Object {\n   \"module-parser-javascript-esm-strict-export-presence\": Object {\n     \"configs\": Array [\n       Object {\n-        \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+        \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n         \"multiple\": false,\n         \"path\": \"module.parser.javascript/esm.strictExportPresence\",\n         \"type\": \"boolean\",\n       },\n     ],\n-    \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+    \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n@@ -2786,6 +2957,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"module-parser-javascript-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript.exportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\" and \\\\\"export ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-expr-context-critical\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2870,6 +3060,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"module-parser-javascript-import-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript.importExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"import ... from ...\\\\\".\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-node\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2944,6 +3153,25 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"module-parser-javascript-reexport-exports-presence\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+        \"multiple\": false,\n+        \"path\": \"module.parser.javascript.reexportExportsPresence\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"error\",\n+          \"warn\",\n+          \"auto\",\n+          false,\n+        ],\n+      },\n+    ],\n+    \"description\": \"Specifies the behavior of invalid export names in \\\\\"export ... from ...\\\\\". This might be useful to disable during the migration from \\\\\"export ... from ...\\\\\" to \\\\\"export type ... from ...\\\\\" when reexporting types in TypeScript.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n   \"module-parser-javascript-require-context\": Object {\n     \"configs\": Array [\n       Object {\n@@ -2999,13 +3227,13 @@ Object {\n   \"module-parser-javascript-strict-export-presence\": Object {\n     \"configs\": Array [\n       Object {\n-        \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+        \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n         \"multiple\": false,\n         \"path\": \"module.parser.javascript.strictExportPresence\",\n         \"type\": \"boolean\",\n       },\n     ],\n-    \"description\": \"Emit errors instead of warnings when imported names don't exist in imported module.\",\n+    \"description\": \"Deprecated in favor of \\\\\"exportsPresence\\\\\". Emit errors instead of warnings when imported names don't exist in imported module.\",\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },"
      },
      {
        "sha": "aeb8627f6b66810aa0974596e1b4919f6e33a407",
        "filename": "test/checkArrayExpectation.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FcheckArrayExpectation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FcheckArrayExpectation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FcheckArrayExpectation.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -53,7 +53,7 @@ const diffItems = (actual, expected, kind) => {\n \tconst diff = [];\n \tif (missing.length > 0) {\n \t\tdiff.push(`The following expected ${kind}s are missing:\n-${missing.map(item => `${item}`).join(\"\\n\\n\")}`);\n+${missing.map(item => `${explain(item)}`).join(\"\\n\\n\")}`);\n \t}\n \tif (tooMuch.length > 0) {\n \t\tdiff.push(`The following ${kind}s are unexpected:"
      },
      {
        "sha": "1b2793ba6e3f75bc89f66a6e7a69bcef1a27bc1e",
        "filename": "test/configCases/compiletime/exports-presence/aaa/index.js",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Faaa%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Faaa%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Faaa%2Findex.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,4 @@\n+import { NoNo } from \"../stub\";\n+export { NotHere } from \"../stub\";\n+\n+export default `${typeof NoNo}`;"
      },
      {
        "sha": "1b2793ba6e3f75bc89f66a6e7a69bcef1a27bc1e",
        "filename": "test/configCases/compiletime/exports-presence/bbb/index.js",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fbbb%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fbbb%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fbbb%2Findex.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,4 @@\n+import { NoNo } from \"../stub\";\n+export { NotHere } from \"../stub\";\n+\n+export default `${typeof NoNo}`;"
      },
      {
        "sha": "1b2793ba6e3f75bc89f66a6e7a69bcef1a27bc1e",
        "filename": "test/configCases/compiletime/exports-presence/ccc/index.js",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fccc%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fccc%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fccc%2Findex.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,4 @@\n+import { NoNo } from \"../stub\";\n+export { NotHere } from \"../stub\";\n+\n+export default `${typeof NoNo}`;"
      },
      {
        "sha": "1b2793ba6e3f75bc89f66a6e7a69bcef1a27bc1e",
        "filename": "test/configCases/compiletime/exports-presence/ddd/index.js",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fddd%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fddd%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fddd%2Findex.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,4 @@\n+import { NoNo } from \"../stub\";\n+export { NotHere } from \"../stub\";\n+\n+export default `${typeof NoNo}`;"
      },
      {
        "sha": "257f6952694bdda5bf52c5d94d13839f6aa1e2fb",
        "filename": "test/configCases/compiletime/exports-presence/errors.js",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Ferrors.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Ferrors.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Ferrors.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,10 @@\n+module.exports = [\n+\t{\n+\t\tmoduleName: /ccc/,\n+\t\tmessage: /NotHere.+not found/\n+\t},\n+\t{\n+\t\tmoduleName: /ccc/,\n+\t\tmessage: /NoNo.+not found/\n+\t}\n+];"
      },
      {
        "sha": "3b8d2e8b66d78ff1c709a7f4ead7fcbd82f06332",
        "filename": "test/configCases/compiletime/exports-presence/index.js",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Findex.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,11 @@\n+import { NotHere as aaa } from \"./aaa/index.js\";\n+import { NotHere as bbb } from \"./bbb/index.js\";\n+import { NotHere as ccc } from \"./ccc/index.js\";\n+import { NotHere as ddd } from \"./ddd/index.js\";\n+\n+it(\"should do nothing\", () => {\n+\texpect(aaa).toBe(undefined);\n+\texpect(bbb).toBe(undefined);\n+\texpect(ccc).toBe(undefined);\n+\texpect(ddd).toBe(undefined);\n+});"
      },
      {
        "sha": "131d19e366fb33bcd032767a74d9758b46958bfb",
        "filename": "test/configCases/compiletime/exports-presence/stub.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fstub.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fstub.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fstub.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,3 @@\n+const foo = 'bar'\n+\n+export default foo"
      },
      {
        "sha": "ca07ad2aacfc9a37e70f64805563090983cdaac0",
        "filename": "test/configCases/compiletime/exports-presence/warnings.js",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fwarnings.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fwarnings.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fwarnings.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,14 @@\n+module.exports = [\n+\t{\n+\t\tmoduleName: /bbb/,\n+\t\tmessage: /NotHere.+not found/\n+\t},\n+\t{\n+\t\tmoduleName: /bbb/,\n+\t\tmessage: /NoNo.+not found/\n+\t},\n+\t{\n+\t\tmoduleName: /ddd/,\n+\t\tmessage: /NoNo.+not found/\n+\t}\n+];"
      },
      {
        "sha": "2ef2a712638a4572fcd5fd141af7185b47e34762",
        "filename": "test/configCases/compiletime/exports-presence/webpack.config.js",
        "status": "added",
        "additions": 34,
        "deletions": 0,
        "changes": 34,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcompiletime%2Fexports-presence%2Fwebpack.config.js?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -0,0 +1,34 @@\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\tmode: \"production\",\n+\tmodule: {\n+\t\trules: [\n+\t\t\t{\n+\t\t\t\ttest: /aaa/,\n+\t\t\t\tparser: {\n+\t\t\t\t\texportPresence: false\n+\t\t\t\t}\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\ttest: /bbb/,\n+\t\t\t\tparser: {\n+\t\t\t\t\texportPresence: \"warn\"\n+\t\t\t\t}\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\ttest: /ccc/,\n+\t\t\t\tparser: {\n+\t\t\t\t\texportPresence: \"error\"\n+\t\t\t\t}\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\ttest: /ddd/,\n+\t\t\t\tparser: {\n+\t\t\t\t\texportPresence: \"error\",\n+\t\t\t\t\timportExportPresence: \"warn\",\n+\t\t\t\t\treexportExportPresence: false\n+\t\t\t\t}\n+\t\t\t}\n+\t\t]\n+\t}\n+};"
      },
      {
        "sha": "0e122e3de869474baeee531ffd48fda4e4281913",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 16,
        "deletions": 1,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/53fbc868876011984a01f51f7c504896a8ea9430/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/53fbc868876011984a01f51f7c504896a8ea9430/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=53fbc868876011984a01f51f7c504896a8ea9430",
        "patch": "@@ -5290,6 +5290,11 @@ declare interface JavascriptParserOptions {\n \t */\n \tcommonjsMagicComments?: boolean;\n \n+\t/**\n+\t * Specifies the behavior of invalid export names in \"import ... from ...\" and \"export ... from ...\".\n+\t */\n+\texportsPresence?: false | \"error\" | \"warn\" | \"auto\";\n+\n \t/**\n \t * Enable warnings for full dynamic dependencies.\n \t */\n@@ -5320,11 +5325,21 @@ declare interface JavascriptParserOptions {\n \t */\n \timport?: boolean;\n \n+\t/**\n+\t * Specifies the behavior of invalid export names in \"import ... from ...\".\n+\t */\n+\timportExportsPresence?: false | \"error\" | \"warn\" | \"auto\";\n+\n \t/**\n \t * Include polyfills or mocks for various node stuff.\n \t */\n \tnode?: false | NodeOptions;\n \n+\t/**\n+\t * Specifies the behavior of invalid export names in \"export ... from ...\". This might be useful to disable during the migration from \"export ... from ...\" to \"export type ... from ...\" when reexporting types in TypeScript.\n+\t */\n+\treexportExportsPresence?: false | \"error\" | \"warn\" | \"auto\";\n+\n \t/**\n \t * Enable/disable parsing of require.context syntax.\n \t */\n@@ -5346,7 +5361,7 @@ declare interface JavascriptParserOptions {\n \trequireJs?: boolean;\n \n \t/**\n-\t * Emit errors instead of warnings when imported names don't exist in imported module.\n+\t * Deprecated in favor of \"exportsPresence\". Emit errors instead of warnings when imported names don't exist in imported module.\n \t */\n \tstrictExportPresence?: boolean;\n "
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/10960",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/10960/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/10960/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/10960/events",
    "html_url": "https://github.com/webpack/webpack/pull/10960",
    "id": 625745877,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDIzODkyMTA1",
    "number": 10960,
    "title": "Versioned shared modules for Module Federation",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 575750469,
        "node_id": "MDU6TGFiZWw1NzU3NTA0Njk=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20non-main",
        "name": "PR: non-main",
        "color": "dbb2f3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 20,
    "created_at": "2020-05-27T14:27:11Z",
    "updated_at": "2022-04-10T06:20:23Z",
    "closed_at": "2020-05-28T12:26:47Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/10960",
      "html_url": "https://github.com/webpack/webpack/pull/10960",
      "diff_url": "https://github.com/webpack/webpack/pull/10960.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/10960.patch",
      "merged_at": "2020-05-28T12:26:47Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\nThis PR brings Module Federation to a whole new level. It's a complete reimplementation and redesign of the shared modules.\r\n\r\nTL;DR: `shared` modules are now based on versions.\r\n\r\nBefore this PR hosts were able to override (overridable) modules of remotes.\r\nHosts always had priority and 2 remotes could only share modules if the host shares it to both.\r\nThat wasn't that bad. The control was clear from host to remote.\r\nBut there were weird cases with circular host remote relationships or multiple hosts using the same remote, which allowed to break the control direction.\r\nThe system had holes...\r\n\r\nAfter all I think it's best break with the old system in favor of a different approach.\r\n\r\nThe new system is based on versions of shared modules.\r\nIn group of federated builds all parts will agree on the highest version of a shared module.\r\nOn the other hand the version of the shared module will be checked against a version requirement based on semver (lite).\r\nIf allowed, multiple versions of a shared module might exist and will be consumed based on the required version.\r\n\r\nThis allows remotes to provide a higher version of a shared module to the federated app.\r\nIt also allows two remotes to share a module without the host being involved into that.\r\nAnd it allows to share two different (major) version of a module, while still reusing compatible versions.\r\nIn this end remotes get more decoupled from the host and upgrade to a higher dependency version alone.\r\n\r\nThere is a singleton mode for shared modules, in which only a single version of the shared module is allowed. This version can be provided from any remote of the application. It might be a deep nested remote that requires a higher version of the shared module. This one would be used for the whole app.\r\n\r\nYou might choose to only consume a shared module, but don't provide one.\r\nThis can make sense to reduce build time and deploy size when the container is always used within a shell that provides these shared modules. E.g. for framework parts.\r\n\r\nYou can choose between strict and loose version checking for each shared module.\r\nIn strict mode a shared module won't be used if the version is not in valid range. If a fallback is provided this will be used instead.\r\nIn loose mode shared module will always used, but a warning will be printed. Fallback will only be used when no shared module is available.\r\nWhen a fallback module is provided strict is the safest choice. It's also the default in this case.\r\nWhen no fallback module is available, loose mode is the default, as it would thow an error otherwise.\r\nStrict mode can still make sense for modules without fallback, if you have code in place to handle these errors.\r\n\r\nYou can make shared modules \"eager\", which doesn't put the modules in a async chunk, but provides them synchronously.\r\nThis allows to use these shared modules in the initial chunk. But be careful as all provided and fallback modules will always be downloaded.\r\nThere it's wise to provide it only at one point of your app, e. g. the shell.\r\n\r\nIt's still a valid a approach to wrap your entry point with `import(\"./bootstrap\")`. When doing so, make sure to inline the entry chunk into the HTML for best performance (no double round trip).\r\nThis is now the recommended approach. The old \"fix\" no longer works as remotes could provide shared modules to the app, which requires an async step before using shared modules.\r\nMaybe we provide some flag for the entry option in future to do this automatically.\r\n\r\nThere is an initialization phase in which all remotes (and remotes of remotes) have the chance to provide shared modules.\r\nThat means once you want to use the first shared module, this will load all remotes (if they are async loaded).\r\nThis is important as some deep nested remote might need a higher version of a shared module and it need to have a chance to provide it.\r\n\r\nIt's possible to have multiple share scopes in which modules are shared. Not sure about a use case for that yet, but it might be handy in future.\r\nFor now it's fine to always go with the default share shope.\r\n\r\nThe container interface has been changed to `get` and `init`.\r\n\r\n`init` is an possible async method that is called with one argument: the share scope object. This object is used as share scope in the container and is filled with the provided modules.\r\n\r\nTo dynamically use a container:\r\n\r\n```js\r\n// Initializes the share scope. This fills it with known provided modules from this build and all remotes\r\nawait __webpack_initialize_sharing__(\"default\");\r\nconst container = window.someContainer; // or get the container somewhere else\r\n// Initialize the container, it may provide shared modules\r\nawait container.init(__webpack_share_scopes__.default);\r\nconst module = await container.get(\"./module\");\r\n```\r\n\r\nThe container might try to provide shared modules, but if the shared module has already been used this will result in a warning and the provided shared module will be ignored. The container might still use it as fallback.\r\n\r\nThe same way you could dynamically load an A/B test, which provides some newer versions of a shared module.\r\n\r\nExamples:\r\n\r\n```js\r\n// adds react as shared module\r\n// version is inferred from package.json\r\n// there is no version check for the required version\r\n// so it will always use the higher version found\r\nshared: [\"react\"]\r\n```\r\n\r\n```js\r\n// adds moment as shared module\r\n// version is inferred from package.json\r\n// it will use the highest moment version that is >= 2.20 and < 3\r\nshared: {\r\n  \"moment\": \"^2.20.0\"\r\n}\r\n```\r\n\r\n```js\r\n// adds react as shared module\r\n// version is inferred from package.json\r\n// it will always use the shared version, but print a warning when the shared react is < 16.7 or >= 17\r\nshared: {\r\n  \"react\": {\r\n    requiredVersion: \"^16.7.0\",\r\n    singleton: true\r\n  }\r\n}\r\n```\r\n\r\n```js\r\n// adds vue as shared module\r\n// there is no local version provided\r\n// it will emit a warning if the shared vue is < 2.6.5 or >= 3\r\nshared: {\r\n  \"vue\": {\r\n    import: false,\r\n    requiredVersion: \"^2.6.5\"\r\n  }\r\n}\r\n```\r\n\r\n```js\r\n// adds vue as shared module\r\n// there is no local version provided\r\n// it throw an error when the shared vue is < 2.6.5 or >= 3\r\nshared: {\r\n  \"vue\": {\r\n    import: false,\r\n    requiredVersion: \"^2.6.5\",\r\n    strictVersion: true\r\n  }\r\n}\r\n```\r\n\r\n```js\r\n// adds all your dependencies as shared modules\r\n// version is inferred from package.json in the dependencies\r\n// requiredVersion is used from your package.json\r\n// dependencies will automatically use the highest available package\r\n// in the federated app, based on version requirement in package.json\r\n// multiple different versions might coexist in the federated app\r\n// Note that this will not affect nested paths like \"lodash/pluck\"\r\n// Note that this will disable some optimization on these packages\r\n// with might lead the bundle size problems\r\nshared: require(\"./package.json\").dependencies\r\n```\r\n\r\n```js\r\nconst deps = require(\"./package.json\").dependencies;\r\n// use object spread to change single entries\r\nshared: {\r\n  ...deps,\r\n  react: {\r\n    requiredVersion: deps.react,\r\n    singleton: true\r\n  }\r\n}\r\n```\r\n\r\n```js\r\nshared: {\r\n  \"my-vue\": { // can be referenced by import \"my-vue\"\r\n    import: \"vue\", // the \"vue\" package will be used a provided and fallback module\r\n    shareKey: \"shared-vue\", // under this name the shared module will be placed in the share scope\r\n    shareScope: \"default\", // share scope with this name will be used\r\n    singleton: true, // only a single version of the shared module is allowed\r\n    strictVersion: true, // don't use shared version when version isn't valid. Singleton or modules without fallback will throw, otherwise fallback is used\r\n    version: \"1.2.3\", // the version of the shared module\r\n    requiredVersion: ^1.0.0\" // the required version of the shared module\r\n  }\r\n}\r\n```\r\n\r\nFor `requiredVersion`: `^`, `~`, `>=` and exact matching is allowed. Complex ranges are not supported as it would required a significat amount of runtime code to cover that logic.\r\n\r\n![ModuleFederationRedesign](https://user-images.githubusercontent.com/1365881/83037685-628b4e00-a03c-11ea-838c-9bfe2a99eb35.png)\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature, refactoring\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\na lot about shared modules in module federation, see above\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/10960/reactions",
      "total_count": 43,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 30,
      "confused": 0,
      "heart": 0,
      "rocket": 13,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/10960/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "1399f934c13113d1a00a27b0ada1d51fe62b73ae",
        "filename": "declarations/_container.d.ts",
        "status": "added",
        "additions": 74,
        "deletions": 0,
        "changes": 74,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2F_container.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2F_container.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2F_container.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,74 @@\n+/*\n+ * This file was automatically generated.\n+ * DO NOT MODIFY BY HAND.\n+ * Run `yarn special-lint-fix` to update\n+ */\n+\n+/**\n+ * Modules that should be exposed by this container. When provided, property name is used as public name, otherwise public name is automatically inferred from request.\n+ */\n+export type Exposes = (ExposesItem | ExposesObject)[] | ExposesObject;\n+/**\n+ * Module that should be exposed by this container.\n+ */\n+export type ExposesItem = string;\n+/**\n+ * Modules that should be exposed by this container.\n+ */\n+export type ExposesItems = ExposesItem[];\n+/**\n+ * Container locations and request scopes from which modules should be resolved and loaded at runtime. When provided, property name is used as request scope, otherwise request scope is automatically inferred from container location.\n+ */\n+export type Remotes = (RemotesItem | RemotesObject)[] | RemotesObject;\n+/**\n+ * Container location from which modules should be resolved and loaded at runtime.\n+ */\n+export type RemotesItem = string;\n+/**\n+ * Container locations from which modules should be resolved and loaded at runtime.\n+ */\n+export type RemotesItems = RemotesItem[];\n+\n+export interface _Container {\n+\t[k: string]: any;\n+}\n+/**\n+ * Modules that should be exposed by this container. Property names are used as public paths.\n+ */\n+export interface ExposesObject {\n+\t/**\n+\t * Modules that should be exposed by this container.\n+\t */\n+\t[k: string]: ExposesConfig | ExposesItem | ExposesItems;\n+}\n+/**\n+ * Advanced configuration for modules that should be exposed by this container.\n+ */\n+export interface ExposesConfig {\n+\t/**\n+\t * Request to a module that should be exposed by this container.\n+\t */\n+\timport: ExposesItem | ExposesItems;\n+}\n+/**\n+ * Container locations from which modules should be resolved and loaded at runtime. Property names are used as request scopes.\n+ */\n+export interface RemotesObject {\n+\t/**\n+\t * Container locations from which modules should be resolved and loaded at runtime.\n+\t */\n+\t[k: string]: RemotesConfig | RemotesItem | RemotesItems;\n+}\n+/**\n+ * Advanced configuration for container locations from which modules should be resolved and loaded at runtime.\n+ */\n+export interface RemotesConfig {\n+\t/**\n+\t * Container locations from which modules should be resolved and loaded at runtime.\n+\t */\n+\texternal: RemotesItem | RemotesItems;\n+\t/**\n+\t * The name of the share scope shared with this remote.\n+\t */\n+\tshareScope?: string;\n+}"
      },
      {
        "sha": "b7cc29cb14ffefb6dafba51dbaf9c44d4517254b",
        "filename": "declarations/_sharedContainer.d.ts",
        "status": "removed",
        "additions": 0,
        "deletions": 154,
        "changes": 154,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/declarations%2F_sharedContainer.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/declarations%2F_sharedContainer.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2F_sharedContainer.d.ts?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,154 +0,0 @@\n-/*\n- * This file was automatically generated.\n- * DO NOT MODIFY BY HAND.\n- * Run `yarn special-lint-fix` to update\n- */\n-\n-/**\n- * Modules that should be exposed by this container. When provided, property name is used as public name, otherwise public name is automatically inferred from request.\n- */\n-export type Exposes = (ExposesItem | ExposesObject)[] | ExposesObject;\n-/**\n- * Module that should be exposed by this container.\n- */\n-export type ExposesItem = string;\n-/**\n- * Modules that should be exposed by this container.\n- */\n-export type ExposesItems = ExposesItem[];\n-/**\n- * Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export type Overridables =\n-\t| (OverridablesItem | OverridablesObject)[]\n-\t| OverridablesObject;\n-/**\n- * Request to a module in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItem = string;\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItems = OverridablesItem[];\n-/**\n- * Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export type Overrides = (OverridesItem | OverridesObject)[] | OverridesObject;\n-/**\n- * Request to a module in this container that should override overridable modules in the remote container.\n- */\n-export type OverridesItem = string;\n-/**\n- * Container locations and request scopes from which modules should be resolved and loaded at runtime. When provided, property name is used as request scope, otherwise request scope is automatically inferred from container location.\n- */\n-export type Remotes = (RemotesItem | RemotesObject)[] | RemotesObject;\n-/**\n- * Container location from which modules should be resolved and loaded at runtime.\n- */\n-export type RemotesItem = string;\n-/**\n- * Container locations from which modules should be resolved and loaded at runtime.\n- */\n-export type RemotesItems = RemotesItem[];\n-/**\n- * Modules that should be shared with remotes and/or host. When provided, property name is used as shared key, otherwise shared key is automatically inferred from request.\n- */\n-export type Shared = (SharedItem | SharedObject)[] | SharedObject;\n-/**\n- * Module that should be shared with remotes and/or host.\n- */\n-export type SharedItem = string;\n-\n-export interface _SharedContainer {\n-\t[k: string]: any;\n-}\n-/**\n- * Modules that should be exposed by this container. Property names are used as public paths.\n- */\n-export interface ExposesObject {\n-\t/**\n-\t * Modules that should be exposed by this container.\n-\t */\n-\t[k: string]: ExposesConfig | ExposesItem | ExposesItems;\n-}\n-/**\n- * Advanced configuration for modules that should be exposed by this container.\n- */\n-export interface ExposesConfig {\n-\t/**\n-\t * Request to a module that should be exposed by this container.\n-\t */\n-\timport: ExposesItem | ExposesItems;\n-}\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\n- */\n-export interface OverridablesObject {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\t[k: string]: OverridablesConfig | OverridablesItem | OverridablesItems;\n-}\n-/**\n- * Advanced configuration for modules in this container that should be able to be overridden by the host.\n- */\n-export interface OverridablesConfig {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\timport: OverridablesItem | OverridablesItems;\n-}\n-/**\n- * Requests to modules in this container that should override overridable modules in the remote container. Property names are used as override keys.\n- */\n-export interface OverridesObject {\n-\t/**\n-\t * Requests to modules in this container that should override overridable modules in the remote container.\n-\t */\n-\t[k: string]: OverridesConfig | OverridesItem;\n-}\n-/**\n- * Advanced configuration for modules in this container that should override overridable modules in the remote container.\n- */\n-export interface OverridesConfig {\n-\t/**\n-\t * Request to a module in this container that should override overridable modules in the remote container.\n-\t */\n-\timport: OverridesItem;\n-}\n-/**\n- * Container locations from which modules should be resolved and loaded at runtime. Property names are used as request scopes.\n- */\n-export interface RemotesObject {\n-\t/**\n-\t * Container locations from which modules should be resolved and loaded at runtime.\n-\t */\n-\t[k: string]: RemotesConfig | RemotesItem | RemotesItems;\n-}\n-/**\n- * Advanced configuration for container locations from which modules should be resolved and loaded at runtime.\n- */\n-export interface RemotesConfig {\n-\t/**\n-\t * Container locations from which modules should be resolved and loaded at runtime.\n-\t */\n-\texternal: RemotesItem | RemotesItems;\n-}\n-/**\n- * Modules that should be shared with remotes and/or host. Property names are used as shared keys.\n- */\n-export interface SharedObject {\n-\t/**\n-\t * Modules that should be shared with remotes and/or host.\n-\t */\n-\t[k: string]: SharedConfig | SharedItem;\n-}\n-/**\n- * Advanced configuration for modules that should be shared with remotes and/or host.\n- */\n-export interface SharedConfig {\n-\t/**\n-\t * Module that should be shared with remotes and/or host.\n-\t */\n-\timport: SharedItem;\n-}"
      },
      {
        "sha": "c269ddee66a64940772bbb0fe07d945844833425",
        "filename": "declarations/_sharing.d.ts",
        "status": "added",
        "additions": 68,
        "deletions": 0,
        "changes": 68,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2F_sharing.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2F_sharing.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2F_sharing.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,68 @@\n+/*\n+ * This file was automatically generated.\n+ * DO NOT MODIFY BY HAND.\n+ * Run `yarn special-lint-fix` to update\n+ */\n+\n+/**\n+ * Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\n+ */\n+export type Shared = (SharedItem | SharedObject)[] | SharedObject;\n+/**\n+ * A module that should be shared in the share scope.\n+ */\n+export type SharedItem = string;\n+/**\n+ * Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\n+ */\n+export type SharedVersionArray = (number | string)[];\n+\n+export interface _Sharing {\n+\t[k: string]: any;\n+}\n+/**\n+ * Modules that should be shared in the share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\n+ */\n+export interface SharedObject {\n+\t/**\n+\t * Modules that should be shared in the share scope.\n+\t */\n+\t[k: string]: SharedConfig | SharedItem;\n+}\n+/**\n+ * Advanced configuration for modules that should be shared in the share scope.\n+ */\n+export interface SharedConfig {\n+\t/**\n+\t * Include the provided and fallback module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\n+\t */\n+\teager?: boolean;\n+\t/**\n+\t * Provided module that should be provided to share scope. Also acts as fallback module if no shared module is found in share scope or version isn't valid. Defaults to the property name.\n+\t */\n+\timport?: false | SharedItem;\n+\t/**\n+\t * Version requirement from module in share scope.\n+\t */\n+\trequiredVersion?: string | SharedVersionArray;\n+\t/**\n+\t * Module is looked up under this key from the share scope.\n+\t */\n+\tshareKey?: string;\n+\t/**\n+\t * Share scope name.\n+\t */\n+\tshareScope?: string;\n+\t/**\n+\t * Allow only a single version of the shared module in share scope (disabled by default).\n+\t */\n+\tsingleton?: boolean;\n+\t/**\n+\t * Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\n+\t */\n+\tstrictVersion?: boolean;\n+\t/**\n+\t * Version of the provided module. Will replace lower matching versions, but not higher.\n+\t */\n+\tversion?: false | string | SharedVersionArray;\n+}"
      },
      {
        "sha": "c6b717cfb7005931c845bf4eded9d7d8c303b8d6",
        "filename": "declarations/plugins/container/ContainerPlugin.d.ts",
        "status": "modified",
        "additions": 2,
        "deletions": 34,
        "changes": 36,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fcontainer%2FContainerPlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fcontainer%2FContainerPlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2Fcontainer%2FContainerPlugin.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -52,20 +52,6 @@ export type LibraryType =\n  * If `output.libraryTarget` is set to umd and `output.library` is set, setting this to true will name the AMD module.\n  */\n export type UmdNamedDefine = boolean;\n-/**\n- * Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export type Overridables =\n-\t| (OverridablesItem | OverridablesObject)[]\n-\t| OverridablesObject;\n-/**\n- * Request to a module in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItem = string;\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItems = OverridablesItem[];\n \n export interface ContainerPluginOptions {\n \t/**\n@@ -85,9 +71,9 @@ export interface ContainerPluginOptions {\n \t */\n \tname: string;\n \t/**\n-\t * Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n+\t * The name of the share scope which is shared with the host (defaults to 'default').\n \t */\n-\toverridables?: Overridables;\n+\tshareScope?: string;\n }\n /**\n  * Modules that should be exposed by this container. Property names are used as public paths.\n@@ -170,21 +156,3 @@ export interface LibraryCustomUmdObject {\n \t */\n \troot?: string[] | string;\n }\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\n- */\n-export interface OverridablesObject {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\t[k: string]: OverridablesConfig | OverridablesItem | OverridablesItems;\n-}\n-/**\n- * Advanced configuration for modules in this container that should be able to be overridden by the host.\n- */\n-export interface OverridablesConfig {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\timport: OverridablesItem | OverridablesItems;\n-}"
      },
      {
        "sha": "5f3cbcd1d8a1eea7c5ef182f71e0307753aadfb4",
        "filename": "declarations/plugins/container/ContainerReferencePlugin.d.ts",
        "status": "modified",
        "additions": 6,
        "deletions": 28,
        "changes": 34,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fcontainer%2FContainerReferencePlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fcontainer%2FContainerReferencePlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2Fcontainer%2FContainerReferencePlugin.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -4,14 +4,6 @@\n  * Run `yarn special-lint-fix` to update\n  */\n \n-/**\n- * Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export type Overrides = (OverridesItem | OverridesObject)[] | OverridesObject;\n-/**\n- * Request to a module in this container that should override overridable modules in the remote container.\n- */\n-export type OverridesItem = string;\n /**\n  * Specifies the default type of externals ('amd*', 'umd*', 'system' and 'jsonp' depend on output.libraryTarget set to the same value).\n  */\n@@ -48,10 +40,6 @@ export type RemotesItem = string;\n export type RemotesItems = RemotesItem[];\n \n export interface ContainerReferencePluginOptions {\n-\t/**\n-\t * Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n-\t */\n-\toverrides?: Overrides;\n \t/**\n \t * The external type of the remote containers.\n \t */\n@@ -60,24 +48,10 @@ export interface ContainerReferencePluginOptions {\n \t * Container locations and request scopes from which modules should be resolved and loaded at runtime. When provided, property name is used as request scope, otherwise request scope is automatically inferred from container location.\n \t */\n \tremotes: Remotes;\n-}\n-/**\n- * Requests to modules in this container that should override overridable modules in the remote container. Property names are used as override keys.\n- */\n-export interface OverridesObject {\n-\t/**\n-\t * Requests to modules in this container that should override overridable modules in the remote container.\n-\t */\n-\t[k: string]: OverridesConfig | OverridesItem;\n-}\n-/**\n- * Advanced configuration for modules in this container that should override overridable modules in the remote container.\n- */\n-export interface OverridesConfig {\n \t/**\n-\t * Request to a module in this container that should override overridable modules in the remote container.\n+\t * The name of the share scope shared with all remotes (defaults to 'default').\n \t */\n-\timport: OverridesItem;\n+\tshareScope?: string;\n }\n /**\n  * Container locations from which modules should be resolved and loaded at runtime. Property names are used as request scopes.\n@@ -96,4 +70,8 @@ export interface RemotesConfig {\n \t * Container locations from which modules should be resolved and loaded at runtime.\n \t */\n \texternal: RemotesItem | RemotesItems;\n+\t/**\n+\t * The name of the share scope shared with this remote.\n+\t */\n+\tshareScope?: string;\n }"
      },
      {
        "sha": "6634181d3aa78f9f9d3411cb9671f26767b67e4f",
        "filename": "declarations/plugins/container/ModuleFederationPlugin.d.ts",
        "status": "modified",
        "additions": 48,
        "deletions": 74,
        "changes": 122,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fcontainer%2FModuleFederationPlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fcontainer%2FModuleFederationPlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2Fcontainer%2FModuleFederationPlugin.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -52,28 +52,6 @@ export type LibraryType =\n  * If `output.libraryTarget` is set to umd and `output.library` is set, setting this to true will name the AMD module.\n  */\n export type UmdNamedDefine = boolean;\n-/**\n- * Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export type Overridables =\n-\t| (OverridablesItem | OverridablesObject)[]\n-\t| OverridablesObject;\n-/**\n- * Request to a module in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItem = string;\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItems = OverridablesItem[];\n-/**\n- * Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export type Overrides = (OverridesItem | OverridesObject)[] | OverridesObject;\n-/**\n- * Request to a module in this container that should override overridable modules in the remote container.\n- */\n-export type OverridesItem = string;\n /**\n  * Specifies the default type of externals ('amd*', 'umd*', 'system' and 'jsonp' depend on output.libraryTarget set to the same value).\n  */\n@@ -109,13 +87,17 @@ export type RemotesItem = string;\n  */\n export type RemotesItems = RemotesItem[];\n /**\n- * Modules that should be shared with remotes and/or host. When provided, property name is used as shared key, otherwise shared key is automatically inferred from request.\n+ * Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\n  */\n export type Shared = (SharedItem | SharedObject)[] | SharedObject;\n /**\n- * Module that should be shared with remotes and/or host.\n+ * A module that should be shared in the share scope.\n  */\n export type SharedItem = string;\n+/**\n+ * Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\n+ */\n+export type SharedVersionArray = (number | string)[];\n \n export interface ModuleFederationPluginOptions {\n \t/**\n@@ -134,14 +116,6 @@ export interface ModuleFederationPluginOptions {\n \t * The name of the container.\n \t */\n \tname?: string;\n-\t/**\n-\t * Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n-\t */\n-\toverridables?: Overridables;\n-\t/**\n-\t * Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n-\t */\n-\toverrides?: Overrides;\n \t/**\n \t * The external type of the remote containers.\n \t */\n@@ -151,7 +125,11 @@ export interface ModuleFederationPluginOptions {\n \t */\n \tremotes?: Remotes;\n \t/**\n-\t * Modules that should be shared with remotes and/or host. When provided, property name is used as shared key, otherwise shared key is automatically inferred from request.\n+\t * Share scope name used for all shared modules (defaults to 'default').\n+\t */\n+\tshareScope?: string;\n+\t/**\n+\t * Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\n \t */\n \tshared?: Shared;\n }\n@@ -236,42 +214,6 @@ export interface LibraryCustomUmdObject {\n \t */\n \troot?: string[] | string;\n }\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\n- */\n-export interface OverridablesObject {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\t[k: string]: OverridablesConfig | OverridablesItem | OverridablesItems;\n-}\n-/**\n- * Advanced configuration for modules in this container that should be able to be overridden by the host.\n- */\n-export interface OverridablesConfig {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\timport: OverridablesItem | OverridablesItems;\n-}\n-/**\n- * Requests to modules in this container that should override overridable modules in the remote container. Property names are used as override keys.\n- */\n-export interface OverridesObject {\n-\t/**\n-\t * Requests to modules in this container that should override overridable modules in the remote container.\n-\t */\n-\t[k: string]: OverridesConfig | OverridesItem;\n-}\n-/**\n- * Advanced configuration for modules in this container that should override overridable modules in the remote container.\n- */\n-export interface OverridesConfig {\n-\t/**\n-\t * Request to a module in this container that should override overridable modules in the remote container.\n-\t */\n-\timport: OverridesItem;\n-}\n /**\n  * Container locations from which modules should be resolved and loaded at runtime. Property names are used as request scopes.\n  */\n@@ -289,22 +231,54 @@ export interface RemotesConfig {\n \t * Container locations from which modules should be resolved and loaded at runtime.\n \t */\n \texternal: RemotesItem | RemotesItems;\n+\t/**\n+\t * The name of the share scope shared with this remote.\n+\t */\n+\tshareScope?: string;\n }\n /**\n- * Modules that should be shared with remotes and/or host. Property names are used as shared keys.\n+ * Modules that should be shared in the share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\n  */\n export interface SharedObject {\n \t/**\n-\t * Modules that should be shared with remotes and/or host.\n+\t * Modules that should be shared in the share scope.\n \t */\n \t[k: string]: SharedConfig | SharedItem;\n }\n /**\n- * Advanced configuration for modules that should be shared with remotes and/or host.\n+ * Advanced configuration for modules that should be shared in the share scope.\n  */\n export interface SharedConfig {\n \t/**\n-\t * Module that should be shared with remotes and/or host.\n+\t * Include the provided and fallback module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\n+\t */\n+\teager?: boolean;\n+\t/**\n+\t * Provided module that should be provided to share scope. Also acts as fallback module if no shared module is found in share scope or version isn't valid. Defaults to the property name.\n+\t */\n+\timport?: false | SharedItem;\n+\t/**\n+\t * Version requirement from module in share scope.\n+\t */\n+\trequiredVersion?: string | SharedVersionArray;\n+\t/**\n+\t * Module is looked up under this key from the share scope.\n+\t */\n+\tshareKey?: string;\n+\t/**\n+\t * Share scope name.\n+\t */\n+\tshareScope?: string;\n+\t/**\n+\t * Allow only a single version of the shared module in share scope (disabled by default).\n+\t */\n+\tsingleton?: boolean;\n+\t/**\n+\t * Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\n+\t */\n+\tstrictVersion?: boolean;\n+\t/**\n+\t * Version of the provided module. Will replace lower matching versions, but not higher.\n \t */\n-\timport: SharedItem;\n+\tversion?: false | string | SharedVersionArray;\n }"
      },
      {
        "sha": "34a58f09aca1ea4b84350081a70524538320ed21",
        "filename": "declarations/plugins/container/OverridablesPlugin.d.ts",
        "status": "removed",
        "additions": 0,
        "deletions": 48,
        "changes": 48,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/declarations%2Fplugins%2Fcontainer%2FOverridablesPlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/declarations%2Fplugins%2Fcontainer%2FOverridablesPlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2Fcontainer%2FOverridablesPlugin.d.ts?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,48 +0,0 @@\n-/*\n- * This file was automatically generated.\n- * DO NOT MODIFY BY HAND.\n- * Run `yarn special-lint-fix` to update\n- */\n-\n-/**\n- * Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export type Overridables =\n-\t| (OverridablesItem | OverridablesObject)[]\n-\t| OverridablesObject;\n-/**\n- * Request to a module in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItem = string;\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host.\n- */\n-export type OverridablesItems = OverridablesItem[];\n-\n-/**\n- * Modules that should be able to be overridden. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n- */\n-export interface OverridablesPluginOptions {\n-\t/**\n-\t * Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\n-\t */\n-\toverridables?: Overridables;\n-}\n-/**\n- * Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\n- */\n-export interface OverridablesObject {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\t[k: string]: OverridablesConfig | OverridablesItem | OverridablesItems;\n-}\n-/**\n- * Advanced configuration for modules in this container that should be able to be overridden by the host.\n- */\n-export interface OverridablesConfig {\n-\t/**\n-\t * Requests to modules in this container that should be able to be overridden by the host.\n-\t */\n-\timport: OverridablesItem | OverridablesItems;\n-}"
      },
      {
        "sha": "825fc74f152fdbbfcf37d6e23cbd9b2d3b15daf2",
        "filename": "declarations/plugins/sharing/ConsumeSharedPlugin.d.ts",
        "status": "added",
        "additions": 74,
        "deletions": 0,
        "changes": 74,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fsharing%2FConsumeSharedPlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fsharing%2FConsumeSharedPlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2Fsharing%2FConsumeSharedPlugin.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,74 @@\n+/*\n+ * This file was automatically generated.\n+ * DO NOT MODIFY BY HAND.\n+ * Run `yarn special-lint-fix` to update\n+ */\n+\n+/**\n+ * Modules that should be consumed from share scope. When provided, property names are used to match requested modules in this compilation.\n+ */\n+export type Consumes = (ConsumesItem | ConsumesObject)[] | ConsumesObject;\n+/**\n+ * A module that should be consumed from share scope.\n+ */\n+export type ConsumesItem = string;\n+/**\n+ * Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\n+ */\n+export type SharedVersionArray = (number | string)[];\n+\n+/**\n+ * Options for consuming shared modules.\n+ */\n+export interface ConsumeSharedPluginOptions {\n+\t/**\n+\t * Modules that should be consumed from share scope. When provided, property names are used to match requested modules in this compilation.\n+\t */\n+\tconsumes: Consumes;\n+\t/**\n+\t * Share scope name used for all consumed modules (defaults to 'default').\n+\t */\n+\tshareScope?: string;\n+}\n+/**\n+ * Modules that should be consumed from share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\n+ */\n+export interface ConsumesObject {\n+\t/**\n+\t * Modules that should be consumed from share scope.\n+\t */\n+\t[k: string]: ConsumesConfig | ConsumesItem;\n+}\n+/**\n+ * Advanced configuration for modules that should be consumed from share scope.\n+ */\n+export interface ConsumesConfig {\n+\t/**\n+\t * Include the fallback module directly instead behind an async request. This allows to use fallback module in initial load too. All possible shared modules need to be eager too.\n+\t */\n+\teager?: boolean;\n+\t/**\n+\t * Fallback module if no shared module is found in share scope. Defaults to the property name.\n+\t */\n+\timport?: false | ConsumesItem;\n+\t/**\n+\t * Version requirement from module in share scope.\n+\t */\n+\trequiredVersion?: string | SharedVersionArray;\n+\t/**\n+\t * Module is looked up under this key from the share scope.\n+\t */\n+\tshareKey?: string;\n+\t/**\n+\t * Share scope name.\n+\t */\n+\tshareScope?: string;\n+\t/**\n+\t * Allow only a single version of the shared module in share scope (disabled by default).\n+\t */\n+\tsingleton?: boolean;\n+\t/**\n+\t * Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\n+\t */\n+\tstrictVersion?: boolean;\n+}"
      },
      {
        "sha": "4d8c8f3aa97d1e4b7d6cf7f3cdfb64bc9a546e5b",
        "filename": "declarations/plugins/sharing/ProvideSharedPlugin.d.ts",
        "status": "added",
        "additions": 59,
        "deletions": 0,
        "changes": 59,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fsharing%2FProvideSharedPlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fsharing%2FProvideSharedPlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2Fsharing%2FProvideSharedPlugin.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,59 @@\n+/*\n+ * This file was automatically generated.\n+ * DO NOT MODIFY BY HAND.\n+ * Run `yarn special-lint-fix` to update\n+ */\n+\n+/**\n+ * Modules that should be provided as shared modules to the share scope. When provided, property name is used as share key, otherwise share key is automatically inferred from request.\n+ */\n+export type Provides = (ProvidesItem | ProvidesObject)[] | ProvidesObject;\n+/**\n+ * Request to a module that should be provided as shared module to the share scope.\n+ */\n+export type ProvidesItem = string;\n+/**\n+ * Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\n+ */\n+export type SharedVersionArray = (number | string)[];\n+\n+export interface ProvideSharedPluginOptions {\n+\t/**\n+\t * Modules that should be provided as shared modules to the share scope. When provided, property name is used as share key, otherwise share key is automatically inferred from request.\n+\t */\n+\tprovides: Provides;\n+\t/**\n+\t * Share scope name used for all provided modules (defaults to 'default').\n+\t */\n+\tshareScope?: string;\n+}\n+/**\n+ * Modules that should be provided as shared modules to the share scope. Property names are used as share keys.\n+ */\n+export interface ProvidesObject {\n+\t/**\n+\t * Modules that should be provided as shared modules to the share scope.\n+\t */\n+\t[k: string]: ProvidesConfig | ProvidesItem;\n+}\n+/**\n+ * Advanced configuration for modules that should be provided as shared modules to the share scope.\n+ */\n+export interface ProvidesConfig {\n+\t/**\n+\t * Include the provided module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\n+\t */\n+\teager?: boolean;\n+\t/**\n+\t * Request to a module that should be provided as shared module to the share scope.\n+\t */\n+\timport: ProvidesItem;\n+\t/**\n+\t * Share scope name.\n+\t */\n+\tshareScope?: string;\n+\t/**\n+\t * Version of the provided module. Will replace lower matching versions, but not higher.\n+\t */\n+\tversion?: false | string | SharedVersionArray;\n+}"
      },
      {
        "sha": "4e6357b95f7f6cfca5f0887428cc3bc7c07b6bef",
        "filename": "declarations/plugins/sharing/SharePlugin.d.ts",
        "status": "added",
        "additions": 78,
        "deletions": 0,
        "changes": 78,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fsharing%2FSharePlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/declarations%2Fplugins%2Fsharing%2FSharePlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2Fsharing%2FSharePlugin.d.ts?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,78 @@\n+/*\n+ * This file was automatically generated.\n+ * DO NOT MODIFY BY HAND.\n+ * Run `yarn special-lint-fix` to update\n+ */\n+\n+/**\n+ * Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\n+ */\n+export type Shared = (SharedItem | SharedObject)[] | SharedObject;\n+/**\n+ * A module that should be shared in the share scope.\n+ */\n+export type SharedItem = string;\n+/**\n+ * Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\n+ */\n+export type SharedVersionArray = (number | string)[];\n+\n+/**\n+ * Options for shared modules.\n+ */\n+export interface SharePluginOptions {\n+\t/**\n+\t * Share scope name used for all shared modules (defaults to 'default').\n+\t */\n+\tshareScope?: string;\n+\t/**\n+\t * Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\n+\t */\n+\tshared: Shared;\n+}\n+/**\n+ * Modules that should be shared in the share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\n+ */\n+export interface SharedObject {\n+\t/**\n+\t * Modules that should be shared in the share scope.\n+\t */\n+\t[k: string]: SharedConfig | SharedItem;\n+}\n+/**\n+ * Advanced configuration for modules that should be shared in the share scope.\n+ */\n+export interface SharedConfig {\n+\t/**\n+\t * Include the provided and fallback module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\n+\t */\n+\teager?: boolean;\n+\t/**\n+\t * Provided module that should be provided to share scope. Also acts as fallback module if no shared module is found in share scope or version isn't valid. Defaults to the property name.\n+\t */\n+\timport?: false | SharedItem;\n+\t/**\n+\t * Version requirement from module in share scope.\n+\t */\n+\trequiredVersion?: string | SharedVersionArray;\n+\t/**\n+\t * Module is looked up under this key from the share scope.\n+\t */\n+\tshareKey?: string;\n+\t/**\n+\t * Share scope name.\n+\t */\n+\tshareScope?: string;\n+\t/**\n+\t * Allow only a single version of the shared module in share scope (disabled by default).\n+\t */\n+\tsingleton?: boolean;\n+\t/**\n+\t * Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\n+\t */\n+\tstrictVersion?: boolean;\n+\t/**\n+\t * Version of the provided module. Will replace lower matching versions, but not higher.\n+\t */\n+\tversion?: false | string | SharedVersionArray;\n+}"
      },
      {
        "sha": "835f16d5a3f9a5e6913b9e26caf5ba4ab8606e99",
        "filename": "lib/APIPlugin.js",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FAPIPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FAPIPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FAPIPlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -84,6 +84,18 @@ const REPLACEMENTS = {\n \t\treq: [RuntimeGlobals.systemContext],\n \t\ttype: \"object\",\n \t\tassign: false\n+\t},\n+\t__webpack_share_scopes__: {\n+\t\texpr: RuntimeGlobals.shareScopeMap,\n+\t\treq: [RuntimeGlobals.shareScopeMap],\n+\t\ttype: \"object\",\n+\t\tassign: false\n+\t},\n+\t__webpack_init_sharing__: {\n+\t\texpr: RuntimeGlobals.initializeSharing,\n+\t\treq: [RuntimeGlobals.initializeSharing],\n+\t\ttype: \"function\",\n+\t\tassign: true\n \t}\n };\n /* eslint-enable camelcase */"
      },
      {
        "sha": "b85d7a5642b7fcd12b2db62294081a099a7685c5",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -534,6 +534,13 @@ class Chunk {\n \t\treturn chunks;\n \t}\n \n+\t/**\n+\t * @returns {Set<Chunk>} a set of all the initial chunks (including itself)\n+\t */\n+\tgetAllInitialChunks() {\n+\t\treturn intersect(Array.from(this.groupsIterable, g => new Set(g.chunks)));\n+\t}\n+\n \t/**\n \t * @returns {Set<Chunk>} a set of all the referenced chunks (including itself)\n \t */"
      },
      {
        "sha": "ae69d51945f68d0861fea8d7ee0639c3ca7aebaa",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 73,
        "deletions": 12,
        "changes": 85,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -150,7 +150,8 @@ const {\n \n /**\n  * @typedef {Object} EntryData\n- * @property {Dependency[]} dependencies dependencies of the entrypoint\n+ * @property {Dependency[]} dependencies dependencies of the entrypoint that should be evaluated at startup\n+ * @property {Dependency[]} includeDependencies dependencies of the entrypoint that should be included by not evaluated\n  * @property {EntryOptions} options options of the entrypoint\n  */\n \n@@ -700,6 +701,14 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \n \t\t/** @type {Map<string, EntryData>} */\n \t\tthis.entries = new Map();\n+\t\t/** @type {EntryData} */\n+\t\tthis.globalEntry = {\n+\t\t\tdependencies: [],\n+\t\t\tincludeDependencies: [],\n+\t\t\toptions: {\n+\t\t\t\tname: undefined\n+\t\t\t}\n+\t\t};\n \t\t/** @type {Map<string, Entrypoint>} */\n \t\tthis.entrypoints = new Map();\n \t\t/** @type {Set<Chunk>} */\n@@ -1503,9 +1512,8 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t}\n \n \t/**\n-\t *\n \t * @param {string} context context path for entry\n-\t * @param {Dependency} entry entry dependency being created\n+\t * @param {Dependency} entry entry dependency that should be followed\n \t * @param {string | EntryOptions} optionsOrName options or deprecated name of entry\n \t * @param {ModuleCallback} callback callback function\n \t * @returns {void} returns\n@@ -1517,19 +1525,51 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t? optionsOrName\n \t\t\t\t: { name: optionsOrName };\n \n+\t\tthis._addEntryItem(context, entry, \"dependencies\", options, callback);\n+\t}\n+\n+\t/**\n+\t * @param {string} context context path for entry\n+\t * @param {Dependency} dependency dependency that should be followed\n+\t * @param {EntryOptions} options options\n+\t * @param {ModuleCallback} callback callback function\n+\t * @returns {void} returns\n+\t */\n+\taddInclude(context, dependency, options, callback) {\n+\t\tthis._addEntryItem(\n+\t\t\tcontext,\n+\t\t\tdependency,\n+\t\t\t\"includeDependencies\",\n+\t\t\toptions,\n+\t\t\tcallback\n+\t\t);\n+\t}\n+\n+\t/**\n+\t * @param {string} context context path for entry\n+\t * @param {Dependency} entry entry dependency that should be followed\n+\t * @param {\"dependencies\" | \"includeDependencies\"} target type of entry\n+\t * @param {EntryOptions} options options\n+\t * @param {ModuleCallback} callback callback function\n+\t * @returns {void} returns\n+\t */\n+\t_addEntryItem(context, entry, target, options, callback) {\n \t\tconst { name } = options;\n-\t\tlet entryData = this.entries.get(name);\n+\t\tlet entryData =\n+\t\t\tname !== undefined ? this.entries.get(name) : this.globalEntry;\n \t\tif (entryData === undefined) {\n \t\t\tentryData = {\n-\t\t\t\tdependencies: [entry],\n+\t\t\t\tdependencies: [],\n+\t\t\t\tincludeDependencies: [],\n \t\t\t\toptions: {\n \t\t\t\t\tname: undefined,\n \t\t\t\t\t...options\n \t\t\t\t}\n \t\t\t};\n+\t\t\tentryData[target].push(entry);\n \t\t\tthis.entries.set(name, entryData);\n \t\t} else {\n-\t\t\tentryData.dependencies.push(entry);\n+\t\t\tentryData[target].push(entry);\n \t\t\tfor (const key of Object.keys(options)) {\n \t\t\t\tif (entryData.options[key] === options[key]) continue;\n \t\t\t\tif (entryData.options[key] === undefined) {\n@@ -1689,7 +1729,9 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \n \t\tthis.logger.time(\"create chunks\");\n \t\tthis.hooks.beforeChunks.call();\n-\t\tfor (const [name, { dependencies, options }] of this.entries) {\n+\t\tconst chunkGraphInit = new Map();\n+\t\tfor (const [name, { dependencies, includeDependencies, options }] of this\n+\t\t\t.entries) {\n \t\t\tconst chunk = this.addChunk(name);\n \t\t\tchunk.name = name;\n \t\t\tif (options.filename) {\n@@ -1702,13 +1744,35 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\tthis.chunkGroups.push(entrypoint);\n \t\t\tconnectChunkGroupAndChunk(entrypoint, chunk);\n \n-\t\t\tfor (const dep of dependencies) {\n+\t\t\tfor (const dep of [...this.globalEntry.dependencies, ...dependencies]) {\n \t\t\t\tentrypoint.addOrigin(null, { name }, /** @type {any} */ (dep).request);\n \n \t\t\t\tconst module = this.moduleGraph.getModule(dep);\n \t\t\t\tif (module) {\n \t\t\t\t\tchunkGraph.connectChunkAndEntryModule(chunk, module, entrypoint);\n \t\t\t\t\tthis.assignDepth(module);\n+\t\t\t\t\tconst modulesList = chunkGraphInit.get(entrypoint);\n+\t\t\t\t\tif (modulesList === undefined) {\n+\t\t\t\t\t\tchunkGraphInit.set(entrypoint, [module]);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tmodulesList.push(module);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tfor (const dep of [\n+\t\t\t\t...this.globalEntry.includeDependencies,\n+\t\t\t\t...includeDependencies\n+\t\t\t]) {\n+\t\t\t\tconst module = this.moduleGraph.getModule(dep);\n+\t\t\t\tif (module) {\n+\t\t\t\t\tthis.assignDepth(module);\n+\t\t\t\t\tconst modulesList = chunkGraphInit.get(entrypoint);\n+\t\t\t\t\tif (modulesList === undefined) {\n+\t\t\t\t\t\tchunkGraphInit.set(entrypoint, [module]);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tmodulesList.push(module);\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -1731,10 +1795,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tbuildChunkGraph(\n-\t\t\tthis,\n-\t\t\t/** @type {Entrypoint[]} */ (this.chunkGroups.slice())\n-\t\t);\n+\t\tbuildChunkGraph(this, chunkGraphInit);\n \t\tthis.hooks.afterChunks.call(this.chunks);\n \t\tthis.logger.timeEnd(\"create chunks\");\n "
      },
      {
        "sha": "12c89acc015354e5f221d222bb37cf7e30152906",
        "filename": "lib/EntryPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FEntryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FEntryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FEntryPlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -22,7 +22,7 @@ class EntryPlugin {\n \tconstructor(context, entry, options) {\n \t\tthis.context = context;\n \t\tthis.entry = entry;\n-\t\tthis.options = options;\n+\t\tthis.options = options || \"\";\n \t}\n \n \t/**"
      },
      {
        "sha": "dca4de17f67a5d871471d08e91fba384aaf058db",
        "filename": "lib/FlagDependencyUsagePlugin.js",
        "status": "modified",
        "additions": 21,
        "deletions": 6,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FFlagDependencyUsagePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FFlagDependencyUsagePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyUsagePlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -147,13 +147,28 @@ class FlagDependencyUsagePlugin {\n \t\t\t\t\t/** @type {Queue<DependenciesBlock>} */\n \t\t\t\t\tconst queue = new Queue();\n \n-\t\t\t\t\tfor (const { dependencies: deps } of compilation.entries.values()) {\n+\t\t\t\t\tconst processEntryDependency = dep => {\n+\t\t\t\t\t\tconst module = moduleGraph.getModule(dep);\n+\t\t\t\t\t\tif (module) {\n+\t\t\t\t\t\t\tprocessModule(module, NO_EXPORTS_REFERENCED);\n+\t\t\t\t\t\t\tqueue.enqueue(module);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\t\tfor (const dep of compilation.globalEntry.dependencies) {\n+\t\t\t\t\t\tprocessEntryDependency(dep);\n+\t\t\t\t\t}\n+\t\t\t\t\tfor (const dep of compilation.globalEntry.includeDependencies) {\n+\t\t\t\t\t\tprocessEntryDependency(dep);\n+\t\t\t\t\t}\n+\t\t\t\t\tfor (const {\n+\t\t\t\t\t\tdependencies: deps,\n+\t\t\t\t\t\tincludeDependencies: includeDeps\n+\t\t\t\t\t} of compilation.entries.values()) {\n \t\t\t\t\t\tfor (const dep of deps) {\n-\t\t\t\t\t\t\tconst module = moduleGraph.getModule(dep);\n-\t\t\t\t\t\t\tif (module) {\n-\t\t\t\t\t\t\t\tprocessModule(module, NO_EXPORTS_REFERENCED);\n-\t\t\t\t\t\t\t\tqueue.enqueue(module);\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tprocessEntryDependency(dep);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tfor (const dep of includeDeps) {\n+\t\t\t\t\t\t\tprocessEntryDependency(dep);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n "
      },
      {
        "sha": "e527a3a840ae2afd886371afa4d325296f7b8a56",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -49,6 +49,7 @@ const makeSerializable = require(\"./util/makeSerializable\");\n /**\n  * @typedef {Object} CodeGenerationResult\n  * @property {Map<string, Source>} sources the resulting sources for all source types\n+ * @property {Map<string, any>=} data the resulting data for all source types\n  * @property {ReadonlySet<string>} runtimeRequirements the runtime requirements\n  */\n "
      },
      {
        "sha": "0df62b833e97bf28a05e1a3c4b962074a55a7243",
        "filename": "lib/RuntimeGlobals.js",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FRuntimeGlobals.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FRuntimeGlobals.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRuntimeGlobals.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -196,9 +196,16 @@ exports.interceptModuleExecution = \"__webpack_require__.i\";\n exports.global = \"__webpack_require__.g\";\n \n /**\n- * the overrides mapping\n+ * an object with all share scopes\n  */\n-exports.overrides = \"__webpack_require__.O\";\n+exports.shareScopeMap = \"__webpack_require__.S\";\n+\n+/**\n+ * The sharing init sequence function (only runs once per share scope).\n+ * Has one argument, the name of the share scope.\n+ * Creates a share scope if not existing\n+ */\n+exports.initializeSharing = \"__webpack_require__.I\";\n \n /**\n  * the filename of the HMR manifest"
      },
      {
        "sha": "f02e0010d22ebe93d788d1d0f6e060118cb0947e",
        "filename": "lib/RuntimePlugin.js",
        "status": "modified",
        "additions": 13,
        "deletions": 2,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FRuntimePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FRuntimePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRuntimePlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -20,6 +20,7 @@ const HasOwnPropertyRuntimeModule = require(\"./runtime/HasOwnPropertyRuntimeModu\n const MakeNamespaceObjectRuntimeModule = require(\"./runtime/MakeNamespaceObjectRuntimeModule\");\n const PublicPathRuntimeModule = require(\"./runtime/PublicPathRuntimeModule\");\n const SystemContextRuntimeModule = require(\"./runtime/SystemContextRuntimeModule\");\n+const ShareRuntimeModule = require(\"./sharing/ShareRuntimeModule\");\n \n /** @typedef {import(\"./Chunk\")} Chunk */\n /** @typedef {import(\"./Compiler\")} Compiler */\n@@ -43,7 +44,9 @@ const GLOBALS_ON_REQUIRE = [\n \tRuntimeGlobals.scriptNonce,\n \tRuntimeGlobals.uncaughtErrorHandler,\n \tRuntimeGlobals.wasmInstances,\n-\tRuntimeGlobals.instantiateWasm\n+\tRuntimeGlobals.instantiateWasm,\n+\tRuntimeGlobals.shareScopeMap,\n+\tRuntimeGlobals.initializeSharing\n ];\n \n const MODULE_DEPENDENCIES = {\n@@ -60,7 +63,9 @@ const TREE_DEPENDENCIES = {\n \t\tRuntimeGlobals.definePropertyGetters,\n \t\tRuntimeGlobals.makeNamespaceObject,\n \t\tRuntimeGlobals.require\n-\t]\n+\t],\n+\t[RuntimeGlobals.initializeSharing]: [RuntimeGlobals.shareScopeMap],\n+\t[RuntimeGlobals.shareScopeMap]: [RuntimeGlobals.hasOwnProperty]\n };\n \n class RuntimePlugin {\n@@ -254,6 +259,12 @@ class RuntimePlugin {\n \t\t\t\t.tap(\"RuntimePlugin\", (chunk, set) => {\n \t\t\t\t\tset.add(RuntimeGlobals.ensureChunkHandlers);\n \t\t\t\t});\n+\t\t\tcompilation.hooks.runtimeRequirementInTree\n+\t\t\t\t.for(RuntimeGlobals.shareScopeMap)\n+\t\t\t\t.tap(\"RuntimePlugin\", (chunk, set) => {\n+\t\t\t\t\tcompilation.addRuntimeModule(chunk, new ShareRuntimeModule());\n+\t\t\t\t\treturn true;\n+\t\t\t\t});\n \t\t\t// TODO webpack 6: remove CompatRuntimePlugin\n \t\t\tcompilation.hooks.additionalTreeRuntimeRequirements.tap(\n \t\t\t\t\"RuntimePlugin\","
      },
      {
        "sha": "6f74b95a7e07edec307d6f6beed4f4874fbe1270",
        "filename": "lib/RuntimeTemplate.js",
        "status": "modified",
        "additions": 54,
        "deletions": 0,
        "changes": 54,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FRuntimeTemplate.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FRuntimeTemplate.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRuntimeTemplate.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -13,6 +13,7 @@ const propertyAccess = require(\"./util/propertyAccess\");\n /** @typedef {import(\"../declarations/WebpackOptions\").OutputNormalized} OutputOptions */\n /** @typedef {import(\"./AsyncDependenciesBlock\")} AsyncDependenciesBlock */\n /** @typedef {import(\"./ChunkGraph\")} ChunkGraph */\n+/** @typedef {import(\"./Dependency\")} Dependency */\n /** @typedef {import(\"./InitFragment\")} InitFragment */\n /** @typedef {import(\"./Module\")} Module */\n /** @typedef {import(\"./ModuleGraph\")} ModuleGraph */\n@@ -725,6 +726,59 @@ class RuntimeTemplate {\n \t\t}\n \t}\n \n+\t/**\n+\t * @param {Object} options options\n+\t * @param {AsyncDependenciesBlock} options.block the async block\n+\t * @param {ChunkGraph} options.chunkGraph the chunk graph\n+\t * @param {Set<string>} options.runtimeRequirements if set, will be filled with runtime requirements\n+\t * @param {string=} options.request request string used originally\n+\t * @returns {string} expression\n+\t */\n+\tasyncModuleFactory({ block, chunkGraph, runtimeRequirements, request }) {\n+\t\tconst dep = block.dependencies[0];\n+\t\tconst module = chunkGraph.moduleGraph.getModule(dep);\n+\t\tconst ensureChunk = this.blockPromise({\n+\t\t\tblock,\n+\t\t\tmessage: \"\",\n+\t\t\tchunkGraph,\n+\t\t\truntimeRequirements\n+\t\t});\n+\t\tconst factory = this.returningFunction(\n+\t\t\tthis.moduleRaw({\n+\t\t\t\tmodule,\n+\t\t\t\tchunkGraph,\n+\t\t\t\trequest,\n+\t\t\t\truntimeRequirements\n+\t\t\t})\n+\t\t);\n+\t\treturn this.returningFunction(\n+\t\t\tensureChunk.startsWith(\"Promise.resolve(\")\n+\t\t\t\t? `${factory}`\n+\t\t\t\t: `${ensureChunk}.then(${this.returningFunction(factory)})`\n+\t\t);\n+\t}\n+\n+\t/**\n+\t * @param {Object} options options\n+\t * @param {Dependency} options.dependency the dependency\n+\t * @param {ChunkGraph} options.chunkGraph the chunk graph\n+\t * @param {Set<string>} options.runtimeRequirements if set, will be filled with runtime requirements\n+\t * @param {string=} options.request request string used originally\n+\t * @returns {string} expression\n+\t */\n+\tsyncModuleFactory({ dependency, chunkGraph, runtimeRequirements, request }) {\n+\t\tconst module = chunkGraph.moduleGraph.getModule(dependency);\n+\t\tconst factory = this.returningFunction(\n+\t\t\tthis.moduleRaw({\n+\t\t\t\tmodule,\n+\t\t\t\tchunkGraph,\n+\t\t\t\trequest,\n+\t\t\t\truntimeRequirements\n+\t\t\t})\n+\t\t);\n+\t\treturn this.returningFunction(factory);\n+\t}\n+\n \t/**\n \t * @param {Object} options options\n \t * @param {string} options.exportsArgument the name of the exports object"
      },
      {
        "sha": "c6de20469037aa7ffd3f4c520029b0e034e3dc0e",
        "filename": "lib/buildChunkGraph.js",
        "status": "modified",
        "additions": 18,
        "deletions": 21,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -134,7 +134,7 @@ const extractBlockModulesMap = compilation => {\n  *\n  * @param {Logger} logger a logger\n  * @param {Compilation} compilation the compilation\n- * @param {Entrypoint[]} inputEntrypoints input groups\n+ * @param {Map<Entrypoint, Module[]>} inputEntrypointsAndModules chunk groups which are processed with the modules\n  * @param {Map<ChunkGroup, ChunkGroupInfo>} chunkGroupInfoMap mapping from chunk group to available modules\n  * @param {Map<ChunkGroup, ChunkGroupDep[]>} chunkGroupDependencies dependencies for chunk groups\n  * @param {Set<DependenciesBlock>} blocksWithNestedBlocks flag for blocks that have nested blocks\n@@ -143,7 +143,7 @@ const extractBlockModulesMap = compilation => {\n const visitModules = (\n \tlogger,\n \tcompilation,\n-\tinputEntrypoints,\n+\tinputEntrypointsAndModules,\n \tchunkGroupInfoMap,\n \tchunkGroupDependencies,\n \tblocksWithNestedBlocks,\n@@ -179,7 +179,7 @@ const visitModules = (\n \n \t// Fill queue with entrypoint modules\n \t// Create ChunkGroupInfo for entrypoints\n-\tfor (const chunkGroup of inputEntrypoints) {\n+\tfor (const [chunkGroup, modules] of inputEntrypointsAndModules) {\n \t\t/** @type {ChunkGroupInfo} */\n \t\tconst chunkGroupInfo = {\n \t\t\tchunkGroup,\n@@ -200,27 +200,24 @@ const visitModules = (\n \t\t\t// This means no module is added until other sets are merged into\n \t\t\t// this minAvailableModules (by the parent entrypoints)\n \t\t\tconst skippedItems = new Set();\n-\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\tfor (const module of chunkGraph.getChunkEntryModulesIterable(chunk)) {\n-\t\t\t\t\tskippedItems.add(module);\n-\t\t\t\t}\n+\t\t\tfor (const module of modules) {\n+\t\t\t\tskippedItems.add(module);\n \t\t\t}\n \t\t\tchunkGroupInfo.skippedItems = skippedItems;\n \t\t\tchunkGroupsForCombining.add(chunkGroupInfo);\n \t\t} else {\n \t\t\t// The application may start here: We start with an empty list of available modules\n \t\t\tchunkGroupInfo.minAvailableModules = EMPTY_SET;\n-\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\tfor (const module of chunkGraph.getChunkEntryModulesIterable(chunk)) {\n-\t\t\t\t\tqueue.push({\n-\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n-\t\t\t\t\t\tblock: module,\n-\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\tchunkGroup,\n-\t\t\t\t\t\tchunkGroupInfo\n-\t\t\t\t\t});\n-\t\t\t\t}\n+\t\t\tconst chunk = chunkGroup.chunks[0];\n+\t\t\tfor (const module of modules) {\n+\t\t\t\tqueue.push({\n+\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n+\t\t\t\t\tblock: module,\n+\t\t\t\t\tmodule,\n+\t\t\t\t\tchunk,\n+\t\t\t\t\tchunkGroup,\n+\t\t\t\t\tchunkGroupInfo\n+\t\t\t\t});\n \t\t\t}\n \t\t}\n \t\tchunkGroupInfoMap.set(chunkGroup, chunkGroupInfo);\n@@ -902,10 +899,10 @@ const cleanupUnconnectedGroups = (compilation, allCreatedChunkGroups) => {\n /**\n  * This method creates the Chunk graph from the Module graph\n  * @param {Compilation} compilation the compilation\n- * @param {Entrypoint[]} inputEntrypoints chunk groups which are processed\n+ * @param {Map<Entrypoint, Module[]>} inputEntrypointsAndModules chunk groups which are processed with the modules\n  * @returns {void}\n  */\n-const buildChunkGraph = (compilation, inputEntrypoints) => {\n+const buildChunkGraph = (compilation, inputEntrypointsAndModules) => {\n \tconst logger = compilation.getLogger(\"webpack.buildChunkGraph\");\n \n \t// SHARED STATE\n@@ -928,7 +925,7 @@ const buildChunkGraph = (compilation, inputEntrypoints) => {\n \tvisitModules(\n \t\tlogger,\n \t\tcompilation,\n-\t\tinputEntrypoints,\n+\t\tinputEntrypointsAndModules,\n \t\tchunkGroupInfoMap,\n \t\tchunkGroupDependencies,\n \t\tblocksWithNestedBlocks,"
      },
      {
        "sha": "a4f064ab5dbfdf546fc3a6cde9e343cac48d4d31",
        "filename": "lib/container/ContainerEntryDependency.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerEntryDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerEntryDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FContainerEntryDependency.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -14,11 +14,13 @@ class ContainerEntryDependency extends Dependency {\n \t/**\n \t * @param {string} name entry name\n \t * @param {[string, ExposeOptions][]} exposes list of exposed modules\n+\t * @param {string} shareScope name of the share scope\n \t */\n-\tconstructor(name, exposes) {\n+\tconstructor(name, exposes, shareScope) {\n \t\tsuper();\n \t\tthis.name = name;\n \t\tthis.exposes = exposes;\n+\t\tthis.shareScope = shareScope;\n \t\tthis.optional = true;\n \t}\n "
      },
      {
        "sha": "efae338526d7aed9bf8904cf84afdb431a0ae49c",
        "filename": "lib/container/ContainerEntryModule.js",
        "status": "modified",
        "additions": 22,
        "deletions": 10,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerEntryModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerEntryModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FContainerEntryModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -39,11 +39,13 @@ class ContainerEntryModule extends Module {\n \t/**\n \t * @param {string} name container entry name\n \t * @param {[string, ExposeOptions][]} exposes list of exposed modules\n+\t * @param {string} shareScope name of the share scope\n \t */\n-\tconstructor(name, exposes) {\n+\tconstructor(name, exposes, shareScope) {\n \t\tsuper(\"javascript/dynamic\", null);\n \t\tthis._name = name;\n \t\tthis._exposes = exposes;\n+\t\tthis._shareScope = shareScope;\n \t}\n \n \t/**\n@@ -57,7 +59,9 @@ class ContainerEntryModule extends Module {\n \t * @returns {string} a unique identifier of the module\n \t */\n \tidentifier() {\n-\t\treturn `container entry ${JSON.stringify(this._exposes)}`;\n+\t\treturn `container entry (${this._shareScope}) ${JSON.stringify(\n+\t\t\tthis._exposes\n+\t\t)}`;\n \t}\n \n \t/**\n@@ -203,16 +207,21 @@ class ContainerEntryModule extends Module {\n \t\t\t\t]),\n \t\t\t\t\");\"\n \t\t\t])};`,\n-\t\t\t`var override = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\"override\",\n-\t\t\t\t`Object.assign(${RuntimeGlobals.overrides}, override);`\n-\t\t\t)};`,\n+\t\t\t`var init = ${runtimeTemplate.basicFunction(\"shareScope\", [\n+\t\t\t\t`var oldScope = ${RuntimeGlobals.shareScopeMap}[${JSON.stringify(\n+\t\t\t\t\tthis._shareScope\n+\t\t\t\t)}];`,\n+\t\t\t\t`var name = ${JSON.stringify(this._shareScope)}`,\n+\t\t\t\t`if(oldScope && oldScope !== shareScope) throw new Error(\"Container initialization failed as it has already been initialized with a different share scope\");`,\n+\t\t\t\t`${RuntimeGlobals.shareScopeMap}[name] = shareScope;`,\n+\t\t\t\t`return ${RuntimeGlobals.initializeSharing}(name);`\n+\t\t\t])};`,\n \t\t\t\"\",\n \t\t\t\"// This exports getters to disallow modifications\",\n \t\t\t`${RuntimeGlobals.definePropertyGetters}(exports, {`,\n \t\t\tTemplate.indent([\n \t\t\t\t`get: ${runtimeTemplate.returningFunction(\"get\")},`,\n-\t\t\t\t`override: ${runtimeTemplate.returningFunction(\"override\")}`\n+\t\t\t\t`init: ${runtimeTemplate.returningFunction(\"init\")}`\n \t\t\t]),\n \t\t\t\"});\"\n \t\t]);\n@@ -238,14 +247,17 @@ class ContainerEntryModule extends Module {\n \n \tserialize(context) {\n \t\tconst { write } = context;\n+\t\twrite(this._name);\n \t\twrite(this._exposes);\n+\t\twrite(this._shareScope);\n \t\tsuper.serialize(context);\n \t}\n \n-\tdeserialize(context) {\n+\tstatic deserialize(context) {\n \t\tconst { read } = context;\n-\t\tthis._exposes = read();\n-\t\tsuper.deserialize(context);\n+\t\tconst obj = new ContainerEntryModule(read(), read(), read());\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n \t}\n }\n "
      },
      {
        "sha": "1a1a7af894eb9d8c18a3bf54272718ff44e2102a",
        "filename": "lib/container/ContainerEntryModuleFactory.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerEntryModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerEntryModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FContainerEntryModuleFactory.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -21,7 +21,7 @@ module.exports = class ContainerEntryModuleFactory extends ModuleFactory {\n \tcreate({ dependencies: [dependency] }, callback) {\n \t\tconst dep = /** @type {ContainerEntryDependency} */ (dependency);\n \t\tcallback(null, {\n-\t\t\tmodule: new ContainerEntryModule(dep.name, dep.exposes)\n+\t\t\tmodule: new ContainerEntryModule(dep.name, dep.exposes, dep.shareScope)\n \t\t});\n \t}\n };"
      },
      {
        "sha": "60c3c53b0c86724775c17005996315dbc1fd7435",
        "filename": "lib/container/ContainerPlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 6,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FContainerPlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -10,7 +10,6 @@ const schema = require(\"../../schemas/plugins/container/ContainerPlugin.json\");\n const ContainerEntryDependency = require(\"./ContainerEntryDependency\");\n const ContainerEntryModuleFactory = require(\"./ContainerEntryModuleFactory\");\n const ContainerExposedDependency = require(\"./ContainerExposedDependency\");\n-const OverridablesPlugin = require(\"./OverridablesPlugin\");\n const { parseOptions } = require(\"./options\");\n \n /** @typedef {import(\"../../declarations/plugins/container/ContainerPlugin\").ContainerPluginOptions} ContainerPluginOptions */\n@@ -26,8 +25,8 @@ class ContainerPlugin {\n \t\tvalidateOptions(schema, options, { name: \"Container Plugin\" });\n \n \t\tthis._options = {\n-\t\t\toverridables: options.overridables,\n \t\t\tname: options.name,\n+\t\t\tshareScope: options.shareScope || \"default\",\n \t\t\tlibrary: options.library || {\n \t\t\t\ttype: \"var\",\n \t\t\t\tname: options.name\n@@ -51,14 +50,12 @@ class ContainerPlugin {\n \t * @returns {void}\n \t */\n \tapply(compiler) {\n-\t\tconst { name, exposes, filename, library, overridables } = this._options;\n+\t\tconst { name, exposes, shareScope, filename, library } = this._options;\n \n \t\tcompiler.options.output.enabledLibraryTypes.push(library.type);\n \n-\t\tnew OverridablesPlugin({ overridables }).apply(compiler);\n-\n \t\tcompiler.hooks.make.tapAsync(PLUGIN_NAME, (compilation, callback) => {\n-\t\t\tconst dep = new ContainerEntryDependency(name, exposes);\n+\t\t\tconst dep = new ContainerEntryDependency(name, exposes, shareScope);\n \t\t\tdep.loc = { name };\n \t\t\tcompilation.addEntry(\n \t\t\t\tcompilation.options.context,"
      },
      {
        "sha": "8741fbdea7d7cf287194b58ed18a3c0581568ad2",
        "filename": "lib/container/ContainerReferencePlugin.js",
        "status": "modified",
        "additions": 17,
        "deletions": 31,
        "changes": 48,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerReferencePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FContainerReferencePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FContainerReferencePlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -9,18 +9,17 @@ const validateOptions = require(\"schema-utils\");\n const schema = require(\"../../schemas/plugins/container/ContainerReferencePlugin.json\");\n const ExternalsPlugin = require(\"../ExternalsPlugin\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n+const FallbackDependency = require(\"./FallbackDependency\");\n+const FallbackItemDependency = require(\"./FallbackItemDependency\");\n+const FallbackModuleFactory = require(\"./FallbackModuleFactory\");\n const RemoteModule = require(\"./RemoteModule\");\n-const RemoteOverrideDependency = require(\"./RemoteOverrideDependency\");\n-const RemoteOverridesDependency = require(\"./RemoteOverridesDependency\");\n-const RemoteOverridesModuleFactory = require(\"./RemoteOverridesModuleFactory\");\n const RemoteRuntimeModule = require(\"./RemoteRuntimeModule\");\n const RemoteToExternalDependency = require(\"./RemoteToExternalDependency\");\n const { parseOptions } = require(\"./options\");\n \n /** @typedef {import(\"../../declarations/plugins/container/ContainerReferencePlugin\").ContainerReferencePluginOptions} ContainerReferencePluginOptions */\n /** @typedef {import(\"../../declarations/plugins/container/ContainerReferencePlugin\").RemotesConfig} RemotesConfig */\n /** @typedef {import(\"../Compiler\")} Compiler */\n-/** @typedef {import(\"./RemoteOverridesModule\").OverrideOptions} OverrideOptions */\n \n const slashCode = \"/\".charCodeAt(0);\n \n@@ -35,31 +34,16 @@ class ContainerReferencePlugin {\n \t\tthis._remotes = parseOptions(\n \t\t\toptions.remotes,\n \t\t\titem => ({\n-\t\t\t\texternal: Array.isArray(item) ? item : [item]\n+\t\t\t\texternal: Array.isArray(item) ? item : [item],\n+\t\t\t\tshareScope: options.shareScope || \"default\"\n \t\t\t}),\n \t\t\titem => ({\n-\t\t\t\texternal: Array.isArray(item.external) ? item.external : [item.external]\n+\t\t\t\texternal: Array.isArray(item.external)\n+\t\t\t\t\t? item.external\n+\t\t\t\t\t: [item.external],\n+\t\t\t\tshareScope: item.shareScope || options.shareScope || \"default\"\n \t\t\t})\n \t\t);\n-\t\t/** @type {[string, OverrideOptions][]} */\n-\t\tthis._overrides = parseOptions(\n-\t\t\toptions.overrides,\n-\t\t\titem => {\n-\t\t\t\tif (Array.isArray(item))\n-\t\t\t\t\tthrow new Error(\"Unexpected array of overrides\");\n-\t\t\t\treturn {\n-\t\t\t\t\timport: item\n-\t\t\t\t};\n-\t\t\t},\n-\t\t\titem => ({\n-\t\t\t\timport: item.import\n-\t\t\t})\n-\t\t);\n-\t\tthis._overrides.sort(([a], [b]) => {\n-\t\t\tif (a < b) return -1;\n-\t\t\tif (b < a) return 1;\n-\t\t\treturn 0;\n-\t\t});\n \t}\n \n \t/**\n@@ -94,13 +78,13 @@ class ContainerReferencePlugin {\n \t\t\t\t);\n \n \t\t\t\tcompilation.dependencyFactories.set(\n-\t\t\t\t\tRemoteOverrideDependency,\n+\t\t\t\t\tFallbackItemDependency,\n \t\t\t\t\tnormalModuleFactory\n \t\t\t\t);\n \n \t\t\t\tcompilation.dependencyFactories.set(\n-\t\t\t\t\tRemoteOverridesDependency,\n-\t\t\t\t\tnew RemoteOverridesModuleFactory()\n+\t\t\t\t\tFallbackDependency,\n+\t\t\t\t\tnew FallbackModuleFactory()\n \t\t\t\t);\n \n \t\t\t\tnormalModuleFactory.hooks.factorize.tap(\n@@ -115,15 +99,15 @@ class ContainerReferencePlugin {\n \t\t\t\t\t\t\t\t) {\n \t\t\t\t\t\t\t\t\treturn new RemoteModule(\n \t\t\t\t\t\t\t\t\t\tdata.request,\n-\t\t\t\t\t\t\t\t\t\tthis._overrides,\n \t\t\t\t\t\t\t\t\t\tconfig.external.map((external, i) =>\n \t\t\t\t\t\t\t\t\t\t\texternal.startsWith(\"internal \")\n \t\t\t\t\t\t\t\t\t\t\t\t? external.slice(9)\n \t\t\t\t\t\t\t\t\t\t\t\t: `webpack/container/reference/${key}${\n \t\t\t\t\t\t\t\t\t\t\t\t\t\ti ? `/fallback-${i}` : \"\"\n \t\t\t\t\t\t\t\t\t\t\t\t  }`\n \t\t\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\t\t\t`.${data.request.slice(key.length)}`\n+\t\t\t\t\t\t\t\t\t\t`.${data.request.slice(key.length)}`,\n+\t\t\t\t\t\t\t\t\t\tconfig.shareScope\n \t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n@@ -135,8 +119,10 @@ class ContainerReferencePlugin {\n \t\t\t\t\t.for(RuntimeGlobals.ensureChunkHandlers)\n \t\t\t\t\t.tap(\"ContainerReferencePlugin\", (chunk, set) => {\n \t\t\t\t\t\tset.add(RuntimeGlobals.module);\n-\t\t\t\t\t\tset.add(RuntimeGlobals.moduleFactories);\n+\t\t\t\t\t\tset.add(RuntimeGlobals.moduleFactoriesAddOnly);\n \t\t\t\t\t\tset.add(RuntimeGlobals.hasOwnProperty);\n+\t\t\t\t\t\tset.add(RuntimeGlobals.initializeSharing);\n+\t\t\t\t\t\tset.add(RuntimeGlobals.shareScopeMap);\n \t\t\t\t\t\tcompilation.addRuntimeModule(chunk, new RemoteRuntimeModule());\n \t\t\t\t\t});\n \t\t\t}"
      },
      {
        "sha": "2861d88f37e8cfb48c18825ca5c2135fdc24b853",
        "filename": "lib/container/FallbackDependency.js",
        "status": "added",
        "additions": 47,
        "deletions": 0,
        "changes": 47,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FFallbackDependency.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,47 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const Dependency = require(\"../Dependency\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n+\n+class FallbackDependency extends Dependency {\n+\tconstructor(requests) {\n+\t\tsuper();\n+\t\tthis.requests = requests;\n+\t}\n+\n+\t/**\n+\t * @returns {string | null} an identifier to merge equal requests\n+\t */\n+\tgetResourceIdentifier() {\n+\t\treturn `fallback ${this.requests.join(\" \")}`;\n+\t}\n+\n+\tget type() {\n+\t\treturn \"fallbacks\";\n+\t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.requests);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tstatic deserialize(context) {\n+\t\tconst { read } = context;\n+\t\tconst obj = new FallbackDependency(read());\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n+\t}\n+}\n+\n+makeSerializable(\n+\tFallbackDependency,\n+\t\"webpack/lib/container/FallbackDependency\"\n+);\n+\n+module.exports = FallbackDependency;"
      },
      {
        "sha": "c71a30260bb0afd0adf682ac17727afdcbaae96e",
        "filename": "lib/container/FallbackItemDependency.js",
        "status": "renamed",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackItemDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackItemDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FFallbackItemDependency.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -8,19 +8,19 @@\n const ModuleDependency = require(\"../dependencies/ModuleDependency\");\n const makeSerializable = require(\"../util/makeSerializable\");\n \n-class OverridableOriginalDependency extends ModuleDependency {\n+class FallbackItemDependency extends ModuleDependency {\n \tconstructor(request) {\n \t\tsuper(request);\n \t}\n \n \tget type() {\n-\t\treturn \"overridable original\";\n+\t\treturn \"fallback item\";\n \t}\n }\n \n makeSerializable(\n-\tOverridableOriginalDependency,\n-\t\"webpack/lib/container/OverridableOriginalDependency\"\n+\tFallbackItemDependency,\n+\t\"webpack/lib/container/FallbackItemDependency\"\n );\n \n-module.exports = OverridableOriginalDependency;\n+module.exports = FallbackItemDependency;",
        "previous_filename": "lib/container/OverridableOriginalDependency.js"
      },
      {
        "sha": "cc51cae27fa349809b877f1fd7f2088735a7c871",
        "filename": "lib/container/FallbackModule.js",
        "status": "renamed",
        "additions": 71,
        "deletions": 85,
        "changes": 156,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FFallbackModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,6 +1,6 @@\n /*\n \tMIT License http://www.opensource.org/licenses/mit-license.php\n-\tAuthor Tobias Koppers @sokra\n+\tAuthor Tobias Koppers @sokra and Zackary Jackson @ScriptedAlchemy\n */\n \n \"use strict\";\n@@ -10,10 +10,10 @@ const Module = require(\"../Module\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n const Template = require(\"../Template\");\n const makeSerializable = require(\"../util/makeSerializable\");\n-const OverridableDependenciesBlock = require(\"./OverridableDependenciesBlock\");\n-const OverridableOriginalDependency = require(\"./OverridableOriginalDependency\");\n+const FallbackItemDependency = require(\"./FallbackItemDependency\");\n \n /** @typedef {import(\"../../declarations/WebpackOptions\").WebpackOptionsNormalized} WebpackOptions */\n+/** @typedef {import(\"../Chunk\")} Chunk */\n /** @typedef {import(\"../ChunkGraph\")} ChunkGraph */\n /** @typedef {import(\"../ChunkGroup\")} ChunkGroup */\n /** @typedef {import(\"../Compilation\")} Compilation */\n@@ -27,49 +27,51 @@ const OverridableOriginalDependency = require(\"./OverridableOriginalDependency\")\n /** @typedef {import(\"../util/Hash\")} Hash */\n /** @typedef {import(\"../util/fs\").InputFileSystem} InputFileSystem */\n \n-/**\n- * @typedef {Object} OverridableOptions\n- * @property {string} name global overridable name\n- */\n+const TYPES = new Set([\"javascript\"]);\n+const RUNTIME_REQUIREMENTS = new Set([RuntimeGlobals.module]);\n \n-const TYPES = new Set([\"overridable\"]);\n-\n-class OverridableModule extends Module {\n+class FallbackModule extends Module {\n \t/**\n-\t * @param {string} context context\n-\t * @param {string} originalRequest original request\n-\t * @param {OverridableOptions} options overridable options\n+\t * @param {string[]} requests list of requests to choose one\n \t */\n-\tconstructor(context, originalRequest, options) {\n-\t\tsuper(\"overridable-module\", context);\n-\t\tthis.originalRequest = originalRequest;\n-\t\tthis.options = options;\n+\tconstructor(requests) {\n+\t\tsuper(\"fallback-module\");\n+\t\tthis.requests = requests;\n+\t\tthis._identifier = `fallback ${this.requests.join(\" \")}`;\n \t}\n \n \t/**\n \t * @returns {string} a unique identifier of the module\n \t */\n \tidentifier() {\n-\t\tconst { name } = this.options;\n-\t\treturn `overridable|${name}|${this.context}|${this.originalRequest}`;\n+\t\treturn this._identifier;\n \t}\n \n \t/**\n \t * @param {RequestShortener} requestShortener the request shortener\n \t * @returns {string} a user readable identifier of the module\n \t */\n \treadableIdentifier(requestShortener) {\n-\t\tconst { name } = this.options;\n-\t\treturn `overridable ${name} -> ${this.originalRequest}`;\n+\t\treturn this._identifier;\n \t}\n \n \t/**\n \t * @param {LibIdentOptions} options options\n \t * @returns {string | null} an identifier for library inclusion\n \t */\n \tlibIdent(options) {\n-\t\tconst { name } = this.options;\n-\t\treturn `webpack/container/overridable/${name}=${this.originalRequest}`;\n+\t\treturn `webpack/container/fallback/${this.requests[0]}/and ${\n+\t\t\tthis.requests.length - 1\n+\t\t} more`;\n+\t}\n+\n+\t/**\n+\t * @param {Chunk} chunk the chunk which condition should be checked\n+\t * @param {Compilation} compilation the compilation\n+\t * @returns {boolean} true, if the chunk is ok for the module\n+\t */\n+\tchunkCondition(chunk, { chunkGraph }) {\n+\t\treturn chunkGraph.getNumberOfEntryModules(chunk) > 0;\n \t}\n \n \t/**\n@@ -91,97 +93,81 @@ class OverridableModule extends Module {\n \t */\n \tbuild(options, compilation, resolver, fs, callback) {\n \t\tthis.buildMeta = {};\n-\t\tthis.buildInfo = {};\n-\t\tconst block = new OverridableDependenciesBlock();\n-\t\tconst dep = new OverridableOriginalDependency(this.originalRequest);\n-\t\tblock.addDependency(dep);\n-\t\tthis.addBlock(block);\n-\t\tcallback();\n-\t}\n+\t\tthis.buildInfo = {\n+\t\t\tstrict: true\n+\t\t};\n \n-\t/**\n-\t * @returns {Set<string>} types available (do not mutate)\n-\t */\n-\tgetSourceTypes() {\n-\t\treturn TYPES;\n+\t\tthis.clearDependenciesAndBlocks();\n+\t\tfor (const request of this.requests)\n+\t\t\tthis.addDependency(new FallbackItemDependency(request));\n+\n+\t\tcallback();\n \t}\n \n \t/**\n \t * @param {string=} type the source type for which the size should be estimated\n \t * @returns {number} the estimated size of the module (must be non-zero)\n \t */\n \tsize(type) {\n-\t\treturn 42;\n+\t\treturn this.requests.length * 5 + 42;\n \t}\n \n \t/**\n-\t * @param {Hash} hash the hash used to track dependencies\n-\t * @param {ChunkGraph} chunkGraph the chunk graph\n-\t * @returns {void}\n+\t * @returns {Set<string>} types available (do not mutate)\n \t */\n-\tupdateHash(hash, chunkGraph) {\n-\t\thash.update(JSON.stringify(this.options));\n-\t\thash.update(this.originalRequest);\n-\t\tsuper.updateHash(hash, chunkGraph);\n+\tgetSourceTypes() {\n+\t\treturn TYPES;\n \t}\n \n \t/**\n \t * @param {CodeGenerationContext} context context for code generation\n \t * @returns {CodeGenerationResult} result\n \t */\n-\tcodeGeneration({ chunkGraph, moduleGraph, runtimeTemplate }) {\n-\t\tconst runtimeRequirements = new Set([RuntimeGlobals.overrides]);\n-\t\tconst originalBlock = this.blocks[0];\n-\t\tconst originalDep = originalBlock.dependencies[0];\n-\t\tconst originalRequest = moduleGraph.getModule(originalDep);\n-\t\tconst ensureChunk = runtimeTemplate.blockPromise({\n-\t\t\tblock: originalBlock,\n-\t\t\tmessage: \"\",\n-\t\t\tchunkGraph,\n-\t\t\truntimeRequirements\n-\t\t});\n-\t\tconst factory = runtimeTemplate.returningFunction(\n-\t\t\truntimeTemplate.moduleRaw({\n-\t\t\t\tmodule: originalRequest,\n-\t\t\t\tchunkGraph,\n-\t\t\t\trequest: \"\",\n-\t\t\t\truntimeRequirements\n-\t\t\t})\n+\tcodeGeneration({ runtimeTemplate, moduleGraph, chunkGraph }) {\n+\t\tconst ids = this.dependencies.map(dep =>\n+\t\t\tchunkGraph.getModuleId(moduleGraph.getModule(dep))\n \t\t);\n+\t\tconst code = Template.asString([\n+\t\t\t`var ids = ${JSON.stringify(ids)};`,\n+\t\t\t\"var error, result, i = 0;\",\n+\t\t\t`var loop = ${runtimeTemplate.basicFunction(\"next\", [\n+\t\t\t\t\"while(i < ids.length) {\",\n+\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\"try { next = __webpack_require__(ids[i++]); } catch(e) { return handleError(e); }\",\n+\t\t\t\t\t\"if(next) return next.then ? next.then(handleResult, handleError) : handleResult(next);\"\n+\t\t\t\t]),\n+\t\t\t\t\"}\",\n+\t\t\t\t\"if(error) throw error;\"\n+\t\t\t])}`,\n+\t\t\t`var handleResult = ${runtimeTemplate.basicFunction(\"result\", [\n+\t\t\t\t\"if(result) return result;\",\n+\t\t\t\t\"return loop();\"\n+\t\t\t])};`,\n+\t\t\t`var handleError = ${runtimeTemplate.basicFunction(\"e\", [\n+\t\t\t\t\"error = e;\",\n+\t\t\t\t\"return loop();\"\n+\t\t\t])};`,\n+\t\t\t\"module.exports = loop();\"\n+\t\t]);\n \t\tconst sources = new Map();\n-\t\tsources.set(\n-\t\t\t\"overridable\",\n-\t\t\tnew RawSource(\n-\t\t\t\tTemplate.asString([\n-\t\t\t\t\tensureChunk.startsWith(\"Promise.resolve(\")\n-\t\t\t\t\t\t? `return ${factory};`\n-\t\t\t\t\t\t: `return ${ensureChunk}.then(${runtimeTemplate.returningFunction(\n-\t\t\t\t\t\t\t\tfactory\n-\t\t\t\t\t\t  )});`\n-\t\t\t\t])\n-\t\t\t)\n-\t\t);\n-\t\treturn {\n-\t\t\truntimeRequirements,\n-\t\t\tsources\n-\t\t};\n+\t\tsources.set(\"javascript\", new RawSource(code));\n+\t\treturn { sources, runtimeRequirements: RUNTIME_REQUIREMENTS };\n \t}\n \n \tserialize(context) {\n \t\tconst { write } = context;\n-\t\twrite(this.originalRequest);\n-\t\twrite(this.options);\n+\t\twrite(this.requests);\n \t\tsuper.serialize(context);\n \t}\n \n-\tdeserialize(context) {\n+\tstatic deserialize(context) {\n \t\tconst { read } = context;\n-\t\tthis.originalRequest = read();\n-\t\tthis.options = read();\n-\t\tsuper.deserialize(context);\n+\t\tconst obj = new FallbackModule(read());\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n \t}\n }\n \n-makeSerializable(OverridableModule, \"webpack/lib/container/OverridableModule\");\n+makeSerializable(FallbackModule, \"webpack/lib/container/FallbackModule\");\n \n-module.exports = OverridableModule;\n+module.exports = FallbackModule;",
        "previous_filename": "lib/container/OverridableModule.js"
      },
      {
        "sha": "350e910b9fe30fdf451f732190587f7351aaf421",
        "filename": "lib/container/FallbackModuleFactory.js",
        "status": "added",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FFallbackModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FFallbackModuleFactory.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,27 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra, Zackary Jackson @ScriptedAlchemy, Marais Rossouw @maraisr\n+*/\n+\n+\"use strict\";\n+\n+const ModuleFactory = require(\"../ModuleFactory\");\n+const FallbackModule = require(\"./FallbackModule\");\n+\n+/** @typedef {import(\"../ModuleFactory\").ModuleFactoryCreateData} ModuleFactoryCreateData */\n+/** @typedef {import(\"../ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n+/** @typedef {import(\"./FallbackDependency\")} FallbackDependency */\n+\n+module.exports = class FallbackModuleFactory extends ModuleFactory {\n+\t/**\n+\t * @param {ModuleFactoryCreateData} data data object\n+\t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n+\t * @returns {void}\n+\t */\n+\tcreate({ dependencies: [dependency] }, callback) {\n+\t\tconst dep = /** @type {FallbackDependency} */ (dependency);\n+\t\tcallback(null, {\n+\t\t\tmodule: new FallbackModule(dep.requests)\n+\t\t});\n+\t}\n+};"
      },
      {
        "sha": "16ef804ab54ab05e3a3c560ed7648a532b05d75a",
        "filename": "lib/container/ModuleFederationPlugin.js",
        "status": "modified",
        "additions": 9,
        "deletions": 29,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FModuleFederationPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FModuleFederationPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FModuleFederationPlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -7,38 +7,14 @@\n \n const validateOptions = require(\"schema-utils\");\n const schema = require(\"../../schemas/plugins/container/ModuleFederationPlugin.json\");\n+const SharePlugin = require(\"../sharing/SharePlugin\");\n const ContainerPlugin = require(\"./ContainerPlugin\");\n const ContainerReferencePlugin = require(\"./ContainerReferencePlugin\");\n \n /** @typedef {import(\"../../declarations/plugins/container/ModuleFederationPlugin\").ModuleFederationPluginOptions} ModuleFederationPluginOptions */\n /** @typedef {import(\"../../declarations/plugins/container/ModuleFederationPlugin\").Shared} Shared */\n /** @typedef {import(\"../Compiler\")} Compiler */\n \n-/**\n- * @template T\n- * @template O\n- * @param {T[] | O} a first\n- * @param {T[] | O} b second\n- * @returns {(T | O)[] | O} merged\n- */\n-const merge = (a, b) => {\n-\tif (!b) return a;\n-\tif (!a) return b;\n-\tif (Array.isArray(a)) {\n-\t\tif (Array.isArray(b)) {\n-\t\t\treturn [...a, ...b];\n-\t\t} else {\n-\t\t\treturn [...a, b];\n-\t\t}\n-\t} else {\n-\t\tif (Array.isArray(b)) {\n-\t\t\treturn [a, ...b];\n-\t\t} else {\n-\t\t\treturn [a, b];\n-\t\t}\n-\t}\n-};\n-\n class ModuleFederationPlugin {\n \t/**\n \t * @param {ModuleFederationPluginOptions} options options\n@@ -75,8 +51,7 @@ class ModuleFederationPlugin {\n \t\t\t\t\tname: options.name,\n \t\t\t\t\tlibrary: options.library || compiler.options.output.library,\n \t\t\t\t\tfilename: options.filename,\n-\t\t\t\t\texposes: options.exposes,\n-\t\t\t\t\toverridables: merge(options.shared, options.overridables)\n+\t\t\t\t\texposes: options.exposes\n \t\t\t\t}).apply(compiler);\n \t\t\t}\n \t\t\tif (\n@@ -90,8 +65,13 @@ class ModuleFederationPlugin {\n \t\t\t\t\t\toptions.remoteType ||\n \t\t\t\t\t\t(options.library && options.library.type) ||\n \t\t\t\t\t\tcompiler.options.externalsType,\n-\t\t\t\t\tremotes: options.remotes,\n-\t\t\t\t\toverrides: merge(options.shared, options.overrides)\n+\t\t\t\t\tremotes: options.remotes\n+\t\t\t\t}).apply(compiler);\n+\t\t\t}\n+\t\t\tif (options.shared) {\n+\t\t\t\tnew SharePlugin({\n+\t\t\t\t\tshared: options.shared,\n+\t\t\t\t\tshareScope: options.shareScope\n \t\t\t\t}).apply(compiler);\n \t\t\t}\n \t\t});"
      },
      {
        "sha": "5a01299d061ea5d06b5f6622bbc36efb5f8d9cb3",
        "filename": "lib/container/OverridableDependenciesBlock.js",
        "status": "removed",
        "additions": 0,
        "deletions": 26,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FOverridableDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FOverridableDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FOverridableDependenciesBlock.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,26 +0,0 @@\n-/*\n-\tMIT License http://www.opensource.org/licenses/mit-license.php\n-\tAuthor Tobias Koppers @sokra\n-*/\n-\n-\"use strict\";\n-\n-const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n-\n-/** @typedef {import(\"../ChunkGroup\")} ChunkGroup */\n-\n-class OverridableDependenciesBlock extends AsyncDependenciesBlock {\n-\tconstructor() {\n-\t\tsuper({});\n-\t}\n-\n-\t/**\n-\t * @param {ChunkGroup} parentChunkGroup the parent chunk group\n-\t * @returns {boolean} true when this dependencies block should be loaded async\n-\t */\n-\tisAsync(parentChunkGroup) {\n-\t\treturn !parentChunkGroup.isInitial();\n-\t}\n-}\n-\n-module.exports = OverridableDependenciesBlock;"
      },
      {
        "sha": "c00cc1528fd2b2bf774692278b10e878c0ab4350",
        "filename": "lib/container/OverridablesPlugin.js",
        "status": "removed",
        "additions": 0,
        "deletions": 189,
        "changes": 189,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FOverridablesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FOverridablesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FOverridablesPlugin.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,189 +0,0 @@\n-/*\n-\tMIT License http://www.opensource.org/licenses/mit-license.php\n-\tAuthor Tobias Koppers @sokra\n-*/\n-\n-\"use strict\";\n-\n-const validateOptions = require(\"schema-utils\");\n-const schema = require(\"../../schemas/plugins/container/OverridablesPlugin.json\");\n-const ModuleNotFoundError = require(\"../ModuleNotFoundError\");\n-const RuntimeGlobals = require(\"../RuntimeGlobals\");\n-const {\n-\ttoConstantDependency,\n-\tevaluateToString\n-} = require(\"../javascript/JavascriptParserHelpers\");\n-const LazySet = require(\"../util/LazySet\");\n-const OverridableModule = require(\"./OverridableModule\");\n-const OverridableOriginalDependency = require(\"./OverridableOriginalDependency\");\n-const OverridablesRuntimeModule = require(\"./OverridablesRuntimeModule\");\n-const { parseOptions } = require(\"./options\");\n-\n-/** @typedef {import(\"enhanced-resolve\").ResolveContext} ResolveContext */\n-/** @typedef {import(\"../../declarations/plugins/container/OverridablesPlugin\").OverridablesConfig} OverridablesConfig */\n-/** @typedef {import(\"../../declarations/plugins/container/OverridablesPlugin\").OverridablesPluginOptions} OverridablesPluginOptions */\n-/** @typedef {import(\"../Compiler\")} Compiler */\n-/** @typedef {import(\"./OverridableModule\").OverridableOptions} OverridableOptions */\n-\n-const PLUGIN_NAME = \"OverridablesPlugin\";\n-\n-class OverridablesPlugin {\n-\t/**\n-\t * @param {OverridablesPluginOptions} options options\n-\t */\n-\tconstructor(options) {\n-\t\tif (typeof options !== \"string\") {\n-\t\t\tvalidateOptions(schema, options, { name: \"Overridables Plugin\" });\n-\t\t}\n-\n-\t\tthis._overridables = parseOptions(\n-\t\t\toptions.overridables,\n-\t\t\titem => ({\n-\t\t\t\timport: Array.isArray(item) ? item : [item]\n-\t\t\t}),\n-\t\t\titem => ({\n-\t\t\t\timport: Array.isArray(item.import) ? item.import : [item.import]\n-\t\t\t})\n-\t\t);\n-\t}\n-\n-\t/**\n-\t * Apply the plugin\n-\t * @param {Compiler} compiler the compiler instance\n-\t * @returns {void}\n-\t */\n-\tapply(compiler) {\n-\t\tcompiler.hooks.thisCompilation.tap(\n-\t\t\tPLUGIN_NAME,\n-\t\t\t(compilation, { normalModuleFactory }) => {\n-\t\t\t\tcompilation.dependencyFactories.set(\n-\t\t\t\t\tOverridableOriginalDependency,\n-\t\t\t\t\tnormalModuleFactory\n-\t\t\t\t);\n-\n-\t\t\t\t/** @type {Map<string, OverridableOptions>} */\n-\t\t\t\tconst resolvedOverridables = new Map();\n-\t\t\t\tconst resolveContext = {\n-\t\t\t\t\t/** @type {LazySet<string>} */\n-\t\t\t\t\tfileDependencies: new LazySet(),\n-\t\t\t\t\t/** @type {LazySet<string>} */\n-\t\t\t\t\tcontextDependencies: new LazySet(),\n-\t\t\t\t\t/** @type {LazySet<string>} */\n-\t\t\t\t\tmissingDependencies: new LazySet()\n-\t\t\t\t};\n-\t\t\t\tconst resolver = compilation.resolverFactory.get(\"normal\");\n-\t\t\t\t/**\n-\t\t\t\t * @param {string} request imported request\n-\t\t\t\t * @param {string} name overridable name\n-\t\t\t\t * @param {OverridablesConfig} config config\n-\t\t\t\t * @returns {Promise<void>} promise\n-\t\t\t\t */\n-\t\t\t\tconst resolveOverridable = (request, name, config) => {\n-\t\t\t\t\treturn new Promise(resolve => {\n-\t\t\t\t\t\tresolver.resolve(\n-\t\t\t\t\t\t\t{},\n-\t\t\t\t\t\t\tcompiler.context,\n-\t\t\t\t\t\t\trequest,\n-\t\t\t\t\t\t\tresolveContext,\n-\t\t\t\t\t\t\t(err, result) => {\n-\t\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\t\tcompilation.errors.push(\n-\t\t\t\t\t\t\t\t\t\tnew ModuleNotFoundError(null, err, {\n-\t\t\t\t\t\t\t\t\t\t\tname: `overridable ${name}`\n-\t\t\t\t\t\t\t\t\t\t})\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\treturn resolve();\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tresolvedOverridables.set(result, {\n-\t\t\t\t\t\t\t\t\tname\n-\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\tresolve();\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t);\n-\t\t\t\t\t});\n-\t\t\t\t};\n-\t\t\t\tconst promise = Promise.all(\n-\t\t\t\t\tthis._overridables.map(([name, config]) => {\n-\t\t\t\t\t\treturn Promise.all(\n-\t\t\t\t\t\t\tconfig.import.map(request =>\n-\t\t\t\t\t\t\t\tresolveOverridable(request, name, config)\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t);\n-\t\t\t\t\t})\n-\t\t\t\t).then(() => {\n-\t\t\t\t\tcompilation.contextDependencies.addAll(\n-\t\t\t\t\t\tresolveContext.contextDependencies\n-\t\t\t\t\t);\n-\t\t\t\t\tcompilation.fileDependencies.addAll(resolveContext.fileDependencies);\n-\t\t\t\t\tcompilation.missingDependencies.addAll(\n-\t\t\t\t\t\tresolveContext.missingDependencies\n-\t\t\t\t\t);\n-\t\t\t\t});\n-\t\t\t\tnormalModuleFactory.hooks.afterResolve.tapAsync(\n-\t\t\t\t\tPLUGIN_NAME,\n-\t\t\t\t\t(resolveData, callback) => {\n-\t\t\t\t\t\t// wait for resolving to be complete\n-\t\t\t\t\t\tpromise.then(() => callback());\n-\t\t\t\t\t}\n-\t\t\t\t);\n-\t\t\t\tnormalModuleFactory.hooks.module.tap(\n-\t\t\t\t\tPLUGIN_NAME,\n-\t\t\t\t\t(module, createData, resolveData) => {\n-\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\tresolveData.dependencies[0] instanceof\n-\t\t\t\t\t\t\tOverridableOriginalDependency\n-\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\treturn;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tconst options = resolvedOverridables.get(createData.resource);\n-\t\t\t\t\t\tif (options !== undefined) {\n-\t\t\t\t\t\t\treturn new OverridableModule(\n-\t\t\t\t\t\t\t\tresolveData.context,\n-\t\t\t\t\t\t\t\tresolveData.request,\n-\t\t\t\t\t\t\t\toptions\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t);\n-\t\t\t\tcompilation.hooks.additionalTreeRuntimeRequirements.tap(\n-\t\t\t\t\tPLUGIN_NAME,\n-\t\t\t\t\t(chunk, set) => {\n-\t\t\t\t\t\tset.add(RuntimeGlobals.module);\n-\t\t\t\t\t\tset.add(RuntimeGlobals.moduleFactories);\n-\t\t\t\t\t\tset.add(RuntimeGlobals.hasOwnProperty);\n-\t\t\t\t\t\tcompilation.addRuntimeModule(\n-\t\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\tnew OverridablesRuntimeModule(set)\n-\t\t\t\t\t\t);\n-\t\t\t\t\t}\n-\t\t\t\t);\n-\t\t\t\tconst handler = parser => {\n-\t\t\t\t\tparser.hooks.expression\n-\t\t\t\t\t\t.for(\"__webpack_override__\")\n-\t\t\t\t\t\t.tap(\n-\t\t\t\t\t\t\tPLUGIN_NAME,\n-\t\t\t\t\t\t\ttoConstantDependency(\n-\t\t\t\t\t\t\t\tparser,\n-\t\t\t\t\t\t\t\t`Object.assign.bind(Object, ${RuntimeGlobals.overrides})`,\n-\t\t\t\t\t\t\t\t[RuntimeGlobals.overrides]\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t);\n-\t\t\t\t\tparser.hooks.evaluateTypeof\n-\t\t\t\t\t\t.for(\"__webpack_override__\")\n-\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"function\"));\n-\t\t\t\t};\n-\t\t\t\tnormalModuleFactory.hooks.parser\n-\t\t\t\t\t.for(\"javascript/auto\")\n-\t\t\t\t\t.tap(\"APIPlugin\", handler);\n-\t\t\t\tnormalModuleFactory.hooks.parser\n-\t\t\t\t\t.for(\"javascript/dynamic\")\n-\t\t\t\t\t.tap(\"APIPlugin\", handler);\n-\t\t\t\tnormalModuleFactory.hooks.parser\n-\t\t\t\t\t.for(\"javascript/esm\")\n-\t\t\t\t\t.tap(\"APIPlugin\", handler);\n-\t\t\t}\n-\t\t);\n-\t}\n-}\n-\n-module.exports = OverridablesPlugin;"
      },
      {
        "sha": "5f08ff5780908caf3078f9d7faf9468904a7c8f8",
        "filename": "lib/container/OverridablesRuntimeModule.js",
        "status": "removed",
        "additions": 0,
        "deletions": 153,
        "changes": 153,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FOverridablesRuntimeModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FOverridablesRuntimeModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FOverridablesRuntimeModule.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,153 +0,0 @@\n-/*\n-\tMIT License http://www.opensource.org/licenses/mit-license.php\n-\tAuthor Tobias Koppers @sokra\n-*/\n-\n-\"use strict\";\n-\n-const RuntimeGlobals = require(\"../RuntimeGlobals\");\n-const RuntimeModule = require(\"../RuntimeModule\");\n-const Template = require(\"../Template\");\n-\n-/** @typedef {import(\"./OverridableModule\")} OverridableModule */\n-\n-class OverridablesRuntimeModule extends RuntimeModule {\n-\tconstructor(runtimeRequirements) {\n-\t\tsuper(\"overridables\");\n-\t\tthis._runtimeRequirements = runtimeRequirements;\n-\t}\n-\n-\t/**\n-\t * @returns {string} runtime code\n-\t */\n-\tgenerate() {\n-\t\tconst {\n-\t\t\truntimeTemplate,\n-\t\t\tmoduleGraph,\n-\t\t\tchunkGraph,\n-\t\t\tcodeGenerationResults\n-\t\t} = this.compilation;\n-\t\tconst chunkToOverridableMapping = {};\n-\t\tconst idToNameMapping = {};\n-\t\tconst overridableToFallbackMapping = new Map();\n-\t\tconst initialOverridables = {};\n-\t\tconst asyncChunks = this.chunk.getAllAsyncChunks();\n-\t\tfor (const chunk of asyncChunks) {\n-\t\t\tconst modules = chunkGraph.getChunkModulesIterableBySourceType(\n-\t\t\t\tchunk,\n-\t\t\t\t\"overridable\"\n-\t\t\t);\n-\t\t\tif (!modules) continue;\n-\t\t\tconst overridables = (chunkToOverridableMapping[chunk.id] = []);\n-\t\t\tfor (const m of modules) {\n-\t\t\t\tconst module = /** @type {OverridableModule} */ (m);\n-\t\t\t\tconst name = module.options.name;\n-\t\t\t\tconst id = chunkGraph.getModuleId(module);\n-\t\t\t\toverridables.push(id);\n-\t\t\t\tidToNameMapping[id] = name;\n-\t\t\t\tconst source = codeGenerationResults\n-\t\t\t\t\t.get(module)\n-\t\t\t\t\t.sources.get(\"overridable\");\n-\t\t\t\toverridableToFallbackMapping.set(id, source.source());\n-\t\t\t}\n-\t\t}\n-\t\tfor (const chunk of this.chunk.getAllReferencedChunks()) {\n-\t\t\tif (asyncChunks.has(chunk)) continue;\n-\t\t\tconst modules = chunkGraph.getChunkModulesIterableBySourceType(\n-\t\t\t\tchunk,\n-\t\t\t\t\"overridable\"\n-\t\t\t);\n-\t\t\tif (!modules) continue;\n-\t\t\tfor (const m of modules) {\n-\t\t\t\tconst module = /** @type {OverridableModule} */ (m);\n-\t\t\t\tconst name = module.options.name;\n-\t\t\t\tconst id = chunkGraph.getModuleId(module);\n-\t\t\t\tidToNameMapping[id] = name;\n-\t\t\t\tconst fallbackModule = moduleGraph.getModule(\n-\t\t\t\t\tmodule.blocks[0].dependencies[0]\n-\t\t\t\t);\n-\t\t\t\tconst fallbackId = chunkGraph.getModuleId(fallbackModule);\n-\t\t\t\tinitialOverridables[id] = fallbackId;\n-\t\t\t}\n-\t\t}\n-\t\treturn Template.asString([\n-\t\t\t`${RuntimeGlobals.overrides} = {};`,\n-\t\t\t\"var installedModules = {};\",\n-\t\t\t`var idToNameMapping = ${JSON.stringify(idToNameMapping, null, \"\\t\")};`,\n-\n-\t\t\tObject.keys(initialOverridables).length\n-\t\t\t\t? Template.asString([\n-\t\t\t\t\t\t`var initialOverridables = ${JSON.stringify(\n-\t\t\t\t\t\t\tinitialOverridables,\n-\t\t\t\t\t\t\tnull,\n-\t\t\t\t\t\t\t\"\\t\"\n-\t\t\t\t\t\t)};`,\n-\t\t\t\t\t\t`for(var id in initialOverridables) if(${\n-\t\t\t\t\t\t\tRuntimeGlobals.hasOwnProperty\n-\t\t\t\t\t\t}(initialOverridables, id)) __webpack_modules__[id] = (${runtimeTemplate.returningFunction(\n-\t\t\t\t\t\t\t`${runtimeTemplate.basicFunction(\"module\", [\n-\t\t\t\t\t\t\t\t\"// Handle case when module is used sync\",\n-\t\t\t\t\t\t\t\t\"installedModules[id] = 0;\",\n-\t\t\t\t\t\t\t\t`var override = ${RuntimeGlobals.overrides}[idToNameMapping[id]];`,\n-\t\t\t\t\t\t\t\t\"module.exports = override ? override()() : __webpack_require__(initialOverridables[id]);\"\n-\t\t\t\t\t\t\t])}`,\n-\t\t\t\t\t\t\t\"id\"\n-\t\t\t\t\t\t)})(id);`\n-\t\t\t\t  ])\n-\t\t\t\t: \"// no overridables in initial chunks\",\n-\t\t\tthis._runtimeRequirements.has(RuntimeGlobals.ensureChunkHandlers)\n-\t\t\t\t? Template.asString([\n-\t\t\t\t\t\t`var chunkMapping = ${JSON.stringify(\n-\t\t\t\t\t\t\tchunkToOverridableMapping,\n-\t\t\t\t\t\t\tnull,\n-\t\t\t\t\t\t\t\"\\t\"\n-\t\t\t\t\t\t)};`,\n-\t\t\t\t\t\t\"var fallbackMapping = {\",\n-\t\t\t\t\t\tTemplate.indent(\n-\t\t\t\t\t\t\tArray.from(\n-\t\t\t\t\t\t\t\toverridableToFallbackMapping,\n-\t\t\t\t\t\t\t\t([id, source]) =>\n-\t\t\t\t\t\t\t\t\t`${JSON.stringify(id)}: ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\t\t\t\"\",\n-\t\t\t\t\t\t\t\t\t\tsource\n-\t\t\t\t\t\t\t\t\t)}`\n-\t\t\t\t\t\t\t).join(\",\\n\")\n-\t\t\t\t\t\t),\n-\t\t\t\t\t\t\"};\",\n-\t\t\t\t\t\t`${\n-\t\t\t\t\t\t\tRuntimeGlobals.ensureChunkHandlers\n-\t\t\t\t\t\t}.overridables = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\"chunkId, promises\",\n-\t\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t\t`if(${RuntimeGlobals.hasOwnProperty}(chunkMapping, chunkId)) {`,\n-\t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t`chunkMapping[chunkId].forEach(${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\t\t\t\"id\",\n-\t\t\t\t\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t\t\t\t\t`promises.push(${\n-\t\t\t\t\t\t\t\t\t\t\t\tRuntimeGlobals.hasOwnProperty\n-\t\t\t\t\t\t\t\t\t\t\t}(installedModules, id) ? installedModules[id] : installedModules[id] = Promise.resolve((${\n-\t\t\t\t\t\t\t\t\t\t\t\tRuntimeGlobals.overrides\n-\t\t\t\t\t\t\t\t\t\t\t}[idToNameMapping[id]] || fallbackMapping[id])()).then(${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\t\t\t\t\t\"factory\",\n-\t\t\t\t\t\t\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\"installedModules[id] = 0;\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\t`__webpack_modules__[id] = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"module\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\"module.exports = factory();\"]\n-\t\t\t\t\t\t\t\t\t\t\t\t\t)}`\n-\t\t\t\t\t\t\t\t\t\t\t\t]\n-\t\t\t\t\t\t\t\t\t\t\t)}))`\n-\t\t\t\t\t\t\t\t\t\t]\n-\t\t\t\t\t\t\t\t\t)});`\n-\t\t\t\t\t\t\t\t]),\n-\t\t\t\t\t\t\t\t\"}\"\n-\t\t\t\t\t\t\t]\n-\t\t\t\t\t\t)}`\n-\t\t\t\t  ])\n-\t\t\t\t: \"// no chunk loading of overridables\"\n-\t\t]);\n-\t}\n-}\n-\n-module.exports = OverridablesRuntimeModule;"
      },
      {
        "sha": "b2bea8e33afc4a7d4aecf340a9e36b4bc80f30f8",
        "filename": "lib/container/RemoteModule.js",
        "status": "modified",
        "additions": 28,
        "deletions": 22,
        "changes": 50,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FRemoteModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FRemoteModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FRemoteModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -8,9 +8,8 @@\n const { RawSource } = require(\"webpack-sources\");\n const Module = require(\"../Module\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n-const createHash = require(\"../util/createHash\");\n const makeSerializable = require(\"../util/makeSerializable\");\n-const RemoteOverridesDependency = require(\"./RemoteOverridesDependency\");\n+const FallbackDependency = require(\"./FallbackDependency\");\n const RemoteToExternalDependency = require(\"./RemoteToExternalDependency\");\n \n /** @typedef {import(\"../../declarations/WebpackOptions\").WebpackOptionsNormalized} WebpackOptions */\n@@ -26,33 +25,26 @@ const RemoteToExternalDependency = require(\"./RemoteToExternalDependency\");\n /** @typedef {import(\"../WebpackError\")} WebpackError */\n /** @typedef {import(\"../util/Hash\")} Hash */\n /** @typedef {import(\"../util/fs\").InputFileSystem} InputFileSystem */\n-/** @typedef {import(\"./RemoteOverridesModule\").OverrideOptions} OverrideOptions */\n \n-const TYPES = new Set([\"remote\"]);\n+const TYPES = new Set([\"remote\", \"share-init\"]);\n const RUNTIME_REQUIREMENTS = new Set([RuntimeGlobals.module]);\n \n class RemoteModule extends Module {\n \t/**\n \t * @param {string} request request string\n-\t * @param {[string, OverrideOptions][]} overrides list of overrides\n \t * @param {string[]} externalRequests list of external requests to containers\n \t * @param {string} internalRequest name of exposed module in container\n+\t * @param {string} shareScope the used share scope name\n \t */\n-\tconstructor(request, overrides, externalRequests, internalRequest) {\n+\tconstructor(request, externalRequests, internalRequest, shareScope) {\n \t\tsuper(\"remote-module\");\n \t\tthis.request = request;\n-\t\tthis.overrides = overrides;\n \t\tthis.externalRequests = externalRequests;\n \t\tthis.internalRequest = internalRequest;\n-\t\tconst hash = createHash(\"md4\");\n-\t\tfor (const [key, request] of overrides) {\n-\t\t\thash.update(key);\n-\t\t\thash.update(request.import);\n-\t\t}\n-\t\tthis._overridesHash = hash.digest(\"hex\");\n-\t\tthis._identifier = `remote ${this.externalRequests.join(\" \")} ${\n-\t\t\tthis.internalRequest\n-\t\t} ${this._overridesHash}`;\n+\t\tthis.shareScope = shareScope;\n+\t\tthis._identifier = `remote (${shareScope}) ${this.externalRequests.join(\n+\t\t\t\" \"\n+\t\t)} ${this.internalRequest}`;\n \t}\n \n \t/**\n@@ -102,9 +94,13 @@ class RemoteModule extends Module {\n \t\t};\n \n \t\tthis.clearDependenciesAndBlocks();\n-\t\tthis.addDependency(new RemoteOverridesDependency(this.overrides));\n-\t\tfor (const externalRequest of this.externalRequests)\n-\t\t\tthis.addDependency(new RemoteToExternalDependency(externalRequest));\n+\t\tif (this.externalRequests.length === 1) {\n+\t\t\tthis.addDependency(\n+\t\t\t\tnew RemoteToExternalDependency(this.externalRequests[0])\n+\t\t\t);\n+\t\t} else {\n+\t\t\tthis.addDependency(new FallbackDependency(this.externalRequests));\n+\t\t}\n \n \t\tcallback();\n \t}\n@@ -114,7 +110,7 @@ class RemoteModule extends Module {\n \t * @returns {number} the estimated size of the module (must be non-zero)\n \t */\n \tsize(type) {\n-\t\treturn 42;\n+\t\treturn 6;\n \t}\n \n \t/**\n@@ -136,17 +132,27 @@ class RemoteModule extends Module {\n \t * @returns {CodeGenerationResult} result\n \t */\n \tcodeGeneration({ runtimeTemplate, moduleGraph, chunkGraph }) {\n+\t\tconst module = moduleGraph.getModule(this.dependencies[0]);\n+\t\tconst id = module && chunkGraph.getModuleId(module);\n \t\tconst sources = new Map();\n \t\tsources.set(\"remote\", new RawSource(\"\"));\n-\t\treturn { sources, runtimeRequirements: RUNTIME_REQUIREMENTS };\n+\t\tconst data = new Map();\n+\t\tdata.set(\"share-init\", [\n+\t\t\t{\n+\t\t\t\tshareScope: this.shareScope,\n+\t\t\t\tinitStage: 20,\n+\t\t\t\tinit: id === undefined ? \"\" : `initExternal(${JSON.stringify(id)});`\n+\t\t\t}\n+\t\t]);\n+\t\treturn { sources, data, runtimeRequirements: RUNTIME_REQUIREMENTS };\n \t}\n \n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.request);\n-\t\twrite(this.overrides);\n \t\twrite(this.externalRequests);\n \t\twrite(this.internalRequest);\n+\t\twrite(this.shareScope);\n \t\tsuper.serialize(context);\n \t}\n "
      },
      {
        "sha": "5ed3e0f74984cdda49c6e76adf8f19cd3e056690",
        "filename": "lib/container/RemoteOverridesDependency.js",
        "status": "removed",
        "additions": 0,
        "deletions": 46,
        "changes": 46,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FRemoteOverridesDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/lib%2Fcontainer%2FRemoteOverridesDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FRemoteOverridesDependency.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,46 +0,0 @@\n-/*\n-\tMIT License http://www.opensource.org/licenses/mit-license.php\n-\tAuthor Tobias Koppers @sokra\n-*/\n-\n-\"use strict\";\n-\n-const Dependency = require(\"../Dependency\");\n-const makeSerializable = require(\"../util/makeSerializable\");\n-\n-class RemoteOverridesDependency extends Dependency {\n-\tconstructor(overrides) {\n-\t\tsuper();\n-\t\tthis.overrides = overrides;\n-\t}\n-\n-\tget type() {\n-\t\treturn \"remote overrides\";\n-\t}\n-\n-\t/**\n-\t * @returns {string | null} an identifier to merge equal requests\n-\t */\n-\tgetResourceIdentifier() {\n-\t\treturn `remote overrides ${this.overrides\n-\t\t\t.map(([key, request]) => `${key}=${request}`)\n-\t\t\t.join()}`;\n-\t}\n-\n-\tserialize(context) {\n-\t\tcontext.write(this.overrides);\n-\t\tsuper.serialize(context);\n-\t}\n-\n-\tdeserialize(context) {\n-\t\tthis.overrides = context.read();\n-\t\tsuper.deserialize(context);\n-\t}\n-}\n-\n-makeSerializable(\n-\tRemoteOverridesDependency,\n-\t\"webpack/lib/container/RemoteOverridesDependency\"\n-);\n-\n-module.exports = RemoteOverridesDependency;"
      },
      {
        "sha": "008fbf905a056e809508c03b60e476050fe931e7",
        "filename": "lib/container/RemoteRuntimeModule.js",
        "status": "modified",
        "additions": 28,
        "deletions": 62,
        "changes": 90,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FRemoteRuntimeModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2FRemoteRuntimeModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2FRemoteRuntimeModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -21,7 +21,6 @@ class RemoteRuntimeModule extends RuntimeModule {\n \t */\n \tgenerate() {\n \t\tconst { runtimeTemplate, chunkGraph, moduleGraph } = this.compilation;\n-\t\tlet hasFallback = false;\n \t\tconst chunkToRemotesMapping = {};\n \t\tconst idToExternalAndNameMapping = {};\n \t\tfor (const chunk of this.chunk.getAllAsyncChunks()) {\n@@ -35,20 +34,13 @@ class RemoteRuntimeModule extends RuntimeModule {\n \t\t\t\tconst module = /** @type {RemoteModule} */ (m);\n \t\t\t\tconst name = module.internalRequest;\n \t\t\t\tconst id = chunkGraph.getModuleId(module);\n-\t\t\t\tconst overridesModule = moduleGraph.getModule(module.dependencies[0]);\n-\t\t\t\tconst overridesModuleId =\n-\t\t\t\t\toverridesModule && chunkGraph.getModuleId(overridesModule);\n-\t\t\t\tconst externalModuleIds = module.dependencies.slice(1).map(dep => {\n-\t\t\t\t\tconst externalModule = moduleGraph.getModule(dep);\n-\t\t\t\t\treturn externalModule && chunkGraph.getModuleId(externalModule);\n-\t\t\t\t});\n-\t\t\t\tif (externalModuleIds.length > 1) hasFallback = true;\n+\t\t\t\tconst shareScope = module.shareScope;\n+\t\t\t\tconst dep = module.dependencies[0];\n+\t\t\t\tconst externalModule = moduleGraph.getModule(dep);\n+\t\t\t\tconst externalModuleId =\n+\t\t\t\t\texternalModule && chunkGraph.getModuleId(externalModule);\n \t\t\t\tremotes.push(id);\n-\t\t\t\tidToExternalAndNameMapping[id] = [\n-\t\t\t\t\toverridesModuleId,\n-\t\t\t\t\tname,\n-\t\t\t\t\t...externalModuleIds\n-\t\t\t\t];\n+\t\t\t\tidToExternalAndNameMapping[id] = [shareScope, name, externalModuleId];\n \t\t\t}\n \t\t}\n \t\treturn Template.asString([\n@@ -69,84 +61,58 @@ class RemoteRuntimeModule extends RuntimeModule {\n \t\t\t\t`if(${RuntimeGlobals.hasOwnProperty}(chunkMapping, chunkId)) {`,\n \t\t\t\tTemplate.indent([\n \t\t\t\t\t`chunkMapping[chunkId].forEach(${runtimeTemplate.basicFunction(\"id\", [\n-\t\t\t\t\t\t`if(${RuntimeGlobals.hasOwnProperty}(installedModules, id)) return installedModules[id] && promises.push(installedModules[id]);`,\n+\t\t\t\t\t\t`if(installedModules[id]) return promises.push(installedModules[id]);`,\n \t\t\t\t\t\t\"var data = idToExternalAndNameMapping[id];\",\n \t\t\t\t\t\t`var onError = ${runtimeTemplate.basicFunction(\"error\", [\n \t\t\t\t\t\t\t'if(!error) error = new Error(\"Container missing\");',\n \t\t\t\t\t\t\t'if(typeof error.message === \"string\")',\n \t\t\t\t\t\t\tTemplate.indent(\n-\t\t\t\t\t\t\t\t`error.message += '\\\\nwhile loading \"' + data[1] + '\" from ' + data[${\n-\t\t\t\t\t\t\t\t\thasFallback ? \"i\" : \"2\"\n-\t\t\t\t\t\t\t\t}];`\n+\t\t\t\t\t\t\t\t`error.message += '\\\\nwhile loading \"' + data[1] + '\" from ' + data[2];`\n \t\t\t\t\t\t\t),\n \t\t\t\t\t\t\t`__webpack_modules__[id] = ${runtimeTemplate.basicFunction(\"\", [\n \t\t\t\t\t\t\t\t\"throw error;\"\n \t\t\t\t\t\t\t])}`,\n-\t\t\t\t\t\t\t\"delete installedModules[id];\"\n+\t\t\t\t\t\t\t\"installedModules[id] = 0;\"\n \t\t\t\t\t\t])};`,\n-\t\t\t\t\t\t`var onExternal = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\"external, handlePromise\",\n+\t\t\t\t\t\t`var handleFunction = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\t\"fn, key, data, next, first\",\n \t\t\t\t\t\t\t[\n \t\t\t\t\t\t\t\t\"try {\",\n \t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\"var promise = __webpack_require__(data[0])(external).get(data[1]);\",\n+\t\t\t\t\t\t\t\t\t\"var promise = fn(key, data);\",\n \t\t\t\t\t\t\t\t\t\"if(promise && promise.then) {\",\n \t\t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\t\"var p = promise.then(onFactory, onError);\",\n-\t\t\t\t\t\t\t\t\t\t`if(handlePromise) promises.push(installedModules[id] = p); else return p;`\n+\t\t\t\t\t\t\t\t\t\t`var p = promise.then(${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t\t\t\t\t\t\"next(result, data)\",\n+\t\t\t\t\t\t\t\t\t\t\t\"result\"\n+\t\t\t\t\t\t\t\t\t\t)}, onError);`,\n+\t\t\t\t\t\t\t\t\t\t`if(first) promises.push(installedModules[id] = p); else return p;`\n \t\t\t\t\t\t\t\t\t]),\n \t\t\t\t\t\t\t\t\t\"} else {\",\n-\t\t\t\t\t\t\t\t\tTemplate.indent([`onFactory(promise);`]),\n+\t\t\t\t\t\t\t\t\tTemplate.indent([\"return next(promise, data, first);\"]),\n \t\t\t\t\t\t\t\t\t\"}\"\n \t\t\t\t\t\t\t\t]),\n \t\t\t\t\t\t\t\t\"} catch(error) {\",\n \t\t\t\t\t\t\t\tTemplate.indent([\"onError(error);\"]),\n \t\t\t\t\t\t\t\t\"}\"\n \t\t\t\t\t\t\t]\n+\t\t\t\t\t\t)}`,\n+\t\t\t\t\t\t`var onExternal = ${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t\t`external ? handleFunction(${RuntimeGlobals.initializeSharing}, data[0], external, onInitialized, first) : onError()`,\n+\t\t\t\t\t\t\t\"external, _, first\"\n+\t\t\t\t\t\t)};`,\n+\t\t\t\t\t\t`var onInitialized = ${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t\t`handleFunction(external.get, data[1], external, onFactory, first)`,\n+\t\t\t\t\t\t\t\"_, external, first\"\n \t\t\t\t\t\t)};`,\n \t\t\t\t\t\t`var onFactory = ${runtimeTemplate.basicFunction(\"factory\", [\n-\t\t\t\t\t\t\t\"installedModules[id] = 0;\",\n+\t\t\t\t\t\t\t\"installedModules[id] = 1;\",\n \t\t\t\t\t\t\t`__webpack_modules__[id] = ${runtimeTemplate.basicFunction(\n \t\t\t\t\t\t\t\t\"module\",\n \t\t\t\t\t\t\t\t[\"module.exports = factory();\"]\n \t\t\t\t\t\t\t)}`\n \t\t\t\t\t\t])};`,\n-\t\t\t\t\t\thasFallback\n-\t\t\t\t\t\t\t? Template.asString([\n-\t\t\t\t\t\t\t\t\t\"var i = 1, item, result;\",\n-\t\t\t\t\t\t\t\t\t\"(function next(error) {\",\n-\t\t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\t\"for(;;) {\",\n-\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\t\t\"try {\",\n-\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\t\t\t\"// Process with the next external in the data array\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"item = data[++i];\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"// Reached end of data, report the last error\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"if(!item) return onError(error);\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"result = __webpack_require__(item);\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"// Continue when receiving falsy value, otherwise handle promise or normal value\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"if(result) return result.then ? promises.push(installedModules[id] = result.then(onExternal, next)) : onExternal(result, 1);\"\n-\t\t\t\t\t\t\t\t\t\t\t]),\n-\t\t\t\t\t\t\t\t\t\t\t\"} catch(e) {\",\n-\t\t\t\t\t\t\t\t\t\t\tTemplate.indent(\"error = e;\"),\n-\t\t\t\t\t\t\t\t\t\t\t\"}\"\n-\t\t\t\t\t\t\t\t\t\t]),\n-\t\t\t\t\t\t\t\t\t\t\"}\"\n-\t\t\t\t\t\t\t\t\t]),\n-\t\t\t\t\t\t\t\t\t\"})();\"\n-\t\t\t\t\t\t\t  ])\n-\t\t\t\t\t\t\t: Template.asString([\n-\t\t\t\t\t\t\t\t\t\"try {\",\n-\t\t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\t\"var promise =__webpack_require__(data[2]);\",\n-\t\t\t\t\t\t\t\t\t\t\"if(promise) return promise.then ? promises.push(installedModules[id] = promise.then(onExternal, onError)) : onExternal(promise, 1);\",\n-\t\t\t\t\t\t\t\t\t\t\"onError();\"\n-\t\t\t\t\t\t\t\t\t]),\n-\t\t\t\t\t\t\t\t\t\"} catch(error) {\",\n-\t\t\t\t\t\t\t\t\tTemplate.indent([\"onError(error);\"]),\n-\t\t\t\t\t\t\t\t\t\"}\"\n-\t\t\t\t\t\t\t  ])\n+\t\t\t\t\t\t\"handleFunction(__webpack_require__, data[2], 1, onExternal, 1);\"\n \t\t\t\t\t])});`\n \t\t\t\t]),\n \t\t\t\t\"}\""
      },
      {
        "sha": "8cd9698a0f3a3db3c3cb42390484425866f598d8",
        "filename": "lib/container/options.js",
        "status": "modified",
        "additions": 7,
        "deletions": 7,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2Foptions.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fcontainer%2Foptions.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcontainer%2Foptions.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -11,16 +11,16 @@\n  * @template T\n  * @template N\n  * @param {ContainerOptionsFormat<T>} options options passed by the user\n- * @param {function(string | string[]) : N} normalizeSimple normalize a simple item\n- * @param {function(T) : N} normalizeOptions normalize a complex item\n+ * @param {function(string | string[], string) : N} normalizeSimple normalize a simple item\n+ * @param {function(T, string) : N} normalizeOptions normalize a complex item\n  * @param {function(string, N): void} fn processing function\n  * @returns {void}\n  */\n const process = (options, normalizeSimple, normalizeOptions, fn) => {\n \tconst array = items => {\n \t\tfor (const item of items) {\n \t\t\tif (typeof item === \"string\") {\n-\t\t\t\tfn(item, normalizeSimple(item));\n+\t\t\t\tfn(item, normalizeSimple(item, item));\n \t\t\t} else if (item && typeof item === \"object\") {\n \t\t\t\tobject(item);\n \t\t\t} else {\n@@ -31,9 +31,9 @@ const process = (options, normalizeSimple, normalizeOptions, fn) => {\n \tconst object = obj => {\n \t\tfor (const [key, value] of Object.entries(obj)) {\n \t\t\tif (typeof value === \"string\" || Array.isArray(value)) {\n-\t\t\t\tfn(key, normalizeSimple(value));\n+\t\t\t\tfn(key, normalizeSimple(value, key));\n \t\t\t} else {\n-\t\t\t\tfn(key, normalizeOptions(value));\n+\t\t\t\tfn(key, normalizeOptions(value, key));\n \t\t\t}\n \t\t}\n \t};\n@@ -52,8 +52,8 @@ const process = (options, normalizeSimple, normalizeOptions, fn) => {\n  * @template T\n  * @template R\n  * @param {ContainerOptionsFormat<T>} options options passed by the user\n- * @param {function(string | string[]) : R} normalizeSimple normalize a simple item\n- * @param {function(T) : R} normalizeOptions normalize a complex item\n+ * @param {function(string | string[], string) : R} normalizeSimple normalize a simple item\n+ * @param {function(T, string) : R} normalizeOptions normalize a complex item\n  * @returns {[string, R][]} parsed options\n  */\n const parseOptions = (options, normalizeSimple, normalizeOptions) => {"
      },
      {
        "sha": "f0ceb030d066718080d603af09f540ee52aec70b",
        "filename": "lib/index.js",
        "status": "modified",
        "additions": 14,
        "deletions": 2,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Findex.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -390,8 +390,20 @@ module.exports = mergeExports(fn, {\n \t\tget ModuleFederationPlugin() {\n \t\t\treturn require(\"./container/ModuleFederationPlugin\");\n \t\t},\n-\t\tget OverridablesPlugin() {\n-\t\t\treturn require(\"./container/OverridablesPlugin\");\n+\t\tget scope() {\n+\t\t\treturn require(\"./container/options\").scope;\n+\t\t}\n+\t},\n+\n+\tsharing: {\n+\t\tget ConsumeSharedPlugin() {\n+\t\t\treturn require(\"./sharing/ConsumeSharedPlugin\");\n+\t\t},\n+\t\tget ProvideSharedPlugin() {\n+\t\t\treturn require(\"./sharing/ProvideSharedPlugin\");\n+\t\t},\n+\t\tget SharePlugin() {\n+\t\t\treturn require(\"./sharing/SharePlugin\");\n \t\t},\n \t\tget scope() {\n \t\t\treturn require(\"./container/options\").scope;"
      },
      {
        "sha": "ed531e257c7fa1110dd2ce5da631468c9bc3bf70",
        "filename": "lib/sharing/ConsumeFallbackDependency.js",
        "status": "added",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeFallbackDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeFallbackDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FConsumeFallbackDependency.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,26 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const ModuleDependency = require(\"../dependencies/ModuleDependency\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n+\n+class ConsumeFallbackDependency extends ModuleDependency {\n+\tconstructor(request) {\n+\t\tsuper(request);\n+\t}\n+\n+\tget type() {\n+\t\treturn \"consume fallback\";\n+\t}\n+}\n+\n+makeSerializable(\n+\tConsumeFallbackDependency,\n+\t\"webpack/lib/sharing/ConsumeFallbackDependency\"\n+);\n+\n+module.exports = ConsumeFallbackDependency;"
      },
      {
        "sha": "cbcc6d6f6076b10f24cf575001b333f1bbb7efa7",
        "filename": "lib/sharing/ConsumeSharedModule.js",
        "status": "added",
        "additions": 239,
        "deletions": 0,
        "changes": 239,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeSharedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeSharedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FConsumeSharedModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,239 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const { RawSource } = require(\"webpack-sources\");\n+const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n+const Module = require(\"../Module\");\n+const RuntimeGlobals = require(\"../RuntimeGlobals\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n+const ConsumeFallbackDependency = require(\"./ConsumeFallbackDependency\");\n+const { versionToString } = require(\"./utils\");\n+\n+/** @typedef {import(\"../../declarations/WebpackOptions\").WebpackOptionsNormalized} WebpackOptions */\n+/** @typedef {import(\"../ChunkGraph\")} ChunkGraph */\n+/** @typedef {import(\"../ChunkGroup\")} ChunkGroup */\n+/** @typedef {import(\"../Compilation\")} Compilation */\n+/** @typedef {import(\"../Module\").CodeGenerationContext} CodeGenerationContext */\n+/** @typedef {import(\"../Module\").CodeGenerationResult} CodeGenerationResult */\n+/** @typedef {import(\"../Module\").LibIdentOptions} LibIdentOptions */\n+/** @typedef {import(\"../Module\").NeedBuildContext} NeedBuildContext */\n+/** @typedef {import(\"../RequestShortener\")} RequestShortener */\n+/** @typedef {import(\"../ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\n+/** @typedef {import(\"../WebpackError\")} WebpackError */\n+/** @typedef {import(\"../util/Hash\")} Hash */\n+/** @typedef {import(\"../util/fs\").InputFileSystem} InputFileSystem */\n+\n+/**\n+ * @typedef {Object} ConsumeOptions\n+ * @property {string=} import fallback request\n+ * @property {string} shareKey global share key\n+ * @property {string} shareScope share scope\n+ * @property {(number|string)[]} requiredVersion version requirement\n+ * @property {boolean} strictVersion don't use shared version even if version isn't valid\n+ * @property {boolean} singleton use single global version\n+ * @property {boolean} eager include the fallback module in a sync way\n+ */\n+\n+const TYPES = new Set([\"consume-shared\"]);\n+\n+class ConsumeSharedModule extends Module {\n+\t/**\n+\t * @param {string} context context\n+\t * @param {ConsumeOptions} options consume options\n+\t */\n+\tconstructor(context, options) {\n+\t\tsuper(\"consume-shared-module\", context);\n+\t\tthis.options = options;\n+\t}\n+\n+\t/**\n+\t * @returns {string} a unique identifier of the module\n+\t */\n+\tidentifier() {\n+\t\tconst {\n+\t\t\tshareKey,\n+\t\t\tshareScope,\n+\t\t\timport: request,\n+\t\t\trequiredVersion,\n+\t\t\tstrictVersion,\n+\t\t\tsingleton,\n+\t\t\teager\n+\t\t} = this.options;\n+\t\treturn `consume-shared-module|${shareScope}|${shareKey}|${versionToString(\n+\t\t\trequiredVersion\n+\t\t)}|${strictVersion}|${request}|${singleton}|${eager}`;\n+\t}\n+\n+\t/**\n+\t * @param {RequestShortener} requestShortener the request shortener\n+\t * @returns {string} a user readable identifier of the module\n+\t */\n+\treadableIdentifier(requestShortener) {\n+\t\tconst {\n+\t\t\tshareKey,\n+\t\t\tshareScope,\n+\t\t\timport: request,\n+\t\t\trequiredVersion,\n+\t\t\tstrictVersion,\n+\t\t\tsingleton,\n+\t\t\teager\n+\t\t} = this.options;\n+\t\treturn `shared module (${shareScope}) ${shareKey}@${versionToString(\n+\t\t\trequiredVersion\n+\t\t)}${strictVersion ? \" (strict)\" : \"\"}${singleton ? \" (singleton)\" : \"\"}${\n+\t\t\trequest ? ` -> ${request}` : \"\"\n+\t\t}${eager ? \" (eager)\" : \"\"}`;\n+\t}\n+\n+\t/**\n+\t * @param {LibIdentOptions} options options\n+\t * @returns {string | null} an identifier for library inclusion\n+\t */\n+\tlibIdent(options) {\n+\t\tconst { shareKey, shareScope, import: request } = this.options;\n+\t\treturn `webpack/sharing/consume/${shareScope}/${shareKey}${\n+\t\t\trequest ? `/${request}` : \"\"\n+\t\t}`;\n+\t}\n+\n+\t/**\n+\t * @param {NeedBuildContext} context context info\n+\t * @param {function(WebpackError=, boolean=): void} callback callback function, returns true, if the module needs a rebuild\n+\t * @returns {void}\n+\t */\n+\tneedBuild(context, callback) {\n+\t\tcallback(null, !this.buildInfo);\n+\t}\n+\n+\t/**\n+\t * @param {WebpackOptions} options webpack options\n+\t * @param {Compilation} compilation the compilation\n+\t * @param {ResolverWithOptions} resolver the resolver\n+\t * @param {InputFileSystem} fs the file system\n+\t * @param {function(WebpackError=): void} callback callback function\n+\t * @returns {void}\n+\t */\n+\tbuild(options, compilation, resolver, fs, callback) {\n+\t\tthis.buildMeta = {};\n+\t\tthis.buildInfo = {};\n+\t\tif (this.options.import) {\n+\t\t\tconst dep = new ConsumeFallbackDependency(this.options.import);\n+\t\t\tif (this.options.eager) {\n+\t\t\t\tthis.addDependency(dep);\n+\t\t\t} else {\n+\t\t\t\tconst block = new AsyncDependenciesBlock({});\n+\t\t\t\tblock.addDependency(dep);\n+\t\t\t\tthis.addBlock(block);\n+\t\t\t}\n+\t\t}\n+\t\tcallback();\n+\t}\n+\n+\t/**\n+\t * @returns {Set<string>} types available (do not mutate)\n+\t */\n+\tgetSourceTypes() {\n+\t\treturn TYPES;\n+\t}\n+\n+\t/**\n+\t * @param {string=} type the source type for which the size should be estimated\n+\t * @returns {number} the estimated size of the module (must be non-zero)\n+\t */\n+\tsize(type) {\n+\t\treturn 42;\n+\t}\n+\n+\t/**\n+\t * @param {Hash} hash the hash used to track dependencies\n+\t * @param {ChunkGraph} chunkGraph the chunk graph\n+\t * @returns {void}\n+\t */\n+\tupdateHash(hash, chunkGraph) {\n+\t\thash.update(JSON.stringify(this.options));\n+\t\tsuper.updateHash(hash, chunkGraph);\n+\t}\n+\n+\t/**\n+\t * @param {CodeGenerationContext} context context for code generation\n+\t * @returns {CodeGenerationResult} result\n+\t */\n+\tcodeGeneration({ chunkGraph, moduleGraph, runtimeTemplate }) {\n+\t\tconst runtimeRequirements = new Set([RuntimeGlobals.shareScopeMap]);\n+\t\tconst {\n+\t\t\tshareScope,\n+\t\t\tshareKey,\n+\t\t\tstrictVersion,\n+\t\t\trequiredVersion,\n+\t\t\timport: request,\n+\t\t\tsingleton,\n+\t\t\teager\n+\t\t} = this.options;\n+\t\tlet fallbackCode;\n+\t\tif (request) {\n+\t\t\tif (eager) {\n+\t\t\t\tconst dep = this.dependencies[0];\n+\t\t\t\tfallbackCode = runtimeTemplate.syncModuleFactory({\n+\t\t\t\t\tdependency: dep,\n+\t\t\t\t\tchunkGraph,\n+\t\t\t\t\truntimeRequirements,\n+\t\t\t\t\trequest: this.options.import\n+\t\t\t\t});\n+\t\t\t} else {\n+\t\t\t\tconst block = this.blocks[0];\n+\t\t\t\tfallbackCode = runtimeTemplate.asyncModuleFactory({\n+\t\t\t\t\tblock,\n+\t\t\t\t\tchunkGraph,\n+\t\t\t\t\truntimeRequirements,\n+\t\t\t\t\trequest: this.options.import\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n+\t\tlet fn = \"load\";\n+\t\tconst args = [JSON.stringify(shareScope), JSON.stringify(shareKey)];\n+\t\tif (requiredVersion) {\n+\t\t\tif (strictVersion) {\n+\t\t\t\tfn += \"Strict\";\n+\t\t\t}\n+\t\t\tif (singleton) {\n+\t\t\t\tfn += \"Singleton\";\n+\t\t\t}\n+\t\t\targs.push(JSON.stringify(requiredVersion));\n+\t\t\tfn += \"VersionCheck\";\n+\t\t}\n+\t\tif (fallbackCode) {\n+\t\t\tfn += \"Fallback\";\n+\t\t\targs.push(fallbackCode);\n+\t\t}\n+\t\tconst code = runtimeTemplate.returningFunction(`${fn}(${args.join(\", \")})`);\n+\t\tconst sources = new Map();\n+\t\tsources.set(\"consume-shared\", new RawSource(code));\n+\t\treturn {\n+\t\t\truntimeRequirements,\n+\t\t\tsources\n+\t\t};\n+\t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.options);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.options = read();\n+\t\tsuper.deserialize(context);\n+\t}\n+}\n+\n+makeSerializable(\n+\tConsumeSharedModule,\n+\t\"webpack/lib/sharing/ConsumeSharedModule\"\n+);\n+\n+module.exports = ConsumeSharedModule;"
      },
      {
        "sha": "5bd48327db1045f443ca2261392fd8ad21d9725d",
        "filename": "lib/sharing/ConsumeSharedPlugin.js",
        "status": "added",
        "additions": 229,
        "deletions": 0,
        "changes": 229,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeSharedPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeSharedPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FConsumeSharedPlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,229 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const validateOptions = require(\"schema-utils\");\n+const schema = require(\"../../schemas/plugins/sharing/ConsumeSharedPlugin.json\");\n+const ModuleNotFoundError = require(\"../ModuleNotFoundError\");\n+const RuntimeGlobals = require(\"../RuntimeGlobals\");\n+const { parseOptions } = require(\"../container/options\");\n+const LazySet = require(\"../util/LazySet\");\n+const ConsumeFallbackDependency = require(\"./ConsumeFallbackDependency\");\n+const ConsumeSharedModule = require(\"./ConsumeSharedModule\");\n+const ConsumeSharedRuntimeModule = require(\"./ConsumeSharedRuntimeModule\");\n+const ProvidedDependency = require(\"./ProvidedDependency\");\n+const { parseRequiredVersion, isRequiredVersion } = require(\"./utils\");\n+\n+/** @typedef {import(\"enhanced-resolve\").ResolveContext} ResolveContext */\n+/** @typedef {import(\"../../declarations/plugins/sharing/ConsumeSharedPlugin\").ConsumeSharedPluginOptions} ConsumeSharedPluginOptions */\n+/** @typedef {import(\"../../declarations/plugins/sharing/ConsumeSharedPlugin\").ConsumesConfig} ConsumesConfig */\n+/** @typedef {import(\"../Compiler\")} Compiler */\n+/** @typedef {import(\"./ConsumeSharedModule\").ConsumeOptions} ConsumeOptions */\n+\n+const PLUGIN_NAME = \"ConsumeSharedPlugin\";\n+\n+class ConsumeSharedPlugin {\n+\t/**\n+\t * @param {ConsumeSharedPluginOptions} options options\n+\t */\n+\tconstructor(options) {\n+\t\tif (typeof options !== \"string\") {\n+\t\t\tvalidateOptions(schema, options, { name: \"Consumes Shared Plugin\" });\n+\t\t}\n+\n+\t\t/** @type {[string, ConsumeOptions][]} */\n+\t\tthis._consumes = parseOptions(\n+\t\t\toptions.consumes,\n+\t\t\t(item, key) => {\n+\t\t\t\tif (Array.isArray(item)) throw new Error(\"Unexpected array in options\");\n+\t\t\t\t/** @type {ConsumeOptions} */\n+\t\t\t\tlet result =\n+\t\t\t\t\titem === key || !isRequiredVersion(item)\n+\t\t\t\t\t\t? // item is a request/key\n+\t\t\t\t\t\t  {\n+\t\t\t\t\t\t\t\timport: key,\n+\t\t\t\t\t\t\t\tshareScope: options.shareScope || \"default\",\n+\t\t\t\t\t\t\t\tshareKey: key,\n+\t\t\t\t\t\t\t\trequiredVersion: undefined,\n+\t\t\t\t\t\t\t\tstrictVersion: false,\n+\t\t\t\t\t\t\t\tsingleton: false,\n+\t\t\t\t\t\t\t\teager: false\n+\t\t\t\t\t\t  }\n+\t\t\t\t\t\t: // key is a request/key\n+\t\t\t\t\t\t  // item is a version\n+\t\t\t\t\t\t  {\n+\t\t\t\t\t\t\t\timport: key,\n+\t\t\t\t\t\t\t\tshareScope: options.shareScope || \"default\",\n+\t\t\t\t\t\t\t\tshareKey: key,\n+\t\t\t\t\t\t\t\trequiredVersion: parseRequiredVersion(item),\n+\t\t\t\t\t\t\t\tstrictVersion: true,\n+\t\t\t\t\t\t\t\tsingleton: false,\n+\t\t\t\t\t\t\t\teager: false\n+\t\t\t\t\t\t  };\n+\t\t\t\treturn result;\n+\t\t\t},\n+\t\t\t(item, key) => ({\n+\t\t\t\timport: item.import === false ? undefined : item.import || key,\n+\t\t\t\tshareScope: item.shareScope || options.shareScope || \"default\",\n+\t\t\t\tshareKey: item.shareKey || key,\n+\t\t\t\trequiredVersion:\n+\t\t\t\t\ttypeof item.requiredVersion === \"string\"\n+\t\t\t\t\t\t? parseRequiredVersion(item.requiredVersion)\n+\t\t\t\t\t\t: item.requiredVersion,\n+\t\t\t\tstrictVersion:\n+\t\t\t\t\titem.requiredVersion &&\n+\t\t\t\t\t(typeof item.strictVersion === \"boolean\"\n+\t\t\t\t\t\t? item.strictVersion\n+\t\t\t\t\t\t: item.import !== false && !item.singleton),\n+\t\t\t\tsingleton: !!item.singleton,\n+\t\t\t\teager: !!item.eager\n+\t\t\t})\n+\t\t);\n+\t}\n+\n+\t/**\n+\t * Apply the plugin\n+\t * @param {Compiler} compiler the compiler instance\n+\t * @returns {void}\n+\t */\n+\tapply(compiler) {\n+\t\tcompiler.hooks.thisCompilation.tap(\n+\t\t\tPLUGIN_NAME,\n+\t\t\t(compilation, { normalModuleFactory }) => {\n+\t\t\t\tcompilation.dependencyFactories.set(\n+\t\t\t\t\tConsumeFallbackDependency,\n+\t\t\t\t\tnormalModuleFactory\n+\t\t\t\t);\n+\n+\t\t\t\t/** @type {Map<string, ConsumeOptions>} */\n+\t\t\t\tconst resolvedConsumes = new Map();\n+\t\t\t\t/** @type {Map<string, ConsumeOptions>} */\n+\t\t\t\tconst unresolvedConsumes = new Map();\n+\t\t\t\t/** @type {Map<string, ConsumeOptions>} */\n+\t\t\t\tconst prefixConsumes = new Map();\n+\t\t\t\tconst resolveContext = {\n+\t\t\t\t\t/** @type {LazySet<string>} */\n+\t\t\t\t\tfileDependencies: new LazySet(),\n+\t\t\t\t\t/** @type {LazySet<string>} */\n+\t\t\t\t\tcontextDependencies: new LazySet(),\n+\t\t\t\t\t/** @type {LazySet<string>} */\n+\t\t\t\t\tmissingDependencies: new LazySet()\n+\t\t\t\t};\n+\t\t\t\tconst resolver = compilation.resolverFactory.get(\"normal\");\n+\t\t\t\t/**\n+\t\t\t\t * @param {string} request imported request\n+\t\t\t\t * @param {ConsumeOptions} options options\n+\t\t\t\t * @returns {Promise<void>} promise\n+\t\t\t\t */\n+\t\t\t\tconst resolveConsume = (request, options) => {\n+\t\t\t\t\tif (/^\\.\\.?(\\/|$)/.test(request)) {\n+\t\t\t\t\t\t// relative request\n+\t\t\t\t\t\treturn new Promise(resolve => {\n+\t\t\t\t\t\t\tresolver.resolve(\n+\t\t\t\t\t\t\t\t{},\n+\t\t\t\t\t\t\t\tcompiler.context,\n+\t\t\t\t\t\t\t\trequest,\n+\t\t\t\t\t\t\t\tresolveContext,\n+\t\t\t\t\t\t\t\t(err, result) => {\n+\t\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\t\tcompilation.errors.push(\n+\t\t\t\t\t\t\t\t\t\t\tnew ModuleNotFoundError(null, err, {\n+\t\t\t\t\t\t\t\t\t\t\t\tname: `consumed shared module ${request}`\n+\t\t\t\t\t\t\t\t\t\t\t})\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\treturn resolve();\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tresolvedConsumes.set(result, options);\n+\t\t\t\t\t\t\t\t\tresolve();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t});\n+\t\t\t\t\t} else if (/^(\\/|[A-Za-z]:\\\\|\\\\\\\\)/.test(request)) {\n+\t\t\t\t\t\t// absolute path\n+\t\t\t\t\t\tresolvedConsumes.set(request, options);\n+\t\t\t\t\t} else if (request.endsWith(\"/\")) {\n+\t\t\t\t\t\t// module request prefix\n+\t\t\t\t\t\tprefixConsumes.set(request, options);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\t// module request\n+\t\t\t\t\t\tunresolvedConsumes.set(request, options);\n+\t\t\t\t\t}\n+\t\t\t\t};\n+\t\t\t\tconst promise = Promise.all(\n+\t\t\t\t\tthis._consumes.map(([name, config]) => resolveConsume(name, config))\n+\t\t\t\t).then(() => {\n+\t\t\t\t\tcompilation.contextDependencies.addAll(\n+\t\t\t\t\t\tresolveContext.contextDependencies\n+\t\t\t\t\t);\n+\t\t\t\t\tcompilation.fileDependencies.addAll(resolveContext.fileDependencies);\n+\t\t\t\t\tcompilation.missingDependencies.addAll(\n+\t\t\t\t\t\tresolveContext.missingDependencies\n+\t\t\t\t\t);\n+\t\t\t\t});\n+\t\t\t\tnormalModuleFactory.hooks.factorize.tapPromise(\n+\t\t\t\t\tPLUGIN_NAME,\n+\t\t\t\t\t({ context, request, dependencies }) =>\n+\t\t\t\t\t\t// wait for resolving to be complete\n+\t\t\t\t\t\tpromise.then(() => {\n+\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\tdependencies[0] instanceof ConsumeFallbackDependency ||\n+\t\t\t\t\t\t\t\tdependencies[0] instanceof ProvidedDependency\n+\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tconst match = unresolvedConsumes.get(request);\n+\t\t\t\t\t\t\tif (match !== undefined) {\n+\t\t\t\t\t\t\t\treturn new ConsumeSharedModule(compiler.context, match);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tfor (const [prefix, options] of prefixConsumes) {\n+\t\t\t\t\t\t\t\tif (request.startsWith(prefix)) {\n+\t\t\t\t\t\t\t\t\tconst remainder = request.slice(prefix.length);\n+\t\t\t\t\t\t\t\t\treturn new ConsumeSharedModule(compiler.context, {\n+\t\t\t\t\t\t\t\t\t\t...options,\n+\t\t\t\t\t\t\t\t\t\timport: options.import\n+\t\t\t\t\t\t\t\t\t\t\t? options.import + remainder\n+\t\t\t\t\t\t\t\t\t\t\t: undefined,\n+\t\t\t\t\t\t\t\t\t\tshareKey: options.shareKey + remainder\n+\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t})\n+\t\t\t\t);\n+\t\t\t\tnormalModuleFactory.hooks.module.tap(\n+\t\t\t\t\tPLUGIN_NAME,\n+\t\t\t\t\t(module, createData, { context, request, dependencies }) => {\n+\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\tdependencies[0] instanceof ConsumeFallbackDependency ||\n+\t\t\t\t\t\t\tdependencies[0] instanceof ProvidedDependency\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tconst options = resolvedConsumes.get(createData.resource);\n+\t\t\t\t\t\tif (options !== undefined) {\n+\t\t\t\t\t\t\treturn new ConsumeSharedModule(compiler.context, options);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t);\n+\t\t\t\tcompilation.hooks.additionalTreeRuntimeRequirements.tap(\n+\t\t\t\t\tPLUGIN_NAME,\n+\t\t\t\t\t(chunk, set) => {\n+\t\t\t\t\t\tset.add(RuntimeGlobals.module);\n+\t\t\t\t\t\tset.add(RuntimeGlobals.moduleFactoriesAddOnly);\n+\t\t\t\t\t\tset.add(RuntimeGlobals.shareScopeMap);\n+\t\t\t\t\t\tset.add(RuntimeGlobals.initializeSharing);\n+\t\t\t\t\t\tset.add(RuntimeGlobals.hasOwnProperty);\n+\t\t\t\t\t\tcompilation.addRuntimeModule(\n+\t\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\t\tnew ConsumeSharedRuntimeModule(set)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t);\n+\t\t\t}\n+\t\t);\n+\t}\n+}\n+\n+module.exports = ConsumeSharedPlugin;"
      },
      {
        "sha": "6b0f7e83e2e6e504c2f264fcbb3f97e49f0c524b",
        "filename": "lib/sharing/ConsumeSharedRuntimeModule.js",
        "status": "added",
        "additions": 294,
        "deletions": 0,
        "changes": 294,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeSharedRuntimeModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FConsumeSharedRuntimeModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FConsumeSharedRuntimeModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,294 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const RuntimeGlobals = require(\"../RuntimeGlobals\");\n+const RuntimeModule = require(\"../RuntimeModule\");\n+const Template = require(\"../Template\");\n+\n+/** @typedef {import(\"./ConsumeSharedModule\")} ConsumeSharedModule */\n+\n+class ConsumeSharedRuntimeModule extends RuntimeModule {\n+\tconstructor(runtimeRequirements) {\n+\t\tsuper(\"consumes\", 10);\n+\t\tthis._runtimeRequirements = runtimeRequirements;\n+\t}\n+\n+\t/**\n+\t * @returns {string} runtime code\n+\t */\n+\tgenerate() {\n+\t\tconst {\n+\t\t\truntimeTemplate,\n+\t\t\tchunkGraph,\n+\t\t\tcodeGenerationResults\n+\t\t} = this.compilation;\n+\t\tconst chunkToModuleMapping = {};\n+\t\tconst idToModuleMapping = new Map();\n+\t\tconst initialConsumes = [];\n+\t\tfor (const chunk of this.chunk.getAllAsyncChunks()) {\n+\t\t\tconst modules = chunkGraph.getChunkModulesIterableBySourceType(\n+\t\t\t\tchunk,\n+\t\t\t\t\"consume-shared\"\n+\t\t\t);\n+\t\t\tif (!modules) continue;\n+\t\t\tconst consumes = (chunkToModuleMapping[chunk.id] = []);\n+\t\t\tfor (const m of modules) {\n+\t\t\t\tconst module = /** @type {ConsumeSharedModule} */ (m);\n+\t\t\t\tconst id = chunkGraph.getModuleId(module);\n+\t\t\t\tconsumes.push(id);\n+\t\t\t\tidToModuleMapping.set(id, module);\n+\t\t\t}\n+\t\t}\n+\t\tfor (const chunk of this.chunk.getAllInitialChunks()) {\n+\t\t\tconst modules = chunkGraph.getChunkModulesIterableBySourceType(\n+\t\t\t\tchunk,\n+\t\t\t\t\"consume-shared\"\n+\t\t\t);\n+\t\t\tif (!modules) continue;\n+\t\t\tfor (const m of modules) {\n+\t\t\t\tconst module = /** @type {ConsumeSharedModule} */ (m);\n+\t\t\t\tconst id = chunkGraph.getModuleId(module);\n+\t\t\t\tinitialConsumes.push(id);\n+\t\t\t\tidToModuleMapping.set(id, module);\n+\t\t\t}\n+\t\t}\n+\t\tif (idToModuleMapping.size === 0) return null;\n+\t\treturn Template.asString([\n+\t\t\t`var ensureExistence = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scope, scopeName, key\",\n+\t\t\t\t`if(!scope || !${RuntimeGlobals.hasOwnProperty}(scope, key)) throw new Error(\"Shared module \" + key + \" doesn't exist in shared scope \" + scopeName);`\n+\t\t\t)};`,\n+\t\t\t`var invalidVersion = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"version, requiredVersion\",\n+\t\t\t\t[\n+\t\t\t\t\t\"for(var i = 0; i < requiredVersion.length; i++) {\",\n+\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\"if(i === version.length) return 1;\",\n+\t\t\t\t\t\t\"if(version[i] != requiredVersion[i]) { // loose equal is intentional to match string and number\",\n+\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t'if(typeof version[i] === \"string\" || typeof requiredVersion[i] === \"string\" || version[i] < requiredVersion[i]) return 1;',\n+\t\t\t\t\t\t\t\"if(version[i] > requiredVersion[i]) return;\"\n+\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\"}\"\n+\t\t\t\t\t]),\n+\t\t\t\t\t\"}\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var checkSingletonVersion = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"key, version, requiredVersion, strict\",\n+\t\t\t\t[\n+\t\t\t\t\t\"if(!invalidVersion(version, requiredVersion)) return 1;\",\n+\t\t\t\t\t'var msg = \"Unsatisfied version of shared singleton module \" + key + \"@\" + (version && version.join(\".\")) + \" (required \" + key + \"@\" + requiredVersion.join(\".\") + \")\";',\n+\t\t\t\t\t\"if(strict) throw new Error(msg);\",\n+\t\t\t\t\t'typeof console !== \"undefined\" && console.warn && console.warn(msg);'\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var findVersion = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scope, key, requiredVersion, strict\",\n+\t\t\t\t[\n+\t\t\t\t\t\"requiredVersion = requiredVersion || [];\",\n+\t\t\t\t\t\"var currentName = key;\",\n+\t\t\t\t\t`var versions = requiredVersion.map(${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t'currentName += \"`\" + v',\n+\t\t\t\t\t\t\"v\"\n+\t\t\t\t\t)});`,\n+\t\t\t\t\t\"versions.unshift(key);\",\n+\t\t\t\t\t\"var lastVersion;\",\n+\t\t\t\t\t\"while(currentName = versions.shift()) {\",\n+\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t`if(${RuntimeGlobals.hasOwnProperty}(scope, currentName) && !invalidVersion(lastVersion = scope[currentName].version || [], requiredVersion)) return scope[currentName];`\n+\t\t\t\t\t]),\n+\t\t\t\t\t\"}\",\n+\t\t\t\t\t'var msg = \"Unsatisfied version of shared module \" + key + \"@\" + (lastVersion && lastVersion.join(\".\")) + \" (required \" + key + \"@\" + requiredVersion.join(\".\") + \")\";',\n+\t\t\t\t\t\"if(strict) throw new Error(msg);\",\n+\t\t\t\t\t'typeof console !== \"undefined\" && console.warn && console.warn(msg);'\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var get = ${runtimeTemplate.returningFunction(\n+\t\t\t\t\"(sharedModule.loaded = 1, sharedModule.get())\",\n+\t\t\t\t\"sharedModule\"\n+\t\t\t)};`,\n+\t\t\t`var load = ${runtimeTemplate.basicFunction(\"scopeName, key\", [\n+\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t`ensureExistence(scope, scopeName, key);`,\n+\t\t\t\t\"return get(scope[key]);\"\n+\t\t\t])};`,\n+\t\t\t`var loadFallback = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, fallback\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t`return scope && ${RuntimeGlobals.hasOwnProperty}(scope, key) ? get(scope[key]) : fallback();`\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadVersionCheck = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t\"ensureExistence(scope, scopeName, key);\",\n+\t\t\t\t\t\"return get(findVersion(scope, key, version) || scope[key]);\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadSingletonVersionCheck = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t\"ensureExistence(scope, scopeName, key);\",\n+\t\t\t\t\t\"checkSingletonVersion(key, scope[key].version, version);\",\n+\t\t\t\t\t\"return get(scope[key]);\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadStrictVersionCheck = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t\"ensureExistence(scope, scopeName, key);\",\n+\t\t\t\t\t\"return get(findVersion(scope, key, version, 1));\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadStrictSingletonVersionCheck = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t\"ensureExistence(scope, scopeName, key);\",\n+\t\t\t\t\t\"checkSingletonVersion(key, scope[key].version, version, 1);\",\n+\t\t\t\t\t\"return get(scope[key]);\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadVersionCheckFallback = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version, fallback\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t`if(!scope || !${RuntimeGlobals.hasOwnProperty}(scope, key)) return fallback();`,\n+\t\t\t\t\t\"return get(findVersion(scope, key, version) || scope[key]);\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadSingletonVersionCheckFallback = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version, fallback\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t`if(!scope || !${RuntimeGlobals.hasOwnProperty}(scope, key)) return fallback();`,\n+\t\t\t\t\t\"checkSingletonVersion(key, scope[key].version, version);\",\n+\t\t\t\t\t\"return get(scope[key]);\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadStrictVersionCheckFallback = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version, fallback\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t\"var entry = scope && findVersion(scope, key, version);\",\n+\t\t\t\t\t`return entry ? get(entry) : fallback();`\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t`var loadStrictSingletonVersionCheckFallback = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"scopeName, key, version, fallback\",\n+\t\t\t\t[\n+\t\t\t\t\t`${RuntimeGlobals.initializeSharing}(scopeName);`,\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[scopeName];`,\n+\t\t\t\t\t`if(!scope || !${RuntimeGlobals.hasOwnProperty}(scope, key)) return fallback();`,\n+\t\t\t\t\t\"checkSingletonVersion(key, scope[key].version, version, 1);\",\n+\t\t\t\t\t\"return get(scope[key]);\"\n+\t\t\t\t]\n+\t\t\t)};`,\n+\t\t\t\"var installedModules = {};\",\n+\t\t\t\"var moduleToHandlerMapping = {\",\n+\t\t\tTemplate.indent(\n+\t\t\t\tArray.from(\n+\t\t\t\t\tidToModuleMapping,\n+\t\t\t\t\t([key, module]) =>\n+\t\t\t\t\t\t`${JSON.stringify(key)}: ${codeGenerationResults\n+\t\t\t\t\t\t\t.get(module)\n+\t\t\t\t\t\t\t.sources.get(\"consume-shared\")\n+\t\t\t\t\t\t\t.source()}`\n+\t\t\t\t).join(\",\\n\")\n+\t\t\t),\n+\t\t\t\"};\",\n+\n+\t\t\tinitialConsumes.length > 0\n+\t\t\t\t? Template.asString([\n+\t\t\t\t\t\t`var initialConsumes = ${JSON.stringify(initialConsumes)};`,\n+\t\t\t\t\t\t`initialConsumes.forEach(${runtimeTemplate.basicFunction(\"id\", [\n+\t\t\t\t\t\t\t`__webpack_modules__[id] = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\t\t\"module\",\n+\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\"// Handle case when module is used sync\",\n+\t\t\t\t\t\t\t\t\t\"installedModules[id] = 0;\",\n+\t\t\t\t\t\t\t\t\t\"delete __webpack_module_cache__[id];\",\n+\t\t\t\t\t\t\t\t\t\"var factory = moduleToHandlerMapping[id]();\",\n+\t\t\t\t\t\t\t\t\t'if(typeof factory !== \"function\") throw new Error(\"Shared module is not available for eager consumption: \" + id);',\n+\t\t\t\t\t\t\t\t\t`module.exports = factory();`\n+\t\t\t\t\t\t\t\t]\n+\t\t\t\t\t\t\t)}`\n+\t\t\t\t\t\t])});`\n+\t\t\t\t  ])\n+\t\t\t\t: \"// no consumes in initial chunks\",\n+\t\t\tthis._runtimeRequirements.has(RuntimeGlobals.ensureChunkHandlers)\n+\t\t\t\t? Template.asString([\n+\t\t\t\t\t\t`var chunkMapping = ${JSON.stringify(\n+\t\t\t\t\t\t\tchunkToModuleMapping,\n+\t\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t\t\"\\t\"\n+\t\t\t\t\t\t)};`,\n+\t\t\t\t\t\t`${\n+\t\t\t\t\t\t\tRuntimeGlobals.ensureChunkHandlers\n+\t\t\t\t\t\t}.consumes = ${runtimeTemplate.basicFunction(\"chunkId, promises\", [\n+\t\t\t\t\t\t\t`if(${RuntimeGlobals.hasOwnProperty}(chunkMapping, chunkId)) {`,\n+\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t`chunkMapping[chunkId].forEach(${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\t\t\t\"id\",\n+\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t`if(${RuntimeGlobals.hasOwnProperty}(installedModules, id)) return promises.push(installedModules[id]);`,\n+\t\t\t\t\t\t\t\t\t\t`var onFactory = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\t\t\t\t\t\"factory\",\n+\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\"installedModules[id] = 0;\",\n+\t\t\t\t\t\t\t\t\t\t\t\t`__webpack_modules__[id] = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"module\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"delete __webpack_module_cache__[id];\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"module.exports = factory();\"\n+\t\t\t\t\t\t\t\t\t\t\t\t\t]\n+\t\t\t\t\t\t\t\t\t\t\t\t)}`\n+\t\t\t\t\t\t\t\t\t\t\t]\n+\t\t\t\t\t\t\t\t\t\t)};`,\n+\t\t\t\t\t\t\t\t\t\t`var onError = ${runtimeTemplate.basicFunction(\"error\", [\n+\t\t\t\t\t\t\t\t\t\t\t\"delete installedModules[id];\",\n+\t\t\t\t\t\t\t\t\t\t\t`__webpack_modules__[id] = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\t\t\t\t\t\t\"module\",\n+\t\t\t\t\t\t\t\t\t\t\t\t[\"delete __webpack_module_cache__[id];\", \"throw error;\"]\n+\t\t\t\t\t\t\t\t\t\t\t)}`\n+\t\t\t\t\t\t\t\t\t\t])};`,\n+\t\t\t\t\t\t\t\t\t\t\"try {\",\n+\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\t\t\t\"var promise = moduleToHandlerMapping[id]();\",\n+\t\t\t\t\t\t\t\t\t\t\t\"if(promise.then) {\",\n+\t\t\t\t\t\t\t\t\t\t\tTemplate.indent(\n+\t\t\t\t\t\t\t\t\t\t\t\t`promises.push(installedModules[id] = promise.then(onFactory).catch(onError));`\n+\t\t\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\t\t\t\"} else onFactory(promise);\"\n+\t\t\t\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\t\t\t\"} catch(e) { onError(e); }\"\n+\t\t\t\t\t\t\t\t\t]\n+\t\t\t\t\t\t\t\t)});`\n+\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\"}\"\n+\t\t\t\t\t\t])}`\n+\t\t\t\t  ])\n+\t\t\t\t: \"// no chunk loading of consumes\"\n+\t\t]);\n+\t}\n+}\n+\n+module.exports = ConsumeSharedRuntimeModule;"
      },
      {
        "sha": "653042b6e4eb4db810ac78444567acf5619288e6",
        "filename": "lib/sharing/ProvideDependency.js",
        "status": "added",
        "additions": 54,
        "deletions": 0,
        "changes": 54,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FProvideDependency.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,54 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const Dependency = require(\"../Dependency\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n+\n+class ProvideDependency extends Dependency {\n+\tconstructor(shareScope, name, version, request, eager) {\n+\t\tsuper();\n+\t\tthis.shareScope = shareScope;\n+\t\tthis.name = name;\n+\t\tthis.version = version;\n+\t\tthis.request = request;\n+\t\tthis.eager = eager;\n+\t}\n+\n+\tget type() {\n+\t\treturn \"provide module\";\n+\t}\n+\n+\t/**\n+\t * @returns {string | null} an identifier to merge equal requests\n+\t */\n+\tgetResourceIdentifier() {\n+\t\treturn `provide module (${this.shareScope}) ${this.request} as ${\n+\t\t\tthis.name\n+\t\t} @ ${this.version}${this.eager ? \" (eager)\" : \"\"}`;\n+\t}\n+\n+\tserialize(context) {\n+\t\tcontext.write(this.shareScope);\n+\t\tcontext.write(this.name);\n+\t\tcontext.write(this.request);\n+\t\tcontext.write(this.version);\n+\t\tcontext.write(this.eager);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tstatic deserialize(context) {\n+\t\tconst { read } = context;\n+\t\tconst obj = new ProvideDependency(read(), read(), read(), read(), read());\n+\t\tthis.shareScope = context.read();\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n+\t}\n+}\n+\n+makeSerializable(ProvideDependency, \"webpack/lib/sharing/ProvideDependency\");\n+\n+module.exports = ProvideDependency;"
      },
      {
        "sha": "878c4c0e17a08aa54704ede4ff220558184e6b64",
        "filename": "lib/sharing/ProvideModule.js",
        "status": "renamed",
        "additions": 61,
        "deletions": 97,
        "changes": 158,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FProvideModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -5,14 +5,11 @@\n \n \"use strict\";\n \n-const { OriginalSource } = require(\"webpack-sources\");\n const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n const Module = require(\"../Module\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n-const Template = require(\"../Template\");\n-const createHash = require(\"../util/createHash\");\n const makeSerializable = require(\"../util/makeSerializable\");\n-const RemoteOverrideDependency = require(\"./RemoteOverrideDependency\");\n+const ProvidedDependency = require(\"./ProvidedDependency\");\n \n /** @typedef {import(\"../../declarations/WebpackOptions\").WebpackOptionsNormalized} WebpackOptions */\n /** @typedef {import(\"../Chunk\")} Chunk */\n@@ -29,58 +26,50 @@ const RemoteOverrideDependency = require(\"./RemoteOverrideDependency\");\n /** @typedef {import(\"../util/Hash\")} Hash */\n /** @typedef {import(\"../util/fs\").InputFileSystem} InputFileSystem */\n \n-/**\n- * @typedef {Object} OverrideOptions\n- * @property {string} import request to new module\n- */\n+const TYPES = new Set([\"share-init\"]);\n \n-const TYPES = new Set([\"javascript\"]);\n-\n-class RemoteOverridesModule extends Module {\n+class ProvideModule extends Module {\n \t/**\n-\t * @param {[string, OverrideOptions][]} overrides list of overrides\n+\t * @param {string} shareScope shared scope name\n+\t * @param {string} name shared key\n+\t * @param {(string | number)[]} version version\n+\t * @param {string} request request to the provided module\n+\t * @param {boolean} eager include the module in sync way\n \t */\n-\tconstructor(overrides) {\n-\t\tsuper(\"remote-overrides-module\");\n-\t\tthis._overrides = overrides;\n-\t\tif (overrides.length > 0) {\n-\t\t\tconst hash = createHash(\"md4\");\n-\t\t\tfor (const [key, request] of overrides) {\n-\t\t\t\thash.update(key);\n-\t\t\t\thash.update(request.import);\n-\t\t\t}\n-\t\t\tthis._overridesHash = hash.digest(\"hex\");\n-\t\t} else {\n-\t\t\tthis._overridesHash = \"empty\";\n-\t\t}\n+\tconstructor(shareScope, name, version, request, eager) {\n+\t\tsuper(\"provide-module\");\n+\t\tthis._shareScope = shareScope;\n+\t\tthis._name = name;\n+\t\tthis._version = version;\n+\t\tthis._request = request;\n+\t\tthis._eager = eager;\n \t}\n \n \t/**\n \t * @returns {string} a unique identifier of the module\n \t */\n \tidentifier() {\n-\t\treturn `remote overrides ${this._overridesHash}`;\n+\t\treturn `provide module (${this._shareScope}) ${this._name}@${\n+\t\t\tthis._version && this._version.join(\".\")\n+\t\t} = ${this._request}`;\n \t}\n \n \t/**\n \t * @param {RequestShortener} requestShortener the request shortener\n \t * @returns {string} a user readable identifier of the module\n \t */\n \treadableIdentifier(requestShortener) {\n-\t\treturn `remote overrides ${this._overrides\n-\t\t\t.map(([key, request]) => `${key} = ${request}`)\n-\t\t\t.join(\", \")}`;\n+\t\treturn `provide module (${this._shareScope}) ${this._name}@${\n+\t\t\tthis._version && this._version.join(\".\")\n+\t\t} = ${this._request}`;\n \t}\n \n \t/**\n \t * @param {LibIdentOptions} options options\n \t * @returns {string | null} an identifier for library inclusion\n \t */\n \tlibIdent(options) {\n-\t\treturn `webpack/container/remote-overrides/${this._overridesHash.slice(\n-\t\t\t0,\n-\t\t\t6\n-\t\t)}`;\n+\t\treturn `webpack/sharing/provide/${this._shareScope}/${this._name}`;\n \t}\n \n \t/**\n@@ -107,9 +96,11 @@ class RemoteOverridesModule extends Module {\n \t\t};\n \n \t\tthis.clearDependenciesAndBlocks();\n-\t\tfor (const [, options] of this._overrides) {\n+\t\tconst dep = new ProvidedDependency(this._request);\n+\t\tif (this._eager) {\n+\t\t\tthis.addDependency(dep);\n+\t\t} else {\n \t\t\tconst block = new AsyncDependenciesBlock({});\n-\t\t\tconst dep = new RemoteOverrideDependency(options.import);\n \t\t\tblock.addDependency(dep);\n \t\t\tthis.addBlock(block);\n \t\t}\n@@ -146,81 +137,54 @@ class RemoteOverridesModule extends Module {\n \t * @returns {CodeGenerationResult} result\n \t */\n \tcodeGeneration({ runtimeTemplate, moduleGraph, chunkGraph }) {\n-\t\tconst runtimeRequirements = new Set([RuntimeGlobals.module]);\n-\t\tlet i = 0;\n-\t\tconst source = Template.asString([\n-\t\t\t`module.exports = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\"external\",\n-\t\t\t\tthis._overrides.length > 0\n-\t\t\t\t\t? [\n-\t\t\t\t\t\t\t\"if(external.override) external.override(Object.assign({\",\n-\t\t\t\t\t\t\tTemplate.indent(\n-\t\t\t\t\t\t\t\tthis._overrides\n-\t\t\t\t\t\t\t\t\t.map(([key, options]) => {\n-\t\t\t\t\t\t\t\t\t\tconst block = this.blocks[i++];\n-\t\t\t\t\t\t\t\t\t\tconst dep = block.dependencies[0];\n-\t\t\t\t\t\t\t\t\t\tconst module = moduleGraph.getModule(dep);\n-\t\t\t\t\t\t\t\t\t\treturn `${JSON.stringify(\n-\t\t\t\t\t\t\t\t\t\t\tkey\n-\t\t\t\t\t\t\t\t\t\t)}: ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\t\t\t\t\"\",\n-\t\t\t\t\t\t\t\t\t\t\t`return ${runtimeTemplate.blockPromise({\n-\t\t\t\t\t\t\t\t\t\t\t\tblock,\n-\t\t\t\t\t\t\t\t\t\t\t\tmessage: \"\",\n-\t\t\t\t\t\t\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\t\t\t\t\t\t\truntimeRequirements\n-\t\t\t\t\t\t\t\t\t\t\t})}.then(${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\t\t\t\t\t\t\"\",\n-\t\t\t\t\t\t\t\t\t\t\t\t`return ${runtimeTemplate.returningFunction(\n-\t\t\t\t\t\t\t\t\t\t\t\t\truntimeTemplate.moduleRaw({\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\trequest: options.import,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\truntimeRequirements\n-\t\t\t\t\t\t\t\t\t\t\t\t\t})\n-\t\t\t\t\t\t\t\t\t\t\t\t)}`\n-\t\t\t\t\t\t\t\t\t\t\t)})`\n-\t\t\t\t\t\t\t\t\t\t)}`;\n-\t\t\t\t\t\t\t\t\t})\n-\t\t\t\t\t\t\t\t\t.join(\",\\n\")\n-\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t`}, ${RuntimeGlobals.overrides}));`,\n-\t\t\t\t\t\t\t\"return external;\"\n-\t\t\t\t\t  ]\n-\t\t\t\t\t: [\n-\t\t\t\t\t\t\t`if(external.override) external.override(${RuntimeGlobals.overrides});`,\n-\t\t\t\t\t\t\t\"return external;\"\n-\t\t\t\t\t  ]\n-\t\t\t)};`\n-\t\t]);\n+\t\tconst runtimeRequirements = new Set([RuntimeGlobals.initializeSharing]);\n+\t\tconst code = `register(${JSON.stringify(this._name)}, ${JSON.stringify(\n+\t\t\tthis._version || 0\n+\t\t)}, ${\n+\t\t\tthis._eager\n+\t\t\t\t? runtimeTemplate.syncModuleFactory({\n+\t\t\t\t\t\tdependency: this.dependencies[0],\n+\t\t\t\t\t\tchunkGraph,\n+\t\t\t\t\t\trequest: this._request,\n+\t\t\t\t\t\truntimeRequirements\n+\t\t\t\t  })\n+\t\t\t\t: runtimeTemplate.asyncModuleFactory({\n+\t\t\t\t\t\tblock: this.blocks[0],\n+\t\t\t\t\t\tchunkGraph,\n+\t\t\t\t\t\trequest: this._request,\n+\t\t\t\t\t\truntimeRequirements\n+\t\t\t\t  })\n+\t\t});`;\n \t\tconst sources = new Map();\n-\t\tsources.set(\n-\t\t\t\"javascript\",\n-\t\t\tnew OriginalSource(\n-\t\t\t\tsource,\n-\t\t\t\t`webpack/remote-overrides ${this._overridesHash}`\n-\t\t\t)\n-\t\t);\n-\t\treturn { sources, runtimeRequirements };\n+\t\tconst data = new Map();\n+\t\tdata.set(\"share-init\", [\n+\t\t\t{\n+\t\t\t\tshareScope: this._shareScope,\n+\t\t\t\tinitStage: 10,\n+\t\t\t\tinit: code\n+\t\t\t}\n+\t\t]);\n+\t\treturn { sources, data, runtimeRequirements };\n \t}\n \n \tserialize(context) {\n \t\tconst { write } = context;\n-\t\twrite(this._overrides);\n+\t\twrite(this._shareScope);\n+\t\twrite(this._name);\n+\t\twrite(this._version);\n+\t\twrite(this._request);\n+\t\twrite(this._eager);\n \t\tsuper.serialize(context);\n \t}\n \n \tstatic deserialize(context) {\n \t\tconst { read } = context;\n-\t\tconst obj = new RemoteOverridesModule(read());\n+\t\tconst obj = new ProvideModule(read(), read(), read(), read(), read());\n \t\tobj.deserialize(context);\n \t\treturn obj;\n \t}\n }\n \n-makeSerializable(\n-\tRemoteOverridesModule,\n-\t\"webpack/lib/container/RemoteOverridesModule\"\n-);\n+makeSerializable(ProvideModule, \"webpack/lib/sharing/ProvideModule\");\n \n-module.exports = RemoteOverridesModule;\n+module.exports = ProvideModule;",
        "previous_filename": "lib/container/RemoteOverridesModule.js"
      },
      {
        "sha": "04e1e9f9f15d91ec48e6f534691d35a43390cf28",
        "filename": "lib/sharing/ProvideModuleFactory.js",
        "status": "renamed",
        "additions": 12,
        "deletions": 6,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FProvideModuleFactory.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -6,24 +6,30 @@\n \"use strict\";\n \n const ModuleFactory = require(\"../ModuleFactory\");\n-const RemoteOverridesModule = require(\"./RemoteOverridesModule\");\n+const ProvideModule = require(\"./ProvideModule\");\n \n /** @typedef {import(\"../ModuleFactory\").ModuleFactoryCreateData} ModuleFactoryCreateData */\n /** @typedef {import(\"../ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n-/** @typedef {import(\"./RemoteOverridesDependency\")} RemoteOverridesDependency */\n+/** @typedef {import(\"./ProvideDependency\")} ProvideDependency */\n \n-class RemoteOverridesModuleFactory extends ModuleFactory {\n+class ProvideModuleFactory extends ModuleFactory {\n \t/**\n \t * @param {ModuleFactoryCreateData} data data object\n \t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n \t * @returns {void}\n \t */\n \tcreate(data, callback) {\n-\t\tconst dep = /** @type {RemoteOverridesDependency} */ (data.dependencies[0]);\n+\t\tconst dep = /** @type {ProvideDependency} */ (data.dependencies[0]);\n \t\tcallback(null, {\n-\t\t\tmodule: new RemoteOverridesModule(dep.overrides)\n+\t\t\tmodule: new ProvideModule(\n+\t\t\t\tdep.shareScope,\n+\t\t\t\tdep.name,\n+\t\t\t\tdep.version,\n+\t\t\t\tdep.request,\n+\t\t\t\tdep.eager\n+\t\t\t)\n \t\t});\n \t}\n }\n \n-module.exports = RemoteOverridesModuleFactory;\n+module.exports = ProvideModuleFactory;",
        "previous_filename": "lib/container/RemoteOverridesModuleFactory.js"
      },
      {
        "sha": "5b64e994bda9a602a6f6038bd8a4ab68a59ebe9f",
        "filename": "lib/sharing/ProvideSharedPlugin.js",
        "status": "added",
        "additions": 185,
        "deletions": 0,
        "changes": 185,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideSharedPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvideSharedPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FProvideSharedPlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,185 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra and Zackary Jackson @ScriptedAlchemy\n+*/\n+\n+\"use strict\";\n+\n+const validateOptions = require(\"schema-utils\");\n+const schema = require(\"../../schemas/plugins/sharing/ProvideSharedPlugin.json\");\n+const WebpackError = require(\"../WebpackError\");\n+const { parseOptions } = require(\"../container/options\");\n+const LazySet = require(\"../util/LazySet\");\n+const ProvideDependency = require(\"./ProvideDependency\");\n+const ProvideModuleFactory = require(\"./ProvideModuleFactory\");\n+const ProvidedDependency = require(\"./ProvidedDependency\");\n+const { parseVersion } = require(\"./utils\");\n+\n+/** @typedef {import(\"../../declarations/plugins/sharing/ProvideSharedPlugin\").ProvideSharedPluginOptions} ProvideSharedPluginOptions */\n+/** @typedef {import(\"../Compiler\")} Compiler */\n+\n+/**\n+ * @typedef {Object} ProvideOptions\n+ * @property {string} import\n+ * @property {string} shareScope\n+ * @property {(string|number)[] | undefined | false} version\n+ * @property {boolean} eager\n+ */\n+\n+class ProvideSharedPlugin {\n+\t/**\n+\t * @param {ProvideSharedPluginOptions} options options\n+\t */\n+\tconstructor(options) {\n+\t\tvalidateOptions(schema, options, { name: \"Provide Shared Plugin\" });\n+\n+\t\t/** @type {[string, ProvideOptions][]} */\n+\t\tthis._provides = parseOptions(\n+\t\t\toptions.provides,\n+\t\t\titem => {\n+\t\t\t\tif (Array.isArray(item))\n+\t\t\t\t\tthrow new Error(\"Unexpected array of provides\");\n+\t\t\t\t/** @type {ProvideOptions} */\n+\t\t\t\tconst result = {\n+\t\t\t\t\timport: item,\n+\t\t\t\t\tversion: undefined,\n+\t\t\t\t\tshareScope: options.shareScope || \"default\",\n+\t\t\t\t\teager: false\n+\t\t\t\t};\n+\t\t\t\treturn result;\n+\t\t\t},\n+\t\t\titem => ({\n+\t\t\t\timport: item.import,\n+\t\t\t\tversion:\n+\t\t\t\t\ttypeof item.version === \"string\"\n+\t\t\t\t\t\t? parseVersion(item.version)\n+\t\t\t\t\t\t: item.version,\n+\t\t\t\tshareScope: item.shareScope || options.shareScope || \"default\",\n+\t\t\t\teager: !!item.eager\n+\t\t\t})\n+\t\t);\n+\t\tthis._provides.sort(([a], [b]) => {\n+\t\t\tif (a < b) return -1;\n+\t\t\tif (b < a) return 1;\n+\t\t\treturn 0;\n+\t\t});\n+\t}\n+\n+\t/**\n+\t * Apply the plugin\n+\t * @param {Compiler} compiler the compiler instance\n+\t * @returns {void}\n+\t */\n+\tapply(compiler) {\n+\t\tconst { _provides: provides } = this;\n+\n+\t\tfor (const [name, config] of provides) {\n+\t\t\tcompiler.hooks.make.tapAsync(\n+\t\t\t\t\"ProvideSharedPlugin\",\n+\t\t\t\t(compilation, callback) => {\n+\t\t\t\t\tlet version = config.version;\n+\t\t\t\t\tconst addModule = () => {\n+\t\t\t\t\t\tcompilation.addInclude(\n+\t\t\t\t\t\t\tcompiler.context,\n+\t\t\t\t\t\t\tnew ProvideDependency(\n+\t\t\t\t\t\t\t\tconfig.shareScope,\n+\t\t\t\t\t\t\t\tname,\n+\t\t\t\t\t\t\t\tversion || false,\n+\t\t\t\t\t\t\t\tconfig.import,\n+\t\t\t\t\t\t\t\tconfig.eager\n+\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\tname: undefined\n+\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\terr => callback(err)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t};\n+\t\t\t\t\tif (\n+\t\t\t\t\t\tversion !== undefined ||\n+\t\t\t\t\t\tconfig.import.startsWith(\"./\") ||\n+\t\t\t\t\t\tconfig.import.startsWith(\"../\")\n+\t\t\t\t\t) {\n+\t\t\t\t\t\treturn addModule();\n+\t\t\t\t\t}\n+\t\t\t\t\tconst resolveContext = {\n+\t\t\t\t\t\t/** @type {LazySet<string>} */\n+\t\t\t\t\t\tfileDependencies: new LazySet(),\n+\t\t\t\t\t\t/** @type {LazySet<string>} */\n+\t\t\t\t\t\tcontextDependencies: new LazySet(),\n+\t\t\t\t\t\t/** @type {LazySet<string>} */\n+\t\t\t\t\t\tmissingDependencies: new LazySet()\n+\t\t\t\t\t};\n+\t\t\t\t\tconst resolver = compiler.resolverFactory.get(\"normal\");\n+\t\t\t\t\tresolver.resolve(\n+\t\t\t\t\t\t{},\n+\t\t\t\t\t\tcompiler.context,\n+\t\t\t\t\t\tconfig.import,\n+\t\t\t\t\t\tresolveContext,\n+\t\t\t\t\t\t(err, result, additionalInfo) => {\n+\t\t\t\t\t\t\tcompilation.fileDependencies.addAll(\n+\t\t\t\t\t\t\t\tresolveContext.fileDependencies\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcompilation.contextDependencies.addAll(\n+\t\t\t\t\t\t\t\tresolveContext.contextDependencies\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcompilation.missingDependencies.addAll(\n+\t\t\t\t\t\t\t\tresolveContext.missingDependencies\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tlet details;\n+\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\tdetails = `Failed to resolve: ${err}.`;\n+\t\t\t\t\t\t\t} else if (!result) {\n+\t\t\t\t\t\t\t\tdetails = `Resolved to void.`;\n+\t\t\t\t\t\t\t} else if (!additionalInfo) {\n+\t\t\t\t\t\t\t\tdetails = `No additional info provided from resolver.`;\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tconst info = /** @type {any} */ (additionalInfo);\n+\t\t\t\t\t\t\t\tconst descriptionFileData = info.descriptionFileData;\n+\t\t\t\t\t\t\t\tif (!descriptionFileData) {\n+\t\t\t\t\t\t\t\t\tdetails =\n+\t\t\t\t\t\t\t\t\t\t\"No description file (usually package.json) found. Add description file with name and version, or manually specify version in shared config.\";\n+\t\t\t\t\t\t\t\t} else if (!descriptionFileData.version) {\n+\t\t\t\t\t\t\t\t\tdetails =\n+\t\t\t\t\t\t\t\t\t\t\"No version in description file (usually package.json). Add version to description file, or manually specify version in shared config.\";\n+\t\t\t\t\t\t\t\t} else if (\n+\t\t\t\t\t\t\t\t\tdescriptionFileData.name &&\n+\t\t\t\t\t\t\t\t\tconfig.import !== descriptionFileData.name &&\n+\t\t\t\t\t\t\t\t\t!config.import.startsWith(`${descriptionFileData.name}/`)\n+\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\tdetails = `Invalid name in description file (usually package.json): ${descriptionFileData.name}. Check location of description file, update name in description file, add missing description file to the package, or manually specify version in shared config.`;\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tversion = parseVersion(descriptionFileData.version);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tif (!version) {\n+\t\t\t\t\t\t\t\tconst error = new WebpackError(\n+\t\t\t\t\t\t\t\t\t`No version specified and unable to automatically determine one. ${details}`\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\terror.file = `shared module ${name} -> ${config.import}`;\n+\t\t\t\t\t\t\t\tcompilation.warnings.push(error);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\taddModule();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t);\n+\t\t}\n+\n+\t\tcompiler.hooks.compilation.tap(\n+\t\t\t\"ProvideSharedPlugin\",\n+\t\t\t(compilation, { normalModuleFactory }) => {\n+\t\t\t\tcompilation.dependencyFactories.set(\n+\t\t\t\t\tProvidedDependency,\n+\t\t\t\t\tnormalModuleFactory\n+\t\t\t\t);\n+\n+\t\t\t\tcompilation.dependencyFactories.set(\n+\t\t\t\t\tProvideDependency,\n+\t\t\t\t\tnew ProvideModuleFactory()\n+\t\t\t\t);\n+\t\t\t}\n+\t\t);\n+\t}\n+}\n+\n+module.exports = ProvideSharedPlugin;"
      },
      {
        "sha": "be44bfdf673fbb77a98158aa3ea66185ca5f1c88",
        "filename": "lib/sharing/ProvidedDependency.js",
        "status": "renamed",
        "additions": 4,
        "deletions": 9,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvidedDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FProvidedDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FProvidedDependency.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -8,9 +8,7 @@\n const ModuleDependency = require(\"../dependencies/ModuleDependency\");\n const makeSerializable = require(\"../util/makeSerializable\");\n \n-/** @typedef {import(\"./RemoteOverridesModule\").OverrideOptions} OverrideOptions */\n-\n-class RemoteOverrideDependency extends ModuleDependency {\n+class ProvidedDependency extends ModuleDependency {\n \t/**\n \t *\n \t * @param {string} request request string\n@@ -20,13 +18,10 @@ class RemoteOverrideDependency extends ModuleDependency {\n \t}\n \n \tget type() {\n-\t\treturn \"remote override\";\n+\t\treturn \"provided\";\n \t}\n }\n \n-makeSerializable(\n-\tRemoteOverrideDependency,\n-\t\"webpack/lib/container/RemoteOverrideDependency\"\n-);\n+makeSerializable(ProvidedDependency, \"webpack/lib/sharing/ProvidedDependency\");\n \n-module.exports = RemoteOverrideDependency;\n+module.exports = ProvidedDependency;",
        "previous_filename": "lib/container/RemoteOverrideDependency.js"
      },
      {
        "sha": "30762971a90d660aae322cadbecebb6edce50b2b",
        "filename": "lib/sharing/SharePlugin.js",
        "status": "added",
        "additions": 89,
        "deletions": 0,
        "changes": 89,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FSharePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FSharePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FSharePlugin.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,89 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra and Zackary Jackson @ScriptedAlchemy\n+*/\n+\n+\"use strict\";\n+\n+const { parseOptions } = require(\"../container/options\");\n+const ConsumeSharedPlugin = require(\"./ConsumeSharedPlugin\");\n+const ProvideSharedPlugin = require(\"./ProvideSharedPlugin\");\n+const { isRequiredVersion } = require(\"./utils\");\n+\n+/** @typedef {import(\"../../declarations/plugins/sharing/ConsumeSharedPlugin\").ConsumeSharedPluginOptions} ConsumeSharedPluginOptions */\n+/** @typedef {import(\"../../declarations/plugins/sharing/ConsumeSharedPlugin\").ConsumesConfig} ConsumesConfig */\n+/** @typedef {import(\"../../declarations/plugins/sharing/ProvideSharedPlugin\").ProvideSharedPluginOptions} ProvideSharedPluginOptions */\n+/** @typedef {import(\"../../declarations/plugins/sharing/ProvideSharedPlugin\").ProvidesConfig} ProvidesConfig */\n+/** @typedef {import(\"../../declarations/plugins/sharing/SharePlugin\").SharePluginOptions} SharePluginOptions */\n+/** @typedef {import(\"../../declarations/plugins/sharing/SharePlugin\").SharedConfig} SharedConfig */\n+/** @typedef {import(\"../Compiler\")} Compiler */\n+\n+class SharePlugin {\n+\t/**\n+\t * @param {SharePluginOptions} options options\n+\t */\n+\tconstructor(options) {\n+\t\t/** @type {[string, SharedConfig][]} */\n+\t\tconst sharedOptions = parseOptions(\n+\t\t\toptions.shared,\n+\t\t\t(item, key) => {\n+\t\t\t\tif (typeof item !== \"string\")\n+\t\t\t\t\tthrow new Error(\"Unexpected array in shared\");\n+\t\t\t\t/** @type {SharedConfig} */\n+\t\t\t\tconst config =\n+\t\t\t\t\titem === key || !isRequiredVersion(item)\n+\t\t\t\t\t\t? {\n+\t\t\t\t\t\t\t\timport: item\n+\t\t\t\t\t\t  }\n+\t\t\t\t\t\t: {\n+\t\t\t\t\t\t\t\timport: key,\n+\t\t\t\t\t\t\t\trequiredVersion: item\n+\t\t\t\t\t\t  };\n+\t\t\t\treturn config;\n+\t\t\t},\n+\t\t\titem => item\n+\t\t);\n+\t\t/** @type {Record<string, ConsumesConfig>[]} */\n+\t\tconst consumes = sharedOptions.map(([key, options]) => ({\n+\t\t\t[key]: {\n+\t\t\t\timport: options.import,\n+\t\t\t\tshareKey: options.shareKey,\n+\t\t\t\trequiredVersion: options.requiredVersion,\n+\t\t\t\tstrictVersion: options.strictVersion,\n+\t\t\t\tsingleton: options.singleton,\n+\t\t\t\teager: options.eager\n+\t\t\t}\n+\t\t}));\n+\t\t/** @type {Record<string, ProvidesConfig>[]} */\n+\t\tconst provides = sharedOptions\n+\t\t\t.filter(([, options]) => options.import !== false)\n+\t\t\t.map(([key, options]) => ({\n+\t\t\t\t[options.shareKey || key]: {\n+\t\t\t\t\timport: options.import || key,\n+\t\t\t\t\tversion: options.version,\n+\t\t\t\t\teager: options.eager\n+\t\t\t\t}\n+\t\t\t}));\n+\t\tthis._shareScope = options.shareScope;\n+\t\tthis._consumes = consumes;\n+\t\tthis._provides = provides;\n+\t}\n+\n+\t/**\n+\t * Apply the plugin\n+\t * @param {Compiler} compiler the compiler instance\n+\t * @returns {void}\n+\t */\n+\tapply(compiler) {\n+\t\tnew ConsumeSharedPlugin({\n+\t\t\tshareScope: this._shareScope,\n+\t\t\tconsumes: this._consumes\n+\t\t}).apply(compiler);\n+\t\tnew ProvideSharedPlugin({\n+\t\t\tshareScope: this._shareScope,\n+\t\t\tprovides: this._provides\n+\t\t}).apply(compiler);\n+\t}\n+}\n+\n+module.exports = SharePlugin;"
      },
      {
        "sha": "f79dcdafd1696fb711adae746d6621f1abfd786a",
        "filename": "lib/sharing/ShareRuntimeModule.js",
        "status": "added",
        "additions": 152,
        "deletions": 0,
        "changes": 152,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FShareRuntimeModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2FShareRuntimeModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2FShareRuntimeModule.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,152 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const RuntimeGlobals = require(\"../RuntimeGlobals\");\n+const RuntimeModule = require(\"../RuntimeModule\");\n+const Template = require(\"../Template\");\n+\n+class ShareRuntimeModule extends RuntimeModule {\n+\tconstructor() {\n+\t\tsuper(\"sharing\");\n+\t}\n+\n+\t/**\n+\t * @returns {string} runtime code\n+\t */\n+\tgenerate() {\n+\t\tconst {\n+\t\t\truntimeTemplate,\n+\t\t\tchunkGraph,\n+\t\t\tcodeGenerationResults\n+\t\t} = this.compilation;\n+\t\t/** @type {Map<string, Map<number, Set<string>>>} */\n+\t\tconst initCodePerScope = new Map();\n+\t\tfor (const chunk of this.chunk.getAllReferencedChunks()) {\n+\t\t\tconst modules = chunkGraph.getChunkModulesIterableBySourceType(\n+\t\t\t\tchunk,\n+\t\t\t\t\"share-init\"\n+\t\t\t);\n+\t\t\tif (!modules) continue;\n+\t\t\tfor (const m of modules) {\n+\t\t\t\tconst codeGen = codeGenerationResults.get(m);\n+\t\t\t\tif (!codeGen) continue;\n+\t\t\t\tconst data = codeGen.data && codeGen.data.get(\"share-init\");\n+\t\t\t\tif (!data) continue;\n+\t\t\t\tfor (const item of data) {\n+\t\t\t\t\tconst { shareScope, initStage, init } = item;\n+\t\t\t\t\tlet stages = initCodePerScope.get(shareScope);\n+\t\t\t\t\tif (stages === undefined) {\n+\t\t\t\t\t\tinitCodePerScope.set(shareScope, (stages = new Map()));\n+\t\t\t\t\t}\n+\t\t\t\t\tlet list = stages.get(initStage || 0);\n+\t\t\t\t\tif (list === undefined) {\n+\t\t\t\t\t\tstages.set(initStage || 0, (list = new Set()));\n+\t\t\t\t\t}\n+\t\t\t\t\tlist.add(init);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\treturn Template.asString([\n+\t\t\t`${RuntimeGlobals.shareScopeMap} = {};`,\n+\t\t\t\"var initPromises = {};\",\n+\t\t\t`${RuntimeGlobals.initializeSharing} = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\"name\",\n+\t\t\t\t[\n+\t\t\t\t\t\"// only runs once\",\n+\t\t\t\t\t\"if(initPromises[name]) return initPromises[name];\",\n+\t\t\t\t\t\"// handling circular init calls\",\n+\t\t\t\t\t\"initPromises[name] = 1;\",\n+\t\t\t\t\t\"// creates a new share scope if needed\",\n+\t\t\t\t\t`if(!${RuntimeGlobals.hasOwnProperty}(${RuntimeGlobals.shareScopeMap}, name)) ${RuntimeGlobals.shareScopeMap}[name] = {};`,\n+\t\t\t\t\t\"// runs all init snippets from all modules reachable\",\n+\t\t\t\t\t`var scope = ${RuntimeGlobals.shareScopeMap}[name];`,\n+\t\t\t\t\t`var warn = ${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t'typeof console !== \"undefined\" && console.warn && console.warn(msg);',\n+\t\t\t\t\t\t\"msg\"\n+\t\t\t\t\t)};`,\n+\t\t\t\t\t`var register = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\"name, version, factory, currentName\",\n+\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\"version = version || [];\",\n+\t\t\t\t\t\t\t\"currentName = name;\",\n+\t\t\t\t\t\t\t`var versionConflict = ${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t\t\t'warn(\"Version conflict for shared modules: \" + name + \" \" + (v && v.join(\".\")) + \" <=> \" + (version && version.join(\".\")));'\n+\t\t\t\t\t\t\t)};`,\n+\t\t\t\t\t\t\t`var registerCurrent = ${runtimeTemplate.basicFunction(\"\", [\n+\t\t\t\t\t\t\t\t\"if(scope[currentName]) {\",\n+\t\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\t\"var v = scope[currentName].version || [];\",\n+\t\t\t\t\t\t\t\t\t\"for(var i = 0; i < version.length && i < v.length; i++) {\",\n+\t\t\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\t\t\"if(v[i] != version[i]) { // loose equal is intentional to match string and number\",\n+\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\t\t\t'if(typeof v[i] === \"string\" || typeof version[i] === \"string\") return versionConflict();',\n+\t\t\t\t\t\t\t\t\t\t\t\"if(v[i] > version[i]) return;\",\n+\t\t\t\t\t\t\t\t\t\t\t\"if(v[i] < version[i]) { i = -1; break; }\"\n+\t\t\t\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\t\t\t\"}\"\n+\t\t\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\t\t\"}\",\n+\t\t\t\t\t\t\t\t\t\"if(i >= 0 && version.length <= v.length) return;\",\n+\t\t\t\t\t\t\t\t\t'if(scope[currentName].loaded) return warn(\"Ignoring providing of already used shared module: \" + name);'\n+\t\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\t\"}\",\n+\t\t\t\t\t\t\t\t\"scope[currentName] = { get: factory, version: version };\"\n+\t\t\t\t\t\t\t])};`,\n+\t\t\t\t\t\t\t\"registerCurrent();\",\n+\t\t\t\t\t\t\t`version.forEach(${runtimeTemplate.basicFunction(\"part\", [\n+\t\t\t\t\t\t\t\t'currentName += \"`\" + part;',\n+\t\t\t\t\t\t\t\t\"registerCurrent();\"\n+\t\t\t\t\t\t\t])});`\n+\t\t\t\t\t\t]\n+\t\t\t\t\t)};`,\n+\t\t\t\t\t`var initExternal = ${runtimeTemplate.basicFunction(\"id\", [\n+\t\t\t\t\t\t`var handleError = ${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t\t'warn(\"Initialization of sharing external failed: \" + err)',\n+\t\t\t\t\t\t\t\"err\"\n+\t\t\t\t\t\t)};`,\n+\t\t\t\t\t\t\"try {\",\n+\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\"var module = __webpack_require__(id);\",\n+\t\t\t\t\t\t\t\"if(!module) return;\",\n+\t\t\t\t\t\t\t`var initFn = ${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t\t\t`module && module.init && module.init(${RuntimeGlobals.shareScopeMap}[name])`,\n+\t\t\t\t\t\t\t\t\"module\"\n+\t\t\t\t\t\t\t)}`,\n+\t\t\t\t\t\t\t\"if(module.then) return promises.push(module.then(initFn, handleError));\",\n+\t\t\t\t\t\t\t\"var initResult = initFn(module);\",\n+\t\t\t\t\t\t\t\"if(initResult && initResult.then) return promises.push(initResult.catch(handleError));\"\n+\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\"} catch(err) { handleError(err); }\"\n+\t\t\t\t\t])}`,\n+\t\t\t\t\t\"var promises = [];\",\n+\t\t\t\t\t\"switch(name) {\",\n+\t\t\t\t\t...Array.from(initCodePerScope, ([name, stages]) =>\n+\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t`case ${JSON.stringify(name)}: {`,\n+\t\t\t\t\t\t\tTemplate.indent(\n+\t\t\t\t\t\t\t\tArray.from(stages)\n+\t\t\t\t\t\t\t\t\t.sort(([a], [b]) => a - b)\n+\t\t\t\t\t\t\t\t\t.map(([, initCode]) =>\n+\t\t\t\t\t\t\t\t\t\tTemplate.asString(Array.from(initCode))\n+\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\"}\",\n+\t\t\t\t\t\t\t\"break;\"\n+\t\t\t\t\t\t])\n+\t\t\t\t\t),\n+\t\t\t\t\t\"}\",\n+\t\t\t\t\t`return promises.length && (initPromises[name] = Promise.all(promises).then(${runtimeTemplate.returningFunction(\n+\t\t\t\t\t\t\"initPromises[name] = 1\"\n+\t\t\t\t\t)}));`\n+\t\t\t\t]\n+\t\t\t)};`\n+\t\t]);\n+\t}\n+}\n+\n+module.exports = ShareRuntimeModule;"
      },
      {
        "sha": "4c3e824557e13ac68d4b30e8158bfa078441f46f",
        "filename": "lib/sharing/utils.js",
        "status": "added",
        "additions": 103,
        "deletions": 0,
        "changes": 103,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2Futils.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Fsharing%2Futils.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fsharing%2Futils.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,103 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+/**\n+ * @param {string} version version as string\n+ * @returns {(number|string)[]} version as array\n+ */\n+exports.parseRequiredVersion = version => {\n+\tlet fuzzyStart = Infinity;\n+\tif (version.startsWith(\">=\")) {\n+\t\tfuzzyStart = 0;\n+\t\tversion = version.slice(2);\n+\t} else if (version.startsWith(\"^\")) {\n+\t\tfuzzyStart = 1;\n+\t\tversion = version.slice(1);\n+\t} else if (version.startsWith(\"~\")) {\n+\t\tfuzzyStart = 2;\n+\t\tversion = version.slice(1);\n+\t}\n+\treturn version\n+\t\t.split(\".\")\n+\t\t.map((x, i) => (i >= fuzzyStart && `${+x}` === x ? +x : x));\n+};\n+\n+/**\n+ * @param {string} version version as string\n+ * @returns {(number|string)[]} version as array\n+ */\n+exports.parseVersion = version => {\n+\treturn version.split(\".\").map(x => (`${+x}` === x ? +x : x));\n+};\n+\n+/**\n+ * @param {(number|string)[]} version version\n+ * @returns {string} version as string\n+ */\n+exports.versionToString = version => {\n+\tif (!version) return \"(unknown)\";\n+\tconst info = version.map(value =>\n+\t\ttypeof value !== \"string\"\n+\t\t\t? {\n+\t\t\t\t\ttype: \"min\",\n+\t\t\t\t\tvalue: `${value}`\n+\t\t\t  }\n+\t\t\t: `${+value}` === value\n+\t\t\t? {\n+\t\t\t\t\ttype: \"exact\",\n+\t\t\t\t\tvalue\n+\t\t\t  }\n+\t\t\t: {\n+\t\t\t\t\ttype: \"tag\",\n+\t\t\t\t\tvalue\n+\t\t\t  }\n+\t);\n+\tswitch (`${info[0].type}.${info.length > 1 ? info[1].type : \"undefined\"}`) {\n+\t\tcase \"exact.min\":\n+\t\tcase \"tag.min\":\n+\t\t\tif (!info.slice(2).some(i => i.type === \"exact\"))\n+\t\t\t\treturn `^${version.join(\".\")}`;\n+\t\t\tbreak;\n+\n+\t\tcase \"exact.exact\":\n+\t\tcase \"exact.tag\":\n+\t\tcase \"tag.exact\":\n+\t\tcase \"tag.tag\":\n+\t\t\tif (!info.slice(2).some(i => i.type === \"exact\"))\n+\t\t\t\treturn `~${version.join(\".\")}`;\n+\t\t\telse if (!info.slice(2).some(i => i.type === \"min\"))\n+\t\t\t\treturn version.join(\".\");\n+\t\t\tbreak;\n+\n+\t\tcase \"min.min\":\n+\t\tcase \"min.tag\":\n+\t\t\tif (!info.slice(2).some(i => i.type === \"exact\"))\n+\t\t\t\treturn `>=${version.join(\".\")}`;\n+\t\t\tbreak;\n+\n+\t\tcase \"min.undefined\":\n+\t\t\treturn `>=${version.join(\".\")}`;\n+\n+\t\tcase \"exact.undefined\":\n+\t\tcase \"tag.undefined\":\n+\t\t\treturn version.join(\".\");\n+\t}\n+\treturn info\n+\t\t.map(i => (i.type === \"exact\" ? i.value : `[>=${i.value}]`))\n+\t\t.join(\".\");\n+};\n+\n+/**\n+ * @param {string} str maybe required version\n+ * @returns {boolean} true, if it looks like a version\n+ */\n+exports.isRequiredVersion = str => {\n+\tif (str.startsWith(\"^\")) return true;\n+\tif (str.startsWith(\"~\")) return true;\n+\tif (str.startsWith(\">=\")) return true;\n+\treturn /^\\d/.test(str);\n+};"
      },
      {
        "sha": "65018fecddeb137619968ba94622de62fc95f01f",
        "filename": "lib/util/internalSerializables.js",
        "status": "modified",
        "additions": 12,
        "deletions": 10,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Futil%2FinternalSerializables.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/lib%2Futil%2FinternalSerializables.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FinternalSerializables.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -23,17 +23,12 @@ module.exports = {\n \t\trequire(\"../container/ContainerEntryModule\"),\n \t\"container/ContainerExposedDependency\": () =>\n \t\trequire(\"../container/ContainerExposedDependency\"),\n-\t\"container/OverridableModule\": () =>\n-\t\trequire(\"../container/OverridableModule\"),\n-\t\"container/OverridableOriginalDependency\": () =>\n-\t\trequire(\"../container/OverridableOriginalDependency\"),\n+\t\"container/FallbackDependency\": () =>\n+\t\trequire(\"../container/FallbackDependency\"),\n+\t\"container/FallbackItemDependency\": () =>\n+\t\trequire(\"../container/FallbackItemDependency\"),\n+\t\"container/FallbackModule\": () => require(\"../container/FallbackModule\"),\n \t\"container/RemoteModule\": () => require(\"../container/RemoteModule\"),\n-\t\"container/RemoteOverrideDependency\": () =>\n-\t\trequire(\"../container/RemoteOverrideDependency\"),\n-\t\"container/RemoteOverridesDependency\": () =>\n-\t\trequire(\"../container/RemoteOverridesDependency\"),\n-\t\"container/RemoteOverridesModule\": () =>\n-\t\trequire(\"../container/RemoteOverridesModule\"),\n \t\"container/RemoteToExternalDependency\": () =>\n \t\trequire(\"../container/RemoteToExternalDependency\"),\n \t\"dependencies/AMDDefineDependency\": () =>\n@@ -159,6 +154,13 @@ module.exports = {\n \tModuleWarning: () => require(\"../ModuleWarning\"),\n \tNormalModule: () => require(\"../NormalModule\"),\n \tRawModule: () => require(\"../RawModule\"),\n+\t\"sharing/ConsumeSharedModule\": () =>\n+\t\trequire(\"../sharing/ConsumeSharedModule\"),\n+\t\"sharing/ConsumeFallbackDependency\": () =>\n+\t\trequire(\"../sharing/ConsumeFallbackDependency\"),\n+\t\"sharing/ProvideModule\": () => require(\"../sharing/ProvideModule\"),\n+\t\"sharing/ProvideDependency\": () => require(\"../sharing/ProvideDependency\"),\n+\t\"sharing/ProvidedDependency\": () => require(\"../sharing/ProvidedDependency\"),\n \tUnsupportedFeatureWarning: () => require(\"../UnsupportedFeatureWarning\"),\n \t\"util/LazySet\": () => require(\"../util/LazySet\"),\n \tWebpackError: () => require(\"../WebpackError\"),"
      },
      {
        "sha": "3530888a5fb22bb0f53c1859b27ae66c2b6ecb63",
        "filename": "schemas/_container.json",
        "status": "added",
        "additions": 151,
        "deletions": 0,
        "changes": 151,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2F_container.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2F_container.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2F_container.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,151 @@\n+{\n+  \"definitions\": {\n+    \"Exposes\": {\n+      \"description\": \"Modules that should be exposed by this container. When provided, property name is used as public name, otherwise public name is automatically inferred from request.\",\n+      \"anyOf\": [\n+        {\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"Modules that should be exposed by this container.\",\n+            \"anyOf\": [\n+              {\n+                \"$ref\": \"#/definitions/ExposesItem\"\n+              },\n+              {\n+                \"$ref\": \"#/definitions/ExposesObject\"\n+              }\n+            ]\n+          }\n+        },\n+        {\n+          \"$ref\": \"#/definitions/ExposesObject\"\n+        }\n+      ]\n+    },\n+    \"ExposesConfig\": {\n+      \"description\": \"Advanced configuration for modules that should be exposed by this container.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"import\": {\n+          \"description\": \"Request to a module that should be exposed by this container.\",\n+          \"anyOf\": [\n+            {\n+              \"$ref\": \"#/definitions/ExposesItem\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/ExposesItems\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"import\"]\n+    },\n+    \"ExposesItem\": {\n+      \"description\": \"Module that should be exposed by this container.\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n+    \"ExposesItems\": {\n+      \"description\": \"Modules that should be exposed by this container.\",\n+      \"type\": \"array\",\n+      \"items\": {\n+        \"$ref\": \"#/definitions/ExposesItem\"\n+      }\n+    },\n+    \"ExposesObject\": {\n+      \"description\": \"Modules that should be exposed by this container. Property names are used as public paths.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": {\n+        \"description\": \"Modules that should be exposed by this container.\",\n+        \"anyOf\": [\n+          {\n+            \"$ref\": \"#/definitions/ExposesConfig\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/ExposesItem\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/ExposesItems\"\n+          }\n+        ]\n+      }\n+    },\n+    \"Remotes\": {\n+      \"description\": \"Container locations and request scopes from which modules should be resolved and loaded at runtime. When provided, property name is used as request scope, otherwise request scope is automatically inferred from container location.\",\n+      \"anyOf\": [\n+        {\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"Container locations and request scopes from which modules should be resolved and loaded at runtime.\",\n+            \"anyOf\": [\n+              {\n+                \"$ref\": \"#/definitions/RemotesItem\"\n+              },\n+              {\n+                \"$ref\": \"#/definitions/RemotesObject\"\n+              }\n+            ]\n+          }\n+        },\n+        {\n+          \"$ref\": \"#/definitions/RemotesObject\"\n+        }\n+      ]\n+    },\n+    \"RemotesConfig\": {\n+      \"description\": \"Advanced configuration for container locations from which modules should be resolved and loaded at runtime.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"external\": {\n+          \"description\": \"Container locations from which modules should be resolved and loaded at runtime.\",\n+          \"anyOf\": [\n+            {\n+              \"$ref\": \"#/definitions/RemotesItem\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/RemotesItems\"\n+            }\n+          ]\n+        },\n+        \"shareScope\": {\n+          \"description\": \"The name of the share scope shared with this remote.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        }\n+      },\n+      \"required\": [\"external\"]\n+    },\n+    \"RemotesItem\": {\n+      \"description\": \"Container location from which modules should be resolved and loaded at runtime.\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n+    \"RemotesItems\": {\n+      \"description\": \"Container locations from which modules should be resolved and loaded at runtime.\",\n+      \"type\": \"array\",\n+      \"items\": {\n+        \"$ref\": \"#/definitions/RemotesItem\"\n+      }\n+    },\n+    \"RemotesObject\": {\n+      \"description\": \"Container locations from which modules should be resolved and loaded at runtime. Property names are used as request scopes.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": {\n+        \"description\": \"Container locations from which modules should be resolved and loaded at runtime.\",\n+        \"anyOf\": [\n+          {\n+            \"$ref\": \"#/definitions/RemotesConfig\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/RemotesItem\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/RemotesItems\"\n+          }\n+        ]\n+      }\n+    }\n+  }\n+}"
      },
      {
        "sha": "0185848b6dd90f85f82491faa27c1ab09c3f778a",
        "filename": "schemas/_sharedContainer.json",
        "status": "removed",
        "additions": 0,
        "deletions": 323,
        "changes": 323,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/schemas%2F_sharedContainer.json",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/schemas%2F_sharedContainer.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2F_sharedContainer.json?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,323 +0,0 @@\n-{\n-  \"definitions\": {\n-    \"Exposes\": {\n-      \"description\": \"Modules that should be exposed by this container. When provided, property name is used as public name, otherwise public name is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules that should be exposed by this container.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/ExposesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/ExposesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/ExposesObject\"\n-        }\n-      ]\n-    },\n-    \"ExposesConfig\": {\n-      \"description\": \"Advanced configuration for modules that should be exposed by this container.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"description\": \"Request to a module that should be exposed by this container.\",\n-          \"anyOf\": [\n-            {\n-              \"$ref\": \"#/definitions/ExposesItem\"\n-            },\n-            {\n-              \"$ref\": \"#/definitions/ExposesItems\"\n-            }\n-          ]\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"ExposesItem\": {\n-      \"description\": \"Module that should be exposed by this container.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"ExposesItems\": {\n-      \"description\": \"Modules that should be exposed by this container.\",\n-      \"type\": \"array\",\n-      \"items\": {\n-        \"$ref\": \"#/definitions/ExposesItem\"\n-      }\n-    },\n-    \"ExposesObject\": {\n-      \"description\": \"Modules that should be exposed by this container. Property names are used as public paths.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Modules that should be exposed by this container.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/ExposesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/ExposesItem\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/ExposesItems\"\n-          }\n-        ]\n-      }\n-    },\n-    \"Overridables\": {\n-      \"description\": \"Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules in this container that should be able to be overridden by the host.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/OverridablesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/OverridablesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/OverridablesObject\"\n-        }\n-      ]\n-    },\n-    \"OverridablesConfig\": {\n-      \"description\": \"Advanced configuration for modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-          \"anyOf\": [\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItem\"\n-            },\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItems\"\n-            }\n-          ]\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"OverridablesItem\": {\n-      \"description\": \"Request to a module in this container that should be able to be overridden by the host.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"OverridablesItems\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"array\",\n-      \"items\": {\n-        \"$ref\": \"#/definitions/OverridablesItem\"\n-      }\n-    },\n-    \"OverridablesObject\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/OverridablesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItem\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItems\"\n-          }\n-        ]\n-      }\n-    },\n-    \"Overrides\": {\n-      \"description\": \"Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules in this container that should override overridable modules in the remote container.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/OverridesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/OverridesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/OverridesObject\"\n-        }\n-      ]\n-    },\n-    \"OverridesConfig\": {\n-      \"description\": \"Advanced configuration for modules in this container that should override overridable modules in the remote container.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"$ref\": \"#/definitions/OverridesItem\"\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"OverridesItem\": {\n-      \"description\": \"Request to a module in this container that should override overridable modules in the remote container.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"OverridesObject\": {\n-      \"description\": \"Requests to modules in this container that should override overridable modules in the remote container. Property names are used as override keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Requests to modules in this container that should override overridable modules in the remote container.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/OverridesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridesItem\"\n-          }\n-        ]\n-      }\n-    },\n-    \"Remotes\": {\n-      \"description\": \"Container locations and request scopes from which modules should be resolved and loaded at runtime. When provided, property name is used as request scope, otherwise request scope is automatically inferred from container location.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Container locations and request scopes from which modules should be resolved and loaded at runtime.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/RemotesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/RemotesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/RemotesObject\"\n-        }\n-      ]\n-    },\n-    \"RemotesConfig\": {\n-      \"description\": \"Advanced configuration for container locations from which modules should be resolved and loaded at runtime.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"external\": {\n-          \"description\": \"Container locations from which modules should be resolved and loaded at runtime.\",\n-          \"anyOf\": [\n-            {\n-              \"$ref\": \"#/definitions/RemotesItem\"\n-            },\n-            {\n-              \"$ref\": \"#/definitions/RemotesItems\"\n-            }\n-          ]\n-        }\n-      },\n-      \"required\": [\"external\"]\n-    },\n-    \"RemotesItem\": {\n-      \"description\": \"Container location from which modules should be resolved and loaded at runtime.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"RemotesItems\": {\n-      \"description\": \"Container locations from which modules should be resolved and loaded at runtime.\",\n-      \"type\": \"array\",\n-      \"items\": {\n-        \"$ref\": \"#/definitions/RemotesItem\"\n-      }\n-    },\n-    \"RemotesObject\": {\n-      \"description\": \"Container locations from which modules should be resolved and loaded at runtime. Property names are used as request scopes.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Container locations from which modules should be resolved and loaded at runtime.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/RemotesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/RemotesItem\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/RemotesItems\"\n-          }\n-        ]\n-      }\n-    },\n-    \"Shared\": {\n-      \"description\": \"Modules that should be shared with remotes and/or host. When provided, property name is used as shared key, otherwise shared key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules that should be shared with remotes and/or host.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/SharedItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/SharedObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/SharedObject\"\n-        }\n-      ]\n-    },\n-    \"SharedConfig\": {\n-      \"description\": \"Advanced configuration for modules that should be shared with remotes and/or host.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"$ref\": \"#/definitions/SharedItem\"\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"SharedItem\": {\n-      \"description\": \"Module that should be shared with remotes and/or host.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"SharedObject\": {\n-      \"description\": \"Modules that should be shared with remotes and/or host. Property names are used as shared keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Modules that should be shared with remotes and/or host.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/SharedConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/SharedItem\"\n-          }\n-        ]\n-      }\n-    }\n-  }\n-}"
      },
      {
        "sha": "ab44908737f033697b1ae57ce838a7548afff125",
        "filename": "schemas/_sharing.json",
        "status": "added",
        "additions": 132,
        "deletions": 0,
        "changes": 132,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2F_sharing.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2F_sharing.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2F_sharing.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,132 @@\n+{\n+  \"definitions\": {\n+    \"Shared\": {\n+      \"description\": \"Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\",\n+      \"anyOf\": [\n+        {\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"Modules that should be shared in the share scope.\",\n+            \"anyOf\": [\n+              {\n+                \"$ref\": \"#/definitions/SharedItem\"\n+              },\n+              {\n+                \"$ref\": \"#/definitions/SharedObject\"\n+              }\n+            ]\n+          }\n+        },\n+        {\n+          \"$ref\": \"#/definitions/SharedObject\"\n+        }\n+      ]\n+    },\n+    \"SharedConfig\": {\n+      \"description\": \"Advanced configuration for modules that should be shared in the share scope.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"eager\": {\n+          \"description\": \"Include the provided and fallback module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\",\n+          \"type\": \"boolean\"\n+        },\n+        \"import\": {\n+          \"description\": \"Provided module that should be provided to share scope. Also acts as fallback module if no shared module is found in share scope or version isn't valid. Defaults to the property name.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"No provided or fallback module.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedItem\"\n+            }\n+          ]\n+        },\n+        \"requiredVersion\": {\n+          \"description\": \"Version requirement from module in share scope.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Version as string. Can be prefixed with '^' or '~' for minimum matches. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n+        },\n+        \"shareKey\": {\n+          \"description\": \"Module is looked up under this key from the share scope.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"shareScope\": {\n+          \"description\": \"Share scope name.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"singleton\": {\n+          \"description\": \"Allow only a single version of the shared module in share scope (disabled by default).\",\n+          \"type\": \"boolean\"\n+        },\n+        \"strictVersion\": {\n+          \"description\": \"Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\",\n+          \"type\": \"boolean\"\n+        },\n+        \"version\": {\n+          \"description\": \"Version of the provided module. Will replace lower matching versions, but not higher.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Don't provide a version.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"description\": \"Version as string. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n+        }\n+      }\n+    },\n+    \"SharedItem\": {\n+      \"description\": \"A module that should be shared in the share scope.\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n+    \"SharedObject\": {\n+      \"description\": \"Modules that should be shared in the share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": {\n+        \"description\": \"Modules that should be shared in the share scope.\",\n+        \"anyOf\": [\n+          {\n+            \"$ref\": \"#/definitions/SharedConfig\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/SharedItem\"\n+          }\n+        ]\n+      }\n+    },\n+    \"SharedVersionArray\": {\n+      \"description\": \"Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\",\n+      \"type\": \"array\",\n+      \"items\": {\n+        \"description\": \"An item of the version.\",\n+        \"anyOf\": [\n+          {\n+            \"description\": \"Version number. It's assumed that the module is compatible with any higher version number.\",\n+            \"type\": \"number\"\n+          },\n+          {\n+            \"description\": \"Version tag. The module is only compatible with the exact matching version tag.\",\n+            \"type\": \"string\"\n+          }\n+        ]\n+      }\n+    }\n+  }\n+}"
      },
      {
        "sha": "7f11f3c4e8e96db149047727284297683d44cb77",
        "filename": "schemas/plugins/container/ContainerPlugin.json",
        "status": "modified",
        "additions": 8,
        "deletions": 75,
        "changes": 83,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fcontainer%2FContainerPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fcontainer%2FContainerPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Fcontainer%2FContainerPlugin.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -221,77 +221,6 @@\n         \"system\"\n       ]\n     },\n-    \"Overridables\": {\n-      \"description\": \"Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules in this container that should be able to be overridden by the host.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/OverridablesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/OverridablesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/OverridablesObject\"\n-        }\n-      ]\n-    },\n-    \"OverridablesConfig\": {\n-      \"description\": \"Advanced configuration for modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-          \"anyOf\": [\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItem\"\n-            },\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItems\"\n-            }\n-          ]\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"OverridablesItem\": {\n-      \"description\": \"Request to a module in this container that should be able to be overridden by the host.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"OverridablesItems\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"array\",\n-      \"items\": {\n-        \"$ref\": \"#/definitions/OverridablesItem\"\n-      }\n-    },\n-    \"OverridablesObject\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/OverridablesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItem\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItems\"\n-          }\n-        ]\n-      }\n-    },\n     \"UmdNamedDefine\": {\n       \"description\": \"If `output.libraryTarget` is set to umd and `output.library` is set, setting this to true will name the AMD module.\",\n       \"type\": \"boolean\"\n@@ -307,17 +236,21 @@\n     \"filename\": {\n       \"description\": \"The filename for this container relative path inside the `output.path` directory.\",\n       \"type\": \"string\",\n-      \"absolutePath\": false\n+      \"absolutePath\": false,\n+      \"minLength\": 1\n     },\n     \"library\": {\n       \"$ref\": \"#/definitions/LibraryOptions\"\n     },\n     \"name\": {\n       \"description\": \"The name for this container.\",\n-      \"type\": \"string\"\n+      \"type\": \"string\",\n+      \"minLength\": 1\n     },\n-    \"overridables\": {\n-      \"$ref\": \"#/definitions/Overridables\"\n+    \"shareScope\": {\n+      \"description\": \"The name of the share scope which is shared with the host (defaults to 'default').\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n     }\n   },\n   \"required\": [\"name\", \"exposes\"]"
      },
      {
        "sha": "dda6a87e9368d6764339ae56e29cbad243537316",
        "filename": "schemas/plugins/container/ContainerReferencePlugin.json",
        "status": "modified",
        "additions": 10,
        "deletions": 56,
        "changes": 66,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fcontainer%2FContainerReferencePlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fcontainer%2FContainerReferencePlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Fcontainer%2FContainerReferencePlugin.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -23,59 +23,6 @@\n         \"import\"\n       ]\n     },\n-    \"Overrides\": {\n-      \"description\": \"Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules in this container that should override overridable modules in the remote container.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/OverridesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/OverridesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/OverridesObject\"\n-        }\n-      ]\n-    },\n-    \"OverridesConfig\": {\n-      \"description\": \"Advanced configuration for modules in this container that should override overridable modules in the remote container.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"$ref\": \"#/definitions/OverridesItem\"\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"OverridesItem\": {\n-      \"description\": \"Request to a module in this container that should override overridable modules in the remote container.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"OverridesObject\": {\n-      \"description\": \"Requests to modules in this container that should override overridable modules in the remote container. Property names are used as override keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Requests to modules in this container that should override overridable modules in the remote container.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/OverridesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridesItem\"\n-          }\n-        ]\n-      }\n-    },\n     \"Remotes\": {\n       \"description\": \"Container locations and request scopes from which modules should be resolved and loaded at runtime. When provided, property name is used as request scope, otherwise request scope is automatically inferred from container location.\",\n       \"anyOf\": [\n@@ -113,6 +60,11 @@\n               \"$ref\": \"#/definitions/RemotesItems\"\n             }\n           ]\n+        },\n+        \"shareScope\": {\n+          \"description\": \"The name of the share scope shared with this remote.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n         }\n       },\n       \"required\": [\"external\"]\n@@ -152,9 +104,6 @@\n   \"type\": \"object\",\n   \"additionalProperties\": false,\n   \"properties\": {\n-    \"overrides\": {\n-      \"$ref\": \"#/definitions/Overrides\"\n-    },\n     \"remoteType\": {\n       \"description\": \"The external type of the remote containers.\",\n       \"oneOf\": [\n@@ -165,6 +114,11 @@\n     },\n     \"remotes\": {\n       \"$ref\": \"#/definitions/Remotes\"\n+    },\n+    \"shareScope\": {\n+      \"description\": \"The name of the share scope shared with all remotes (defaults to 'default').\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n     }\n   },\n   \"required\": [\"remoteType\", \"remotes\"]"
      },
      {
        "sha": "e25f99d81f3e9d0b7ccfd1d30f17497ee03cd7c8",
        "filename": "schemas/plugins/container/ModuleFederationPlugin.json",
        "status": "modified",
        "additions": 94,
        "deletions": 139,
        "changes": 233,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fcontainer%2FModuleFederationPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fcontainer%2FModuleFederationPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Fcontainer%2FModuleFederationPlugin.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -244,130 +244,6 @@\n         \"system\"\n       ]\n     },\n-    \"Overridables\": {\n-      \"description\": \"Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules in this container that should be able to be overridden by the host.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/OverridablesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/OverridablesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/OverridablesObject\"\n-        }\n-      ]\n-    },\n-    \"OverridablesConfig\": {\n-      \"description\": \"Advanced configuration for modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-          \"anyOf\": [\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItem\"\n-            },\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItems\"\n-            }\n-          ]\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"OverridablesItem\": {\n-      \"description\": \"Request to a module in this container that should be able to be overridden by the host.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"OverridablesItems\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"array\",\n-      \"items\": {\n-        \"$ref\": \"#/definitions/OverridablesItem\"\n-      }\n-    },\n-    \"OverridablesObject\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/OverridablesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItem\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItems\"\n-          }\n-        ]\n-      }\n-    },\n-    \"Overrides\": {\n-      \"description\": \"Modules in this container that should override overridable modules in the remote container. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules in this container that should override overridable modules in the remote container.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/OverridesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/OverridesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/OverridesObject\"\n-        }\n-      ]\n-    },\n-    \"OverridesConfig\": {\n-      \"description\": \"Advanced configuration for modules in this container that should override overridable modules in the remote container.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"$ref\": \"#/definitions/OverridesItem\"\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"OverridesItem\": {\n-      \"description\": \"Request to a module in this container that should override overridable modules in the remote container.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"OverridesObject\": {\n-      \"description\": \"Requests to modules in this container that should override overridable modules in the remote container. Property names are used as override keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Requests to modules in this container that should override overridable modules in the remote container.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/OverridesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridesItem\"\n-          }\n-        ]\n-      }\n-    },\n     \"Remotes\": {\n       \"description\": \"Container locations and request scopes from which modules should be resolved and loaded at runtime. When provided, property name is used as request scope, otherwise request scope is automatically inferred from container location.\",\n       \"anyOf\": [\n@@ -405,6 +281,11 @@\n               \"$ref\": \"#/definitions/RemotesItems\"\n             }\n           ]\n+        },\n+        \"shareScope\": {\n+          \"description\": \"The name of the share scope shared with this remote.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n         }\n       },\n       \"required\": [\"external\"]\n@@ -440,12 +321,12 @@\n       }\n     },\n     \"Shared\": {\n-      \"description\": \"Modules that should be shared with remotes and/or host. When provided, property name is used as shared key, otherwise shared key is automatically inferred from request.\",\n+      \"description\": \"Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\",\n       \"anyOf\": [\n         {\n           \"type\": \"array\",\n           \"items\": {\n-            \"description\": \"Modules that should be shared with remotes and/or host.\",\n+            \"description\": \"Modules that should be shared in the share scope.\",\n             \"anyOf\": [\n               {\n                 \"$ref\": \"#/definitions/SharedItem\"\n@@ -462,26 +343,84 @@\n       ]\n     },\n     \"SharedConfig\": {\n-      \"description\": \"Advanced configuration for modules that should be shared with remotes and/or host.\",\n+      \"description\": \"Advanced configuration for modules that should be shared in the share scope.\",\n       \"type\": \"object\",\n       \"additionalProperties\": false,\n       \"properties\": {\n+        \"eager\": {\n+          \"description\": \"Include the provided and fallback module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\",\n+          \"type\": \"boolean\"\n+        },\n         \"import\": {\n-          \"$ref\": \"#/definitions/SharedItem\"\n+          \"description\": \"Provided module that should be provided to share scope. Also acts as fallback module if no shared module is found in share scope or version isn't valid. Defaults to the property name.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"No provided or fallback module.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedItem\"\n+            }\n+          ]\n+        },\n+        \"requiredVersion\": {\n+          \"description\": \"Version requirement from module in share scope.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Version as string. Can be prefixed with '^' or '~' for minimum matches. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n+        },\n+        \"shareKey\": {\n+          \"description\": \"Module is looked up under this key from the share scope.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"shareScope\": {\n+          \"description\": \"Share scope name.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"singleton\": {\n+          \"description\": \"Allow only a single version of the shared module in share scope (disabled by default).\",\n+          \"type\": \"boolean\"\n+        },\n+        \"strictVersion\": {\n+          \"description\": \"Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\",\n+          \"type\": \"boolean\"\n+        },\n+        \"version\": {\n+          \"description\": \"Version of the provided module. Will replace lower matching versions, but not higher.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Don't provide a version.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"description\": \"Version as string. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n         }\n-      },\n-      \"required\": [\"import\"]\n+      }\n     },\n     \"SharedItem\": {\n-      \"description\": \"Module that should be shared with remotes and/or host.\",\n+      \"description\": \"A module that should be shared in the share scope.\",\n       \"type\": \"string\",\n       \"minLength\": 1\n     },\n     \"SharedObject\": {\n-      \"description\": \"Modules that should be shared with remotes and/or host. Property names are used as shared keys.\",\n+      \"description\": \"Modules that should be shared in the share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\",\n       \"type\": \"object\",\n       \"additionalProperties\": {\n-        \"description\": \"Modules that should be shared with remotes and/or host.\",\n+        \"description\": \"Modules that should be shared in the share scope.\",\n         \"anyOf\": [\n           {\n             \"$ref\": \"#/definitions/SharedConfig\"\n@@ -492,6 +431,23 @@\n         ]\n       }\n     },\n+    \"SharedVersionArray\": {\n+      \"description\": \"Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\",\n+      \"type\": \"array\",\n+      \"items\": {\n+        \"description\": \"An item of the version.\",\n+        \"anyOf\": [\n+          {\n+            \"description\": \"Version number. It's assumed that the module is compatible with any higher version number.\",\n+            \"type\": \"number\"\n+          },\n+          {\n+            \"description\": \"Version tag. The module is only compatible with the exact matching version tag.\",\n+            \"type\": \"string\"\n+          }\n+        ]\n+      }\n+    },\n     \"UmdNamedDefine\": {\n       \"description\": \"If `output.libraryTarget` is set to umd and `output.library` is set, setting this to true will name the AMD module.\",\n       \"type\": \"boolean\"\n@@ -516,12 +472,6 @@\n       \"description\": \"The name of the container.\",\n       \"type\": \"string\"\n     },\n-    \"overridables\": {\n-      \"$ref\": \"#/definitions/Overridables\"\n-    },\n-    \"overrides\": {\n-      \"$ref\": \"#/definitions/Overrides\"\n-    },\n     \"remoteType\": {\n       \"description\": \"The external type of the remote containers.\",\n       \"oneOf\": [\n@@ -533,6 +483,11 @@\n     \"remotes\": {\n       \"$ref\": \"#/definitions/Remotes\"\n     },\n+    \"shareScope\": {\n+      \"description\": \"Share scope name used for all shared modules (defaults to 'default').\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n     \"shared\": {\n       \"$ref\": \"#/definitions/Shared\"\n     }"
      },
      {
        "sha": "099855803951955c137e1183572b6b5a2d15b2b9",
        "filename": "schemas/plugins/container/OverridablesPlugin.json",
        "status": "removed",
        "additions": 0,
        "deletions": 84,
        "changes": 84,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/schemas%2Fplugins%2Fcontainer%2FOverridablesPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/schemas%2Fplugins%2Fcontainer%2FOverridablesPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Fcontainer%2FOverridablesPlugin.json?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,84 +0,0 @@\n-{\n-  \"definitions\": {\n-    \"Overridables\": {\n-      \"description\": \"Modules in this container that should be able to be overridden by the host. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-      \"anyOf\": [\n-        {\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"Modules in this container that should be able to be overridden by the host.\",\n-            \"anyOf\": [\n-              {\n-                \"$ref\": \"#/definitions/OverridablesItem\"\n-              },\n-              {\n-                \"$ref\": \"#/definitions/OverridablesObject\"\n-              }\n-            ]\n-          }\n-        },\n-        {\n-          \"$ref\": \"#/definitions/OverridablesObject\"\n-        }\n-      ]\n-    },\n-    \"OverridablesConfig\": {\n-      \"description\": \"Advanced configuration for modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"import\": {\n-          \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-          \"anyOf\": [\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItem\"\n-            },\n-            {\n-              \"$ref\": \"#/definitions/OverridablesItems\"\n-            }\n-          ]\n-        }\n-      },\n-      \"required\": [\"import\"]\n-    },\n-    \"OverridablesItem\": {\n-      \"description\": \"Request to a module in this container that should be able to be overridden by the host.\",\n-      \"type\": \"string\",\n-      \"minLength\": 1\n-    },\n-    \"OverridablesItems\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-      \"type\": \"array\",\n-      \"items\": {\n-        \"$ref\": \"#/definitions/OverridablesItem\"\n-      }\n-    },\n-    \"OverridablesObject\": {\n-      \"description\": \"Requests to modules in this container that should be able to be overridden by the host. Property names are used as override keys.\",\n-      \"type\": \"object\",\n-      \"additionalProperties\": {\n-        \"description\": \"Requests to modules in this container that should be able to be overridden by the host.\",\n-        \"anyOf\": [\n-          {\n-            \"$ref\": \"#/definitions/OverridablesConfig\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItem\"\n-          },\n-          {\n-            \"$ref\": \"#/definitions/OverridablesItems\"\n-          }\n-        ]\n-      }\n-    }\n-  },\n-  \"title\": \"OverridablesPluginOptions\",\n-  \"description\": \"Modules that should be able to be overridden. When provided, property name is used as override key, otherwise override key is automatically inferred from request.\",\n-  \"type\": \"object\",\n-  \"additionalProperties\": false,\n-  \"properties\": {\n-    \"overridables\": {\n-      \"$ref\": \"#/definitions/Overridables\"\n-    }\n-  }\n-}"
      },
      {
        "sha": "2c346029da35447d2ec712a411c0b61dbc5214a8",
        "filename": "schemas/plugins/sharing/ConsumeSharedPlugin.json",
        "status": "added",
        "additions": 131,
        "deletions": 0,
        "changes": 131,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fsharing%2FConsumeSharedPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fsharing%2FConsumeSharedPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Fsharing%2FConsumeSharedPlugin.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,131 @@\n+{\n+  \"definitions\": {\n+    \"Consumes\": {\n+      \"description\": \"Modules that should be consumed from share scope. When provided, property names are used to match requested modules in this compilation.\",\n+      \"anyOf\": [\n+        {\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"Modules that should be consumed from share scope.\",\n+            \"anyOf\": [\n+              {\n+                \"$ref\": \"#/definitions/ConsumesItem\"\n+              },\n+              {\n+                \"$ref\": \"#/definitions/ConsumesObject\"\n+              }\n+            ]\n+          }\n+        },\n+        {\n+          \"$ref\": \"#/definitions/ConsumesObject\"\n+        }\n+      ]\n+    },\n+    \"ConsumesConfig\": {\n+      \"description\": \"Advanced configuration for modules that should be consumed from share scope.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"eager\": {\n+          \"description\": \"Include the fallback module directly instead behind an async request. This allows to use fallback module in initial load too. All possible shared modules need to be eager too.\",\n+          \"type\": \"boolean\"\n+        },\n+        \"import\": {\n+          \"description\": \"Fallback module if no shared module is found in share scope. Defaults to the property name.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"No fallback module.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"$ref\": \"#/definitions/ConsumesItem\"\n+            }\n+          ]\n+        },\n+        \"requiredVersion\": {\n+          \"description\": \"Version requirement from module in share scope.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Version as string. Can be prefixed with '^' or '~' for minimum matches. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n+        },\n+        \"shareKey\": {\n+          \"description\": \"Module is looked up under this key from the share scope.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"shareScope\": {\n+          \"description\": \"Share scope name.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"singleton\": {\n+          \"description\": \"Allow only a single version of the shared module in share scope (disabled by default).\",\n+          \"type\": \"boolean\"\n+        },\n+        \"strictVersion\": {\n+          \"description\": \"Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\",\n+          \"type\": \"boolean\"\n+        }\n+      }\n+    },\n+    \"ConsumesItem\": {\n+      \"description\": \"A module that should be consumed from share scope.\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n+    \"ConsumesObject\": {\n+      \"description\": \"Modules that should be consumed from share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": {\n+        \"description\": \"Modules that should be consumed from share scope.\",\n+        \"anyOf\": [\n+          {\n+            \"$ref\": \"#/definitions/ConsumesConfig\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/ConsumesItem\"\n+          }\n+        ]\n+      }\n+    },\n+    \"SharedVersionArray\": {\n+      \"description\": \"Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\",\n+      \"type\": \"array\",\n+      \"items\": {\n+        \"description\": \"An item of the version.\",\n+        \"anyOf\": [\n+          {\n+            \"description\": \"Version number. It's assumed that the module is compatible with any higher version number.\",\n+            \"type\": \"number\"\n+          },\n+          {\n+            \"description\": \"Version tag. The module is only compatible with the exact matching version tag.\",\n+            \"type\": \"string\"\n+          }\n+        ]\n+      }\n+    }\n+  },\n+  \"title\": \"ConsumeSharedPluginOptions\",\n+  \"description\": \"Options for consuming shared modules.\",\n+  \"type\": \"object\",\n+  \"additionalProperties\": false,\n+  \"properties\": {\n+    \"consumes\": {\n+      \"$ref\": \"#/definitions/Consumes\"\n+    },\n+    \"shareScope\": {\n+      \"description\": \"Share scope name used for all consumed modules (defaults to 'default').\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    }\n+  },\n+  \"required\": [\"consumes\"]\n+}"
      },
      {
        "sha": "c4f9862712fabecf9ccc51a4c0fc3e31375b97ee",
        "filename": "schemas/plugins/sharing/ProvideSharedPlugin.json",
        "status": "added",
        "additions": 113,
        "deletions": 0,
        "changes": 113,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fsharing%2FProvideSharedPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fsharing%2FProvideSharedPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Fsharing%2FProvideSharedPlugin.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,113 @@\n+{\n+  \"definitions\": {\n+    \"Provides\": {\n+      \"description\": \"Modules that should be provided as shared modules to the share scope. When provided, property name is used as share key, otherwise share key is automatically inferred from request.\",\n+      \"anyOf\": [\n+        {\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"Modules that should be provided as shared modules to the share scope.\",\n+            \"anyOf\": [\n+              {\n+                \"$ref\": \"#/definitions/ProvidesItem\"\n+              },\n+              {\n+                \"$ref\": \"#/definitions/ProvidesObject\"\n+              }\n+            ]\n+          }\n+        },\n+        {\n+          \"$ref\": \"#/definitions/ProvidesObject\"\n+        }\n+      ]\n+    },\n+    \"ProvidesConfig\": {\n+      \"description\": \"Advanced configuration for modules that should be provided as shared modules to the share scope.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"eager\": {\n+          \"description\": \"Include the provided module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\",\n+          \"type\": \"boolean\"\n+        },\n+        \"import\": {\n+          \"$ref\": \"#/definitions/ProvidesItem\"\n+        },\n+        \"shareScope\": {\n+          \"description\": \"Share scope name.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"version\": {\n+          \"description\": \"Version of the provided module. Will replace lower matching versions, but not higher.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Don't provide a version.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"description\": \"Version as string. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"import\"]\n+    },\n+    \"ProvidesItem\": {\n+      \"description\": \"Request to a module that should be provided as shared module to the share scope.\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n+    \"ProvidesObject\": {\n+      \"description\": \"Modules that should be provided as shared modules to the share scope. Property names are used as share keys.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": {\n+        \"description\": \"Modules that should be provided as shared modules to the share scope.\",\n+        \"anyOf\": [\n+          {\n+            \"$ref\": \"#/definitions/ProvidesConfig\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/ProvidesItem\"\n+          }\n+        ]\n+      }\n+    },\n+    \"SharedVersionArray\": {\n+      \"description\": \"Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\",\n+      \"type\": \"array\",\n+      \"items\": {\n+        \"description\": \"An item of the version.\",\n+        \"anyOf\": [\n+          {\n+            \"description\": \"Version number. It's assumed that the module is compatible with any higher version number.\",\n+            \"type\": \"number\"\n+          },\n+          {\n+            \"description\": \"Version tag. The module is only compatible with the exact matching version tag.\",\n+            \"type\": \"string\"\n+          }\n+        ]\n+      }\n+    }\n+  },\n+  \"title\": \"ProvideSharedPluginOptions\",\n+  \"type\": \"object\",\n+  \"additionalProperties\": false,\n+  \"properties\": {\n+    \"provides\": {\n+      \"$ref\": \"#/definitions/Provides\"\n+    },\n+    \"shareScope\": {\n+      \"description\": \"Share scope name used for all provided modules (defaults to 'default').\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    }\n+  },\n+  \"required\": [\"provides\"]\n+}"
      },
      {
        "sha": "0fc000ff0d075a9e63be506013be39ff72a708a1",
        "filename": "schemas/plugins/sharing/SharePlugin.json",
        "status": "added",
        "additions": 147,
        "deletions": 0,
        "changes": 147,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fsharing%2FSharePlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/schemas%2Fplugins%2Fsharing%2FSharePlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Fsharing%2FSharePlugin.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,147 @@\n+{\n+  \"definitions\": {\n+    \"Shared\": {\n+      \"description\": \"Modules that should be shared in the share scope. When provided, property names are used to match requested modules in this compilation.\",\n+      \"anyOf\": [\n+        {\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"Modules that should be shared in the share scope.\",\n+            \"anyOf\": [\n+              {\n+                \"$ref\": \"#/definitions/SharedItem\"\n+              },\n+              {\n+                \"$ref\": \"#/definitions/SharedObject\"\n+              }\n+            ]\n+          }\n+        },\n+        {\n+          \"$ref\": \"#/definitions/SharedObject\"\n+        }\n+      ]\n+    },\n+    \"SharedConfig\": {\n+      \"description\": \"Advanced configuration for modules that should be shared in the share scope.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"eager\": {\n+          \"description\": \"Include the provided and fallback module directly instead behind an async request. This allows to use this shared module in initial load too. All possible shared modules need to be eager too.\",\n+          \"type\": \"boolean\"\n+        },\n+        \"import\": {\n+          \"description\": \"Provided module that should be provided to share scope. Also acts as fallback module if no shared module is found in share scope or version isn't valid. Defaults to the property name.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"No provided or fallback module.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedItem\"\n+            }\n+          ]\n+        },\n+        \"requiredVersion\": {\n+          \"description\": \"Version requirement from module in share scope.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Version as string. Can be prefixed with '^' or '~' for minimum matches. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n+        },\n+        \"shareKey\": {\n+          \"description\": \"Module is looked up under this key from the share scope.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"shareScope\": {\n+          \"description\": \"Share scope name.\",\n+          \"type\": \"string\",\n+          \"minLength\": 1\n+        },\n+        \"singleton\": {\n+          \"description\": \"Allow only a single version of the shared module in share scope (disabled by default).\",\n+          \"type\": \"boolean\"\n+        },\n+        \"strictVersion\": {\n+          \"description\": \"Do not accept shared module if version is not valid (defaults to yes, if local fallback module is available and shared module is not a singleton, otherwise no, has no effect if there is no required version specified).\",\n+          \"type\": \"boolean\"\n+        },\n+        \"version\": {\n+          \"description\": \"Version of the provided module. Will replace lower matching versions, but not higher.\",\n+          \"anyOf\": [\n+            {\n+              \"description\": \"Don't provide a version.\",\n+              \"enum\": [false]\n+            },\n+            {\n+              \"description\": \"Version as string. Each part of the version should be separated by a dot '.'.\",\n+              \"type\": \"string\"\n+            },\n+            {\n+              \"$ref\": \"#/definitions/SharedVersionArray\"\n+            }\n+          ]\n+        }\n+      }\n+    },\n+    \"SharedItem\": {\n+      \"description\": \"A module that should be shared in the share scope.\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n+    \"SharedObject\": {\n+      \"description\": \"Modules that should be shared in the share scope. Property names are used to match requested modules in this compilation. Relative requests are resolved, module requests are matched unresolved, absolute paths will match resolved requests. A trailing slash will match all requests with this prefix. In this case shareKey must also have a trailing slash.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": {\n+        \"description\": \"Modules that should be shared in the share scope.\",\n+        \"anyOf\": [\n+          {\n+            \"$ref\": \"#/definitions/SharedConfig\"\n+          },\n+          {\n+            \"$ref\": \"#/definitions/SharedItem\"\n+          }\n+        ]\n+      }\n+    },\n+    \"SharedVersionArray\": {\n+      \"description\": \"Version number as array. Numbers and strings are accepted. Strings are treated as tags, which only match exactly. Numbers can match higher numbers.\",\n+      \"type\": \"array\",\n+      \"items\": {\n+        \"description\": \"An item of the version.\",\n+        \"anyOf\": [\n+          {\n+            \"description\": \"Version number. It's assumed that the module is compatible with any higher version number.\",\n+            \"type\": \"number\"\n+          },\n+          {\n+            \"description\": \"Version tag. The module is only compatible with the exact matching version tag.\",\n+            \"type\": \"string\"\n+          }\n+        ]\n+      }\n+    }\n+  },\n+  \"title\": \"SharePluginOptions\",\n+  \"description\": \"Options for shared modules.\",\n+  \"type\": \"object\",\n+  \"additionalProperties\": false,\n+  \"properties\": {\n+    \"shareScope\": {\n+      \"description\": \"Share scope name used for all shared modules (defaults to 'default').\",\n+      \"type\": \"string\",\n+      \"minLength\": 1\n+    },\n+    \"shared\": {\n+      \"$ref\": \"#/definitions/Shared\"\n+    }\n+  },\n+  \"required\": [\"shared\"]\n+}"
      },
      {
        "sha": "1baf11d896d369de105c250e0c9a816e034a4421",
        "filename": "test/PersistentCaching.test.js",
        "status": "modified",
        "additions": 13,
        "deletions": 2,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FPersistentCaching.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FPersistentCaching.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FPersistentCaching.test.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -54,6 +54,8 @@ describe(\"Persistent Caching\", () => {\n \t\treturn new Promise((resolve, reject) => {\n \t\t\twebpack({ ...config, ...configAdditions }, (err, stats) => {\n \t\t\t\tif (err) return reject(err);\n+\t\t\t\tif (stats.hasErrors())\n+\t\t\t\t\treturn reject(stats.toString({ preset: \"errors-only\" }));\n \t\t\t\tresolve(stats);\n \t\t\t});\n \t\t});\n@@ -138,7 +140,8 @@ export default ${files.map((_, i) => `f${i}`).join(\" + \")};\n \t\tconst data = {\n \t\t\t\"index.js\":\n \t\t\t\t\"export default import('container/src/exposed').then(m => m.default);\",\n-\t\t\t\"exposed.js\": \"export default 42;\"\n+\t\t\t\"exposed.js\": \"import lib from 'lib'; export default 21 + lib;\",\n+\t\t\t\"lib.js\": \"export default 21\"\n \t\t};\n \t\tawait updateSrc(data);\n \t\tconst configAdditions = {\n@@ -148,7 +151,15 @@ export default ${files.map((_, i) => `f${i}`).join(\" + \")};\n \t\t\t\t\tlibrary: { type: \"commonjs-module\" },\n \t\t\t\t\texposes: [\"./src/exposed\"],\n \t\t\t\t\tremotes: {\n-\t\t\t\t\t\tcontainer: \"./container\"\n+\t\t\t\t\t\tcontainer: [\"./no-container\", \"./container\"]\n+\t\t\t\t\t},\n+\t\t\t\t\tshared: {\n+\t\t\t\t\t\tlib: {\n+\t\t\t\t\t\t\timport: \"./src/lib\",\n+\t\t\t\t\t\t\tshareKey: \"lib\",\n+\t\t\t\t\t\t\tversion: \"1.2.3\",\n+\t\t\t\t\t\t\trequiredVersion: \"^1.0.0\"\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t})\n \t\t\t]"
      },
      {
        "sha": "8eef81562794d07afc70a51e0bf0d06a90c86683",
        "filename": "test/configCases/container/0-container-full/webpack.config.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F0-container-full%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F0-container-full%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F0-container-full%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -17,7 +17,7 @@ module.exports = {\n \t\t\t\t\texternal: \"./container.js\"\n \t\t\t\t}\n \t\t\t},\n-\t\t\tshared: [\"react\"]\n+\t\t\tshared: { react: { version: false } }\n \t\t})\n \t]\n };"
      },
      {
        "sha": "82dd86951de138df9b7a7373e7aceac7ce0695d0",
        "filename": "test/configCases/container/0-transitive-overriding/webpack.config.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F0-transitive-overriding%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F0-transitive-overriding%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F0-transitive-overriding%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -16,7 +16,10 @@ module.exports = {\n \t\t\t\t\"container-with-shared\": \"./container-with-shared.js\"\n \t\t\t},\n \t\t\tshared: {\n-\t\t\t\tshared: \"./shared\"\n+\t\t\t\t\"./shared\": {\n+\t\t\t\t\tshareKey: \"shared\",\n+\t\t\t\t\tversion: \"1\"\n+\t\t\t\t}\n \t\t\t}\n \t\t})\n \t]"
      },
      {
        "sha": "87032da008abd34dfdd7caa35bc127a9fdf9c8bc",
        "filename": "test/configCases/container/1-container-full/node_modules/package.json",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F1-container-full%2Fnode_modules%2Fpackage.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F1-container-full%2Fnode_modules%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F1-container-full%2Fnode_modules%2Fpackage.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"version\": \"2.1.0\"\n+}"
      },
      {
        "sha": "24380bb85a7d0bea2b855f7c1f0b027a73019652",
        "filename": "test/configCases/container/2-container-full/App.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2FApp.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2FApp.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F2-container-full%2FApp.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,6 +1,8 @@\n+import OldReact from \"old-react\";\n+import OldReactSingleton from \"old-react-singleton\";\n import React from \"react\";\n import ComponentC from \"containerB/ComponentC\";\n \n export default () => {\n-\treturn `App rendered with [${React()}] and [${ComponentC()}]`;\n+\treturn `App rendered with [${React()}] and [${OldReact()}] and [${OldReactSingleton()}] and [${ComponentC()}]`;\n };"
      },
      {
        "sha": "1943469c7461fb16c5e3f34ea244c1c314fd4110",
        "filename": "test/configCases/container/2-container-full/ComponentB.js",
        "status": "removed",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2F2-container-full%2FComponentB.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2F2-container-full%2FComponentB.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F2-container-full%2FComponentB.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,5 +0,0 @@\n-import React from \"react\";\n-\n-export default () => {\n-\treturn `ComponentB rendered with [${React()}]`;\n-};"
      },
      {
        "sha": "859c491e1cffb5f10def910306d4c356df507929",
        "filename": "test/configCases/container/2-container-full/index.js",
        "status": "modified",
        "additions": 34,
        "deletions": 2,
        "changes": 36,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F2-container-full%2Findex.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,14 +1,46 @@\n+let warnings = [];\n+let oldWarn;\n+\n+beforeEach(done => {\n+\toldWarn = console.warn;\n+\tconsole.warn = m => warnings.push(m);\n+\tdone();\n+});\n+\n+afterEach(done => {\n+\texpectWarning();\n+\tconsole.warn = oldWarn;\n+\tdone();\n+});\n+\n+const expectWarning = regexp => {\n+\tif (!regexp) {\n+\t\texpect(warnings).toEqual([]);\n+\t} else {\n+\t\texpect(warnings).toEqual(\n+\t\t\texpect.objectContaining({\n+\t\t\t\t0: expect.stringMatching(regexp),\n+\t\t\t\tlength: 1\n+\t\t\t})\n+\t\t);\n+\t}\n+\twarnings.length = 0;\n+};\n+\n it(\"should load the component from container\", () => {\n \treturn import(\"./App\").then(({ default: App }) => {\n+\t\texpectWarning(\n+\t\t\t/Unsatisfied version of shared singleton module react@8 \\(required react@2\\)/\n+\t\t);\n \t\tconst rendered = App();\n \t\texpect(rendered).toBe(\n-\t\t\t\"App rendered with [This is react 8] and [ComponentC rendered with [This is react 8] and [ComponentA rendered with [This is react 8]] and [ComponentB rendered with [This is react 8]]]\"\n+\t\t\t\"App rendered with [This is react 8] and [This is react 2.1.0] and [This is react 8] and [ComponentC rendered with [This is react 8] and [ComponentA rendered with [This is react 8]] and [ComponentB rendered with [This is react 8]]]\"\n \t\t);\n \t\treturn import(\"./upgrade-react\").then(({ default: upgrade }) => {\n \t\t\tupgrade();\n \t\t\tconst rendered = App();\n \t\t\texpect(rendered).toBe(\n-\t\t\t\t\"App rendered with [This is react 9] and [ComponentC rendered with [This is react 9] and [ComponentA rendered with [This is react 9]] and [ComponentB rendered with [This is react 9]]]\"\n+\t\t\t\t\"App rendered with [This is react 9] and [This is react 2.1.0] and [This is react 9] and [ComponentC rendered with [This is react 9] and [ComponentA rendered with [This is react 9]] and [ComponentB rendered with [This is react 9]]]\"\n \t\t\t);\n \t\t});\n \t});"
      },
      {
        "sha": "88d4e7f3e51c6347a0cc706f15bc0faf348ec04a",
        "filename": "test/configCases/container/2-container-full/node_modules/package.json",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2Fnode_modules%2Fpackage.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2Fnode_modules%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F2-container-full%2Fnode_modules%2Fpackage.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"version\": \"8\"\n+}"
      },
      {
        "sha": "0b62f541796ffd610fd66a1e8fe040ffb6c56759",
        "filename": "test/configCases/container/2-container-full/webpack.config.js",
        "status": "modified",
        "additions": 14,
        "deletions": 1,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-container-full%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F2-container-full%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -16,7 +16,20 @@ module.exports = {\n \t\t\t\t]\n \t\t\t},\n \t\t\texposes: [\"./Self\"],\n-\t\t\tshared: [\"react\"]\n+\t\t\tshared: {\n+\t\t\t\treact: \"react\",\n+\t\t\t\t\"old-react\": {\n+\t\t\t\t\timport: false,\n+\t\t\t\t\tshareKey: \"react\",\n+\t\t\t\t\trequiredVersion: \"^2\"\n+\t\t\t\t},\n+\t\t\t\t\"old-react-singleton\": {\n+\t\t\t\t\timport: false,\n+\t\t\t\t\tshareKey: \"react\",\n+\t\t\t\t\trequiredVersion: \"^2\",\n+\t\t\t\t\tsingleton: true\n+\t\t\t\t}\n+\t\t\t}\n \t\t})\n \t]\n };"
      },
      {
        "sha": "f7771726839d9d8846aa359e4bbd11659ab9a245",
        "filename": "test/configCases/container/2-transitive-overriding/index.js",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-transitive-overriding%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-transitive-overriding%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F2-transitive-overriding%2Findex.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -20,7 +20,7 @@ it(\"should have good module ids\", async () => {\n \t\t\"./b.js\",\n \t\t\"./modules.js\",\n \t\t\"webpack/container/entry/container-with-shared\",\n-\t\t\"webpack/container/overridable/shared=./shared\"\n+\t\t\"webpack/sharing/consume/default/shared/./shared\"\n \t]);\n \texpect(m1).toEqual([\n \t\t\"./a.js\",\n@@ -29,15 +29,13 @@ it(\"should have good module ids\", async () => {\n \t\t\"./modules.js\",\n \t\t\"webpack/container/entry/container-no-shared\",\n \t\t\"webpack/container/reference/container-with-shared\",\n-\t\t\"webpack/container/remote-overrides/empty\",\n \t\t\"webpack/container/remote/container-with-shared/b\",\n \t\t\"webpack/container/remote/container-with-shared/modules\"\n \t]);\n \texpect(m2).toEqual([\n \t\t\"./index.js\",\n \t\t\"./shared.js\",\n \t\t\"webpack/container/reference/container-no-shared\",\n-\t\t\"webpack/container/remote-overrides/7d3b8a\",\n \t\t\"webpack/container/remote/container-no-shared/a\",\n \t\t\"webpack/container/remote/container-no-shared/b\",\n \t\t\"webpack/container/remote/container-no-shared/modules\","
      },
      {
        "sha": "3d384985ccb8b5a9a3ab52ff9937818435686714",
        "filename": "test/configCases/container/2-transitive-overriding/webpack.config.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-transitive-overriding%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F2-transitive-overriding%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F2-transitive-overriding%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -14,7 +14,10 @@ module.exports = {\n \t\t\t\t\t\"../1-transitive-overriding/container-no-shared.js\"\n \t\t\t},\n \t\t\tshared: {\n-\t\t\t\tshared: \"./shared\"\n+\t\t\t\t\"./shared\": {\n+\t\t\t\t\tshareKey: \"shared\",\n+\t\t\t\t\tversion: \"2\"\n+\t\t\t\t}\n \t\t\t}\n \t\t})\n \t]"
      },
      {
        "sha": "3544d07aa95bb2a575ae54879680258a6e2a1f69",
        "filename": "test/configCases/container/3-container-full/App.js",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2FApp.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2FApp.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F3-container-full%2FApp.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,6 @@\n+import React from \"react\";\n+import ComponentC from \"containerB/ComponentC\";\n+\n+export default () => {\n+\treturn `App rendered with [${React()}] and [${ComponentC()}]`;\n+};"
      },
      {
        "sha": "b1968f6631b14c3a673551797a438a0ec26e7881",
        "filename": "test/configCases/container/3-container-full/index.js",
        "status": "added",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F3-container-full%2Findex.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,15 @@\n+it(\"should load the component from container\", () => {\n+\treturn import(\"./App\").then(({ default: App }) => {\n+\t\tconst rendered = App();\n+\t\texpect(rendered).toBe(\n+\t\t\t\"App rendered with [This is react 2.1.0] and [ComponentC rendered with [This is react 2.1.0] and [ComponentA rendered with [This is react 2.1.0]] and [ComponentB rendered with [This is react 2.1.0]]]\"\n+\t\t);\n+\t\treturn import(\"./upgrade-react\").then(({ default: upgrade }) => {\n+\t\t\tupgrade();\n+\t\t\tconst rendered = App();\n+\t\t\texpect(rendered).toBe(\n+\t\t\t\t\"App rendered with [This is react 9] and [ComponentC rendered with [This is react 9] and [ComponentA rendered with [This is react 9]] and [ComponentB rendered with [This is react 9]]]\"\n+\t\t\t);\n+\t\t});\n+\t});\n+});"
      },
      {
        "sha": "ab65e86c7fe636cfe05e300661cde0292ef38aaa",
        "filename": "test/configCases/container/3-container-full/node_modules/react.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fnode_modules%2Freact.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fnode_modules%2Freact.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fnode_modules%2Freact.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,3 @@\n+let version = \"8\";\n+export default () => `This is react ${version}`;\n+export function setVersion(v) { version = v; }"
      },
      {
        "sha": "083ef3a4541740cb0e878471e3cb00049b586b3b",
        "filename": "test/configCases/container/3-container-full/upgrade-react.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fupgrade-react.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fupgrade-react.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fupgrade-react.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,5 @@\n+import { setVersion } from \"react\";\n+\n+export default function upgrade() {\n+\tsetVersion(\"9\");\n+}"
      },
      {
        "sha": "55cee80a31430d049f0ca8d82786cfae8157865b",
        "filename": "test/configCases/container/3-container-full/warnings.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fwarnings.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fwarnings.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fwarnings.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = [\n+\t[/No version specified and unable to automatically determine one/]\n+];"
      },
      {
        "sha": "e38e0c6dd5ba822fe92aa67a15296684caf21e1b",
        "filename": "test/configCases/container/3-container-full/webpack.config.js",
        "status": "added",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2F3-container-full%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,16 @@\n+const { ModuleFederationPlugin } = require(\"../../../../\").container;\n+\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\tplugins: [\n+\t\tnew ModuleFederationPlugin({\n+\t\t\tremoteType: \"commonjs-module\",\n+\t\t\tremotes: {\n+\t\t\t\tcontainerB: \"../1-container-full/container.js\"\n+\t\t\t},\n+\t\t\tshared: {\n+\t\t\t\treact: \"^2.0.1\"\n+\t\t\t}\n+\t\t})\n+\t]\n+};"
      },
      {
        "sha": "74404c130e7159d92bd2e11d0724de2d53922393",
        "filename": "test/configCases/container/container-entry-overridables/index.js",
        "status": "modified",
        "additions": 13,
        "deletions": 11,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-entry-overridables%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-entry-overridables%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Fcontainer-entry-overridables%2Findex.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,17 +1,19 @@\n it(\"should expose modules from the container\", async () => {\n \tconst container = __non_webpack_require__(\"./container-file.js\");\n \texpect(container).toBeTypeOf(\"object\");\n-\texpect(container.override).toBeTypeOf(\"function\");\n-\tcontainer.override({\n-\t\tvalue: () =>\n-\t\t\tnew Promise(resolve => {\n-\t\t\t\tsetTimeout(() => {\n-\t\t\t\t\tresolve(() => ({\n-\t\t\t\t\t\t__esModule: true,\n-\t\t\t\t\t\tdefault: \"overriden-value\"\n-\t\t\t\t\t}));\n-\t\t\t\t}, 100);\n-\t\t\t})\n+\texpect(container.init).toBeTypeOf(\"function\");\n+\tcontainer.init({\n+\t\tvalue: {\n+\t\t\tget: () =>\n+\t\t\t\tnew Promise(resolve => {\n+\t\t\t\t\tsetTimeout(() => {\n+\t\t\t\t\t\tresolve(() => ({\n+\t\t\t\t\t\t\t__esModule: true,\n+\t\t\t\t\t\t\tdefault: \"overriden-value\"\n+\t\t\t\t\t\t}));\n+\t\t\t\t\t}, 100);\n+\t\t\t\t})\n+\t\t}\n \t});\n \tconst testFactory = await container.get(\"./test\");\n \texpect(testFactory).toBeTypeOf(\"function\");"
      },
      {
        "sha": "770f5f4deac4ce643ac481d25c37f0f157474272",
        "filename": "test/configCases/container/container-entry-overridables/webpack.config.js",
        "status": "modified",
        "additions": 8,
        "deletions": 3,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-entry-overridables%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-entry-overridables%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Fcontainer-entry-overridables%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,4 +1,5 @@\n const { ContainerPlugin } = require(\"../../../../\").container;\n+const { ConsumeSharedPlugin } = require(\"../../../../\").sharing;\n \n /** @type {import(\"../../../../\").Configuration} */\n module.exports = {\n@@ -11,9 +12,13 @@ module.exports = {\n \t\t\t},\n \t\t\texposes: {\n \t\t\t\t\"./test\": \"./test\"\n-\t\t\t},\n-\t\t\toverridables: {\n-\t\t\t\tvalue: \"./value\"\n+\t\t\t}\n+\t\t}),\n+\t\tnew ConsumeSharedPlugin({\n+\t\t\tconsumes: {\n+\t\t\t\t\"./value\": {\n+\t\t\t\t\tshareKey: \"value\"\n+\t\t\t\t}\n \t\t\t}\n \t\t})\n \t]"
      },
      {
        "sha": "3cf3450ed4ce31e016729d3ace0572816366a4cb",
        "filename": "test/configCases/container/container-reference-override/test.config.js",
        "status": "modified",
        "additions": 4,
        "deletions": 6,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-reference-override%2Ftest.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-reference-override%2Ftest.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Fcontainer-reference-override%2Ftest.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,18 +1,16 @@\n module.exports = {\n \tmoduleScope(scope) {\n-\t\tconst o = {\n-\t\t\ttest: () => () => x => `wrong ${x}`\n-\t\t};\n+\t\tlet ss;\n \t\tscope.ABC = {\n \t\t\tasync get(module) {\n-\t\t\t\tconst testFactory = await o[\"test\"]();\n+\t\t\t\tconst testFactory = await ss.test.get();\n \t\t\t\tconst test = testFactory();\n \t\t\t\treturn () => {\n \t\t\t\t\treturn test(module);\n \t\t\t\t};\n \t\t\t},\n-\t\t\toverride(overrides) {\n-\t\t\t\tObject.assign(o, overrides);\n+\t\t\tasync init(shareScope) {\n+\t\t\t\tss = shareScope;\n \t\t\t}\n \t\t};\n \t}"
      },
      {
        "sha": "25ccfa1f5196fcb18ddabbbab575afc9d66f76b3",
        "filename": "test/configCases/container/container-reference-override/webpack.config.js",
        "status": "modified",
        "additions": 7,
        "deletions": 3,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-reference-override%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fcontainer-reference-override%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Fcontainer-reference-override%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,4 +1,5 @@\n const { ContainerReferencePlugin } = require(\"../../../../\").container;\n+const { ProvideSharedPlugin } = require(\"../../../../\").sharing;\n \n /** @type {import(\"../../../../\").Configuration} */\n module.exports = {\n@@ -7,10 +8,13 @@ module.exports = {\n \t\t\tremoteType: \"var\",\n \t\t\tremotes: {\n \t\t\t\tabc: \"ABC\"\n-\t\t\t},\n-\t\t\toverrides: {\n+\t\t\t}\n+\t\t}),\n+\t\tnew ProvideSharedPlugin({\n+\t\t\tprovides: {\n \t\t\t\ttest: {\n-\t\t\t\t\timport: \"./new-test\"\n+\t\t\t\t\timport: \"./new-test\",\n+\t\t\t\t\tversion: false\n \t\t\t\t}\n \t\t\t}\n \t\t})"
      },
      {
        "sha": "a3a080b43cccdbe47434ec1c3ff8b3ed66ccb55b",
        "filename": "test/configCases/container/error-handling/index.js",
        "status": "modified",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Ferror-handling%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Ferror-handling%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Ferror-handling%2Findex.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -1,5 +1,34 @@\n \"use strict\";\n \n+let warnings = [];\n+let oldWarn;\n+\n+beforeEach(done => {\n+\toldWarn = console.warn;\n+\tconsole.warn = m => warnings.push(m);\n+\tdone();\n+});\n+\n+afterEach(done => {\n+\texpectWarning();\n+\tconsole.warn = oldWarn;\n+\tdone();\n+});\n+\n+const expectWarning = regexp => {\n+\tif (!regexp) {\n+\t\texpect(warnings).toEqual([]);\n+\t} else {\n+\t\texpect(warnings).toEqual(\n+\t\t\texpect.objectContaining({\n+\t\t\t\t0: expect.stringMatching(regexp),\n+\t\t\t\tlength: 1\n+\t\t\t})\n+\t\t);\n+\t}\n+\twarnings.length = 0;\n+};\n+\n it(\"should allow to handle remote loading error with import()\", async () => {\n \tawait expect(import(\"./loading-error\")).rejects.toEqual(\n \t\texpect.objectContaining({\n@@ -33,6 +62,8 @@ it(\"should allow to handle invalid remote module error with import()\", async ()\n \t\t\t\t'Module \"./invalid\" does not exist in container.\\nwhile loading \"./invalid\" from webpack/container/reference/remote'\n \t\t})\n \t);\n+\t// at this point sharing initialization runs and triggers a warning that 'invalid' remote can't be loaded\n+\texpectWarning(/ENOENT/);\n });\n \n it(\"should allow to handle invalid remote module error with require\", async () => {"
      },
      {
        "sha": "a1069cc8a846d154ca8e62d832332580becc7191",
        "filename": "test/configCases/container/exposed-overridables/node_modules/package.json",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fexposed-overridables%2Fnode_modules%2Fpackage.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fexposed-overridables%2Fnode_modules%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Fexposed-overridables%2Fnode_modules%2Fpackage.json?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"name\": \"react\",\n+  \"version\": \"1.0.0\"\n+}"
      },
      {
        "sha": "525c2710ba000a3149735d796032ed387964531e",
        "filename": "test/configCases/container/exposed-overridables/webpack.config.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fexposed-overridables%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c/test%2FconfigCases%2Fcontainer%2Fexposed-overridables%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Fexposed-overridables%2Fwebpack.config.js?ref=1879e46e0458fb1a0e1527eb3aa7e5ba35b9855c",
        "patch": "@@ -9,7 +9,11 @@ module.exports = {\n \t\t\texposes: {\n \t\t\t\t\"./Button\": \"./Button\"\n \t\t\t},\n-\t\t\tshared: [\"react\"]\n+\t\t\tshared: {\n+\t\t\t\treact: {\n+\t\t\t\t\teager: true\n+\t\t\t\t}\n+\t\t\t}\n \t\t})\n \t]\n };"
      },
      {
        "sha": "d7affb01481a2fa983cc4ec15c49917f29fd8339",
        "filename": "test/configCases/container/overridables/cjs/test1.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest1.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"original1-cjs\";"
      },
      {
        "sha": "b303a87dbca847ac416917a1285ba608ded50898",
        "filename": "test/configCases/container/overridables/cjs/test2.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest2.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"original2-cjs\";"
      },
      {
        "sha": "c0a9caf9240a6dddc3624fcaed5bbb9cff09b2a3",
        "filename": "test/configCases/container/overridables/cjs/test3.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fcjs%2Ftest3.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"original3-cjs\";"
      },
      {
        "sha": "1c19816e8551595e9b231e83020fa68f0ae46193",
        "filename": "test/configCases/container/overridables/index.js",
        "status": "removed",
        "additions": 0,
        "deletions": 86,
        "changes": 86,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Findex.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,86 +0,0 @@\n-__webpack_override__({\n-\ttest1: () =>\n-\t\tnew Promise(resolve => {\n-\t\t\tsetTimeout(() => {\n-\t\t\t\tresolve(() => ({\n-\t\t\t\t\t__esModule: true,\n-\t\t\t\t\tdefault: \"overriden1\"\n-\t\t\t\t}));\n-\t\t\t}, 100);\n-\t\t}),\n-\ttest3: () => () => \"overriden3\",\n-\tpackage: () =>\n-\t\tnew Promise(resolve => {\n-\t\t\tsetTimeout(() => {\n-\t\t\t\tresolve(() => \"overriden-package\");\n-\t\t\t}, 100);\n-\t\t}),\n-\t\"././options/test1\": () => () => \"1\",\n-\t\"nested1/options/test2\": () => () => \"2\",\n-\t\"nested2/deep/deep\": () => () => \"3\"\n-});\n-\n-it(\"should be able to override a esm overridable\", () => {\n-\treturn import(\"./modules/test1\").then(m => {\n-\t\texpect(m.default).toBe(\"overriden1\");\n-\t});\n-});\n-\n-it(\"should be able to not override a esm overridable\", () => {\n-\treturn import(\"./modules/test2\").then(m => {\n-\t\texpect(m.default).toBe(\"original2\");\n-\t});\n-});\n-\n-import test3 from \"./modules/test3\";\n-it(\"should be able to use an overridable module in the initial chunk, but it's not overriden\", () => {\n-\texpect(test3).toBe(\"original3\");\n-});\n-\n-it(\"should be able to override a cjs overridable\", () => {\n-\treturn import(\"./cjs/test1\").then(m => {\n-\t\texpect(m.default).toBe(\"overriden1\");\n-\t});\n-});\n-\n-it(\"should be able to not override a cjs overridable\", () => {\n-\treturn import(\"./cjs/test2\").then(m => {\n-\t\texpect(m.default).toBe(\"original2-cjs\");\n-\t});\n-});\n-\n-it(\"should be able to use an overridable module in the initial chunk, and it's overriden\", () => {\n-\texpect(require(\"./cjs/test3\")).toBe(\"overriden3\");\n-});\n-\n-it(\"should be able to override with a package name shortcut\", () => {\n-\treturn import(\"package\").then(m => {\n-\t\texpect(m.default).toBe(\"overriden-package\");\n-\t});\n-});\n-\n-it(\"should be able to override a relative request via shortcut\", () => {\n-\treturn import(\"./options/test1\").then(m => {\n-\t\texpect(m.default).toBe(\"1\");\n-\t});\n-});\n-\n-it(\"should be able to override a nested relative request via shortcut\", () => {\n-\treturn import(\"./options/test2\").then(m => {\n-\t\texpect(m.default).toBe(\"2\");\n-\t});\n-});\n-\n-it(\"should be able to override a deep nested request\", () => {\n-\treturn import(\"./options/test3\").then(m => {\n-\t\texpect(m.default).toBe(\"3\");\n-\t});\n-});\n-\n-it(\"should be able to override when fallback module has multiple chunks\", () => {\n-\treturn import(\"./splitChunks\").then(m => {\n-\t\texpect(m.default).toBe(\n-\t\t\t\"index+app+vendor+shared+shared-separate+shared+shared-separate\"\n-\t\t);\n-\t});\n-});"
      },
      {
        "sha": "2b0140d12a1023c9bee2e60d10fb59f3d2e53d98",
        "filename": "test/configCases/container/overridables/modules/test1.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest1.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-export default \"original1\";"
      },
      {
        "sha": "a17b946d0213560e5ac7d0d8c4556b8f11664e9c",
        "filename": "test/configCases/container/overridables/modules/test2.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest2.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-export default \"original2\";"
      },
      {
        "sha": "c3cf429149e075deb0a5e117d575781925af68e5",
        "filename": "test/configCases/container/overridables/modules/test3.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fmodules%2Ftest3.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-export default \"original3\";"
      },
      {
        "sha": "c55183c026e649545f7a46c15b43d214c64dba57",
        "filename": "test/configCases/container/overridables/node_modules/package/index.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fnode_modules%2Fpackage%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fnode_modules%2Fpackage%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fnode_modules%2Fpackage%2Findex.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"original-package\";"
      },
      {
        "sha": "dd6228b1c99c9a1d98bfad6bf96733d5121b585b",
        "filename": "test/configCases/container/overridables/options/test3.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Foptions%2Ftest3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Foptions%2Ftest3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Foptions%2Ftest3.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"test3\";"
      },
      {
        "sha": "d41fa2d88c460d9c814255fa622d5c6fb321704b",
        "filename": "test/configCases/container/overridables/splitChunks/app.js",
        "status": "removed",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fapp.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fapp.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fapp.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,4 +0,0 @@\n-import vendor from \"./vendor\";\n-import shared from \"./shared\";\n-import shared2 from \"./shared-separate\";\n-export default \"app+\" + vendor + \"+\" + shared + \"+\" + shared2;"
      },
      {
        "sha": "daf4480b6bfa511ba466d5fb2d1c82d05bfb1570",
        "filename": "test/configCases/container/overridables/splitChunks/index.js",
        "status": "removed",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Findex.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,4 +0,0 @@\n-import app from \"./app\";\n-import shared from \"./shared\";\n-import shared2 from \"./shared-separate\";\n-export default \"index+\" + app + \"+\" + shared + \"+\" + shared2;"
      },
      {
        "sha": "d249522d24877f9c1c7e8f96c2f0c9c61abed144",
        "filename": "test/configCases/container/overridables/splitChunks/shared-separate.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fshared-separate.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fshared-separate.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fshared-separate.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-export default \"shared-separate\";"
      },
      {
        "sha": "0e28fd9d1f89fc89a862b9a17e2592594aefafbe",
        "filename": "test/configCases/container/overridables/splitChunks/shared.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fshared.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fshared.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fshared.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-export default \"shared\";"
      },
      {
        "sha": "b09808c5e417d1e7f38a4a407cb1497d24b2a4ed",
        "filename": "test/configCases/container/overridables/splitChunks/vendor.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fvendor.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fvendor.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2FsplitChunks%2Fvendor.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1 +0,0 @@\n-export default \"vendor\";"
      },
      {
        "sha": "9fcab6cc6ac0efad1f07ae7f9410f7071e9ee1f1",
        "filename": "test/configCases/container/overridables/webpack.config.js",
        "status": "removed",
        "additions": 0,
        "deletions": 45,
        "changes": 45,
        "blob_url": "https://github.com/webpack/webpack/blob/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9/test%2FconfigCases%2Fcontainer%2Foverridables%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fcontainer%2Foverridables%2Fwebpack.config.js?ref=28bb0c59c0d5a8d2d1192b4c19217f7ed59785f9",
        "patch": "@@ -1,45 +0,0 @@\n-const { OverridablesPlugin, scope } = require(\"../../../../\").container;\n-\n-/** @type {import(\"../../../../\").Configuration} */\n-module.exports = {\n-\tplugins: [\n-\t\tnew OverridablesPlugin({\n-\t\t\toverridables: [\n-\t\t\t\t{\n-\t\t\t\t\ttest1: [\"./modules/test1.js\", \"./cjs/test1\"],\n-\t\t\t\t\ttest2: \"./modules/test2\",\n-\t\t\t\t\ttest3: {\n-\t\t\t\t\t\timport: \"./modules/test3\"\n-\t\t\t\t\t}\n-\t\t\t\t},\n-\t\t\t\t{\n-\t\t\t\t\ttest2: \"./cjs/test2.js\",\n-\t\t\t\t\ttest3: \"./cjs/../cjs/test3.js\",\n-\t\t\t\t\t...scope(\"nested1\", [\"./options/test2\"]),\n-\t\t\t\t\t...scope(\"nested2\", {\n-\t\t\t\t\t\t...scope(\"deep\", {\n-\t\t\t\t\t\t\tdeep: \"./options/test3\"\n-\t\t\t\t\t\t})\n-\t\t\t\t\t})\n-\t\t\t\t},\n-\t\t\t\t\"package\",\n-\t\t\t\t\"././options/test1\",\n-\t\t\t\t\"./splitChunks/app\"\n-\t\t\t]\n-\t\t})\n-\t],\n-\toptimization: {\n-\t\tsplitChunks: {\n-\t\t\tcacheGroups: {\n-\t\t\t\tvendorTest: {\n-\t\t\t\t\ttest: /splitChunks.vendor/,\n-\t\t\t\t\tenforce: true\n-\t\t\t\t},\n-\t\t\t\tsharedTest: {\n-\t\t\t\t\ttest: /splitChunks.shared-separate/,\n-\t\t\t\t\tenforce: true\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14718",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14718/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14718/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14718/events",
    "html_url": "https://github.com/webpack/webpack/pull/14718",
    "id": 1051923770,
    "node_id": "PR_kwDOADgiC84udDtN",
    "number": 14718,
    "title": "fix regexp in managed paths",
    "user": {
      "login": "vankop",
      "id": 10380560,
      "node_id": "MDQ6VXNlcjEwMzgwNTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10380560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vankop",
      "html_url": "https://github.com/vankop",
      "followers_url": "https://api.github.com/users/vankop/followers",
      "following_url": "https://api.github.com/users/vankop/following{/other_user}",
      "gists_url": "https://api.github.com/users/vankop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vankop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vankop/subscriptions",
      "organizations_url": "https://api.github.com/users/vankop/orgs",
      "repos_url": "https://api.github.com/users/vankop/repos",
      "events_url": "https://api.github.com/users/vankop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vankop/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575748708,
        "node_id": "MDU6TGFiZWw1NzU3NDg3MDg=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-changes-requested",
        "name": "PR: reviewed-changes-requested",
        "color": "c2e0c6",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2021-11-12T12:33:32Z",
    "updated_at": "2021-11-12T13:42:11Z",
    "closed_at": "2021-11-12T13:42:07Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14718",
      "html_url": "https://github.com/webpack/webpack/pull/14718",
      "diff_url": "https://github.com/webpack/webpack/pull/14718.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14718.patch",
      "merged_at": "2021-11-12T13:42:07Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\n\r\nsmall fix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\n\r\nNo, it affects only performance\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14718/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "656425762f99401a3fc0bab25ff7fd9c87706425",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/adea157a9139079379ecbf420687b0fef4c2b7f7/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/adea157a9139079379ecbf420687b0fef4c2b7f7/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=adea157a9139079379ecbf420687b0fef4c2b7f7",
        "patch": "@@ -383,7 +383,7 @@ const applySnapshotDefaults = (snapshot, { production, futureDefaults }) => {\n \t\t\t\t\treturn [path.resolve(match[1], \"unplugged\")];\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\tconst match = /^(.+?[\\\\/]node_modules)[\\\\/]/.exec(\n+\t\t\t\tconst match = /^(.+?[\\\\/]node_modules[\\\\/])/.exec(\n \t\t\t\t\t// eslint-disable-next-line node/no-extraneous-require\n \t\t\t\t\trequire.resolve(\"watchpack\")\n \t\t\t\t);"
      },
      {
        "sha": "5ac990f4ad6a3628b0ef0326f69931e96dfc33e1",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/adea157a9139079379ecbf420687b0fef4c2b7f7/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/adea157a9139079379ecbf420687b0fef4c2b7f7/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=adea157a9139079379ecbf420687b0fef4c2b7f7",
        "patch": "@@ -598,7 +598,7 @@ describe(\"Defaults\", () => {\n \t\t    },\n \t\t    \"immutablePaths\": Array [],\n \t\t    \"managedPaths\": Array [\n-\t\t      \"<cwd>/node_modules\",\n+\t\t      \"<cwd>/node_modules/\",\n \t\t    ],\n \t\t    \"module\": Object {\n \t\t      \"timestamp\": true,\n@@ -1951,7 +1951,7 @@ describe(\"Defaults\", () => {\n \t\t\t-     \"hashFunction\": \"md4\",\n \t\t\t+     \"hashFunction\": \"xxhash64\",\n \t\t\t@@ ... @@\n-\t\t\t-       \"<cwd>/node_modules\",\n+\t\t\t-       \"<cwd>/node_modules/\",\n \t\t\t+       /^(.+?[\\\\\\\\/]node_modules[\\\\\\\\/])/,\n \t\t`)\n \t);"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13710",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13710/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13710/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13710/events",
    "html_url": "https://github.com/webpack/webpack/pull/13710",
    "id": 936952538,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjgzNTgzNTIw",
    "number": 13710,
    "title": "fix CI performance issues",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-07-05T10:37:38Z",
    "updated_at": "2021-07-05T14:04:34Z",
    "closed_at": "2021-07-05T14:04:34Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13710",
      "html_url": "https://github.com/webpack/webpack/pull/13710",
      "diff_url": "https://github.com/webpack/webpack/pull/13710.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13710.patch",
      "merged_at": "2021-07-05T14:04:34Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nCI\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13710/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13710/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "09c8780f9d30757403bbdd2b3456e3da4aee3af1",
        "filename": "test/Errors.test.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/54f40f44e6656961afe48fe57cbca3b27a3038d0/test%2FErrors.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/54f40f44e6656961afe48fe57cbca3b27a3038d0/test%2FErrors.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FErrors.test.js?ref=54f40f44e6656961afe48fe57cbca3b27a3038d0",
        "patch": "@@ -129,6 +129,12 @@ async function compile(options) {\n \treturn { errors, warnings };\n }\n \n+it(\"should compile fine (warmup)\", async () => {\n+\tawait compile({\n+\t\tentry: \"./entry-point\"\n+\t});\n+}, 120000);\n+\n it(\"should emit warning for missingFile\", async () => {\n \tawait expect(\n \t\tcompile({"
      },
      {
        "sha": "0b59186bd5b2b3662ddb2cd8b86bd0df5d94eb16",
        "filename": "test/PersistentCaching.test.js",
        "status": "modified",
        "additions": 39,
        "deletions": 20,
        "changes": 59,
        "blob_url": "https://github.com/webpack/webpack/blob/54f40f44e6656961afe48fe57cbca3b27a3038d0/test%2FPersistentCaching.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/54f40f44e6656961afe48fe57cbca3b27a3038d0/test%2FPersistentCaching.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FPersistentCaching.test.js?ref=54f40f44e6656961afe48fe57cbca3b27a3038d0",
        "patch": "@@ -52,12 +52,19 @@ describe(\"Persistent Caching\", () => {\n \n \tconst compile = async (configAdditions = {}) => {\n \t\treturn new Promise((resolve, reject) => {\n-\t\t\twebpack({ ...config, ...configAdditions }, (err, stats) => {\n-\t\t\t\tif (err) return reject(err);\n-\t\t\t\tif (stats.hasErrors())\n-\t\t\t\t\treturn reject(stats.toString({ preset: \"errors-only\" }));\n-\t\t\t\tresolve(stats);\n-\t\t\t});\n+\t\t\twebpack(\n+\t\t\t\t{\n+\t\t\t\t\t...config,\n+\t\t\t\t\t...configAdditions,\n+\t\t\t\t\tcache: { ...config.cache, ...configAdditions.cache }\n+\t\t\t\t},\n+\t\t\t\t(err, stats) => {\n+\t\t\t\t\tif (err) return reject(err);\n+\t\t\t\t\tif (stats.hasErrors())\n+\t\t\t\t\t\treturn reject(stats.toString({ preset: \"errors-only\" }));\n+\t\t\t\t\tresolve(stats);\n+\t\t\t\t}\n+\t\t\t);\n \t\t});\n \t};\n \n@@ -84,6 +91,18 @@ describe(\"Persistent Caching\", () => {\n \t\treturn require(\"./main\");\n \t};\n \n+\tit(\"should compile fine (warmup)\", async () => {\n+\t\tconst data = {\n+\t\t\t\"index.js\": `import file from \"./file.js\";\n+export default 40 + file;\n+`,\n+\t\t\t\"file.js\": \"export default 2;\"\n+\t\t};\n+\t\tawait updateSrc(data);\n+\t\tawait compile();\n+\t\texpect(execute()).toBe(42);\n+\t}, 100000);\n+\n \tit(\"should merge multiple small files\", async () => {\n \t\tconst files = Array.from({ length: 30 }).map((_, i) => `file${i}.js`);\n \t\tconst data = {\n@@ -98,19 +117,19 @@ export default ${files.map((_, i) => `f${i}`).join(\" + \")};\n \t\t\tdata[file] = `export default 1;`;\n \t\t}\n \t\tawait updateSrc(data);\n-\t\tawait compile();\n+\t\tawait compile({ cache: { compression: false } });\n \t\texpect(execute()).toBe(30);\n \t\tfor (let i = 0; i < 30; i++) {\n \t\t\tupdateSrc({\n \t\t\t\t[files[i]]: `export default 2;`\n \t\t\t});\n-\t\t\tawait compile();\n+\t\t\tawait compile({ cache: { compression: false } });\n \t\t\texpect(execute()).toBe(31 + i);\n \t\t}\n \t\tconst cacheFiles = await readdir(cachePath);\n \t\texpect(cacheFiles.length).toBeLessThan(20);\n \t\texpect(cacheFiles.length).toBeGreaterThan(10);\n-\t}, 60000);\n+\t}, 120000);\n \n \tit(\"should optimize unused content\", async () => {\n \t\tconst data = {\n@@ -120,21 +139,21 @@ export default ${files.map((_, i) => `f${i}`).join(\" + \")};\n \t\t\t\"d.js\": 'import \"date-fns\";',\n \t\t\t\"e.js\": 'import \"lodash\";'\n \t\t};\n-\t\tconst createEntry = items => {\n+\t\tawait updateSrc(data);\n+\t\tconst c = items => {\n \t\t\tconst entry = {};\n \t\t\tfor (const item of items.split(\"\")) entry[item] = `./src/${item}.js`;\n-\t\t\treturn entry;\n+\t\t\treturn compile({ entry, cache: { compression: false } });\n \t\t};\n-\t\tawait updateSrc(data);\n-\t\tawait compile({ entry: createEntry(\"abcde\") });\n-\t\tawait compile({ entry: createEntry(\"abc\") });\n-\t\tawait compile({ entry: createEntry(\"cde\") });\n-\t\tawait compile({ entry: createEntry(\"acd\") });\n-\t\tawait compile({ entry: createEntry(\"bce\") });\n-\t\tawait compile({ entry: createEntry(\"abcde\") });\n+\t\tawait c(\"abcde\");\n+\t\tawait c(\"abc\");\n+\t\tawait c(\"cde\");\n+\t\tawait c(\"acd\");\n+\t\tawait c(\"bce\");\n+\t\tawait c(\"abcde\");\n \t\tconst cacheFiles = await readdir(cachePath);\n \t\texpect(cacheFiles.length).toBeGreaterThan(4);\n-\t}, 60000);\n+\t}, 120000);\n \n \tit(\"should allow persistent caching of container related objects\", async () => {\n \t\tconst data = {\n@@ -176,5 +195,5 @@ export default ${files.map((_, i) => `f${i}`).join(\" + \")};\n \t\t});\n \t\tawait compile(configAdditions);\n \t\tawait expect(execute()).resolves.toEqual({ ok: true });\n-\t}, 60000);\n+\t}, 120000);\n });"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13616",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13616/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13616/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13616/events",
    "html_url": "https://github.com/webpack/webpack/pull/13616",
    "id": 927294323,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njc1NDczNDY4",
    "number": 13616,
    "title": "improve test suite performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-06-22T14:25:43Z",
    "updated_at": "2021-06-23T07:03:34Z",
    "closed_at": "2021-06-23T07:03:33Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13616",
      "html_url": "https://github.com/webpack/webpack/pull/13616",
      "diff_url": "https://github.com/webpack/webpack/pull/13616.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13616.patch",
      "merged_at": "2021-06-23T07:03:33Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nci\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nn/a\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13616/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "fa27baeb7249ada82be659e5d8f54b0e1bf692d3",
        "filename": "test/ConfigCacheTestCases.test.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/6bb2808fc0d4067ad85f6dac4861d79e29fd8ae1/test%2FConfigCacheTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/6bb2808fc0d4067ad85f6dac4861d79e29fd8ae1/test%2FConfigCacheTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FConfigCacheTestCases.test.js?ref=6bb2808fc0d4067ad85f6dac4861d79e29fd8ae1",
        "patch": "@@ -4,7 +4,10 @@ const { describeCases } = require(\"./ConfigTestCases.template\");\n describeCases({\n \tname: \"ConfigCacheTestCases\",\n \tcache: {\n-\t\ttype: \"filesystem\"\n+\t\ttype: \"filesystem\",\n+\t\tbuildDependencies: {\n+\t\t\tdefaultWebpack: []\n+\t\t}\n \t},\n \tsnapshot: {\n \t\tmanagedPaths: [path.resolve(__dirname, \"../node_modules\")]"
      },
      {
        "sha": "a25219da6e42aa1c365231e6c9159a9d8f090efe",
        "filename": "test/TestCasesCachePack.test.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/6bb2808fc0d4067ad85f6dac4861d79e29fd8ae1/test%2FTestCasesCachePack.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/6bb2808fc0d4067ad85f6dac4861d79e29fd8ae1/test%2FTestCasesCachePack.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCasesCachePack.test.js?ref=6bb2808fc0d4067ad85f6dac4861d79e29fd8ae1",
        "patch": "@@ -5,7 +5,10 @@ describe(\"TestCases\", () => {\n \tdescribeCases({\n \t\tname: \"cache pack\",\n \t\tcache: {\n-\t\t\ttype: \"filesystem\"\n+\t\t\ttype: \"filesystem\",\n+\t\t\tbuildDependencies: {\n+\t\t\t\tdefaultWebpack: []\n+\t\t\t}\n \t\t},\n \t\tsnapshot: {\n \t\t\tmanagedPaths: [path.resolve(__dirname, \"../node_modules\")]"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13828",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13828/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13828/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13828/events",
    "html_url": "https://github.com/webpack/webpack/pull/13828",
    "id": 948558507,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjkzMzg0NDU1",
    "number": 13828,
    "title": "update webpack-sources for performance problem in hashing",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2021-07-20T11:23:31Z",
    "updated_at": "2021-07-20T13:10:38Z",
    "closed_at": "2021-07-20T13:04:51Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13828",
      "html_url": "https://github.com/webpack/webpack/pull/13828",
      "diff_url": "https://github.com/webpack/webpack/pull/13828.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13828.patch",
      "merged_at": "2021-07-20T13:04:51Z"
    },
    "body": "add `stats.reasonsSpace` and `stats.groupReasonsByOrigin` to control large set of reasons\r\n`detailed` preset limits all spaces to 1000 by default\r\n\r\nfixes #13825\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* add `stats.reasonsSpace` and `stats.groupReasonsByOrigin`\r\n* * `detailed` preset limits all spaces to 1000 by default\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13828/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "3520a2c16b46f0cc70ef131bc2f1c132a7e87f6f",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -2481,6 +2481,10 @@ export interface StatsOptions {\n \t * Group modules by their type.\n \t */\n \tgroupModulesByType?: boolean;\n+\t/**\n+\t * Group reasons by their origin module.\n+\t */\n+\tgroupReasonsByOrigin?: boolean;\n \t/**\n \t * Add the hash of the compilation.\n \t */\n@@ -2561,6 +2565,10 @@ export interface StatsOptions {\n \t * Add information about the reasons why modules are included.\n \t */\n \treasons?: boolean;\n+\t/**\n+\t * Space to display reasons (groups will be collapsed to fit this space).\n+\t */\n+\treasonsSpace?: number;\n \t/**\n \t * Add information about assets that are related to other assets (like SourceMaps for assets).\n \t */"
      },
      {
        "sha": "1adc8dc14719d05cb5a9d6c4c8dc06037c7be91c",
        "filename": "lib/stats/DefaultStatsFactoryPlugin.js",
        "status": "modified",
        "additions": 32,
        "deletions": 2,
        "changes": 34,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsFactoryPlugin.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -1182,11 +1182,14 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t\ttype,\n \t\t\t\tcompilation: { moduleGraph }\n \t\t\t} = context;\n-\t\t\tobject.reasons = factory.create(\n+\t\t\tconst groupsReasons = factory.create(\n \t\t\t\t`${type.slice(0, -8)}.reasons`,\n \t\t\t\tArray.from(moduleGraph.getIncomingConnections(module)),\n \t\t\t\tcontext\n \t\t\t);\n+\t\t\tconst limited = spaceLimited(groupsReasons, options.reasonsSpace);\n+\t\t\tobject.reasons = limited.children;\n+\t\t\tobject.filteredReasons = limited.filteredChildren;\n \t\t},\n \t\tusedExports: (\n \t\t\tobject,\n@@ -1764,6 +1767,16 @@ const moduleGroup = (children, modules) => {\n \t};\n };\n \n+const reasonGroup = (children, reasons) => {\n+\tlet active = false;\n+\tfor (const reason of children) {\n+\t\tactive = active || reason.active;\n+\t}\n+\treturn {\n+\t\tactive\n+\t};\n+};\n+\n /** @type {Record<string, (groupConfigs: GroupConfig[], context: StatsFactoryContext, options: NormalizedStatsOptions) => void>} */\n const ASSETS_GROUPERS = {\n \t_: (groupConfigs, context, options) => {\n@@ -2074,7 +2087,24 @@ const RESULT_GROUPERS = {\n \t\"compilation.modules\": MODULES_GROUPERS(\"module\"),\n \t\"chunk.modules\": MODULES_GROUPERS(\"chunk\"),\n \t\"chunk.rootModules\": MODULES_GROUPERS(\"root-of-chunk\"),\n-\t\"module.modules\": MODULES_GROUPERS(\"nested\")\n+\t\"module.modules\": MODULES_GROUPERS(\"nested\"),\n+\t\"module.reasons\": {\n+\t\tgroupReasonsByOrigin: groupConfigs => {\n+\t\t\tgroupConfigs.push({\n+\t\t\t\tgetKeys: reason => {\n+\t\t\t\t\treturn [reason.module];\n+\t\t\t\t},\n+\t\t\t\tcreateGroup: (key, children, reasons) => {\n+\t\t\t\t\treturn {\n+\t\t\t\t\t\ttype: \"from origin\",\n+\t\t\t\t\t\tmodule: key,\n+\t\t\t\t\t\tchildren,\n+\t\t\t\t\t\t...reasonGroup(children, reasons)\n+\t\t\t\t\t};\n+\t\t\t\t}\n+\t\t\t});\n+\t\t}\n+\t}\n };\n \n // remove a prefixed \"!\" that can be specified to reverse sort order"
      },
      {
        "sha": "017e7119eb8ac50fa44d2f51ed85d2db82759efe",
        "filename": "lib/stats/DefaultStatsPresetPlugin.js",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/lib%2Fstats%2FDefaultStatsPresetPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/lib%2Fstats%2FDefaultStatsPresetPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsPresetPlugin.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -50,6 +50,7 @@ const NAMED_PRESETS = {\n \t\tmodulesSpace: Infinity,\n \t\tchunkModulesSpace: Infinity,\n \t\tassetsSpace: Infinity,\n+\t\treasonsSpace: Infinity,\n \t\tchildren: true\n \t},\n \tdetailed: {\n@@ -72,8 +73,9 @@ const NAMED_PRESETS = {\n \t\tlogging: true,\n \t\truntimeModules: true,\n \t\texclude: false,\n-\t\tmodulesSpace: Infinity,\n-\t\tassetsSpace: Infinity\n+\t\tmodulesSpace: 1000,\n+\t\tassetsSpace: 1000,\n+\t\treasonsSpace: 1000\n \t},\n \tminimal: {\n \t\tall: false,\n@@ -194,6 +196,8 @@ const DEFAULTS = {\n \tdepth: OFF_FOR_TO_STRING,\n \tcachedAssets: OFF_FOR_TO_STRING,\n \treasons: OFF_FOR_TO_STRING,\n+\treasonsSpace: (o, { forToString }) => (forToString ? 15 : Infinity),\n+\tgroupReasonsByOrigin: ON_FOR_TO_STRING,\n \tusedExports: OFF_FOR_TO_STRING,\n \tprovidedExports: OFF_FOR_TO_STRING,\n \toptimizationBailout: OFF_FOR_TO_STRING,"
      },
      {
        "sha": "5e7dcd7541dc87ddbae2ab539f677dc301d0627e",
        "filename": "lib/stats/DefaultStatsPrinterPlugin.js",
        "status": "modified",
        "additions": 51,
        "deletions": 9,
        "changes": 60,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsPrinterPlugin.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -374,6 +374,10 @@ const SIMPLE_PRINTERS = {\n \t\t\t\t\t\"modules\"\n \t\t\t  )}`\n \t\t\t: undefined,\n+\t\"module.filteredReasons\": filteredReasons =>\n+\t\tfilteredReasons > 0\n+\t\t\t? `${filteredReasons} ${plural(filteredReasons, \"reason\", \"reasons\")}`\n+\t\t\t: undefined,\n \t\"module.filteredChildren\": filteredChildren =>\n \t\tfilteredChildren > 0\n \t\t\t? `${filteredChildren} ${plural(filteredChildren, \"module\", \"modules\")}`\n@@ -393,6 +397,10 @@ const SIMPLE_PRINTERS = {\n \t\"moduleReason.active\": (active, { formatFlag }) =>\n \t\tactive ? undefined : formatFlag(\"inactive\"),\n \t\"moduleReason.resolvedModule\": (module, { magenta }) => magenta(module),\n+\t\"moduleReason.filteredChildren\": filteredChildren =>\n+\t\tfilteredChildren > 0\n+\t\t\t? `${filteredChildren} ${plural(filteredChildren, \"reason\", \"reasons\")}`\n+\t\t\t: undefined,\n \n \t\"module.profile.total\": (value, { formatTime }) => formatTime(value),\n \t\"module.profile.resolving\": (value, { formatTime }) =>\n@@ -590,6 +598,7 @@ const ITEM_NAMES = {\n \t\"module.modules[]\": \"module\",\n \t\"module.children[]\": \"module\",\n \t\"module.reasons[]\": \"moduleReason\",\n+\t\"moduleReason.children[]\": \"moduleReason\",\n \t\"module.issuerPath[]\": \"moduleIssuer\",\n \t\"chunk.origins[]\": \"chunkOrigin\",\n \t\"chunk.modules[]\": \"module\",\n@@ -721,6 +730,7 @@ const PREFERRED_ORDERS = {\n \t\t\"usedExports\",\n \t\t\"optimizationBailout\",\n \t\t\"reasons\",\n+\t\t\"filteredReasons\",\n \t\t\"issuerPath\",\n \t\t\"profile\",\n \t\t\"modules\",\n@@ -734,7 +744,9 @@ const PREFERRED_ORDERS = {\n \t\t\"module\",\n \t\t\"resolvedModule\",\n \t\t\"loc\",\n-\t\t\"explanation\"\n+\t\t\"explanation\",\n+\t\t\"children\",\n+\t\t\"filteredChildren\"\n \t],\n \t\"module.profile\": [\n \t\t\"total\",\n@@ -1019,10 +1031,32 @@ const SIMPLE_ELEMENT_JOINERS = {\n \tchunkGroupAsset: joinOneLine,\n \tchunkGroupChildGroup: joinOneLine,\n \tchunkGroupChild: joinOneLine,\n+\t// moduleReason: (items, { moduleReason }) => {\n+\t// \tlet hasName = false;\n+\t// \treturn joinOneLine(\n+\t// \t\titems.filter(item => {\n+\t// \t\t\tswitch (item.element) {\n+\t// \t\t\t\tcase \"moduleId\":\n+\t// \t\t\t\t\tif (moduleReason.moduleId === moduleReason.module && item.content)\n+\t// \t\t\t\t\t\thasName = true;\n+\t// \t\t\t\t\tbreak;\n+\t// \t\t\t\tcase \"module\":\n+\t// \t\t\t\t\tif (hasName) return false;\n+\t// \t\t\t\t\tbreak;\n+\t// \t\t\t\tcase \"resolvedModule\":\n+\t// \t\t\t\t\treturn (\n+\t// \t\t\t\t\t\tmoduleReason.module !== moduleReason.resolvedModule &&\n+\t// \t\t\t\t\t\titem.content\n+\t// \t\t\t\t\t);\n+\t// \t\t\t}\n+\t// \t\t\treturn true;\n+\t// \t\t})\n+\t// \t);\n+\t// },\n \tmoduleReason: (items, { moduleReason }) => {\n \t\tlet hasName = false;\n-\t\treturn joinOneLine(\n-\t\t\titems.filter(item => {\n+\t\treturn joinExplicitNewLine(\n+\t\t\titems.map(item => {\n \t\t\t\tswitch (item.element) {\n \t\t\t\t\tcase \"moduleId\":\n \t\t\t\t\t\tif (moduleReason.moduleId === moduleReason.module && item.content)\n@@ -1032,13 +1066,21 @@ const SIMPLE_ELEMENT_JOINERS = {\n \t\t\t\t\t\tif (hasName) return false;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"resolvedModule\":\n-\t\t\t\t\t\treturn (\n-\t\t\t\t\t\t\tmoduleReason.module !== moduleReason.resolvedModule &&\n-\t\t\t\t\t\t\titem.content\n-\t\t\t\t\t\t);\n+\t\t\t\t\t\tif (moduleReason.module === moduleReason.resolvedModule)\n+\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase \"children\":\n+\t\t\t\t\t\tif (item.content) {\n+\t\t\t\t\t\t\treturn {\n+\t\t\t\t\t\t\t\t...item,\n+\t\t\t\t\t\t\t\tcontent: `\\n${item.content}\\n`\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tbreak;\n \t\t\t\t}\n-\t\t\t\treturn true;\n-\t\t\t})\n+\t\t\t\treturn item;\n+\t\t\t}),\n+\t\t\t\"  \"\n \t\t);\n \t},\n \t\"module.profile\": joinInBrackets,"
      },
      {
        "sha": "b6fe03391a075f78da5158b2bdbdb5f67d5ddbed",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -27,7 +27,7 @@\n     \"tapable\": \"^2.1.1\",\n     \"terser-webpack-plugin\": \"^5.1.3\",\n     \"watchpack\": \"^2.2.0\",\n-    \"webpack-sources\": \"^2.3.0\"\n+    \"webpack-sources\": \"^2.3.1\"\n   },\n   \"peerDependenciesMeta\": {\n     \"webpack-cli\": {"
      },
      {
        "sha": "b0c0dcde2152a19fcb7f283bbd9f7a6ba5992d92",
        "filename": "schemas/WebpackOptions.check.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/schemas%2FWebpackOptions.check.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/schemas%2FWebpackOptions.check.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.check.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2"
      },
      {
        "sha": "95a84a8dbb2b40273388748aebd1728abfe0f3cb",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -4210,6 +4210,10 @@\n           \"description\": \"Group modules by their type.\",\n           \"type\": \"boolean\"\n         },\n+        \"groupReasonsByOrigin\": {\n+          \"description\": \"Group reasons by their origin module.\",\n+          \"type\": \"boolean\"\n+        },\n         \"hash\": {\n           \"description\": \"Add the hash of the compilation.\",\n           \"type\": \"boolean\"\n@@ -4314,6 +4318,10 @@\n           \"description\": \"Add information about the reasons why modules are included.\",\n           \"type\": \"boolean\"\n         },\n+        \"reasonsSpace\": {\n+          \"description\": \"Space to display reasons (groups will be collapsed to fit this space).\",\n+          \"type\": \"number\"\n+        },\n         \"relatedAssets\": {\n           \"description\": \"Add information about assets that are related to other assets (like SourceMaps for assets).\",\n           \"type\": \"boolean\""
      },
      {
        "sha": "a7b3ffe2147ed4a9d44ef6934ee276deda380e9f",
        "filename": "test/TestCases.template.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2FTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2FTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCases.template.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -252,7 +252,8 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\t\t\tconst statOptions = {\n \t\t\t\t\t\t\t\t\t\t\t\t\tpreset: \"verbose\",\n \t\t\t\t\t\t\t\t\t\t\t\t\tcolors: false,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tmodules: true\n+\t\t\t\t\t\t\t\t\t\t\t\t\tmodules: true,\n+\t\t\t\t\t\t\t\t\t\t\t\t\treasonsSpace: 1000\n \t\t\t\t\t\t\t\t\t\t\t\t};\n \t\t\t\t\t\t\t\t\t\t\t\tfs.mkdirSync(outputDirectory, { recursive: true });\n \t\t\t\t\t\t\t\t\t\t\t\tfs.writeFileSync("
      },
      {
        "sha": "18644eb5a354014be481f0a076bd7b78a766bf30",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -7753,6 +7753,19 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"stats-group-reasons-by-origin\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Group reasons by their origin module.\",\n+        \"multiple\": false,\n+        \"path\": \"stats.groupReasonsByOrigin\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Group reasons by their origin module.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"stats-hash\": Object {\n     \"configs\": Array [\n       Object {\n@@ -8058,6 +8071,19 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"stats-reasons-space\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Space to display reasons (groups will be collapsed to fit this space).\",\n+        \"multiple\": false,\n+        \"path\": \"stats.reasonsSpace\",\n+        \"type\": \"number\",\n+      },\n+    ],\n+    \"description\": \"Space to display reasons (groups will be collapsed to fit this space).\",\n+    \"multiple\": false,\n+    \"simpleType\": \"number\",\n+  },\n   \"stats-related-assets\": Object {\n     \"configs\": Array [\n       Object {"
      },
      {
        "sha": "b0506df5245d403fd5662bb3ed8d9d8e513feeab",
        "filename": "test/__snapshots__/StatsTestCases.basictest.js.snap",
        "status": "modified",
        "additions": 44,
        "deletions": 31,
        "changes": 75,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -3099,35 +3099,42 @@ cacheable modules 823 bytes\n           [inactive] harmony export imported specifier ./CompC ./components/src/index.js 2:0-43\n       ./components/src/index.js 84 bytes [orphan] [built]\n         [module unused]\n-        [inactive] harmony side effect evaluation ./components ./foo.js 1:0-37\n-        [inactive] harmony import specifier ./components ./foo.js 3:20-25\n-        [inactive] harmony side effect evaluation ./components ./main.js + 1 modules ./main.js 1:0-44\n-        [inactive] harmony import specifier ./components ./main.js + 1 modules ./main.js 3:15-20\n-        [inactive] harmony import specifier ./components ./main.js + 1 modules ./main.js 4:15-20\n+        [inactive] from origin ./main.js + 1 modules\n+          [inactive] harmony side effect evaluation ./components ./main.js + 1 modules ./main.js 1:0-44\n+          [inactive] harmony import specifier ./components ./main.js + 1 modules ./main.js 3:15-20\n+          [inactive] harmony import specifier ./components ./main.js + 1 modules ./main.js 4:15-20\n+        [inactive] from origin ./foo.js\n+          [inactive] harmony side effect evaluation ./components ./foo.js 1:0-37\n+          [inactive] harmony import specifier ./components ./foo.js 3:20-25\n     code generated modules 186 bytes [code generated]\n       ./components/src/CompAB/CompA.js 89 bytes [built] [code generated]\n         [only some exports used: default]\n-        [inactive] harmony side effect evaluation ./CompA ./components/src/CompAB/index.js 1:0-43\n-        [inactive] harmony export imported specifier ./CompA ./components/src/CompAB/index.js 1:0-43\n+        [inactive] from origin ./components/src/CompAB/index.js\n+          [inactive] harmony side effect evaluation ./CompA ./components/src/CompAB/index.js 1:0-43\n+          [inactive] harmony export imported specifier ./CompA ./components/src/CompAB/index.js 1:0-43\n         [inactive] harmony export imported specifier ./CompAB ./components/src/index.js 1:0-40 (skipped side-effect-free modules)\n         harmony import specifier ./components ./foo.js 3:20-25 (skipped side-effect-free modules)\n         harmony import specifier ./components ./main.js + 1 modules ./main.js 3:15-20 (skipped side-effect-free modules)\n       ./components/src/CompAB/utils.js 97 bytes [built] [code generated]\n-        [inactive] harmony side effect evaluation ./utils ./components/src/CompAB/CompA.js 1:0-35\n-        harmony import specifier ./utils ./components/src/CompAB/CompA.js 5:5-12\n-        [inactive] harmony side effect evaluation ./utils ./components/src/CompAB/CompB.js 1:0-30\n-        harmony import specifier ./utils ./components/src/CompAB/CompB.js 5:2-5\n-        [inactive] harmony side effect evaluation ./utils ./main.js + 1 modules ./components/src/CompAB/CompB.js 1:0-30\n-        harmony import specifier ./utils ./main.js + 1 modules ./components/src/CompAB/CompB.js 5:2-5\n+        from origin ./components/src/CompAB/CompA.js\n+          [inactive] harmony side effect evaluation ./utils ./components/src/CompAB/CompA.js 1:0-35\n+          harmony import specifier ./utils ./components/src/CompAB/CompA.js 5:5-12\n+        from origin ./components/src/CompAB/CompB.js\n+          [inactive] harmony side effect evaluation ./utils ./components/src/CompAB/CompB.js 1:0-30\n+          harmony import specifier ./utils ./components/src/CompAB/CompB.js 5:2-5\n+        from origin ./main.js + 1 modules\n+          [inactive] harmony side effect evaluation ./utils ./main.js + 1 modules ./components/src/CompAB/CompB.js 1:0-30\n+          harmony import specifier ./utils ./main.js + 1 modules ./components/src/CompAB/CompB.js 5:2-5\n   ./main.js + 1 modules 221 bytes [built] [code generated]\n     [no exports used]\n     entry ./main.js main\n     | ./main.js 144 bytes [built]\n     |   [no exports used]\n     | ./components/src/CompAB/CompB.js 77 bytes [built]\n     |   [only some exports used: default]\n-    |   [inactive] harmony side effect evaluation ./CompB ./components/src/CompAB/index.js 2:0-43\n-    |   [inactive] harmony export imported specifier ./CompB ./components/src/CompAB/index.js 2:0-43\n+    |   [inactive] from origin ./components/src/CompAB/index.js\n+    |     [inactive] harmony side effect evaluation ./CompB ./components/src/CompAB/index.js 2:0-43\n+    |     [inactive] harmony export imported specifier ./CompB ./components/src/CompAB/index.js 2:0-43\n     |   [inactive] harmony export imported specifier ./CompAB ./components/src/index.js 1:0-40 (skipped side-effect-free modules)\n     |   harmony import specifier ./components ./main.js 4:15-20 (skipped side-effect-free modules)\n   ./foo.js 101 bytes [built] [code generated]\n@@ -3201,9 +3208,10 @@ exports[`StatsTestCases should print correct stats for side-effects-simple-unuse\n   |   [inactive] harmony import specifier pmodule ./index.js 3:17-18\n   | ./node_modules/pmodule/c.js 28 bytes [built]\n   |   [only some exports used: z]\n+  |   [inactive] from origin ./node_modules/pmodule/b.js\n+  |     [inactive] harmony side effect evaluation ./c ./node_modules/pmodule/b.js 5:0-24\n+  |     [inactive] harmony export imported specifier ./c ./node_modules/pmodule/b.js 5:0-24\n   |   harmony import specifier pmodule ./index.js 3:17-18 (skipped side-effect-free modules)\n-  |   [inactive] harmony side effect evaluation ./c ./node_modules/pmodule/b.js 5:0-24\n-  |   [inactive] harmony export imported specifier ./c ./node_modules/pmodule/b.js 5:0-24\n   |   [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30 (skipped side-effect-free modules)\n ./node_modules/pmodule/index.js 75 bytes [orphan] [built]\n   [only some exports used: default]\n@@ -3212,26 +3220,31 @@ exports[`StatsTestCases should print correct stats for side-effects-simple-unuse\n   [inactive] harmony import specifier pmodule ./index.js 3:17-18\n ./node_modules/pmodule/c.js 28 bytes [orphan] [built]\n   [only some exports used: z]\n+  [inactive] from origin ./node_modules/pmodule/b.js\n+    [inactive] harmony side effect evaluation ./c ./node_modules/pmodule/b.js 5:0-24\n+    [inactive] harmony export imported specifier ./c ./node_modules/pmodule/b.js 5:0-24\n   harmony import specifier pmodule ./index.js 3:17-18 (skipped side-effect-free modules)\n-  [inactive] harmony side effect evaluation ./c ./node_modules/pmodule/b.js 5:0-24\n-  [inactive] harmony export imported specifier ./c ./node_modules/pmodule/b.js 5:0-24\n   [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30 (skipped side-effect-free modules)\n ./node_modules/pmodule/a.js 60 bytes [orphan] [built]\n   [module unused]\n-  [inactive] harmony side effect evaluation ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n-  [inactive] harmony export imported specifier ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n-  [inactive] harmony side effect evaluation ./a ./node_modules/pmodule/index.js 1:0-20\n-  [inactive] harmony export imported specifier ./a ./node_modules/pmodule/index.js 1:0-20\n+  [inactive] from origin ./index.js + 2 modules\n+    [inactive] harmony side effect evaluation ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n+    [inactive] harmony export imported specifier ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n+  [inactive] from origin ./node_modules/pmodule/index.js\n+    [inactive] harmony side effect evaluation ./a ./node_modules/pmodule/index.js 1:0-20\n+    [inactive] harmony export imported specifier ./a ./node_modules/pmodule/index.js 1:0-20\n ./node_modules/pmodule/b.js 69 bytes [orphan] [built]\n   [module unused]\n-  [inactive] harmony side effect evaluation ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n-  [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n-  [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n-  [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n-  [inactive] harmony side effect evaluation ./b ./node_modules/pmodule/index.js 2:0-30\n-  [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30\n-  [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30\n-  [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30\n+  [inactive] from origin ./index.js + 2 modules\n+    [inactive] harmony side effect evaluation ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n+  [inactive] from origin ./node_modules/pmodule/index.js\n+    [inactive] harmony side effect evaluation ./b ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30\n webpack x.x.x compiled successfully in X ms\"\n `;\n "
      },
      {
        "sha": "341649ed4076393da4d34b80c4464e9bb268cb2a",
        "filename": "test/cases/large/many-replacements/generate-many-replacements-loader.js",
        "status": "added",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Fgenerate-many-replacements-loader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Fgenerate-many-replacements-loader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fmany-replacements%2Fgenerate-many-replacements-loader.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -0,0 +1,8 @@\n+/** @type {import(\"../../../../\").RawLoaderDefinition<{ count: string }>} */\n+module.exports = function () {\n+\tconst options = this.getOptions();\n+\treturn `import thing from \"./module\";\n+export default [${Array.from({ length: +options.count }, () => \"thing\").join(\n+\t\t\", \"\n+\t)}].reduce((a, b) => a + b);`;\n+};"
      },
      {
        "sha": "ebe68a120f645d3bd80c83d3a3d81f669a04b445",
        "filename": "test/cases/large/many-replacements/index.js",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fmany-replacements%2Findex.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -0,0 +1,11 @@\n+import a from \"./generate-many-replacements-loader?count=1000!./module\";\n+import b from \"./generate-many-replacements-loader?count=10000!./module\";\n+import c from \"./generate-many-replacements-loader?count=100000!./module\";\n+import d from \"./generate-many-replacements-loader?count=1000000!./module\";\n+\n+it(\"should compile fine\", () => {\n+\texpect(a).toBe(1000);\n+\texpect(b).toBe(10000);\n+\texpect(c).toBe(100000);\n+\texpect(d).toBe(1000000);\n+});"
      },
      {
        "sha": "aef22247d75263ebcd619ae575d94355aedb3b48",
        "filename": "test/cases/large/many-replacements/module.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Fmodule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Fmodule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fmany-replacements%2Fmodule.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -0,0 +1 @@\n+export default 1;"
      },
      {
        "sha": "7ab4fa5eeffef7cd42fe2c2a70a35f01f6e94cf0",
        "filename": "test/cases/large/many-replacements/test.config.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Ftest.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Ftest.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fmany-replacements%2Ftest.config.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = {\n+\ttimeout: 120000\n+};"
      },
      {
        "sha": "71a71e594ff96453f1876aea69e7c0c58cf6f30a",
        "filename": "test/cases/large/many-replacements/test.filter.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Ftest.filter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/test%2Fcases%2Flarge%2Fmany-replacements%2Ftest.filter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fmany-replacements%2Ftest.filter.js?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = function (config) {\n+\treturn !process.env.CI;\n+};"
      },
      {
        "sha": "00f196e1d395070a5b1342fe36f40a4e5f7fc53a",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -10899,6 +10899,11 @@ declare interface StatsOptions {\n \t */\n \tgroupModulesByType?: boolean;\n \n+\t/**\n+\t * Group reasons by their origin module.\n+\t */\n+\tgroupReasonsByOrigin?: boolean;\n+\n \t/**\n \t * Add the hash of the compilation.\n \t */\n@@ -11004,6 +11009,11 @@ declare interface StatsOptions {\n \t */\n \treasons?: boolean;\n \n+\t/**\n+\t * Space to display reasons (groups will be collapsed to fit this space).\n+\t */\n+\treasonsSpace?: number;\n+\n \t/**\n \t * Add information about assets that are related to other assets (like SourceMaps for assets).\n \t */"
      },
      {
        "sha": "f0008fe0186ebb7170b85ea2d67e2aed0f97b14f",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/d3f8e16810581791de6bd3e2ccc944541779b4a2/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/d3f8e16810581791de6bd3e2ccc944541779b4a2/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=d3f8e16810581791de6bd3e2ccc944541779b4a2",
        "patch": "@@ -6157,10 +6157,10 @@ webpack-sources@^1.1.0:\n     source-list-map \"^2.0.0\"\n     source-map \"~0.6.1\"\n \n-webpack-sources@^2.3.0:\n-  version \"2.3.0\"\n-  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-2.3.0.tgz#9ed2de69b25143a4c18847586ad9eccb19278cfa\"\n-  integrity sha512-WyOdtwSvOML1kbgtXbTDnEW0jkJ7hZr/bDByIwszhWd/4XX1A3XMkrbFMsuH4+/MfLlZCUzlAdg4r7jaGKEIgQ==\n+webpack-sources@^2.3.1:\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-2.3.1.tgz#570de0af163949fe272233c2cefe1b56f74511fd\"\n+  integrity sha512-y9EI9AO42JjEcrTJFOYmVywVZdKVUfOvDUPsJea5GIr1JOEGFVqwlY2K098fFoIjOkDzHn2AjRvM8dsBZu+gCA==\n   dependencies:\n     source-list-map \"^2.0.1\"\n     source-map \"^0.6.1\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14381",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14381/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14381/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14381/events",
    "html_url": "https://github.com/webpack/webpack/pull/14381",
    "id": 1012291596,
    "node_id": "PR_kwDOADgiC84sgxnj",
    "number": 14381,
    "title": "allow ExternalModules to be unsafe cached",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-09-30T15:02:15Z",
    "updated_at": "2021-10-04T07:56:22Z",
    "closed_at": "2021-10-04T07:56:21Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14381",
      "html_url": "https://github.com/webpack/webpack/pull/14381",
      "diff_url": "https://github.com/webpack/webpack/pull/14381.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14381.patch",
      "merged_at": "2021-10-04T07:56:21Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14381/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "8ac60b0ea62ec5dbd5f08eb970cd57f907e38abb",
        "filename": "lib/ExternalModule.js",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/80bf77d26f282f53b7067a9d1084581db5f37b78/lib%2FExternalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/80bf77d26f282f53b7067a9d1084581db5f37b78/lib%2FExternalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FExternalModule.js?ref=80bf77d26f282f53b7067a9d1084581db5f37b78",
        "patch": "@@ -32,6 +32,7 @@ const { register } = require(\"./util/serialization\");\n /** @typedef {import(\"./Module\").ConcatenationBailoutReasonContext} ConcatenationBailoutReasonContext */\n /** @typedef {import(\"./Module\").LibIdentOptions} LibIdentOptions */\n /** @typedef {import(\"./Module\").NeedBuildContext} NeedBuildContext */\n+/** @typedef {import(\"./NormalModuleFactory\")} NormalModuleFactory */\n /** @typedef {import(\"./RequestShortener\")} RequestShortener */\n /** @typedef {import(\"./ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\n /** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n@@ -497,6 +498,10 @@ class ExternalModule extends Module {\n \t\tcallback();\n \t}\n \n+\trestoreFromUnsafeCache(unsafeCacheData, normalModuleFactory) {\n+\t\tthis._restoreFromUnsafeCache(unsafeCacheData, normalModuleFactory);\n+\t}\n+\n \t/**\n \t * @param {ConcatenationBailoutReasonContext} context context\n \t * @returns {string | undefined} reason why this module can't be concatenated, undefined when it can be concatenated"
      },
      {
        "sha": "d399884e3050aad2e15cd3ced007f11b8b513fe2",
        "filename": "test/watchCases/cache/unsafe-cache/0/index.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F0%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F0%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Funsafe-cache%2F0%2Findex.js?ref=80bf77d26f282f53b7067a9d1084581db5f37b78",
        "patch": "@@ -1,4 +1,5 @@\n import value from \"./changing-module\";\n+import \"./proxy-module\";\n \n it(\"should compile and cleanup correctly\", () => {\n \texpect(value).toBe(WATCH_STEP);"
      },
      {
        "sha": "a02f056626cc8e8776230fd508f59021efd7dd7d",
        "filename": "test/watchCases/cache/unsafe-cache/0/proxy-module.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F0%2Fproxy-module.js",
        "raw_url": "https://github.com/webpack/webpack/raw/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F0%2Fproxy-module.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Funsafe-cache%2F0%2Fproxy-module.js?ref=80bf77d26f282f53b7067a9d1084581db5f37b78",
        "patch": "@@ -1,3 +1,4 @@\n import \"./unchanged-module.js\";\n import \"./unchanged-module.json\";\n new URL(\"./unchanged-module.svg\", import.meta.url);\n+import \"external\";"
      },
      {
        "sha": "883b73a3d7f7530ef406a1e1b436b777021b8824",
        "filename": "test/watchCases/cache/unsafe-cache/1/changing-module.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F1%2Fchanging-module.js",
        "raw_url": "https://github.com/webpack/webpack/raw/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F1%2Fchanging-module.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Funsafe-cache%2F1%2Fchanging-module.js?ref=80bf77d26f282f53b7067a9d1084581db5f37b78",
        "patch": "@@ -1,5 +1,6 @@\n import \"./unchanged-module.js\";\n import \"./unchanged-module.json\";\n new URL(\"./unchanged-module.svg\", import.meta.url);\n+import \"external\";\n \n export default \"1\";"
      },
      {
        "sha": "156ac382b80e958b2c92c8afade9c99005e63f47",
        "filename": "test/watchCases/cache/unsafe-cache/2/changing-module.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F2%2Fchanging-module.js",
        "raw_url": "https://github.com/webpack/webpack/raw/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2F2%2Fchanging-module.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Funsafe-cache%2F2%2Fchanging-module.js?ref=80bf77d26f282f53b7067a9d1084581db5f37b78",
        "patch": "@@ -1,5 +1,6 @@\n import \"./unchanged-module.js\";\n import \"./unchanged-module.json\";\n new URL(\"./unchanged-module.svg\", import.meta.url);\n+import \"external\";\n \n export default \"2\";"
      },
      {
        "sha": "edbb2155bad891915b898b0818627d947bda5003",
        "filename": "test/watchCases/cache/unsafe-cache/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/80bf77d26f282f53b7067a9d1084581db5f37b78/test%2FwatchCases%2Fcache%2Funsafe-cache%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Funsafe-cache%2Fwebpack.config.js?ref=80bf77d26f282f53b7067a9d1084581db5f37b78",
        "patch": "@@ -6,5 +6,8 @@ module.exports = {\n \t},\n \tmodule: {\n \t\tunsafeCache: true\n+\t},\n+\texternals: {\n+\t\texternal: \"var 123\"\n \t}\n };"
      },
      {
        "sha": "572a746b934512e8c73bc02cfd24278f796b676f",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/80bf77d26f282f53b7067a9d1084581db5f37b78/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/80bf77d26f282f53b7067a9d1084581db5f37b78/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=80bf77d26f282f53b7067a9d1084581db5f37b78",
        "patch": "@@ -3741,6 +3741,10 @@ declare class ExternalModule extends Module {\n \trequest: string | string[] | Record<string, string | string[]>;\n \texternalType: string;\n \tuserRequest: string;\n+\trestoreFromUnsafeCache(\n+\t\tunsafeCacheData?: any,\n+\t\tnormalModuleFactory?: any\n+\t): void;\n }\n declare interface ExternalModuleInfo {\n \tindex: number;"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14325",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14325/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14325/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14325/events",
    "html_url": "https://github.com/webpack/webpack/pull/14325",
    "id": 1007238982,
    "node_id": "PR_kwDOADgiC84sRfgJ",
    "number": 14325,
    "title": "chore: merge multi hash.update",
    "user": {
      "login": "shfshanyue",
      "id": 13389461,
      "node_id": "MDQ6VXNlcjEzMzg5NDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/13389461?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shfshanyue",
      "html_url": "https://github.com/shfshanyue",
      "followers_url": "https://api.github.com/users/shfshanyue/followers",
      "following_url": "https://api.github.com/users/shfshanyue/following{/other_user}",
      "gists_url": "https://api.github.com/users/shfshanyue/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shfshanyue/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shfshanyue/subscriptions",
      "organizations_url": "https://api.github.com/users/shfshanyue/orgs",
      "repos_url": "https://api.github.com/users/shfshanyue/repos",
      "events_url": "https://api.github.com/users/shfshanyue/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shfshanyue/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2021-09-26T01:12:42Z",
    "updated_at": "2021-10-04T07:56:06Z",
    "closed_at": "2021-10-04T07:56:05Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14325",
      "html_url": "https://github.com/webpack/webpack/pull/14325",
      "diff_url": "https://github.com/webpack/webpack/pull/14325.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14325.patch",
      "merged_at": "2021-10-04T07:56:05Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\n\r\nperformance\r\n\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\n\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\nno\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14325/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5a20d02c1c7bc0ad2c525021677b14d247b27f3d",
        "filename": "lib/AsyncDependenciesBlock.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FAsyncDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FAsyncDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FAsyncDependenciesBlock.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -66,9 +66,10 @@ class AsyncDependenciesBlock extends DependenciesBlock {\n \t\tif (this._stringifiedGroupOptions === undefined) {\n \t\t\tthis._stringifiedGroupOptions = JSON.stringify(this.groupOptions);\n \t\t}\n-\t\thash.update(this._stringifiedGroupOptions);\n \t\tconst chunkGroup = chunkGraph.getBlockChunkGroup(this);\n-\t\thash.update(chunkGroup ? chunkGroup.id : \"\");\n+\t\thash.update(\n+\t\t\t`${this._stringifiedGroupOptions}${chunkGroup ? chunkGroup.id : \"\"}`\n+\t\t);\n \t\tsuper.updateHash(hash, context);\n \t}\n "
      },
      {
        "sha": "8674b716c234d533ceb981da36704abfa5c09a07",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 4,
        "deletions": 6,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -539,9 +539,9 @@ class Chunk {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, chunkGraph) {\n-\t\thash.update(`${this.id} `);\n-\t\thash.update(this.ids ? this.ids.join(\",\") : \"\");\n-\t\thash.update(`${this.name || \"\"} `);\n+\t\thash.update(\n+\t\t\t`${this.id} ${this.ids ? this.ids.join() : \"\"} ${this.name || \"\"} `\n+\t\t);\n \t\tconst xor = new StringXor();\n \t\tfor (const m of chunkGraph.getChunkModulesIterable(this)) {\n \t\t\txor.add(chunkGraph.getModuleHash(m, this.runtime));\n@@ -550,9 +550,7 @@ class Chunk {\n \t\tconst entryModules =\n \t\t\tchunkGraph.getChunkEntryModulesWithChunkGroupIterable(this);\n \t\tfor (const [m, chunkGroup] of entryModules) {\n-\t\t\thash.update(\"entry\");\n-\t\t\thash.update(`${chunkGraph.getModuleId(m)}`);\n-\t\t\thash.update(chunkGroup.id);\n+\t\t\thash.update(`entry${chunkGraph.getModuleId(m)}${chunkGroup.id}`);\n \t\t}\n \t}\n "
      },
      {
        "sha": "58dd0117d923d904d50bf8f3d94cebb0b641be39",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -1499,8 +1499,7 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t}\n \t\tconst graphHash = cgm.graphHashes.provide(runtime, () => {\n \t\t\tconst hash = createHash(this._hashFunction);\n-\t\t\thash.update(`${cgm.id}`);\n-\t\t\thash.update(`${this.moduleGraph.isAsync(module)}`);\n+\t\t\thash.update(`${cgm.id}${this.moduleGraph.isAsync(module)}`);\n \t\t\tthis.moduleGraph.getExportsInfo(module).updateHash(hash, runtime);\n \t\t\treturn BigInt(`0x${/** @type {string} */ (hash.digest(\"hex\"))}`);\n \t\t});"
      },
      {
        "sha": "45268e13adb028743edcb7b65ab0b83b46a14010",
        "filename": "lib/DependencyTemplates.js",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FDependencyTemplates.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FDependencyTemplates.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependencyTemplates.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -48,8 +48,7 @@ class DependencyTemplates {\n \t */\n \tupdateHash(part) {\n \t\tconst hash = createHash(this._hashFunction);\n-\t\thash.update(this._hash);\n-\t\thash.update(part);\n+\t\thash.update(`${this._hash}${part}`);\n \t\tthis._hash = /** @type {string} */ (hash.digest(\"hex\"));\n \t}\n "
      },
      {
        "sha": "a4321d0d6f1e93bf33f44a31d7b2c86df2e2b2de",
        "filename": "lib/DllModule.js",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FDllModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FDllModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDllModule.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -117,8 +117,7 @@ class DllModule extends Module {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(\"dll module\");\n-\t\thash.update(this.name || \"\");\n+\t\thash.update(`dll module${this.name || \"\"}`);\n \t\tsuper.updateHash(hash, context);\n \t}\n "
      },
      {
        "sha": "cc0deb343e267440e36a520659805488dfde4df6",
        "filename": "lib/ExportsInfo.js",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FExportsInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FExportsInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FExportsInfo.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -1412,10 +1412,11 @@ class ExportInfo {\n \t}\n \n \t_updateHash(hash, runtime, alreadyVisitedExportsInfo) {\n-\t\thash.update(`${this._usedName || this.name}`);\n-\t\thash.update(`${this.getUsed(runtime)}`);\n-\t\thash.update(`${this.provided}`);\n-\t\thash.update(`${this.terminalBinding}`);\n+\t\thash.update(\n+\t\t\t`${this._usedName || this.name}${this.getUsed(runtime)}${this.provided}${\n+\t\t\t\tthis.terminalBinding\n+\t\t\t}`\n+\t\t);\n \t\tif (this.exportsInfo && !alreadyVisitedExportsInfo.has(this.exportsInfo)) {\n \t\t\tthis.exportsInfo._updateHash(hash, runtime, alreadyVisitedExportsInfo);\n \t\t}"
      },
      {
        "sha": "799ae4059d2aea46d20cd25f62eb2f064d399b98",
        "filename": "lib/ExternalModule.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FExternalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2FExternalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FExternalModule.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -679,10 +679,10 @@ class ExternalModule extends Module {\n \t */\n \tupdateHash(hash, context) {\n \t\tconst { chunkGraph } = context;\n-\t\thash.update(this.externalType);\n-\t\thash.update(JSON.stringify(this.request));\n \t\thash.update(\n-\t\t\tJSON.stringify(Boolean(this.isOptional(chunkGraph.moduleGraph)))\n+\t\t\t`${this.externalType}${JSON.stringify(this.request)}${this.isOptional(\n+\t\t\t\tchunkGraph.moduleGraph\n+\t\t\t)}`\n \t\t);\n \t\tsuper.updateHash(hash, context);\n \t}"
      },
      {
        "sha": "ec719d6d9b3017b1012338774cd10cd8fe1223e0",
        "filename": "lib/javascript/ArrayPushCallbackChunkFormatPlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 5,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/lib%2Fjavascript%2FArrayPushCallbackChunkFormatPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/lib%2Fjavascript%2FArrayPushCallbackChunkFormatPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FArrayPushCallbackChunkFormatPlugin.js?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -137,11 +137,9 @@ class ArrayPushCallbackChunkFormatPlugin {\n \t\t\t\t\t\"ArrayPushCallbackChunkFormatPlugin\",\n \t\t\t\t\t(chunk, hash, { chunkGraph, runtimeTemplate }) => {\n \t\t\t\t\t\tif (chunk.hasRuntime()) return;\n-\t\t\t\t\t\thash.update(\"ArrayPushCallbackChunkFormatPlugin\");\n-\t\t\t\t\t\thash.update(\"1\");\n-\t\t\t\t\t\thash.update(`${runtimeTemplate.outputOptions.chunkLoadingGlobal}`);\n-\t\t\t\t\t\thash.update(`${runtimeTemplate.outputOptions.hotUpdateGlobal}`);\n-\t\t\t\t\t\thash.update(`${runtimeTemplate.outputOptions.globalObject}`);\n+\t\t\t\t\t\thash.update(\n+\t\t\t\t\t\t\t`ArrayPushCallbackChunkFormatPlugin1${runtimeTemplate.outputOptions.chunkLoadingGlobal}${runtimeTemplate.outputOptions.hotUpdateGlobal}${runtimeTemplate.outputOptions.globalObject}`\n+\t\t\t\t\t\t);\n \t\t\t\t\t\tconst entries = Array.from(\n \t\t\t\t\t\t\tchunkGraph.getChunkEntryModulesWithChunkGroupIterable(chunk)\n \t\t\t\t\t\t);"
      },
      {
        "sha": "f912743e3cf37e2a9aa8b2e5866fd052b9bb7ead",
        "filename": "test/__snapshots__/StatsTestCases.basictest.js.snap",
        "status": "modified",
        "additions": 82,
        "deletions": 82,
        "changes": 164,
        "blob_url": "https://github.com/webpack/webpack/blob/7135727cba195ef68aa62bf4a78904592290ff77/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/7135727cba195ef68aa62bf4a78904592290ff77/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap?ref=7135727cba195ef68aa62bf4a78904592290ff77",
        "patch": "@@ -3,121 +3,121 @@\n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n \"fitting:\n   PublicPath: auto\n-  asset fitting-d0a5516addc573b26e2b.js 16.1 KiB [emitted] [immutable]\n-  asset fitting-1c702fff0ba9fe1126d9.js 1.9 KiB [emitted] [immutable]\n-  asset fitting-c0e0ed061413e64a66c5.js 1.9 KiB [emitted] [immutable]\n-  asset fitting-3fdf9ef59eba6cfd6536.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.9 KiB = fitting-1c702fff0ba9fe1126d9.js 1.9 KiB fitting-c0e0ed061413e64a66c5.js 1.9 KiB fitting-d0a5516addc573b26e2b.js 16.1 KiB\n-  chunk (runtime: main) fitting-d0a5516addc573b26e2b.js 1.87 KiB (javascript) 8.66 KiB (runtime) [entry] [rendered]\n+  asset fitting-0bc75dc7c25c03335e16.js 16.1 KiB [emitted] [immutable]\n+  asset fitting-50595d23e8f97d7ccd2a.js 1.9 KiB [emitted] [immutable]\n+  asset fitting-5bc77880fdc9e2bf09ee.js 1.9 KiB [emitted] [immutable]\n+  asset fitting-72afdc913f6cf884b457.js 1.08 KiB [emitted] [immutable]\n+  Entrypoint main 19.9 KiB = fitting-50595d23e8f97d7ccd2a.js 1.9 KiB fitting-5bc77880fdc9e2bf09ee.js 1.9 KiB fitting-0bc75dc7c25c03335e16.js 16.1 KiB\n+  chunk (runtime: main) fitting-0bc75dc7c25c03335e16.js 1.87 KiB (javascript) 8.66 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.66 KiB 11 modules\n     cacheable modules 1.87 KiB\n       ./e.js 899 bytes [dependent] [built] [code generated]\n       ./f.js 900 bytes [dependent] [built] [code generated]\n       ./index.js 111 bytes [built] [code generated]\n-  chunk (runtime: main) fitting-c0e0ed061413e64a66c5.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) fitting-5bc77880fdc9e2bf09ee.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./c.js 899 bytes [built] [code generated]\n     ./d.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) fitting-1c702fff0ba9fe1126d9.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) fitting-50595d23e8f97d7ccd2a.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./a.js 899 bytes [built] [code generated]\n     ./b.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) fitting-3fdf9ef59eba6cfd6536.js 916 bytes [rendered]\n+  chunk (runtime: main) fitting-72afdc913f6cf884b457.js 916 bytes [rendered]\n     > ./g ./index.js 7:0-13\n     ./g.js 916 bytes [built] [code generated]\n   fitting (webpack x.x.x) compiled successfully in X ms\n \n content-change:\n   PublicPath: auto\n-  asset content-change-9b9197519f9a69be0758.js 16.1 KiB [emitted] [immutable]\n-  asset content-change-1c702fff0ba9fe1126d9.js 1.9 KiB [emitted] [immutable]\n-  asset content-change-c0e0ed061413e64a66c5.js 1.9 KiB [emitted] [immutable]\n-  asset content-change-3fdf9ef59eba6cfd6536.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.9 KiB = content-change-1c702fff0ba9fe1126d9.js 1.9 KiB content-change-c0e0ed061413e64a66c5.js 1.9 KiB content-change-9b9197519f9a69be0758.js 16.1 KiB\n-  chunk (runtime: main) content-change-9b9197519f9a69be0758.js 1.87 KiB (javascript) 8.66 KiB (runtime) [entry] [rendered]\n+  asset content-change-f715770db123da1acd5e.js 16.1 KiB [emitted] [immutable]\n+  asset content-change-50595d23e8f97d7ccd2a.js 1.9 KiB [emitted] [immutable]\n+  asset content-change-5bc77880fdc9e2bf09ee.js 1.9 KiB [emitted] [immutable]\n+  asset content-change-72afdc913f6cf884b457.js 1.08 KiB [emitted] [immutable]\n+  Entrypoint main 19.9 KiB = content-change-50595d23e8f97d7ccd2a.js 1.9 KiB content-change-5bc77880fdc9e2bf09ee.js 1.9 KiB content-change-f715770db123da1acd5e.js 16.1 KiB\n+  chunk (runtime: main) content-change-f715770db123da1acd5e.js 1.87 KiB (javascript) 8.66 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.66 KiB 11 modules\n     cacheable modules 1.87 KiB\n       ./e.js 899 bytes [dependent] [built] [code generated]\n       ./f.js 900 bytes [dependent] [built] [code generated]\n       ./index.js 111 bytes [built] [code generated]\n-  chunk (runtime: main) content-change-c0e0ed061413e64a66c5.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) content-change-5bc77880fdc9e2bf09ee.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./c.js 899 bytes [built] [code generated]\n     ./d.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) content-change-1c702fff0ba9fe1126d9.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) content-change-50595d23e8f97d7ccd2a.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./a.js 899 bytes [built] [code generated]\n     ./b.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) content-change-3fdf9ef59eba6cfd6536.js 916 bytes [rendered]\n+  chunk (runtime: main) content-change-72afdc913f6cf884b457.js 916 bytes [rendered]\n     > ./g ./index.js 7:0-13\n     ./g.js 916 bytes [built] [code generated]\n   content-change (webpack x.x.x) compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n \"PublicPath: auto\n-asset d665fde544fa85a0a6de.js 11.6 KiB [emitted] [immutable] (name: main)\n-asset b28b42175852a350ae55.js 1.91 KiB [emitted] [immutable]\n-asset 5dc82ad1144129efc6f0.js 1.91 KiB [emitted] [immutable]\n-asset 6861109a893ce5c56a08.js 1.9 KiB [emitted] [immutable]\n-asset cdb7e2808114a2288d95.js 1.9 KiB [emitted] [immutable]\n-asset 73372ad6d7fbb1fb063f.js 1.9 KiB [emitted] [immutable]\n-asset 84ccadf9c4e1e366e5ef.js 1.9 KiB [emitted] [immutable]\n-asset c0e0ed061413e64a66c5.js 1.9 KiB [emitted] [immutable]\n-asset c98f03fbb3549a9685f2.js 1.9 KiB [emitted] [immutable]\n-asset 4437b7a806fda9652d78.js 1010 bytes [emitted] [immutable]\n-asset 9711883e11bdd4d550ff.js 1010 bytes [emitted] [immutable]\n-asset e0332efe5dd181ffeff5.js 1010 bytes [emitted] [immutable]\n-Entrypoint main 11.6 KiB = d665fde544fa85a0a6de.js\n-chunk (runtime: main) c0e0ed061413e64a66c5.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+asset 0fee456e1dc719aa6022.js 11.6 KiB [emitted] [immutable] (name: main)\n+asset 3fc6535262efa7e4fa3b.js 1.91 KiB [emitted] [immutable]\n+asset 56815935c535fbc0e462.js 1.91 KiB [emitted] [immutable]\n+asset 2b8c8882bd4326b27013.js 1.9 KiB [emitted] [immutable]\n+asset 7fcee6253a8c1f9fd714.js 1.9 KiB [emitted] [immutable]\n+asset 5bc77880fdc9e2bf09ee.js 1.9 KiB [emitted] [immutable]\n+asset abdab88d0dc9ea1a41ab.js 1.9 KiB [emitted] [immutable]\n+asset d0fbb9e0f5d00615a52e.js 1.9 KiB [emitted] [immutable]\n+asset f79c60cc3faba968a476.js 1.9 KiB [emitted] [immutable]\n+asset 7294786e49319a98f5af.js 1010 bytes [emitted] [immutable]\n+asset c5861419d7f3f6ea6c19.js 1010 bytes [emitted] [immutable]\n+asset f897ac9956540163d002.js 1010 bytes [emitted] [immutable]\n+Entrypoint main 11.6 KiB = 0fee456e1dc719aa6022.js\n+chunk (runtime: main) 5bc77880fdc9e2bf09ee.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./c ./d ./e ./index.js 3:0-30\n   ./c.js 899 bytes [built] [code generated]\n   ./d.js 899 bytes [built] [code generated]\n-chunk (runtime: main) d665fde544fa85a0a6de.js (main) 248 bytes (javascript) 6.32 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) 0fee456e1dc719aa6022.js (main) 248 bytes (javascript) 6.32 KiB (runtime) [entry] [rendered]\n   > ./index main\n   runtime modules 6.32 KiB 7 modules\n   ./index.js 248 bytes [built] [code generated]\n-chunk (runtime: main) b28b42175852a350ae55.js 1.76 KiB [rendered]\n+chunk (runtime: main) 3fc6535262efa7e4fa3b.js 1.76 KiB [rendered]\n   > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n   ./j.js 901 bytes [built] [code generated]\n   ./k.js 899 bytes [built] [code generated]\n-chunk (runtime: main) e0332efe5dd181ffeff5.js 899 bytes [rendered]\n+chunk (runtime: main) f897ac9956540163d002.js 899 bytes [rendered]\n   > ./c ./d ./e ./index.js 3:0-30\n   > ./b ./d ./e ./f ./g ./index.js 5:0-44\n   ./e.js 899 bytes [built] [code generated]\n-chunk (runtime: main) cdb7e2808114a2288d95.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 7fcee6253a8c1f9fd714.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./i.js 899 bytes [built] [code generated]\n   ./j.js 901 bytes [built] [code generated]\n-chunk (runtime: main) 5dc82ad1144129efc6f0.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 56815935c535fbc0e462.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./e.js 899 bytes [built] [code generated]\n   ./h.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 73372ad6d7fbb1fb063f.js 1.76 KiB [rendered]\n+chunk (runtime: main) d0fbb9e0f5d00615a52e.js 1.76 KiB [rendered]\n   > ./b ./c ./index.js 2:0-23\n   ./b.js 899 bytes [built] [code generated]\n   ./c.js 899 bytes [built] [code generated]\n-chunk (runtime: main) c98f03fbb3549a9685f2.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) f79c60cc3faba968a476.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n   ./h.js 899 bytes [built] [code generated]\n   ./i.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 6861109a893ce5c56a08.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 2b8c8882bd4326b27013.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n   > ./b ./d ./e ./f ./g ./index.js 5:0-44\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./f.js 899 bytes [built] [code generated]\n   ./g.js 901 bytes [built] [code generated]\n-chunk (runtime: main) 9711883e11bdd4d550ff.js 899 bytes [rendered]\n+chunk (runtime: main) 7294786e49319a98f5af.js 899 bytes [rendered]\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./k.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 84ccadf9c4e1e366e5ef.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) abdab88d0dc9ea1a41ab.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./b ./d ./e ./f ./g ./index.js 5:0-44\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./b.js 899 bytes [built] [code generated]\n   ./d.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 4437b7a806fda9652d78.js 899 bytes [rendered]\n+chunk (runtime: main) c5861419d7f3f6ea6c19.js 899 bytes [rendered]\n   > ./a ./index.js 1:0-16\n   ./a.js 899 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\"\n@@ -658,19 +658,19 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"asset app.cf6134c86a3764bf5541-1.js 6.24 KiB [emitted] [immutable] (name: app)\n-asset vendor.ebb9b6c7e5493f36bead-1.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.84 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.cf6134c86a3764bf5541-1.js 6.24 KiB\n+\"asset app.93348d48a3a36b9dfe36-1.js 6.24 KiB [emitted] [immutable] (name: app)\n+asset vendor.e8705eba33f92df1cf62-1.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n+Entrypoint app 6.84 KiB = vendor.e8705eba33f92df1cf62-1.js 619 bytes app.93348d48a3a36b9dfe36-1.js 6.24 KiB\n runtime modules 2.76 KiB 4 modules\n orphan modules 118 bytes [orphan] 2 modules\n cacheable modules 272 bytes\n   ./entry-1.js + 2 modules 185 bytes [built] [code generated]\n   ./constants.js 87 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset app.089a6b1a54e28aecba11-2.js 6.26 KiB [emitted] [immutable] (name: app)\n-asset vendor.ebb9b6c7e5493f36bead-2.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.86 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.089a6b1a54e28aecba11-2.js 6.26 KiB\n+asset app.7df4a486d4bfe64fb90e-2.js 6.26 KiB [emitted] [immutable] (name: app)\n+asset vendor.e8705eba33f92df1cf62-2.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n+Entrypoint app 6.86 KiB = vendor.e8705eba33f92df1cf62-2.js 619 bytes app.7df4a486d4bfe64fb90e-2.js 6.26 KiB\n runtime modules 2.76 KiB 4 modules\n orphan modules 125 bytes [orphan] 2 modules\n cacheable modules 279 bytes\n@@ -700,57 +700,57 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"asset main-5247897288595e4776a8.js 10.4 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-5247897288595e4776a8.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n-asset 695-c2bff00f4dc67a034047.js 455 bytes [emitted] [immutable]\n-  sourceMap 695-c2bff00f4dc67a034047.js.map 342 bytes [emitted] [dev]\n+\"asset main-4aabfaa86ecfef36d9be.js 10.4 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-4aabfaa86ecfef36d9be.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n+asset 695-4dd37417c69a0af66bac.js 455 bytes [emitted] [immutable]\n+  sourceMap 695-4dd37417c69a0af66bac.js.map 342 bytes [emitted] [dev]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js (in Xdir/context-independence/a) 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules (in Xdir/context-independence/a) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-5247897288595e4776a8.js 10.4 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-5247897288595e4776a8.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n-asset 695-c2bff00f4dc67a034047.js 455 bytes [emitted] [immutable]\n-  sourceMap 695-c2bff00f4dc67a034047.js.map 342 bytes [emitted] [dev]\n+asset main-4aabfaa86ecfef36d9be.js 10.4 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-4aabfaa86ecfef36d9be.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n+asset 695-4dd37417c69a0af66bac.js 455 bytes [emitted] [immutable]\n+  sourceMap 695-4dd37417c69a0af66bac.js.map 342 bytes [emitted] [dev]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./b/index.js (in Xdir/context-independence/b) 40 bytes [built] [code generated]\n   ./b/chunk.js + 1 modules (in Xdir/context-independence/b) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-7db72914ff1feab68bcc.js 11.6 KiB [emitted] [immutable] (name: main)\n-asset 695-853aed631cbe225eb67f.js 1.5 KiB [emitted] [immutable]\n+asset main-0dae7fdb1672844ee2a7.js 11.6 KiB [emitted] [immutable] (name: main)\n+asset 695-828eb5c7418e1b8270bb.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js (in Xdir/context-independence/a) 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules (in Xdir/context-independence/a) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-7db72914ff1feab68bcc.js 11.6 KiB [emitted] [immutable] (name: main)\n-asset 695-853aed631cbe225eb67f.js 1.5 KiB [emitted] [immutable]\n+asset main-0dae7fdb1672844ee2a7.js 11.6 KiB [emitted] [immutable] (name: main)\n+asset 695-828eb5c7418e1b8270bb.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./b/index.js (in Xdir/context-independence/b) 40 bytes [built] [code generated]\n   ./b/chunk.js + 1 modules (in Xdir/context-independence/b) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-f86a1a4e2fa0a24cd00a.js 11.3 KiB [emitted] [immutable] (name: main)\n-asset 695-c98ab195b6c00d1ace5b.js 1.01 KiB [emitted] [immutable]\n+asset main-ae1f2717fd5d1cb5ac68.js 11.3 KiB [emitted] [immutable] (name: main)\n+asset 695-ace208366ce0ce2556ef.js 1.01 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js (in Xdir/context-independence/a) 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules (in Xdir/context-independence/a) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-f86a1a4e2fa0a24cd00a.js 11.3 KiB [emitted] [immutable] (name: main)\n-asset 695-c98ab195b6c00d1ace5b.js 1.01 KiB [emitted] [immutable]\n+asset main-ae1f2717fd5d1cb5ac68.js 11.3 KiB [emitted] [immutable] (name: main)\n+asset 695-ace208366ce0ce2556ef.js 1.01 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n@@ -1135,32 +1135,32 @@ webpack x.x.x compiled with 3 warnings\"\n `;\n \n exports[`StatsTestCases should print correct stats for issue-7577 1`] = `\n-\"asset a-runtime~main-22e869de0f27db81f962.js 4.92 KiB [emitted] [immutable] (name: runtime~main)\n-asset a-main-ef61ff9b5cacf52087be.js 405 bytes [emitted] [immutable] (name: main)\n-asset a-all-a_js-5af81d3b60f9e87be69d.js 140 bytes [emitted] [immutable] (id hint: all)\n-Entrypoint main 5.46 KiB = a-runtime~main-22e869de0f27db81f962.js 4.92 KiB a-all-a_js-5af81d3b60f9e87be69d.js 140 bytes a-main-ef61ff9b5cacf52087be.js 405 bytes\n+\"asset a-runtime~main-b4ac9ffbda8affb59dc2.js 4.92 KiB [emitted] [immutable] (name: runtime~main)\n+asset a-main-5b238661c342d3c63636.js 405 bytes [emitted] [immutable] (name: main)\n+asset a-all-a_js-52fb35892f514e05c220.js 140 bytes [emitted] [immutable] (id hint: all)\n+Entrypoint main 5.46 KiB = a-runtime~main-b4ac9ffbda8affb59dc2.js 4.92 KiB a-all-a_js-52fb35892f514e05c220.js 140 bytes a-main-5b238661c342d3c63636.js 405 bytes\n runtime modules 2.47 KiB 3 modules\n ./a.js 18 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset b-runtime~main-54fb57393ddb58c14c12.js 5.86 KiB [emitted] [immutable] (name: runtime~main)\n-asset b-all-b_js-937030672c8a31cdd3e9.js 475 bytes [emitted] [immutable] (id hint: all)\n-asset b-main-132fd6da6e6e6728c990.js 438 bytes [emitted] [immutable] (name: main)\n-asset b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 6.93 KiB = b-runtime~main-54fb57393ddb58c14c12.js 5.86 KiB b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes b-all-b_js-937030672c8a31cdd3e9.js 475 bytes b-main-132fd6da6e6e6728c990.js 438 bytes\n+asset b-runtime~main-59100c6ccf028a3d60ba.js 5.86 KiB [emitted] [immutable] (name: runtime~main)\n+asset b-all-b_js-1ccae3120aa8d62e9877.js 475 bytes [emitted] [immutable] (id hint: all)\n+asset b-main-503688157f1b1be3d9ac.js 438 bytes [emitted] [immutable] (name: main)\n+asset b-vendors-node_modules_vendor_js-7320f018dbab7e34ead5.js 185 bytes [emitted] [immutable] (id hint: vendors)\n+Entrypoint main 6.93 KiB = b-runtime~main-59100c6ccf028a3d60ba.js 5.86 KiB b-vendors-node_modules_vendor_js-7320f018dbab7e34ead5.js 185 bytes b-all-b_js-1ccae3120aa8d62e9877.js 475 bytes b-main-503688157f1b1be3d9ac.js 438 bytes\n runtime modules 3.03 KiB 5 modules\n cacheable modules 40 bytes\n   ./b.js 17 bytes [built] [code generated]\n   ./node_modules/vendor.js 23 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n assets by chunk 895 bytes (id hint: all)\n-  asset c-all-b_js-db80d48a68188f12c60f.js 502 bytes [emitted] [immutable] (id hint: all)\n-  asset c-all-c_js-5a3e032792662f68ffa4.js 393 bytes [emitted] [immutable] (id hint: all)\n-asset c-runtime~main-0f5e3c54060a84caba03.js 13.6 KiB [emitted] [immutable] (name: runtime~main)\n-asset c-main-67570433584a09b646bc.js 680 bytes [emitted] [immutable] (name: main)\n-asset c-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 14.6 KiB = c-runtime~main-0f5e3c54060a84caba03.js 13.6 KiB c-all-c_js-5a3e032792662f68ffa4.js 393 bytes c-main-67570433584a09b646bc.js 680 bytes\n+  asset c-all-b_js-d2d64fdaadbf1936503b.js 502 bytes [emitted] [immutable] (id hint: all)\n+  asset c-all-c_js-0552c7cbb8c1a12b6b9c.js 393 bytes [emitted] [immutable] (id hint: all)\n+asset c-runtime~main-61b507ed6234b5bfc102.js 13.6 KiB [emitted] [immutable] (name: runtime~main)\n+asset c-main-463838c803f48fe97bb6.js 680 bytes [emitted] [immutable] (name: main)\n+asset c-vendors-node_modules_vendor_js-7320f018dbab7e34ead5.js 185 bytes [emitted] [immutable] (id hint: vendors)\n+Entrypoint main 14.6 KiB = c-runtime~main-61b507ed6234b5bfc102.js 13.6 KiB c-all-c_js-0552c7cbb8c1a12b6b9c.js 393 bytes c-main-463838c803f48fe97bb6.js 680 bytes\n runtime modules 8.67 KiB 13 modules\n cacheable modules 101 bytes\n   ./c.js 61 bytes [built] [code generated]\n@@ -2084,7 +2084,7 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (104834baf2c563b13931)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (c7a4e3bf1797f14ec5d7)\"\n `;\n \n exports[`StatsTestCases should print correct stats for preset-errors-only 1`] = `\"\"`;\n@@ -2457,7 +2457,7 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (104834baf2c563b13931)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (c7a4e3bf1797f14ec5d7)\"\n `;\n \n exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14366",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14366/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14366/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14366/events",
    "html_url": "https://github.com/webpack/webpack/pull/14366",
    "id": 1010930457,
    "node_id": "PR_kwDOADgiC84scsnE",
    "number": 14366,
    "title": "use a hash instead of a list to track DefinePlugin dependency",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-09-29T13:02:11Z",
    "updated_at": "2021-09-29T19:57:57Z",
    "closed_at": "2021-09-29T19:57:56Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14366",
      "html_url": "https://github.com/webpack/webpack/pull/14366",
      "diff_url": "https://github.com/webpack/webpack/pull/14366.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14366.patch",
      "merged_at": "2021-09-29T19:57:56Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance, memory\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14366/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "71483777ccf2978042dc6e59bf64df53fb922953",
        "filename": "lib/DefinePlugin.js",
        "status": "modified",
        "additions": 13,
        "deletions": 8,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/5f22bffdd1d8808a4fe7cc5d65deeb72fb8e4c62/lib%2FDefinePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5f22bffdd1d8808a4fe7cc5d65deeb72fb8e4c62/lib%2FDefinePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDefinePlugin.js?ref=5f22bffdd1d8808a4fe7cc5d65deeb72fb8e4c62",
        "patch": "@@ -13,7 +13,7 @@ const {\n \tevaluateToString,\n \ttoConstantDependency\n } = require(\"./javascript/JavascriptParserHelpers\");\n-const { provide } = require(\"./util/MapHelpers\");\n+const createHash = require(\"./util/createHash\");\n \n /** @typedef {import(\"estree\").Expression} Expression */\n /** @typedef {import(\"./Compiler\")} Compiler */\n@@ -286,12 +286,11 @@ class DefinePlugin {\n \t\t\t\t);\n \t\t\t\tconst { runtimeTemplate } = compilation;\n \n-\t\t\t\tconst mainValue = /** @type {Set<string>} */ (\n-\t\t\t\t\tprovide(\n-\t\t\t\t\t\tcompilation.valueCacheVersions,\n-\t\t\t\t\t\tVALUE_DEP_MAIN,\n-\t\t\t\t\t\t() => new Set()\n-\t\t\t\t\t)\n+\t\t\t\tconst mainHash = createHash(compilation.outputOptions.hashFunction);\n+\t\t\t\tmainHash.update(\n+\t\t\t\t\t/** @type {string} */ (\n+\t\t\t\t\t\tcompilation.valueCacheVersions.get(VALUE_DEP_MAIN)\n+\t\t\t\t\t) || \"\"\n \t\t\t\t);\n \n \t\t\t\t/**\n@@ -300,6 +299,7 @@ class DefinePlugin {\n \t\t\t\t * @returns {void}\n \t\t\t\t */\n \t\t\t\tconst handler = parser => {\n+\t\t\t\t\tconst mainValue = compilation.valueCacheVersions.get(VALUE_DEP_MAIN);\n \t\t\t\t\tparser.hooks.program.tap(\"DefinePlugin\", () => {\n \t\t\t\t\t\tconst { buildInfo } = parser.state.module;\n \t\t\t\t\t\tif (!buildInfo.valueDependencies)\n@@ -565,7 +565,7 @@ class DefinePlugin {\n \t\t\t\t\t\tconst code = definitions[key];\n \t\t\t\t\t\tconst version = toCacheVersion(code);\n \t\t\t\t\t\tconst name = VALUE_DEP_PREFIX + prefix + key;\n-\t\t\t\t\t\tmainValue.add(name);\n+\t\t\t\t\t\tmainHash.update(\"|\" + prefix + key);\n \t\t\t\t\t\tconst oldVersion = compilation.valueCacheVersions.get(name);\n \t\t\t\t\t\tif (oldVersion === undefined) {\n \t\t\t\t\t\t\tcompilation.valueCacheVersions.set(name, version);\n@@ -589,6 +589,11 @@ class DefinePlugin {\n \t\t\t\t};\n \n \t\t\t\twalkDefinitionsForValues(definitions, \"\");\n+\n+\t\t\t\tcompilation.valueCacheVersions.set(\n+\t\t\t\t\tVALUE_DEP_MAIN,\n+\t\t\t\t\t/** @type {string} */ (mainHash.digest(\"hex\").slice(0, 8))\n+\t\t\t\t);\n \t\t\t}\n \t\t);\n \t}"
      },
      {
        "sha": "21baf7c1611e6b8f183428b185237cfb2c608f31",
        "filename": "test/watchCases/cache/add-defines/3/index.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/5f22bffdd1d8808a4fe7cc5d65deeb72fb8e4c62/test%2FwatchCases%2Fcache%2Fadd-defines%2F3%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5f22bffdd1d8808a4fe7cc5d65deeb72fb8e4c62/test%2FwatchCases%2Fcache%2Fadd-defines%2F3%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Fadd-defines%2F3%2Findex.js?ref=5f22bffdd1d8808a4fe7cc5d65deeb72fb8e4c62",
        "patch": "@@ -3,7 +3,7 @@ import b from \"./b\";\n import c from \"./c\";\n \n it(\"should invalidate modules when properties are added/removed from the DefinePlugin\", () => {\n-\texpect(a).toEqual([1, 2]);\n+\texpect(a).toEqual([1, 3]);\n \texpect(b).toEqual([undefined, 3]);\n-\texpect(c).toEqual([3, 2]);\n+\texpect(c).toEqual([3, 3]);\n });"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14318",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14318/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14318/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14318/events",
    "html_url": "https://github.com/webpack/webpack/pull/14318",
    "id": 1006274551,
    "node_id": "PR_kwDOADgiC84sOv7j",
    "number": 14318,
    "title": "cache computation of values passed for hashing",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-09-24T09:36:53Z",
    "updated_at": "2021-09-24T16:42:09Z",
    "closed_at": "2021-09-24T16:42:08Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14318",
      "html_url": "https://github.com/webpack/webpack/pull/14318",
      "diff_url": "https://github.com/webpack/webpack/pull/14318.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14318.patch",
      "merged_at": "2021-09-24T16:42:08Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14318/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "1794c86ab833fdf56f4017c186e6f477df321f6e",
        "filename": "lib/AsyncDependenciesBlock.js",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2FAsyncDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2FAsyncDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FAsyncDependenciesBlock.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -35,6 +35,7 @@ class AsyncDependenciesBlock extends DependenciesBlock {\n \t\tthis.request = request;\n \t\t/** @type {DependenciesBlock} */\n \t\tthis.parent = undefined;\n+\t\tthis._stringifiedGroupOptions = undefined;\n \t}\n \n \t/**\n@@ -49,7 +50,10 @@ class AsyncDependenciesBlock extends DependenciesBlock {\n \t * @returns {void}\n \t */\n \tset chunkName(value) {\n-\t\tthis.groupOptions.name = value;\n+\t\tif (this.groupOptions.name !== value) {\n+\t\t\tthis.groupOptions.name = value;\n+\t\t\tthis._stringifiedGroupOptions = undefined;\n+\t\t}\n \t}\n \n \t/**\n@@ -59,7 +63,10 @@ class AsyncDependenciesBlock extends DependenciesBlock {\n \t */\n \tupdateHash(hash, context) {\n \t\tconst { chunkGraph } = context;\n-\t\thash.update(JSON.stringify(this.groupOptions));\n+\t\tif (this._stringifiedGroupOptions === undefined) {\n+\t\t\tthis._stringifiedGroupOptions = JSON.stringify(this.groupOptions);\n+\t\t}\n+\t\thash.update(this._stringifiedGroupOptions);\n \t\tconst chunkGroup = chunkGraph.getBlockChunkGroup(this);\n \t\thash.update(chunkGroup ? chunkGroup.id : \"\");\n \t\tsuper.updateHash(hash, context);"
      },
      {
        "sha": "1e07edeca20cbe328276da69e7916cbaaec7f3e1",
        "filename": "lib/dependencies/CachedConstDependency.js",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FCachedConstDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FCachedConstDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCachedConstDependency.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -27,6 +27,7 @@ class CachedConstDependency extends NullDependency {\n \t\tthis.expression = expression;\n \t\tthis.range = range;\n \t\tthis.identifier = identifier;\n+\t\tthis._hashUpdate = undefined;\n \t}\n \n \t/**\n@@ -36,9 +37,9 @@ class CachedConstDependency extends NullDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(this.identifier + \"\");\n-\t\thash.update(this.range + \"\");\n-\t\thash.update(this.expression + \"\");\n+\t\tif (this._hashUpdate === undefined)\n+\t\t\tthis._hashUpdate = \"\" + this.identifier + this.range + this.expression;\n+\t\thash.update(this._hashUpdate);\n \t}\n \n \tserialize(context) {"
      },
      {
        "sha": "72e2cab1577e6aa56b55351a00a2ffa294682874",
        "filename": "lib/dependencies/ConstDependency.js",
        "status": "modified",
        "additions": 12,
        "deletions": 4,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FConstDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FConstDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FConstDependency.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -30,6 +30,7 @@ class ConstDependency extends NullDependency {\n \t\tthis.runtimeRequirements = runtimeRequirements\n \t\t\t? new Set(runtimeRequirements)\n \t\t\t: null;\n+\t\tthis._hashUpdate = undefined;\n \t}\n \n \t/**\n@@ -39,10 +40,17 @@ class ConstDependency extends NullDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(this.range + \"\");\n-\t\thash.update(this.expression + \"\");\n-\t\tif (this.runtimeRequirements)\n-\t\t\thash.update(Array.from(this.runtimeRequirements).join() + \"\");\n+\t\tif (this._hashUpdate === undefined) {\n+\t\t\tlet hashUpdate = \"\" + this.range + \"|\" + this.expression;\n+\t\t\tif (this.runtimeRequirements) {\n+\t\t\t\tfor (const item of this.runtimeRequirements) {\n+\t\t\t\t\thashUpdate += \"|\";\n+\t\t\t\t\thashUpdate += item;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tthis._hashUpdate = hashUpdate;\n+\t\t}\n+\t\thash.update(this._hashUpdate);\n \t}\n \n \t/**"
      },
      {
        "sha": "b8b90c2f71d076adaf50aa4725bb60362e507c4a",
        "filename": "lib/dependencies/JsonExportsDependency.js",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FJsonExportsDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FJsonExportsDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FJsonExportsDependency.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -47,6 +47,7 @@ class JsonExportsDependency extends NullDependency {\n \tconstructor(exports) {\n \t\tsuper();\n \t\tthis.exports = exports;\n+\t\tthis._hashUpdate = undefined;\n \t}\n \n \tget type() {\n@@ -72,7 +73,12 @@ class JsonExportsDependency extends NullDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(this.exports ? JSON.stringify(this.exports) : \"undefined\");\n+\t\tif (this._hashUpdate === undefined) {\n+\t\t\tthis._hashUpdate = this.exports\n+\t\t\t\t? JSON.stringify(this.exports)\n+\t\t\t\t: \"undefined\";\n+\t\t}\n+\t\thash.update(this._hashUpdate);\n \t}\n \n \tserialize(context) {"
      },
      {
        "sha": "0bf7fd255fc459fb33af69d9b5c212d75560c57f",
        "filename": "lib/dependencies/ModuleDecoratorDependency.js",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FModuleDecoratorDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FModuleDecoratorDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleDecoratorDependency.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -30,6 +30,7 @@ class ModuleDecoratorDependency extends NullDependency {\n \t\tsuper();\n \t\tthis.decorator = decorator;\n \t\tthis.allowExportsAccess = allowExportsAccess;\n+\t\tthis._hashUpdate = undefined;\n \t}\n \n \t/**\n@@ -69,8 +70,10 @@ class ModuleDecoratorDependency extends NullDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(this.decorator);\n-\t\thash.update(`${this.allowExportsAccess}`);\n+\t\tif (this._hashUpdate === undefined) {\n+\t\t\tthis._hashUpdate = `${this.decorator}${this.allowExportsAccess}`;\n+\t\t}\n+\t\thash.update(this._hashUpdate);\n \t}\n \n \tserialize(context) {"
      },
      {
        "sha": "0962ba76230485a218ae147b9480e4f6baad0a30",
        "filename": "lib/dependencies/ProvidedDependency.js",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FProvidedDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FProvidedDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FProvidedDependency.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -34,6 +34,7 @@ class ProvidedDependency extends ModuleDependency {\n \t\tthis.identifier = identifier;\n \t\tthis.path = path;\n \t\tthis.range = range;\n+\t\tthis._hashUpdate = undefined;\n \t}\n \n \tget type() {\n@@ -51,8 +52,11 @@ class ProvidedDependency extends ModuleDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(this.identifier);\n-\t\thash.update(this.path ? this.path.join(\",\") : \"null\");\n+\t\tif (this._hashUpdate === undefined) {\n+\t\t\tthis._hashUpdate =\n+\t\t\t\tthis.identifier + (this.path ? this.path.join(\",\") : \"null\");\n+\t\t}\n+\t\thash.update(this._hashUpdate);\n \t}\n \n \tserialize(context) {"
      },
      {
        "sha": "3ee70286d1d28c76c4d94d65c9edf498cd44e0d8",
        "filename": "lib/dependencies/PureExpressionDependency.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FPureExpressionDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FPureExpressionDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FPureExpressionDependency.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -28,6 +28,7 @@ class PureExpressionDependency extends NullDependency {\n \t\tthis.range = range;\n \t\t/** @type {Set<string> | false} */\n \t\tthis.usedByExports = false;\n+\t\tthis._hashUpdate = undefined;\n \t}\n \n \t/**\n@@ -37,7 +38,10 @@ class PureExpressionDependency extends NullDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(this.range + \"\");\n+\t\tif (this._hashUpdate === undefined) {\n+\t\t\tthis._hashUpdate = this.range + \"\";\n+\t\t}\n+\t\thash.update(this._hashUpdate);\n \t}\n \n \t/**"
      },
      {
        "sha": "a64248e9f8db997bf6169042b81988e1d03166dc",
        "filename": "lib/dependencies/RuntimeRequirementsDependency.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FRuntimeRequirementsDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/lib%2Fdependencies%2FRuntimeRequirementsDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRuntimeRequirementsDependency.js?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -23,6 +23,7 @@ class RuntimeRequirementsDependency extends NullDependency {\n \tconstructor(runtimeRequirements) {\n \t\tsuper();\n \t\tthis.runtimeRequirements = new Set(runtimeRequirements);\n+\t\tthis._hashUpdate = undefined;\n \t}\n \n \t/**\n@@ -32,7 +33,10 @@ class RuntimeRequirementsDependency extends NullDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\thash.update(Array.from(this.runtimeRequirements).join() + \"\");\n+\t\tif (this._hashUpdate === undefined) {\n+\t\t\tthis._hashUpdate = Array.from(this.runtimeRequirements).join() + \"\";\n+\t\t}\n+\t\thash.update(this._hashUpdate);\n \t}\n \n \tserialize(context) {"
      },
      {
        "sha": "8a94c7ed3045434d637ba7dfab0793aa7bab8c28",
        "filename": "test/__snapshots__/StatsTestCases.basictest.js.snap",
        "status": "modified",
        "additions": 30,
        "deletions": 30,
        "changes": 60,
        "blob_url": "https://github.com/webpack/webpack/blob/381614aecc02dffe6032201a628c5c107913c86a/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/381614aecc02dffe6032201a628c5c107913c86a/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap?ref=381614aecc02dffe6032201a628c5c107913c86a",
        "patch": "@@ -658,19 +658,19 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"asset app.4048a647fe3452d6c6b7-1.js 6.24 KiB [emitted] [immutable] (name: app)\n+\"asset app.cf6134c86a3764bf5541-1.js 6.24 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-1.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.84 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.4048a647fe3452d6c6b7-1.js 6.24 KiB\n+Entrypoint app 6.84 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.cf6134c86a3764bf5541-1.js 6.24 KiB\n runtime modules 2.76 KiB 4 modules\n orphan modules 118 bytes [orphan] 2 modules\n cacheable modules 272 bytes\n   ./entry-1.js + 2 modules 185 bytes [built] [code generated]\n   ./constants.js 87 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset app.e1acc68ab0b33c974bd6-2.js 6.26 KiB [emitted] [immutable] (name: app)\n+asset app.089a6b1a54e28aecba11-2.js 6.26 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-2.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.86 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.e1acc68ab0b33c974bd6-2.js 6.26 KiB\n+Entrypoint app 6.86 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.089a6b1a54e28aecba11-2.js 6.26 KiB\n runtime modules 2.76 KiB 4 modules\n orphan modules 125 bytes [orphan] 2 modules\n cacheable modules 279 bytes\n@@ -700,57 +700,57 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"asset main-0bba425408895d66edc2.js 10.4 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-0bba425408895d66edc2.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n-asset 695-996cbcc94c36e62bcba0.js 455 bytes [emitted] [immutable]\n-  sourceMap 695-996cbcc94c36e62bcba0.js.map 342 bytes [emitted] [dev]\n+\"asset main-5247897288595e4776a8.js 10.4 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-5247897288595e4776a8.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n+asset 695-c2bff00f4dc67a034047.js 455 bytes [emitted] [immutable]\n+  sourceMap 695-c2bff00f4dc67a034047.js.map 342 bytes [emitted] [dev]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js (in Xdir/context-independence/a) 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules (in Xdir/context-independence/a) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-0bba425408895d66edc2.js 10.4 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-0bba425408895d66edc2.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n-asset 695-996cbcc94c36e62bcba0.js 455 bytes [emitted] [immutable]\n-  sourceMap 695-996cbcc94c36e62bcba0.js.map 342 bytes [emitted] [dev]\n+asset main-5247897288595e4776a8.js 10.4 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-5247897288595e4776a8.js.map 9.27 KiB [emitted] [dev] (auxiliary name: main)\n+asset 695-c2bff00f4dc67a034047.js 455 bytes [emitted] [immutable]\n+  sourceMap 695-c2bff00f4dc67a034047.js.map 342 bytes [emitted] [dev]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./b/index.js (in Xdir/context-independence/b) 40 bytes [built] [code generated]\n   ./b/chunk.js + 1 modules (in Xdir/context-independence/b) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-feace509aa3ce367cc19.js 11.6 KiB [emitted] [immutable] (name: main)\n-asset 695-dd77aceb318649b4e959.js 1.5 KiB [emitted] [immutable]\n+asset main-7db72914ff1feab68bcc.js 11.6 KiB [emitted] [immutable] (name: main)\n+asset 695-853aed631cbe225eb67f.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js (in Xdir/context-independence/a) 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules (in Xdir/context-independence/a) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-feace509aa3ce367cc19.js 11.6 KiB [emitted] [immutable] (name: main)\n-asset 695-dd77aceb318649b4e959.js 1.5 KiB [emitted] [immutable]\n+asset main-7db72914ff1feab68bcc.js 11.6 KiB [emitted] [immutable] (name: main)\n+asset 695-853aed631cbe225eb67f.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./b/index.js (in Xdir/context-independence/b) 40 bytes [built] [code generated]\n   ./b/chunk.js + 1 modules (in Xdir/context-independence/b) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-ff2341c939081a4317cb.js 11.3 KiB [emitted] [immutable] (name: main)\n-asset 695-bd48ae52e02841adf5e6.js 1.01 KiB [emitted] [immutable]\n+asset main-f86a1a4e2fa0a24cd00a.js 11.3 KiB [emitted] [immutable] (name: main)\n+asset 695-c98ab195b6c00d1ace5b.js 1.01 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js (in Xdir/context-independence/a) 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules (in Xdir/context-independence/a) 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-ff2341c939081a4317cb.js 11.3 KiB [emitted] [immutable] (name: main)\n-asset 695-bd48ae52e02841adf5e6.js 1.01 KiB [emitted] [immutable]\n+asset main-f86a1a4e2fa0a24cd00a.js 11.3 KiB [emitted] [immutable] (name: main)\n+asset 695-c98ab195b6c00d1ace5b.js 1.01 KiB [emitted] [immutable]\n runtime modules 6.3 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n@@ -1144,23 +1144,23 @@ runtime modules 2.47 KiB 3 modules\n webpack x.x.x compiled successfully in X ms\n \n asset b-runtime~main-54fb57393ddb58c14c12.js 5.86 KiB [emitted] [immutable] (name: runtime~main)\n-asset b-all-b_js-d09f99e25781be397e6c.js 475 bytes [emitted] [immutable] (id hint: all)\n+asset b-all-b_js-937030672c8a31cdd3e9.js 475 bytes [emitted] [immutable] (id hint: all)\n asset b-main-132fd6da6e6e6728c990.js 438 bytes [emitted] [immutable] (name: main)\n asset b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 6.93 KiB = b-runtime~main-54fb57393ddb58c14c12.js 5.86 KiB b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes b-all-b_js-d09f99e25781be397e6c.js 475 bytes b-main-132fd6da6e6e6728c990.js 438 bytes\n+Entrypoint main 6.93 KiB = b-runtime~main-54fb57393ddb58c14c12.js 5.86 KiB b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes b-all-b_js-937030672c8a31cdd3e9.js 475 bytes b-main-132fd6da6e6e6728c990.js 438 bytes\n runtime modules 3.03 KiB 5 modules\n cacheable modules 40 bytes\n   ./b.js 17 bytes [built] [code generated]\n   ./node_modules/vendor.js 23 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n assets by chunk 895 bytes (id hint: all)\n-  asset c-all-b_js-3c3d3ae5b364fadfafb2.js 502 bytes [emitted] [immutable] (id hint: all)\n+  asset c-all-b_js-db80d48a68188f12c60f.js 502 bytes [emitted] [immutable] (id hint: all)\n   asset c-all-c_js-5a3e032792662f68ffa4.js 393 bytes [emitted] [immutable] (id hint: all)\n-asset c-runtime~main-2b89fbb33ebb9be1d93a.js 13.6 KiB [emitted] [immutable] (name: runtime~main)\n+asset c-runtime~main-0f5e3c54060a84caba03.js 13.6 KiB [emitted] [immutable] (name: runtime~main)\n asset c-main-67570433584a09b646bc.js 680 bytes [emitted] [immutable] (name: main)\n asset c-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 14.6 KiB = c-runtime~main-2b89fbb33ebb9be1d93a.js 13.6 KiB c-all-c_js-5a3e032792662f68ffa4.js 393 bytes c-main-67570433584a09b646bc.js 680 bytes\n+Entrypoint main 14.6 KiB = c-runtime~main-0f5e3c54060a84caba03.js 13.6 KiB c-all-c_js-5a3e032792662f68ffa4.js 393 bytes c-main-67570433584a09b646bc.js 680 bytes\n runtime modules 8.67 KiB 13 modules\n cacheable modules 101 bytes\n   ./c.js 61 bytes [built] [code generated]\n@@ -2459,15 +2459,15 @@ LOG from webpack.FileSystemInfo\n exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \"a-normal:\n   assets by path *.js 3.23 KiB\n-    asset e1e88dc9cfc1b47c4954-e1e88d.js 2.75 KiB [emitted] [immutable] [minimized] (name: runtime)\n+    asset 72965507c7b4c0b4fc29-729655.js 2.75 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a6d438a0676f93383d79-a6d438.js 262 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset cbb9c74e42f00ada40f7-cbb9c7.js 212 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.96 KiB (5.89 KiB) = e1e88dc9cfc1b47c4954-e1e88d.js 2.75 KiB cbb9c74e42f00ada40f7-cbb9c7.js 212 bytes 1 auxiliary asset\n+  Entrypoint index 2.96 KiB (5.89 KiB) = 72965507c7b4c0b4fc29-729655.js 2.75 KiB cbb9c74e42f00ada40f7-cbb9c7.js 212 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.29 KiB 9 modules\n@@ -2544,8 +2544,8 @@ a-source-map:\n \n b-source-map:\n   assets by path *.js 3.45 KiB\n-    asset 338f50bd5a2d2dac263f-338f50.js 2.81 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 338f50bd5a2d2dac263f-338f50.js.map 14.5 KiB [emitted] [dev] (auxiliary name: runtime)\n+    asset d618b31bb631bdbaee8e-d618b3.js 2.81 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap d618b31bb631bdbaee8e-d618b3.js.map 14.5 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset da6ceedb86c86e79a49a-da6cee.js 318 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap da6ceedb86c86e79a49a-da6cee.js.map 397 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset 9e0ae6ff74fb2c3c821b-9e0ae6.js 268 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2556,7 +2556,7 @@ b-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 3.07 KiB (20.7 KiB) = 338f50bd5a2d2dac263f-338f50.js 2.81 KiB 9e0ae6ff74fb2c3c821b-9e0ae6.js 268 bytes 3 auxiliary assets\n+  Entrypoint index 3.07 KiB (20.7 KiB) = d618b31bb631bdbaee8e-d618b3.js 2.81 KiB 9e0ae6ff74fb2c3c821b-9e0ae6.js 268 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.29 KiB 9 modules"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13242",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13242/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13242/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13242/events",
    "html_url": "https://github.com/webpack/webpack/pull/13242",
    "id": 869373932,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjI0NzUwMzE4",
    "number": 13242,
    "title": "performance improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2021-04-28T00:22:02Z",
    "updated_at": "2021-04-28T19:00:06Z",
    "closed_at": "2021-04-28T08:02:00Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13242",
      "html_url": "https://github.com/webpack/webpack/pull/13242",
      "diff_url": "https://github.com/webpack/webpack/pull/13242.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13242.patch",
      "merged_at": "2021-04-28T08:02:00Z"
    },
    "body": "\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* add `cache.profile` (`type: \"filesystem\"` only) flag for more info about (de)serialization timings\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13242/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "194ad7704624fd9daf6b8160a5c64d9e5bc9921d",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -969,6 +969,10 @@ export interface FileCacheOptions {\n \t * Name for the cache. Different names will lead to different coexisting caches.\n \t */\n \tname?: string;\n+\t/**\n+\t * Track and log detailed timing information for individual cache items.\n+\t */\n+\tprofile?: boolean;\n \t/**\n \t * When to store data to the filesystem. (pack: Store data when compiler is idle in a single file).\n \t */"
      },
      {
        "sha": "2ab52c3ecd5014e6b50d6d130843c5946877eec3",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 58,
        "deletions": 35,
        "changes": 93,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -1446,17 +1446,37 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t\t\truntime\n \t\t\t).toString(16);\n \t\t\tconst connections = this.moduleGraph.getOutgoingConnections(module);\n+\t\t\t/** @type {Set<Module>} */\n+\t\t\tconst activeNamespaceModules = new Set();\n \t\t\t/** @type {Map<string, Module | Set<Module>>} */\n \t\t\tconst connectedModules = new Map();\n-\t\t\tfor (const connection of connections) {\n-\t\t\t\tlet stateInfo;\n-\t\t\t\tif (typeof runtime === \"string\") {\n+\t\t\tconst processConnection = (connection, stateInfo) => {\n+\t\t\t\tconst module = connection.module;\n+\t\t\t\tstateInfo += module.getExportsType(this.moduleGraph, strict);\n+\t\t\t\t// cspell:word Tnamespace\n+\t\t\t\tif (stateInfo === \"Tnamespace\") activeNamespaceModules.add(module);\n+\t\t\t\telse {\n+\t\t\t\t\tconst oldModule = connectedModules.get(stateInfo);\n+\t\t\t\t\tif (oldModule === undefined) {\n+\t\t\t\t\t\tconnectedModules.set(stateInfo, module);\n+\t\t\t\t\t} else if (oldModule instanceof Set) {\n+\t\t\t\t\t\toldModule.add(module);\n+\t\t\t\t\t} else if (oldModule !== module) {\n+\t\t\t\t\t\tconnectedModules.set(stateInfo, new Set([oldModule, module]));\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t};\n+\t\t\tif (runtime === undefined || typeof runtime === \"string\") {\n+\t\t\t\tfor (const connection of connections) {\n \t\t\t\t\tconst state = connection.getActiveState(runtime);\n \t\t\t\t\tif (state === false) continue;\n-\t\t\t\t\tstateInfo = activeStateToString(state);\n-\t\t\t\t} else {\n+\t\t\t\t\tprocessConnection(connection, state === true ? \"T\" : \"O\");\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\t// cspell:word Tnamespace\n+\t\t\t\tfor (const connection of connections) {\n \t\t\t\t\tconst states = new Set();\n-\t\t\t\t\tstateInfo = \"\";\n+\t\t\t\t\tlet stateInfo = \"\";\n \t\t\t\t\tforEachRuntime(\n \t\t\t\t\t\truntime,\n \t\t\t\t\t\truntime => {\n@@ -1471,46 +1491,49 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t\t\t\t\tif (state === false) continue;\n \t\t\t\t\t\tstateInfo = activeStateToString(state);\n \t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\tconst module = connection.module;\n-\t\t\t\tstateInfo += module.getExportsType(this.moduleGraph, strict);\n-\t\t\t\tconst oldModule = connectedModules.get(stateInfo);\n-\t\t\t\tif (oldModule === undefined) {\n-\t\t\t\t\tconnectedModules.set(stateInfo, module);\n-\t\t\t\t} else if (oldModule instanceof Set) {\n-\t\t\t\t\toldModule.add(module);\n-\t\t\t\t} else if (oldModule !== module) {\n-\t\t\t\t\tconnectedModules.set(stateInfo, new Set([oldModule, module]));\n+\t\t\t\t\tprocessConnection(connection, stateInfo);\n \t\t\t\t}\n \t\t\t}\n-\t\t\tif (connectedModules.size === 0) return graphHash;\n+\t\t\t// cspell:word Tnamespace\n+\t\t\tif (activeNamespaceModules.size === 0 && connectedModules.size === 0)\n+\t\t\t\treturn graphHash;\n \t\t\tconst connectedModulesInOrder =\n \t\t\t\tconnectedModules.size > 1\n \t\t\t\t\t? Array.from(connectedModules).sort(([a], [b]) => (a < b ? -1 : 1))\n \t\t\t\t\t: connectedModules;\n \t\t\tconst hash = createHash(\"md4\");\n+\t\t\tconst addModuleToHash = module => {\n+\t\t\t\thash.update(\n+\t\t\t\t\tthis._getModuleGraphHashBigInt(\n+\t\t\t\t\t\tthis._getChunkGraphModule(module),\n+\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\truntime\n+\t\t\t\t\t).toString(16)\n+\t\t\t\t);\n+\t\t\t};\n+\t\t\tconst addModulesToHash = modules => {\n+\t\t\t\tlet xor = ZERO_BIG_INT;\n+\t\t\t\tfor (const m of modules) {\n+\t\t\t\t\txor =\n+\t\t\t\t\t\txor ^\n+\t\t\t\t\t\tthis._getModuleGraphHashBigInt(\n+\t\t\t\t\t\t\tthis._getChunkGraphModule(m),\n+\t\t\t\t\t\t\tm,\n+\t\t\t\t\t\t\truntime\n+\t\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\thash.update(xor.toString(16));\n+\t\t\t};\n+\t\t\tif (activeNamespaceModules.size === 1)\n+\t\t\t\taddModuleToHash(activeNamespaceModules.values().next().value);\n+\t\t\telse if (activeNamespaceModules.size > 1)\n+\t\t\t\taddModulesToHash(activeNamespaceModules);\n \t\t\tfor (const [stateInfo, modules] of connectedModulesInOrder) {\n \t\t\t\thash.update(stateInfo);\n \t\t\t\tif (modules instanceof Set) {\n-\t\t\t\t\tlet xor = ZERO_BIG_INT;\n-\t\t\t\t\tfor (const m of modules) {\n-\t\t\t\t\t\txor =\n-\t\t\t\t\t\t\txor ^\n-\t\t\t\t\t\t\tthis._getModuleGraphHashBigInt(\n-\t\t\t\t\t\t\t\tthis._getChunkGraphModule(m),\n-\t\t\t\t\t\t\t\tm,\n-\t\t\t\t\t\t\t\truntime\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t}\n-\t\t\t\t\thash.update(xor.toString(16));\n+\t\t\t\t\taddModulesToHash(modules);\n \t\t\t\t} else {\n-\t\t\t\t\thash.update(\n-\t\t\t\t\t\tthis._getModuleGraphHashBigInt(\n-\t\t\t\t\t\t\tthis._getChunkGraphModule(modules),\n-\t\t\t\t\t\t\tmodules,\n-\t\t\t\t\t\t\truntime\n-\t\t\t\t\t\t).toString(16)\n-\t\t\t\t\t);\n+\t\t\t\t\taddModuleToHash(modules);\n \t\t\t\t}\n \t\t\t}\n \t\t\thash.update(graphHash);"
      },
      {
        "sha": "7e5ec90803680068681863e71d77e8bd61efaa18",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -1412,10 +1412,10 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n-\t\t\t\t\tfactory = this.dependencyFactories.get(dep.constructor);\n+\t\t\t\t\tfactory = this.dependencyFactories.get(constructor);\n \t\t\t\t\tif (factory === undefined) {\n \t\t\t\t\t\tthrow new Error(\n-\t\t\t\t\t\t\t`No module factory available for dependency type: ${dep.constructor.name}`\n+\t\t\t\t\t\t\t`No module factory available for dependency type: ${constructor.name}`\n \t\t\t\t\t\t);\n \t\t\t\t\t}\n \t\t\t\t\tinnerMap = dependencies.get(factory);"
      },
      {
        "sha": "086631dff4b01541aa1c5c59024683a01c332c54",
        "filename": "lib/InitFragment.js",
        "status": "modified",
        "additions": 21,
        "deletions": 6,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FInitFragment.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FInitFragment.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FInitFragment.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -73,13 +73,25 @@ class InitFragment {\n \t\t\t// Deduplicate fragments. If a fragment has no key, it is always included.\n \t\t\tconst keyedFragments = new Map();\n \t\t\tfor (const [fragment] of sortedFragments) {\n-\t\t\t\tif (typeof fragment.merge === \"function\") {\n+\t\t\t\tif (typeof fragment.mergeAll === \"function\") {\n+\t\t\t\t\tif (!fragment.key) {\n+\t\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t\t`InitFragment with mergeAll function must have a valid key: ${fragment.constructor.name}`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t\tconst oldValue = keyedFragments.get(fragment.key);\n+\t\t\t\t\tif (oldValue === undefined) {\n+\t\t\t\t\t\tkeyedFragments.set(fragment.key, fragment);\n+\t\t\t\t\t} else if (Array.isArray(oldValue)) {\n+\t\t\t\t\t\toldValue.push(fragment);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tkeyedFragments.set(fragment.key, [oldValue, fragment]);\n+\t\t\t\t\t}\n+\t\t\t\t\tcontinue;\n+\t\t\t\t} else if (typeof fragment.merge === \"function\") {\n \t\t\t\t\tconst oldValue = keyedFragments.get(fragment.key);\n \t\t\t\t\tif (oldValue !== undefined) {\n-\t\t\t\t\t\tkeyedFragments.set(\n-\t\t\t\t\t\t\tfragment.key || Symbol(),\n-\t\t\t\t\t\t\tfragment.merge(oldValue)\n-\t\t\t\t\t\t);\n+\t\t\t\t\t\tkeyedFragments.set(fragment.key, fragment.merge(oldValue));\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t}\n@@ -88,7 +100,10 @@ class InitFragment {\n \n \t\t\tconst concatSource = new ConcatSource();\n \t\t\tconst endContents = [];\n-\t\t\tfor (const fragment of keyedFragments.values()) {\n+\t\t\tfor (let fragment of keyedFragments.values()) {\n+\t\t\t\tif (Array.isArray(fragment)) {\n+\t\t\t\t\tfragment = fragment[0].mergeAll(fragment);\n+\t\t\t\t}\n \t\t\t\tconcatSource.add(fragment.getContent(generateContext));\n \t\t\t\tconst endContent = fragment.getEndContent(generateContext);\n \t\t\t\tif (endContent) {"
      },
      {
        "sha": "8e9fc3ba656e5d0aaad59ebcd409f19f76000639",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -25,7 +25,7 @@ const WeakTupleMap = require(\"./util/WeakTupleMap\");\n  * @returns {string}\n  */\n \n-const EMPTY_ARRAY = [];\n+const EMPTY_SET = new Set();\n \n /**\n  * @param {SortableSet<ModuleGraphConnection>} set input\n@@ -396,7 +396,7 @@ class ModuleGraph {\n \t */\n \tgetOutgoingConnections(module) {\n \t\tconst connections = this._getModuleGraphModule(module).outgoingConnections;\n-\t\treturn connections === undefined ? EMPTY_ARRAY : connections;\n+\t\treturn connections === undefined ? EMPTY_SET : connections;\n \t}\n \n \t/**"
      },
      {
        "sha": "e3822f05b58343576a9b0d6ba3aa1b661021032a",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -569,6 +569,7 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\t\t\t\t),\n \t\t\t\t\t\t\t\t\tsnapshot: options.snapshot,\n \t\t\t\t\t\t\t\t\tmaxAge: cacheOptions.maxAge,\n+\t\t\t\t\t\t\t\t\tprofile: cacheOptions.profile,\n \t\t\t\t\t\t\t\t\tallowCollectingMemory: cacheOptions.allowCollectingMemory\n \t\t\t\t\t\t\t\t}),\n \t\t\t\t\t\t\t\tcacheOptions.idleTimeout,"
      },
      {
        "sha": "7d22e130ce81b4a731e3566f996feaef8cb616b3",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 65,
        "deletions": 4,
        "changes": 69,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -561,7 +561,40 @@ class PackContentItems {\n \t\tthis.map = map;\n \t}\n \n-\tserialize({ write, snapshot, rollback, logger }) {\n+\tserialize({ write, snapshot, rollback, logger, profile }) {\n+\t\tif (profile) {\n+\t\t\twrite(false);\n+\t\t\tfor (const [key, value] of this.map) {\n+\t\t\t\tconst s = snapshot();\n+\t\t\t\ttry {\n+\t\t\t\t\twrite(key);\n+\t\t\t\t\tconst start = process.hrtime();\n+\t\t\t\t\twrite(value);\n+\t\t\t\t\tconst durationHr = process.hrtime(start);\n+\t\t\t\t\tconst duration = durationHr[0] * 1000 + durationHr[1] / 1e6;\n+\t\t\t\t\tif (duration > 1) {\n+\t\t\t\t\t\tif (duration > 500)\n+\t\t\t\t\t\t\tlogger.error(`Serialization of '${key}': ${duration} ms`);\n+\t\t\t\t\t\telse if (duration > 50)\n+\t\t\t\t\t\t\tlogger.warn(`Serialization of '${key}': ${duration} ms`);\n+\t\t\t\t\t\telse if (duration > 10)\n+\t\t\t\t\t\t\tlogger.info(`Serialization of '${key}': ${duration} ms`);\n+\t\t\t\t\t\telse if (duration > 5)\n+\t\t\t\t\t\t\tlogger.log(`Serialization of '${key}': ${duration} ms`);\n+\t\t\t\t\t\telse logger.debug(`Serialization of '${key}': ${duration} ms`);\n+\t\t\t\t\t}\n+\t\t\t\t} catch (e) {\n+\t\t\t\t\trollback(s);\n+\t\t\t\t\tif (e === NOT_SERIALIZABLE) continue;\n+\t\t\t\t\tlogger.warn(\n+\t\t\t\t\t\t`Skipped not serializable cache item '${key}': ${e.message}`\n+\t\t\t\t\t);\n+\t\t\t\t\tlogger.debug(e.stack);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\twrite(null);\n+\t\t\treturn;\n+\t\t}\n \t\t// Try to serialize all at once\n \t\tconst s = snapshot();\n \t\ttry {\n@@ -590,9 +623,32 @@ class PackContentItems {\n \t\t}\n \t}\n \n-\tdeserialize({ read }) {\n+\tdeserialize({ read, logger, profile }) {\n \t\tif (read()) {\n \t\t\tthis.map = read();\n+\t\t} else if (profile) {\n+\t\t\tconst map = new Map();\n+\t\t\tlet key = read();\n+\t\t\twhile (key !== null) {\n+\t\t\t\tconst start = process.hrtime();\n+\t\t\t\tconst value = read();\n+\t\t\t\tconst durationHr = process.hrtime(start);\n+\t\t\t\tconst duration = durationHr[0] * 1000 + durationHr[1] / 1e6;\n+\t\t\t\tif (duration > 1) {\n+\t\t\t\t\tif (duration > 100)\n+\t\t\t\t\t\tlogger.error(`Deserialization of '${key}': ${duration} ms`);\n+\t\t\t\t\telse if (duration > 20)\n+\t\t\t\t\t\tlogger.warn(`Deserialization of '${key}': ${duration} ms`);\n+\t\t\t\t\telse if (duration > 5)\n+\t\t\t\t\t\tlogger.info(`Deserialization of '${key}': ${duration} ms`);\n+\t\t\t\t\telse if (duration > 2)\n+\t\t\t\t\t\tlogger.log(`Deserialization of '${key}': ${duration} ms`);\n+\t\t\t\t\telse logger.debug(`Deserialization of '${key}': ${duration} ms`);\n+\t\t\t\t}\n+\t\t\t\tmap.set(key, value);\n+\t\t\t\tkey = read();\n+\t\t\t}\n+\t\t\tthis.map = map;\n \t\t} else {\n \t\t\tconst map = new Map();\n \t\t\tlet key = read();\n@@ -787,6 +843,7 @@ class PackFileCacheStrategy {\n \t * @param {Logger} options.logger a logger\n \t * @param {SnapshotOptions} options.snapshot options regarding snapshotting\n \t * @param {number} options.maxAge max age of cache items\n+\t * @param {boolean} options.profile track and log detailed timing information for individual cache items\n \t * @param {boolean} options.allowCollectingMemory allow to collect unused memory created during deserialization\n \t */\n \tconstructor({\n@@ -798,6 +855,7 @@ class PackFileCacheStrategy {\n \t\tlogger,\n \t\tsnapshot,\n \t\tmaxAge,\n+\t\tprofile,\n \t\tallowCollectingMemory\n \t}) {\n \t\tthis.fileSerializer = createFileSerializer(fs);\n@@ -812,6 +870,7 @@ class PackFileCacheStrategy {\n \t\tthis.version = version;\n \t\tthis.logger = logger;\n \t\tthis.maxAge = maxAge;\n+\t\tthis.profile = profile;\n \t\tthis.allowCollectingMemory = allowCollectingMemory;\n \t\tthis.snapshot = snapshot;\n \t\t/** @type {Set<string>} */\n@@ -840,7 +899,7 @@ class PackFileCacheStrategy {\n \t * @returns {Promise<Pack>} the pack\n \t */\n \t_openPack() {\n-\t\tconst { logger, cacheLocation, version } = this;\n+\t\tconst { logger, profile, cacheLocation, version } = this;\n \t\t/** @type {Snapshot} */\n \t\tlet buildSnapshot;\n \t\t/** @type {Set<string>} */\n@@ -857,6 +916,7 @@ class PackFileCacheStrategy {\n \t\t\t\tfilename: `${cacheLocation}/index.pack`,\n \t\t\t\textension: \".pack\",\n \t\t\t\tlogger,\n+\t\t\t\tprofile,\n \t\t\t\tretainedBuffer: this.allowCollectingMemory\n \t\t\t\t\t? allowCollectingMemory\n \t\t\t\t\t: undefined\n@@ -1172,7 +1232,8 @@ class PackFileCacheStrategy {\n \t\t\t\t\t\t.serialize(content, {\n \t\t\t\t\t\t\tfilename: `${this.cacheLocation}/index.pack`,\n \t\t\t\t\t\t\textension: \".pack\",\n-\t\t\t\t\t\t\tlogger: this.logger\n+\t\t\t\t\t\t\tlogger: this.logger,\n+\t\t\t\t\t\t\tprofile: this.profile\n \t\t\t\t\t\t})\n \t\t\t\t\t\t.then(() => {\n \t\t\t\t\t\t\tfor (const dep of newBuildDependencies) {"
      },
      {
        "sha": "c107408d2c6cd18afcc27332e75930b9b57c2720",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -293,6 +293,7 @@ const applyCacheDefaults = (cache, { name, mode, development }) => {\n \t\t\t);\n \t\t\tD(cache, \"hashAlgorithm\", \"md4\");\n \t\t\tD(cache, \"store\", \"pack\");\n+\t\t\tD(cache, \"profile\", false);\n \t\t\tD(cache, \"idleTimeout\", 60000);\n \t\t\tD(cache, \"idleTimeoutForInitialStore\", 0);\n \t\t\tD(cache, \"maxMemoryGenerations\", development ? 5 : Infinity);\n@@ -948,7 +949,7 @@ const applyOptimizationDefaults = (\n \t\tA(splitChunks, \"defaultSizeTypes\", () => [\"javascript\", \"unknown\"]);\n \t\tD(splitChunks, \"hidePathInfo\", production);\n \t\tD(splitChunks, \"chunks\", \"async\");\n-\t\tD(splitChunks, \"usedExports\", true);\n+\t\tD(splitChunks, \"usedExports\", optimization.usedExports === true);\n \t\tD(splitChunks, \"minChunks\", 1);\n \t\tF(splitChunks, \"minSize\", () => (production ? 20000 : 10000));\n \t\tF(splitChunks, \"minRemainingSize\", () => (development ? 0 : undefined));"
      },
      {
        "sha": "84bc730311eb5b75752dd7424c9e604feb2579c6",
        "filename": "lib/config/normalization.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fconfig%2Fnormalization.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fconfig%2Fnormalization.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fnormalization.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -131,6 +131,7 @@ const getNormalizedWebpackOptions = config => {\n \t\t\t\t\t\ttype: \"filesystem\",\n \t\t\t\t\t\tmaxMemoryGenerations: cache.maxMemoryGenerations,\n \t\t\t\t\t\tmaxAge: cache.maxAge,\n+\t\t\t\t\t\tprofile: cache.profile,\n \t\t\t\t\t\tbuildDependencies: cloneObject(cache.buildDependencies),\n \t\t\t\t\t\tcacheDirectory: cache.cacheDirectory,\n \t\t\t\t\t\tcacheLocation: cache.cacheLocation,"
      },
      {
        "sha": "e14e0d69197a317e8ec1ef0f618fcf9acc0fac1c",
        "filename": "lib/dependencies/HarmonyExportInitFragment.js",
        "status": "modified",
        "additions": 47,
        "deletions": 0,
        "changes": 47,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fdependencies%2FHarmonyExportInitFragment.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/lib%2Fdependencies%2FHarmonyExportInitFragment.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportInitFragment.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -48,6 +48,53 @@ class HarmonyExportInitFragment extends InitFragment {\n \t\tthis.unusedExports = unusedExports;\n \t}\n \n+\t/**\n+\t * @param {HarmonyExportInitFragment[]} fragments all fragments to merge\n+\t * @returns {HarmonyExportInitFragment} merged fragment\n+\t */\n+\tmergeAll(fragments) {\n+\t\tlet exportMap;\n+\t\tlet exportMapOwned = false;\n+\t\tlet unusedExports;\n+\t\tlet unusedExportsOwned = false;\n+\n+\t\tfor (const fragment of fragments) {\n+\t\t\tif (fragment.exportMap.size !== 0) {\n+\t\t\t\tif (exportMap === undefined) {\n+\t\t\t\t\texportMap = fragment.exportMap;\n+\t\t\t\t\texportMapOwned = false;\n+\t\t\t\t} else {\n+\t\t\t\t\tif (!exportMapOwned) {\n+\t\t\t\t\t\texportMap = new Map(exportMap);\n+\t\t\t\t\t\texportMapOwned = true;\n+\t\t\t\t\t}\n+\t\t\t\t\tfor (const [key, value] of fragment.exportMap) {\n+\t\t\t\t\t\tif (!exportMap.has(key)) exportMap.set(key, value);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tif (fragment.unusedExports.size !== 0) {\n+\t\t\t\tif (unusedExports === undefined) {\n+\t\t\t\t\tunusedExports = fragment.unusedExports;\n+\t\t\t\t\tunusedExportsOwned = false;\n+\t\t\t\t} else {\n+\t\t\t\t\tif (!unusedExportsOwned) {\n+\t\t\t\t\t\tunusedExports = new Set(unusedExports);\n+\t\t\t\t\t\tunusedExportsOwned = true;\n+\t\t\t\t\t}\n+\t\t\t\t\tfor (const value of fragment.unusedExports) {\n+\t\t\t\t\t\tunusedExports.add(value);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\treturn new HarmonyExportInitFragment(\n+\t\t\tthis.exportsArgument,\n+\t\t\texportMap,\n+\t\t\tunusedExports\n+\t\t);\n+\t}\n+\n \tmerge(other) {\n \t\tlet exportMap;\n \t\tif (this.exportMap.size === 0) {"
      },
      {
        "sha": "a69a837604cf5128cbdb9998725803d3c54341a5",
        "filename": "schemas/WebpackOptions.check.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/schemas%2FWebpackOptions.check.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/schemas%2FWebpackOptions.check.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.check.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f"
      },
      {
        "sha": "b3c4642f82c2ec0f362f972e499ce13797d4a3af",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -999,6 +999,10 @@\n           \"description\": \"Name for the cache. Different names will lead to different coexisting caches.\",\n           \"type\": \"string\"\n         },\n+        \"profile\": {\n+          \"description\": \"Track and log detailed timing information for individual cache items.\",\n+          \"type\": \"boolean\"\n+        },\n         \"store\": {\n           \"description\": \"When to store data to the filesystem. (pack: Store data when compiler is idle in a single file).\",\n           \"enum\": [\"pack\"]"
      },
      {
        "sha": "eff1c1e2a7c3d5c2350ddcf4e3fb70995d2ab971",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -270,7 +270,7 @@ describe(\"Defaults\", () => {\n \t\t      \"minChunks\": 1,\n \t\t      \"minRemainingSize\": undefined,\n \t\t      \"minSize\": 10000,\n-\t\t      \"usedExports\": true,\n+\t\t      \"usedExports\": false,\n \t\t    },\n \t\t    \"usedExports\": false,\n \t\t  },\n@@ -670,7 +670,9 @@ describe(\"Defaults\", () => {\n \t\t+       \"maxInitialRequests\": 30,\n \t\t@@ ... @@\n \t\t-       \"minSize\": 10000,\n+\t\t-       \"usedExports\": false,\n \t\t+       \"minSize\": 20000,\n+\t\t+       \"usedExports\": true,\n \t\t@@ ... @@\n \t\t-     \"usedExports\": false,\n \t\t+     \"usedExports\": true,\n@@ -735,7 +737,9 @@ describe(\"Defaults\", () => {\n \t\t+       \"maxInitialRequests\": 30,\n \t\t@@ ... @@\n \t\t-       \"minSize\": 10000,\n+\t\t-       \"usedExports\": false,\n \t\t+       \"minSize\": 20000,\n+\t\t+       \"usedExports\": true,\n \t\t@@ ... @@\n \t\t-     \"usedExports\": false,\n \t\t+     \"usedExports\": true,\n@@ -1489,6 +1493,7 @@ describe(\"Defaults\", () => {\n \t\t+     \"maxAge\": 5184000000,\n \t\t+     \"maxMemoryGenerations\": Infinity,\n \t\t+     \"name\": \"default-none\",\n+\t\t+     \"profile\": false,\n \t\t+     \"store\": \"pack\",\n \t\t+     \"type\": \"filesystem\",\n \t\t+     \"version\": \"\",\n@@ -1529,6 +1534,7 @@ describe(\"Defaults\", () => {\n \t\t\t+     \"maxAge\": 5184000000,\n \t\t\t+     \"maxMemoryGenerations\": 5,\n \t\t\t+     \"name\": \"default-development\",\n+\t\t\t+     \"profile\": false,\n \t\t\t+     \"store\": \"pack\",\n \t\t\t+     \"type\": \"filesystem\",\n \t\t\t+     \"version\": \"\",\n@@ -1620,7 +1626,7 @@ describe(\"Defaults\", () => {\n \t\t\t-       \"minChunks\": 1,\n \t\t\t-       \"minRemainingSize\": undefined,\n \t\t\t-       \"minSize\": 10000,\n-\t\t\t-       \"usedExports\": true,\n+\t\t\t-       \"usedExports\": false,\n \t\t\t-     },\n \t\t\t+     \"splitChunks\": false,\n \t\t`)\n@@ -1769,6 +1775,7 @@ describe(\"Defaults\", () => {\n \t\t\t+     \"maxAge\": 5184000000,\n \t\t\t+     \"maxMemoryGenerations\": Infinity,\n \t\t\t+     \"name\": \"default-none\",\n+\t\t\t+     \"profile\": false,\n \t\t\t+     \"store\": \"pack\",\n \t\t\t+     \"type\": \"filesystem\",\n \t\t\t+     \"version\": \"\","
      },
      {
        "sha": "4b218583d3b4ada457c0dbd339ee956b9f5ebbb5",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -238,6 +238,19 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"cache-profile\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Track and log detailed timing information for individual cache items.\",\n+        \"multiple\": false,\n+        \"path\": \"cache.profile\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Track and log detailed timing information for individual cache items.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"cache-store\": Object {\n     \"configs\": Array [\n       Object {"
      },
      {
        "sha": "1f052ad55c3727eeb71dcd456c148b5bc8f80774",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 29,
        "deletions": 29,
        "changes": 58,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -658,19 +658,19 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"asset app.ecd1f07cff3370e18342-1.js 6.11 KiB [emitted] [immutable] (name: app)\n+\"asset app.20731e8c55e4789a408a-1.js 6.11 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-1.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.71 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.ecd1f07cff3370e18342-1.js 6.11 KiB\n+Entrypoint app 6.71 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.20731e8c55e4789a408a-1.js 6.11 KiB\n runtime modules 2.66 KiB 4 modules\n orphan modules 118 bytes [orphan] 2 modules\n cacheable modules 272 bytes\n   ./entry-1.js + 2 modules 185 bytes [built] [code generated]\n   ./constants.js 87 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset app.b77242079c1d0deb2704-2.js 6.13 KiB [emitted] [immutable] (name: app)\n+asset app.36305eb6cd9d6aad421e-2.js 6.13 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-2.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.73 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.b77242079c1d0deb2704-2.js 6.13 KiB\n+Entrypoint app 6.73 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.36305eb6cd9d6aad421e-2.js 6.13 KiB\n runtime modules 2.66 KiB 4 modules\n orphan modules 125 bytes [orphan] 2 modules\n cacheable modules 279 bytes\n@@ -700,39 +700,39 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"asset main-45bf3783fd98957f737f.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-45bf3783fd98957f737f.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n-asset 664-174e0b26755db617ef8d.js 455 bytes [emitted] [immutable]\n-  sourceMap 664-174e0b26755db617ef8d.js.map 344 bytes [emitted] [dev]\n+\"asset main-4d9216d100d42b71ee29.js 10.3 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-4d9216d100d42b71ee29.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n+asset 664-bca314bd02016092cab9.js 455 bytes [emitted] [immutable]\n+  sourceMap 664-bca314bd02016092cab9.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-45bf3783fd98957f737f.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-45bf3783fd98957f737f.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n-asset 664-174e0b26755db617ef8d.js 455 bytes [emitted] [immutable]\n-  sourceMap 664-174e0b26755db617ef8d.js.map 344 bytes [emitted] [dev]\n+asset main-4d9216d100d42b71ee29.js 10.3 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-4d9216d100d42b71ee29.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n+asset 664-bca314bd02016092cab9.js 455 bytes [emitted] [immutable]\n+  sourceMap 664-bca314bd02016092cab9.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./b/index.js 40 bytes [built] [code generated]\n   ./b/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-9e5206c3ee78c39e412c.js 11.5 KiB [emitted] [immutable] (name: main)\n-asset 664-8406c2cea140299e69ee.js 1.5 KiB [emitted] [immutable]\n+asset main-0ff438be7b9b904d38a3.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset 664-8b8452d1081ed5563bde.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-9e5206c3ee78c39e412c.js 11.5 KiB [emitted] [immutable] (name: main)\n-asset 664-8406c2cea140299e69ee.js 1.5 KiB [emitted] [immutable]\n+asset main-0ff438be7b9b904d38a3.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset 664-8b8452d1081ed5563bde.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n@@ -1138,11 +1138,11 @@ webpack x.x.x compiled successfully in X ms\n \n assets by chunk 895 bytes (id hint: all)\n   asset c-all-b_js-3c3d3ae5b364fadfafb2.js 502 bytes [emitted] [immutable] (id hint: all)\n-  asset c-all-c_js-5982285e9907510293fa.js 393 bytes [emitted] [immutable] (id hint: all)\n+  asset c-all-c_js-5a3e032792662f68ffa4.js 393 bytes [emitted] [immutable] (id hint: all)\n asset c-runtime~main-679cac90a0c7d3895571.js 13.4 KiB [emitted] [immutable] (name: runtime~main)\n asset c-main-a443d2f54b3b7aebaf75.js 664 bytes [emitted] [immutable] (name: main)\n asset c-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 14.5 KiB = c-runtime~main-679cac90a0c7d3895571.js 13.4 KiB c-all-c_js-5982285e9907510293fa.js 393 bytes c-main-a443d2f54b3b7aebaf75.js 664 bytes\n+Entrypoint main 14.5 KiB = c-runtime~main-679cac90a0c7d3895571.js 13.4 KiB c-all-c_js-5a3e032792662f68ffa4.js 393 bytes c-main-a443d2f54b3b7aebaf75.js 664 bytes\n runtime modules 8.56 KiB 13 modules\n cacheable modules 101 bytes\n   ./c.js 61 bytes [built] [code generated]\n@@ -2441,15 +2441,15 @@ LOG from webpack.FileSystemInfo\n exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \"a-normal:\n   assets by path *.js 3.22 KiB\n-    asset 92b100c9dd880fb6fedd-92b100.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n+    asset 3ff4cb81976a33814443-3ff4cb.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.92 KiB (5.89 KiB) = 92b100c9dd880fb6fedd-92b100.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.92 KiB (5.89 KiB) = 3ff4cb81976a33814443-3ff4cb.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2468,15 +2468,15 @@ exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \n b-normal:\n   assets by path *.js 3.22 KiB\n-    asset 224aae039c610406a7c5-224aae.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n+    asset 5d9329c3b14d7be316de-5d9329.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.92 KiB (5.89 KiB) = 224aae039c610406a7c5-224aae.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.92 KiB (5.89 KiB) = 5d9329c3b14d7be316de-5d9329.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2495,8 +2495,8 @@ b-normal:\n \n a-source-map:\n   assets by path *.js 3.44 KiB\n-    asset 455b77a33a8878c30d52-455b77.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 455b77a33a8878c30d52-455b77.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n+    asset 15bc5e7a3cba409fc993-15bc5e.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 15bc5e7a3cba409fc993-15bc5e.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 399 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2507,7 +2507,7 @@ a-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 3.03 KiB (20.5 KiB) = 455b77a33a8878c30d52-455b77.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3.03 KiB (20.5 KiB) = 15bc5e7a3cba409fc993-15bc5e.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules\n@@ -2526,8 +2526,8 @@ a-source-map:\n \n b-source-map:\n   assets by path *.js 3.44 KiB\n-    asset 1710932a27591ee4a94d-171093.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 1710932a27591ee4a94d-171093.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n+    asset 34097d095846bc2527cb-34097d.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 34097d095846bc2527cb-34097d.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 395 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2538,7 +2538,7 @@ b-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 3.03 KiB (20.4 KiB) = 1710932a27591ee4a94d-171093.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3.03 KiB (20.4 KiB) = 34097d095846bc2527cb-34097d.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules\n@@ -4391,7 +4391,7 @@ exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sy\n   asset 99.bundle.js 241 bytes [emitted]\n assets by path *.wasm 1.37 KiB\n   asset 4098dd6bcb43bd54baf6.module.wasm 531 bytes [emitted] [immutable]\n-  asset 4c37dae656a11fdaac9a.module.wasm 290 bytes [emitted] [immutable]\n+  asset a0bbe50b118b7ff0648b.module.wasm 290 bytes [emitted] [immutable]\n   asset 86fec7665231a0198df8.module.wasm 156 bytes [emitted] [immutable]\n   asset 1da1d844c1509ed4d4c3.module.wasm 154 bytes [emitted] [immutable]\n   asset 2be4d707a05b1f7313ca.module.wasm 154 bytes [emitted] [immutable]"
      },
      {
        "sha": "96ae21a292371531952f4c46a3ea0ebff7599543",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/31415ecdb454dd9c5a77fb3898711ddc2634046f/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/31415ecdb454dd9c5a77fb3898711ddc2634046f/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=31415ecdb454dd9c5a77fb3898711ddc2634046f",
        "patch": "@@ -3825,6 +3825,11 @@ declare interface FileCacheOptions {\n \t */\n \tname?: string;\n \n+\t/**\n+\t * Track and log detailed timing information for individual cache items.\n+\t */\n+\tprofile?: boolean;\n+\n \t/**\n \t * When to store data to the filesystem. (pack: Store data when compiler is idle in a single file).\n \t */"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/14319",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/14319/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/14319/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/14319/events",
    "html_url": "https://github.com/webpack/webpack/pull/14319",
    "id": 1006418964,
    "node_id": "PR_kwDOADgiC84sPMqR",
    "number": 14319,
    "title": "add `experiments.cacheUnaffected`",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2021-09-24T12:34:36Z",
    "updated_at": "2021-09-24T16:42:27Z",
    "closed_at": "2021-09-24T16:42:19Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/14319",
      "html_url": "https://github.com/webpack/webpack/pull/14319",
      "diff_url": "https://github.com/webpack/webpack/pull/14319.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/14319.patch",
      "merged_at": "2021-09-24T16:42:19Z"
    },
    "body": "add MemCache for memory caching per module which is invalidated when module or any referenced modules changes\r\n\r\nadd `cache.cacheUnaffected` (type: memory) resp `cache.memoryCacheUnaffected` (type: filesystem)\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* add `experiments.cacheUnaffected`\r\n* add `cache.cacheUnaffected` (type: memory) resp `cache.memoryCacheUnaffected` (type: filesystem)\r\n* `experiments.futureDefaults` enables `experiments.cacheUnaffected`\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/14319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/14319/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5f510f6373645913562c890cdcc8b303a6cc12d9",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -880,6 +880,10 @@ export interface WebpackOptions {\n  * Options object for in-memory caching.\n  */\n export interface MemoryCacheOptions {\n+\t/**\n+\t * Additionally cache computation of modules that are unchanged and reference only unchanged modules.\n+\t */\n+\tcacheUnaffected?: boolean;\n \t/**\n \t * Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\n \t */\n@@ -950,6 +954,10 @@ export interface FileCacheOptions {\n \t * Number of generations unused cache entries stay in memory cache at minimum (0 = no memory cache used, 1 = may be removed after unused for a single compilation, ..., Infinity: kept forever). Cache entries will be deserialized from disk when removed from memory cache.\n \t */\n \tmaxMemoryGenerations?: number;\n+\t/**\n+\t * Additionally cache computation of modules that are unchanged and reference only unchanged modules in memory.\n+\t */\n+\tmemoryCacheUnaffected?: boolean;\n \t/**\n \t * Name for the cache. Different names will lead to different coexisting caches.\n \t */\n@@ -1106,6 +1114,10 @@ export interface Experiments {\n \t * Build http(s): urls using a lockfile and resource content cache.\n \t */\n \tbuildHttp?: boolean | HttpUriOptions;\n+\t/**\n+\t * Enable additional in memory caching of modules that are unchanged and reference only unchanged modules.\n+\t */\n+\tcacheUnaffected?: boolean;\n \t/**\n \t * Apply defaults of next major version.\n \t */"
      },
      {
        "sha": "15eadc358dca07a9069441790df6ab12f7875357",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 12,
        "deletions": 5,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -1376,22 +1376,29 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t/**\n \t * @param {Module} module the module\n \t * @param {RuntimeSpec} runtime the runtime\n-\t * @param {Set<string>} items runtime requirements to be added (ownership of this Set is given to ChunkGraph)\n+\t * @param {Set<string>} items runtime requirements to be added (ownership of this Set is given to ChunkGraph when transferOwnership not false)\n+\t * @param {boolean} transferOwnership true: transfer ownership of the items object, false: items is immutable and shared and won't be modified\n \t * @returns {void}\n \t */\n-\taddModuleRuntimeRequirements(module, runtime, items) {\n+\taddModuleRuntimeRequirements(\n+\t\tmodule,\n+\t\truntime,\n+\t\titems,\n+\t\ttransferOwnership = true\n+\t) {\n \t\tconst cgm = this._getChunkGraphModule(module);\n \t\tconst runtimeRequirementsMap = cgm.runtimeRequirements;\n \t\tif (runtimeRequirementsMap === undefined) {\n \t\t\tconst map = new RuntimeSpecMap();\n-\t\t\tmap.set(runtime, items);\n+\t\t\t// TODO avoid cloning item and track ownership instead\n+\t\t\tmap.set(runtime, transferOwnership ? items : new Set(items));\n \t\t\tcgm.runtimeRequirements = map;\n \t\t\treturn;\n \t\t}\n \t\truntimeRequirementsMap.update(runtime, runtimeRequirements => {\n \t\t\tif (runtimeRequirements === undefined) {\n-\t\t\t\treturn items;\n-\t\t\t} else if (runtimeRequirements.size >= items.size) {\n+\t\t\t\treturn transferOwnership ? items : new Set(items);\n+\t\t\t} else if (!transferOwnership || runtimeRequirements.size >= items.size) {\n \t\t\t\tfor (const item of items) runtimeRequirements.add(item);\n \t\t\t\treturn runtimeRequirements;\n \t\t\t} else {"
      },
      {
        "sha": "d8846b966c0d98c04161ec080cb074ebc24977fb",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 191,
        "deletions": 11,
        "changes": 202,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -38,6 +38,7 @@ const {\n \ttryRunOrWebpackError\n } = require(\"./HookWebpackError\");\n const MainTemplate = require(\"./MainTemplate\");\n+const MemCache = require(\"./MemCache\");\n const Module = require(\"./Module\");\n const ModuleDependencyError = require(\"./ModuleDependencyError\");\n const ModuleDependencyWarning = require(\"./ModuleDependencyWarning\");\n@@ -76,7 +77,7 @@ const {\n \tcreateFakeHook\n } = require(\"./util/deprecation\");\n const processAsyncTree = require(\"./util/processAsyncTree\");\n-const { getRuntimeKey } = require(\"./util/runtime\");\n+const { getRuntimeKey, RuntimeSpecMap } = require(\"./util/runtime\");\n const { isSourceEqual } = require(\"./util/source\");\n \n /** @template T @typedef {import(\"tapable\").AsArray<T>} AsArray<T> */\n@@ -892,6 +893,10 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t};\n \t\tdefineRemovedModuleTemplates(this.moduleTemplates);\n \n+\t\t/** @type {MemCache | undefined} */\n+\t\tthis.memCache = undefined;\n+\t\t/** @type {WeakMap<Module, MemCache> | undefined} */\n+\t\tthis.moduleMemCaches = undefined;\n \t\tthis.moduleGraph = new ModuleGraph();\n \t\t/** @type {ChunkGraph} */\n \t\tthis.chunkGraph = undefined;\n@@ -2012,6 +2017,79 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t});\n \t}\n \n+\t_computeAffectedModules(modules) {\n+\t\tconst moduleMemCacheCache = this.compiler.moduleMemCaches;\n+\t\tif (!moduleMemCacheCache) return;\n+\t\tif (!this.moduleMemCaches) this.moduleMemCaches = new WeakMap();\n+\t\tif (!this.memCache) this.memCache = new MemCache();\n+\t\tconst { moduleGraph, memCache, moduleMemCaches } = this;\n+\t\tconst affectedModules = new Set();\n+\t\tconst infectedModules = new Set();\n+\t\tlet statNew = 0;\n+\t\tlet statChanged = 0;\n+\t\tlet statUnchanged = 0;\n+\t\tlet statWithoutHash = 0;\n+\t\tfor (const module of modules) {\n+\t\t\tconst hash = module.buildInfo && module.buildInfo.hash;\n+\t\t\tif (typeof hash === \"string\") {\n+\t\t\t\tconst cachedMemCache = moduleMemCacheCache.get(module);\n+\t\t\t\tif (cachedMemCache === undefined) {\n+\t\t\t\t\t// create a new entry\n+\t\t\t\t\tmoduleMemCacheCache.set(module, {\n+\t\t\t\t\t\thash: hash,\n+\t\t\t\t\t\tmemCache\n+\t\t\t\t\t});\n+\t\t\t\t\tmoduleMemCaches.set(module, memCache);\n+\t\t\t\t\taffectedModules.add(module);\n+\t\t\t\t\tstatNew++;\n+\t\t\t\t} else if (cachedMemCache.hash === hash) {\n+\t\t\t\t\t// keep the old mem cache\n+\t\t\t\t\tmoduleMemCaches.set(module, cachedMemCache.memCache);\n+\t\t\t\t\tstatUnchanged++;\n+\t\t\t\t} else {\n+\t\t\t\t\t// use a new one\n+\t\t\t\t\tmoduleMemCaches.set(module, memCache);\n+\t\t\t\t\taffectedModules.add(module);\n+\t\t\t\t\tcachedMemCache.hash = hash;\n+\t\t\t\t\tcachedMemCache.memCache = memCache;\n+\t\t\t\t\tstatChanged++;\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tinfectedModules.add(module);\n+\t\t\t\tstatWithoutHash++;\n+\t\t\t}\n+\t\t}\n+\t\tfor (const module of infectedModules) {\n+\t\t\tfor (const referencingModule of moduleGraph\n+\t\t\t\t.getIncomingConnectionsByOriginModule(module)\n+\t\t\t\t.keys()) {\n+\t\t\t\tif (infectedModules.has(referencingModule)) continue;\n+\t\t\t\tinfectedModules.add(referencingModule);\n+\t\t\t}\n+\t\t}\n+\t\tfor (const module of affectedModules) {\n+\t\t\tfor (const referencingModule of moduleGraph\n+\t\t\t\t.getIncomingConnectionsByOriginModule(module)\n+\t\t\t\t.keys()) {\n+\t\t\t\tif (!referencingModule) continue;\n+\t\t\t\tif (infectedModules.has(referencingModule)) continue;\n+\t\t\t\tif (affectedModules.has(referencingModule)) continue;\n+\t\t\t\taffectedModules.add(referencingModule);\n+\t\t\t\tmoduleMemCaches.set(referencingModule, memCache);\n+\t\t\t}\n+\t\t}\n+\t\tthis.logger.log(\n+\t\t\t`${Math.round(\n+\t\t\t\t(100 * (affectedModules.size + infectedModules.size)) /\n+\t\t\t\t\tthis.modules.size\n+\t\t\t)}% (${affectedModules.size} affected + ${\n+\t\t\t\tinfectedModules.size\n+\t\t\t} infected of ${\n+\t\t\t\tthis.modules.size\n+\t\t\t}) modules flagged as affected (${statNew} new modules, ${statChanged} changed, ${statUnchanged} unchanged, ${statWithoutHash} without hash)`\n+\t\t);\n+\t}\n+\n \tfinish(callback) {\n \t\tthis.factorizeQueue.clear();\n \t\tif (this.profile) {\n@@ -2192,24 +2270,37 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t);\n \t\t\tthis.logger.timeEnd(\"finish module profiles\");\n \t\t}\n+\t\tthis.logger.time(\"compute affected modules\");\n+\t\tthis._computeAffectedModules(this.modules);\n+\t\tthis.logger.timeEnd(\"compute affected modules\");\n \t\tthis.logger.time(\"finish modules\");\n-\t\tconst { modules } = this;\n+\t\tconst { modules, moduleMemCaches } = this;\n \t\tthis.hooks.finishModules.callAsync(modules, err => {\n \t\t\tthis.logger.timeEnd(\"finish modules\");\n \t\t\tif (err) return callback(err);\n \n \t\t\t// extract warnings and errors from modules\n-\t\t\tthis.logger.time(\"report dependency errors and warnings\");\n \t\t\tthis.moduleGraph.freeze();\n+\t\t\t// TODO keep a cacheToken (= {}) for each module in the graph\n+\t\t\t// create a new one per compilation and flag all updated files\n+\t\t\t// and parents with it\n+\t\t\tthis.logger.time(\"report dependency errors and warnings\");\n \t\t\tfor (const module of modules) {\n-\t\t\t\tthis.reportDependencyErrorsAndWarnings(module, [module]);\n+\t\t\t\t// TODO only run for modules with changed cacheToken\n+\t\t\t\t// global WeakMap<CacheToken, WeakSet<Module>> to keep modules without errors/warnings\n+\t\t\t\tconst memCache = moduleMemCaches && moduleMemCaches.get(module);\n+\t\t\t\tif (memCache && memCache.get(module, \"noWarningsOrErrors\")) continue;\n+\t\t\t\tlet hasProblems = this.reportDependencyErrorsAndWarnings(module, [\n+\t\t\t\t\tmodule\n+\t\t\t\t]);\n \t\t\t\tconst errors = module.getErrors();\n \t\t\t\tif (errors !== undefined) {\n \t\t\t\t\tfor (const error of errors) {\n \t\t\t\t\t\tif (!error.module) {\n \t\t\t\t\t\t\terror.module = module;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tthis.errors.push(error);\n+\t\t\t\t\t\thasProblems = true;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tconst warnings = module.getWarnings();\n@@ -2219,8 +2310,11 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t\t\twarning.module = module;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tthis.warnings.push(warning);\n+\t\t\t\t\t\thasProblems = true;\n \t\t\t\t\t}\n \t\t\t\t}\n+\t\t\t\tif (!hasProblems && memCache)\n+\t\t\t\t\tmemCache.set(module, \"noWarningsOrErrors\", true);\n \t\t\t}\n \t\t\tthis.moduleGraph.unfreeze();\n \t\t\tthis.logger.timeEnd(\"report dependency errors and warnings\");\n@@ -2577,9 +2671,10 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t/**\n \t * @param {Module} module module to report from\n \t * @param {DependenciesBlock[]} blocks blocks to report from\n-\t * @returns {void}\n+\t * @returns {boolean} true, when it has warnings or errors\n \t */\n \treportDependencyErrorsAndWarnings(module, blocks) {\n+\t\tlet hasProblems = false;\n \t\tfor (let indexBlock = 0; indexBlock < blocks.length; indexBlock++) {\n \t\t\tconst block = blocks[indexBlock];\n \t\t\tconst dependencies = block.dependencies;\n@@ -2594,6 +2689,7 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \n \t\t\t\t\t\tconst warning = new ModuleDependencyWarning(module, w, d.loc);\n \t\t\t\t\t\tthis.warnings.push(warning);\n+\t\t\t\t\t\thasProblems = true;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tconst errors = d.getErrors(this.moduleGraph);\n@@ -2603,12 +2699,15 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \n \t\t\t\t\t\tconst error = new ModuleDependencyError(module, e, d.loc);\n \t\t\t\t\t\tthis.errors.push(error);\n+\t\t\t\t\t\thasProblems = true;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \n-\t\t\tthis.reportDependencyErrorsAndWarnings(module, block.blocks);\n+\t\t\tif (this.reportDependencyErrorsAndWarnings(module, block.blocks))\n+\t\t\t\thasProblems = true;\n \t\t}\n+\t\treturn hasProblems;\n \t}\n \n \tcodeGeneration(callback) {\n@@ -2796,12 +2895,41 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\tchunkGraphEntries = this._getChunkGraphEntries()\n \t} = {}) {\n \t\tconst context = { chunkGraph, codeGenerationResults };\n+\t\tconst { moduleMemCaches } = this;\n+\t\tthis.logger.time(\"runtime requirements.modules\");\n \t\tconst additionalModuleRuntimeRequirements =\n \t\t\tthis.hooks.additionalModuleRuntimeRequirements;\n \t\tconst runtimeRequirementInModule = this.hooks.runtimeRequirementInModule;\n \t\tfor (const module of modules) {\n \t\t\tif (chunkGraph.getNumberOfModuleChunks(module) > 0) {\n+\t\t\t\tconst memCache =\n+\t\t\t\t\tmoduleMemCaches &&\n+\t\t\t\t\t// modules with async blocks depend on the chunk graph and can't be cached that way\n+\t\t\t\t\tmodule.blocks.length === 0 &&\n+\t\t\t\t\tmoduleMemCaches.get(module);\n+\t\t\t\t/** @type {RuntimeSpecMap<Set<string>>} */\n+\t\t\t\tconst moduleRuntimeRequirementsMemCache =\n+\t\t\t\t\tmemCache &&\n+\t\t\t\t\tmemCache.provide(\n+\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\"moduleRuntimeRequirements\",\n+\t\t\t\t\t\t() => new RuntimeSpecMap()\n+\t\t\t\t\t);\n \t\t\t\tfor (const runtime of chunkGraph.getModuleRuntimes(module)) {\n+\t\t\t\t\tif (moduleRuntimeRequirementsMemCache) {\n+\t\t\t\t\t\tconst cached = moduleRuntimeRequirementsMemCache.get(runtime);\n+\t\t\t\t\t\tif (cached !== undefined) {\n+\t\t\t\t\t\t\tif (cached !== null) {\n+\t\t\t\t\t\t\t\tchunkGraph.addModuleRuntimeRequirements(\n+\t\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\t\truntime,\n+\t\t\t\t\t\t\t\t\tcached,\n+\t\t\t\t\t\t\t\t\tfalse\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n \t\t\t\t\tlet set;\n \t\t\t\t\tconst runtimeRequirements =\n \t\t\t\t\t\tcodeGenerationResults.getRuntimeRequirements(module, runtime);\n@@ -2810,6 +2938,9 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t\t} else if (additionalModuleRuntimeRequirements.isUsed()) {\n \t\t\t\t\t\tset = new Set();\n \t\t\t\t\t} else {\n+\t\t\t\t\t\tif (moduleRuntimeRequirementsMemCache) {\n+\t\t\t\t\t\t\tmoduleRuntimeRequirementsMemCache.set(runtime, null);\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tadditionalModuleRuntimeRequirements.call(module, set, context);\n@@ -2818,11 +2949,29 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t\t\tconst hook = runtimeRequirementInModule.get(r);\n \t\t\t\t\t\tif (hook !== undefined) hook.call(module, set, context);\n \t\t\t\t\t}\n-\t\t\t\t\tchunkGraph.addModuleRuntimeRequirements(module, runtime, set);\n+\t\t\t\t\tif (set.size === 0) {\n+\t\t\t\t\t\tif (moduleRuntimeRequirementsMemCache) {\n+\t\t\t\t\t\t\tmoduleRuntimeRequirementsMemCache.set(runtime, null);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tif (moduleRuntimeRequirementsMemCache) {\n+\t\t\t\t\t\t\tmoduleRuntimeRequirementsMemCache.set(runtime, set);\n+\t\t\t\t\t\t\tchunkGraph.addModuleRuntimeRequirements(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\truntime,\n+\t\t\t\t\t\t\t\tset,\n+\t\t\t\t\t\t\t\tfalse\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tchunkGraph.addModuleRuntimeRequirements(module, runtime, set);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\tthis.logger.timeEnd(\"runtime requirements.modules\");\n \n+\t\tthis.logger.time(\"runtime requirements.chunks\");\n \t\tfor (const chunk of chunks) {\n \t\t\tconst set = new Set();\n \t\t\tfor (const module of chunkGraph.getChunkModulesIterable(chunk)) {\n@@ -2840,7 +2989,9 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \n \t\t\tchunkGraph.addChunkRuntimeRequirements(chunk, set);\n \t\t}\n+\t\tthis.logger.timeEnd(\"runtime requirements.chunks\");\n \n+\t\tthis.logger.time(\"runtime requirements.entries\");\n \t\tfor (const treeEntry of chunkGraphEntries) {\n \t\t\tconst set = new Set();\n \t\t\tfor (const chunk of treeEntry.getAllReferencedChunks()) {\n@@ -2863,6 +3014,7 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \n \t\t\tchunkGraph.addTreeRuntimeRequirements(treeEntry, set);\n \t\t}\n+\t\tthis.logger.timeEnd(\"runtime requirements.entries\");\n \t}\n \n \t// TODO webpack 6 make chunkGraph argument non-optional\n@@ -3207,12 +3359,35 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \n \tcreateModuleHashes() {\n \t\tlet statModulesHashed = 0;\n-\t\tconst { chunkGraph, runtimeTemplate } = this;\n+\t\tlet statModulesFromCache = 0;\n+\t\tconst { chunkGraph, runtimeTemplate, moduleMemCaches } = this;\n \t\tconst { hashFunction, hashDigest, hashDigestLength } = this.outputOptions;\n \t\tfor (const module of this.modules) {\n+\t\t\tconst memCache =\n+\t\t\t\tmoduleMemCaches &&\n+\t\t\t\t// modules with async blocks depend on the chunk graph and can't be cached that way\n+\t\t\t\tmodule.blocks.length === 0 &&\n+\t\t\t\tmoduleMemCaches.get(module);\n+\t\t\t/** @type {RuntimeSpecMap<string>} */\n+\t\t\tconst moduleHashesMemCache =\n+\t\t\t\tmemCache &&\n+\t\t\t\tmemCache.provide(module, \"moduleHashes\", () => new RuntimeSpecMap());\n \t\t\tfor (const runtime of chunkGraph.getModuleRuntimes(module)) {\n+\t\t\t\tif (moduleHashesMemCache) {\n+\t\t\t\t\tconst digest = moduleHashesMemCache.get(runtime);\n+\t\t\t\t\tif (digest !== undefined) {\n+\t\t\t\t\t\tchunkGraph.setModuleHashes(\n+\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\truntime,\n+\t\t\t\t\t\t\tdigest,\n+\t\t\t\t\t\t\tdigest.substr(0, hashDigestLength)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tstatModulesFromCache++;\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\t\t\t\t}\n \t\t\t\tstatModulesHashed++;\n-\t\t\t\tthis._createModuleHash(\n+\t\t\t\tconst digest = this._createModuleHash(\n \t\t\t\t\tmodule,\n \t\t\t\t\tchunkGraph,\n \t\t\t\t\truntime,\n@@ -3221,11 +3396,16 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t\thashDigest,\n \t\t\t\t\thashDigestLength\n \t\t\t\t);\n+\t\t\t\tif (moduleHashesMemCache) {\n+\t\t\t\t\tmoduleHashesMemCache.set(runtime, digest);\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n \t\tthis.logger.log(\n-\t\t\t`${statModulesHashed} modules hashed (${\n-\t\t\t\tMath.round((100 * statModulesHashed) / this.modules.size) / 100\n+\t\t\t`${statModulesHashed} modules hashed, ${statModulesFromCache} from cache (${\n+\t\t\t\tMath.round(\n+\t\t\t\t\t(100 * (statModulesHashed + statModulesFromCache)) / this.modules.size\n+\t\t\t\t) / 100\n \t\t\t} variants per module in average)`\n \t\t);\n \t}"
      },
      {
        "sha": "f5d1d3039ee7a93edd50f7d73a31fc610397c768",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -41,6 +41,7 @@ const { isSourceEqual } = require(\"./util/source\");\n /** @typedef {import(\"../declarations/WebpackOptions\").WebpackPluginInstance} WebpackPluginInstance */\n /** @typedef {import(\"./Chunk\")} Chunk */\n /** @typedef {import(\"./FileSystemInfo\").FileSystemInfoEntry} FileSystemInfoEntry */\n+/** @typedef {import(\"./MemCache\")} MemCache */\n /** @typedef {import(\"./Module\")} Module */\n /** @typedef {import(\"./util/fs\").InputFileSystem} InputFileSystem */\n /** @typedef {import(\"./util/fs\").IntermediateFileSystem} IntermediateFileSystem */\n@@ -247,6 +248,9 @@ class Compiler {\n \n \t\tthis.cache = new Cache();\n \n+\t\t/** @type {WeakMap<Module, { hash: string, memCache: MemCache }> | undefined} */\n+\t\tthis.moduleMemCaches = undefined;\n+\n \t\tthis.compilerPath = \"\";\n \n \t\t/** @type {boolean} */"
      },
      {
        "sha": "b98b222e260ae47d0f4c62121d46fc3ba7cfe64e",
        "filename": "lib/FlagDependencyExportsPlugin.js",
        "status": "modified",
        "additions": 43,
        "deletions": 16,
        "changes": 59,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FFlagDependencyExportsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FFlagDependencyExportsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyExportsPlugin.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -28,12 +28,14 @@ class FlagDependencyExportsPlugin {\n \t\t\tcompilation => {\n \t\t\t\tconst moduleGraph = compilation.moduleGraph;\n \t\t\t\tconst cache = compilation.getCache(\"FlagDependencyExportsPlugin\");\n+\t\t\t\tconst { moduleMemCaches } = compilation;\n \t\t\t\tcompilation.hooks.finishModules.tapAsync(\n \t\t\t\t\t\"FlagDependencyExportsPlugin\",\n \t\t\t\t\t(modules, callback) => {\n \t\t\t\t\t\tconst logger = compilation.getLogger(\n \t\t\t\t\t\t\t\"webpack.FlagDependencyExportsPlugin\"\n \t\t\t\t\t\t);\n+\t\t\t\t\t\tlet statRestoredFromMemCache = 0;\n \t\t\t\t\t\tlet statRestoredFromCache = 0;\n \t\t\t\t\t\tlet statNoExports = 0;\n \t\t\t\t\t\tlet statFlaggedUncached = 0;\n@@ -58,16 +60,22 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\t\tmodule.buildInfo.cacheable !== true ||\n-\t\t\t\t\t\t\t\t\ttypeof module.buildInfo.hash !== \"string\"\n-\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\tif (typeof module.buildInfo.hash !== \"string\") {\n \t\t\t\t\t\t\t\t\tstatFlaggedUncached++;\n \t\t\t\t\t\t\t\t\t// Enqueue uncacheable module for determining the exports\n \t\t\t\t\t\t\t\t\tqueue.enqueue(module);\n \t\t\t\t\t\t\t\t\texportsInfo.setHasProvideInfo();\n \t\t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tconst memCache = moduleMemCaches && moduleMemCaches.get(module);\n+\t\t\t\t\t\t\t\tconst memCacheValue = memCache && memCache.get(this, module);\n+\t\t\t\t\t\t\t\tif (memCacheValue !== undefined) {\n+\t\t\t\t\t\t\t\t\tstatRestoredFromMemCache++;\n+\t\t\t\t\t\t\t\t\tmoduleGraph\n+\t\t\t\t\t\t\t\t\t\t.getExportsInfo(module)\n+\t\t\t\t\t\t\t\t\t\t.restoreProvided(memCacheValue);\n+\t\t\t\t\t\t\t\t\treturn callback();\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tcache.get(\n \t\t\t\t\t\t\t\t\tmodule.identifier(),\n \t\t\t\t\t\t\t\t\tmodule.buildInfo.hash,\n@@ -94,7 +102,9 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\tif (err) return callback(err);\n \n \t\t\t\t\t\t\t\t/** @type {Set<Module>} */\n-\t\t\t\t\t\t\t\tconst modulesToStore = new Set();\n+\t\t\t\t\t\t\t\tconst modulesToStorePersistent = new Set();\n+\t\t\t\t\t\t\t\t/** @type {Set<Module>} */\n+\t\t\t\t\t\t\t\tconst modulesToStoreTransient = new Set();\n \n \t\t\t\t\t\t\t\t/** @type {Map<Module, Set<Module>>} */\n \t\t\t\t\t\t\t\tconst dependencies = new Map();\n@@ -328,7 +338,9 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t}\n \n \t\t\t\t\t\t\t\t\tif (cacheable) {\n-\t\t\t\t\t\t\t\t\t\tmodulesToStore.add(module);\n+\t\t\t\t\t\t\t\t\t\tmodulesToStorePersistent.add(module);\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tmodulesToStoreTransient.add(module);\n \t\t\t\t\t\t\t\t\t}\n \n \t\t\t\t\t\t\t\t\tif (changed) {\n@@ -340,11 +352,12 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\tlogger.log(\n \t\t\t\t\t\t\t\t\t`${Math.round(\n \t\t\t\t\t\t\t\t\t\t(100 * (statFlaggedUncached + statNotCached)) /\n-\t\t\t\t\t\t\t\t\t\t\t(statRestoredFromCache +\n+\t\t\t\t\t\t\t\t\t\t\t(statRestoredFromMemCache +\n+\t\t\t\t\t\t\t\t\t\t\t\tstatRestoredFromCache +\n \t\t\t\t\t\t\t\t\t\t\t\tstatNotCached +\n \t\t\t\t\t\t\t\t\t\t\t\tstatFlaggedUncached +\n \t\t\t\t\t\t\t\t\t\t\t\tstatNoExports)\n-\t\t\t\t\t\t\t\t\t)}% of exports of modules have been determined (${statNoExports} no declared exports, ${statNotCached} not cached, ${statFlaggedUncached} flagged uncacheable, ${statRestoredFromCache} from cache, ${\n+\t\t\t\t\t\t\t\t\t)}% of exports of modules have been determined (${statNoExports} no declared exports, ${statNotCached} not cached, ${statFlaggedUncached} flagged uncacheable, ${statRestoredFromCache} from cache, ${statRestoredFromMemCache} from mem cache, ${\n \t\t\t\t\t\t\t\t\t\tstatQueueItemsProcessed -\n \t\t\t\t\t\t\t\t\t\tstatNotCached -\n \t\t\t\t\t\t\t\t\t\tstatFlaggedUncached\n@@ -353,26 +366,40 @@ class FlagDependencyExportsPlugin {\n \n \t\t\t\t\t\t\t\tlogger.time(\"store provided exports into cache\");\n \t\t\t\t\t\t\t\tasyncLib.each(\n-\t\t\t\t\t\t\t\t\tmodulesToStore,\n+\t\t\t\t\t\t\t\t\tmodulesToStorePersistent,\n \t\t\t\t\t\t\t\t\t(module, callback) => {\n-\t\t\t\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\t\t\t\tmodule.buildInfo.cacheable !== true ||\n-\t\t\t\t\t\t\t\t\t\t\ttypeof module.buildInfo.hash !== \"string\"\n-\t\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\tif (typeof module.buildInfo.hash !== \"string\") {\n \t\t\t\t\t\t\t\t\t\t\t// not cacheable\n \t\t\t\t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\tconst cachedData = moduleGraph\n+\t\t\t\t\t\t\t\t\t\t\t.getExportsInfo(module)\n+\t\t\t\t\t\t\t\t\t\t\t.getRestoreProvidedData();\n+\t\t\t\t\t\t\t\t\t\tconst memCache =\n+\t\t\t\t\t\t\t\t\t\t\tmoduleMemCaches && moduleMemCaches.get(module);\n+\t\t\t\t\t\t\t\t\t\tif (memCache) {\n+\t\t\t\t\t\t\t\t\t\t\tmemCache.set(this, module, cachedData);\n+\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\tcache.store(\n \t\t\t\t\t\t\t\t\t\t\tmodule.identifier(),\n \t\t\t\t\t\t\t\t\t\t\tmodule.buildInfo.hash,\n-\t\t\t\t\t\t\t\t\t\t\tmoduleGraph\n-\t\t\t\t\t\t\t\t\t\t\t\t.getExportsInfo(module)\n-\t\t\t\t\t\t\t\t\t\t\t\t.getRestoreProvidedData(),\n+\t\t\t\t\t\t\t\t\t\t\tcachedData,\n \t\t\t\t\t\t\t\t\t\t\tcallback\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t},\n \t\t\t\t\t\t\t\t\terr => {\n \t\t\t\t\t\t\t\t\t\tlogger.timeEnd(\"store provided exports into cache\");\n+\t\t\t\t\t\t\t\t\t\tif (moduleMemCaches) {\n+\t\t\t\t\t\t\t\t\t\t\tfor (const module of modulesToStoreTransient) {\n+\t\t\t\t\t\t\t\t\t\t\t\tconst memCache = moduleMemCaches.get(module);\n+\t\t\t\t\t\t\t\t\t\t\t\tif (memCache) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\tconst cachedData = moduleGraph\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getExportsInfo(module)\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getRestoreProvidedData();\n+\t\t\t\t\t\t\t\t\t\t\t\t\tmemCache.set(this, module, cachedData);\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\tcallback(err);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t);"
      },
      {
        "sha": "a6cbe5c527f54fb57bf2cdb11fc13f53c5bf52bc",
        "filename": "lib/MemCache.js",
        "status": "added",
        "additions": 45,
        "deletions": 0,
        "changes": 45,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FMemCache.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FMemCache.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FMemCache.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -0,0 +1,45 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const WeakTupleMap = require(\"./util/WeakTupleMap\");\n+\n+class MemCache {\n+\tconstructor() {\n+\t\tthis._cache = new WeakTupleMap();\n+\t}\n+\n+\t/**\n+\t * @template {any[]} T\n+\t * @template V\n+\t * @param {T} args arguments\n+\t * @returns {V | undefined} cached value\n+\t */\n+\tget(...args) {\n+\t\treturn this._cache.get(...args);\n+\t}\n+\n+\t/**\n+\t * @template {[...any[], any]} T\n+\t * @param {T} args arguments\n+\t * @returns {void}\n+\t */\n+\tset(...args) {\n+\t\tthis._cache.set(...args);\n+\t}\n+\n+\t/**\n+\t * @template {[...any[], (...args: any[]) => V]} T\n+\t * @template V\n+\t * @param {T} args arguments\n+\t * @returns {V} computed value or cached\n+\t */\n+\tprovide(...args) {\n+\t\treturn this._cache.provide(...args);\n+\t}\n+}\n+\n+module.exports = MemCache;"
      },
      {
        "sha": "1b7ec57b5fbce6cf7fb24ca3a45a16d6bdab0b0e",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -544,6 +544,14 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n \t\t\t\t\t\tnew MemoryCachePlugin().apply(compiler);\n \t\t\t\t\t}\n+\t\t\t\t\tif (cacheOptions.cacheUnaffected) {\n+\t\t\t\t\t\tif (!options.experiments.cacheUnaffected) {\n+\t\t\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t\t\t\"'cache.cacheUnaffected: true' is only allowed when 'experiments.cacheUnaffected' is enabled\"\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tcompiler.moduleMemCaches = new WeakMap();\n+\t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t\tcase \"filesystem\": {\n@@ -563,6 +571,14 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\t\tmaxGenerations: cacheOptions.maxMemoryGenerations\n \t\t\t\t\t\t}).apply(compiler);\n \t\t\t\t\t}\n+\t\t\t\t\tif (cacheOptions.memoryCacheUnaffected) {\n+\t\t\t\t\t\tif (!options.experiments.cacheUnaffected) {\n+\t\t\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t\t\t\"'cache.memoryCacheUnaffected: true' is only allowed when 'experiments.cacheUnaffected' is enabled\"\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tcompiler.moduleMemCaches = new WeakMap();\n+\t\t\t\t\t}\n \t\t\t\t\tswitch (cacheOptions.store) {\n \t\t\t\t\t\tcase \"pack\": {\n \t\t\t\t\t\t\tconst IdleFileCachePlugin = require(\"./cache/IdleFileCachePlugin\");"
      },
      {
        "sha": "64ffc7e5eb46b90e616fd84f71fe2a335b8a641f",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 12,
        "deletions": 4,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -159,20 +159,21 @@ const applyWebpackOptionsDefaults = options => {\n \tD(options, \"recordsInputPath\", false);\n \tD(options, \"recordsOutputPath\", false);\n \n+\tapplyExperimentsDefaults(options.experiments, { production, development });\n+\n \tF(options, \"cache\", () =>\n \t\tdevelopment ? { type: /** @type {\"memory\"} */ (\"memory\") } : false\n \t);\n \tapplyCacheDefaults(options.cache, {\n \t\tname: name || \"default\",\n \t\tmode: mode || \"production\",\n-\t\tdevelopment\n+\t\tdevelopment,\n+\t\tcacheUnaffected: options.experiments.cacheUnaffected\n \t});\n \tconst cache = !!options.cache;\n \n \tapplySnapshotDefaults(options.snapshot, { production });\n \n-\tapplyExperimentsDefaults(options.experiments, { production, development });\n-\n \tapplyModuleDefaults(options.module, {\n \t\tcache,\n \t\tsyncWebAssembly: options.experiments.syncWebAssembly,\n@@ -267,6 +268,7 @@ const applyExperimentsDefaults = (experiments, { production, development }) => {\n \tD(experiments, \"lazyCompilation\", false);\n \tD(experiments, \"buildHttp\", false);\n \tD(experiments, \"futureDefaults\", false);\n+\tD(experiments, \"cacheUnaffected\", experiments.futureDefaults);\n \n \tif (typeof experiments.buildHttp === \"object\") {\n \t\tD(experiments.buildHttp, \"frozen\", production);\n@@ -280,9 +282,13 @@ const applyExperimentsDefaults = (experiments, { production, development }) => {\n  * @param {string} options.name name\n  * @param {string} options.mode mode\n  * @param {boolean} options.development is development mode\n+ * @param {boolean} options.cacheUnaffected the cacheUnaffected experiment is enabled\n  * @returns {void}\n  */\n-const applyCacheDefaults = (cache, { name, mode, development }) => {\n+const applyCacheDefaults = (\n+\tcache,\n+\t{ name, mode, development, cacheUnaffected }\n+) => {\n \tif (cache === false) return;\n \tswitch (cache.type) {\n \t\tcase \"filesystem\":\n@@ -326,12 +332,14 @@ const applyCacheDefaults = (cache, { name, mode, development }) => {\n \t\t\tD(cache, \"maxMemoryGenerations\", development ? 5 : Infinity);\n \t\t\tD(cache, \"maxAge\", 1000 * 60 * 60 * 24 * 60); // 1 month\n \t\t\tD(cache, \"allowCollectingMemory\", development);\n+\t\t\tD(cache, \"memoryCacheUnaffected\", development && cacheUnaffected);\n \t\t\tD(cache.buildDependencies, \"defaultWebpack\", [\n \t\t\t\tpath.resolve(__dirname, \"..\") + path.sep\n \t\t\t]);\n \t\t\tbreak;\n \t\tcase \"memory\":\n \t\t\tD(cache, \"maxGenerations\", Infinity);\n+\t\t\tD(cache, \"cacheUnaffected\", development && cacheUnaffected);\n \t\t\tbreak;\n \t}\n };"
      },
      {
        "sha": "637ea8fc7344e7423b64af04f0cc41ea03da329f",
        "filename": "schemas/WebpackOptions.check.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/schemas%2FWebpackOptions.check.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/schemas%2FWebpackOptions.check.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.check.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7"
      },
      {
        "sha": "1557934198fdaac55e6e7c57fc02ff69d5412e84",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -699,6 +699,10 @@\n             }\n           ]\n         },\n+        \"cacheUnaffected\": {\n+          \"description\": \"Enable additional in memory caching of modules that are unchanged and reference only unchanged modules.\",\n+          \"type\": \"boolean\"\n+        },\n         \"futureDefaults\": {\n           \"description\": \"Apply defaults of next major version.\",\n           \"type\": \"boolean\"\n@@ -1027,6 +1031,10 @@\n           \"type\": \"number\",\n           \"minimum\": 0\n         },\n+        \"memoryCacheUnaffected\": {\n+          \"description\": \"Additionally cache computation of modules that are unchanged and reference only unchanged modules in memory.\",\n+          \"type\": \"boolean\"\n+        },\n         \"name\": {\n           \"description\": \"Name for the cache. Different names will lead to different coexisting caches.\",\n           \"type\": \"string\"\n@@ -1655,6 +1663,10 @@\n       \"type\": \"object\",\n       \"additionalProperties\": false,\n       \"properties\": {\n+        \"cacheUnaffected\": {\n+          \"description\": \"Additionally cache computation of modules that are unchanged and reference only unchanged modules.\",\n+          \"type\": \"boolean\"\n+        },\n         \"maxGenerations\": {\n           \"description\": \"Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\",\n           \"type\": \"number\","
      },
      {
        "sha": "3bedeb00277593fc8b363a590c1df4a9bf70fa31",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 126,
        "deletions": 118,
        "changes": 244,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -94,6 +94,7 @@ Object {\n     \"asset\": false,\n     \"asyncWebAssembly\": false,\n     \"buildHttp\": false,\n+    \"cacheUnaffected\": false,\n     \"futureDefaults\": false,\n     \"layers\": false,\n     \"lazyCompilation\": false,\n@@ -778,48 +779,49 @@ Object {\n \t);\n \ttest(\"development\", { mode: \"development\" }, e =>\n \t\te.toMatchInlineSnapshot(`\n-\t\t- Expected\n-\t\t+ Received\n+- Expected\n++ Received\n \n-\t\t@@ ... @@\n-\t\t-   \"cache\": false,\n-\t\t+   \"cache\": Object {\n-\t\t+     \"maxGenerations\": Infinity,\n-\t\t+     \"type\": \"memory\",\n-\t\t+   },\n-\t\t@@ ... @@\n-\t\t-   \"devtool\": false,\n-\t\t+   \"devtool\": \"eval\",\n-\t\t@@ ... @@\n-\t\t-   \"mode\": \"none\",\n-\t\t+   \"mode\": \"development\",\n-\t\t@@ ... @@\n-\t\t-     \"unsafeCache\": false,\n-\t\t+     \"unsafeCache\": [Function anonymous],\n-\t\t@@ ... @@\n-\t\t-     \"chunkIds\": \"natural\",\n-\t\t+     \"chunkIds\": \"named\",\n-\t\t@@ ... @@\n-\t\t-     \"moduleIds\": \"natural\",\n-\t\t-     \"nodeEnv\": false,\n-\t\t+     \"moduleIds\": \"named\",\n-\t\t+     \"nodeEnv\": \"development\",\n-\t\t@@ ... @@\n-\t\t-       \"minRemainingSize\": undefined,\n-\t\t+       \"minRemainingSize\": 0,\n-\t\t@@ ... @@\n-\t\t-     \"pathinfo\": false,\n-\t\t+     \"pathinfo\": true,\n-\t\t@@ ... @@\n-\t\t-     \"cache\": false,\n-\t\t+     \"cache\": true,\n-\t\t@@ ... @@\n-\t\t-       \"production\",\n-\t\t+       \"development\",\n-\t\t@@ ... @@\n-\t\t-     \"cache\": false,\n-\t\t+     \"cache\": true,\n-\t`)\n+@@ ... @@\n+-   \"cache\": false,\n++   \"cache\": Object {\n++     \"cacheUnaffected\": false,\n++     \"maxGenerations\": Infinity,\n++     \"type\": \"memory\",\n++   },\n+@@ ... @@\n+-   \"devtool\": false,\n++   \"devtool\": \"eval\",\n+@@ ... @@\n+-   \"mode\": \"none\",\n++   \"mode\": \"development\",\n+@@ ... @@\n+-     \"unsafeCache\": false,\n++     \"unsafeCache\": [Function anonymous],\n+@@ ... @@\n+-     \"chunkIds\": \"natural\",\n++     \"chunkIds\": \"named\",\n+@@ ... @@\n+-     \"moduleIds\": \"natural\",\n+-     \"nodeEnv\": false,\n++     \"moduleIds\": \"named\",\n++     \"nodeEnv\": \"development\",\n+@@ ... @@\n+-       \"minRemainingSize\": undefined,\n++       \"minRemainingSize\": 0,\n+@@ ... @@\n+-     \"pathinfo\": false,\n++     \"pathinfo\": true,\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+@@ ... @@\n+-       \"production\",\n++       \"development\",\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+`)\n \t);\n \ttest(\"sync wasm\", { experiments: { syncWebAssembly: true } }, e =>\n \t\te.toMatchInlineSnapshot(`\n@@ -1480,25 +1482,26 @@ Object {\n \t);\n \ttest(\"cache true\", { cache: true }, e =>\n \t\te.toMatchInlineSnapshot(`\n-\t\t- Expected\n-\t\t+ Received\n+- Expected\n++ Received\n \n-\t\t@@ ... @@\n-\t\t-   \"cache\": false,\n-\t\t+   \"cache\": Object {\n-\t\t+     \"maxGenerations\": Infinity,\n-\t\t+     \"type\": \"memory\",\n-\t\t+   },\n-\t\t@@ ... @@\n-\t\t-     \"unsafeCache\": false,\n-\t\t+     \"unsafeCache\": [Function anonymous],\n-\t\t@@ ... @@\n-\t\t-     \"cache\": false,\n-\t\t+     \"cache\": true,\n-\t\t@@ ... @@\n-\t\t-     \"cache\": false,\n-\t\t+     \"cache\": true,\n-\t`)\n+@@ ... @@\n+-   \"cache\": false,\n++   \"cache\": Object {\n++     \"cacheUnaffected\": false,\n++     \"maxGenerations\": Infinity,\n++     \"type\": \"memory\",\n++   },\n+@@ ... @@\n+-     \"unsafeCache\": false,\n++     \"unsafeCache\": [Function anonymous],\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+`)\n \t);\n \ttest(\"cache filesystem\", { cache: { type: \"filesystem\" } }, e =>\n \t\te.toMatchInlineSnapshot(`\n@@ -1523,6 +1526,7 @@ Object {\n +     \"idleTimeoutForInitialStore\": 5000,\n +     \"maxAge\": 5184000000,\n +     \"maxMemoryGenerations\": Infinity,\n++     \"memoryCacheUnaffected\": false,\n +     \"name\": \"default-none\",\n +     \"profile\": false,\n +     \"store\": \"pack\",\n@@ -1545,66 +1549,67 @@ Object {\n \t\t{ mode: \"development\", cache: { type: \"filesystem\" } },\n \t\te =>\n \t\t\te.toMatchInlineSnapshot(`\n-\t\t\t- Expected\n-\t\t\t+ Received\n+- Expected\n++ Received\n \n-\t\t\t@@ ... @@\n-\t\t\t-   \"cache\": false,\n-\t\t\t+   \"cache\": Object {\n-\t\t\t+     \"allowCollectingMemory\": true,\n-\t\t\t+     \"buildDependencies\": Object {\n-\t\t\t+       \"defaultWebpack\": Array [\n-\t\t\t+         \"<cwd>/lib/\",\n-\t\t\t+       ],\n-\t\t\t+     },\n-\t\t\t+     \"cacheDirectory\": \"<cwd>/node_modules/.cache/webpack\",\n-\t\t\t+     \"cacheLocation\": \"<cwd>/node_modules/.cache/webpack/default-development\",\n-\t\t\t+     \"compression\": false,\n-\t\t\t+     \"hashAlgorithm\": \"md4\",\n-\t\t\t+     \"idleTimeout\": 60000,\n-\t\t\t+     \"idleTimeoutAfterLargeChanges\": 1000,\n-\t\t\t+     \"idleTimeoutForInitialStore\": 5000,\n-\t\t\t+     \"maxAge\": 5184000000,\n-\t\t\t+     \"maxMemoryGenerations\": 5,\n-\t\t\t+     \"name\": \"default-development\",\n-\t\t\t+     \"profile\": false,\n-\t\t\t+     \"store\": \"pack\",\n-\t\t\t+     \"type\": \"filesystem\",\n-\t\t\t+     \"version\": \"\",\n-\t\t\t+   },\n-\t\t\t@@ ... @@\n-\t\t\t-   \"devtool\": false,\n-\t\t\t+   \"devtool\": \"eval\",\n-\t\t\t@@ ... @@\n-\t\t\t-   \"mode\": \"none\",\n-\t\t\t+   \"mode\": \"development\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"unsafeCache\": false,\n-\t\t\t+     \"unsafeCache\": [Function anonymous],\n-\t\t\t@@ ... @@\n-\t\t\t-     \"chunkIds\": \"natural\",\n-\t\t\t+     \"chunkIds\": \"named\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"moduleIds\": \"natural\",\n-\t\t\t-     \"nodeEnv\": false,\n-\t\t\t+     \"moduleIds\": \"named\",\n-\t\t\t+     \"nodeEnv\": \"development\",\n-\t\t\t@@ ... @@\n-\t\t\t-       \"minRemainingSize\": undefined,\n-\t\t\t+       \"minRemainingSize\": 0,\n-\t\t\t@@ ... @@\n-\t\t\t-     \"pathinfo\": false,\n-\t\t\t+     \"pathinfo\": true,\n-\t\t\t@@ ... @@\n-\t\t\t-     \"cache\": false,\n-\t\t\t+     \"cache\": true,\n-\t\t\t@@ ... @@\n-\t\t\t-       \"production\",\n-\t\t\t+       \"development\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"cache\": false,\n-\t\t\t+     \"cache\": true,\n-\t\t`)\n+@@ ... @@\n+-   \"cache\": false,\n++   \"cache\": Object {\n++     \"allowCollectingMemory\": true,\n++     \"buildDependencies\": Object {\n++       \"defaultWebpack\": Array [\n++         \"<cwd>/lib/\",\n++       ],\n++     },\n++     \"cacheDirectory\": \"<cwd>/node_modules/.cache/webpack\",\n++     \"cacheLocation\": \"<cwd>/node_modules/.cache/webpack/default-development\",\n++     \"compression\": false,\n++     \"hashAlgorithm\": \"md4\",\n++     \"idleTimeout\": 60000,\n++     \"idleTimeoutAfterLargeChanges\": 1000,\n++     \"idleTimeoutForInitialStore\": 5000,\n++     \"maxAge\": 5184000000,\n++     \"maxMemoryGenerations\": 5,\n++     \"memoryCacheUnaffected\": false,\n++     \"name\": \"default-development\",\n++     \"profile\": false,\n++     \"store\": \"pack\",\n++     \"type\": \"filesystem\",\n++     \"version\": \"\",\n++   },\n+@@ ... @@\n+-   \"devtool\": false,\n++   \"devtool\": \"eval\",\n+@@ ... @@\n+-   \"mode\": \"none\",\n++   \"mode\": \"development\",\n+@@ ... @@\n+-     \"unsafeCache\": false,\n++     \"unsafeCache\": [Function anonymous],\n+@@ ... @@\n+-     \"chunkIds\": \"natural\",\n++     \"chunkIds\": \"named\",\n+@@ ... @@\n+-     \"moduleIds\": \"natural\",\n+-     \"nodeEnv\": false,\n++     \"moduleIds\": \"named\",\n++     \"nodeEnv\": \"development\",\n+@@ ... @@\n+-       \"minRemainingSize\": undefined,\n++       \"minRemainingSize\": 0,\n+@@ ... @@\n+-     \"pathinfo\": false,\n++     \"pathinfo\": true,\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+@@ ... @@\n+-       \"production\",\n++       \"development\",\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+`)\n \t);\n \n \ttest(\n@@ -1814,6 +1819,7 @@ Object {\n +     \"idleTimeoutForInitialStore\": 5000,\n +     \"maxAge\": 5184000000,\n +     \"maxMemoryGenerations\": Infinity,\n++     \"memoryCacheUnaffected\": false,\n +     \"name\": \"default-none\",\n +     \"profile\": false,\n +     \"store\": \"pack\",\n@@ -1890,7 +1896,9 @@ Object {\n + Received\n \n @@ ... @@\n+-     \"cacheUnaffected\": false,\n -     \"futureDefaults\": false,\n++     \"cacheUnaffected\": true,\n +     \"futureDefaults\": true,\n @@ ... @@\n -     \"__dirname\": \"mock\","
      },
      {
        "sha": "038573fe8078720bb268b83eb211bba048fc0361",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 39,
        "deletions": 0,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -95,6 +95,19 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"cache-cache-unaffected\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Additionally cache computation of modules that are unchanged and reference only unchanged modules.\",\n+        \"multiple\": false,\n+        \"path\": \"cache.cacheUnaffected\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Additionally cache computation of modules that are unchanged and reference only unchanged modules.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"cache-compression\": Object {\n     \"configs\": Array [\n       Object {\n@@ -256,6 +269,19 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"number\",\n   },\n+  \"cache-memory-cache-unaffected\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Additionally cache computation of modules that are unchanged and reference only unchanged modules in memory.\",\n+        \"multiple\": false,\n+        \"path\": \"cache.memoryCacheUnaffected\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Additionally cache computation of modules that are unchanged and reference only unchanged modules in memory.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"cache-name\": Object {\n     \"configs\": Array [\n       Object {\n@@ -524,6 +550,19 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"experiments-cache-unaffected\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Enable additional in memory caching of modules that are unchanged and reference only unchanged modules.\",\n+        \"multiple\": false,\n+        \"path\": \"experiments.cacheUnaffected\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Enable additional in memory caching of modules that are unchanged and reference only unchanged modules.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"experiments-future-defaults\": Object {\n     \"configs\": Array [\n       Object {"
      },
      {
        "sha": "b618297515e46388b85329e0788cc3c83e522d4f",
        "filename": "test/__snapshots__/StatsTestCases.basictest.js.snap",
        "status": "modified",
        "additions": 18,
        "deletions": 14,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -1268,15 +1268,15 @@ asset <CLR=32,BOLD>main.js</CLR> 84 bytes <CLR=32,BOLD>[emitted]</CLR> (name: ma\n <CLR=31,BOLD>DEBUG</CLR> <CLR=BOLD>LOG from ./node_modules/custom-loader/index.js Named Logger ./node_modules/custom-loader/index.js!./index.js</CLR>\n     Message with named logger\n \n-<CLR=BOLD>LOG from webpack.FlagDependencyExportsPlugin</CLR>\n-    <CLR=BOLD>0% of exports of modules have been determined (1 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)</CLR>\n-+ 3 hidden lines\n-\n <CLR=BOLD>LOG from webpack.Compilation</CLR>\n-    <CLR=BOLD>1 modules hashed (1 variants per module in average)</CLR>\n+    <CLR=BOLD>1 modules hashed, 0 from cache (1 variants per module in average)</CLR>\n     <CLR=BOLD>100% code generated (1 generated, 0 from cache)</CLR>\n     <CLR=BOLD>NaN% code generated (0 generated, 0 from cache)</CLR>\n-+ 19 hidden lines\n++ 23 hidden lines\n+\n+<CLR=BOLD>LOG from webpack.FlagDependencyExportsPlugin</CLR>\n+    <CLR=BOLD>0% of exports of modules have been determined (1 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 from mem cache, 0 additional calculations due to dependencies)</CLR>\n++ 3 hidden lines\n \n <CLR=BOLD>LOG from webpack.buildChunkGraph</CLR>\n     <CLR=BOLD>2 queue items processed (1 blocks)</CLR>\n@@ -2057,15 +2057,15 @@ LOG from LogTestPlugin\n     End\n + 6 hidden lines\n \n-LOG from webpack.FlagDependencyExportsPlugin\n-    0% of exports of modules have been determined (6 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n-+ 3 hidden lines\n-\n LOG from webpack.Compilation\n-    6 modules hashed (1 variants per module in average)\n+    6 modules hashed, 0 from cache (1 variants per module in average)\n     100% code generated (6 generated, 0 from cache)\n     100% code generated (7 generated, 0 from cache)\n-+ 19 hidden lines\n++ 23 hidden lines\n+\n+LOG from webpack.FlagDependencyExportsPlugin\n+    0% of exports of modules have been determined (6 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 from mem cache, 0 additional calculations due to dependencies)\n++ 3 hidden lines\n \n LOG from webpack.buildChunkGraph\n     15 queue items processed (9 blocks)\n@@ -2371,15 +2371,19 @@ LOG from webpack.Compiler\n \n LOG from webpack.Compilation\n <t> finish module profiles: X ms\n+<t> compute affected modules: X ms\n <t> finish modules: X ms\n <t> report dependency errors and warnings: X ms\n <t> optimize dependencies: X ms\n <t> create chunks: X ms\n <t> optimize: X ms\n-    6 modules hashed (1 variants per module in average)\n+    6 modules hashed, 0 from cache (1 variants per module in average)\n <t> module hashing: X ms\n     100% code generated (6 generated, 0 from cache)\n <t> code generation: X ms\n+<t> runtime requirements.modules: X ms\n+<t> runtime requirements.chunks: X ms\n+<t> runtime requirements.entries: X ms\n <t> runtime requirements: X ms\n <t> hashing: initialize hash: X ms\n <t> hashing: sort chunks: X ms\n@@ -2397,7 +2401,7 @@ LOG from webpack.Compilation\n LOG from webpack.FlagDependencyExportsPlugin\n <t> restore cached provided exports: X ms\n <t> figure out provided exports: X ms\n-    0% of exports of modules have been determined (6 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n+    0% of exports of modules have been determined (6 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 from mem cache, 0 additional calculations due to dependencies)\n <t> store provided exports into cache: X ms\n \n LOG from webpack.InnerGraphPlugin"
      },
      {
        "sha": "2a062cac4375e9fb8103fd0f409a35ea3dacc420",
        "filename": "test/watchCases/cache/add-defines/webpack.config.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2FwatchCases%2Fcache%2Fadd-defines%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/test%2FwatchCases%2Fcache%2Fadd-defines%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Fadd-defines%2Fwebpack.config.js?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -4,7 +4,8 @@ const currentWatchStep = require(\"../../../helpers/currentWatchStep\");\n /** @type {import(\"../../../../\").Configuration} */\n module.exports = {\n \tcache: {\n-\t\ttype: \"memory\"\n+\t\ttype: \"memory\",\n+\t\tcacheUnaffected: false\n \t},\n \tplugins: [\n \t\tcompiler => {"
      },
      {
        "sha": "50a817346986272ed9ba1f859a89307ede13dc8b",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 26,
        "deletions": 2,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/3b48429eb564061c29d38c15579e00b4c48f13a7/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/3b48429eb564061c29d38c15579e00b4c48f13a7/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=3b48429eb564061c29d38c15579e00b4c48f13a7",
        "patch": "@@ -891,7 +891,8 @@ declare class ChunkGraph {\n \taddModuleRuntimeRequirements(\n \t\tmodule: Module,\n \t\truntime: RuntimeSpec,\n-\t\titems: Set<string>\n+\t\titems: Set<string>,\n+\t\ttransferOwnership?: boolean\n \t): void;\n \taddChunkRuntimeRequirements(chunk: Chunk, items: Set<string>): void;\n \taddTreeRuntimeRequirements(chunk: Chunk, items: Iterable<string>): void;\n@@ -1458,6 +1459,8 @@ declare class Compilation {\n \tchunkTemplate: ChunkTemplate;\n \truntimeTemplate: RuntimeTemplate;\n \tmoduleTemplates: { javascript: ModuleTemplate };\n+\tmemCache?: MemCache;\n+\tmoduleMemCaches?: WeakMap<Module, MemCache>;\n \tmoduleGraph: ModuleGraph;\n \tchunkGraph: ChunkGraph;\n \tcodeGenerationResults: CodeGenerationResults;\n@@ -1594,7 +1597,7 @@ declare class Compilation {\n \treportDependencyErrorsAndWarnings(\n \t\tmodule: Module,\n \t\tblocks: DependenciesBlock[]\n-\t): void;\n+\t): boolean;\n \tcodeGeneration(callback?: any): void;\n \tprocessRuntimeRequirements(__0?: {\n \t\t/**\n@@ -1894,6 +1897,7 @@ declare class Compiler {\n \tcontext: string;\n \trequestShortener: RequestShortener;\n \tcache: Cache;\n+\tmoduleMemCaches?: WeakMap<Module, { hash: string; memCache: MemCache }>;\n \tcompilerPath: string;\n \trunning: boolean;\n \tidle: boolean;\n@@ -3282,6 +3286,11 @@ declare interface Experiments {\n \t */\n \tbuildHttp?: boolean | HttpUriOptions;\n \n+\t/**\n+\t * Enable additional in memory caching of modules that are unchanged and reference only unchanged modules.\n+\t */\n+\tcacheUnaffected?: boolean;\n+\n \t/**\n \t * Apply defaults of next major version.\n \t */\n@@ -3909,6 +3918,11 @@ declare interface FileCacheOptions {\n \t */\n \tmaxMemoryGenerations?: number;\n \n+\t/**\n+\t * Additionally cache computation of modules that are unchanged and reference only unchanged modules in memory.\n+\t */\n+\tmemoryCacheUnaffected?: boolean;\n+\n \t/**\n \t * Name for the cache. Different names will lead to different coexisting caches.\n \t */\n@@ -6299,11 +6313,21 @@ declare interface MapOptions {\n \tcolumns?: boolean;\n \tmodule?: boolean;\n }\n+declare abstract class MemCache {\n+\tget<T extends any[], V>(...args: T): undefined | V;\n+\tset<T extends [any, ...any[]]>(...args: T): void;\n+\tprovide<T extends [any, ...((...args: any[]) => V)[]], V>(...args: T): V;\n+}\n \n /**\n  * Options object for in-memory caching.\n  */\n declare interface MemoryCacheOptions {\n+\t/**\n+\t * Additionally cache computation of modules that are unchanged and reference only unchanged modules.\n+\t */\n+\tcacheUnaffected?: boolean;\n+\n \t/**\n \t * Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\n \t */"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13213",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13213/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13213/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13213/events",
    "html_url": "https://github.com/webpack/webpack/pull/13213",
    "id": 866050805,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjIyMDIwMDQz",
    "number": 13213,
    "title": "improve rebuild performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-04-23T12:08:49Z",
    "updated_at": "2021-04-23T14:40:04Z",
    "closed_at": "2021-04-23T14:40:03Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13213",
      "html_url": "https://github.com/webpack/webpack/pull/13213",
      "diff_url": "https://github.com/webpack/webpack/pull/13213.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13213.patch",
      "merged_at": "2021-04-23T14:40:03Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n#12102\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13213/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "dc8143cbe610ad0a41be212282e850902027a2f8",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 71,
        "deletions": 11,
        "changes": 82,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -10,7 +10,6 @@ const Entrypoint = require(\"./Entrypoint\");\n const ModuleGraphConnection = require(\"./ModuleGraphConnection\");\n const { first } = require(\"./util/SetHelpers\");\n const SortableSet = require(\"./util/SortableSet\");\n-const StringXor = require(\"./util/StringXor\");\n const {\n \tcompareModulesById,\n \tcompareIterables,\n@@ -40,6 +39,8 @@ const {\n /** @type {ReadonlySet<string>} */\n const EMPTY_SET = new Set();\n \n+const ZERO_BIG_INT = BigInt(0);\n+\n const compareModuleIterables = compareIterables(compareModulesByIdentifier);\n \n /** @typedef {(c: Chunk, chunkGraph: ChunkGraph) => boolean} ChunkFilterPredicate */\n@@ -1373,8 +1374,41 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\treturn runtimeRequirements === undefined ? EMPTY_SET : runtimeRequirements;\n \t}\n \n+\t/**\n+\t * @param {Module} module the module\n+\t * @param {RuntimeSpec} runtime the runtime\n+\t * @param {boolean} withConnections include connections\n+\t * @returns {string} hash\n+\t */\n \tgetModuleGraphHash(module, runtime, withConnections = true) {\n \t\tconst cgm = this._getChunkGraphModule(module);\n+\t\treturn withConnections\n+\t\t\t? this._getModuleGraphHashWithConnections(cgm, module, runtime)\n+\t\t\t: this._getModuleGraphHashBigInt(cgm, module, runtime).toString(16);\n+\t}\n+\n+\t/**\n+\t * @param {Module} module the module\n+\t * @param {RuntimeSpec} runtime the runtime\n+\t * @param {boolean} withConnections include connections\n+\t * @returns {bigint} hash\n+\t */\n+\tgetModuleGraphHashBigInt(module, runtime, withConnections = true) {\n+\t\tconst cgm = this._getChunkGraphModule(module);\n+\t\treturn withConnections\n+\t\t\t? BigInt(\n+\t\t\t\t\t`0x${this._getModuleGraphHashWithConnections(cgm, module, runtime)}`\n+\t\t\t  )\n+\t\t\t: this._getModuleGraphHashBigInt(cgm, module, runtime);\n+\t}\n+\n+\t/**\n+\t * @param {ChunkGraphModule} cgm the ChunkGraphModule\n+\t * @param {Module} module the module\n+\t * @param {RuntimeSpec} runtime the runtime\n+\t * @returns {bigint} hash as big int\n+\t */\n+\t_getModuleGraphHashBigInt(cgm, module, runtime) {\n \t\tif (cgm.graphHashes === undefined) {\n \t\t\tcgm.graphHashes = new RuntimeSpecMap();\n \t\t}\n@@ -1383,20 +1417,34 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t\thash.update(`${cgm.id}`);\n \t\t\thash.update(`${this.moduleGraph.isAsync(module)}`);\n \t\t\tthis.moduleGraph.getExportsInfo(module).updateHash(hash, runtime);\n-\t\t\treturn /** @type {string} */ (hash.digest(\"hex\"));\n+\t\t\treturn BigInt(`0x${/** @type {string} */ (hash.digest(\"hex\"))}`);\n \t\t});\n-\t\tif (!withConnections) return graphHash;\n+\t\treturn graphHash;\n+\t}\n+\n+\t/**\n+\t * @param {ChunkGraphModule} cgm the ChunkGraphModule\n+\t * @param {Module} module the module\n+\t * @param {RuntimeSpec} runtime the runtime\n+\t * @returns {string} hash\n+\t */\n+\t_getModuleGraphHashWithConnections(cgm, module, runtime) {\n \t\tif (cgm.graphHashesWithConnections === undefined) {\n \t\t\tcgm.graphHashesWithConnections = new RuntimeSpecMap();\n \t\t}\n \t\tconst activeStateToString = state => {\n-\t\t\tif (state === false) return \"false\";\n-\t\t\tif (state === true) return \"true\";\n-\t\t\tif (state === ModuleGraphConnection.TRANSITIVE_ONLY) return \"transitive\";\n+\t\t\tif (state === false) return \"F\";\n+\t\t\tif (state === true) return \"T\";\n+\t\t\tif (state === ModuleGraphConnection.TRANSITIVE_ONLY) return \"O\";\n \t\t\tthrow new Error(\"Not implemented active state\");\n \t\t};\n \t\tconst strict = module.buildMeta && module.buildMeta.strictHarmonyModule;\n \t\treturn cgm.graphHashesWithConnections.provide(runtime, () => {\n+\t\t\tconst graphHash = this._getModuleGraphHashBigInt(\n+\t\t\t\tcgm,\n+\t\t\t\tmodule,\n+\t\t\t\truntime\n+\t\t\t).toString(16);\n \t\t\tconst connections = this.moduleGraph.getOutgoingConnections(module);\n \t\t\t/** @type {Map<string, Module | Set<Module>>} */\n \t\t\tconst connectedModules = new Map();\n@@ -1414,7 +1462,7 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t\t\t\t\truntime => {\n \t\t\t\t\t\t\tconst state = connection.getActiveState(runtime);\n \t\t\t\t\t\t\tstates.add(state);\n-\t\t\t\t\t\t\tstateInfo += runtime + activeStateToString(state);\n+\t\t\t\t\t\t\tstateInfo += activeStateToString(state) + runtime;\n \t\t\t\t\t\t},\n \t\t\t\t\t\ttrue\n \t\t\t\t\t);\n@@ -1444,13 +1492,25 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t\tfor (const [stateInfo, modules] of connectedModulesInOrder) {\n \t\t\t\thash.update(stateInfo);\n \t\t\t\tif (modules instanceof Set) {\n-\t\t\t\t\tconst xor = new StringXor();\n+\t\t\t\t\tlet xor = ZERO_BIG_INT;\n \t\t\t\t\tfor (const m of modules) {\n-\t\t\t\t\t\txor.add(this.getModuleGraphHash(m, runtime, false));\n+\t\t\t\t\t\txor =\n+\t\t\t\t\t\t\txor ^\n+\t\t\t\t\t\t\tthis._getModuleGraphHashBigInt(\n+\t\t\t\t\t\t\t\tthis._getChunkGraphModule(m),\n+\t\t\t\t\t\t\t\tm,\n+\t\t\t\t\t\t\t\truntime\n+\t\t\t\t\t\t\t);\n \t\t\t\t\t}\n-\t\t\t\t\txor.updateHash(hash);\n+\t\t\t\t\thash.update(xor.toString(16));\n \t\t\t\t} else {\n-\t\t\t\t\thash.update(this.getModuleGraphHash(modules, runtime, false));\n+\t\t\t\t\thash.update(\n+\t\t\t\t\t\tthis._getModuleGraphHashBigInt(\n+\t\t\t\t\t\t\tthis._getChunkGraphModule(modules),\n+\t\t\t\t\t\t\tmodules,\n+\t\t\t\t\t\t\truntime\n+\t\t\t\t\t\t).toString(16)\n+\t\t\t\t\t);\n \t\t\t\t}\n \t\t\t}\n \t\t\thash.update(graphHash);"
      },
      {
        "sha": "6c284c01ce7ae10b343fe6fed2c0be35e5edc055",
        "filename": "lib/ContextModuleFactory.js",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FContextModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FContextModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModuleFactory.js?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -10,6 +10,7 @@ const { AsyncSeriesWaterfallHook, SyncWaterfallHook } = require(\"tapable\");\n const ContextModule = require(\"./ContextModule\");\n const ModuleFactory = require(\"./ModuleFactory\");\n const ContextElementDependency = require(\"./dependencies/ContextElementDependency\");\n+const LazySet = require(\"./util/LazySet\");\n const { cachedSetProperty } = require(\"./util/cleverMerge\");\n const { createFakeHook } = require(\"./util/deprecation\");\n const { join } = require(\"./util/fs\");\n@@ -87,9 +88,9 @@ module.exports = class ContextModuleFactory extends ModuleFactory {\n \t\tconst dependencies = data.dependencies;\n \t\tconst resolveOptions = data.resolveOptions;\n \t\tconst dependency = /** @type {ContextDependency} */ (dependencies[0]);\n-\t\tconst fileDependencies = new Set();\n-\t\tconst missingDependencies = new Set();\n-\t\tconst contextDependencies = new Set();\n+\t\tconst fileDependencies = new LazySet();\n+\t\tconst missingDependencies = new LazySet();\n+\t\tconst contextDependencies = new LazySet();\n \t\tthis.hooks.beforeResolve.callAsync(\n \t\t\t{\n \t\t\t\tcontext: context,"
      },
      {
        "sha": "c2417e592eeaa4b0d980d121f3a0df8a2e9a9734",
        "filename": "lib/Dependency.js",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependency.js?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -9,6 +9,7 @@ const memoize = require(\"./util/memoize\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./ChunkGraph\")} ChunkGraph */\n+/** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n /** @typedef {import(\"./DependencyTemplates\")} DependencyTemplates */\n /** @typedef {import(\"./Module\")} Module */\n /** @typedef {import(\"./ModuleGraph\")} ModuleGraph */\n@@ -84,6 +85,10 @@ const getIgnoredModule = memoize(() => {\n \n class Dependency {\n \tconstructor() {\n+\t\t/** @type {Module} */\n+\t\tthis._parentModule = undefined;\n+\t\t/** @type {DependenciesBlock} */\n+\t\tthis._parentDependenciesBlock = undefined;\n \t\t// TODO check if this can be moved into ModuleDependency\n \t\t/** @type {boolean} */\n \t\tthis.weak = false;"
      },
      {
        "sha": "4509392deffcecf27b763874bd014d97db4207ed",
        "filename": "lib/FlagDependencyExportsPlugin.js",
        "status": "modified",
        "additions": 38,
        "deletions": 37,
        "changes": 75,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FFlagDependencyExportsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FFlagDependencyExportsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyExportsPlugin.js?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -35,6 +35,7 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\"webpack.FlagDependencyExportsPlugin\"\n \t\t\t\t\t\t);\n \t\t\t\t\t\tlet statRestoredFromCache = 0;\n+\t\t\t\t\t\tlet statNoExports = 0;\n \t\t\t\t\t\tlet statFlaggedUncached = 0;\n \t\t\t\t\t\tlet statNotCached = 0;\n \t\t\t\t\t\tlet statQueueItemsProcessed = 0;\n@@ -47,14 +48,24 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\tasyncLib.each(\n \t\t\t\t\t\t\tmodules,\n \t\t\t\t\t\t\t(module, callback) => {\n+\t\t\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n+\t\t\t\t\t\t\t\tif (!module.buildMeta || !module.buildMeta.exportsType) {\n+\t\t\t\t\t\t\t\t\tif (exportsInfo.otherExportsInfo.provided !== null) {\n+\t\t\t\t\t\t\t\t\t\t// It's a module without declared exports\n+\t\t\t\t\t\t\t\t\t\tstatNoExports++;\n+\t\t\t\t\t\t\t\t\t\texportsInfo.setHasProvideInfo();\n+\t\t\t\t\t\t\t\t\t\texportsInfo.setUnknownExportsProvided();\n+\t\t\t\t\t\t\t\t\t\treturn callback();\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tif (\n \t\t\t\t\t\t\t\t\tmodule.buildInfo.cacheable !== true ||\n \t\t\t\t\t\t\t\t\ttypeof module.buildInfo.hash !== \"string\"\n \t\t\t\t\t\t\t\t) {\n \t\t\t\t\t\t\t\t\tstatFlaggedUncached++;\n \t\t\t\t\t\t\t\t\t// Enqueue uncacheable module for determining the exports\n \t\t\t\t\t\t\t\t\tqueue.enqueue(module);\n-\t\t\t\t\t\t\t\t\tmoduleGraph.getExportsInfo(module).setHasProvideInfo();\n+\t\t\t\t\t\t\t\t\texportsInfo.setHasProvideInfo();\n \t\t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tcache.get(\n@@ -72,7 +83,7 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t\t\tstatNotCached++;\n \t\t\t\t\t\t\t\t\t\t\t// Without cached info enqueue module for determining the exports\n \t\t\t\t\t\t\t\t\t\t\tqueue.enqueue(module);\n-\t\t\t\t\t\t\t\t\t\t\tmoduleGraph.getExportsInfo(module).setHasProvideInfo();\n+\t\t\t\t\t\t\t\t\t\t\texportsInfo.setHasProvideInfo();\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\tcallback();\n \t\t\t\t\t\t\t\t\t}\n@@ -300,49 +311,39 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\tstatQueueItemsProcessed++;\n \n \t\t\t\t\t\t\t\t\texportsInfo = moduleGraph.getExportsInfo(module);\n-\t\t\t\t\t\t\t\t\tif (!module.buildMeta || !module.buildMeta.exportsType) {\n-\t\t\t\t\t\t\t\t\t\tif (exportsInfo.otherExportsInfo.provided !== null) {\n-\t\t\t\t\t\t\t\t\t\t\t// It's a module without declared exports\n-\t\t\t\t\t\t\t\t\t\t\texportsInfo.setUnknownExportsProvided();\n-\t\t\t\t\t\t\t\t\t\t\tmodulesToStore.add(module);\n-\t\t\t\t\t\t\t\t\t\t\tnotifyDependencies();\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\t\t// It's a module with declared exports\n-\n-\t\t\t\t\t\t\t\t\t\tcacheable = true;\n-\t\t\t\t\t\t\t\t\t\tchanged = false;\n-\n-\t\t\t\t\t\t\t\t\t\texportsSpecsFromDependencies.clear();\n-\t\t\t\t\t\t\t\t\t\tmoduleGraph.freeze();\n-\t\t\t\t\t\t\t\t\t\tprocessDependenciesBlock(module);\n-\t\t\t\t\t\t\t\t\t\tmoduleGraph.unfreeze();\n-\t\t\t\t\t\t\t\t\t\tfor (const [\n-\t\t\t\t\t\t\t\t\t\t\tdep,\n-\t\t\t\t\t\t\t\t\t\t\texportsSpec\n-\t\t\t\t\t\t\t\t\t\t] of exportsSpecsFromDependencies) {\n-\t\t\t\t\t\t\t\t\t\t\tprocessExportsSpec(dep, exportsSpec);\n-\t\t\t\t\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t\t\t\tif (cacheable) {\n-\t\t\t\t\t\t\t\t\t\t\tmodulesToStore.add(module);\n-\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tcacheable = true;\n+\t\t\t\t\t\t\t\t\tchanged = false;\n+\n+\t\t\t\t\t\t\t\t\texportsSpecsFromDependencies.clear();\n+\t\t\t\t\t\t\t\t\tmoduleGraph.freeze();\n+\t\t\t\t\t\t\t\t\tprocessDependenciesBlock(module);\n+\t\t\t\t\t\t\t\t\tmoduleGraph.unfreeze();\n+\t\t\t\t\t\t\t\t\tfor (const [\n+\t\t\t\t\t\t\t\t\t\tdep,\n+\t\t\t\t\t\t\t\t\t\texportsSpec\n+\t\t\t\t\t\t\t\t\t] of exportsSpecsFromDependencies) {\n+\t\t\t\t\t\t\t\t\t\tprocessExportsSpec(dep, exportsSpec);\n+\t\t\t\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t\t\t\tif (changed) {\n-\t\t\t\t\t\t\t\t\t\t\tnotifyDependencies();\n-\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tif (cacheable) {\n+\t\t\t\t\t\t\t\t\t\tmodulesToStore.add(module);\n+\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\tif (changed) {\n+\t\t\t\t\t\t\t\t\t\tnotifyDependencies();\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tlogger.timeEnd(\"figure out provided exports\");\n \n \t\t\t\t\t\t\t\tlogger.log(\n \t\t\t\t\t\t\t\t\t`${Math.round(\n-\t\t\t\t\t\t\t\t\t\t100 -\n-\t\t\t\t\t\t\t\t\t\t\t(100 * statRestoredFromCache) /\n-\t\t\t\t\t\t\t\t\t\t\t\t(statRestoredFromCache +\n-\t\t\t\t\t\t\t\t\t\t\t\t\tstatNotCached +\n-\t\t\t\t\t\t\t\t\t\t\t\t\tstatFlaggedUncached)\n-\t\t\t\t\t\t\t\t\t)}% of exports of modules have been determined (${statNotCached} not cached, ${statFlaggedUncached} flagged uncacheable, ${statRestoredFromCache} from cache, ${\n+\t\t\t\t\t\t\t\t\t\t(100 * (statFlaggedUncached + statNotCached)) /\n+\t\t\t\t\t\t\t\t\t\t\t(statRestoredFromCache +\n+\t\t\t\t\t\t\t\t\t\t\t\tstatNotCached +\n+\t\t\t\t\t\t\t\t\t\t\t\tstatFlaggedUncached +\n+\t\t\t\t\t\t\t\t\t\t\t\tstatNoExports)\n+\t\t\t\t\t\t\t\t\t)}% of exports of modules have been determined (${statNoExports} no declared exports, ${statNotCached} not cached, ${statFlaggedUncached} flagged uncacheable, ${statRestoredFromCache} from cache, ${\n \t\t\t\t\t\t\t\t\t\tstatQueueItemsProcessed -\n \t\t\t\t\t\t\t\t\t\tstatNotCached -\n \t\t\t\t\t\t\t\t\t\tstatFlaggedUncached"
      },
      {
        "sha": "e3bf705920c6f5bea8bdc614bacf6b0ad69c40f9",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 17,
        "deletions": 51,
        "changes": 68,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -82,20 +82,9 @@ class ModuleGraphModule {\n \t}\n }\n \n-class ModuleGraphDependency {\n-\tconstructor() {\n-\t\t/** @type {ModuleGraphConnection} */\n-\t\tthis.connection = undefined;\n-\t\t/** @type {Module} */\n-\t\tthis.parentModule = undefined;\n-\t\t/** @type {DependenciesBlock} */\n-\t\tthis.parentBlock = undefined;\n-\t}\n-}\n-\n class ModuleGraph {\n \tconstructor() {\n-\t\t/** @type {Map<Dependency, ModuleGraphDependency>} */\n+\t\t/** @type {Map<Dependency, ModuleGraphConnection>} */\n \t\tthis._dependencyMap = new Map();\n \t\t/** @type {Map<Module, ModuleGraphModule>} */\n \t\tthis._moduleMap = new Map();\n@@ -137,51 +126,31 @@ class ModuleGraph {\n \t\treturn mgm;\n \t}\n \n-\t/**\n-\t * @param {Dependency} dependency the dependency\n-\t * @returns {ModuleGraphDependency} the internal dependency\n-\t */\n-\t_getModuleGraphDependency(dependency) {\n-\t\tif (this._cacheModuleGraphDependencyKey === dependency)\n-\t\t\treturn this._cacheModuleGraphDependencyValue;\n-\t\tlet mgd = this._dependencyMap.get(dependency);\n-\t\tif (mgd === undefined) {\n-\t\t\tmgd = new ModuleGraphDependency();\n-\t\t\tthis._dependencyMap.set(dependency, mgd);\n-\t\t}\n-\t\tthis._cacheModuleGraphDependencyKey = dependency;\n-\t\tthis._cacheModuleGraphDependencyValue = mgd;\n-\t\treturn mgd;\n-\t}\n-\n \t/**\n \t * @param {Dependency} dependency the dependency\n \t * @param {DependenciesBlock} block parent block\n \t * @param {Module} module parent module\n \t * @returns {void}\n \t */\n \tsetParents(dependency, block, module) {\n-\t\tconst mgd = this._getModuleGraphDependency(dependency);\n-\t\tmgd.parentBlock = block;\n-\t\tmgd.parentModule = module;\n+\t\tdependency._parentDependenciesBlock = block;\n+\t\tdependency._parentModule = module;\n \t}\n \n \t/**\n \t * @param {Dependency} dependency the dependency\n \t * @returns {Module} parent module\n \t */\n \tgetParentModule(dependency) {\n-\t\tconst mgd = this._getModuleGraphDependency(dependency);\n-\t\treturn mgd.parentModule;\n+\t\treturn dependency._parentModule;\n \t}\n \n \t/**\n \t * @param {Dependency} dependency the dependency\n \t * @returns {DependenciesBlock} parent block\n \t */\n \tgetParentBlock(dependency) {\n-\t\tconst mgd = this._getModuleGraphDependency(dependency);\n-\t\treturn mgd.parentBlock;\n+\t\treturn dependency._parentDependenciesBlock;\n \t}\n \n \t/**\n@@ -199,8 +168,7 @@ class ModuleGraph {\n \t\t\tdependency.weak,\n \t\t\tdependency.getCondition(this)\n \t\t);\n-\t\tconst mgd = this._getModuleGraphDependency(dependency);\n-\t\tmgd.connection = connection;\n+\t\tthis._dependencyMap.set(dependency, connection);\n \t\tconst connections = this._getModuleGraphModule(module).incomingConnections;\n \t\tconnections.add(connection);\n \t\tconst mgm = this._getModuleGraphModule(originModule);\n@@ -216,12 +184,11 @@ class ModuleGraph {\n \t * @returns {void}\n \t */\n \tupdateModule(dependency, module) {\n-\t\tconst mgd = this._getModuleGraphDependency(dependency);\n-\t\tif (mgd.connection.module === module) return;\n-\t\tconst { connection } = mgd;\n+\t\tconst connection = this._dependencyMap.get(dependency);\n+\t\tif (connection.module === module) return;\n \t\tconst newConnection = connection.clone();\n \t\tnewConnection.module = module;\n-\t\tmgd.connection = newConnection;\n+\t\tthis._dependencyMap.set(dependency, newConnection);\n \t\tconnection.setActive(false);\n \t\tconst originMgm = this._getModuleGraphModule(connection.originModule);\n \t\toriginMgm.outgoingConnections.add(newConnection);\n@@ -234,13 +201,12 @@ class ModuleGraph {\n \t * @returns {void}\n \t */\n \tremoveConnection(dependency) {\n-\t\tconst mgd = this._getModuleGraphDependency(dependency);\n-\t\tconst { connection } = mgd;\n+\t\tconst connection = this._dependencyMap.get(dependency);\n \t\tconst targetMgm = this._getModuleGraphModule(connection.module);\n \t\ttargetMgm.incomingConnections.delete(connection);\n \t\tconst originMgm = this._getModuleGraphModule(connection.originModule);\n \t\toriginMgm.outgoingConnections.delete(connection);\n-\t\tmgd.connection = undefined;\n+\t\tthis._dependencyMap.delete(dependency);\n \t}\n \n \t/**\n@@ -249,7 +215,7 @@ class ModuleGraph {\n \t * @returns {void}\n \t */\n \taddExplanation(dependency, explanation) {\n-\t\tconst { connection } = this._getModuleGraphDependency(dependency);\n+\t\tconst connection = this._dependencyMap.get(dependency);\n \t\tconnection.addExplanation(explanation);\n \t}\n \n@@ -375,7 +341,7 @@ class ModuleGraph {\n \t * @returns {Module} the referenced module\n \t */\n \tgetResolvedModule(dependency) {\n-\t\tconst { connection } = this._getModuleGraphDependency(dependency);\n+\t\tconst connection = this._dependencyMap.get(dependency);\n \t\treturn connection !== undefined ? connection.resolvedModule : null;\n \t}\n \n@@ -384,7 +350,7 @@ class ModuleGraph {\n \t * @returns {ModuleGraphConnection | undefined} the connection\n \t */\n \tgetConnection(dependency) {\n-\t\tconst { connection } = this._getModuleGraphDependency(dependency);\n+\t\tconst connection = this._dependencyMap.get(dependency);\n \t\treturn connection;\n \t}\n \n@@ -393,7 +359,7 @@ class ModuleGraph {\n \t * @returns {Module} the referenced module\n \t */\n \tgetModule(dependency) {\n-\t\tconst { connection } = this._getModuleGraphDependency(dependency);\n+\t\tconst connection = this._dependencyMap.get(dependency);\n \t\treturn connection !== undefined ? connection.module : null;\n \t}\n \n@@ -402,7 +368,7 @@ class ModuleGraph {\n \t * @returns {Module} the referencing module\n \t */\n \tgetOrigin(dependency) {\n-\t\tconst { connection } = this._getModuleGraphDependency(dependency);\n+\t\tconst connection = this._dependencyMap.get(dependency);\n \t\treturn connection !== undefined ? connection.originModule : null;\n \t}\n \n@@ -411,7 +377,7 @@ class ModuleGraph {\n \t * @returns {Module} the original referencing module\n \t */\n \tgetResolvedOrigin(dependency) {\n-\t\tconst { connection } = this._getModuleGraphDependency(dependency);\n+\t\tconst connection = this._dependencyMap.get(dependency);\n \t\treturn connection !== undefined ? connection.resolvedOriginModule : null;\n \t}\n "
      },
      {
        "sha": "ec348ad15e9e79fc7e63e8942421c4911a2a5f5b",
        "filename": "lib/util/smartGrouping.js",
        "status": "modified",
        "additions": 76,
        "deletions": 40,
        "changes": 116,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2Futil%2FsmartGrouping.js",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/lib%2Futil%2FsmartGrouping.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FsmartGrouping.js?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -23,9 +23,16 @@\n \n /**\n  * @template T\n+ * @template R\n  * @typedef {Object} ItemWithGroups\n  * @property {T} item\n- * @property {Set<string>} groups\n+ * @property {Set<Group<T, R>>} groups\n+ */\n+\n+/**\n+ * @template T\n+ * @template R\n+ * @typedef {{ config: GroupConfig<T, R>, name: string, alreadyGrouped: boolean, items: Set<ItemWithGroups<T, R>> | undefined }} Group\n  */\n \n /**\n@@ -36,22 +43,32 @@\n  * @returns {(R | T)[]} grouped items\n  */\n const smartGrouping = (items, groupConfigs) => {\n-\t/** @type {Set<ItemWithGroups<T>>} */\n+\t/** @type {Set<ItemWithGroups<T, R>>} */\n \tconst itemsWithGroups = new Set();\n-\t/** @type {Map<string, [GroupConfig<T, R>, string]>} */\n-\tconst groupConfigMap = new Map();\n+\t/** @type {Map<string, Group<T, R>>} */\n+\tconst allGroups = new Map();\n \tfor (const item of items) {\n+\t\t/** @type {Set<Group<T, R>>} */\n \t\tconst groups = new Set();\n \t\tfor (let i = 0; i < groupConfigs.length; i++) {\n \t\t\tconst groupConfig = groupConfigs[i];\n \t\t\tconst keys = groupConfig.getKeys(item);\n \t\t\tif (keys) {\n-\t\t\t\tfor (const group of keys) {\n-\t\t\t\t\tconst fullGroup = `${i}:${group}`;\n-\t\t\t\t\tif (!groupConfigMap.has(fullGroup)) {\n-\t\t\t\t\t\tgroupConfigMap.set(fullGroup, [groupConfig, group]);\n+\t\t\t\tfor (const name of keys) {\n+\t\t\t\t\tconst key = `${i}:${name}`;\n+\t\t\t\t\tlet group = allGroups.get(key);\n+\t\t\t\t\tif (group === undefined) {\n+\t\t\t\t\t\tallGroups.set(\n+\t\t\t\t\t\t\tkey,\n+\t\t\t\t\t\t\t(group = {\n+\t\t\t\t\t\t\t\tconfig: groupConfig,\n+\t\t\t\t\t\t\t\tname,\n+\t\t\t\t\t\t\t\talreadyGrouped: false,\n+\t\t\t\t\t\t\t\titems: undefined\n+\t\t\t\t\t\t\t})\n+\t\t\t\t\t\t);\n \t\t\t\t\t}\n-\t\t\t\t\tgroups.add(fullGroup);\n+\t\t\t\t\tgroups.add(group);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -60,48 +77,62 @@ const smartGrouping = (items, groupConfigs) => {\n \t\t\tgroups\n \t\t});\n \t}\n-\tconst alreadyGrouped = new Set();\n \t/**\n-\t * @param {Set<ItemWithGroups<T>>} itemsWithGroups input items with groups\n+\t * @param {Set<ItemWithGroups<T, R>>} itemsWithGroups input items with groups\n \t * @returns {(T | R)[]} groups items\n \t */\n \tconst runGrouping = itemsWithGroups => {\n \t\tconst totalSize = itemsWithGroups.size;\n-\t\t/** @type {Map<string, Set<ItemWithGroups<T>>>} */\n-\t\tconst groupMap = new Map();\n \t\tfor (const entry of itemsWithGroups) {\n \t\t\tfor (const group of entry.groups) {\n-\t\t\t\tif (alreadyGrouped.has(group)) continue;\n-\t\t\t\tconst list = groupMap.get(group);\n-\t\t\t\tif (list === undefined) {\n-\t\t\t\t\tgroupMap.set(group, new Set([entry]));\n+\t\t\t\tif (group.alreadyGrouped) continue;\n+\t\t\t\tconst items = group.items;\n+\t\t\t\tif (items === undefined) {\n+\t\t\t\t\tgroup.items = new Set([entry]);\n \t\t\t\t} else {\n-\t\t\t\t\tlist.add(entry);\n+\t\t\t\t\titems.add(entry);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\t/** @type {Set<string>} */\n-\t\tconst usedGroups = new Set();\n+\t\t/** @type {Map<Group<T, R>, { items: Set<ItemWithGroups<T, R>>, options: GroupOptions | false | undefined, used: boolean }>} */\n+\t\tconst groupMap = new Map();\n+\t\tfor (const group of allGroups.values()) {\n+\t\t\tif (group.items) {\n+\t\t\t\tconst items = group.items;\n+\t\t\t\tgroup.items = undefined;\n+\t\t\t\tgroupMap.set(group, {\n+\t\t\t\t\titems,\n+\t\t\t\t\toptions: undefined,\n+\t\t\t\t\tused: false\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n \t\t/** @type {(T | R)[]} */\n \t\tconst results = [];\n \t\tfor (;;) {\n+\t\t\t/** @type {Group<T, R>} */\n \t\t\tlet bestGroup = undefined;\n \t\t\tlet bestGroupSize = -1;\n \t\t\tlet bestGroupItems = undefined;\n \t\t\tlet bestGroupOptions = undefined;\n-\t\t\tfor (const [group, items] of groupMap) {\n-\t\t\t\tif (items.size === 0) continue;\n-\t\t\t\tconst [groupConfig, groupKey] = groupConfigMap.get(group);\n-\t\t\t\tconst options =\n-\t\t\t\t\tgroupConfig.getOptions &&\n-\t\t\t\t\tgroupConfig.getOptions(\n-\t\t\t\t\t\tgroupKey,\n-\t\t\t\t\t\tArray.from(items, ({ item }) => item)\n-\t\t\t\t\t);\n+\t\t\tfor (const [group, state] of groupMap) {\n+\t\t\t\tconst { items, used } = state;\n+\t\t\t\tlet options = state.options;\n+\t\t\t\tif (options === undefined) {\n+\t\t\t\t\tconst groupConfig = group.config;\n+\t\t\t\t\tstate.options = options =\n+\t\t\t\t\t\t(groupConfig.getOptions &&\n+\t\t\t\t\t\t\tgroupConfig.getOptions(\n+\t\t\t\t\t\t\t\tgroup.name,\n+\t\t\t\t\t\t\t\tArray.from(items, ({ item }) => item)\n+\t\t\t\t\t\t\t)) ||\n+\t\t\t\t\t\tfalse;\n+\t\t\t\t}\n+\n \t\t\t\tconst force = options && options.force;\n \t\t\t\tif (!force) {\n \t\t\t\t\tif (bestGroupOptions && bestGroupOptions.force) continue;\n-\t\t\t\t\tif (usedGroups.has(group)) continue;\n+\t\t\t\t\tif (used) continue;\n \t\t\t\t\tif (items.size <= 1 || totalSize - items.size <= 1) {\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n@@ -137,25 +168,30 @@ const smartGrouping = (items, groupConfigs) => {\n \t\t\t\titemsWithGroups.delete(item);\n \t\t\t\t// Remove all groups that items have from the map to not select them again\n \t\t\t\tfor (const group of item.groups) {\n-\t\t\t\t\tconst list = groupMap.get(group);\n-\t\t\t\t\tif (list !== undefined) list.delete(item);\n-\t\t\t\t\tif (groupChildren) {\n-\t\t\t\t\t\tusedGroups.add(group);\n+\t\t\t\t\tconst state = groupMap.get(group);\n+\t\t\t\t\tif (state !== undefined) {\n+\t\t\t\t\t\tstate.items.delete(item);\n+\t\t\t\t\t\tif (state.items.size === 0) {\n+\t\t\t\t\t\t\tgroupMap.delete(group);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tstate.options = undefined;\n+\t\t\t\t\t\t\tif (groupChildren) {\n+\t\t\t\t\t\t\t\tstate.used = true;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t\tgroupMap.delete(bestGroup);\n \n-\t\t\tconst idx = bestGroup.indexOf(\":\");\n-\t\t\tconst configKey = bestGroup.slice(0, idx);\n-\t\t\tconst key = bestGroup.slice(idx + 1);\n-\t\t\tconst groupConfig = groupConfigs[+configKey];\n+\t\t\tconst key = bestGroup.name;\n+\t\t\tconst groupConfig = bestGroup.config;\n \n \t\t\tconst allItems = Array.from(items, ({ item }) => item);\n \n-\t\t\talreadyGrouped.add(bestGroup);\n+\t\t\tbestGroup.alreadyGrouped = true;\n \t\t\tconst children = groupChildren ? runGrouping(items) : allItems;\n-\t\t\talreadyGrouped.delete(bestGroup);\n+\t\t\tbestGroup.alreadyGrouped = false;\n \n \t\t\tresults.push(groupConfig.createGroup(key, children, allItems));\n \t\t}"
      },
      {
        "sha": "e11a60f629846908be2ed47f33b75696004b8bc8",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 53,
        "deletions": 53,
        "changes": 106,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -3,12 +3,12 @@\n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n \"fitting:\n   PublicPath: auto\n-  asset fitting-4b375e92f92df2c92bec.js 16 KiB [emitted] [immutable]\n+  asset fitting-f0d45b3d6edcabaf51d3.js 16 KiB [emitted] [immutable]\n   asset fitting-1c702fff0ba9fe1126d9.js 1.9 KiB [emitted] [immutable]\n   asset fitting-c0e0ed061413e64a66c5.js 1.9 KiB [emitted] [immutable]\n-  asset fitting-445185754184bf780ddc.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.8 KiB = fitting-1c702fff0ba9fe1126d9.js 1.9 KiB fitting-c0e0ed061413e64a66c5.js 1.9 KiB fitting-4b375e92f92df2c92bec.js 16 KiB\n-  chunk (runtime: main) fitting-4b375e92f92df2c92bec.js 1.87 KiB (javascript) 8.56 KiB (runtime) [entry] [rendered]\n+  asset fitting-3fdf9ef59eba6cfd6536.js 1.08 KiB [emitted] [immutable]\n+  Entrypoint main 19.8 KiB = fitting-1c702fff0ba9fe1126d9.js 1.9 KiB fitting-c0e0ed061413e64a66c5.js 1.9 KiB fitting-f0d45b3d6edcabaf51d3.js 16 KiB\n+  chunk (runtime: main) fitting-f0d45b3d6edcabaf51d3.js 1.87 KiB (javascript) 8.56 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.56 KiB 11 modules\n     cacheable modules 1.87 KiB\n@@ -23,19 +23,19 @@ exports[`StatsTestCases should print correct stats for aggressive-splitting-entr\n     > ./index main\n     ./a.js 899 bytes [built] [code generated]\n     ./b.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) fitting-445185754184bf780ddc.js 916 bytes [rendered]\n+  chunk (runtime: main) fitting-3fdf9ef59eba6cfd6536.js 916 bytes [rendered]\n     > ./g ./index.js 7:0-13\n     ./g.js 916 bytes [built] [code generated]\n   fitting (webpack x.x.x) compiled successfully in X ms\n \n content-change:\n   PublicPath: auto\n-  asset content-change-0dc17ccd46aa2757f219.js 16 KiB [emitted] [immutable]\n+  asset content-change-14c3e81da6bb999e50c8.js 16 KiB [emitted] [immutable]\n   asset content-change-1c702fff0ba9fe1126d9.js 1.9 KiB [emitted] [immutable]\n   asset content-change-c0e0ed061413e64a66c5.js 1.9 KiB [emitted] [immutable]\n-  asset content-change-445185754184bf780ddc.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.8 KiB = content-change-1c702fff0ba9fe1126d9.js 1.9 KiB content-change-c0e0ed061413e64a66c5.js 1.9 KiB content-change-0dc17ccd46aa2757f219.js 16 KiB\n-  chunk (runtime: main) content-change-0dc17ccd46aa2757f219.js 1.87 KiB (javascript) 8.56 KiB (runtime) [entry] [rendered]\n+  asset content-change-3fdf9ef59eba6cfd6536.js 1.08 KiB [emitted] [immutable]\n+  Entrypoint main 19.8 KiB = content-change-1c702fff0ba9fe1126d9.js 1.9 KiB content-change-c0e0ed061413e64a66c5.js 1.9 KiB content-change-14c3e81da6bb999e50c8.js 16 KiB\n+  chunk (runtime: main) content-change-14c3e81da6bb999e50c8.js 1.87 KiB (javascript) 8.56 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.56 KiB 11 modules\n     cacheable modules 1.87 KiB\n@@ -50,15 +50,15 @@ content-change:\n     > ./index main\n     ./a.js 899 bytes [built] [code generated]\n     ./b.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) content-change-445185754184bf780ddc.js 916 bytes [rendered]\n+  chunk (runtime: main) content-change-3fdf9ef59eba6cfd6536.js 916 bytes [rendered]\n     > ./g ./index.js 7:0-13\n     ./g.js 916 bytes [built] [code generated]\n   content-change (webpack x.x.x) compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n \"PublicPath: auto\n-asset 273c7faaf1c5ed87b24b.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset a0fc232f4432610a2c68.js 11.5 KiB [emitted] [immutable] (name: main)\n asset b28b42175852a350ae55.js 1.91 KiB [emitted] [immutable]\n asset 5dc82ad1144129efc6f0.js 1.91 KiB [emitted] [immutable]\n asset 6861109a893ce5c56a08.js 1.9 KiB [emitted] [immutable]\n@@ -70,12 +70,12 @@ asset c98f03fbb3549a9685f2.js 1.9 KiB [emitted] [immutable]\n asset 4437b7a806fda9652d78.js 1010 bytes [emitted] [immutable]\n asset 9711883e11bdd4d550ff.js 1010 bytes [emitted] [immutable]\n asset e0332efe5dd181ffeff5.js 1010 bytes [emitted] [immutable]\n-Entrypoint main 11.5 KiB = 273c7faaf1c5ed87b24b.js\n+Entrypoint main 11.5 KiB = a0fc232f4432610a2c68.js\n chunk (runtime: main) c0e0ed061413e64a66c5.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./c ./d ./e ./index.js 3:0-30\n   ./c.js 899 bytes [built] [code generated]\n   ./d.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 273c7faaf1c5ed87b24b.js (main) 248 bytes (javascript) 6.25 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) a0fc232f4432610a2c68.js (main) 248 bytes (javascript) 6.25 KiB (runtime) [entry] [rendered]\n   > ./index main\n   runtime modules 6.25 KiB 7 modules\n   ./index.js 248 bytes [built] [code generated]\n@@ -658,19 +658,19 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"asset app.724140013cf9a0f83f3f-1.js 6.11 KiB [emitted] [immutable] (name: app)\n+\"asset app.ecd1f07cff3370e18342-1.js 6.11 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-1.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.71 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.724140013cf9a0f83f3f-1.js 6.11 KiB\n+Entrypoint app 6.71 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.ecd1f07cff3370e18342-1.js 6.11 KiB\n runtime modules 2.66 KiB 4 modules\n orphan modules 118 bytes [orphan] 2 modules\n cacheable modules 272 bytes\n   ./entry-1.js + 2 modules 185 bytes [built] [code generated]\n   ./constants.js 87 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset app.71ad650457023fca30e9-2.js 6.13 KiB [emitted] [immutable] (name: app)\n+asset app.b77242079c1d0deb2704-2.js 6.13 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-2.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.73 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.71ad650457023fca30e9-2.js 6.13 KiB\n+Entrypoint app 6.73 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.b77242079c1d0deb2704-2.js 6.13 KiB\n runtime modules 2.66 KiB 4 modules\n orphan modules 125 bytes [orphan] 2 modules\n cacheable modules 279 bytes\n@@ -700,39 +700,39 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"asset main-fb79b7466e6894496440.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-fb79b7466e6894496440.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n-asset 664-a0b92720f0f2d9d4aaf4.js 455 bytes [emitted] [immutable]\n-  sourceMap 664-a0b92720f0f2d9d4aaf4.js.map 344 bytes [emitted] [dev]\n+\"asset main-45bf3783fd98957f737f.js 10.3 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-45bf3783fd98957f737f.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n+asset 664-174e0b26755db617ef8d.js 455 bytes [emitted] [immutable]\n+  sourceMap 664-174e0b26755db617ef8d.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-fb79b7466e6894496440.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-fb79b7466e6894496440.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n-asset 664-a0b92720f0f2d9d4aaf4.js 455 bytes [emitted] [immutable]\n-  sourceMap 664-a0b92720f0f2d9d4aaf4.js.map 344 bytes [emitted] [dev]\n+asset main-45bf3783fd98957f737f.js 10.3 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-45bf3783fd98957f737f.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n+asset 664-174e0b26755db617ef8d.js 455 bytes [emitted] [immutable]\n+  sourceMap 664-174e0b26755db617ef8d.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./b/index.js 40 bytes [built] [code generated]\n   ./b/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-f0c18662272cb710ab14.js 11.5 KiB [emitted] [immutable] (name: main)\n-asset 664-3cdeef446e88ad105071.js 1.5 KiB [emitted] [immutable]\n+asset main-9e5206c3ee78c39e412c.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset 664-8406c2cea140299e69ee.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-f0c18662272cb710ab14.js 11.5 KiB [emitted] [immutable] (name: main)\n-asset 664-3cdeef446e88ad105071.js 1.5 KiB [emitted] [immutable]\n+asset main-9e5206c3ee78c39e412c.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset 664-8406c2cea140299e69ee.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n@@ -1060,7 +1060,7 @@ webpack x.x.x compiled with 2 warnings in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for immutable 1`] = `\n-\"asset bcfc8dd2d8d4b3af2957.js 13.3 KiB [emitted] [immutable] (name: main)\n+\"asset 6bfadebffe6cc3d3d3a9.js 13.3 KiB [emitted] [immutable] (name: main)\n asset 22c24a3b26d46118dc06.js 809 bytes [emitted] [immutable]\"\n `;\n \n@@ -1126,23 +1126,23 @@ runtime modules 2.37 KiB 3 modules\n webpack x.x.x compiled successfully in X ms\n \n asset b-runtime~main-9f27ae1cd47de56689fd.js 5.73 KiB [emitted] [immutable] (name: runtime~main)\n-asset b-all-b_js-286fe88eae15de65188e.js 475 bytes [emitted] [immutable] (id hint: all)\n+asset b-all-b_js-d09f99e25781be397e6c.js 475 bytes [emitted] [immutable] (id hint: all)\n asset b-main-132fd6da6e6e6728c990.js 457 bytes [emitted] [immutable] (name: main)\n asset b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 6.82 KiB = b-runtime~main-9f27ae1cd47de56689fd.js 5.73 KiB b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes b-all-b_js-286fe88eae15de65188e.js 475 bytes b-main-132fd6da6e6e6728c990.js 457 bytes\n+Entrypoint main 6.82 KiB = b-runtime~main-9f27ae1cd47de56689fd.js 5.73 KiB b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes b-all-b_js-d09f99e25781be397e6c.js 475 bytes b-main-132fd6da6e6e6728c990.js 457 bytes\n runtime modules 2.93 KiB 5 modules\n cacheable modules 40 bytes\n   ./b.js 17 bytes [built] [code generated]\n   ./node_modules/vendor.js 23 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n assets by chunk 895 bytes (id hint: all)\n-  asset c-all-b_js-fe3b412293f057de38c8.js 502 bytes [emitted] [immutable] (id hint: all)\n-  asset c-all-c_js-172fc4c28be7e411e551.js 393 bytes [emitted] [immutable] (id hint: all)\n-asset c-runtime~main-f7949987637e4c0477d5.js 13.4 KiB [emitted] [immutable] (name: runtime~main)\n+  asset c-all-b_js-3c3d3ae5b364fadfafb2.js 502 bytes [emitted] [immutable] (id hint: all)\n+  asset c-all-c_js-5982285e9907510293fa.js 393 bytes [emitted] [immutable] (id hint: all)\n+asset c-runtime~main-679cac90a0c7d3895571.js 13.4 KiB [emitted] [immutable] (name: runtime~main)\n asset c-main-a443d2f54b3b7aebaf75.js 664 bytes [emitted] [immutable] (name: main)\n asset c-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 14.5 KiB = c-runtime~main-f7949987637e4c0477d5.js 13.4 KiB c-all-c_js-172fc4c28be7e411e551.js 393 bytes c-main-a443d2f54b3b7aebaf75.js 664 bytes\n+Entrypoint main 14.5 KiB = c-runtime~main-679cac90a0c7d3895571.js 13.4 KiB c-all-c_js-5982285e9907510293fa.js 393 bytes c-main-a443d2f54b3b7aebaf75.js 664 bytes\n runtime modules 8.56 KiB 13 modules\n cacheable modules 101 bytes\n   ./c.js 61 bytes [built] [code generated]\n@@ -1251,7 +1251,7 @@ asset <CLR=32,BOLD>main.js</CLR> 84 bytes <CLR=32,BOLD>[emitted]</CLR> (name: ma\n     Message with named logger\n \n <CLR=BOLD>LOG from webpack.FlagDependencyExportsPlugin</CLR>\n-    <CLR=BOLD>100% of exports of modules have been determined (1 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)</CLR>\n+    <CLR=BOLD>0% of exports of modules have been determined (1 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)</CLR>\n + 3 hidden lines\n \n <CLR=BOLD>LOG from webpack.Compilation</CLR>\n@@ -2040,7 +2040,7 @@ LOG from LogTestPlugin\n + 6 hidden lines\n \n LOG from webpack.FlagDependencyExportsPlugin\n-    100% of exports of modules have been determined (6 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n+    0% of exports of modules have been determined (6 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n + 3 hidden lines\n \n LOG from webpack.Compilation\n@@ -2066,7 +2066,7 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (4f9e9a5628f36d03dfbb)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (d4736bc615b853b4617e)\"\n `;\n \n exports[`StatsTestCases should print correct stats for preset-errors-only 1`] = `\"\"`;\n@@ -2379,7 +2379,7 @@ LOG from webpack.Compilation\n LOG from webpack.FlagDependencyExportsPlugin\n <t> restore cached provided exports: X ms\n <t> figure out provided exports: X ms\n-    100% of exports of modules have been determined (6 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n+    0% of exports of modules have been determined (6 no declared exports, 0 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n <t> store provided exports into cache: X ms\n \n LOG from webpack.InnerGraphPlugin\n@@ -2435,21 +2435,21 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (4f9e9a5628f36d03dfbb)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (d4736bc615b853b4617e)\"\n `;\n \n exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \"a-normal:\n   assets by path *.js 3.22 KiB\n-    asset 3ff4cb81976a33814443-3ff4cb.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n+    asset 92b100c9dd880fb6fedd-92b100.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.92 KiB (5.89 KiB) = 3ff4cb81976a33814443-3ff4cb.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.92 KiB (5.89 KiB) = 92b100c9dd880fb6fedd-92b100.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2468,15 +2468,15 @@ exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \n b-normal:\n   assets by path *.js 3.22 KiB\n-    asset 3ff4cb81976a33814443-3ff4cb.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n+    asset 224aae039c610406a7c5-224aae.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.92 KiB (5.89 KiB) = 3ff4cb81976a33814443-3ff4cb.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.92 KiB (5.89 KiB) = 224aae039c610406a7c5-224aae.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2495,8 +2495,8 @@ b-normal:\n \n a-source-map:\n   assets by path *.js 3.44 KiB\n-    asset 1710932a27591ee4a94d-171093.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 1710932a27591ee4a94d-171093.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n+    asset 455b77a33a8878c30d52-455b77.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 455b77a33a8878c30d52-455b77.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 399 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2507,7 +2507,7 @@ a-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 3.03 KiB (20.5 KiB) = 1710932a27591ee4a94d-171093.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3.03 KiB (20.5 KiB) = 455b77a33a8878c30d52-455b77.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules\n@@ -2526,8 +2526,8 @@ a-source-map:\n \n b-source-map:\n   assets by path *.js 3.44 KiB\n-    asset 21d982bf196438b90b26-21d982.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 21d982bf196438b90b26-21d982.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n+    asset 1710932a27591ee4a94d-171093.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 1710932a27591ee4a94d-171093.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 395 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2538,7 +2538,7 @@ b-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 3.03 KiB (20.4 KiB) = 21d982bf196438b90b26-21d982.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3.03 KiB (20.4 KiB) = 1710932a27591ee4a94d-171093.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules\n@@ -3177,7 +3177,7 @@ cacheable modules 1.35 KiB\n     |   [no exports used]\n     | ./node_modules/big-module/index.js 44 bytes [built]\n     |   [only some exports used: a, huh]\n-    |   ModuleConcatenation bailout: List of module exports is dynamic (huh: maybe provided (runtime-defined) and used in main)\n+    |   ModuleConcatenation bailout: List of module exports is dynamic (a: maybe provided (runtime-defined) and used in main, huh: maybe provided (runtime-defined) and used in main)\n     | ./node_modules/big-module/a.js 58 bytes [built]\n     |   [only some exports used: a, huh]\n     |   ModuleConcatenation bailout: List of module exports is dynamic (huh: maybe provided (runtime-defined) and used in main)\n@@ -4391,7 +4391,7 @@ exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sy\n   asset 99.bundle.js 241 bytes [emitted]\n assets by path *.wasm 1.37 KiB\n   asset 4098dd6bcb43bd54baf6.module.wasm 531 bytes [emitted] [immutable]\n-  asset c3c66cf69b0a4bd721a4.module.wasm 290 bytes [emitted] [immutable]\n+  asset 4c37dae656a11fdaac9a.module.wasm 290 bytes [emitted] [immutable]\n   asset 86fec7665231a0198df8.module.wasm 156 bytes [emitted] [immutable]\n   asset 1da1d844c1509ed4d4c3.module.wasm 154 bytes [emitted] [immutable]\n   asset 2be4d707a05b1f7313ca.module.wasm 154 bytes [emitted] [immutable]"
      },
      {
        "sha": "bcbdd4ae6aa26d55aaac55ce93ccea49fcd130d4",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 8,
        "deletions": 3,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/78ee6fb3867e42cab35d17bc90ab3e834d8aec21/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=78ee6fb3867e42cab35d17bc90ab3e834d8aec21",
        "patch": "@@ -887,10 +887,15 @@ declare class ChunkGraph {\n \t): ReadonlySet<string>;\n \tgetChunkRuntimeRequirements(chunk: Chunk): ReadonlySet<string>;\n \tgetModuleGraphHash(\n-\t\tmodule?: any,\n-\t\truntime?: any,\n+\t\tmodule: Module,\n+\t\truntime: RuntimeSpec,\n \t\twithConnections?: boolean\n-\t): any;\n+\t): string;\n+\tgetModuleGraphHashBigInt(\n+\t\tmodule: Module,\n+\t\truntime: RuntimeSpec,\n+\t\twithConnections?: boolean\n+\t): bigint;\n \tgetTreeRuntimeRequirements(chunk: Chunk): ReadonlySet<string>;\n \tstatic getChunkGraphForModule(\n \t\tmodule: Module,"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13873",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13873/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13873/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13873/events",
    "html_url": "https://github.com/webpack/webpack/pull/13873",
    "id": 953376144,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njk3NDI3OTE3",
    "number": 13873,
    "title": "update to webpack-sources version 3",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-07-26T23:51:09Z",
    "updated_at": "2021-07-27T13:18:58Z",
    "closed_at": "2021-07-27T13:18:57Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13873",
      "html_url": "https://github.com/webpack/webpack/pull/13873",
      "diff_url": "https://github.com/webpack/webpack/pull/13873.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13873.patch",
      "merged_at": "2021-07-27T13:18:57Z"
    },
    "body": "improves performance\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13873/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "88ff5f0513e858adff054e5a2bba6812ac27db12",
        "filename": "lib/dependencies/AMDRequireDependency.js",
        "status": "modified",
        "additions": 2,
        "deletions": 8,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/lib%2Fdependencies%2FAMDRequireDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/lib%2Fdependencies%2FAMDRequireDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireDependency.js?ref=c3a0145b49e62fbda7fe1372b87b0cef517a6c7f",
        "patch": "@@ -123,10 +123,7 @@ AMDRequireDependency.Template = class AMDRequireDependencyTemplate extends (\n \n \t\t\tsource.replace(dep.outerRange[0], dep.arrayRange[0] - 1, startBlock);\n \n-\t\t\tsource.insert(\n-\t\t\t\tdep.arrayRange[0] + 0.9,\n-\t\t\t\t\"var __WEBPACK_AMD_REQUIRE_ARRAY__ = \"\n-\t\t\t);\n+\t\t\tsource.insert(dep.arrayRange[0], \"var __WEBPACK_AMD_REQUIRE_ARRAY__ = \");\n \n \t\t\tsource.replace(dep.arrayRange[1], dep.functionRange[0] - 1, \"; (\");\n \n@@ -160,10 +157,7 @@ AMDRequireDependency.Template = class AMDRequireDependencyTemplate extends (\n \n \t\t\tsource.replace(dep.outerRange[0], dep.arrayRange[0] - 1, startBlock);\n \n-\t\t\tsource.insert(\n-\t\t\t\tdep.arrayRange[0] + 0.9,\n-\t\t\t\t\"var __WEBPACK_AMD_REQUIRE_ARRAY__ = \"\n-\t\t\t);\n+\t\t\tsource.insert(dep.arrayRange[0], \"var __WEBPACK_AMD_REQUIRE_ARRAY__ = \");\n \n \t\t\tsource.replace(dep.arrayRange[1], dep.functionRange[0] - 1, \"; (\");\n "
      },
      {
        "sha": "fc5efdab2d33404d8e4b0668a90c564268d7363b",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=c3a0145b49e62fbda7fe1372b87b0cef517a6c7f",
        "patch": "@@ -27,7 +27,7 @@\n     \"tapable\": \"^2.1.1\",\n     \"terser-webpack-plugin\": \"^5.1.3\",\n     \"watchpack\": \"^2.2.0\",\n-    \"webpack-sources\": \"^2.3.1\"\n+    \"webpack-sources\": \"^3.0.1\"\n   },\n   \"peerDependenciesMeta\": {\n     \"webpack-cli\": {"
      },
      {
        "sha": "5cdef58f7294951e202a97ea146424dfbc7d4541",
        "filename": "test/__snapshots__/StatsTestCases.basictest.js.snap",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.basictest.js.snap?ref=c3a0145b49e62fbda7fe1372b87b0cef517a6c7f",
        "patch": "@@ -701,7 +701,7 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n \"asset main-4d9216d100d42b71ee29.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-4d9216d100d42b71ee29.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n+  sourceMap main-4d9216d100d42b71ee29.js.map 9.2 KiB [emitted] [dev] (auxiliary name: main)\n asset 664-bca314bd02016092cab9.js 455 bytes [emitted] [immutable]\n   sourceMap 664-bca314bd02016092cab9.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n@@ -712,7 +712,7 @@ cacheable modules 106 bytes\n webpack x.x.x compiled successfully in X ms\n \n asset main-4d9216d100d42b71ee29.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-4d9216d100d42b71ee29.js.map 9.21 KiB [emitted] [dev] (auxiliary name: main)\n+  sourceMap main-4d9216d100d42b71ee29.js.map 9.2 KiB [emitted] [dev] (auxiliary name: main)\n asset 664-bca314bd02016092cab9.js 455 bytes [emitted] [immutable]\n   sourceMap 664-bca314bd02016092cab9.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n@@ -2576,9 +2576,9 @@ relatedAssets:\n     asset relatedAssets-chunk_js.js 809 bytes [emitted]\n       compressed relatedAssets-chunk_js.js.br 809 bytes [emitted]\n       compressed relatedAssets-chunk_js.js.gz 809 bytes [emitted]\n-      sourceMap relatedAssets-chunk_js.js.map 300 bytes [emitted] [dev]\n-        compressed relatedAssets-chunk_js.js.map.br 300 bytes [emitted]\n-        compressed relatedAssets-chunk_js.js.map.gz 300 bytes [emitted]\n+      sourceMap relatedAssets-chunk_js.js.map 301 bytes [emitted] [dev]\n+        compressed relatedAssets-chunk_js.js.map.br 301 bytes [emitted]\n+        compressed relatedAssets-chunk_js.js.map.gz 301 bytes [emitted]\n   assets by path *.css 154 bytes\n     asset relatedAssets-chunk_js.css 79 bytes [emitted]\n       sourceMap relatedAssets-chunk_js.css.map 202 bytes [emitted] [dev]\n@@ -2603,8 +2603,8 @@ exclude1:\n       1 related asset\n     asset exclude1-chunk_js.js 804 bytes [emitted]\n       hidden assets 1.57 KiB 2 assets\n-      sourceMap exclude1-chunk_js.js.map 295 bytes [emitted] [dev]\n-        hidden assets 590 bytes 2 assets\n+      sourceMap exclude1-chunk_js.js.map 296 bytes [emitted] [dev]\n+        hidden assets 592 bytes 2 assets\n         1 related asset\n       1 related asset\n   assets by path *.css 144 bytes\n@@ -2628,7 +2628,7 @@ exclude2:\n       compressed exclude2-main.js.br 14.4 KiB [emitted]\n       compressed exclude2-main.js.gz 14.4 KiB [emitted]\n     asset exclude2-chunk_js.js 804 bytes [emitted]\n-      hidden assets 295 bytes 1 asset\n+      hidden assets 296 bytes 1 asset\n       compressed exclude2-chunk_js.js.br 804 bytes [emitted]\n       compressed exclude2-chunk_js.js.gz 804 bytes [emitted]\n   assets by path *.css 144 bytes"
      },
      {
        "sha": "8a350bded6fe01af9162b750d3439f6815192eda",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 5,
        "deletions": 8,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/c3a0145b49e62fbda7fe1372b87b0cef517a6c7f/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=c3a0145b49e62fbda7fe1372b87b0cef517a6c7f",
        "patch": "@@ -5440,7 +5440,7 @@ slice-ansi@^4.0.0:\n     astral-regex \"^2.0.0\"\n     is-fullwidth-code-point \"^3.0.0\"\n \n-source-list-map@^2.0.0, source-list-map@^2.0.1:\n+source-list-map@^2.0.0:\n   version \"2.0.1\"\n   resolved \"https://registry.yarnpkg.com/source-list-map/-/source-list-map-2.0.1.tgz#3993bd873bfc48479cca9ea3a547835c7c154b34\"\n   integrity sha512-qnQ7gVMxGNxsiL4lEuJwe/To8UnK7fAnmbGEEH8RpLouuKbeEm0lhbQVFIrNSuB+G7tVrAlVsZgETT5nljf+Iw==\n@@ -6157,13 +6157,10 @@ webpack-sources@^1.1.0:\n     source-list-map \"^2.0.0\"\n     source-map \"~0.6.1\"\n \n-webpack-sources@^2.3.1:\n-  version \"2.3.1\"\n-  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-2.3.1.tgz#570de0af163949fe272233c2cefe1b56f74511fd\"\n-  integrity sha512-y9EI9AO42JjEcrTJFOYmVywVZdKVUfOvDUPsJea5GIr1JOEGFVqwlY2K098fFoIjOkDzHn2AjRvM8dsBZu+gCA==\n-  dependencies:\n-    source-list-map \"^2.0.1\"\n-    source-map \"^0.6.1\"\n+webpack-sources@^3.0.1:\n+  version \"3.0.1\"\n+  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-3.0.1.tgz#518cfabdbde3962f75bbecbacd11d88ab3205252\"\n+  integrity sha512-LkBxiXJ3tTuhLaS5gz6D6l77Et8mPWlghAe7bbnmi2PyN1CtkiL/YitR+I0pn9PtBC88Irqgg6F9dBJh8+sJRQ==\n \n whatwg-encoding@^1.0.5:\n   version \"1.0.5\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13131",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13131/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13131/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13131/events",
    "html_url": "https://github.com/webpack/webpack/pull/13131",
    "id": 857608990,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjE1MDAwMDIy",
    "number": 13131,
    "title": "improve performance of `export *`",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-04-14T07:31:11Z",
    "updated_at": "2021-04-14T10:11:04Z",
    "closed_at": "2021-04-14T10:11:03Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13131",
      "html_url": "https://github.com/webpack/webpack/pull/13131",
      "diff_url": "https://github.com/webpack/webpack/pull/13131.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13131.patch",
      "merged_at": "2021-04-14T10:11:03Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* add a cache in the ModuleGraph while this is uncached\r\n* cache discovering of other star exports\r\n* cache `getMode`\r\n\r\nfixes #13107\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nN/A\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13131/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "9ed6f297b0d07ee1cfb5ecd115721569138f8586",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -1946,6 +1946,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t}\n \n \t\t\tthis.processDependenciesQueue.invalidate(module);\n+\t\t\tthis.moduleGraph.unfreeze();\n \t\t\tthis.processModuleDependencies(module, err => {\n \t\t\t\tif (err) return callback(err);\n \t\t\t\tthis.removeReasonsOfDependencyBlock(module, {\n@@ -2152,6 +2153,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \n \t\t\t// extract warnings and errors from modules\n \t\t\tthis.logger.time(\"report dependency errors and warnings\");\n+\t\t\tthis.moduleGraph.freeze();\n \t\t\tfor (const module of modules) {\n \t\t\t\tthis.reportDependencyErrorsAndWarnings(module, [module]);\n \t\t\t\tconst errors = module.getErrors();\n@@ -2173,6 +2175,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\t\t\tthis.moduleGraph.unfreeze();\n \t\t\tthis.logger.timeEnd(\"report dependency errors and warnings\");\n \n \t\t\tcallback();\n@@ -2190,6 +2193,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\tthis.assets = {};\n \t\tthis.assetsInfo.clear();\n \t\tthis.moduleGraph.removeAllModuleAttributes();\n+\t\tthis.moduleGraph.unfreeze();\n \t}\n \n \t/**\n@@ -2215,6 +2219,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \n \t\tthis.logger.time(\"create chunks\");\n \t\tthis.hooks.beforeChunks.call();\n+\t\tthis.moduleGraph.freeze();\n \t\t/** @type {Map<Entrypoint, Module[]>} */\n \t\tconst chunkGraphInit = new Map();\n \t\tfor (const [name, { dependencies, includeDependencies, options }] of this"
      },
      {
        "sha": "2875d781b68d83862e85b4bcb672b5e67f61809e",
        "filename": "lib/FlagDependencyExportsPlugin.js",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2FFlagDependencyExportsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2FFlagDependencyExportsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyExportsPlugin.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -12,6 +12,7 @@ const Queue = require(\"./util/Queue\");\n /** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n /** @typedef {import(\"./Dependency\")} Dependency */\n /** @typedef {import(\"./Dependency\").ExportSpec} ExportSpec */\n+/** @typedef {import(\"./Dependency\").ExportsSpec} ExportsSpec */\n /** @typedef {import(\"./ExportsInfo\")} ExportsInfo */\n /** @typedef {import(\"./Module\")} Module */\n \n@@ -93,6 +94,9 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t/** @type {ExportsInfo} */\n \t\t\t\t\t\t\t\tlet exportsInfo;\n \n+\t\t\t\t\t\t\t\t/** @type {Map<Dependency, ExportsSpec>} */\n+\t\t\t\t\t\t\t\tconst exportsSpecsFromDependencies = new Map();\n+\n \t\t\t\t\t\t\t\tlet cacheable = true;\n \t\t\t\t\t\t\t\tlet changed = false;\n \n@@ -116,6 +120,15 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\tconst processDependency = dep => {\n \t\t\t\t\t\t\t\t\tconst exportDesc = dep.getExports(moduleGraph);\n \t\t\t\t\t\t\t\t\tif (!exportDesc) return;\n+\t\t\t\t\t\t\t\t\texportsSpecsFromDependencies.set(dep, exportDesc);\n+\t\t\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\t\t\t/**\n+\t\t\t\t\t\t\t\t * @param {Dependency} dep dependency\n+\t\t\t\t\t\t\t\t * @param {ExportsSpec} exportDesc info\n+\t\t\t\t\t\t\t\t * @returns {void}\n+\t\t\t\t\t\t\t\t */\n+\t\t\t\t\t\t\t\tconst processExportsSpec = (dep, exportDesc) => {\n \t\t\t\t\t\t\t\t\tconst exports = exportDesc.exports;\n \t\t\t\t\t\t\t\t\tconst globalCanMangle = exportDesc.canMangle;\n \t\t\t\t\t\t\t\t\tconst globalFrom = exportDesc.from;\n@@ -300,7 +313,16 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t\tcacheable = true;\n \t\t\t\t\t\t\t\t\t\tchanged = false;\n \n+\t\t\t\t\t\t\t\t\t\texportsSpecsFromDependencies.clear();\n+\t\t\t\t\t\t\t\t\t\tmoduleGraph.freeze();\n \t\t\t\t\t\t\t\t\t\tprocessDependenciesBlock(module);\n+\t\t\t\t\t\t\t\t\t\tmoduleGraph.unfreeze();\n+\t\t\t\t\t\t\t\t\t\tfor (const [\n+\t\t\t\t\t\t\t\t\t\t\tdep,\n+\t\t\t\t\t\t\t\t\t\t\texportsSpec\n+\t\t\t\t\t\t\t\t\t\t] of exportsSpecsFromDependencies) {\n+\t\t\t\t\t\t\t\t\t\t\tprocessExportsSpec(dep, exportsSpec);\n+\t\t\t\t\t\t\t\t\t\t}\n \n \t\t\t\t\t\t\t\t\t\tif (cacheable) {\n \t\t\t\t\t\t\t\t\t\t\tmodulesToStore.add(module);"
      },
      {
        "sha": "409bd730092fea75511d38a3aa9b1ca260dfad0d",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -9,6 +9,7 @@ const util = require(\"util\");\n const ExportsInfo = require(\"./ExportsInfo\");\n const ModuleGraphConnection = require(\"./ModuleGraphConnection\");\n const SortableSet = require(\"./util/SortableSet\");\n+const WeakTupleMap = require(\"./util/WeakTupleMap\");\n \n /** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n /** @typedef {import(\"./Dependency\")} Dependency */\n@@ -110,6 +111,9 @@ class ModuleGraph {\n \t\tthis._cacheModuleGraphModuleValue2 = undefined;\n \t\tthis._cacheModuleGraphDependencyKey = undefined;\n \t\tthis._cacheModuleGraphDependencyValue = undefined;\n+\n+\t\t/** @type {WeakTupleMap<any[], any>} */\n+\t\tthis._cache = undefined;\n \t}\n \n \t/**\n@@ -699,6 +703,26 @@ class ModuleGraph {\n \t\treturn this._metaMap.get(thing);\n \t}\n \n+\tfreeze() {\n+\t\tthis._cache = new WeakTupleMap();\n+\t}\n+\n+\tunfreeze() {\n+\t\tthis._cache = undefined;\n+\t}\n+\n+\t/**\n+\t * @template {any[]} T\n+\t * @template V\n+\t * @param {(moduleGraph: ModuleGraph, ...args: T) => V} fn computer\n+\t * @param {T} args arguments\n+\t * @returns {V} computed value or cached\n+\t */\n+\tcached(fn, ...args) {\n+\t\tif (this._cache === undefined) return fn(this, ...args);\n+\t\treturn this._cache.provide(fn, ...args, () => fn(this, ...args));\n+\t}\n+\n \t// TODO remove in webpack 6\n \t/**\n \t * @param {Module} module the module"
      },
      {
        "sha": "c341c1adcfdb01baf46e5d92304619b77f4425df",
        "filename": "lib/dependencies/HarmonyExportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 7,
        "deletions": 3,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -16,6 +16,8 @@ const {\n } = require(\"./HarmonyImportDependencyParserPlugin\");\n const HarmonyImportSideEffectDependency = require(\"./HarmonyImportSideEffectDependency\");\n \n+const { HarmonyStarExportsList } = HarmonyExportImportedSpecifierDependency;\n+\n module.exports = class HarmonyExportDependencyParserPlugin {\n \tconstructor(options) {\n \t\tthis.strictExportPresence = options.strictExportPresence;\n@@ -124,7 +126,8 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\t\t\tname,\n \t\t\t\t\t\tharmonyNamedExports,\n \t\t\t\t\t\tnull,\n-\t\t\t\t\t\tthis.strictExportPresence\n+\t\t\t\t\t\tthis.strictExportPresence,\n+\t\t\t\t\t\tnull\n \t\t\t\t\t);\n \t\t\t\t} else {\n \t\t\t\t\tdep = new HarmonyExportSpecifierDependency(id, name);\n@@ -145,7 +148,7 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\t\tharmonyNamedExports.add(name);\n \t\t\t\t} else {\n \t\t\t\t\tharmonyStarExports = parser.state.harmonyStarExports =\n-\t\t\t\t\t\tparser.state.harmonyStarExports || [];\n+\t\t\t\t\t\tparser.state.harmonyStarExports || new HarmonyStarExportsList();\n \t\t\t\t}\n \t\t\t\tconst dep = new HarmonyExportImportedSpecifierDependency(\n \t\t\t\t\tsource,\n@@ -154,7 +157,8 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\t\tname,\n \t\t\t\t\tharmonyNamedExports,\n \t\t\t\t\tharmonyStarExports && harmonyStarExports.slice(),\n-\t\t\t\t\tthis.strictExportPresence\n+\t\t\t\t\tthis.strictExportPresence,\n+\t\t\t\t\tharmonyStarExports\n \t\t\t\t);\n \t\t\t\tif (harmonyStarExports) {\n \t\t\t\t\tharmonyStarExports.push(dep);"
      },
      {
        "sha": "147546fcdf07d8cdad7481ef0667cde16035c494",
        "filename": "lib/dependencies/HarmonyExportImportedSpecifierDependency.js",
        "status": "modified",
        "additions": 191,
        "deletions": 39,
        "changes": 230,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -11,6 +11,7 @@ const HarmonyLinkingError = require(\"../HarmonyLinkingError\");\n const InitFragment = require(\"../InitFragment\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n const Template = require(\"../Template\");\n+const { countIterable } = require(\"../util/IterableHelpers\");\n const { first, combine } = require(\"../util/SetHelpers\");\n const makeSerializable = require(\"../util/makeSerializable\");\n const propertyAccess = require(\"../util/propertyAccess\");\n@@ -92,15 +93,72 @@ class ExportMode {\n \t}\n }\n \n+const determineExportAssignments = (\n+\tmoduleGraph,\n+\tdependencies,\n+\tadditionalDependency\n+) => {\n+\tconst names = new Set();\n+\tconst dependencyIndices = [];\n+\n+\tif (additionalDependency) {\n+\t\tdependencies = dependencies.concat(additionalDependency);\n+\t}\n+\n+\tfor (const dep of dependencies) {\n+\t\tconst i = dependencyIndices.length;\n+\t\tdependencyIndices[i] = names.size;\n+\t\tconst otherImportedModule = moduleGraph.getModule(dep);\n+\t\tif (otherImportedModule) {\n+\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(otherImportedModule);\n+\t\t\tfor (const exportInfo of exportsInfo.exports) {\n+\t\t\t\tif (\n+\t\t\t\t\texportInfo.provided === true &&\n+\t\t\t\t\texportInfo.name !== \"default\" &&\n+\t\t\t\t\t!names.has(exportInfo.name)\n+\t\t\t\t) {\n+\t\t\t\t\tnames.add(exportInfo.name);\n+\t\t\t\t\tdependencyIndices[i] = names.size;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\tdependencyIndices.push(names.size);\n+\n+\treturn { names: Array.from(names), dependencyIndices };\n+};\n+\n+const findDependencyForName = (\n+\t{ names, dependencyIndices },\n+\tname,\n+\tdependencies\n+) => {\n+\tconst dependenciesIt = dependencies[Symbol.iterator]();\n+\tconst dependencyIndicesIt = dependencyIndices[Symbol.iterator]();\n+\tlet dependenciesItResult = dependenciesIt.next();\n+\tlet dependencyIndicesItResult = dependencyIndicesIt.next();\n+\tif (dependencyIndicesItResult.done) return;\n+\tfor (let i = 0; i < names.length; i++) {\n+\t\twhile (i >= dependencyIndicesItResult.value) {\n+\t\t\tdependenciesItResult = dependenciesIt.next();\n+\t\t\tdependencyIndicesItResult = dependencyIndicesIt.next();\n+\t\t\tif (dependencyIndicesItResult.done) return;\n+\t\t}\n+\t\tif (names[i] === name) return dependenciesItResult.value;\n+\t}\n+\treturn undefined;\n+};\n+\n class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t/**\n \t * @param {string} request the request string\n \t * @param {number} sourceOrder the order in the original source file\n \t * @param {string[]} ids the requested export name of the imported module\n \t * @param {string | null} name the export name of for this module\n \t * @param {Set<string>} activeExports other named exports in the module\n-\t * @param {Iterable<HarmonyExportImportedSpecifierDependency>} otherStarExports other star exports in the module\n+\t * @param {ReadonlyArray<HarmonyExportImportedSpecifierDependency> | Iterable<HarmonyExportImportedSpecifierDependency>} otherStarExports other star exports in the module before this import\n \t * @param {boolean} strictExportPresence when true, missing exports in the imported module lead to errors instead of warnings\n+\t * @param {HarmonyStarExportsList} allStarExports all star exports in the module\n \t */\n \tconstructor(\n \t\trequest,\n@@ -109,7 +167,8 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tname,\n \t\tactiveExports,\n \t\totherStarExports,\n-\t\tstrictExportPresence\n+\t\tstrictExportPresence,\n+\t\tallStarExports\n \t) {\n \t\tsuper(request, sourceOrder);\n \n@@ -118,6 +177,8 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tthis.activeExports = activeExports;\n \t\tthis.otherStarExports = otherStarExports;\n \t\tthis.strictExportPresence = strictExportPresence;\n+\t\tthis.allStarExports = allStarExports;\n+\t\tthis._getMode = this._getMode.bind(this);\n \t}\n \n \t// TODO webpack 6 remove\n@@ -162,6 +223,15 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t * @returns {ExportMode} the export mode\n \t */\n \tgetMode(moduleGraph, runtime) {\n+\t\treturn moduleGraph.cached(this._getMode, runtime);\n+\t}\n+\n+\t/**\n+\t * @param {ModuleGraph} moduleGraph the module graph\n+\t * @param {RuntimeSpec} runtime the runtime\n+\t * @returns {ExportMode} the export mode\n+\t */\n+\t_getMode(moduleGraph, runtime) {\n \t\tconst name = this.name;\n \t\tconst ids = this.getIds(moduleGraph);\n \t\tconst parentModule = moduleGraph.getParentModule(this);\n@@ -300,19 +370,20 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\tchecked.has(exportName),\n \t\t\t\t\tfalse\n \t\t\t\t)\n-\t\t).concat(\n-\t\t\tArray.from(\n-\t\t\t\thidden,\n-\t\t\t\texportName =>\n+\t\t);\n+\t\tif (hidden !== undefined) {\n+\t\t\tfor (const exportName of hidden) {\n+\t\t\t\tmode.items.push(\n \t\t\t\t\tnew NormalReexportItem(\n \t\t\t\t\t\texportName,\n \t\t\t\t\t\t[exportName],\n \t\t\t\t\t\texportsInfo.getReadOnlyExportInfo(exportName),\n \t\t\t\t\t\tfalse,\n \t\t\t\t\t\ttrue\n \t\t\t\t\t)\n-\t\t\t)\n-\t\t);\n+\t\t\t\t);\n+\t\t\t}\n+\t\t}\n \n \t\treturn mode;\n \t}\n@@ -322,7 +393,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t * @param {RuntimeSpec} runtime the runtime\n \t * @param {ExportsInfo} exportsInfo exports info about the current module (optional)\n \t * @param {Module} importedModule the imported module (optional)\n-\t * @returns {{exports?: Set<string>, checked?: Set<string>, ignoredExports: Set<string>, hidden: Set<string>}} information\n+\t * @returns {{exports?: Set<string>, checked?: Set<string>, ignoredExports: Set<string>, hidden?: Set<string>}} information\n \t */\n \tgetStarReexports(\n \t\tmoduleGraph,\n@@ -338,10 +409,18 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\texportsInfo.otherExportsInfo.getUsed(runtime) === UsageState.Unused;\n \n \t\tconst ignoredExports = new Set([\"default\", ...this.activeExports]);\n-\t\tconst hiddenExports = new Set(\n-\t\t\tthis._discoverActiveExportsFromOtherStarExports(moduleGraph).keys()\n+\n+\t\tlet hiddenExports = undefined;\n+\t\tconst otherStarExports = this._discoverActiveExportsFromOtherStarExports(\n+\t\t\tmoduleGraph\n \t\t);\n-\t\tfor (const e of ignoredExports) hiddenExports.delete(e);\n+\t\tif (otherStarExports !== undefined) {\n+\t\t\thiddenExports = new Set();\n+\t\t\tfor (let i = 0; i < otherStarExports.namesSlice; i++) {\n+\t\t\t\thiddenExports.add(otherStarExports.names[i]);\n+\t\t\t}\n+\t\t\tfor (const e of ignoredExports) hiddenExports.delete(e);\n+\t\t}\n \n \t\tif (!noExtraExports && !noExtraImports) {\n \t\t\treturn {\n@@ -355,7 +434,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t/** @type {Set<string>} */\n \t\tconst checked = new Set();\n \t\t/** @type {Set<string>} */\n-\t\tconst hidden = new Set();\n+\t\tconst hidden = hiddenExports !== undefined ? new Set() : undefined;\n \n \t\tif (noExtraImports) {\n \t\t\tfor (const exportInfo of exportsInfo.orderedExports) {\n@@ -366,7 +445,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\tname\n \t\t\t\t);\n \t\t\t\tif (importedExportInfo.provided === false) continue;\n-\t\t\t\tif (hiddenExports.has(name)) {\n+\t\t\t\tif (hiddenExports !== undefined && hiddenExports.has(name)) {\n \t\t\t\t\thidden.add(name);\n \t\t\t\t\tcontinue;\n \t\t\t\t}\n@@ -381,7 +460,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\tif (importedExportInfo.provided === false) continue;\n \t\t\t\tconst exportInfo = exportsInfo.getReadOnlyExportInfo(name);\n \t\t\t\tif (exportInfo.getUsed(runtime) === UsageState.Unused) continue;\n-\t\t\t\tif (hiddenExports.has(name)) {\n+\t\t\t\tif (hiddenExports !== undefined && hiddenExports.has(name)) {\n \t\t\t\t\thidden.add(name);\n \t\t\t\t\tcontinue;\n \t\t\t\t}\n@@ -481,28 +560,43 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \n \t/**\n \t * @param {ModuleGraph} moduleGraph the module graph\n-\t * @returns {Map<string, HarmonyExportImportedSpecifierDependency>} exported names and their origin dependency\n+\t * @returns {{ names: string[], namesSlice: number, dependencyIndices: number[], dependencyIndex: number } | undefined} exported names and their origin dependency\n \t */\n \t_discoverActiveExportsFromOtherStarExports(moduleGraph) {\n-\t\tif (!this.otherStarExports) {\n-\t\t\treturn new Map();\n-\t\t}\n+\t\tif (!this.otherStarExports) return undefined;\n+\n+\t\tconst i =\n+\t\t\t\"length\" in this.otherStarExports\n+\t\t\t\t? this.otherStarExports.length\n+\t\t\t\t: countIterable(this.otherStarExports);\n+\t\tif (i === 0) return undefined;\n+\n+\t\tif (this.allStarExports) {\n+\t\t\tconst { names, dependencyIndices } = moduleGraph.cached(\n+\t\t\t\tdetermineExportAssignments,\n+\t\t\t\tthis.allStarExports.dependencies\n+\t\t\t);\n \n-\t\tconst result = new Map();\n-\t\t// try to learn impossible exports from other star exports with provided exports\n-\t\tfor (const otherStarExport of this.otherStarExports) {\n-\t\t\tconst otherImportedModule = moduleGraph.getModule(otherStarExport);\n-\t\t\tif (otherImportedModule) {\n-\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(otherImportedModule);\n-\t\t\t\tfor (const exportInfo of exportsInfo.exports) {\n-\t\t\t\t\tif (exportInfo.provided === true && !result.has(exportInfo.name)) {\n-\t\t\t\t\t\tresult.set(exportInfo.name, otherStarExport);\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n+\t\t\treturn {\n+\t\t\t\tnames,\n+\t\t\t\tnamesSlice: dependencyIndices[i - 1],\n+\t\t\t\tdependencyIndices,\n+\t\t\t\tdependencyIndex: i\n+\t\t\t};\n \t\t}\n \n-\t\treturn result;\n+\t\tconst { names, dependencyIndices } = moduleGraph.cached(\n+\t\t\tdetermineExportAssignments,\n+\t\t\tthis.otherStarExports,\n+\t\t\tthis\n+\t\t);\n+\n+\t\treturn {\n+\t\t\tnames,\n+\t\t\tnamesSlice: dependencyIndices[i - 1],\n+\t\t\tdependencyIndices,\n+\t\t\tdependencyIndex: i\n+\t\t};\n \t}\n \n \t/**\n@@ -522,7 +616,9 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\texports: true,\n \t\t\t\t\tfrom,\n \t\t\t\t\tcanMangle: false,\n-\t\t\t\t\texcludeExports: combine(mode.ignored, mode.hidden),\n+\t\t\t\t\texcludeExports: mode.hidden\n+\t\t\t\t\t\t? combine(mode.ignored, mode.hidden)\n+\t\t\t\t\t\t: mode.ignored,\n \t\t\t\t\thideExports: mode.hidden,\n \t\t\t\t\tdependencies: [from.module]\n \t\t\t\t};\n@@ -670,7 +766,15 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\tconst potentialConflicts = this._discoverActiveExportsFromOtherStarExports(\n \t\t\t\tmoduleGraph\n \t\t\t);\n-\t\t\tif (potentialConflicts.size > 0) {\n+\t\t\tif (potentialConflicts && potentialConflicts.namesSlice > 0) {\n+\t\t\t\tconst ownNames = new Set(\n+\t\t\t\t\tpotentialConflicts.names.slice(\n+\t\t\t\t\t\tpotentialConflicts.namesSlice,\n+\t\t\t\t\t\tpotentialConflicts.dependencyIndices[\n+\t\t\t\t\t\t\tpotentialConflicts.dependencyIndex\n+\t\t\t\t\t\t]\n+\t\t\t\t\t)\n+\t\t\t\t);\n \t\t\t\tconst importedModule = moduleGraph.getModule(this);\n \t\t\t\tif (importedModule) {\n \t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(importedModule);\n@@ -679,8 +783,13 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\t\tif (exportInfo.provided !== true) continue;\n \t\t\t\t\t\tif (exportInfo.name === \"default\") continue;\n \t\t\t\t\t\tif (this.activeExports.has(exportInfo.name)) continue;\n-\t\t\t\t\t\tconst conflictingDependency = potentialConflicts.get(\n-\t\t\t\t\t\t\texportInfo.name\n+\t\t\t\t\t\tif (ownNames.has(exportInfo.name)) continue;\n+\t\t\t\t\t\tconst conflictingDependency = findDependencyForName(\n+\t\t\t\t\t\t\tpotentialConflicts,\n+\t\t\t\t\t\t\texportInfo.name,\n+\t\t\t\t\t\t\tthis.allStarExports\n+\t\t\t\t\t\t\t\t? this.allStarExports.dependencies\n+\t\t\t\t\t\t\t\t: [...this.otherStarExports, this]\n \t\t\t\t\t\t);\n \t\t\t\t\t\tif (!conflictingDependency) continue;\n \t\t\t\t\t\tconst target = exportInfo.getTerminalBinding(moduleGraph);\n@@ -726,25 +835,29 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t}\n \n \tserialize(context) {\n-\t\tconst { write } = context;\n+\t\tconst { write, setCircularReference } = context;\n \n+\t\tsetCircularReference(this);\n \t\twrite(this.ids);\n \t\twrite(this.name);\n \t\twrite(this.activeExports);\n \t\twrite(this.otherStarExports);\n \t\twrite(this.strictExportPresence);\n+\t\twrite(this.allStarExports);\n \n \t\tsuper.serialize(context);\n \t}\n \n \tdeserialize(context) {\n-\t\tconst { read } = context;\n+\t\tconst { read, setCircularReference } = context;\n \n+\t\tsetCircularReference(this);\n \t\tthis.ids = read();\n \t\tthis.name = read();\n \t\tthis.activeExports = read();\n \t\tthis.otherStarExports = read();\n \t\tthis.strictExportPresence = read();\n+\t\tthis.allStarExports = read();\n \n \t\tsuper.deserialize(context);\n \t}\n@@ -948,7 +1061,9 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\t\t\tbreak;\n \n \t\t\tcase \"dynamic-reexport\": {\n-\t\t\t\tconst ignored = combine(mode.ignored, mode.hidden);\n+\t\t\t\tconst ignored = mode.hidden\n+\t\t\t\t\t? combine(mode.ignored, mode.hidden)\n+\t\t\t\t\t: mode.ignored;\n \t\t\t\tconst modern =\n \t\t\t\t\truntimeTemplate.supportsConst() &&\n \t\t\t\t\truntimeTemplate.supportsArrowFunction();\n@@ -1089,3 +1204,40 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\treturn `${name}${propertyAccess(valueKey)}`;\n \t}\n };\n+\n+class HarmonyStarExportsList {\n+\tconstructor() {\n+\t\t/** @type {HarmonyExportImportedSpecifierDependency[]} */\n+\t\tthis.dependencies = [];\n+\t}\n+\n+\t/**\n+\t * @param {HarmonyExportImportedSpecifierDependency} dep dependency\n+\t * @returns {void}\n+\t */\n+\tpush(dep) {\n+\t\tthis.dependencies.push(dep);\n+\t}\n+\n+\tslice() {\n+\t\treturn this.dependencies.slice();\n+\t}\n+\n+\tserialize({ write, setCircularReference }) {\n+\t\tsetCircularReference(this);\n+\t\twrite(this.dependencies);\n+\t}\n+\n+\tdeserialize({ read, setCircularReference }) {\n+\t\tsetCircularReference(this);\n+\t\tthis.dependencies = read();\n+\t}\n+}\n+\n+makeSerializable(\n+\tHarmonyStarExportsList,\n+\t\"webpack/lib/dependencies/HarmonyExportImportedSpecifierDependency\",\n+\t\"HarmonyStarExportsList\"\n+);\n+\n+module.exports.HarmonyStarExportsList = HarmonyStarExportsList;"
      },
      {
        "sha": "ca87684faee008ee1b403326513f3257e48ce325",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "modified",
        "additions": 13,
        "deletions": 4,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -386,6 +386,9 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t\tthrow e;\n \t\t\t\t}\n \t\t\t},\n+\t\t\tsetCircularReference(ref) {\n+\t\t\t\taddReferenceable(ref);\n+\t\t\t},\n \t\t\tsnapshot() {\n \t\t\t\treturn {\n \t\t\t\t\tlength: result.length,\n@@ -442,7 +445,9 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t}\n \n \t\t\t\tif (cycleStack.has(item)) {\n-\t\t\t\t\tthrow new Error(`Circular references can't be serialized`);\n+\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t`This is a circular references. To serialize circular references use 'setCircularReference' somewhere in the circle during serialize and deserialize.`\n+\t\t\t\t\t);\n \t\t\t\t}\n \n \t\t\t\tconst { request, name, serializer } = ObjectMiddleware.getSerializerFor(\n@@ -568,6 +573,9 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\tread() {\n \t\t\t\treturn decodeValue();\n \t\t\t},\n+\t\t\tsetCircularReference(ref) {\n+\t\t\t\taddReferenceable(ref);\n+\t\t\t},\n \t\t\t...context\n \t\t};\n \t\tthis.extendContext(ctx);\n@@ -585,14 +593,15 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t\tthrow new Error(\n \t\t\t\t\t\t`Unexpected end of object at position ${currentDataPos - 1}`\n \t\t\t\t\t);\n-\t\t\t\t} else if (typeof nextItem === \"number\" && nextItem < 0) {\n-\t\t\t\t\t// relative reference\n-\t\t\t\t\treturn referenceable[currentPos + nextItem];\n \t\t\t\t} else {\n \t\t\t\t\tconst request = nextItem;\n \t\t\t\t\tlet serializer;\n \n \t\t\t\t\tif (typeof request === \"number\") {\n+\t\t\t\t\t\tif (request < 0) {\n+\t\t\t\t\t\t\t// relative reference\n+\t\t\t\t\t\t\treturn referenceable[currentPos + request];\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tserializer = objectTypeLookup[currentPosTypeLookup - request];\n \t\t\t\t\t} else {\n \t\t\t\t\t\tif (typeof request !== \"string\") {"
      },
      {
        "sha": "be2bb3324558a1493579bfd564640b6c44edb4d1",
        "filename": "lib/util/WeakTupleMap.js",
        "status": "added",
        "additions": 168,
        "deletions": 0,
        "changes": 168,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Futil%2FWeakTupleMap.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/lib%2Futil%2FWeakTupleMap.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FWeakTupleMap.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -0,0 +1,168 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const isWeakKey = thing => typeof thing === \"object\" && thing !== null;\n+\n+class WeakTupleNode {\n+\tconstructor() {\n+\t\tthis.f = 0;\n+\t\t/** @type {any} */\n+\t\tthis.v = undefined;\n+\t\t/** @type {Map<object, WeakTupleNode> | undefined} */\n+\t\tthis.m = undefined;\n+\t\t/** @type {WeakMap<object, WeakTupleNode> | undefined} */\n+\t\tthis.w = undefined;\n+\t}\n+\n+\tgetValue() {\n+\t\treturn this.v;\n+\t}\n+\n+\thasValue() {\n+\t\treturn (this.f & 1) === 1;\n+\t}\n+\n+\tsetValue(v) {\n+\t\tthis.f |= 1;\n+\t\tthis.v = v;\n+\t}\n+\n+\tdeleteValue() {\n+\t\tthis.f &= 6;\n+\t\tthis.v = undefined;\n+\t}\n+\n+\tpeek(thing) {\n+\t\tif (isWeakKey(thing)) {\n+\t\t\tif ((this.f & 4) !== 4) return undefined;\n+\t\t\treturn this.w.get(thing);\n+\t\t} else {\n+\t\t\tif ((this.f & 2) !== 2) return undefined;\n+\t\t\treturn this.m.get(thing);\n+\t\t}\n+\t}\n+\n+\tget(thing) {\n+\t\tif (isWeakKey(thing)) {\n+\t\t\tif ((this.f & 4) !== 4) {\n+\t\t\t\tconst newMap = new WeakMap();\n+\t\t\t\tthis.f |= 4;\n+\t\t\t\tconst newNode = new WeakTupleNode();\n+\t\t\t\t(this.w = newMap).set(thing, newNode);\n+\t\t\t\treturn newNode;\n+\t\t\t}\n+\t\t\tconst entry = this.w.get(thing);\n+\t\t\tif (entry !== undefined) {\n+\t\t\t\treturn entry;\n+\t\t\t}\n+\t\t\tconst newNode = new WeakTupleNode();\n+\t\t\tthis.w.set(thing, newNode);\n+\t\t\treturn newNode;\n+\t\t} else {\n+\t\t\tif ((this.f & 2) !== 2) {\n+\t\t\t\tconst newMap = new Map();\n+\t\t\t\tthis.f |= 2;\n+\t\t\t\tconst newNode = new WeakTupleNode();\n+\t\t\t\t(this.m = newMap).set(thing, newNode);\n+\t\t\t\treturn newNode;\n+\t\t\t}\n+\t\t\tconst entry = this.m.get(thing);\n+\t\t\tif (entry !== undefined) {\n+\t\t\t\treturn entry;\n+\t\t\t}\n+\t\t\tconst newNode = new WeakTupleNode();\n+\t\t\tthis.m.set(thing, newNode);\n+\t\t\treturn newNode;\n+\t\t}\n+\t}\n+}\n+\n+/**\n+ * @template {any[]} T\n+ * @template V\n+ */\n+class WeakTupleMap {\n+\tconstructor() {\n+\t\tthis._node = new WeakTupleNode();\n+\t}\n+\n+\t/**\n+\t * @param {[...T, V]} args tuple\n+\t * @returns {void}\n+\t */\n+\tset(...args) {\n+\t\tlet node = this._node;\n+\t\tfor (let i = 0; i < args.length - 1; i++) {\n+\t\t\tnode = node.get(args[i]);\n+\t\t}\n+\t\tnode.setValue(args[args.length - 1]);\n+\t}\n+\n+\t/**\n+\t * @param {T} args tuple\n+\t * @returns {boolean} true, if the tuple is in the Set\n+\t */\n+\thas(...args) {\n+\t\tlet node = this._node;\n+\t\tfor (let i = 0; i < args.length; i++) {\n+\t\t\tnode = node.peek(args[i]);\n+\t\t\tif (node === undefined) return false;\n+\t\t}\n+\t\treturn node.hasValue();\n+\t}\n+\n+\t/**\n+\t * @param {T} args tuple\n+\t * @returns {V} the value\n+\t */\n+\tget(...args) {\n+\t\tlet node = this._node;\n+\t\tfor (let i = 0; i < args.length; i++) {\n+\t\t\tnode = node.peek(args[i]);\n+\t\t\tif (node === undefined) return undefined;\n+\t\t}\n+\t\treturn node.getValue();\n+\t}\n+\n+\t/**\n+\t * @param {[...T, function(): V]} args tuple\n+\t * @returns {V} the value\n+\t */\n+\tprovide(...args) {\n+\t\tlet node = this._node;\n+\t\tfor (let i = 0; i < args.length - 1; i++) {\n+\t\t\tnode = node.get(args[i]);\n+\t\t}\n+\t\tif (node.hasValue()) return node.getValue();\n+\t\tconst fn = args[args.length - 1];\n+\t\tconst newValue = fn(...args.slice(0, -1));\n+\t\tnode.setValue(newValue);\n+\t\treturn newValue;\n+\t}\n+\n+\t/**\n+\t * @param {T} args tuple\n+\t * @returns {void}\n+\t */\n+\tdelete(...args) {\n+\t\tlet node = this._node;\n+\t\tfor (let i = 0; i < args.length; i++) {\n+\t\t\tnode = node.peek(args[i]);\n+\t\t\tif (node === undefined) return;\n+\t\t}\n+\t\tnode.deleteValue();\n+\t}\n+\n+\t/**\n+\t * @returns {void}\n+\t */\n+\tclear() {\n+\t\tthis._node = new WeakTupleNode();\n+\t}\n+}\n+\n+module.exports = WeakTupleMap;"
      },
      {
        "sha": "3d6d44cd048bab9eb0a7facdf1684fddb62db77b",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -92,7 +92,7 @@\n     \"style-loader\": \"^2.0.0\",\n     \"terser\": \"^5.5.0\",\n     \"toml\": \"^3.0.0\",\n-    \"tooling\": \"webpack/tooling#v1.14.1\",\n+    \"tooling\": \"webpack/tooling#v1.15.0\",\n     \"ts-loader\": \"^8.0.2\",\n     \"typescript\": \"^4.2.0-beta\",\n     \"url-loader\": \"^4.1.0\","
      },
      {
        "sha": "25cc999415ca64f61723b75bd2c353584b42eff0",
        "filename": "test/checkArrayExpectation.js",
        "status": "modified",
        "additions": 32,
        "deletions": 6,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/test%2FcheckArrayExpectation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/test%2FcheckArrayExpectation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FcheckArrayExpectation.js?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -6,6 +6,9 @@ const check = (expected, actual) => {\n \tif (expected instanceof RegExp) {\n \t\texpected = { message: expected };\n \t}\n+\tif (Array.isArray(expected)) {\n+\t\treturn expected.every(e => check(e, actual));\n+\t}\n \treturn Object.keys(expected).every(key => {\n \t\tlet value = actual[key];\n \t\tif (typeof value === \"object\") {\n@@ -33,6 +36,32 @@ const explain = object => {\n \t\t.join(\"; \");\n };\n \n+const diffItems = (actual, expected, kind) => {\n+\tconst tooMuch = actual.slice();\n+\tconst missing = expected.slice();\n+\tfor (let i = 0; i < missing.length; i++) {\n+\t\tconst current = missing[i];\n+\t\tfor (let j = 0; j < tooMuch.length; j++) {\n+\t\t\tif (check(current, tooMuch[j])) {\n+\t\t\t\ttooMuch.splice(j, 1);\n+\t\t\t\tmissing.splice(i, 1);\n+\t\t\t\ti--;\n+\t\t\t\tbreak;\n+\t\t\t}\n+\t\t}\n+\t}\n+\tconst diff = [];\n+\tif (missing.length > 0) {\n+\t\tdiff.push(`The following expected ${kind}s are missing:\n+${missing.map(item => `${item}`).join(\"\\n\\n\")}`);\n+\t}\n+\tif (tooMuch.length > 0) {\n+\t\tdiff.push(`The following ${kind}s are unexpected:\n+${tooMuch.map(item => `${explain(item)}`).join(\"\\n\\n\")}`);\n+\t}\n+\treturn diff.join(\"\\n\\n\");\n+};\n+\n module.exports = function checkArrayExpectation(\n \ttestDirectory,\n \tobject,\n@@ -55,13 +84,12 @@ module.exports = function checkArrayExpectation(\n \tif (fs.existsSync(path.join(testDirectory, `${filename}.js`))) {\n \t\tconst expectedFilename = path.join(testDirectory, `${filename}.js`);\n \t\tconst expected = require(expectedFilename);\n+\t\tconst diff = diffItems(array, expected, kind);\n \t\tif (expected.length < array.length) {\n \t\t\treturn (\n \t\t\t\tdone(\n \t\t\t\t\tnew Error(\n-\t\t\t\t\t\t`More ${kind}s while compiling than expected:\\n\\n${array\n-\t\t\t\t\t\t\t.map(explain)\n-\t\t\t\t\t\t\t.join(\"\\n\\n\")}. Check expected ${kind}s: ${expectedFilename}`\n+\t\t\t\t\t\t`More ${kind}s (${array.length} instead of ${expected.length}) while compiling than expected:\\n\\n${diff}\\n\\nCheck expected ${kind}s: ${expectedFilename}`\n \t\t\t\t\t)\n \t\t\t\t),\n \t\t\t\ttrue\n@@ -70,9 +98,7 @@ module.exports = function checkArrayExpectation(\n \t\t\treturn (\n \t\t\t\tdone(\n \t\t\t\t\tnew Error(\n-\t\t\t\t\t\t`Less ${kind}s while compiling than expected:\\n\\n${array\n-\t\t\t\t\t\t\t.map(explain)\n-\t\t\t\t\t\t\t.join(\"\\n\\n\")}. Check expected ${kind}s: ${expectedFilename}`\n+\t\t\t\t\t\t`Less ${kind}s (${array.length} instead of ${expected.length}) while compiling than expected:\\n\\n${diff}\\n\\nCheck expected ${kind}s: ${expectedFilename}`\n \t\t\t\t\t)\n \t\t\t\t),\n \t\t\t\ttrue"
      },
      {
        "sha": "54414e647da82b9193440dc2a974cc3b05f67ae9",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -6238,6 +6238,12 @@ declare class ModuleGraph {\n \tsetAsync(module: Module): void;\n \tgetMeta(thing?: any): Object;\n \tgetMetaIfExisting(thing?: any): Object;\n+\tfreeze(): void;\n+\tunfreeze(): void;\n+\tcached<T extends any[], V>(\n+\t\tfn: (moduleGraph: ModuleGraph, ...args: T) => V,\n+\t\t...args: T\n+\t): V;\n \tstatic getModuleGraphForModule(\n \t\tmodule: Module,\n \t\tdeprecateMessage: string,"
      },
      {
        "sha": "0c96658a3509c45ae74c847cc46da40d9da329ee",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/88f4c661cd613097514cb68a2ed7e74634f097ac/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/88f4c661cd613097514cb68a2ed7e74634f097ac/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=88f4c661cd613097514cb68a2ed7e74634f097ac",
        "patch": "@@ -6253,9 +6253,9 @@ toml@^3.0.0:\n   resolved \"https://registry.yarnpkg.com/toml/-/toml-3.0.0.tgz#342160f1af1904ec9d204d03a5d61222d762c5ee\"\n   integrity sha512-y/mWCZinnvxjTKYhJ+pYxwD0mRLVvOtdS2Awbgxln6iEnt4rk0yBxeSBHkGJcPucRiG0e55mwWp+g/05rsrd6w==\n \n-tooling@webpack/tooling#v1.14.1:\n-  version \"1.14.1\"\n-  resolved \"https://codeload.github.com/webpack/tooling/tar.gz/a15468e1699334a4d578987cd65a986e7880b76a\"\n+tooling@webpack/tooling#v1.15.0:\n+  version \"1.15.0\"\n+  resolved \"https://codeload.github.com/webpack/tooling/tar.gz/1c8c975ada1d94d011a4bc00fb149b168cc60580\"\n   dependencies:\n     \"@yarnpkg/lockfile\" \"^1.1.0\"\n     commondir \"^1.0.1\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13962",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13962/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13962/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13962/events",
    "html_url": "https://github.com/webpack/webpack/pull/13962",
    "id": 964860494,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NzA3MjUxMDY4",
    "number": 13962,
    "title": "disable cache compression by default",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-08-10T11:04:52Z",
    "updated_at": "2021-08-10T15:30:29Z",
    "closed_at": "2021-08-10T15:30:28Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13962",
      "html_url": "https://github.com/webpack/webpack/pull/13962",
      "diff_url": "https://github.com/webpack/webpack/pull/13962.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13962.patch",
      "merged_at": "2021-08-10T15:30:28Z"
    },
    "body": "it has a negative performance impact in many cases\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\ndefaults\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13962/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "d8c164c5eb4fee540b9a9f32d1d7a3cb373d9565",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/abe5005aec820e58f36939e81c9456e4ad5f6516/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/abe5005aec820e58f36939e81c9456e4ad5f6516/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=abe5005aec820e58f36939e81c9456e4ad5f6516",
        "patch": "@@ -314,7 +314,7 @@ const applyCacheDefaults = (cache, { name, mode, development }) => {\n \t\t\t);\n \t\t\tD(cache, \"hashAlgorithm\", \"md4\");\n \t\t\tD(cache, \"store\", \"pack\");\n-\t\t\tD(cache, \"compression\", development ? false : \"gzip\");\n+\t\t\tD(cache, \"compression\", false);\n \t\t\tD(cache, \"profile\", false);\n \t\t\tD(cache, \"idleTimeout\", 60000);\n \t\t\tD(cache, \"idleTimeoutForInitialStore\", 5000);"
      },
      {
        "sha": "7db691265ae78075993d2efabc8b195a154b2229",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 92,
        "deletions": 92,
        "changes": 184,
        "blob_url": "https://github.com/webpack/webpack/blob/abe5005aec820e58f36939e81c9456e4ad5f6516/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/abe5005aec820e58f36939e81c9456e4ad5f6516/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=abe5005aec820e58f36939e81c9456e4ad5f6516",
        "patch": "@@ -1502,43 +1502,43 @@ describe(\"Defaults\", () => {\n \t);\n \ttest(\"cache filesystem\", { cache: { type: \"filesystem\" } }, e =>\n \t\te.toMatchInlineSnapshot(`\n-\t\t- Expected\n-\t\t+ Received\n+- Expected\n++ Received\n \n-\t\t@@ ... @@\n-\t\t-   \"cache\": false,\n-\t\t+   \"cache\": Object {\n-\t\t+     \"allowCollectingMemory\": false,\n-\t\t+     \"buildDependencies\": Object {\n-\t\t+       \"defaultWebpack\": Array [\n-\t\t+         \"<cwd>/lib/\",\n-\t\t+       ],\n-\t\t+     },\n-\t\t+     \"cacheDirectory\": \"<cwd>/node_modules/.cache/webpack\",\n-\t\t+     \"cacheLocation\": \"<cwd>/node_modules/.cache/webpack/default-none\",\n-\t\t+     \"compression\": \"gzip\",\n-\t\t+     \"hashAlgorithm\": \"md4\",\n-\t\t+     \"idleTimeout\": 60000,\n-\t\t+     \"idleTimeoutAfterLargeChanges\": 1000,\n-\t\t+     \"idleTimeoutForInitialStore\": 5000,\n-\t\t+     \"maxAge\": 5184000000,\n-\t\t+     \"maxMemoryGenerations\": Infinity,\n-\t\t+     \"name\": \"default-none\",\n-\t\t+     \"profile\": false,\n-\t\t+     \"store\": \"pack\",\n-\t\t+     \"type\": \"filesystem\",\n-\t\t+     \"version\": \"\",\n-\t\t+   },\n-\t\t@@ ... @@\n-\t\t-     \"unsafeCache\": false,\n-\t\t+     \"unsafeCache\": [Function anonymous],\n-\t\t@@ ... @@\n-\t\t-     \"cache\": false,\n-\t\t+     \"cache\": true,\n-\t\t@@ ... @@\n-\t\t-     \"cache\": false,\n-\t\t+     \"cache\": true,\n-\t`)\n+@@ ... @@\n+-   \"cache\": false,\n++   \"cache\": Object {\n++     \"allowCollectingMemory\": false,\n++     \"buildDependencies\": Object {\n++       \"defaultWebpack\": Array [\n++         \"<cwd>/lib/\",\n++       ],\n++     },\n++     \"cacheDirectory\": \"<cwd>/node_modules/.cache/webpack\",\n++     \"cacheLocation\": \"<cwd>/node_modules/.cache/webpack/default-none\",\n++     \"compression\": false,\n++     \"hashAlgorithm\": \"md4\",\n++     \"idleTimeout\": 60000,\n++     \"idleTimeoutAfterLargeChanges\": 1000,\n++     \"idleTimeoutForInitialStore\": 5000,\n++     \"maxAge\": 5184000000,\n++     \"maxMemoryGenerations\": Infinity,\n++     \"name\": \"default-none\",\n++     \"profile\": false,\n++     \"store\": \"pack\",\n++     \"type\": \"filesystem\",\n++     \"version\": \"\",\n++   },\n+@@ ... @@\n+-     \"unsafeCache\": false,\n++     \"unsafeCache\": [Function anonymous],\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+`)\n \t);\n \ttest(\n \t\t\"cache filesystem development\",\n@@ -1792,63 +1792,63 @@ describe(\"Defaults\", () => {\n \t\t},\n \t\te =>\n \t\t\te.toMatchInlineSnapshot(`\n-\t\t\t- Expected\n-\t\t\t+ Received\n+- Expected\n++ Received\n \n-\t\t\t@@ ... @@\n-\t\t\t-   \"cache\": false,\n-\t\t\t-   \"context\": \"<cwd>\",\n-\t\t\t+   \"cache\": Object {\n-\t\t\t+     \"allowCollectingMemory\": false,\n-\t\t\t+     \"buildDependencies\": Object {\n-\t\t\t+       \"defaultWebpack\": Array [\n-\t\t\t+         \"<cwd>/lib/\",\n-\t\t\t+       ],\n-\t\t\t+     },\n-\t\t\t+     \"cacheDirectory\": \"<cwd>/node_modules/.cache/webpack\",\n-\t\t\t+     \"cacheLocation\": \"<cwd>/node_modules/.cache/webpack/default-none\",\n-\t\t\t+     \"compression\": \"gzip\",\n-\t\t\t+     \"hashAlgorithm\": \"md4\",\n-\t\t\t+     \"idleTimeout\": 60000,\n-\t\t\t+     \"idleTimeoutAfterLargeChanges\": 1000,\n-\t\t\t+     \"idleTimeoutForInitialStore\": 5000,\n-\t\t\t+     \"maxAge\": 5184000000,\n-\t\t\t+     \"maxMemoryGenerations\": Infinity,\n-\t\t\t+     \"name\": \"default-none\",\n-\t\t\t+     \"profile\": false,\n-\t\t\t+     \"store\": \"pack\",\n-\t\t\t+     \"type\": \"filesystem\",\n-\t\t\t+     \"version\": \"\",\n-\t\t\t+   },\n-\t\t\t+   \"context\": \"<cwd>/test/fixtures\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"unsafeCache\": false,\n-\t\t\t+     \"unsafeCache\": [Function anonymous],\n-\t\t\t@@ ... @@\n-\t\t\t-     \"chunkLoadingGlobal\": \"webpackChunkwebpack\",\n-\t\t\t+     \"chunkLoadingGlobal\": \"webpackChunk\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"devtoolNamespace\": \"webpack\",\n-\t\t\t+     \"devtoolNamespace\": \"\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"hotUpdateGlobal\": \"webpackHotUpdatewebpack\",\n-\t\t\t+     \"hotUpdateGlobal\": \"webpackHotUpdate\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"path\": \"<cwd>/dist\",\n-\t\t\t+     \"path\": \"<cwd>/test/fixtures/dist\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"uniqueName\": \"webpack\",\n-\t\t\t+     \"uniqueName\": \"\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"cache\": false,\n-\t\t\t+     \"cache\": true,\n-\t\t\t@@ ... @@\n-\t\t\t-       \"<cwd>\",\n-\t\t\t+       \"<cwd>/test/fixtures\",\n-\t\t\t@@ ... @@\n-\t\t\t-     \"cache\": false,\n-\t\t\t+     \"cache\": true,\n-\t\t`),\n+@@ ... @@\n+-   \"cache\": false,\n+-   \"context\": \"<cwd>\",\n++   \"cache\": Object {\n++     \"allowCollectingMemory\": false,\n++     \"buildDependencies\": Object {\n++       \"defaultWebpack\": Array [\n++         \"<cwd>/lib/\",\n++       ],\n++     },\n++     \"cacheDirectory\": \"<cwd>/node_modules/.cache/webpack\",\n++     \"cacheLocation\": \"<cwd>/node_modules/.cache/webpack/default-none\",\n++     \"compression\": false,\n++     \"hashAlgorithm\": \"md4\",\n++     \"idleTimeout\": 60000,\n++     \"idleTimeoutAfterLargeChanges\": 1000,\n++     \"idleTimeoutForInitialStore\": 5000,\n++     \"maxAge\": 5184000000,\n++     \"maxMemoryGenerations\": Infinity,\n++     \"name\": \"default-none\",\n++     \"profile\": false,\n++     \"store\": \"pack\",\n++     \"type\": \"filesystem\",\n++     \"version\": \"\",\n++   },\n++   \"context\": \"<cwd>/test/fixtures\",\n+@@ ... @@\n+-     \"unsafeCache\": false,\n++     \"unsafeCache\": [Function anonymous],\n+@@ ... @@\n+-     \"chunkLoadingGlobal\": \"webpackChunkwebpack\",\n++     \"chunkLoadingGlobal\": \"webpackChunk\",\n+@@ ... @@\n+-     \"devtoolNamespace\": \"webpack\",\n++     \"devtoolNamespace\": \"\",\n+@@ ... @@\n+-     \"hotUpdateGlobal\": \"webpackHotUpdatewebpack\",\n++     \"hotUpdateGlobal\": \"webpackHotUpdate\",\n+@@ ... @@\n+-     \"path\": \"<cwd>/dist\",\n++     \"path\": \"<cwd>/test/fixtures/dist\",\n+@@ ... @@\n+-     \"uniqueName\": \"webpack\",\n++     \"uniqueName\": \"\",\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+@@ ... @@\n+-       \"<cwd>\",\n++       \"<cwd>/test/fixtures\",\n+@@ ... @@\n+-     \"cache\": false,\n++     \"cache\": true,\n+`),\n \t\t() => {\n \t\t\tprocess.chdir(path.resolve(__dirname, \"fixtures\"));\n \t\t},"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12760",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12760/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12760/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12760/events",
    "html_url": "https://github.com/webpack/webpack/pull/12760",
    "id": 814357790,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTc4MzU4ODAy",
    "number": 12760,
    "title": "improve performance of ModuleConcatenationPlugin",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-02-23T11:06:29Z",
    "updated_at": "2021-02-23T12:44:34Z",
    "closed_at": "2021-02-23T12:44:33Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12760",
      "html_url": "https://github.com/webpack/webpack/pull/12760",
      "diff_url": "https://github.com/webpack/webpack/pull/12760.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12760.patch",
      "merged_at": "2021-02-23T12:44:33Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12760/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "65898f4d830d475bc96681e1cdc74a36535aa3bf",
        "filename": "lib/CaseSensitiveModulesWarning.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2FCaseSensitiveModulesWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2FCaseSensitiveModulesWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCaseSensitiveModulesWarning.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -37,12 +37,12 @@ const createModulesListMessage = (modules, moduleGraph) => {\n \t\t.map(m => {\n \t\t\tlet message = `* ${m.identifier()}`;\n \t\t\tconst validReasons = Array.from(\n-\t\t\t\tmoduleGraph.getIncomingConnections(m)\n-\t\t\t).filter(reason => reason.originModule);\n+\t\t\t\tmoduleGraph.getIncomingConnectionsByOriginModule(m).keys()\n+\t\t\t).filter(x => x);\n \n \t\t\tif (validReasons.length > 0) {\n \t\t\t\tmessage += `\\n    Used by ${validReasons.length} module(s), i. e.`;\n-\t\t\t\tmessage += `\\n    ${validReasons[0].originModule.identifier()}`;\n+\t\t\t\tmessage += `\\n    ${validReasons[0].identifier()}`;\n \t\t\t}\n \t\t\treturn message;\n \t\t})"
      },
      {
        "sha": "9b2d9be17038767eea0ce199b301b3d1e6e522c5",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 13,
        "deletions": 5,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -69,6 +69,18 @@ const getArray = set => {\n \treturn Array.from(set);\n };\n \n+/**\n+ * @param {SortableSet<Chunk>} chunks the chunks\n+ * @returns {RuntimeSpecSet} runtimes\n+ */\n+const getModuleRuntimes = chunks => {\n+\tconst runtimes = new RuntimeSpecSet();\n+\tfor (const chunk of chunks) {\n+\t\truntimes.add(chunk.runtime);\n+\t}\n+\treturn runtimes;\n+};\n+\n /**\n  * @param {SortableSet<Module>} set the set\n  * @returns {Map<string, SortableSet<Module>>} modules by source type\n@@ -510,11 +522,7 @@ class ChunkGraph {\n \t */\n \tgetModuleRuntimes(module) {\n \t\tconst cgm = this._getChunkGraphModule(module);\n-\t\tconst runtimes = new RuntimeSpecSet();\n-\t\tfor (const chunk of cgm.chunks) {\n-\t\t\truntimes.add(chunk.runtime);\n-\t\t}\n-\t\treturn runtimes;\n+\t\treturn cgm.chunks.getFromUnorderedCache(getModuleRuntimes);\n \t}\n \n \t/**"
      },
      {
        "sha": "7dd4780aa96340b80c34b548ebb11785b9ed2d87",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 5,
        "deletions": 3,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -631,9 +631,11 @@ class Module extends DependenciesBlock {\n \t */\n \thasReasonForChunk(chunk, moduleGraph, chunkGraph) {\n \t\t// check for each reason if we need the chunk\n-\t\tfor (const connection of moduleGraph.getIncomingConnections(this)) {\n-\t\t\tif (!connection.isTargetActive(chunk.runtime)) continue;\n-\t\t\tconst fromModule = connection.originModule;\n+\t\tfor (const [\n+\t\t\tfromModule,\n+\t\t\tconnections\n+\t\t] of moduleGraph.getIncomingConnectionsByOriginModule(this)) {\n+\t\t\tif (!connections.some(c => c.isTargetActive(chunk.runtime))) continue;\n \t\t\tfor (const originChunk of chunkGraph.getModuleChunksIterable(\n \t\t\t\tfromModule\n \t\t\t)) {"
      },
      {
        "sha": "7bc8148927f6cd5f1ef47e33a01b30f12e53c4c4",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 42,
        "deletions": 6,
        "changes": 48,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -8,14 +8,14 @@\n const util = require(\"util\");\n const ExportsInfo = require(\"./ExportsInfo\");\n const ModuleGraphConnection = require(\"./ModuleGraphConnection\");\n+const SortableSet = require(\"./util/SortableSet\");\n \n /** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n /** @typedef {import(\"./Dependency\")} Dependency */\n /** @typedef {import(\"./ExportsInfo\").ExportInfo} ExportInfo */\n /** @typedef {import(\"./Module\")} Module */\n /** @typedef {import(\"./ModuleProfile\")} ModuleProfile */\n /** @typedef {import(\"./RequestShortener\")} RequestShortener */\n-/** @template T @typedef {import(\"./util/SortableSet\")<T>} SortableSet<t> */\n /** @typedef {import(\"./util/runtime\").RuntimeSpec} RuntimeSpec */\n \n /**\n@@ -26,10 +26,40 @@ const ModuleGraphConnection = require(\"./ModuleGraphConnection\");\n \n const EMPTY_ARRAY = [];\n \n+/**\n+ * @param {SortableSet<ModuleGraphConnection>} set input\n+ * @returns {readonly Map<Module, readonly ModuleGraphConnection[]>} mapped by origin module\n+ */\n+const getConnectionsByOriginModule = set => {\n+\tconst map = new Map();\n+\t/** @type {Module | 0} */\n+\tlet lastModule = 0;\n+\t/** @type {ModuleGraphConnection[]} */\n+\tlet lastList = undefined;\n+\tfor (const connection of set) {\n+\t\tconst { originModule } = connection;\n+\t\tif (lastModule === originModule) {\n+\t\t\tlastList.push(connection);\n+\t\t} else {\n+\t\t\tlastModule = originModule;\n+\t\t\tconst list = map.get(originModule);\n+\t\t\tif (list !== undefined) {\n+\t\t\t\tlastList = list;\n+\t\t\t\tlist.push(connection);\n+\t\t\t} else {\n+\t\t\t\tconst list = [connection];\n+\t\t\t\tlastList = list;\n+\t\t\t\tmap.set(originModule, list);\n+\t\t\t}\n+\t\t}\n+\t}\n+\treturn map;\n+};\n+\n class ModuleGraphModule {\n \tconstructor() {\n-\t\t/** @type {Set<ModuleGraphConnection>} */\n-\t\tthis.incomingConnections = new Set();\n+\t\t/** @type {SortableSet<ModuleGraphConnection>} */\n+\t\tthis.incomingConnections = new SortableSet();\n \t\t/** @type {Set<ModuleGraphConnection> | undefined} */\n \t\tthis.outgoingConnections = undefined;\n \t\t/** @type {Module | null} */\n@@ -319,9 +349,6 @@ class ModuleGraph {\n \t\t\t\t\tnewConnections.add(newConnection);\n \t\t\t\t\tif (newConnection.module !== undefined) {\n \t\t\t\t\t\tconst otherMgm = this._getModuleGraphModule(newConnection.module);\n-\t\t\t\t\t\tif (otherMgm.incomingConnections === undefined) {\n-\t\t\t\t\t\t\totherMgm.incomingConnections = new Set();\n-\t\t\t\t\t\t}\n \t\t\t\t\t\totherMgm.incomingConnections.add(newConnection);\n \t\t\t\t\t}\n \t\t\t\t}\n@@ -402,6 +429,15 @@ class ModuleGraph {\n \t\treturn connections === undefined ? EMPTY_ARRAY : connections;\n \t}\n \n+\t/**\n+\t * @param {Module} module the module\n+\t * @returns {readonly Map<Module, readonly ModuleGraphConnection[]>} reasons why a module is included, in a map by source module\n+\t */\n+\tgetIncomingConnectionsByOriginModule(module) {\n+\t\tconst connections = this._getModuleGraphModule(module).incomingConnections;\n+\t\treturn connections.getFromUnorderedCache(getConnectionsByOriginModule);\n+\t}\n+\n \t/**\n \t * @param {Module} module the module\n \t * @returns {ModuleProfile | null} the module profile"
      },
      {
        "sha": "94f971953e89651666049351b3ef2ee56fd3f60e",
        "filename": "lib/ModuleGraphConnection.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2FModuleGraphConnection.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2FModuleGraphConnection.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraphConnection.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -51,8 +51,8 @@ const intersectConnectionStates = (a, b) => {\n \n class ModuleGraphConnection {\n \t/**\n-\t * @param {Module|undefined} originModule the referencing module\n-\t * @param {Dependency|undefined} dependency the referencing dependency\n+\t * @param {Module|null} originModule the referencing module\n+\t * @param {Dependency|null} dependency the referencing dependency\n \t * @param {Module} module the referenced module\n \t * @param {string=} explanation some extra detail\n \t * @param {boolean=} weak the reference is weak"
      },
      {
        "sha": "9e64972e48373f880d722344c538c670332ed0b5",
        "filename": "lib/async-modules/InferAsyncModulesPlugin.js",
        "status": "modified",
        "additions": 10,
        "deletions": 6,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2Fasync-modules%2FInferAsyncModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2Fasync-modules%2FInferAsyncModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fasync-modules%2FInferAsyncModulesPlugin.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -31,14 +31,18 @@ class InferAsyncModulesPlugin {\n \t\t\t\t\t}\n \t\t\t\t\tfor (const module of queue) {\n \t\t\t\t\t\tmoduleGraph.setAsync(module);\n-\t\t\t\t\t\tconst connections = moduleGraph.getIncomingConnections(module);\n-\t\t\t\t\t\tfor (const connection of connections) {\n-\t\t\t\t\t\t\tconst dep = connection.dependency;\n+\t\t\t\t\t\tfor (const [\n+\t\t\t\t\t\t\toriginModule,\n+\t\t\t\t\t\t\tconnections\n+\t\t\t\t\t\t] of moduleGraph.getIncomingConnectionsByOriginModule(module)) {\n \t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\tdep instanceof HarmonyImportDependency &&\n-\t\t\t\t\t\t\t\tconnection.isTargetActive(undefined)\n+\t\t\t\t\t\t\t\tconnections.some(\n+\t\t\t\t\t\t\t\t\tc =>\n+\t\t\t\t\t\t\t\t\t\tc.dependency instanceof HarmonyImportDependency &&\n+\t\t\t\t\t\t\t\t\t\tc.isTargetActive(undefined)\n+\t\t\t\t\t\t\t\t)\n \t\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\t\tqueue.add(connection.originModule);\n+\t\t\t\t\t\t\t\tqueue.add(originModule);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}"
      },
      {
        "sha": "7bc4baaf82a2f5155d14e9107e00229bc378be1b",
        "filename": "lib/ids/OccurrenceModuleIdsPlugin.js",
        "status": "modified",
        "additions": 28,
        "deletions": 17,
        "changes": 45,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2Fids%2FOccurrenceModuleIdsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2Fids%2FOccurrenceModuleIdsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fids%2FOccurrenceModuleIdsPlugin.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -66,40 +66,51 @@ class OccurrenceModuleIdsPlugin {\n \t\t\t\t}\n \n \t\t\t\t/**\n-\t\t\t\t * @param {Iterable<ModuleGraphConnection>} connections connections\n+\t\t\t\t * @param {Module} module module\n \t\t\t\t * @returns {number} count of occurs\n \t\t\t\t */\n-\t\t\t\tconst countOccursInEntry = connections => {\n+\t\t\t\tconst countOccursInEntry = module => {\n \t\t\t\t\tlet sum = 0;\n-\t\t\t\t\tfor (const c of connections) {\n-\t\t\t\t\t\tif (!c.isTargetActive(undefined)) continue;\n-\t\t\t\t\t\tif (!c.originModule) continue;\n-\t\t\t\t\t\tsum += initialChunkChunkMap.get(c.originModule);\n+\t\t\t\t\tfor (const [\n+\t\t\t\t\t\toriginModule,\n+\t\t\t\t\t\tconnections\n+\t\t\t\t\t] of moduleGraph.getIncomingConnectionsByOriginModule(module)) {\n+\t\t\t\t\t\tif (!originModule) continue;\n+\t\t\t\t\t\tif (!connections.some(c => c.isTargetActive(undefined))) continue;\n+\t\t\t\t\t\tsum += initialChunkChunkMap.get(originModule);\n \t\t\t\t\t}\n \t\t\t\t\treturn sum;\n \t\t\t\t};\n \n \t\t\t\t/**\n-\t\t\t\t * @param {Iterable<ModuleGraphConnection>} connections connections\n+\t\t\t\t * @param {Module} module module\n \t\t\t\t * @returns {number} count of occurs\n \t\t\t\t */\n-\t\t\t\tconst countOccurs = connections => {\n+\t\t\t\tconst countOccurs = module => {\n \t\t\t\t\tlet sum = 0;\n-\t\t\t\t\tfor (const c of connections) {\n-\t\t\t\t\t\tif (!c.isTargetActive(undefined)) continue;\n-\t\t\t\t\t\tif (!c.originModule) continue;\n-\t\t\t\t\t\tif (!c.dependency) continue;\n-\t\t\t\t\t\tconst factor = c.dependency.getNumberOfIdOccurrences();\n-\t\t\t\t\t\tif (factor === 0) continue;\n-\t\t\t\t\t\tsum += factor * chunkGraph.getNumberOfModuleChunks(c.originModule);\n+\t\t\t\t\tfor (const [\n+\t\t\t\t\t\toriginModule,\n+\t\t\t\t\t\tconnections\n+\t\t\t\t\t] of moduleGraph.getIncomingConnectionsByOriginModule(module)) {\n+\t\t\t\t\t\tif (!originModule) continue;\n+\t\t\t\t\t\tconst chunkModules = chunkGraph.getNumberOfModuleChunks(\n+\t\t\t\t\t\t\toriginModule\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tfor (const c of connections) {\n+\t\t\t\t\t\t\tif (!c.isTargetActive(undefined)) continue;\n+\t\t\t\t\t\t\tif (!c.dependency) continue;\n+\t\t\t\t\t\t\tconst factor = c.dependency.getNumberOfIdOccurrences();\n+\t\t\t\t\t\t\tif (factor === 0) continue;\n+\t\t\t\t\t\t\tsum += factor * chunkModules;\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\treturn sum;\n \t\t\t\t};\n \n \t\t\t\tif (prioritiseInitial) {\n \t\t\t\t\tfor (const m of modulesInOccurrenceOrder) {\n \t\t\t\t\t\tconst result =\n-\t\t\t\t\t\t\tcountOccursInEntry(moduleGraph.getIncomingConnections(m)) +\n+\t\t\t\t\t\t\tcountOccursInEntry(m) +\n \t\t\t\t\t\t\tinitialChunkChunkMap.get(m) +\n \t\t\t\t\t\t\tentryCountMap.get(m);\n \t\t\t\t\t\toccursInInitialChunksMap.set(m, result);\n@@ -108,7 +119,7 @@ class OccurrenceModuleIdsPlugin {\n \n \t\t\t\tfor (const m of modules) {\n \t\t\t\t\tconst result =\n-\t\t\t\t\t\tcountOccurs(moduleGraph.getIncomingConnections(m)) +\n+\t\t\t\t\t\tcountOccurs(m) +\n \t\t\t\t\t\tchunkGraph.getNumberOfModuleChunks(m) +\n \t\t\t\t\t\tentryCountMap.get(m);\n \t\t\t\t\toccursInAllChunksMap.set(m, result);"
      },
      {
        "sha": "cdb10f980f7931257ef296170a9d98e10f4fe096",
        "filename": "lib/javascript/JavascriptModulesPlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptModulesPlugin.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -901,12 +901,12 @@ class JavascriptModulesPlugin {\n \t\t\t\t\tif (\n \t\t\t\t\t\tresult.allowInlineStartup &&\n \t\t\t\t\t\tsomeInIterable(\n-\t\t\t\t\t\t\tmoduleGraph.getIncomingConnections(entryModule),\n-\t\t\t\t\t\t\tc =>\n-\t\t\t\t\t\t\t\tc.originModule &&\n-\t\t\t\t\t\t\t\tc.isTargetActive(chunk.runtime) &&\n+\t\t\t\t\t\t\tmoduleGraph.getIncomingConnectionsByOriginModule(entryModule),\n+\t\t\t\t\t\t\t([originModule, connections]) =>\n+\t\t\t\t\t\t\t\toriginModule &&\n+\t\t\t\t\t\t\t\tconnections.some(c => c.isTargetActive(chunk.runtime)) &&\n \t\t\t\t\t\t\t\tsomeInIterable(\n-\t\t\t\t\t\t\t\t\tchunkGraph.getModuleRuntimes(c.originModule),\n+\t\t\t\t\t\t\t\t\tchunkGraph.getModuleRuntimes(originModule),\n \t\t\t\t\t\t\t\t\truntime =>\n \t\t\t\t\t\t\t\t\t\tintersectRuntime(runtime, chunk.runtime) !== undefined\n \t\t\t\t\t\t\t\t)"
      },
      {
        "sha": "a00d4098c23b0453d8a262dbe11613aacdcc51ab",
        "filename": "lib/optimize/ModuleConcatenationPlugin.js",
        "status": "modified",
        "additions": 200,
        "deletions": 128,
        "changes": 328,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FModuleConcatenationPlugin.js?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -28,6 +28,20 @@ const ConcatenatedModule = require(\"./ConcatenatedModule\");\n /** @typedef {import(\"../RequestShortener\")} RequestShortener */\n /** @typedef {import(\"../util/runtime\").RuntimeSpec} RuntimeSpec */\n \n+/**\n+ * @typedef {Object} Statistics\n+ * @property {number} cached\n+ * @property {number} alreadyInConfig\n+ * @property {number} invalidModule\n+ * @property {number} incorrectChunks\n+ * @property {number} incorrectDependency\n+ * @property {number} incorrectModuleDependency\n+ * @property {number} incorrectChunksOfImporter\n+ * @property {number} incorrectRuntimeCondition\n+ * @property {number} importerFailed\n+ * @property {number} added\n+ */\n+\n const formatBailoutReason = msg => {\n \treturn \"ModuleConcatenation bailout: \" + msg;\n };\n@@ -210,12 +224,30 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t});\n \t\t\t\t\t\tlogger.timeEnd(\"sort relevant modules\");\n \n+\t\t\t\t\t\t/** @type {Statistics} */\n+\t\t\t\t\t\tconst stats = {\n+\t\t\t\t\t\t\tcached: 0,\n+\t\t\t\t\t\t\talreadyInConfig: 0,\n+\t\t\t\t\t\t\tinvalidModule: 0,\n+\t\t\t\t\t\t\tincorrectChunks: 0,\n+\t\t\t\t\t\t\tincorrectDependency: 0,\n+\t\t\t\t\t\t\tincorrectModuleDependency: 0,\n+\t\t\t\t\t\t\tincorrectChunksOfImporter: 0,\n+\t\t\t\t\t\t\tincorrectRuntimeCondition: 0,\n+\t\t\t\t\t\t\timporterFailed: 0,\n+\t\t\t\t\t\t\tadded: 0\n+\t\t\t\t\t\t};\n+\t\t\t\t\t\tlet statsCandidates = 0;\n+\t\t\t\t\t\tlet statsSizeSum = 0;\n+\t\t\t\t\t\tlet statsEmptyConfigurations = 0;\n+\n \t\t\t\t\t\tlogger.time(\"find modules to concatenate\");\n \t\t\t\t\t\tconst concatConfigurations = [];\n \t\t\t\t\t\tconst usedAsInner = new Set();\n \t\t\t\t\t\tfor (const currentRoot of relevantModules) {\n \t\t\t\t\t\t\t// when used by another configuration as inner:\n \t\t\t\t\t\t\t// the other configuration is better and we can skip this one\n+\t\t\t\t\t\t\t// TODO reconsider that when it's only used in a different runtime\n \t\t\t\t\t\t\tif (usedAsInner.has(currentRoot)) continue;\n \n \t\t\t\t\t\t\tlet chunkRuntime = undefined;\n@@ -267,7 +299,8 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t\t\t\timpCandidates,\n \t\t\t\t\t\t\t\t\tfailureCache,\n \t\t\t\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\t\t\t\ttrue\n+\t\t\t\t\t\t\t\t\ttrue,\n+\t\t\t\t\t\t\t\t\tstats\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tif (problem) {\n \t\t\t\t\t\t\t\t\tfailureCache.set(imp, problem);\n@@ -278,14 +311,18 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tstatsCandidates += candidates.size;\n \t\t\t\t\t\t\tif (!currentConfiguration.isEmpty()) {\n+\t\t\t\t\t\t\t\tconst modules = currentConfiguration.getModules();\n+\t\t\t\t\t\t\t\tstatsSizeSum += modules.size;\n \t\t\t\t\t\t\t\tconcatConfigurations.push(currentConfiguration);\n-\t\t\t\t\t\t\t\tfor (const module of currentConfiguration.getModules()) {\n+\t\t\t\t\t\t\t\tfor (const module of modules) {\n \t\t\t\t\t\t\t\t\tif (module !== currentConfiguration.rootModule) {\n \t\t\t\t\t\t\t\t\t\tusedAsInner.add(module);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tstatsEmptyConfigurations++;\n \t\t\t\t\t\t\t\tconst optimizationBailouts = moduleGraph.getOptimizationBailout(\n \t\t\t\t\t\t\t\t\tcurrentRoot\n \t\t\t\t\t\t\t\t);\n@@ -298,7 +335,14 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t}\n \t\t\t\t\t\tlogger.timeEnd(\"find modules to concatenate\");\n \t\t\t\t\t\tlogger.debug(\n-\t\t\t\t\t\t\t`${concatConfigurations.length} concat configurations`\n+\t\t\t\t\t\t\t`${\n+\t\t\t\t\t\t\t\tconcatConfigurations.length\n+\t\t\t\t\t\t\t} successful concat configurations (avg size: ${\n+\t\t\t\t\t\t\t\tstatsSizeSum / concatConfigurations.length\n+\t\t\t\t\t\t\t}), ${statsEmptyConfigurations} bailed out completely`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tlogger.debug(\n+\t\t\t\t\t\t\t`${statsCandidates} candidates were considered for adding (${stats.cached} cached failure, ${stats.alreadyInConfig} already in config, ${stats.invalidModule} invalid module, ${stats.incorrectChunks} incorrect chunks, ${stats.incorrectDependency} incorrect dependency, ${stats.incorrectChunksOfImporter} incorrect chunks of importer, ${stats.incorrectModuleDependency} incorrect module dependency, ${stats.incorrectRuntimeCondition} incorrect runtime condition, ${stats.importerFailed} importer failed, ${stats.added} added)`\n \t\t\t\t\t\t);\n \t\t\t\t\t\t// HACK: Sort configurations by length and start with the longest one\n \t\t\t\t\t\t// to get the biggest groups possible. Used modules are marked with usedModules\n@@ -502,6 +546,7 @@ class ModuleConcatenationPlugin {\n \t * @param {Map<Module, Module | function(RequestShortener): string>} failureCache cache for problematic modules to be more performant\n \t * @param {ChunkGraph} chunkGraph the chunk graph\n \t * @param {boolean} avoidMutateOnFailure avoid mutating the config when adding fails\n+\t * @param {Statistics} statistics gathering metrics\n \t * @returns {Module | function(RequestShortener): string} the problematic module\n \t */\n \t_tryToAdd(\n@@ -514,155 +559,131 @@ class ModuleConcatenationPlugin {\n \t\tcandidates,\n \t\tfailureCache,\n \t\tchunkGraph,\n-\t\tavoidMutateOnFailure\n+\t\tavoidMutateOnFailure,\n+\t\tstatistics\n \t) {\n \t\tconst cacheEntry = failureCache.get(module);\n \t\tif (cacheEntry) {\n+\t\t\tstatistics.cached++;\n \t\t\treturn cacheEntry;\n \t\t}\n \n \t\t// Already added?\n \t\tif (config.has(module)) {\n+\t\t\tstatistics.alreadyInConfig++;\n \t\t\treturn null;\n \t\t}\n \n \t\t// Not possible to add?\n \t\tif (!possibleModules.has(module)) {\n+\t\t\tstatistics.invalidModule++;\n \t\t\tfailureCache.set(module, module); // cache failures for performance\n \t\t\treturn module;\n \t\t}\n \n \t\t// Module must be in the correct chunks\n \t\tconst missingChunks = Array.from(\n \t\t\tchunkGraph.getModuleChunksIterable(config.rootModule)\n-\t\t)\n-\t\t\t.filter(chunk => !chunkGraph.isModuleInChunk(module, chunk))\n-\t\t\t.map(chunk => chunk.name || \"unnamed chunk(s)\");\n+\t\t).filter(chunk => !chunkGraph.isModuleInChunk(module, chunk));\n \t\tif (missingChunks.length > 0) {\n-\t\t\tconst missingChunksList = Array.from(new Set(missingChunks)).sort();\n-\t\t\tconst chunks = Array.from(\n-\t\t\t\tnew Set(\n-\t\t\t\t\tArray.from(chunkGraph.getModuleChunksIterable(module)).map(\n-\t\t\t\t\t\tchunk => chunk.name || \"unnamed chunk(s)\"\n+\t\t\tconst problem = requestShortener => {\n+\t\t\t\tconst missingChunksList = Array.from(\n+\t\t\t\t\tnew Set(missingChunks.map(chunk => chunk.name || \"unnamed chunk(s)\"))\n+\t\t\t\t).sort();\n+\t\t\t\tconst chunks = Array.from(\n+\t\t\t\t\tnew Set(\n+\t\t\t\t\t\tArray.from(chunkGraph.getModuleChunksIterable(module)).map(\n+\t\t\t\t\t\t\tchunk => chunk.name || \"unnamed chunk(s)\"\n+\t\t\t\t\t\t)\n \t\t\t\t\t)\n-\t\t\t\t)\n-\t\t\t).sort();\n-\t\t\tconst problem = requestShortener =>\n-\t\t\t\t`Module ${module.readableIdentifier(\n+\t\t\t\t).sort();\n+\t\t\t\treturn `Module ${module.readableIdentifier(\n \t\t\t\t\trequestShortener\n \t\t\t\t)} is not in the same chunk(s) (expected in chunk(s) ${missingChunksList.join(\n \t\t\t\t\t\", \"\n \t\t\t\t)}, module is in chunk(s) ${chunks.join(\", \")})`;\n+\t\t\t};\n+\t\t\tstatistics.incorrectChunks++;\n \t\t\tfailureCache.set(module, problem); // cache failures for performance\n \t\t\treturn problem;\n \t\t}\n \n \t\tconst moduleGraph = compilation.moduleGraph;\n \n-\t\tconst incomingConnections = Array.from(\n-\t\t\tmoduleGraph.getIncomingConnections(module)\n-\t\t).filter(connection => {\n-\t\t\t// We are not interested in inactive connections\n-\t\t\tif (!connection.isActive(runtime)) return false;\n-\n-\t\t\t// Include, but do not analyse further, connections from non-modules\n-\t\t\tif (!connection.originModule) return true;\n-\n-\t\t\t// Ignore connection from orphan modules\n-\t\t\tif (chunkGraph.getNumberOfModuleChunks(connection.originModule) === 0)\n-\t\t\t\treturn false;\n+\t\tconst incomingConnections = moduleGraph.getIncomingConnectionsByOriginModule(\n+\t\t\tmodule\n+\t\t);\n \n-\t\t\t// We don't care for connections from other runtimes\n-\t\t\tlet originRuntime = undefined;\n-\t\t\tfor (const r of chunkGraph.getModuleRuntimes(connection.originModule)) {\n-\t\t\t\toriginRuntime = mergeRuntimeOwned(originRuntime, r);\n+\t\tconst incomingConnectionsFromNonModules =\n+\t\t\tincomingConnections.get(null) || incomingConnections.get(undefined);\n+\t\tif (incomingConnectionsFromNonModules) {\n+\t\t\tconst activeNonModulesConnections = incomingConnectionsFromNonModules.filter(\n+\t\t\t\tconnection => {\n+\t\t\t\t\t// We are not interested in inactive connections\n+\t\t\t\t\t// or connections without dependency\n+\t\t\t\t\treturn connection.isActive(runtime) || connection.dependency;\n+\t\t\t\t}\n+\t\t\t);\n+\t\t\tif (activeNonModulesConnections.length > 0) {\n+\t\t\t\tconst problem = requestShortener => {\n+\t\t\t\t\tconst importingExplanations = new Set(\n+\t\t\t\t\t\tactiveNonModulesConnections.map(c => c.explanation).filter(Boolean)\n+\t\t\t\t\t);\n+\t\t\t\t\tconst explanations = Array.from(importingExplanations).sort();\n+\t\t\t\t\treturn `Module ${module.readableIdentifier(\n+\t\t\t\t\t\trequestShortener\n+\t\t\t\t\t)} is referenced ${\n+\t\t\t\t\t\texplanations.length > 0\n+\t\t\t\t\t\t\t? `by: ${explanations.join(\", \")}`\n+\t\t\t\t\t\t\t: \"in an unsupported way\"\n+\t\t\t\t\t}`;\n+\t\t\t\t};\n+\t\t\t\tstatistics.incorrectDependency++;\n+\t\t\t\tfailureCache.set(module, problem); // cache failures for performance\n+\t\t\t\treturn problem;\n \t\t\t}\n+\t\t}\n \n-\t\t\treturn intersectRuntime(runtime, originRuntime);\n-\t\t});\n+\t\t/** @type {Map<Module, readonly ModuleGraph.ModuleGraphConnection[]>} */\n+\t\tconst incomingConnectionsFromModules = new Map();\n+\t\tfor (const [originModule, connections] of incomingConnections) {\n+\t\t\tif (originModule) {\n+\t\t\t\t// Ignore connection from orphan modules\n+\t\t\t\tif (chunkGraph.getNumberOfModuleChunks(originModule) === 0) continue;\n+\n+\t\t\t\t// We don't care for connections from other runtimes\n+\t\t\t\tlet originRuntime = undefined;\n+\t\t\t\tfor (const r of chunkGraph.getModuleRuntimes(originModule)) {\n+\t\t\t\t\toriginRuntime = mergeRuntimeOwned(originRuntime, r);\n+\t\t\t\t}\n \n-\t\tconst nonHarmonyConnections = incomingConnections.filter(\n-\t\t\tconnection =>\n-\t\t\t\t!connection.originModule ||\n-\t\t\t\t!connection.dependency ||\n-\t\t\t\t!(connection.dependency instanceof HarmonyImportDependency)\n-\t\t);\n-\t\tif (nonHarmonyConnections.length > 0) {\n-\t\t\tconst problem = requestShortener => {\n-\t\t\t\tconst importingModules = new Set(\n-\t\t\t\t\tnonHarmonyConnections.map(c => c.originModule).filter(Boolean)\n-\t\t\t\t);\n-\t\t\t\tconst importingExplanations = new Set(\n-\t\t\t\t\tnonHarmonyConnections.map(c => c.explanation).filter(Boolean)\n-\t\t\t\t);\n-\t\t\t\tconst importingModuleTypes = new Map(\n-\t\t\t\t\tArray.from(importingModules).map(\n-\t\t\t\t\t\tm =>\n-\t\t\t\t\t\t\t/** @type {[Module, Set<string>]} */ ([\n-\t\t\t\t\t\t\t\tm,\n-\t\t\t\t\t\t\t\tnew Set(\n-\t\t\t\t\t\t\t\t\tnonHarmonyConnections\n-\t\t\t\t\t\t\t\t\t\t.filter(c => c.originModule === m)\n-\t\t\t\t\t\t\t\t\t\t.map(c => c.dependency.type)\n-\t\t\t\t\t\t\t\t\t\t.sort()\n-\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t])\n-\t\t\t\t\t)\n+\t\t\t\tif (!intersectRuntime(runtime, originRuntime)) continue;\n+\n+\t\t\t\t// We are not interested in inactive connections\n+\t\t\t\tconst activeConnections = connections.filter(connection =>\n+\t\t\t\t\tconnection.isActive(runtime)\n \t\t\t\t);\n-\t\t\t\tconst names = Array.from(importingModules)\n-\t\t\t\t\t.map(\n-\t\t\t\t\t\tm =>\n-\t\t\t\t\t\t\t`${m.readableIdentifier(\n-\t\t\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t\t\t)} (referenced with ${Array.from(\n-\t\t\t\t\t\t\t\timportingModuleTypes.get(m)\n-\t\t\t\t\t\t\t).join(\", \")})`\n-\t\t\t\t\t)\n-\t\t\t\t\t.sort();\n-\t\t\t\tconst explanations = Array.from(importingExplanations).sort();\n-\t\t\t\tif (names.length > 0 && explanations.length === 0) {\n-\t\t\t\t\treturn `Module ${module.readableIdentifier(\n-\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t)} is referenced from these modules with unsupported syntax: ${names.join(\n-\t\t\t\t\t\t\", \"\n-\t\t\t\t\t)}`;\n-\t\t\t\t} else if (names.length === 0 && explanations.length > 0) {\n-\t\t\t\t\treturn `Module ${module.readableIdentifier(\n-\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t)} is referenced by: ${explanations.join(\", \")}`;\n-\t\t\t\t} else if (names.length > 0 && explanations.length > 0) {\n-\t\t\t\t\treturn `Module ${module.readableIdentifier(\n-\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t)} is referenced from these modules with unsupported syntax: ${names.join(\n-\t\t\t\t\t\t\", \"\n-\t\t\t\t\t)} and by: ${explanations.join(\", \")}`;\n-\t\t\t\t} else {\n-\t\t\t\t\treturn `Module ${module.readableIdentifier(\n-\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t)} is referenced in a unsupported way`;\n-\t\t\t\t}\n-\t\t\t};\n-\t\t\tfailureCache.set(module, problem); // cache failures for performance\n-\t\t\treturn problem;\n+\t\t\t\tif (activeConnections.length > 0)\n+\t\t\t\t\tincomingConnectionsFromModules.set(originModule, activeConnections);\n+\t\t\t}\n \t\t}\n \n+\t\tconst incomingModules = Array.from(incomingConnectionsFromModules.keys());\n+\n \t\t// Module must be in the same chunks like the referencing module\n-\t\tconst otherChunkConnections = incomingConnections.filter(connection => {\n+\t\tconst otherChunkModules = incomingModules.filter(originModule => {\n \t\t\tfor (const chunk of chunkGraph.getModuleChunksIterable(\n \t\t\t\tconfig.rootModule\n \t\t\t)) {\n-\t\t\t\tif (!chunkGraph.isModuleInChunk(connection.originModule, chunk)) {\n+\t\t\t\tif (!chunkGraph.isModuleInChunk(originModule, chunk)) {\n \t\t\t\t\treturn true;\n \t\t\t\t}\n \t\t\t}\n \t\t\treturn false;\n \t\t});\n-\t\tif (otherChunkConnections.length > 0) {\n+\t\tif (otherChunkModules.length > 0) {\n \t\t\tconst problem = requestShortener => {\n-\t\t\t\tconst importingModules = new Set(\n-\t\t\t\t\totherChunkConnections.map(c => c.originModule)\n-\t\t\t\t);\n-\t\t\t\tconst names = Array.from(importingModules)\n+\t\t\t\tconst names = otherChunkModules\n \t\t\t\t\t.map(m => m.readableIdentifier(requestShortener))\n \t\t\t\t\t.sort();\n \t\t\t\treturn `Module ${module.readableIdentifier(\n@@ -671,41 +692,90 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\", \"\n \t\t\t\t)}`;\n \t\t\t};\n+\t\t\tstatistics.incorrectChunksOfImporter++;\n+\t\t\tfailureCache.set(module, problem); // cache failures for performance\n+\t\t\treturn problem;\n+\t\t}\n+\n+\t\t/** @type {Map<Module, readonly ModuleGraph.ModuleGraphConnection[]>} */\n+\t\tconst nonHarmonyConnections = new Map();\n+\t\tfor (const [originModule, connections] of incomingConnectionsFromModules) {\n+\t\t\tconst selected = connections.filter(\n+\t\t\t\tconnection =>\n+\t\t\t\t\t!connection.dependency ||\n+\t\t\t\t\t!(connection.dependency instanceof HarmonyImportDependency)\n+\t\t\t);\n+\t\t\tif (selected.length > 0)\n+\t\t\t\tnonHarmonyConnections.set(originModule, connections);\n+\t\t}\n+\t\tif (nonHarmonyConnections.size > 0) {\n+\t\t\tconst problem = requestShortener => {\n+\t\t\t\tconst names = Array.from(nonHarmonyConnections)\n+\t\t\t\t\t.map(([originModule, connections]) => {\n+\t\t\t\t\t\treturn `${originModule.readableIdentifier(\n+\t\t\t\t\t\t\trequestShortener\n+\t\t\t\t\t\t)} (referenced with ${Array.from(\n+\t\t\t\t\t\t\tnew Set(\n+\t\t\t\t\t\t\t\tconnections\n+\t\t\t\t\t\t\t\t\t.map(c => c.dependency && c.dependency.type)\n+\t\t\t\t\t\t\t\t\t.filter(Boolean)\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t.sort()\n+\t\t\t\t\t\t\t.join(\", \")})`;\n+\t\t\t\t\t})\n+\t\t\t\t\t.sort();\n+\t\t\t\treturn `Module ${module.readableIdentifier(\n+\t\t\t\t\trequestShortener\n+\t\t\t\t)} is referenced from these modules with unsupported syntax: ${names.join(\n+\t\t\t\t\t\", \"\n+\t\t\t\t)}`;\n+\t\t\t};\n+\t\t\tstatistics.incorrectModuleDependency++;\n \t\t\tfailureCache.set(module, problem); // cache failures for performance\n \t\t\treturn problem;\n \t\t}\n \n \t\tif (runtime !== undefined && typeof runtime !== \"string\") {\n \t\t\t// Module must be consistently referenced in the same runtimes\n-\t\t\t/** @type {Map<Module, boolean | RuntimeSpec>} */\n-\t\t\tconst runtimeConditionMap = new Map();\n-\t\t\tfor (const connection of incomingConnections) {\n-\t\t\t\tconst runtimeCondition = filterRuntime(runtime, runtime => {\n-\t\t\t\t\treturn connection.isTargetActive(runtime);\n-\t\t\t\t});\n-\t\t\t\tif (runtimeCondition === false) continue;\n-\t\t\t\tconst old = runtimeConditionMap.get(connection.originModule) || false;\n-\t\t\t\tif (old === true) continue;\n-\t\t\t\tif (old !== false && runtimeCondition !== true) {\n-\t\t\t\t\truntimeConditionMap.set(\n-\t\t\t\t\t\tconnection.originModule,\n-\t\t\t\t\t\tmergeRuntime(old, runtimeCondition)\n-\t\t\t\t\t);\n-\t\t\t\t} else {\n-\t\t\t\t\truntimeConditionMap.set(connection.originModule, runtimeCondition);\n+\t\t\t/** @type {{ originModule: Module, runtimeCondition: RuntimeSpec }[]} */\n+\t\t\tconst otherRuntimeConnections = [];\n+\t\t\touter: for (const [\n+\t\t\t\toriginModule,\n+\t\t\t\tconnections\n+\t\t\t] of incomingConnectionsFromModules) {\n+\t\t\t\t/** @type {false | RuntimeSpec} */\n+\t\t\t\tlet currentRuntimeCondition = false;\n+\t\t\t\tfor (const connection of connections) {\n+\t\t\t\t\tconst runtimeCondition = filterRuntime(runtime, runtime => {\n+\t\t\t\t\t\treturn connection.isTargetActive(runtime);\n+\t\t\t\t\t});\n+\t\t\t\t\tif (runtimeCondition === false) continue;\n+\t\t\t\t\tif (runtimeCondition === true) continue outer;\n+\t\t\t\t\tif (currentRuntimeCondition !== false) {\n+\t\t\t\t\t\tcurrentRuntimeCondition = mergeRuntime(\n+\t\t\t\t\t\t\tcurrentRuntimeCondition,\n+\t\t\t\t\t\t\truntimeCondition\n+\t\t\t\t\t\t);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tcurrentRuntimeCondition = runtimeCondition;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif (currentRuntimeCondition !== false) {\n+\t\t\t\t\totherRuntimeConnections.push({\n+\t\t\t\t\t\toriginModule,\n+\t\t\t\t\t\truntimeCondition: currentRuntimeCondition\n+\t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n-\t\t\tconst otherRuntimeConnections = Array.from(runtimeConditionMap).filter(\n-\t\t\t\t([, runtimeCondition]) => typeof runtimeCondition !== \"boolean\"\n-\t\t\t);\n \t\t\tif (otherRuntimeConnections.length > 0) {\n \t\t\t\tconst problem = requestShortener => {\n \t\t\t\t\treturn `Module ${module.readableIdentifier(\n \t\t\t\t\t\trequestShortener\n \t\t\t\t\t)} is runtime-dependent referenced by these modules: ${Array.from(\n \t\t\t\t\t\totherRuntimeConnections,\n-\t\t\t\t\t\t([module, runtimeCondition]) =>\n-\t\t\t\t\t\t\t`${module.readableIdentifier(\n+\t\t\t\t\t\t({ originModule, runtimeCondition }) =>\n+\t\t\t\t\t\t\t`${originModule.readableIdentifier(\n \t\t\t\t\t\t\t\trequestShortener\n \t\t\t\t\t\t\t)} (expected runtime ${runtimeToString(\n \t\t\t\t\t\t\t\truntime\n@@ -714,6 +784,7 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t\t)})`\n \t\t\t\t\t).join(\", \")}`;\n \t\t\t\t};\n+\t\t\t\tstatistics.incorrectRuntimeCondition++;\n \t\t\t\tfailureCache.set(module, problem); // cache failures for performance\n \t\t\t\treturn problem;\n \t\t\t}\n@@ -727,9 +798,7 @@ class ModuleConcatenationPlugin {\n \t\t// Add the module\n \t\tconfig.add(module);\n \n-\t\tconst incomingModules = Array.from(\n-\t\t\tnew Set(incomingConnections.map(c => c.originModule))\n-\t\t).sort(compareModulesByIdentifier);\n+\t\tincomingModules.sort(compareModulesByIdentifier);\n \n \t\t// Every module which depends on the added module must be in the configuration too.\n \t\tfor (const originModule of incomingModules) {\n@@ -743,10 +812,12 @@ class ModuleConcatenationPlugin {\n \t\t\t\tcandidates,\n \t\t\t\tfailureCache,\n \t\t\t\tchunkGraph,\n-\t\t\t\tfalse\n+\t\t\t\tfalse,\n+\t\t\t\tstatistics\n \t\t\t);\n \t\t\tif (problem) {\n \t\t\t\tif (backup !== undefined) config.rollback(backup);\n+\t\t\t\tstatistics.importerFailed++;\n \t\t\t\tfailureCache.set(module, problem); // cache failures for performance\n \t\t\t\treturn problem;\n \t\t\t}\n@@ -756,6 +827,7 @@ class ModuleConcatenationPlugin {\n \t\tfor (const imp of this._getImports(compilation, module, runtime)) {\n \t\t\tcandidates.add(imp);\n \t\t}\n+\t\tstatistics.added++;\n \t\treturn null;\n \t}\n }"
      },
      {
        "sha": "f9ea900f9129c8acce5d8524fb72a17d3562dc1d",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -2423,7 +2423,7 @@ LOG from webpack.ModuleConcatenationPlugin\n <t> find modules to concatenate: X ms\n <t> sort concat configurations: X ms\n <t> create concatenated modules: X ms\n-+ 2 hidden lines\n++ 3 hidden lines\n \n LOG from webpack.FileSystemInfo\n     6 new snapshots created\n@@ -3032,7 +3032,7 @@ cacheable modules 975 bytes\n     modules by path ./*.js 106 bytes\n       ./vendor.js 25 bytes [built] [code generated]\n       ./lazy_shared.js 56 bytes [built] [code generated]\n-        ModuleConcatenation bailout: Cannot concat with ./common_lazy_shared.js: Module ./common_lazy_shared.js is referenced from different chunks by these modules: ./lazy_first.js + 1 modules, ./lazy_second.js + 1 modules\n+        ModuleConcatenation bailout: Cannot concat with ./common_lazy_shared.js: Module ./common_lazy_shared.js is referenced from different chunks by these modules: ./lazy_first.js, ./lazy_second.js\n       ./common_lazy_shared.js 25 bytes [built] [code generated]\n     ./first.js + 2 modules 292 bytes [built] [code generated]\n       ModuleConcatenation bailout: Cannot concat with ./vendor.js: Module ./vendor.js is not in the same chunk(s) (expected in chunk(s) first, module is in chunk(s) vendor)"
      },
      {
        "sha": "3371f1b150f14b4515a11f251ca8e8d6233fcf4a",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 8,
        "deletions": 5,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/5c42b918b438916add040531266f8d88c604427d/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/5c42b918b438916add040531266f8d88c604427d/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=5c42b918b438916add040531266f8d88c604427d",
        "patch": "@@ -5979,6 +5979,9 @@ declare class ModuleGraph {\n \tgetResolvedOrigin(dependency: Dependency): Module;\n \tgetIncomingConnections(module: Module): Iterable<ModuleGraphConnection>;\n \tgetOutgoingConnections(module: Module): Iterable<ModuleGraphConnection>;\n+\tgetIncomingConnectionsByOriginModule(\n+\t\tmodule: Module\n+\t): Map<Module, ReadonlyArray<ModuleGraphConnection>>;\n \tgetProfile(module: Module): null | ModuleProfile;\n \tsetProfile(module: Module, profile: null | ModuleProfile): void;\n \tgetIssuer(module: Module): null | Module;\n@@ -6025,18 +6028,18 @@ declare class ModuleGraph {\n }\n declare class ModuleGraphConnection {\n \tconstructor(\n-\t\toriginModule: undefined | Module,\n-\t\tdependency: undefined | Dependency,\n+\t\toriginModule: null | Module,\n+\t\tdependency: null | Dependency,\n \t\tmodule: Module,\n \t\texplanation?: string,\n \t\tweak?: boolean,\n \t\tcondition?:\n \t\t\t| false\n \t\t\t| ((arg0: ModuleGraphConnection, arg1: RuntimeSpec) => ConnectionState)\n \t);\n-\toriginModule?: Module;\n-\tresolvedOriginModule?: Module;\n-\tdependency?: Dependency;\n+\toriginModule: null | Module;\n+\tresolvedOriginModule: null | Module;\n+\tdependency: null | Dependency;\n \tresolvedModule: Module;\n \tmodule: Module;\n \tweak: boolean;"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13662",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13662/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13662/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13662/events",
    "html_url": "https://github.com/webpack/webpack/pull/13662",
    "id": 932506867,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njc5ODQwMTQ4",
    "number": 13662,
    "title": "reduce amount of buffer splitting for large cache files",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-06-29T11:11:24Z",
    "updated_at": "2021-06-29T14:26:25Z",
    "closed_at": "2021-06-29T14:26:25Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13662",
      "html_url": "https://github.com/webpack/webpack/pull/13662",
      "diff_url": "https://github.com/webpack/webpack/pull/13662.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13662.patch",
      "merged_at": "2021-06-29T14:26:25Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13662/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13662/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5cfa7e23c308e28bf5167af4d4327c0213603fd7",
        "filename": "lib/TemplatedPathPlugin.js",
        "status": "modified",
        "additions": 24,
        "deletions": 26,
        "changes": 50,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/lib%2FTemplatedPathPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/lib%2FTemplatedPathPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FTemplatedPathPlugin.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -116,32 +116,30 @@ const replacePathVariables = (path, data, assetInfo) => {\n \t// [path] - /some/path/\n \t// [name] - file\n \t// [ext] - .js\n-\tif (data.filename) {\n-\t\tif (typeof data.filename === \"string\") {\n-\t\t\tconst { path: file, query, fragment } = parseResource(data.filename);\n-\n-\t\t\tconst ext = extname(file);\n-\t\t\tconst base = basename(file);\n-\t\t\tconst name = base.slice(0, base.length - ext.length);\n-\t\t\tconst path = file.slice(0, file.length - base.length);\n-\n-\t\t\treplacements.set(\"file\", replacer(file));\n-\t\t\treplacements.set(\"query\", replacer(query, true));\n-\t\t\treplacements.set(\"fragment\", replacer(fragment, true));\n-\t\t\treplacements.set(\"path\", replacer(path, true));\n-\t\t\treplacements.set(\"base\", replacer(base));\n-\t\t\treplacements.set(\"name\", replacer(name));\n-\t\t\treplacements.set(\"ext\", replacer(ext, true));\n-\t\t\t// Legacy\n-\t\t\treplacements.set(\n-\t\t\t\t\"filebase\",\n-\t\t\t\tdeprecated(\n-\t\t\t\t\treplacer(base),\n-\t\t\t\t\t\"[filebase] is now [base]\",\n-\t\t\t\t\t\"DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_FILENAME\"\n-\t\t\t\t)\n-\t\t\t);\n-\t\t}\n+\tif (typeof data.filename === \"string\") {\n+\t\tconst { path: file, query, fragment } = parseResource(data.filename);\n+\n+\t\tconst ext = extname(file);\n+\t\tconst base = basename(file);\n+\t\tconst name = base.slice(0, base.length - ext.length);\n+\t\tconst path = file.slice(0, file.length - base.length);\n+\n+\t\treplacements.set(\"file\", replacer(file));\n+\t\treplacements.set(\"query\", replacer(query, true));\n+\t\treplacements.set(\"fragment\", replacer(fragment, true));\n+\t\treplacements.set(\"path\", replacer(path, true));\n+\t\treplacements.set(\"base\", replacer(base));\n+\t\treplacements.set(\"name\", replacer(name));\n+\t\treplacements.set(\"ext\", replacer(ext, true));\n+\t\t// Legacy\n+\t\treplacements.set(\n+\t\t\t\"filebase\",\n+\t\t\tdeprecated(\n+\t\t\t\treplacer(base),\n+\t\t\t\t\"[filebase] is now [base]\",\n+\t\t\t\t\"DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_FILENAME\"\n+\t\t\t)\n+\t\t);\n \t}\n \n \t// Compilation context"
      },
      {
        "sha": "da51783607a547775767b4ec317b43d051a71be6",
        "filename": "lib/serialization/BinaryMiddleware.js",
        "status": "modified",
        "additions": 24,
        "deletions": 14,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/lib%2Fserialization%2FBinaryMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/lib%2Fserialization%2FBinaryMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FBinaryMiddleware.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -165,12 +165,23 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t};\n \t\tconst flush = () => {\n \t\t\tif (currentBuffer !== null) {\n-\t\t\t\tbuffers.push(currentBuffer.slice(0, currentPosition));\n+\t\t\t\tbuffers.push(\n+\t\t\t\t\tBuffer.from(\n+\t\t\t\t\t\tcurrentBuffer.buffer,\n+\t\t\t\t\t\tcurrentBuffer.byteOffset,\n+\t\t\t\t\t\tcurrentPosition\n+\t\t\t\t\t)\n+\t\t\t\t);\n \t\t\t\tif (\n \t\t\t\t\t!leftOverBuffer ||\n \t\t\t\t\tleftOverBuffer.length < currentBuffer.length - currentPosition\n-\t\t\t\t)\n-\t\t\t\t\tleftOverBuffer = currentBuffer.slice(currentPosition);\n+\t\t\t\t) {\n+\t\t\t\t\tleftOverBuffer = Buffer.from(\n+\t\t\t\t\t\tcurrentBuffer.buffer,\n+\t\t\t\t\t\tcurrentBuffer.byteOffset + currentPosition,\n+\t\t\t\t\t\tcurrentBuffer.byteLength - currentPosition\n+\t\t\t\t\t);\n+\t\t\t\t}\n \t\t\t\tcurrentBuffer = null;\n \t\t\t\tbuffersTotalLength += currentPosition;\n \t\t\t\tcurrentPosition = 0;\n@@ -554,10 +565,8 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\tif (rem < n) {\n \t\t\t\treturn Buffer.concat([read(rem), read(n - rem)]);\n \t\t\t}\n-\t\t\tconst res = /** @type {Buffer} */ (currentBuffer).slice(\n-\t\t\t\tcurrentPosition,\n-\t\t\t\tcurrentPosition + n\n-\t\t\t);\n+\t\t\tconst b = /** @type {Buffer} */ (currentBuffer);\n+\t\t\tconst res = Buffer.from(b.buffer, b.byteOffset + currentPosition, n);\n \t\t\tcurrentPosition += n;\n \t\t\tcheckOverflow();\n \t\t\treturn res;\n@@ -579,10 +588,8 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\tif (rem < n) {\n \t\t\t\tn = rem;\n \t\t\t}\n-\t\t\tconst res = /** @type {Buffer} */ (currentBuffer).slice(\n-\t\t\t\tcurrentPosition,\n-\t\t\t\tcurrentPosition + n\n-\t\t\t);\n+\t\t\tconst b = /** @type {Buffer} */ (currentBuffer);\n+\t\t\tconst res = Buffer.from(b.buffer, b.byteOffset + currentPosition, n);\n \t\t\tcurrentPosition += n;\n \t\t\tcheckOverflow();\n \t\t\treturn res;\n@@ -735,7 +742,7 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\t\tcase STRING_HEADER:\n \t\t\t\t\treturn () => {\n \t\t\t\t\t\tconst len = readU32();\n-\t\t\t\t\t\tif (isInCurrentBuffer(len)) {\n+\t\t\t\t\t\tif (isInCurrentBuffer(len) && currentPosition + len < 0x7fffffff) {\n \t\t\t\t\t\t\tresult.push(\n \t\t\t\t\t\t\t\tcurrentBuffer.toString(\n \t\t\t\t\t\t\t\t\tundefined,\n@@ -753,7 +760,7 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\t\t\treturn () => result.push(\"\");\n \t\t\t\tcase SHORT_STRING_HEADER | 1:\n \t\t\t\t\treturn () => {\n-\t\t\t\t\t\tif (currentIsBuffer) {\n+\t\t\t\t\t\tif (currentIsBuffer && currentPosition < 0x7ffffffe) {\n \t\t\t\t\t\t\tresult.push(\n \t\t\t\t\t\t\t\tcurrentBuffer.toString(\n \t\t\t\t\t\t\t\t\t\"latin1\",\n@@ -785,7 +792,10 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\t\t\t} else if ((header & SHORT_STRING_HEADER) === SHORT_STRING_HEADER) {\n \t\t\t\t\t\tconst len = header & SHORT_STRING_LENGTH_MASK;\n \t\t\t\t\t\treturn () => {\n-\t\t\t\t\t\t\tif (isInCurrentBuffer(len)) {\n+\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\tisInCurrentBuffer(len) &&\n+\t\t\t\t\t\t\t\tcurrentPosition + len < 0x7fffffff\n+\t\t\t\t\t\t\t) {\n \t\t\t\t\t\t\t\tresult.push(\n \t\t\t\t\t\t\t\t\tcurrentBuffer.toString(\n \t\t\t\t\t\t\t\t\t\t\"latin1\","
      },
      {
        "sha": "fd5f2afeebfae9d308445b11d130def986029654",
        "filename": "lib/serialization/FileMiddleware.js",
        "status": "modified",
        "additions": 19,
        "deletions": 5,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/lib%2Fserialization%2FFileMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/lib%2Fserialization%2FFileMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FFileMiddleware.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -280,8 +280,16 @@ const deserialize = async (middleware, name, readFile) => {\n \t}\n \tconst sectionCount = readUInt32LE();\n \tconst lengths = [];\n+\tlet lastLengthPositive = false;\n \tfor (let i = 0; i < sectionCount; i++) {\n-\t\tlengths.push(readInt32LE());\n+\t\tconst value = readInt32LE();\n+\t\tconst valuePositive = value >= 0;\n+\t\tif (lastLengthPositive && valuePositive) {\n+\t\t\tlengths[lengths.length - 1] += value;\n+\t\t} else {\n+\t\t\tlengths.push(value);\n+\t\t\tlastLengthPositive = valuePositive;\n+\t\t}\n \t}\n \tconst result = [];\n \tfor (let length of lengths) {\n@@ -316,13 +324,15 @@ const deserialize = async (middleware, name, readFile) => {\n \t\t\t\t\tcontentPosition += length;\n \t\t\t\t\tlength = 0;\n \t\t\t\t} else {\n+\t\t\t\t\tconst l = contentItemLength - contentPosition;\n \t\t\t\t\tresult.push(\n \t\t\t\t\t\tBuffer.from(\n \t\t\t\t\t\t\tcontentItem.buffer,\n-\t\t\t\t\t\t\tcontentItem.byteOffset + contentPosition\n+\t\t\t\t\t\t\tcontentItem.byteOffset + contentPosition,\n+\t\t\t\t\t\t\tl\n \t\t\t\t\t\t)\n \t\t\t\t\t);\n-\t\t\t\t\tlength -= contentItemLength - contentPosition;\n+\t\t\t\t\tlength -= l;\n \t\t\t\t\tcontentPosition = contentItemLength;\n \t\t\t\t}\n \t\t\t} else {\n@@ -331,7 +341,9 @@ const deserialize = async (middleware, name, readFile) => {\n \t\t\t\t\tlength -= contentItemLength;\n \t\t\t\t\tcontentPosition = contentItemLength;\n \t\t\t\t} else {\n-\t\t\t\t\tresult.push(contentItem.slice(0, length));\n+\t\t\t\t\tresult.push(\n+\t\t\t\t\t\tBuffer.from(contentItem.buffer, contentItem.byteOffset, length)\n+\t\t\t\t\t);\n \t\t\t\t\tcontentPosition += length;\n \t\t\t\t\tlength = 0;\n \t\t\t\t}\n@@ -343,7 +355,9 @@ const deserialize = async (middleware, name, readFile) => {\n \t\t\t\t\tlength -= contentItemLength;\n \t\t\t\t\tcontentPosition = contentItemLength;\n \t\t\t\t} else {\n-\t\t\t\t\tresult.push(contentItem.slice(0, length));\n+\t\t\t\t\tresult.push(\n+\t\t\t\t\t\tBuffer.from(contentItem.buffer, contentItem.byteOffset, length)\n+\t\t\t\t\t);\n \t\t\t\t\tcontentPosition += length;\n \t\t\t\t\tlength = 0;\n \t\t\t\t}"
      },
      {
        "sha": "8501be8955af043bf166aafb1218d006912a86c2",
        "filename": "test/TestCases.template.js",
        "status": "modified",
        "additions": 45,
        "deletions": 30,
        "changes": 75,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2FTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2FTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCases.template.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -95,6 +95,11 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\tcategory.name,\n \t\t\t\t\t\t\t\ttestName\n \t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tlet testConfig = {};\n+\t\t\t\t\t\t\tconst testConfigPath = path.join(testDirectory, \"test.config.js\");\n+\t\t\t\t\t\t\tif (fs.existsSync(testConfigPath)) {\n+\t\t\t\t\t\t\t\ttestConfig = require(testConfigPath);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tconst options = {\n \t\t\t\t\t\t\t\tcontext: casesPath,\n \t\t\t\t\t\t\t\tentry: \"./\" + category.name + \"/\" + testName + \"/\",\n@@ -196,34 +201,42 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\trimraf(cacheDirectory, done);\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t\tif (config.cache) {\n-\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill disk cache (1st)`, done => {\n-\t\t\t\t\t\t\t\t\tconst oldPath = options.output.path;\n-\t\t\t\t\t\t\t\t\toptions.output.path = path.join(\n-\t\t\t\t\t\t\t\t\t\toptions.output.path,\n-\t\t\t\t\t\t\t\t\t\t\"cache1\"\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\tconst deprecationTracker = deprecationTracking.start();\n-\t\t\t\t\t\t\t\t\twebpack(options, err => {\n-\t\t\t\t\t\t\t\t\t\tdeprecationTracker();\n-\t\t\t\t\t\t\t\t\t\toptions.output.path = oldPath;\n-\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n-\t\t\t\t\t\t\t\t\t\tdone();\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t}, 60000);\n-\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill disk cache (2nd)`, done => {\n-\t\t\t\t\t\t\t\t\tconst oldPath = options.output.path;\n-\t\t\t\t\t\t\t\t\toptions.output.path = path.join(\n-\t\t\t\t\t\t\t\t\t\toptions.output.path,\n-\t\t\t\t\t\t\t\t\t\t\"cache2\"\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\tconst deprecationTracker = deprecationTracking.start();\n-\t\t\t\t\t\t\t\t\twebpack(options, err => {\n-\t\t\t\t\t\t\t\t\t\tdeprecationTracker();\n-\t\t\t\t\t\t\t\t\t\toptions.output.path = oldPath;\n-\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n-\t\t\t\t\t\t\t\t\t\tdone();\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t}, 10000);\n+\t\t\t\t\t\t\t\tit(\n+\t\t\t\t\t\t\t\t\t`${testName} should pre-compile to fill disk cache (1st)`,\n+\t\t\t\t\t\t\t\t\tdone => {\n+\t\t\t\t\t\t\t\t\t\tconst oldPath = options.output.path;\n+\t\t\t\t\t\t\t\t\t\toptions.output.path = path.join(\n+\t\t\t\t\t\t\t\t\t\t\toptions.output.path,\n+\t\t\t\t\t\t\t\t\t\t\t\"cache1\"\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\tconst deprecationTracker = deprecationTracking.start();\n+\t\t\t\t\t\t\t\t\t\twebpack(options, err => {\n+\t\t\t\t\t\t\t\t\t\t\tdeprecationTracker();\n+\t\t\t\t\t\t\t\t\t\t\toptions.output.path = oldPath;\n+\t\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\t\ttestConfig.timeout || 60000\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\tit(\n+\t\t\t\t\t\t\t\t\t`${testName} should pre-compile to fill disk cache (2nd)`,\n+\t\t\t\t\t\t\t\t\tdone => {\n+\t\t\t\t\t\t\t\t\t\tconst oldPath = options.output.path;\n+\t\t\t\t\t\t\t\t\t\toptions.output.path = path.join(\n+\t\t\t\t\t\t\t\t\t\t\toptions.output.path,\n+\t\t\t\t\t\t\t\t\t\t\t\"cache2\"\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\tconst deprecationTracker = deprecationTracking.start();\n+\t\t\t\t\t\t\t\t\t\twebpack(options, err => {\n+\t\t\t\t\t\t\t\t\t\t\tdeprecationTracker();\n+\t\t\t\t\t\t\t\t\t\t\toptions.output.path = oldPath;\n+\t\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\t\ttestConfig.cachedTimeout || testConfig.timeout || 10000\n+\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tit(\n \t\t\t\t\t\t\t\ttestName + \" should compile\",\n@@ -303,7 +316,9 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\trun();\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\t\tconfig.cache ? 20000 : 60000\n+\t\t\t\t\t\t\t\ttestConfig.cachedTimeout ||\n+\t\t\t\t\t\t\t\t\ttestConfig.timeout ||\n+\t\t\t\t\t\t\t\t\t(config.cache ? 20000 : 60000)\n \t\t\t\t\t\t\t);\n \n \t\t\t\t\t\t\tit(\n@@ -415,7 +430,7 @@ const describeCases = config => {\n \n \t\t\t\t\t\t\tconst { it: _it, getNumberOfTests } = createLazyTestEnv(\n \t\t\t\t\t\t\t\tjasmine.getEnv(),\n-\t\t\t\t\t\t\t\t10000\n+\t\t\t\t\t\t\t\ttestConfig.timeout || 10000\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t});\n \t\t\t\t\t});"
      },
      {
        "sha": "c298e2a42ec6acbc1f2983fccadc0a5654ddebcc",
        "filename": "test/cases/large/big-assets/generate-big-asset-loader.js",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Fgenerate-big-asset-loader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Fgenerate-big-asset-loader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fbig-assets%2Fgenerate-big-asset-loader.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -0,0 +1,6 @@\n+/** @type {import(\"../../../../\").RawLoaderDefinition<{ size: string }>} */\n+module.exports = function () {\n+\tconst options = this.getOptions();\n+\treturn Buffer.alloc(+options.size);\n+};\n+module.exports.raw = true;"
      },
      {
        "sha": "81a0f9590c4bf2e3ce0e55c04ef0c50016120311",
        "filename": "test/cases/large/big-assets/index.js",
        "status": "added",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fbig-assets%2Findex.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -0,0 +1,26 @@\n+it(\"should compile fine\", () => {\n+\tconst a = new URL(\n+\t\t\"./generate-big-asset-loader.js?size=100000000!\",\n+\t\timport.meta.url\n+\t);\n+\tconst b = new URL(\n+\t\t\"./generate-big-asset-loader.js?size=200000000!\",\n+\t\timport.meta.url\n+\t);\n+\tconst c = new URL(\n+\t\t\"./generate-big-asset-loader.js?size=300000000!\",\n+\t\timport.meta.url\n+\t);\n+\tconst d = new URL(\n+\t\t\"./generate-big-asset-loader.js?size=400000000!\",\n+\t\timport.meta.url\n+\t);\n+\tconst e = new URL(\n+\t\t\"./generate-big-asset-loader.js?size=500000000!\",\n+\t\timport.meta.url\n+\t);\n+\tconst f = new URL(\n+\t\t\"./generate-big-asset-loader.js?size=600000000!\",\n+\t\timport.meta.url\n+\t);\n+});"
      },
      {
        "sha": "7ab4fa5eeffef7cd42fe2c2a70a35f01f6e94cf0",
        "filename": "test/cases/large/big-assets/test.config.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Ftest.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Ftest.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fbig-assets%2Ftest.config.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = {\n+\ttimeout: 120000\n+};"
      },
      {
        "sha": "71a71e594ff96453f1876aea69e7c0c58cf6f30a",
        "filename": "test/cases/large/big-assets/test.filter.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Ftest.filter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/563a28dd0f952ff845649ca743dfadf60d2d4994/test%2Fcases%2Flarge%2Fbig-assets%2Ftest.filter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Flarge%2Fbig-assets%2Ftest.filter.js?ref=563a28dd0f952ff845649ca743dfadf60d2d4994",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = function (config) {\n+\treturn !process.env.CI;\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13574",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13574/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13574/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13574/events",
    "html_url": "https://github.com/webpack/webpack/pull/13574",
    "id": 922988239,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjcxNzk5MzQz",
    "number": 13574,
    "title": "perf: Limit frequency of LazySet flattening by shortcircuiting empty LazySets",
    "user": {
      "login": "markjm",
      "id": 16494982,
      "node_id": "MDQ6VXNlcjE2NDk0OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/16494982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markjm",
      "html_url": "https://github.com/markjm",
      "followers_url": "https://api.github.com/users/markjm/followers",
      "following_url": "https://api.github.com/users/markjm/following{/other_user}",
      "gists_url": "https://api.github.com/users/markjm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markjm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markjm/subscriptions",
      "organizations_url": "https://api.github.com/users/markjm/orgs",
      "repos_url": "https://api.github.com/users/markjm/repos",
      "events_url": "https://api.github.com/users/markjm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markjm/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575748708,
        "node_id": "MDU6TGFiZWw1NzU3NDg3MDg=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-changes-requested",
        "name": "PR: reviewed-changes-requested",
        "color": "c2e0c6",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-06-16T19:07:05Z",
    "updated_at": "2021-06-18T07:25:10Z",
    "closed_at": "2021-06-18T07:25:04Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13574",
      "html_url": "https://github.com/webpack/webpack/pull/13574",
      "diff_url": "https://github.com/webpack/webpack/pull/13574.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13574.patch",
      "merged_at": "2021-06-18T07:25:04Z"
    },
    "body": "Closes #13573\r\nThe summarizeDependencies call is very expensive in large projects because of the huge merge/flatten cycle required by LazySet. I notice that many of these LazySets are empty, so lets short circuit those to limit the number of times the `size > 100000` trigger is met for merging.\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance improvement to LazySet in large projects\r\n\r\n**Did you add tests for your changes?**\r\nyep, and also regressions show in multiple tests due to high usage of LazySet\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n\r\n**What needs to be documented once your changes are merged?**\r\nno",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13574/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13574/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "0d3b13ba0c720fd7f65e142c5d669710c2bfba7d",
        "filename": "lib/util/LazySet.js",
        "status": "modified",
        "additions": 26,
        "deletions": 17,
        "changes": 43,
        "blob_url": "https://github.com/webpack/webpack/blob/b0097bcff1f581bd3583883d4ae88e1375362d35/lib%2Futil%2FLazySet.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b0097bcff1f581bd3583883d4ae88e1375362d35/lib%2Futil%2FLazySet.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FLazySet.js?ref=b0097bcff1f581bd3583883d4ae88e1375362d35",
        "patch": "@@ -24,21 +24,17 @@ const merge = (targetSet, toMerge) => {\n /**\n  * @template T\n  * @param {Set<Iterable<T>>} targetSet set where iterables should be added\n- * @param {Array<Iterable<T> | LazySet<T>>} toDeepMerge iterables or lazy set to be flattened\n+ * @param {Array<LazySet<T>>} toDeepMerge lazy sets to be flattened\n  * @returns {void}\n  */\n const flatten = (targetSet, toDeepMerge) => {\n \tfor (const set of toDeepMerge) {\n-\t\tif (set instanceof LazySet) {\n-\t\t\tif (set._set.size > 0) targetSet.add(set._set);\n-\t\t\tif (set._needMerge) {\n-\t\t\t\tfor (const mergedSet of set._toMerge) {\n-\t\t\t\t\ttargetSet.add(mergedSet);\n-\t\t\t\t}\n-\t\t\t\tflatten(targetSet, set._toDeepMerge);\n+\t\tif (set._set.size > 0) targetSet.add(set._set);\n+\t\tif (set._needMerge) {\n+\t\t\tfor (const mergedSet of set._toMerge) {\n+\t\t\t\ttargetSet.add(mergedSet);\n \t\t\t}\n-\t\t} else {\n-\t\t\ttargetSet.add(set);\n+\t\t\tflatten(targetSet, set._toDeepMerge);\n \t\t}\n \t}\n };\n@@ -58,7 +54,7 @@ class LazySet {\n \t\tthis._set = new Set(iterable);\n \t\t/** @type {Set<Iterable<T>>} */\n \t\tthis._toMerge = new Set();\n-\t\t/** @type {Array<Iterable<T> | LazySet<T>>} */\n+\t\t/** @type {Array<LazySet<T>>} */\n \t\tthis._toDeepMerge = [];\n \t\tthis._needMerge = false;\n \t\tthis._deopt = false;\n@@ -76,6 +72,14 @@ class LazySet {\n \t\tthis._needMerge = false;\n \t}\n \n+\t_isEmpty() {\n+\t\treturn (\n+\t\t\tthis._set.size === 0 &&\n+\t\t\tthis._toMerge.size === 0 &&\n+\t\t\tthis._toDeepMerge.length === 0\n+\t\t);\n+\t}\n+\n \tget size() {\n \t\tif (this._needMerge) this._merge();\n \t\treturn this._set.size;\n@@ -101,13 +105,18 @@ class LazySet {\n \t\t\t\t_set.add(item);\n \t\t\t}\n \t\t} else {\n-\t\t\tthis._toDeepMerge.push(iterable);\n-\t\t\tthis._needMerge = true;\n-\t\t\t// Avoid being too memory hungry\n-\t\t\tif (this._toDeepMerge.length > 100000) {\n-\t\t\t\tthis._flatten();\n-\t\t\t\tif (this._toMerge.size > 100000) this._merge();\n+\t\t\tif (iterable instanceof LazySet) {\n+\t\t\t\tif (iterable._isEmpty()) return this;\n+\t\t\t\tthis._toDeepMerge.push(iterable);\n+\t\t\t\tthis._needMerge = true;\n+\t\t\t\tif (this._toDeepMerge.length > 100000) {\n+\t\t\t\t\tthis._flatten();\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tthis._toMerge.add(iterable);\n+\t\t\t\tthis._needMerge = true;\n \t\t\t}\n+\t\t\tif (this._toMerge.size > 100000) this._merge();\n \t\t}\n \t\treturn this;\n \t}"
      },
      {
        "sha": "92c829f7a330c09ebef5a1866e7d9aa2f211b759",
        "filename": "test/LazySet.unittest.js",
        "status": "added",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/b0097bcff1f581bd3583883d4ae88e1375362d35/test%2FLazySet.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b0097bcff1f581bd3583883d4ae88e1375362d35/test%2FLazySet.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FLazySet.unittest.js?ref=b0097bcff1f581bd3583883d4ae88e1375362d35",
        "patch": "@@ -0,0 +1,22 @@\n+const LazySet = require(\"../lib/util/LazySet\");\n+\n+describe(\"LazySet\", () => {\n+\tit(\"addAll\", () => {\n+\t\tconst a = new Set([\"a\"]);\n+\t\tconst sut = new LazySet(a);\n+\t\tconst empty = new LazySet([]);\n+\t\texpect(sut.size).toBe(1);\n+\t\tsut.addAll(empty);\n+\t\texpect(sut._toDeepMerge).toStrictEqual([]);\n+\t\texpect(sut.size).toBe(1);\n+\t\tconst b = new Set([\"b\"]);\n+\t\tsut.addAll(b);\n+\t\texpect(sut._toMerge).toContain(b);\n+\t\texpect(sut.size).toBe(2);\n+\t\tconst c = new LazySet([\"c\"]);\n+\t\tsut.addAll(c);\n+\t\texpect(sut._toDeepMerge).toContain(c);\n+\t\texpect(sut.size).toBe(3);\n+\t\texpect(sut._toDeepMerge).toStrictEqual([]);\n+\t});\n+});"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12469",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12469/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12469/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12469/events",
    "html_url": "https://github.com/webpack/webpack/pull/12469",
    "id": 791244517,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTU5MzM1MjIx",
    "number": 12469,
    "title": "add experimental lazy compilation",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 20,
    "created_at": "2021-01-21T15:46:11Z",
    "updated_at": "2021-06-25T11:29:31Z",
    "closed_at": "2021-01-22T12:29:29Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12469",
      "html_url": "https://github.com/webpack/webpack/pull/12469",
      "diff_url": "https://github.com/webpack/webpack/pull/12469.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12469.patch",
      "merged_at": "2021-01-22T12:29:29Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nThis adds an experimental feature which allows to compile only the part of the application which is currently in use. Additional `import()`s and entrypoints which are currently not in use do not affect compilation performance when this feature is enabled.\r\n\r\nWhen used webpack opens an additional communication channel between client and compiler via Server-Send-Events. With this channel the currently used `import()`s are told the compiler. The compiler will include these `import()`s resp. entrypoints in the next compilation. When in watch mode and new `import()`s/entrypoints are communicated to the compiler, it will automatically recompile.\r\n\r\nWhen Hot Module Replacement is not enabled, (manual) refresh of the page is required.\r\n\r\nThis also works when targeting node.js. Including HMR in node.js.\r\n\r\nAfter 2 minutes not using a `import()` resp. entrypoint it be garbage collected. Once compiled modules will stay in cache, so compiling it again is probably pretty fast. It's recommended to combine this with the Persistent Cache to keep the cache even after restarting.\r\n\r\nFor logging use `infrastructureLogging.debug: /LazyCompilationBackend/`.\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes, but that could be improved.\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* add `experiments.lazyCompilation`: Compiles `import()` only when requested using HMR.\r\n* add `experiments.lazyCompilation.client`: Allows to use a custom client. It need to expose a single export named `keepAlive` which is a `({ data: any, active: boolean, module: Module, onError: (err: Error) => void }) => () => void`. It's returning a dispose function. As default `webpack/hot/lazy-compilation-{node|web}.js` is used.\r\n  * When writing your own client best import the default client with `require(\"webpack/hot/lazy-compilation-web.js\" + __resourceQuery)` and call the `keepAlive` method from your own implementation.\r\n  * Custom client might be useful if you want to add some UI effects while waiting for compilation.\r\n* add `experiments.lazyCompilation.backend`: Allows to use a custom backend.\r\n  * `(compiler: Compiler, client: string) => Promise<Backend>` (Promise or node-style callback)\r\n  * `Backend = { dispose: (callback) => void, module: (module: WebpackModule) => { client: string, data: any, active: boolean } }`\r\n  * The default backend passes a URL prefix to a EventSource server as query string to the client. `data` is a url encoded key for the module. `urlPrefix + keys.join(\"@\")` should be used to access the EventSource.\r\n* see above for more details\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n\r\n---\r\n\r\nPrior art\r\n* next.js detects the used routes and adds entrypoint on demand, which makes unused routes not influencing the compilation\r\n* https://github.com/liximomo/lazy-compile-webpack-plugin\r\n  * uses timestamp write to disk to invalidate build\r\n  * uses a loader instead of a separate Module + Chunk\r\n\r\ncc @liximomo\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12469/reactions",
      "total_count": 43,
      "+1": 7,
      "-1": 0,
      "laugh": 0,
      "hooray": 26,
      "confused": 0,
      "heart": 0,
      "rocket": 10,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12469/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "42069f45895f4c1b0b9ee04c6eb3373b7c341e54",
        "filename": "azure-pipelines.yml",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/azure-pipelines.yml",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/azure-pipelines.yml",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/azure-pipelines.yml?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -130,11 +130,13 @@ jobs:\n           key: yarn | $(Agent.OS) | yarn.lock\n           path: $(YARN_CACHE_FOLDER)\n         displayName: \"Cache Yarn packages\"\n-      - script: |\n-          yarn --frozen-lockfile\n-          yarn link --frozen-lockfile || true\n-          yarn link webpack --frozen-lockfile\n+      - script: yarn --frozen-lockfile\n         displayName: \"Install dependencies\"\n+      - script: yarn link --frozen-lockfile || true\n+        displayName: \"Link webpack\"\n+        continueOnError: true\n+      - script: yarn link webpack --frozen-lockfile\n+        displayName: \"Link webpack into node_modules\"\n       - script: |\n           yarn cover:integration --ci --maxWorkers=2 --reporters=jest-junit\n         displayName: \"Run tests with coverage\""
      },
      {
        "sha": "1d78a780c5e6609c77de5a061c691a1765748f4e",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -1041,6 +1041,34 @@ export interface Experiments {\n \t * Enable module and chunk layers.\n \t */\n \tlayers?: boolean;\n+\t/**\n+\t * Compile entrypoints and import()s only when they are accessed.\n+\t */\n+\tlazyCompilation?:\n+\t\t| boolean\n+\t\t| {\n+\t\t\t\t/**\n+\t\t\t\t * A custom backend.\n+\t\t\t\t */\n+\t\t\t\tbackend?:\n+\t\t\t\t\t| ((\n+\t\t\t\t\t\t\tcompiler: import(\"../lib/Compiler\"),\n+\t\t\t\t\t\t\tclient: string,\n+\t\t\t\t\t\t\tcallback: (err?: Error, api?: any) => void\n+\t\t\t\t\t  ) => void)\n+\t\t\t\t\t| ((\n+\t\t\t\t\t\t\tcompiler: import(\"../lib/Compiler\"),\n+\t\t\t\t\t\t\tclient: string\n+\t\t\t\t\t  ) => Promise<any>);\n+\t\t\t\t/**\n+\t\t\t\t * A custom client.\n+\t\t\t\t */\n+\t\t\t\tclient?: string;\n+\t\t\t\t/**\n+\t\t\t\t * Enable/disable lazy compilation for entries.\n+\t\t\t\t */\n+\t\t\t\tentries?: boolean;\n+\t\t  };\n \t/**\n \t * Allow output javascript files as module source type.\n \t */"
      },
      {
        "sha": "ea34cac581ddbb9e0c16c78765f11f427e19fa54",
        "filename": "examples/lazy-compilation/README.md",
        "status": "added",
        "additions": 67,
        "deletions": 0,
        "changes": 67,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2FREADME.md",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2FREADME.md",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2FREADME.md?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,67 @@\n+To run this example you need to install `webpack-dev-server` and run `webpack serve`.\n+\n+# example.js\n+\n+```javascript\n+const libraries = {\n+\treact: () => import(\"react\"),\n+\tacorn: () => import(\"acorn\"),\n+\t\"core-js\": () => import(\"core-js\"),\n+\tlodash: () => import(\"lodash\"),\n+\txxhashjs: () => import(\"xxhashjs\"),\n+\t\"all of them\": () => import(\"./all\")\n+};\n+\n+window.onload = () => {\n+\tdocument.body.style = \"font-size: 16pt;\";\n+\tconst pre = document.createElement(\"pre\");\n+\tpre.style = \"height: 200px; overflow-y: auto\";\n+\tpre.innerText =\n+\t\t\"Click on a button to load the library with import(). The first click triggers a lazy compilation of the module.\";\n+\tfor (const key of Object.keys(libraries)) {\n+\t\tconst button = document.createElement(\"button\");\n+\t\tconst loadFn = libraries[key];\n+\t\tbutton.innerText = key;\n+\t\tbutton.onclick = async () => {\n+\t\t\tpre.innerText = \"Loading \" + key + \"...\";\n+\t\t\tconst result = await loadFn();\n+\t\t\tpre.innerText = `${key} = {\\n  ${Object.keys(result).join(\",\\n  \")}\\n}`;\n+\t\t};\n+\t\tdocument.body.appendChild(button);\n+\t}\n+\tconst button = document.createElement(\"button\");\n+\tbutton.innerText = \"Load more...\";\n+\tbutton.onclick = async () => {\n+\t\tpre.innerText = \"Loading more...\";\n+\t\tawait import(\"./more\");\n+\t\tpre.innerText = \"More libraries available.\";\n+\t};\n+\tdocument.body.appendChild(button);\n+\tdocument.body.appendChild(pre);\n+};\n+```\n+\n+# webpack.config.js\n+\n+```javascript\n+const { HotModuleReplacementPlugin } = require(\"../../\");\n+\n+module.exports = {\n+\tmode: \"development\",\n+\tentry: {\n+\t\tmain: \"./example.js\"\n+\t},\n+\tcache: {\n+\t\ttype: \"filesystem\",\n+\t\tidleTimeout: 5000\n+\t},\n+\texperiments: {\n+\t\tlazyCompilation: true\n+\t},\n+\tdevServer: {\n+\t\thot: true,\n+\t\tpublicPath: \"/dist/\"\n+\t},\n+\tplugins: [new HotModuleReplacementPlugin()]\n+};\n+```"
      },
      {
        "sha": "ef9f85cd1a2262fcd943718e8fd42a8e42ddf031",
        "filename": "examples/lazy-compilation/all.js",
        "status": "added",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fall.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fall.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2Fall.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,8 @@\n+export * from \"react\";\n+export * from \"react-dom\";\n+export * from \"acorn\";\n+export * from \"core-js\";\n+export * from \"date-fns\";\n+export * from \"lodash\";\n+export * from \"lodash-es\";\n+export * from \"xxhashjs\";"
      },
      {
        "sha": "41c29c9d16954a708e995a9e37806802f099f8e9",
        "filename": "examples/lazy-compilation/build.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fbuild.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fbuild.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2Fbuild.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1 @@\n+require(\"../build-common\");\n\\ No newline at end of file"
      },
      {
        "sha": "f099af9fcd23ef0e426a8aab4e84d09dd2a9e652",
        "filename": "examples/lazy-compilation/example.js",
        "status": "added",
        "additions": 36,
        "deletions": 0,
        "changes": 36,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fexample.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fexample.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2Fexample.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,36 @@\n+const libraries = {\n+\treact: () => import(\"react\"),\n+\tacorn: () => import(\"acorn\"),\n+\t\"core-js\": () => import(\"core-js\"),\n+\tlodash: () => import(\"lodash\"),\n+\txxhashjs: () => import(\"xxhashjs\"),\n+\t\"all of them\": () => import(\"./all\")\n+};\n+\n+window.onload = () => {\n+\tdocument.body.style = \"font-size: 16pt;\";\n+\tconst pre = document.createElement(\"pre\");\n+\tpre.style = \"height: 200px; overflow-y: auto\";\n+\tpre.innerText =\n+\t\t\"Click on a button to load the library with import(). The first click triggers a lazy compilation of the module.\";\n+\tfor (const key of Object.keys(libraries)) {\n+\t\tconst button = document.createElement(\"button\");\n+\t\tconst loadFn = libraries[key];\n+\t\tbutton.innerText = key;\n+\t\tbutton.onclick = async () => {\n+\t\t\tpre.innerText = \"Loading \" + key + \"...\";\n+\t\t\tconst result = await loadFn();\n+\t\t\tpre.innerText = `${key} = {\\n  ${Object.keys(result).join(\",\\n  \")}\\n}`;\n+\t\t};\n+\t\tdocument.body.appendChild(button);\n+\t}\n+\tconst button = document.createElement(\"button\");\n+\tbutton.innerText = \"Load more...\";\n+\tbutton.onclick = async () => {\n+\t\tpre.innerText = \"Loading more...\";\n+\t\tawait import(\"./more\");\n+\t\tpre.innerText = \"More libraries available.\";\n+\t};\n+\tdocument.body.appendChild(button);\n+\tdocument.body.appendChild(pre);\n+};"
      },
      {
        "sha": "e0c22f80c528314105362438bb3ae91e37948bf2",
        "filename": "examples/lazy-compilation/index.html",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Findex.html",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Findex.html",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2Findex.html?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,6 @@\n+<!DOCTYPE html>\n+<html>\n+\t<head>\n+\t\t<script src=\"dist/main.js\"></script>\n+\t</head>\n+</html>"
      },
      {
        "sha": "94df8de26116bc6f01530a6c88fbc607d578fc8f",
        "filename": "examples/lazy-compilation/more.js",
        "status": "added",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fmore.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fmore.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2Fmore.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,21 @@\n+const libraries = {\n+\t\"react-dom\": () => import(\"react-dom\"),\n+\t\"date-fns\": () => import(\"date-fns\"),\n+\txxhashjs: () => import(\"xxhashjs\"),\n+\t\"lodash-es\": () => import(\"lodash-es\")\n+};\n+\n+const pre = document.querySelector(\"pre\");\n+for (const key of Object.keys(libraries)) {\n+\tconst button = document.createElement(\"button\");\n+\tconst loadFn = libraries[key];\n+\tbutton.innerText = key;\n+\tbutton.onclick = async () => {\n+\t\tpre.innerText = \"Loading \" + key + \"...\";\n+\t\tconst result = await loadFn();\n+\t\tpre.innerText = `${key} = {\\n  ${Object.keys(result).join(\",\\n  \")}\\n}`;\n+\t};\n+\tdocument.body.appendChild(button);\n+}\n+\n+export {};"
      },
      {
        "sha": "a06fb9c27cc056f94acebe16e43770cde9559614",
        "filename": "examples/lazy-compilation/template.md",
        "status": "added",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Ftemplate.md",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Ftemplate.md",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2Ftemplate.md?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,13 @@\n+To run this example you need to install `webpack-dev-server` and run `webpack serve`.\n+\n+# example.js\n+\n+```javascript\n+_{{example.js}}_\n+```\n+\n+# webpack.config.js\n+\n+```javascript\n+_{{webpack.config.js}}_\n+```"
      },
      {
        "sha": "23c949cf511652778e1a6995ca979bd04cd20e28",
        "filename": "examples/lazy-compilation/webpack.config.js",
        "status": "added",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/examples%2Flazy-compilation%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Flazy-compilation%2Fwebpack.config.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,22 @@\n+const { HotModuleReplacementPlugin } = require(\"../../\");\n+\n+module.exports = {\n+\tmode: \"development\",\n+\tentry: {\n+\t\tmain: \"./example.js\"\n+\t},\n+\tcache: {\n+\t\ttype: \"filesystem\",\n+\t\tidleTimeout: 5000\n+\t},\n+\texperiments: {\n+\t\tlazyCompilation: {\n+\t\t\tentries: false\n+\t\t}\n+\t},\n+\tdevServer: {\n+\t\thot: true,\n+\t\tpublicPath: \"/dist/\"\n+\t},\n+\tplugins: [new HotModuleReplacementPlugin()]\n+};"
      },
      {
        "sha": "5ec254db3120b78cb12f52956bacb78370f9ac15",
        "filename": "hot/lazy-compilation-node.js",
        "status": "added",
        "additions": 38,
        "deletions": 0,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/hot%2Flazy-compilation-node.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/hot%2Flazy-compilation-node.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/hot%2Flazy-compilation-node.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,38 @@\n+/* global __resourceQuery */\n+\n+\"use strict\";\n+\n+var urlBase = decodeURIComponent(__resourceQuery.slice(1));\n+exports.keepAlive = function (options) {\n+\tvar data = options.data;\n+\tvar onError = options.onError;\n+\tvar active = options.active;\n+\tvar module = options.module;\n+\tvar response;\n+\tvar request = require(\"http\").request(\n+\t\turlBase + data,\n+\t\t{\n+\t\t\tagent: false,\n+\t\t\theaders: { accept: \"text/event-stream\" }\n+\t\t},\n+\t\tfunction (res) {\n+\t\t\tresponse = res;\n+\t\t\tresponse.on(\"error\", errorHandler);\n+\t\t\tif (!active && !module.hot) {\n+\t\t\t\tconsole.log(\n+\t\t\t\t\t\"Hot Module Replacement is not enabled. Waiting for process restart...\"\n+\t\t\t\t);\n+\t\t\t}\n+\t\t}\n+\t);\n+\tfunction errorHandler(err) {\n+\t\terr.message =\n+\t\t\t\"Problem communicating active modules to the server: \" + err.message;\n+\t\tonError(err);\n+\t}\n+\trequest.on(\"error\", errorHandler);\n+\trequest.end();\n+\treturn function () {\n+\t\tresponse.destroy();\n+\t};\n+};"
      },
      {
        "sha": "62d955c5a22bf9c1208b20c331dabcf6e3d0b798",
        "filename": "hot/lazy-compilation-web.js",
        "status": "added",
        "additions": 74,
        "deletions": 0,
        "changes": 74,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/hot%2Flazy-compilation-web.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/hot%2Flazy-compilation-web.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/hot%2Flazy-compilation-web.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,74 @@\n+/* global __resourceQuery */\n+\n+\"use strict\";\n+\n+if (typeof EventSource !== \"function\") {\n+\tthrow new Error(\n+\t\t\"Environment doesn't support lazy compilation (requires EventSource)\"\n+\t);\n+}\n+\n+var urlBase = decodeURIComponent(__resourceQuery.slice(1));\n+var activeEventSource;\n+var activeKeys = new Map();\n+var errorHandlers = new Set();\n+\n+var updateEventSource = function updateEventSource() {\n+\tif (activeEventSource) activeEventSource.close();\n+\tif (activeKeys.size) {\n+\t\tactiveEventSource = new EventSource(\n+\t\t\turlBase + Array.from(activeKeys.keys()).join(\"@\")\n+\t\t);\n+\t\tactiveEventSource.onerror = function (event) {\n+\t\t\terrorHandlers.forEach(function (onError) {\n+\t\t\t\tonError(\n+\t\t\t\t\tnew Error(\n+\t\t\t\t\t\t\"Problem communicating active modules to the server: \" +\n+\t\t\t\t\t\t\tevent.message +\n+\t\t\t\t\t\t\t\" \" +\n+\t\t\t\t\t\t\tevent.filename +\n+\t\t\t\t\t\t\t\":\" +\n+\t\t\t\t\t\t\tevent.lineno +\n+\t\t\t\t\t\t\t\":\" +\n+\t\t\t\t\t\t\tevent.colno +\n+\t\t\t\t\t\t\t\" \" +\n+\t\t\t\t\t\t\tevent.error\n+\t\t\t\t\t)\n+\t\t\t\t);\n+\t\t\t});\n+\t\t};\n+\t} else {\n+\t\tactiveEventSource = undefined;\n+\t}\n+};\n+\n+exports.keepAlive = function (options) {\n+\tvar data = options.data;\n+\tvar onError = options.onError;\n+\tvar active = options.active;\n+\tvar module = options.module;\n+\terrorHandlers.add(onError);\n+\tvar value = activeKeys.get(data) || 0;\n+\tactiveKeys.set(data, value + 1);\n+\tif (value === 0) {\n+\t\tupdateEventSource();\n+\t}\n+\tif (!active && !module.hot) {\n+\t\tconsole.log(\n+\t\t\t\"Hot Module Replacement is not enabled. Waiting for process restart...\"\n+\t\t);\n+\t}\n+\n+\treturn function () {\n+\t\terrorHandlers.delete(onError);\n+\t\tsetTimeout(function () {\n+\t\t\tvar value = activeKeys.get(data);\n+\t\t\tif (value === 1) {\n+\t\t\t\tactiveKeys.delete(data);\n+\t\t\t\tupdateEventSource();\n+\t\t\t} else {\n+\t\t\t\tactiveKeys.set(data, value - 1);\n+\t\t\t}\n+\t\t}, 1000);\n+\t};\n+};"
      },
      {
        "sha": "7df7c45d52ac110c16857c2b4d12e8f2ed1666e6",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -168,6 +168,8 @@ class Compiler {\n \t\t\tinvalid: new SyncHook([\"filename\", \"changeTime\"]),\n \t\t\t/** @type {SyncHook<[]>} */\n \t\t\twatchClose: new SyncHook([]),\n+\t\t\t/** @type {AsyncSeriesHook<[]>} */\n+\t\t\tshutdown: new AsyncSeriesHook([]),\n \n \t\t\t/** @type {SyncBailHook<[string, string, any[]], true>} */\n \t\t\tinfrastructureLog: new SyncBailHook([\"origin\", \"type\", \"args\"]),\n@@ -1075,7 +1077,10 @@ ${other}`);\n \t * @returns {void}\n \t */\n \tclose(callback) {\n-\t\tthis.cache.shutdown(callback);\n+\t\tthis.hooks.shutdown.callAsync(err => {\n+\t\t\tif (err) return callback(err);\n+\t\t\tthis.cache.shutdown(callback);\n+\t\t});\n \t}\n }\n "
      },
      {
        "sha": "c20821f29e61a14de3e225e8d5050ccaf5c22dd1",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -244,6 +244,27 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t}).apply(compiler);\n \t\t}\n \n+\t\tif (options.experiments.lazyCompilation) {\n+\t\t\tconst LazyCompilationPlugin = require(\"./hmr/LazyCompilationPlugin\");\n+\t\t\tnew LazyCompilationPlugin({\n+\t\t\t\tbackend:\n+\t\t\t\t\t(typeof options.experiments.lazyCompilation === \"object\" &&\n+\t\t\t\t\t\toptions.experiments.lazyCompilation.backend) ||\n+\t\t\t\t\trequire(\"./hmr/lazyCompilationBackend\"),\n+\t\t\t\tclient:\n+\t\t\t\t\t(typeof options.experiments.lazyCompilation === \"object\" &&\n+\t\t\t\t\t\toptions.experiments.lazyCompilation.client) ||\n+\t\t\t\t\trequire.resolve(\n+\t\t\t\t\t\t`../hot/lazy-compilation-${\n+\t\t\t\t\t\t\toptions.externalsPresets.node ? \"node\" : \"web\"\n+\t\t\t\t\t\t}.js`\n+\t\t\t\t\t),\n+\t\t\t\tentries:\n+\t\t\t\t\ttypeof options.experiments.lazyCompilation !== \"object\" ||\n+\t\t\t\t\toptions.experiments.lazyCompilation.entries !== false\n+\t\t\t}).apply(compiler);\n+\t\t}\n+\n \t\tnew EntryOptionPlugin().apply(compiler);\n \t\tcompiler.hooks.entryOption.call(options.context, options.entry);\n "
      },
      {
        "sha": "d41fd97fa84660200875beb8bacf76019167fee6",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -11,7 +11,10 @@ const { formatSize } = require(\"../SizeFormatHelpers\");\n const LazySet = require(\"../util/LazySet\");\n const makeSerializable = require(\"../util/makeSerializable\");\n const memoize = require(\"../util/memoize\");\n-const { createFileSerializer } = require(\"../util/serialization\");\n+const {\n+\tcreateFileSerializer,\n+\tNOT_SERIALIZABLE\n+} = require(\"../util/serialization\");\n \n /** @typedef {import(\"../../declarations/WebpackOptions\").SnapshotOptions} SnapshotOptions */\n /** @typedef {import(\"../Cache\").Etag} Etag */\n@@ -525,6 +528,7 @@ class PackContentItems {\n \t\t\t\t\twrite(value);\n \t\t\t\t} catch (e) {\n \t\t\t\t\trollback(s);\n+\t\t\t\t\tif (e === NOT_SERIALIZABLE) continue;\n \t\t\t\t\tlogger.warn(\n \t\t\t\t\t\t`Skipped not serializable cache item '${key}': ${e.message}`\n \t\t\t\t\t);"
      },
      {
        "sha": "056056cea3c51d3291da7b586517d8448d84d82b",
        "filename": "lib/hmr/LazyCompilationPlugin.js",
        "status": "added",
        "additions": 348,
        "deletions": 0,
        "changes": 348,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fhmr%2FLazyCompilationPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fhmr%2FLazyCompilationPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fhmr%2FLazyCompilationPlugin.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,348 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const { RawSource } = require(\"webpack-sources\");\n+const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n+const Dependency = require(\"../Dependency\");\n+const Module = require(\"../Module\");\n+const ModuleFactory = require(\"../ModuleFactory\");\n+const RuntimeGlobals = require(\"../RuntimeGlobals\");\n+const Template = require(\"../Template\");\n+const CommonJsRequireDependency = require(\"../dependencies/CommonJsRequireDependency\");\n+const { registerNotSerializable } = require(\"../util/serialization\");\n+\n+/** @typedef {import(\"../../declarations/WebpackOptions\")} WebpackOptions */\n+/** @typedef {import(\"../Compilation\")} Compilation */\n+/** @typedef {import(\"../Compiler\")} Compiler */\n+/** @typedef {import(\"../Dependency\").UpdateHashContext} UpdateHashContext */\n+/** @typedef {import(\"../Module\").BuildMeta} BuildMeta */\n+/** @typedef {import(\"../Module\").CodeGenerationContext} CodeGenerationContext */\n+/** @typedef {import(\"../Module\").CodeGenerationResult} CodeGenerationResult */\n+/** @typedef {import(\"../Module\").LibIdentOptions} LibIdentOptions */\n+/** @typedef {import(\"../Module\").NeedBuildContext} NeedBuildContext */\n+/** @typedef {import(\"../ModuleFactory\").ModuleFactoryCreateData} ModuleFactoryCreateData */\n+/** @typedef {import(\"../ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n+/** @typedef {import(\"../RequestShortener\")} RequestShortener */\n+/** @typedef {import(\"../ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\n+/** @typedef {import(\"../WebpackError\")} WebpackError */\n+/** @typedef {import(\"../util/Hash\")} Hash */\n+/** @typedef {import(\"../util/fs\").InputFileSystem} InputFileSystem */\n+\n+const TYPES = new Set([\"javascript\"]);\n+\n+class LazyCompilationDependency extends Dependency {\n+\tconstructor(originalModule) {\n+\t\tsuper();\n+\t\tthis.originalModule = originalModule;\n+\t}\n+\n+\tget category() {\n+\t\treturn \"esm\";\n+\t}\n+\n+\tget type() {\n+\t\treturn \"lazy import()\";\n+\t}\n+\n+\t/**\n+\t * @returns {string | null} an identifier to merge equal requests\n+\t */\n+\tgetResourceIdentifier() {\n+\t\treturn this.originalModule.identifier();\n+\t}\n+}\n+\n+registerNotSerializable(LazyCompilationDependency);\n+\n+class LazyCompilationProxyModule extends Module {\n+\tconstructor(context, originalModule, request, client, data, active) {\n+\t\tsuper(\"lazy-compilation-proxy\", context, originalModule.layer);\n+\t\tthis.originalModule = originalModule;\n+\t\tthis.request = request;\n+\t\tthis.client = client;\n+\t\tthis.data = data;\n+\t\tthis.active = active;\n+\t}\n+\n+\t/**\n+\t * @returns {string} a unique identifier of the module\n+\t */\n+\tidentifier() {\n+\t\treturn `lazy-compilation-proxy|${this.originalModule.identifier()}`;\n+\t}\n+\n+\t/**\n+\t * @param {RequestShortener} requestShortener the request shortener\n+\t * @returns {string} a user readable identifier of the module\n+\t */\n+\treadableIdentifier(requestShortener) {\n+\t\treturn `lazy-compilation-proxy ${this.originalModule.readableIdentifier(\n+\t\t\trequestShortener\n+\t\t)}`;\n+\t}\n+\n+\t/**\n+\t * Assuming this module is in the cache. Update the (cached) module with\n+\t * the fresh module from the factory. Usually updates internal references\n+\t * and properties.\n+\t * @param {Module} module fresh module\n+\t * @returns {void}\n+\t */\n+\tupdateCacheModule(module) {\n+\t\tsuper.updateCacheModule(module);\n+\t\tconst m = /** @type {LazyCompilationProxyModule} */ (module);\n+\t\tthis.active = m.active;\n+\t}\n+\n+\t/**\n+\t * @param {LibIdentOptions} options options\n+\t * @returns {string | null} an identifier for library inclusion\n+\t */\n+\tlibIdent(options) {\n+\t\treturn `${this.originalModule.libIdent(options)}!lazy-compilation-proxy`;\n+\t}\n+\n+\t/**\n+\t * @param {NeedBuildContext} context context info\n+\t * @param {function(WebpackError=, boolean=): void} callback callback function, returns true, if the module needs a rebuild\n+\t * @returns {void}\n+\t */\n+\tneedBuild(context, callback) {\n+\t\tcallback(null, !this.buildInfo || this.buildInfo.active !== this.active);\n+\t}\n+\n+\t/**\n+\t * @param {WebpackOptions} options webpack options\n+\t * @param {Compilation} compilation the compilation\n+\t * @param {ResolverWithOptions} resolver the resolver\n+\t * @param {InputFileSystem} fs the file system\n+\t * @param {function(WebpackError=): void} callback callback function\n+\t * @returns {void}\n+\t */\n+\tbuild(options, compilation, resolver, fs, callback) {\n+\t\tthis.buildInfo = {\n+\t\t\tactive: this.active\n+\t\t};\n+\t\t/** @type {BuildMeta} */\n+\t\tthis.buildMeta = {};\n+\t\tthis.clearDependenciesAndBlocks();\n+\t\tconst dep = new CommonJsRequireDependency(this.client);\n+\t\tthis.addDependency(dep);\n+\t\tif (this.active) {\n+\t\t\tconst dep = new LazyCompilationDependency(this.originalModule);\n+\t\t\tconst block = new AsyncDependenciesBlock({});\n+\t\t\tblock.addDependency(dep);\n+\t\t\tthis.addBlock(block);\n+\t\t}\n+\t\tcallback();\n+\t}\n+\n+\t/**\n+\t * @returns {Set<string>} types available (do not mutate)\n+\t */\n+\tgetSourceTypes() {\n+\t\treturn TYPES;\n+\t}\n+\n+\t/**\n+\t * @param {string=} type the source type for which the size should be estimated\n+\t * @returns {number} the estimated size of the module (must be non-zero)\n+\t */\n+\tsize(type) {\n+\t\treturn 200;\n+\t}\n+\n+\t/**\n+\t * @param {CodeGenerationContext} context context for code generation\n+\t * @returns {CodeGenerationResult} result\n+\t */\n+\tcodeGeneration({ runtimeTemplate, chunkGraph, moduleGraph }) {\n+\t\tconst sources = new Map();\n+\t\tconst runtimeRequirements = new Set();\n+\t\truntimeRequirements.add(RuntimeGlobals.module);\n+\t\tconst clientDep = /** @type {CommonJsRequireDependency} */ (this\n+\t\t\t.dependencies[0]);\n+\t\tconst clientModule = moduleGraph.getModule(clientDep);\n+\t\tconst block = this.blocks[0];\n+\t\tconst client = Template.asString([\n+\t\t\t`var client = ${runtimeTemplate.moduleExports({\n+\t\t\t\tmodule: clientModule,\n+\t\t\t\tchunkGraph,\n+\t\t\t\trequest: clientDep.userRequest,\n+\t\t\t\truntimeRequirements\n+\t\t\t})}`,\n+\t\t\t`var data = ${JSON.stringify(this.data)};`\n+\t\t]);\n+\t\tconst keepActive = Template.asString([\n+\t\t\t`var dispose = client.keepAlive({ data, active: ${JSON.stringify(\n+\t\t\t\t!!block\n+\t\t\t)}, module, onError });`\n+\t\t]);\n+\t\tlet source;\n+\t\tif (block) {\n+\t\t\tconst dep = block.dependencies[0];\n+\t\t\tconst module = moduleGraph.getModule(dep);\n+\t\t\tsource = Template.asString([\n+\t\t\t\tclient,\n+\t\t\t\t`module.exports = ${runtimeTemplate.moduleNamespacePromise({\n+\t\t\t\t\tchunkGraph,\n+\t\t\t\t\tblock,\n+\t\t\t\t\tmodule,\n+\t\t\t\t\trequest: this.request,\n+\t\t\t\t\tstrict: false, // TODO this should be inherited from the original module\n+\t\t\t\t\tmessage: \"import()\",\n+\t\t\t\t\truntimeRequirements\n+\t\t\t\t})};`,\n+\t\t\t\t\"if (module.hot) {\",\n+\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\"module.hot.accept();\",\n+\t\t\t\t\t`module.hot.accept(${JSON.stringify(\n+\t\t\t\t\t\tchunkGraph.getModuleId(module)\n+\t\t\t\t\t)}, function() { module.hot.invalidate(); });`,\n+\t\t\t\t\t\"module.hot.dispose(function(data) { delete data.resolveSelf; dispose(data); });\",\n+\t\t\t\t\t\"if (module.hot.data && module.hot.data.resolveSelf) module.hot.data.resolveSelf(module.exports);\"\n+\t\t\t\t]),\n+\t\t\t\t\"}\",\n+\t\t\t\t\"function onError() { /* ignore */ }\",\n+\t\t\t\tkeepActive\n+\t\t\t]);\n+\t\t} else {\n+\t\t\tsource = Template.asString([\n+\t\t\t\tclient,\n+\t\t\t\t\"var resolveSelf, onError;\",\n+\t\t\t\t`module.exports = new Promise(function(resolve, reject) { resolveSelf = resolve; onError = reject; });`,\n+\t\t\t\t\"if (module.hot) {\",\n+\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\"module.hot.accept();\",\n+\t\t\t\t\t\"if (module.hot.data && module.hot.data.resolveSelf) module.hot.data.resolveSelf(module.exports);\",\n+\t\t\t\t\t\"module.hot.dispose(function(data) { data.resolveSelf = resolveSelf; dispose(data); });\"\n+\t\t\t\t]),\n+\t\t\t\t\"}\",\n+\t\t\t\tkeepActive\n+\t\t\t]);\n+\t\t}\n+\t\tsources.set(\"javascript\", new RawSource(source));\n+\t\treturn {\n+\t\t\tsources,\n+\t\t\truntimeRequirements\n+\t\t};\n+\t}\n+\n+\t/**\n+\t * @param {Hash} hash the hash used to track dependencies\n+\t * @param {UpdateHashContext} context context\n+\t * @returns {void}\n+\t */\n+\tupdateHash(hash, context) {\n+\t\tsuper.updateHash(hash, context);\n+\t\thash.update(this.active ? \"active\" : \"\");\n+\t\thash.update(JSON.stringify(this.data));\n+\t}\n+}\n+\n+registerNotSerializable(LazyCompilationProxyModule);\n+\n+class LazyCompilationDependencyFactory extends ModuleFactory {\n+\tconstructor(factory) {\n+\t\tsuper();\n+\t\tthis._factory = factory;\n+\t}\n+\n+\t/**\n+\t * @param {ModuleFactoryCreateData} data data object\n+\t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n+\t * @returns {void}\n+\t */\n+\tcreate(data, callback) {\n+\t\tconst dependency = /** @type {LazyCompilationDependency} */ (data\n+\t\t\t.dependencies[0]);\n+\t\tcallback(null, {\n+\t\t\tmodule: dependency.originalModule\n+\t\t});\n+\t}\n+}\n+\n+class LazyCompilationPlugin {\n+\t/**\n+\t * @param {Object} options options\n+\t * @param {(function(Compiler, string, function(Error?, any?): void): void) | function(Compiler, string): Promise<any>} options.backend the backend\n+\t * @param {string} options.client the client reference\n+\t * @param {boolean} options.entries true, when entries are lazy compiled\n+\t */\n+\tconstructor({ backend, client, entries }) {\n+\t\tthis.backend = backend;\n+\t\tthis.client = client;\n+\t\tthis.entries = entries;\n+\t}\n+\t/**\n+\t * Apply the plugin\n+\t * @param {Compiler} compiler the compiler instance\n+\t * @returns {void}\n+\t */\n+\tapply(compiler) {\n+\t\tlet backend;\n+\t\tcompiler.hooks.beforeCompile.tapAsync(\n+\t\t\t\"LazyCompilationPlugin\",\n+\t\t\t(params, callback) => {\n+\t\t\t\tif (backend !== undefined) return callback();\n+\t\t\t\tconst promise = this.backend(compiler, this.client, (err, result) => {\n+\t\t\t\t\tif (err) return callback(err);\n+\t\t\t\t\tbackend = result;\n+\t\t\t\t\tcallback();\n+\t\t\t\t});\n+\t\t\t\tif (promise && promise.then) {\n+\t\t\t\t\tpromise.then(b => {\n+\t\t\t\t\t\tbackend = b;\n+\t\t\t\t\t\tcallback();\n+\t\t\t\t\t}, callback);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t);\n+\t\tcompiler.hooks.thisCompilation.tap(\n+\t\t\t\"LazyCompilationPlugin\",\n+\t\t\t(compilation, { normalModuleFactory }) => {\n+\t\t\t\tnormalModuleFactory.hooks.module.tap(\n+\t\t\t\t\t\"LazyCompilationPlugin\",\n+\t\t\t\t\t(originalModule, createData, resolveData) => {\n+\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\tresolveData.dependencies.every(\n+\t\t\t\t\t\t\t\tdep =>\n+\t\t\t\t\t\t\t\t\tdep.type === \"import()\" ||\n+\t\t\t\t\t\t\t\t\t(this.entries && dep.type === \"entry\")\n+\t\t\t\t\t\t\t) &&\n+\t\t\t\t\t\t\t!/webpack[/\\\\]hot[/\\\\]|webpack-dev-server[/\\\\]client/.test(\n+\t\t\t\t\t\t\t\tresolveData.request\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\tconst moduleInfo = backend.module(originalModule);\n+\t\t\t\t\t\t\tif (!moduleInfo) return;\n+\t\t\t\t\t\t\tconst { client, data, active } = moduleInfo;\n+\n+\t\t\t\t\t\t\treturn new LazyCompilationProxyModule(\n+\t\t\t\t\t\t\t\tcompiler.context,\n+\t\t\t\t\t\t\t\toriginalModule,\n+\t\t\t\t\t\t\t\tresolveData.request,\n+\t\t\t\t\t\t\t\tclient,\n+\t\t\t\t\t\t\t\tdata,\n+\t\t\t\t\t\t\t\tactive\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t);\n+\t\t\t\tcompilation.dependencyFactories.set(\n+\t\t\t\t\tLazyCompilationDependency,\n+\t\t\t\t\tnew LazyCompilationDependencyFactory()\n+\t\t\t\t);\n+\t\t\t}\n+\t\t);\n+\t\tcompiler.hooks.shutdown.tapAsync(\"LazyCompilationPlugin\", callback => {\n+\t\t\tbackend.dispose(callback);\n+\t\t});\n+\t}\n+}\n+\n+module.exports = LazyCompilationPlugin;"
      },
      {
        "sha": "1c0d4422f0c15ce4944eaa0a26202b0a0433d29e",
        "filename": "lib/hmr/lazyCompilationBackend.js",
        "status": "added",
        "additions": 86,
        "deletions": 0,
        "changes": 86,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fhmr%2FlazyCompilationBackend.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fhmr%2FlazyCompilationBackend.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fhmr%2FlazyCompilationBackend.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,86 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const http = require(\"http\");\n+\n+/** @typedef {import(\"../Compiler\")} Compiler */\n+\n+/**\n+ * @param {Compiler} compiler compiler\n+ * @param {string} client client reference\n+ * @param {function(Error?, any?): void} callback callback\n+ * @returns {void}\n+ */\n+module.exports = (compiler, client, callback) => {\n+\tconst logger = compiler.getInfrastructureLogger(\"LazyCompilationBackend\");\n+\tconst activeModules = new Map();\n+\tconst prefix = \"/lazy-compilation-using-\";\n+\tconst server = http.createServer((req, res) => {\n+\t\tconst keys = req.url.slice(prefix.length).split(\"@\");\n+\t\treq.socket.on(\"close\", () => {\n+\t\t\tsetTimeout(() => {\n+\t\t\t\tfor (const key of keys) {\n+\t\t\t\t\tconst oldValue = activeModules.get(key) || 0;\n+\t\t\t\t\tactiveModules.set(key, oldValue - 1);\n+\t\t\t\t\tif (oldValue === 1) {\n+\t\t\t\t\t\tlogger.log(\n+\t\t\t\t\t\t\t`${key} is no longer in use. Next compilation will skip this module.`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}, 120000);\n+\t\t});\n+\t\treq.socket.setNoDelay(true);\n+\t\tres.writeHead(200, {\n+\t\t\t\"content-type\": \"text/event-stream\",\n+\t\t\t\"Access-Control-Allow-Origin\": \"*\"\n+\t\t});\n+\t\tres.write(\"\\n\");\n+\t\tlet moduleActivated = false;\n+\t\tfor (const key of keys) {\n+\t\t\tconst oldValue = activeModules.get(key) || 0;\n+\t\t\tactiveModules.set(key, oldValue + 1);\n+\t\t\tif (oldValue === 0) {\n+\t\t\t\tlogger.log(`${key} is now in use and will be compiled.`);\n+\t\t\t\tmoduleActivated = true;\n+\t\t\t}\n+\t\t}\n+\t\tif (moduleActivated && compiler.watching) compiler.watching.invalidate();\n+\t});\n+\tserver.listen(err => {\n+\t\tif (err) return callback(err);\n+\t\tconst addr = server.address();\n+\t\tif (typeof addr === \"string\") throw new Error(\"addr must not be a string\");\n+\t\tconst urlBase =\n+\t\t\taddr.address === \"::\" || addr.address === \"0.0.0.0\"\n+\t\t\t\t? `http://localhost:${addr.port}`\n+\t\t\t\t: addr.family === \"IPv6\"\n+\t\t\t\t? `http://[${addr.address}]:${addr.port}`\n+\t\t\t\t: `http://${addr.address}:${addr.port}`;\n+\t\tlogger.log(\n+\t\t\t`Server-Sent-Events server for lazy compilation open at ${urlBase}.`\n+\t\t);\n+\t\tcallback(null, {\n+\t\t\tdispose(callback) {\n+\t\t\t\tserver.close(callback);\n+\t\t\t},\n+\t\t\tmodule(originalModule) {\n+\t\t\t\tconst key = `${encodeURIComponent(\n+\t\t\t\t\toriginalModule.identifier().replace(/\\\\/g, \"/\").replace(/@/g, \"_\")\n+\t\t\t\t).replace(/%(2F|3A|24|26|2B|2C|3B|3D|3A)/g, decodeURIComponent)}`;\n+\t\t\t\tconst active = activeModules.get(key) > 0;\n+\t\t\t\treturn {\n+\t\t\t\t\tclient: `webpack/hot/lazy-compilation-${\n+\t\t\t\t\t\tcompiler.options.externalsPresets.node ? \"node\" : \"web\"\n+\t\t\t\t\t}.js?${encodeURIComponent(urlBase + prefix)}`,\n+\t\t\t\t\tdata: key,\n+\t\t\t\t\tactive\n+\t\t\t\t};\n+\t\t\t}\n+\t\t});\n+\t});\n+};"
      },
      {
        "sha": "ab01ca0f3d0948bb508b5ba234cdd3d59b0c2478",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -367,11 +367,13 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\ttry {\n \t\t\t\t\tprocess(value);\n \t\t\t\t} catch (e) {\n-\t\t\t\t\tif (hasDebugInfoAttached === undefined)\n-\t\t\t\t\t\thasDebugInfoAttached = new WeakSet();\n-\t\t\t\t\tif (!hasDebugInfoAttached.has(e)) {\n-\t\t\t\t\t\te.message += `\\nwhile serializing ${stackToString(value)}`;\n-\t\t\t\t\t\thasDebugInfoAttached.add(e);\n+\t\t\t\t\tif (e !== NOT_SERIALIZABLE) {\n+\t\t\t\t\t\tif (hasDebugInfoAttached === undefined)\n+\t\t\t\t\t\t\thasDebugInfoAttached = new WeakSet();\n+\t\t\t\t\t\tif (!hasDebugInfoAttached.has(e)) {\n+\t\t\t\t\t\t\te.message += `\\nwhile serializing ${stackToString(value)}`;\n+\t\t\t\t\t\t\thasDebugInfoAttached.add(e);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tthrow e;\n \t\t\t\t}"
      },
      {
        "sha": "776c515045cc0dc5d501193989fe7997cd65b236",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -581,6 +581,33 @@\n           \"description\": \"Enable module and chunk layers.\",\n           \"type\": \"boolean\"\n         },\n+        \"lazyCompilation\": {\n+          \"description\": \"Compile entrypoints and import()s only when they are accessed.\",\n+          \"anyOf\": [\n+            {\n+              \"type\": \"boolean\"\n+            },\n+            {\n+              \"type\": \"object\",\n+              \"additionalProperties\": false,\n+              \"properties\": {\n+                \"backend\": {\n+                  \"description\": \"A custom backend.\",\n+                  \"instanceof\": \"Function\",\n+                  \"tsType\": \"(((compiler: import('../lib/Compiler'), client: string, callback: (err?: Error, api?: any) => void) => void) | ((compiler: import('../lib/Compiler'), client: string) => Promise<any>))\"\n+                },\n+                \"client\": {\n+                  \"description\": \"A custom client.\",\n+                  \"type\": \"string\"\n+                },\n+                \"entries\": {\n+                  \"description\": \"Enable/disable lazy compilation for entries.\",\n+                  \"type\": \"boolean\"\n+                }\n+              }\n+            }\n+          ]\n+        },\n         \"outputModule\": {\n           \"description\": \"Allow output javascript files as module source type.\",\n           \"type\": \"boolean\""
      },
      {
        "sha": "e3cc4f3efcc22db411c495e4863728480dbf7097",
        "filename": "test/HotTestCases.template.js",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FHotTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FHotTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FHotTestCases.template.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -36,6 +36,11 @@ const describeCases = config => {\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tdescribe(testName, () => {\n+\t\t\t\t\t\tlet compiler;\n+\t\t\t\t\t\tafterAll(callback => {\n+\t\t\t\t\t\t\tcompiler.close(callback);\n+\t\t\t\t\t\t});\n+\n \t\t\t\t\t\tit(\n \t\t\t\t\t\t\ttestName + \" should compile\",\n \t\t\t\t\t\t\tdone => {\n@@ -93,7 +98,7 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\tnew webpack.LoaderOptionsPlugin(fakeUpdateLoaderOptions)\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tif (!options.recordsPath) options.recordsPath = recordsPath;\n-\t\t\t\t\t\t\t\tconst compiler = webpack(options);\n+\t\t\t\t\t\t\t\tcompiler = webpack(options);\n \t\t\t\t\t\t\t\tcompiler.run((err, stats) => {\n \t\t\t\t\t\t\t\t\tif (err) return done(err);\n \t\t\t\t\t\t\t\t\tconst jsonStats = stats.toJson({\n@@ -192,6 +197,7 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\tWorker: require(\"./helpers/createFakeWorker\")({\n \t\t\t\t\t\t\t\t\t\t\toutputDirectory\n \t\t\t\t\t\t\t\t\t\t}),\n+\t\t\t\t\t\t\t\t\t\tEventSource: require(\"./helpers/EventSourceForNode\"),\n \t\t\t\t\t\t\t\t\t\tlocation: {\n \t\t\t\t\t\t\t\t\t\t\thref: \"https://test.cases/path/index.html\",\n \t\t\t\t\t\t\t\t\t\t\torigin: \"https://test.cases\",\n@@ -243,7 +249,7 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\t\t\treturn JSON.parse(fs.readFileSync(p, \"utf-8\"));\n \t\t\t\t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t\t\t\tconst fn = vm.runInThisContext(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, __filename, it, beforeEach, afterEach, expect, self, window, fetch, document, importScripts, Worker, NEXT, STATS) {\" +\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, __filename, it, beforeEach, afterEach, expect, self, window, fetch, document, importScripts, Worker, EventSource, NEXT, STATS) {\" +\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\"global.expect = expect;\" +\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t'function nsObj(m) { Object.defineProperty(m, Symbol.toStringTag, { value: \"Module\" }); return m; }' +\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tfs.readFileSync(p, \"utf-8\") +\n@@ -270,6 +276,7 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\t\t\t\twindow.document,\n \t\t\t\t\t\t\t\t\t\t\t\t\twindow.importScripts,\n \t\t\t\t\t\t\t\t\t\t\t\t\twindow.Worker,\n+\t\t\t\t\t\t\t\t\t\t\t\t\twindow.EventSource,\n \t\t\t\t\t\t\t\t\t\t\t\t\t_next,\n \t\t\t\t\t\t\t\t\t\t\t\t\tjsonStats\n \t\t\t\t\t\t\t\t\t\t\t\t);"
      },
      {
        "sha": "ff7f26c238372047c1f2b77bb3ea656ae3c96e66",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 39,
        "deletions": 0,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -367,6 +367,45 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"experiments-lazy-compilation\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Compile entrypoints and import()s only when they are accessed.\",\n+        \"multiple\": false,\n+        \"path\": \"experiments.lazyCompilation\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Compile entrypoints and import()s only when they are accessed.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"experiments-lazy-compilation-client\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"A custom client.\",\n+        \"multiple\": false,\n+        \"path\": \"experiments.lazyCompilation.client\",\n+        \"type\": \"string\",\n+      },\n+    ],\n+    \"description\": \"A custom client.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"string\",\n+  },\n+  \"experiments-lazy-compilation-entries\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Enable/disable lazy compilation for entries.\",\n+        \"multiple\": false,\n+        \"path\": \"experiments.lazyCompilation.entries\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Enable/disable lazy compilation for entries.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"experiments-output-module\": Object {\n     \"configs\": Array [\n       Object {"
      },
      {
        "sha": "3bf474757db69e7fb8ea1eef39dc5bc69697700f",
        "filename": "test/helpers/EventSourceForNode.js",
        "status": "added",
        "additions": 41,
        "deletions": 0,
        "changes": 41,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2Fhelpers%2FEventSourceForNode.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2Fhelpers%2FEventSourceForNode.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fhelpers%2FEventSourceForNode.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,41 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+module.exports = class EventSource {\n+\tconstructor(url) {\n+\t\tthis.response = undefined;\n+\t\tconst request = require(\"http\").request(\n+\t\t\turl,\n+\t\t\t{\n+\t\t\t\tagent: false,\n+\t\t\t\theaders: { accept: \"text/event-stream\" }\n+\t\t\t},\n+\t\t\tres => {\n+\t\t\t\tthis.response = res;\n+\t\t\t\tres.on(\"error\", err => {\n+\t\t\t\t\tif (this.onerror) this.onerror(err);\n+\t\t\t\t});\n+\t\t\t}\n+\t\t);\n+\t\trequest.on(\"error\", err => {\n+\t\t\tif (this.onerror) this.onerror({ message: err });\n+\t\t});\n+\t\trequest.end();\n+\t}\n+\n+\tclose() {\n+\t\tthis.response.destroy();\n+\t}\n+\n+\tset onopen(value) {\n+\t\tthrow new Error(\"not implemented\");\n+\t}\n+\n+\tset onmessage(value) {\n+\t\tthrow new Error(\"not implemented\");\n+\t}\n+};"
      },
      {
        "sha": "476d15cbc855978a1af622daea41830ebe489736",
        "filename": "test/hotCases/lazy-compilation/simple/index.js",
        "status": "added",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FhotCases%2Flazy-compilation%2Fsimple%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FhotCases%2Flazy-compilation%2Fsimple%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Flazy-compilation%2Fsimple%2Findex.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,18 @@\n+it(\"should compile to lazy imported module\", done => {\n+\tlet resolved;\n+\tconst promise = import(\"./module\").then(r => (resolved = r));\n+\texpect(resolved).toBe(undefined);\n+\tsetTimeout(() => {\n+\t\texpect(resolved).toBe(undefined);\n+\t\tNEXT(\n+\t\t\trequire(\"../../update\")(done, true, () => {\n+\t\t\t\tpromise.then(result => {\n+\t\t\t\t\texpect(result).toHaveProperty(\"default\", 42);\n+\t\t\t\t\tsetTimeout(() => {\n+\t\t\t\t\t\tdone();\n+\t\t\t\t\t}, 1000);\n+\t\t\t\t}, done);\n+\t\t\t})\n+\t\t);\n+\t}, 1000);\n+});"
      },
      {
        "sha": "7a4e8a723a40729b6e762041efee0922abd27bd9",
        "filename": "test/hotCases/lazy-compilation/simple/module.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FhotCases%2Flazy-compilation%2Fsimple%2Fmodule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FhotCases%2Flazy-compilation%2Fsimple%2Fmodule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Flazy-compilation%2Fsimple%2Fmodule.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1 @@\n+export default 42;"
      },
      {
        "sha": "aef58ef1aaf2bc0850bacf90b4abb4a04a37f3a7",
        "filename": "test/hotCases/lazy-compilation/simple/webpack.config.js",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FhotCases%2Flazy-compilation%2Fsimple%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/test%2FhotCases%2Flazy-compilation%2Fsimple%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Flazy-compilation%2Fsimple%2Fwebpack.config.js?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -0,0 +1,10 @@\n+\"use strict\";\n+\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\texperiments: {\n+\t\tlazyCompilation: {\n+\t\t\tentries: false\n+\t\t}\n+\t}\n+};"
      },
      {
        "sha": "8508e8623534cc381680ec6a0508bd6a2dbd9598",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/f4297099b7315b83e75ed3c3879277e18c1796ad/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/f4297099b7315b83e75ed3c3879277e18c1796ad/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=f4297099b7315b83e75ed3c3879277e18c1796ad",
        "patch": "@@ -1621,6 +1621,7 @@ declare class Compiler {\n \t\tfailed: SyncHook<[Error]>;\n \t\tinvalid: SyncHook<[null | string, number]>;\n \t\twatchClose: SyncHook<[]>;\n+\t\tshutdown: AsyncSeriesHook<[]>;\n \t\tinfrastructureLog: SyncBailHook<[string, string, any[]], true>;\n \t\tenvironment: SyncHook<[]>;\n \t\tafterEnvironment: SyncHook<[]>;\n@@ -2954,6 +2955,32 @@ declare interface Experiments {\n \t */\n \tlayers?: boolean;\n \n+\t/**\n+\t * Compile entrypoints and import()s only when they are accessed.\n+\t */\n+\tlazyCompilation?:\n+\t\t| boolean\n+\t\t| {\n+\t\t\t\t/**\n+\t\t\t\t * A custom backend.\n+\t\t\t\t */\n+\t\t\t\tbackend?:\n+\t\t\t\t\t| ((\n+\t\t\t\t\t\t\tcompiler: Compiler,\n+\t\t\t\t\t\t\tclient: string,\n+\t\t\t\t\t\t\tcallback: (err?: Error, api?: any) => void\n+\t\t\t\t\t  ) => void)\n+\t\t\t\t\t| ((compiler: Compiler, client: string) => Promise<any>);\n+\t\t\t\t/**\n+\t\t\t\t * A custom client.\n+\t\t\t\t */\n+\t\t\t\tclient?: string;\n+\t\t\t\t/**\n+\t\t\t\t * Enable/disable lazy compilation for entries.\n+\t\t\t\t */\n+\t\t\t\tentries?: boolean;\n+\t\t  };\n+\n \t/**\n \t * Allow output javascript files as module source type.\n \t */"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12121",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12121/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12121/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12121/events",
    "html_url": "https://github.com/webpack/webpack/pull/12121",
    "id": 757150344,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTMyNTc0NDUw",
    "number": 12121,
    "title": "improve rebuild performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-12-04T14:37:22Z",
    "updated_at": "2020-12-04T19:19:49Z",
    "closed_at": "2020-12-04T18:19:42Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12121",
      "html_url": "https://github.com/webpack/webpack/pull/12121",
      "diff_url": "https://github.com/webpack/webpack/pull/12121.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12121.patch",
      "merged_at": "2020-12-04T18:19:41Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n#12102\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nn/a\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n`output.pathinfo` supports `false | true | \"verbose\"` `true` is the default. `\"verbose\"` shows more info.\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12121/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12121/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "e2c5dab7e899341a11e58c2b5cf866c4b4a275c9",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -514,7 +514,7 @@ export type Path = string;\n /**\n  * Include comments with information about the modules.\n  */\n-export type Pathinfo = boolean;\n+export type Pathinfo = \"verbose\" | boolean;\n /**\n  * The `publicPath` specifies the public URL address of the output files when referenced in a browser.\n  */"
      },
      {
        "sha": "7008e8d264e1a8d048d5a270c64d33063703932f",
        "filename": "lib/ModuleFilenameHelpers.js",
        "status": "modified",
        "additions": 71,
        "deletions": 35,
        "changes": 106,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2FModuleFilenameHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2FModuleFilenameHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleFilenameHelpers.js?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const createHash = require(\"./util/createHash\");\n+const memorize = require(\"./util/memorize\");\n \n const ModuleFilenameHelpers = exports;\n \n@@ -34,21 +35,29 @@ ModuleFilenameHelpers.REGEXP_HASH = /\\[hash\\]/gi;\n ModuleFilenameHelpers.NAMESPACE = \"[namespace]\";\n ModuleFilenameHelpers.REGEXP_NAMESPACE = /\\[namespace\\]/gi;\n \n-const getAfter = (str, token) => {\n-\tconst idx = str.indexOf(token);\n-\treturn idx < 0 ? \"\" : str.substr(idx);\n+const getAfter = (strFn, token) => {\n+\treturn () => {\n+\t\tconst str = strFn();\n+\t\tconst idx = str.indexOf(token);\n+\t\treturn idx < 0 ? \"\" : str.substr(idx);\n+\t};\n };\n \n-const getBefore = (str, token) => {\n-\tconst idx = str.lastIndexOf(token);\n-\treturn idx < 0 ? \"\" : str.substr(0, idx);\n+const getBefore = (strFn, token) => {\n+\treturn () => {\n+\t\tconst str = strFn();\n+\t\tconst idx = str.lastIndexOf(token);\n+\t\treturn idx < 0 ? \"\" : str.substr(0, idx);\n+\t};\n };\n \n-const getHash = str => {\n-\tconst hash = createHash(\"md4\");\n-\thash.update(str);\n-\tconst digest = /** @type {string} */ (hash.digest(\"hex\"));\n-\treturn digest.substr(0, 4);\n+const getHash = strFn => {\n+\treturn () => {\n+\t\tconst hash = createHash(\"md4\");\n+\t\thash.update(strFn());\n+\t\tconst digest = /** @type {string} */ (hash.digest(\"hex\"));\n+\t\treturn digest.substr(0, 4);\n+\t};\n };\n \n const asRegExp = test => {\n@@ -58,6 +67,26 @@ const asRegExp = test => {\n \treturn test;\n };\n \n+const lazyObject = obj => {\n+\tconst newObj = {};\n+\tfor (const key of Object.keys(obj)) {\n+\t\tconst fn = obj[key];\n+\t\tObject.defineProperty(newObj, key, {\n+\t\t\tget: () => fn(),\n+\t\t\tset: v => {\n+\t\t\t\tObject.defineProperty(newObj, key, {\n+\t\t\t\t\tvalue: v,\n+\t\t\t\t\tenumerable: true,\n+\t\t\t\t\twritable: true\n+\t\t\t\t});\n+\t\t\t},\n+\t\t\tenumerable: true,\n+\t\t\tconfigurable: true\n+\t\t});\n+\t}\n+\treturn newObj;\n+};\n+\n const REGEXP = /\\[\\\\*([\\w-]+)\\\\*\\]/gi;\n \n ModuleFilenameHelpers.createFilename = (\n@@ -82,41 +111,48 @@ ModuleFilenameHelpers.createFilename = (\n \tlet shortIdentifier;\n \tif (module === undefined) module = \"\";\n \tif (typeof module === \"string\") {\n-\t\tshortIdentifier = requestShortener.shorten(module);\n+\t\tshortIdentifier = memorize(() => requestShortener.shorten(module));\n \t\tidentifier = shortIdentifier;\n-\t\tmoduleId = \"\";\n-\t\tabsoluteResourcePath = module.split(\"!\").pop();\n+\t\tmoduleId = () => \"\";\n+\t\tabsoluteResourcePath = () => module.split(\"!\").pop();\n \t\thash = getHash(identifier);\n \t} else {\n-\t\tshortIdentifier = module.readableIdentifier(requestShortener);\n-\t\tidentifier = requestShortener.shorten(module.identifier());\n-\t\tmoduleId = chunkGraph.getModuleId(module);\n-\t\tabsoluteResourcePath = module.identifier().split(\"!\").pop();\n+\t\tshortIdentifier = memorize(() =>\n+\t\t\tmodule.readableIdentifier(requestShortener)\n+\t\t);\n+\t\tidentifier = memorize(() => requestShortener.shorten(module.identifier()));\n+\t\tmoduleId = () => chunkGraph.getModuleId(module);\n+\t\tabsoluteResourcePath = () => module.identifier().split(\"!\").pop();\n \t\thash = getHash(identifier);\n \t}\n-\tconst resource = shortIdentifier.split(\"!\").pop();\n+\tconst resource = memorize(() => shortIdentifier().split(\"!\").pop());\n \n \tconst loaders = getBefore(shortIdentifier, \"!\");\n \tconst allLoaders = getBefore(identifier, \"!\");\n \tconst query = getAfter(resource, \"?\");\n-\tconst resourcePath = resource.substr(0, resource.length - query.length);\n+\tconst resourcePath = () => {\n+\t\tconst q = query().length;\n+\t\treturn q === 0 ? resource() : resource().slice(0, -q);\n+\t};\n \tif (typeof opts.moduleFilenameTemplate === \"function\") {\n-\t\treturn opts.moduleFilenameTemplate({\n-\t\t\tidentifier: identifier,\n-\t\t\tshortIdentifier: shortIdentifier,\n-\t\t\tresource: resource,\n-\t\t\tresourcePath: resourcePath,\n-\t\t\tabsoluteResourcePath: absoluteResourcePath,\n-\t\t\tallLoaders: allLoaders,\n-\t\t\tquery: query,\n-\t\t\tmoduleId: moduleId,\n-\t\t\thash: hash,\n-\t\t\tnamespace: opts.namespace\n-\t\t});\n+\t\treturn opts.moduleFilenameTemplate(\n+\t\t\tlazyObject({\n+\t\t\t\tidentifier: identifier,\n+\t\t\t\tshortIdentifier: shortIdentifier,\n+\t\t\t\tresource: resource,\n+\t\t\t\tresourcePath: memorize(resourcePath),\n+\t\t\t\tabsoluteResourcePath: memorize(absoluteResourcePath),\n+\t\t\t\tallLoaders: memorize(allLoaders),\n+\t\t\t\tquery: memorize(query),\n+\t\t\t\tmoduleId: memorize(moduleId),\n+\t\t\t\thash: memorize(hash),\n+\t\t\t\tnamespace: () => opts.namespace\n+\t\t\t})\n+\t\t);\n \t}\n \n \t// TODO webpack 6: consider removing alternatives without dashes\n-\t/** @type {Map<string, string>} */\n+\t/** @type {Map<string, function(): string>} */\n \tconst replacements = new Map([\n \t\t[\"identifier\", identifier],\n \t\t[\"short-identifier\", shortIdentifier],\n@@ -145,7 +181,7 @@ ModuleFilenameHelpers.createFilename = (\n \t\t[\"query\", query],\n \t\t[\"id\", moduleId],\n \t\t[\"hash\", hash],\n-\t\t[\"namespace\", opts.namespace]\n+\t\t[\"namespace\", () => opts.namespace]\n \t]);\n \n \t// TODO webpack 6: consider removing weird double placeholders\n@@ -159,7 +195,7 @@ ModuleFilenameHelpers.createFilename = (\n \t\t\tif (content.length + 2 === match.length) {\n \t\t\t\tconst replacement = replacements.get(content.toLowerCase());\n \t\t\t\tif (replacement !== undefined) {\n-\t\t\t\t\treturn replacement;\n+\t\t\t\t\treturn replacement();\n \t\t\t\t}\n \t\t\t} else if (match.startsWith(\"[\\\\\") && match.endsWith(\"\\\\]\")) {\n \t\t\t\treturn `[${match.slice(2, -2)}]`;"
      },
      {
        "sha": "b0a8f2575fee83d46be61579e06aca4e8fccf654",
        "filename": "lib/ModuleInfoHeaderPlugin.js",
        "status": "modified",
        "additions": 87,
        "deletions": 44,
        "changes": 131,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2FModuleInfoHeaderPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2FModuleInfoHeaderPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleInfoHeaderPlugin.js?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -5,14 +5,16 @@\n \n \"use strict\";\n \n-const { ConcatSource } = require(\"webpack-sources\");\n+const { ConcatSource, RawSource, CachedSource } = require(\"webpack-sources\");\n const { UsageState } = require(\"./ExportsInfo\");\n const Template = require(\"./Template\");\n const JavascriptModulesPlugin = require(\"./javascript/JavascriptModulesPlugin\");\n \n+/** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./Compiler\")} Compiler */\n /** @typedef {import(\"./ExportsInfo\")} ExportsInfo */\n /** @typedef {import(\"./ExportsInfo\").ExportInfo} ExportInfo */\n+/** @typedef {import(\"./Module\")} Module */\n /** @typedef {import(\"./ModuleGraph\")} ModuleGraph */\n /** @typedef {import(\"./ModuleTemplate\")} ModuleTemplate */\n /** @typedef {import(\"./RequestShortener\")} RequestShortener */\n@@ -137,12 +139,22 @@ const printExportsInfoToSource = (\n \t}\n };\n \n+/** @type {WeakMap<RequestShortener, WeakMap<Module, { header: RawSource, full: WeakMap<Source, CachedSource> }>>} */\n+const caches = new WeakMap();\n+\n class ModuleInfoHeaderPlugin {\n+\t/**\n+\t * @param {boolean=} verbose add more information like exports, runtime requirements and bailouts\n+\t */\n+\tconstructor(verbose = true) {\n+\t\tthis._verbose = verbose;\n+\t}\n \t/**\n \t * @param {Compiler} compiler the compiler\n \t * @returns {void}\n \t */\n \tapply(compiler) {\n+\t\tconst { _verbose: verbose } = this;\n \t\tcompiler.hooks.compilation.tap(\"ModuleInfoHeaderPlugin\", compilation => {\n \t\t\tconst hooks = JavascriptModulesPlugin.getCompilationHooks(compilation);\n \t\t\thooks.renderModulePackage.tap(\n@@ -153,54 +165,85 @@ class ModuleInfoHeaderPlugin {\n \t\t\t\t\t{ chunk, chunkGraph, moduleGraph, runtimeTemplate }\n \t\t\t\t) => {\n \t\t\t\t\tconst { requestShortener } = runtimeTemplate;\n-\t\t\t\t\tconst source = new ConcatSource();\n-\t\t\t\t\tconst req = module.readableIdentifier(requestShortener);\n-\t\t\t\t\tconst reqStr = req.replace(/\\*\\//g, \"*_/\");\n-\t\t\t\t\tconst reqStrStar = \"*\".repeat(reqStr.length);\n-\t\t\t\t\tsource.add(\"/*!****\" + reqStrStar + \"****!*\\\\\\n\");\n-\t\t\t\t\tsource.add(\"  !*** \" + reqStr + \" ***!\\n\");\n-\t\t\t\t\tsource.add(\"  \\\\****\" + reqStrStar + \"****/\\n\");\n-\t\t\t\t\tconst exportsType = module.buildMeta.exportsType;\n-\t\t\t\t\tsource.add(\n-\t\t\t\t\t\tTemplate.toComment(\n-\t\t\t\t\t\t\texportsType\n-\t\t\t\t\t\t\t\t? `${exportsType} exports`\n-\t\t\t\t\t\t\t\t: \"unknown exports (runtime-defined)\"\n-\t\t\t\t\t\t) + \"\\n\"\n-\t\t\t\t\t);\n-\t\t\t\t\tif (exportsType) {\n-\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n-\t\t\t\t\t\tprintExportsInfoToSource(\n-\t\t\t\t\t\t\tsource,\n-\t\t\t\t\t\t\t\"\",\n-\t\t\t\t\t\t\texportsInfo,\n-\t\t\t\t\t\t\tmoduleGraph,\n-\t\t\t\t\t\t\trequestShortener\n+\t\t\t\t\tlet cacheEntry;\n+\t\t\t\t\tlet cache = caches.get(requestShortener);\n+\t\t\t\t\tif (cache === undefined) {\n+\t\t\t\t\t\tcaches.set(requestShortener, (cache = new WeakMap()));\n+\t\t\t\t\t\tcache.set(\n+\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t(cacheEntry = { header: undefined, full: new WeakMap() })\n \t\t\t\t\t\t);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tcacheEntry = cache.get(module);\n+\t\t\t\t\t\tif (cacheEntry === undefined) {\n+\t\t\t\t\t\t\tcache.set(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\t(cacheEntry = { header: undefined, full: new WeakMap() })\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t} else if (!verbose) {\n+\t\t\t\t\t\t\tconst cachedSource = cacheEntry.full.get(moduleSource);\n+\t\t\t\t\t\t\tif (cachedSource !== undefined) return cachedSource;\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\tsource.add(\n-\t\t\t\t\t\tTemplate.toComment(\n-\t\t\t\t\t\t\t`runtime requirements: ${joinIterableWithComma(\n-\t\t\t\t\t\t\t\tchunkGraph.getModuleRuntimeRequirements(module, chunk.runtime)\n-\t\t\t\t\t\t\t)}`\n-\t\t\t\t\t\t) + \"\\n\"\n-\t\t\t\t\t);\n-\t\t\t\t\tconst optimizationBailout = moduleGraph.getOptimizationBailout(\n-\t\t\t\t\t\tmodule\n-\t\t\t\t\t);\n-\t\t\t\t\tif (optimizationBailout) {\n-\t\t\t\t\t\tfor (const text of optimizationBailout) {\n-\t\t\t\t\t\t\tlet code;\n-\t\t\t\t\t\t\tif (typeof text === \"function\") {\n-\t\t\t\t\t\t\t\tcode = text(requestShortener);\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tcode = text;\n+\t\t\t\t\tconst source = new ConcatSource();\n+\t\t\t\t\tlet header = cacheEntry.header;\n+\t\t\t\t\tif (header === undefined) {\n+\t\t\t\t\t\tconst req = module.readableIdentifier(requestShortener);\n+\t\t\t\t\t\tconst reqStr = req.replace(/\\*\\//g, \"*_/\");\n+\t\t\t\t\t\tconst reqStrStar = \"*\".repeat(reqStr.length);\n+\t\t\t\t\t\tconst headerStr = `/*!****${reqStrStar}****!*\\n  !*** ${reqStr} ***!\\n  \\\\****${reqStrStar}****/\\n`;\n+\t\t\t\t\t\theader = new RawSource(headerStr);\n+\t\t\t\t\t\tcacheEntry.header = header;\n+\t\t\t\t\t}\n+\t\t\t\t\tsource.add(header);\n+\t\t\t\t\tif (verbose) {\n+\t\t\t\t\t\tconst exportsType = module.buildMeta.exportsType;\n+\t\t\t\t\t\tsource.add(\n+\t\t\t\t\t\t\tTemplate.toComment(\n+\t\t\t\t\t\t\t\texportsType\n+\t\t\t\t\t\t\t\t\t? `${exportsType} exports`\n+\t\t\t\t\t\t\t\t\t: \"unknown exports (runtime-defined)\"\n+\t\t\t\t\t\t\t) + \"\\n\"\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tif (exportsType) {\n+\t\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n+\t\t\t\t\t\t\tprintExportsInfoToSource(\n+\t\t\t\t\t\t\t\tsource,\n+\t\t\t\t\t\t\t\t\"\",\n+\t\t\t\t\t\t\t\texportsInfo,\n+\t\t\t\t\t\t\t\tmoduleGraph,\n+\t\t\t\t\t\t\t\trequestShortener\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tsource.add(\n+\t\t\t\t\t\t\tTemplate.toComment(\n+\t\t\t\t\t\t\t\t`runtime requirements: ${joinIterableWithComma(\n+\t\t\t\t\t\t\t\t\tchunkGraph.getModuleRuntimeRequirements(module, chunk.runtime)\n+\t\t\t\t\t\t\t\t)}`\n+\t\t\t\t\t\t\t) + \"\\n\"\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tconst optimizationBailout = moduleGraph.getOptimizationBailout(\n+\t\t\t\t\t\t\tmodule\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tif (optimizationBailout) {\n+\t\t\t\t\t\t\tfor (const text of optimizationBailout) {\n+\t\t\t\t\t\t\t\tlet code;\n+\t\t\t\t\t\t\t\tif (typeof text === \"function\") {\n+\t\t\t\t\t\t\t\t\tcode = text(requestShortener);\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tcode = text;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tsource.add(Template.toComment(`${code}`) + \"\\n\");\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tsource.add(Template.toComment(`${code}`) + \"\\n\");\n \t\t\t\t\t\t}\n+\t\t\t\t\t\tsource.add(moduleSource);\n+\t\t\t\t\t\treturn source;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tsource.add(moduleSource);\n+\t\t\t\t\t\tconst cachedSource = new CachedSource(source);\n+\t\t\t\t\t\tcacheEntry.full.set(moduleSource, cachedSource);\n+\t\t\t\t\t\treturn cachedSource;\n \t\t\t\t\t}\n-\t\t\t\t\tsource.add(moduleSource);\n-\t\t\t\t\treturn source;\n \t\t\t\t}\n \t\t\t);\n \t\t\thooks.chunkHash.tap(\"ModuleInfoHeaderPlugin\", (chunk, hash) => {"
      },
      {
        "sha": "dc9b3e10ca843c839ef94f278a2586e97551e89f",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -171,7 +171,9 @@ class WebpackOptionsApply extends OptionsApply {\n \n \t\tif (options.output.pathinfo) {\n \t\t\tconst ModuleInfoHeaderPlugin = require(\"./ModuleInfoHeaderPlugin\");\n-\t\t\tnew ModuleInfoHeaderPlugin().apply(compiler);\n+\t\t\tnew ModuleInfoHeaderPlugin(options.output.pathinfo !== true).apply(\n+\t\t\t\tcompiler\n+\t\t\t);\n \t\t}\n \n \t\tif (options.devtool) {"
      },
      {
        "sha": "190d325256945d566a7c747e390042cfbad4a899",
        "filename": "lib/stats/DefaultStatsFactoryPlugin.js",
        "status": "modified",
        "additions": 62,
        "deletions": 24,
        "changes": 86,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsFactoryPlugin.js?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -104,8 +104,10 @@ const { makePathsRelative, parseResource } = require(\"../util/identifier\");\n  * @typedef {Object} SimpleExtractors\n  * @property {ExtractorsByOption<Compilation>} compilation\n  * @property {ExtractorsByOption<ExtendedAsset>} asset\n+ * @property {ExtractorsByOption<ExtendedAsset>} asset$visible\n  * @property {ExtractorsByOption<{ name: string, chunkGroup: ChunkGroup }>} chunkGroup\n  * @property {ExtractorsByOption<Module>} module\n+ * @property {ExtractorsByOption<Module>} module$visible\n  * @property {ExtractorsByOption<Module>} moduleIssuer\n  * @property {ExtractorsByOption<ModuleProfile>} profile\n  * @property {ExtractorsByOption<ModuleGraphConnection>} moduleReason\n@@ -655,14 +657,32 @@ const SIMPLE_EXTRACTORS = {\n \t\t}\n \t},\n \tasset: {\n+\t\t_: (object, asset, context, options, factory) => {\n+\t\t\tconst { compilation } = context;\n+\t\t\tobject.type = asset.type;\n+\t\t\tobject.name = asset.name;\n+\t\t\tobject.size = asset.source.size();\n+\t\t\tobject.emitted = compilation.emittedAssets.has(asset.name);\n+\t\t\tobject.comparedForEmit = compilation.comparedForEmitAssets.has(\n+\t\t\t\tasset.name\n+\t\t\t);\n+\t\t\tconst cached = !object.emitted && !object.comparedForEmit;\n+\t\t\tobject.cached = cached;\n+\t\t\tobject.info = asset.info;\n+\t\t\tif (!cached || options.cachedAssets) {\n+\t\t\t\tObject.assign(\n+\t\t\t\t\tobject,\n+\t\t\t\t\tfactory.create(`${context.type}$visible`, asset, context)\n+\t\t\t\t);\n+\t\t\t}\n+\t\t}\n+\t},\n+\tasset$visible: {\n \t\t_: (\n \t\t\tobject,\n \t\t\tasset,\n \t\t\t{ compilation, compilationFileToChunks, compilationAuxiliaryFileToChunks }\n \t\t) => {\n-\t\t\tobject.type = asset.type;\n-\t\t\tobject.name = asset.name;\n-\t\t\tobject.size = asset.source.size();\n \t\t\tconst chunks = compilationFileToChunks.get(asset.name) || [];\n \t\t\tconst auxiliaryChunks =\n \t\t\t\tcompilationAuxiliaryFileToChunks.get(asset.name) || [];\n@@ -686,18 +706,12 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t\tc => Array.from(c.idNameHints),\n \t\t\t\tcompareIds\n \t\t\t);\n-\t\t\tobject.emitted = compilation.emittedAssets.has(asset.name);\n-\t\t\tobject.comparedForEmit = compilation.comparedForEmitAssets.has(\n-\t\t\t\tasset.name\n-\t\t\t);\n-\t\t\tobject.cached = !object.emitted && !object.comparedForEmit;\n-\t\t\tobject.info = asset.info;\n \t\t\tobject.filteredRelated = asset.related ? asset.related.length : undefined;\n \t\t},\n \t\trelatedAssets: (object, asset, context, options, factory) => {\n \t\t\tconst { type } = context;\n \t\t\tobject.related = factory.create(\n-\t\t\t\t`${type}.related`,\n+\t\t\t\t`${type.slice(0, -8)}.related`,\n \t\t\t\tasset.related,\n \t\t\t\tcontext\n \t\t\t);\n@@ -819,6 +833,32 @@ const SIMPLE_EXTRACTORS = {\n \t\t}\n \t},\n \tmodule: {\n+\t\t_: (object, module, context, options, factory) => {\n+\t\t\tconst { compilation, type } = context;\n+\t\t\tconst built = compilation.builtModules.has(module);\n+\t\t\tconst codeGenerated = compilation.codeGeneratedModules.has(module);\n+\t\t\tconst sizes = {};\n+\t\t\tfor (const sourceType of module.getSourceTypes()) {\n+\t\t\t\tsizes[sourceType] = module.size(sourceType);\n+\t\t\t}\n+\t\t\tObject.assign(object, {\n+\t\t\t\ttype: \"module\",\n+\t\t\t\tmoduleType: module.type,\n+\t\t\t\tsize: module.size(),\n+\t\t\t\tsizes,\n+\t\t\t\tbuilt,\n+\t\t\t\tcodeGenerated,\n+\t\t\t\tcached: !built && !codeGenerated\n+\t\t\t});\n+\t\t\tif (built || codeGenerated || options.cachedModules) {\n+\t\t\t\tObject.assign(\n+\t\t\t\t\tobject,\n+\t\t\t\t\tfactory.create(`${type}$visible`, module, context)\n+\t\t\t\t);\n+\t\t\t}\n+\t\t}\n+\t},\n+\tmodule$visible: {\n \t\t_: (object, module, context, { requestShortener }, factory) => {\n \t\t\tconst { compilation, type, rootModules } = context;\n \t\t\tconst { moduleGraph } = compilation;\n@@ -841,39 +881,35 @@ const SIMPLE_EXTRACTORS = {\n \t\t\tfor (const sourceType of module.getSourceTypes()) {\n \t\t\t\tsizes[sourceType] = module.size(sourceType);\n \t\t\t}\n-\t\t\tconst built = compilation.builtModules.has(module);\n-\t\t\tconst codeGenerated = compilation.codeGeneratedModules.has(module);\n \t\t\tObject.assign(object, {\n-\t\t\t\ttype: \"module\",\n-\t\t\t\tmoduleType: module.type,\n \t\t\t\tidentifier: module.identifier(),\n \t\t\t\tname: module.readableIdentifier(requestShortener),\n \t\t\t\tnameForCondition: module.nameForCondition(),\n \t\t\t\tindex: moduleGraph.getPreOrderIndex(module),\n \t\t\t\tpreOrderIndex: moduleGraph.getPreOrderIndex(module),\n \t\t\t\tindex2: moduleGraph.getPostOrderIndex(module),\n \t\t\t\tpostOrderIndex: moduleGraph.getPostOrderIndex(module),\n-\t\t\t\tsize: module.size(),\n-\t\t\t\tsizes,\n \t\t\t\tcacheable: module.buildInfo.cacheable,\n-\t\t\t\tbuilt,\n-\t\t\t\tcodeGenerated,\n-\t\t\t\tcached: !built && !codeGenerated,\n \t\t\t\toptional: module.isOptional(moduleGraph),\n \t\t\t\torphan:\n-\t\t\t\t\t!type.endsWith(\"module.modules[].module\") &&\n+\t\t\t\t\t!type.endsWith(\"module.modules[].module$visible\") &&\n \t\t\t\t\tcompilation.chunkGraph.getNumberOfModuleChunks(module) === 0,\n \t\t\t\tdependent: rootModules ? !rootModules.has(module) : undefined,\n \t\t\t\tissuer: issuer && issuer.identifier(),\n \t\t\t\tissuerName: issuer && issuer.readableIdentifier(requestShortener),\n \t\t\t\tissuerPath:\n-\t\t\t\t\tissuer && factory.create(`${type}.issuerPath`, path, context),\n+\t\t\t\t\tissuer &&\n+\t\t\t\t\tfactory.create(`${type.slice(0, -8)}.issuerPath`, path, context),\n \t\t\t\tfailed: errorsCount > 0,\n \t\t\t\terrors: errorsCount,\n \t\t\t\twarnings: warningsCount\n \t\t\t});\n \t\t\tif (profile) {\n-\t\t\t\tobject.profile = factory.create(`${type}.profile`, profile, context);\n+\t\t\t\tobject.profile = factory.create(\n+\t\t\t\t\t`${type.slice(0, -8)}.profile`,\n+\t\t\t\t\tprofile,\n+\t\t\t\t\tcontext\n+\t\t\t\t);\n \t\t\t}\n \t\t},\n \t\tids: (object, module, { compilation: { chunkGraph, moduleGraph } }) => {\n@@ -896,7 +932,7 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t\tcompilation: { moduleGraph }\n \t\t\t} = context;\n \t\t\tobject.reasons = factory.create(\n-\t\t\t\t`${type}.reasons`,\n+\t\t\t\t`${type.slice(0, -8)}.reasons`,\n \t\t\t\tArray.from(moduleGraph.getIncomingConnections(module)),\n \t\t\t\tcontext\n \t\t\t);\n@@ -942,7 +978,7 @@ const SIMPLE_EXTRACTORS = {\n \t\t\tif (module instanceof ConcatenatedModule) {\n \t\t\t\tconst modules = module.modules;\n \t\t\t\tconst groupedModules = factory.create(\n-\t\t\t\t\t`${type}.modules`,\n+\t\t\t\t\t`${type.slice(0, -8)}.modules`,\n \t\t\t\t\tmodules,\n \t\t\t\t\tcontext\n \t\t\t\t);\n@@ -1664,6 +1700,7 @@ const MODULES_GROUPERS = type => ({\n \t\tif (groupModulesByType || !options.runtimeModules) {\n \t\t\tgroupConfigs.push({\n \t\t\t\tgetKeys: module => {\n+\t\t\t\t\tif (!module.moduleType) return;\n \t\t\t\t\tif (groupModulesByType) {\n \t\t\t\t\t\treturn [module.moduleType.split(\"/\", 1)[0]];\n \t\t\t\t\t} else if (module.moduleType === \"runtime\") {\n@@ -1691,6 +1728,7 @@ const MODULES_GROUPERS = type => ({\n \t\tif (groupModulesByPath || groupModulesByExtension) {\n \t\t\tgroupConfigs.push({\n \t\t\t\tgetKeys: module => {\n+\t\t\t\t\tif (!module.name) return;\n \t\t\t\t\tconst resource = parseResource(module.name.split(\"!\").pop()).path;\n \t\t\t\t\tconst extensionMatch =\n \t\t\t\t\t\tgroupModulesByExtension && /(\\.[^.]+)(?:\\?.*|$)/.exec(resource);"
      },
      {
        "sha": "36c25772c3c74322d5c0a5db30f777c3e0ef61b2",
        "filename": "lib/stats/StatsFactory.js",
        "status": "modified",
        "additions": 41,
        "deletions": 25,
        "changes": 66,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2Fstats%2FStatsFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/lib%2Fstats%2FStatsFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FStatsFactory.js?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -48,17 +48,15 @@ class StatsFactory {\n \t\t\t/** @type {HookMap<SyncBailHook<[any, Object]>>} */\n \t\t\tgetItemFactory: new HookMap(() => new SyncBailHook([\"item\", \"context\"]))\n \t\t});\n-\t\t/** @type {Map<HookMap<SyncBailHook<[any[], Object]>>, Map<string, SyncBailHook<[any[], Object]>[]>>} */\n-\t\tthis._levelHookCache = new Map();\n+\t\tconst hooks = this.hooks;\n+\t\tthis._caches = /** @type {Record<keyof typeof hooks, Map<string, SyncBailHook<[any[], Object]>[]>>} */ ({});\n+\t\tfor (const key of Object.keys(hooks)) {\n+\t\t\tthis._caches[key] = new Map();\n+\t\t}\n \t\tthis._inCreate = false;\n \t}\n \n-\t_getAllLevelHooks(hookMap, type) {\n-\t\tlet cache = this._levelHookCache.get(hookMap);\n-\t\tif (cache === undefined) {\n-\t\t\tcache = new Map();\n-\t\t\tthis._levelHookCache.set(hookMap, cache);\n-\t\t}\n+\t_getAllLevelHooks(hookMap, cache, type) {\n \t\tconst cacheEntry = cache.get(type);\n \t\tif (cacheEntry !== undefined) {\n \t\t\treturn cacheEntry;\n@@ -75,22 +73,22 @@ class StatsFactory {\n \t\treturn hooks;\n \t}\n \n-\t_forEachLevel(hookMap, type, fn) {\n-\t\tfor (const hook of this._getAllLevelHooks(hookMap, type)) {\n+\t_forEachLevel(hookMap, cache, type, fn) {\n+\t\tfor (const hook of this._getAllLevelHooks(hookMap, cache, type)) {\n \t\t\tconst result = fn(hook);\n \t\t\tif (result !== undefined) return result;\n \t\t}\n \t}\n \n-\t_forEachLevelWaterfall(hookMap, type, data, fn) {\n-\t\tfor (const hook of this._getAllLevelHooks(hookMap, type)) {\n+\t_forEachLevelWaterfall(hookMap, cache, type, data, fn) {\n+\t\tfor (const hook of this._getAllLevelHooks(hookMap, cache, type)) {\n \t\t\tdata = fn(hook, data);\n \t\t}\n \t\treturn data;\n \t}\n \n-\t_forEachLevelFilter(hookMap, type, items, fn, forceClone) {\n-\t\tconst hooks = this._getAllLevelHooks(hookMap, type);\n+\t_forEachLevelFilter(hookMap, cache, type, items, fn, forceClone) {\n+\t\tconst hooks = this._getAllLevelHooks(hookMap, cache, type);\n \t\tif (hooks.length === 0) return forceClone ? items.slice() : items;\n \t\tlet i = 0;\n \t\treturn items.filter((item, idx) => {\n@@ -114,7 +112,7 @@ class StatsFactory {\n \t\t\t\tthis._inCreate = true;\n \t\t\t\treturn this._create(type, data, baseContext);\n \t\t\t} finally {\n-\t\t\t\tthis._levelHookCache.clear();\n+\t\t\t\tfor (const key of Object.keys(this._caches)) this._caches[key].clear();\n \t\t\t\tthis._inCreate = false;\n \t\t\t}\n \t\t}\n@@ -130,6 +128,7 @@ class StatsFactory {\n \t\t\t// run filter on unsorted items\n \t\t\tconst items = this._forEachLevelFilter(\n \t\t\t\tthis.hooks.filter,\n+\t\t\t\tthis._caches.filter,\n \t\t\t\ttype,\n \t\t\t\tdata,\n \t\t\t\t(h, r, idx, i) => h.call(r, context, idx, i),\n@@ -138,7 +137,7 @@ class StatsFactory {\n \n \t\t\t// sort items\n \t\t\tconst comparators = [];\n-\t\t\tthis._forEachLevel(this.hooks.sort, type, h =>\n+\t\t\tthis._forEachLevel(this.hooks.sort, this._caches.sort, type, h =>\n \t\t\t\th.call(comparators, context)\n \t\t\t);\n \t\t\tif (comparators.length > 0) {\n@@ -151,6 +150,7 @@ class StatsFactory {\n \t\t\t// run filter on sorted items\n \t\t\tconst items2 = this._forEachLevelFilter(\n \t\t\t\tthis.hooks.filterSorted,\n+\t\t\t\tthis._caches.filterSorted,\n \t\t\t\ttype,\n \t\t\t\titems,\n \t\t\t\t(h, r, idx, i) => h.call(r, context, idx, i),\n@@ -167,6 +167,7 @@ class StatsFactory {\n \t\t\t\t// run getItemName\n \t\t\t\tconst itemName = this._forEachLevel(\n \t\t\t\t\tthis.hooks.getItemName,\n+\t\t\t\t\tthis._caches.getItemName,\n \t\t\t\t\t`${type}[]`,\n \t\t\t\t\th => h.call(item, itemContext)\n \t\t\t\t);\n@@ -175,8 +176,11 @@ class StatsFactory {\n \n \t\t\t\t// run getItemFactory\n \t\t\t\tconst itemFactory =\n-\t\t\t\t\tthis._forEachLevel(this.hooks.getItemFactory, innerType, h =>\n-\t\t\t\t\t\th.call(item, itemContext)\n+\t\t\t\t\tthis._forEachLevel(\n+\t\t\t\t\t\tthis.hooks.getItemFactory,\n+\t\t\t\t\t\tthis._caches.getItemFactory,\n+\t\t\t\t\t\tinnerType,\n+\t\t\t\t\t\th => h.call(item, itemContext)\n \t\t\t\t\t) || this;\n \n \t\t\t\t// run item factory\n@@ -185,8 +189,11 @@ class StatsFactory {\n \n \t\t\t// sort result items\n \t\t\tconst comparators2 = [];\n-\t\t\tthis._forEachLevel(this.hooks.sortResults, type, h =>\n-\t\t\t\th.call(comparators2, context)\n+\t\t\tthis._forEachLevel(\n+\t\t\t\tthis.hooks.sortResults,\n+\t\t\t\tthis._caches.sortResults,\n+\t\t\t\ttype,\n+\t\t\t\th => h.call(comparators2, context)\n \t\t\t);\n \t\t\tif (comparators2.length > 0) {\n \t\t\t\tresultItems.sort(\n@@ -197,8 +204,11 @@ class StatsFactory {\n \n \t\t\t// group result items\n \t\t\tconst groupConfigs = [];\n-\t\t\tthis._forEachLevel(this.hooks.groupResults, type, h =>\n-\t\t\t\th.call(groupConfigs, context)\n+\t\t\tthis._forEachLevel(\n+\t\t\t\tthis.hooks.groupResults,\n+\t\t\t\tthis._caches.groupResults,\n+\t\t\t\ttype,\n+\t\t\t\th => h.call(groupConfigs, context)\n \t\t\t);\n \t\t\tif (groupConfigs.length > 0) {\n \t\t\t\tresultItems = smartGrouping(resultItems, groupConfigs);\n@@ -207,21 +217,26 @@ class StatsFactory {\n \t\t\t// run filter on sorted result items\n \t\t\tconst finalResultItems = this._forEachLevelFilter(\n \t\t\t\tthis.hooks.filterResults,\n+\t\t\t\tthis._caches.filterResults,\n \t\t\t\ttype,\n \t\t\t\tresultItems,\n \t\t\t\t(h, r, idx, i) => h.call(r, context, idx, i),\n \t\t\t\tfalse\n \t\t\t);\n \n \t\t\t// run merge on mapped items\n-\t\t\tlet result = this._forEachLevel(this.hooks.merge, type, h =>\n-\t\t\t\th.call(finalResultItems, context)\n+\t\t\tlet result = this._forEachLevel(\n+\t\t\t\tthis.hooks.merge,\n+\t\t\t\tthis._caches.merge,\n+\t\t\t\ttype,\n+\t\t\t\th => h.call(finalResultItems, context)\n \t\t\t);\n \t\t\tif (result === undefined) result = finalResultItems;\n \n \t\t\t// run result on merged items\n \t\t\treturn this._forEachLevelWaterfall(\n \t\t\t\tthis.hooks.result,\n+\t\t\t\tthis._caches.result,\n \t\t\t\ttype,\n \t\t\t\tresult,\n \t\t\t\t(h, r) => h.call(r, context)\n@@ -230,13 +245,14 @@ class StatsFactory {\n \t\t\tconst object = {};\n \n \t\t\t// run extract on value\n-\t\t\tthis._forEachLevel(this.hooks.extract, type, h =>\n+\t\t\tthis._forEachLevel(this.hooks.extract, this._caches.extract, type, h =>\n \t\t\t\th.call(object, data, context)\n \t\t\t);\n \n \t\t\t// run result on extracted object\n \t\t\treturn this._forEachLevelWaterfall(\n \t\t\t\tthis.hooks.result,\n+\t\t\t\tthis._caches.result,\n \t\t\t\ttype,\n \t\t\t\tobject,\n \t\t\t\t(h, r) => h.call(r, context)"
      },
      {
        "sha": "4bdbb164b650383f3bf1bd21394546592524f314",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -2172,7 +2172,14 @@\n     },\n     \"Pathinfo\": {\n       \"description\": \"Include comments with information about the modules.\",\n-      \"type\": \"boolean\"\n+      \"anyOf\": [\n+        {\n+          \"enum\": [\"verbose\"]\n+        },\n+        {\n+          \"type\": \"boolean\"\n+        }\n+      ]\n     },\n     \"Performance\": {\n       \"description\": \"Configuration for web performance recommendations.\","
      },
      {
        "sha": "4fa1515538655c818092d61436c20a4cbf1b5294",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -2883,6 +2883,15 @@ Object {\n   },\n   \"output-pathinfo\": Object {\n     \"configs\": Array [\n+      Object {\n+        \"description\": \"Include comments with information about the modules.\",\n+        \"multiple\": false,\n+        \"path\": \"output.pathinfo\",\n+        \"type\": \"enum\",\n+        \"values\": Array [\n+          \"verbose\",\n+        ],\n+      },\n       Object {\n         \"description\": \"Include comments with information about the modules.\",\n         \"multiple\": false,\n@@ -2892,7 +2901,7 @@ Object {\n     ],\n     \"description\": \"Include comments with information about the modules.\",\n     \"multiple\": false,\n-    \"simpleType\": \"boolean\",\n+    \"simpleType\": \"string\",\n   },\n   \"output-public-path\": Object {\n     \"configs\": Array ["
      },
      {
        "sha": "01cc7fa9376aceaab2979722e23e88c264c094d0",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 54,
        "deletions": 54,
        "changes": 108,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -537,10 +537,10 @@ webpack x.x.x compiled successfully in X ms\"\n \n exports[`StatsTestCases should print correct stats for chunks-development 1`] = `\n \"PublicPath: auto\n-asset bundle.js 11.1 KiB [emitted] (name: main)\n-asset d_js-e_js.bundle.js 1.37 KiB [emitted]\n-asset c_js.bundle.js 1.1 KiB [emitted]\n-asset b_js.bundle.js 964 bytes [emitted]\n+asset bundle.js 10.8 KiB [emitted] (name: main)\n+asset d_js-e_js.bundle.js 1.07 KiB [emitted]\n+asset c_js.bundle.js 1010 bytes [emitted]\n+asset b_js.bundle.js 819 bytes [emitted]\n chunk (runtime: main) b_js.bundle.js 22 bytes <{main}> [rendered]\n   > ./b ./index.js 2:0-16\n   ./b.js 22 bytes [built] [code generated]\n@@ -925,8 +925,8 @@ webpack x.x.x compiled with 2 warnings in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for immutable 1`] = `\n-\"asset deb902e1c6c6d6c31fc1.js 13 KiB [emitted] [immutable] (name: main)\n-asset cd9e349e4fe2a6d0d4d0.js 884 bytes [emitted] [immutable]\"\n+\"asset deb902e1c6c6d6c31fc1.js 12.9 KiB [emitted] [immutable] (name: main)\n+asset cd9e349e4fe2a6d0d4d0.js 812 bytes [emitted] [immutable]\"\n `;\n \n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n@@ -2324,27 +2324,27 @@ b-source-map:\n \n exports[`StatsTestCases should print correct stats for related-assets 1`] = `\n \"default:\n-  assets by path *.js 15.8 KiB\n-    asset default-main.js 14.7 KiB [emitted] (name: main) 3 related assets\n-    asset default-chunk_js.js 1.14 KiB [emitted] 3 related assets\n+  assets by path *.js 15.1 KiB\n+    asset default-main.js 14.3 KiB [emitted] (name: main) 3 related assets\n+    asset default-chunk_js.js 815 bytes [emitted] 3 related assets\n   assets by path *.css 142 bytes\n     asset default-chunk_js.css 73 bytes [emitted] 3 related assets\n     asset default-main.css 69 bytes [emitted] (name: main) 3 related assets\n \n relatedAssets:\n-  assets by path *.js 15.9 KiB\n-    asset relatedAssets-main.js 14.7 KiB [emitted] (name: main)\n-      compressed relatedAssets-main.js.br 14.7 KiB [emitted]\n-      compressed relatedAssets-main.js.gz 14.7 KiB [emitted]\n+  assets by path *.js 15.1 KiB\n+    asset relatedAssets-main.js 14.3 KiB [emitted] (name: main)\n+      compressed relatedAssets-main.js.br 14.3 KiB [emitted]\n+      compressed relatedAssets-main.js.gz 14.3 KiB [emitted]\n       sourceMap relatedAssets-main.js.map 12.5 KiB [emitted] [dev] (auxiliary name: main)\n         compressed relatedAssets-main.js.map.br 12.5 KiB [emitted]\n         compressed relatedAssets-main.js.map.gz 12.5 KiB [emitted]\n-    asset relatedAssets-chunk_js.js 1.15 KiB [emitted]\n-      compressed relatedAssets-chunk_js.js.br 1.15 KiB [emitted]\n-      compressed relatedAssets-chunk_js.js.gz 1.15 KiB [emitted]\n-      sourceMap relatedAssets-chunk_js.js.map 307 bytes [emitted] [dev]\n-        compressed relatedAssets-chunk_js.js.map.br 307 bytes [emitted]\n-        compressed relatedAssets-chunk_js.js.map.gz 307 bytes [emitted]\n+    asset relatedAssets-chunk_js.js 821 bytes [emitted]\n+      compressed relatedAssets-chunk_js.js.br 821 bytes [emitted]\n+      compressed relatedAssets-chunk_js.js.gz 821 bytes [emitted]\n+      sourceMap relatedAssets-chunk_js.js.map 301 bytes [emitted] [dev]\n+        compressed relatedAssets-chunk_js.js.map.br 301 bytes [emitted]\n+        compressed relatedAssets-chunk_js.js.map.gz 301 bytes [emitted]\n   assets by path *.css 154 bytes\n     asset relatedAssets-chunk_js.css 79 bytes [emitted]\n       sourceMap relatedAssets-chunk_js.css.map 197 bytes [emitted] [dev]\n@@ -2360,17 +2360,17 @@ relatedAssets:\n       compressed relatedAssets-main.css.gz 75 bytes [emitted]\n \n exclude1:\n-  assets by path *.js 15.8 KiB\n-    asset exclude1-main.js 14.7 KiB [emitted] (name: main)\n-      hidden assets 29.4 KiB 2 assets\n+  assets by path *.js 15.1 KiB\n+    asset exclude1-main.js 14.3 KiB [emitted] (name: main)\n+      hidden assets 28.6 KiB 2 assets\n       sourceMap exclude1-main.js.map 12.4 KiB [emitted] [dev] (auxiliary name: main)\n         hidden assets 24.9 KiB 2 assets\n         1 related asset\n       1 related asset\n-    asset exclude1-chunk_js.js 1.14 KiB [emitted]\n-      hidden assets 2.29 KiB 2 assets\n-      sourceMap exclude1-chunk_js.js.map 302 bytes [emitted] [dev]\n-        hidden assets 604 bytes 2 assets\n+    asset exclude1-chunk_js.js 816 bytes [emitted]\n+      hidden assets 1.59 KiB 2 assets\n+      sourceMap exclude1-chunk_js.js.map 296 bytes [emitted] [dev]\n+        hidden assets 592 bytes 2 assets\n         1 related asset\n       1 related asset\n   assets by path *.css 144 bytes\n@@ -2388,15 +2388,15 @@ exclude1:\n       1 related asset\n \n exclude2:\n-  assets by path *.js 15.8 KiB\n-    asset exclude2-main.js 14.7 KiB [emitted] (name: main)\n+  assets by path *.js 15.1 KiB\n+    asset exclude2-main.js 14.3 KiB [emitted] (name: main)\n       hidden assets 12.4 KiB 1 asset\n-      compressed exclude2-main.js.br 14.7 KiB [emitted]\n-      compressed exclude2-main.js.gz 14.7 KiB [emitted]\n-    asset exclude2-chunk_js.js 1.14 KiB [emitted]\n-      hidden assets 302 bytes 1 asset\n-      compressed exclude2-chunk_js.js.br 1.14 KiB [emitted]\n-      compressed exclude2-chunk_js.js.gz 1.14 KiB [emitted]\n+      compressed exclude2-main.js.br 14.3 KiB [emitted]\n+      compressed exclude2-main.js.gz 14.3 KiB [emitted]\n+    asset exclude2-chunk_js.js 816 bytes [emitted]\n+      hidden assets 296 bytes 1 asset\n+      compressed exclude2-chunk_js.js.br 816 bytes [emitted]\n+      compressed exclude2-chunk_js.js.gz 816 bytes [emitted]\n   assets by path *.css 144 bytes\n     asset exclude2-chunk_js.css 74 bytes [emitted]\n       hidden assets 192 bytes 1 asset\n@@ -2408,11 +2408,11 @@ exclude2:\n       compressed exclude2-main.css.gz 70 bytes [emitted]\n \n exclude3:\n-  hidden assets 1.22 KiB 2 assets\n-  assets by status 14.8 KiB [emitted]\n-    asset exclude3-main.js 14.7 KiB [emitted] (name: main)\n-      compressed exclude3-main.js.br 14.7 KiB [emitted]\n-      compressed exclude3-main.js.gz 14.7 KiB [emitted]\n+  hidden assets 890 bytes 2 assets\n+  assets by status 14.4 KiB [emitted]\n+    asset exclude3-main.js 14.3 KiB [emitted] (name: main)\n+      compressed exclude3-main.js.br 14.3 KiB [emitted]\n+      compressed exclude3-main.js.gz 14.3 KiB [emitted]\n       sourceMap exclude3-main.js.map 12.4 KiB [emitted] [dev] (auxiliary name: main)\n         compressed exclude3-main.js.map.br 12.4 KiB [emitted]\n         compressed exclude3-main.js.map.gz 12.4 KiB [emitted]\n@@ -2472,8 +2472,8 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-chunk 1`] = `\n-\"Entrypoint e1 6.63 KiB = runtime~e1.js 5.66 KiB e1.js 1000 bytes\n-Entrypoint e2 6.63 KiB = runtime~e2.js 5.66 KiB e2.js 1000 bytes\n+\"Entrypoint e1 6.49 KiB = runtime~e1.js 5.66 KiB e1.js 857 bytes\n+Entrypoint e2 6.49 KiB = runtime~e2.js 5.66 KiB e2.js 857 bytes\n webpack x.x.x compiled successfully\"\n `;\n \n@@ -2532,14 +2532,14 @@ dynamic custom name:\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-chunk-issue-7382 1`] = `\n-\"Entrypoint e1 7.58 KiB = runtime.js 5.65 KiB all.js 1.28 KiB e1.js 670 bytes\n-Entrypoint e2 7.58 KiB = runtime.js 5.65 KiB all.js 1.28 KiB e2.js 670 bytes\n+\"Entrypoint e1 7.3 KiB = runtime.js 5.65 KiB all.js 1020 bytes e1.js 670 bytes\n+Entrypoint e2 7.3 KiB = runtime.js 5.65 KiB all.js 1020 bytes e2.js 670 bytes\n webpack x.x.x compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-chunk-single 1`] = `\n-\"Entrypoint e1 6.63 KiB = runtime.js 5.65 KiB e1.js 999 bytes\n-Entrypoint e2 6.63 KiB = runtime.js 5.65 KiB e2.js 999 bytes\n+\"Entrypoint e1 6.49 KiB = runtime.js 5.65 KiB e1.js 854 bytes\n+Entrypoint e2 6.49 KiB = runtime.js 5.65 KiB e2.js 854 bytes\n webpack x.x.x compiled successfully\"\n `;\n \n@@ -2627,13 +2627,13 @@ exports[`StatsTestCases should print correct stats for runtime-specific-used-exp\n   production (webpack x.x.x) compiled successfully in X ms\n \n development:\n-  asset development-a.js 18.1 KiB [emitted] (name: a)\n-  asset development-b.js 18.1 KiB [emitted] (name: b)\n-  asset development-dw_js.js 3.15 KiB [emitted]\n-  asset development-dx_js.js 3.15 KiB [emitted]\n-  asset development-dy_js.js 3.15 KiB [emitted]\n-  asset development-dz_js.js 3.15 KiB [emitted]\n-  asset development-c.js 806 bytes [emitted] (name: c)\n+  asset development-a.js 15.6 KiB [emitted] (name: a)\n+  asset development-b.js 15.6 KiB [emitted] (name: b)\n+  asset development-dw_js.js 2.12 KiB [emitted]\n+  asset development-dx_js.js 2.12 KiB [emitted]\n+  asset development-dy_js.js 2.12 KiB [emitted]\n+  asset development-dz_js.js 2.12 KiB [emitted]\n+  asset development-c.js 734 bytes [emitted] (name: c)\n   chunk (runtime: a) development-a.js (a) 605 bytes (javascript) 6.45 KiB (runtime) [entry] [rendered]\n     runtime modules 6.45 KiB 9 modules\n     cacheable modules 605 bytes\n@@ -3002,7 +3002,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for simple 1`] = `\n-\"asset bundle.js 812 bytes [emitted] (name: main)\n+\"asset bundle.js 740 bytes [emitted] (name: main)\n ./index.js 1 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\"\n `;\n@@ -3707,7 +3707,7 @@ exports[`StatsTestCases should print correct stats for split-chunks-max-size 1`]\n   production (webpack x.x.x) compiled successfully\n \n development:\n-  Entrypoint main 53.6 KiB = 13 assets\n+  Entrypoint main 50.3 KiB = 13 assets\n   chunk (runtime: main) dev-main-big_js-1.js (main-big_js-1) 534 bytes ={main-in-some-directory_b}= ={main-in-some-directory_very-big_js-8d76cf03}= ={main-index_js-41f5a26e}= ={main-inner-module_small_js-3}= ={main-small_js-1}= ={main-subfolder_big_js-b}= ={main-subfolder_small_js-1}= ={main-very-big_js-08cf55cf}= ={main-very-big_js-4647fb9d}= ={main-very-big_js-62f7f644}= ={vendors-node_modules_big_js_1-node_modules_small_js_1-node_modules_small_js_2}= ={vendors-node_modules_very-big_js_1}= [initial] [rendered]\n     > ./ main\n     ./big.js?1 267 bytes [built] [code generated]"
      },
      {
        "sha": "99d180e051999d941cfdfe4384c1f1ba84698c23",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/3385d0d1981ffaf19fd486c7fff5805caf9448b4/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/3385d0d1981ffaf19fd486c7fff5805caf9448b4/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=3385d0d1981ffaf19fd486c7fff5805caf9448b4",
        "patch": "@@ -6129,7 +6129,7 @@ declare interface Output {\n \t/**\n \t * Include comments with information about the modules.\n \t */\n-\tpathinfo?: boolean;\n+\tpathinfo?: Pathinfo;\n \n \t/**\n \t * The `publicPath` specifies the public URL address of the output files when referenced in a browser.\n@@ -6368,7 +6368,7 @@ declare interface OutputNormalized {\n \t/**\n \t * Include comments with information about the modules.\n \t */\n-\tpathinfo?: boolean;\n+\tpathinfo?: Pathinfo;\n \n \t/**\n \t * The `publicPath` specifies the public URL address of the output files when referenced in a browser.\n@@ -6462,6 +6462,7 @@ declare interface PathData {\n \tnoChunkHash?: boolean;\n \turl?: string;\n }\n+type Pathinfo = boolean | \"verbose\";\n type Performance = false | PerformanceOptions;\n \n /**"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/13653",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/13653/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/13653/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/13653/events",
    "html_url": "https://github.com/webpack/webpack/pull/13653",
    "id": 931744270,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njc5MTkxMDI0",
    "number": 13653,
    "title": "chore(deps-dev): bump terser from 5.7.0 to 5.7.1",
    "user": {
      "login": "dependabot[bot]",
      "id": 49699333,
      "node_id": "MDM6Qm90NDk2OTkzMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/in/29110?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dependabot%5Bbot%5D",
      "html_url": "https://github.com/apps/dependabot",
      "followers_url": "https://api.github.com/users/dependabot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dependabot%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/dependabot%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/dependabot%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dependabot%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 1220497063,
        "node_id": "MDU6TGFiZWwxMjIwNDk3MDYz",
        "url": "https://api.github.com/repos/webpack/webpack/labels/dependencies",
        "name": "dependencies",
        "color": "0025ff",
        "default": false,
        "description": "Pull requests that update a dependency file"
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-06-28T16:25:30Z",
    "updated_at": "2021-06-29T11:30:59Z",
    "closed_at": "2021-06-29T11:30:58Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/13653",
      "html_url": "https://github.com/webpack/webpack/pull/13653",
      "diff_url": "https://github.com/webpack/webpack/pull/13653.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/13653.patch",
      "merged_at": "2021-06-29T11:30:58Z"
    },
    "body": "Bumps [terser](https://github.com/terser/terser) from 5.7.0 to 5.7.1.\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/terser/terser/blob/master/CHANGELOG.md\">terser's changelog</a>.</em></p>\n<blockquote>\n<h2>v5.7.1</h2>\n<ul>\n<li>Avoided collapsing assignments together if it would place a chain assignment on the left hand side, which is invalid syntax (<code>a?.b = c</code>)</li>\n<li>Removed undefined from object expansions (<code>{ ...void 0 }</code> -&gt; <code>{}</code>)</li>\n<li>Fix crash when checking if something is nullish or undefined (<a href=\"https://github-redirect.dependabot.com/terser/terser/issues/1009\">#1009</a>)</li>\n<li>Fixed comparison of private class properties (<a href=\"https://github-redirect.dependabot.com/terser/terser/issues/1015\">#1015</a>)</li>\n<li>Minor performance improvements (<a href=\"https://github-redirect.dependabot.com/terser/terser/issues/993\">#993</a>)</li>\n<li>Fixed scope of function defs in strict mode (they are block scoped)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/terser/terser/commit/d3d924fa9e4c57bbe286b811c6068bcc7026e902\"><code>d3d924f</code></a> 5.7.1</li>\n<li><a href=\"https://github.com/terser/terser/commit/f45230a0d9229e30065d3551f7d1f6112dcfd1df\"><code>f45230a</code></a> skip test</li>\n<li><a href=\"https://github.com/terser/terser/commit/a4154e9529e4ee674cfd191369b46898b517316f\"><code>a4154e9</code></a> update changelog</li>\n<li><a href=\"https://github.com/terser/terser/commit/6d08df9044f7868ccb54ca9b635a5b3e8ad72580\"><code>6d08df9</code></a> do not collapse vars/assigns which have a chain on their right hand side. Clo...</li>\n<li><a href=\"https://github.com/terser/terser/commit/e9d32ee4c1c6f330431c1987de38d8fccd56dec2\"><code>e9d32ee</code></a> pass compressor to is_undefined</li>\n<li><a href=\"https://github.com/terser/terser/commit/6f0433879ca1b5358c1140903ac6b5e071c962a4\"><code>6f04338</code></a> remove expansions from objects when we know the value being expanded is nulli...</li>\n<li><a href=\"https://github.com/terser/terser/commit/bfc332c2666585e9f354bc6ea7e41f50d664b37b\"><code>bfc332c</code></a> fix broken names output. Closes <a href=\"https://github-redirect.dependabot.com/terser/terser/issues/994\">#994</a></li>\n<li><a href=\"https://github.com/terser/terser/commit/283558161e67e4a21db9cb2c694b903e6b601521\"><code>2835581</code></a> fix missing compressor argument in is_nullish and is_undefined</li>\n<li><a href=\"https://github.com/terser/terser/commit/215db3c9d7dbff0d9ea1f6c82ff55ec2ffed4e08\"><code>215db3c</code></a> fix: missing compressor arg in optimize AST_VarDef (<a href=\"https://github-redirect.dependabot.com/terser/terser/issues/1009\">#1009</a>)</li>\n<li><a href=\"https://github.com/terser/terser/commit/60a74bb1679107e03a0f498b45644991dec2b19a\"><code>60a74bb</code></a> fix: private class element access equality (<a href=\"https://github-redirect.dependabot.com/terser/terser/issues/1015\">#1015</a>)</li>\n<li>Additional commits viewable in <a href=\"https://github.com/terser/terser/compare/v5.7.0...v5.7.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=terser&package-manager=npm_and_yarn&previous-version=5.7.0&new-version=5.7.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/13653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/13653/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "26569ef9d21b8b344686c2394aa3a71c70ca2d96",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 10,
        "deletions": 10,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/6e585baba8f64f2319d2246465d4aba2716802f9/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/6e585baba8f64f2319d2246465d4aba2716802f9/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=6e585baba8f64f2319d2246465d4aba2716802f9",
        "patch": "@@ -2441,15 +2441,15 @@ LOG from webpack.FileSystemInfo\n exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \"a-normal:\n   assets by path *.js 3.22 KiB\n-    asset f967a165cb7549ae4373-f967a1.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n+    asset 92b100c9dd880fb6fedd-92b100.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.92 KiB (5.89 KiB) = f967a165cb7549ae4373-f967a1.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.92 KiB (5.89 KiB) = 92b100c9dd880fb6fedd-92b100.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2468,15 +2468,15 @@ exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \n b-normal:\n   assets by path *.js 3.22 KiB\n-    asset 92b100c9dd880fb6fedd-92b100.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n+    asset b02624dcf8d618f12ba1-b02624.js 2.7 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.92 KiB (5.89 KiB) = 92b100c9dd880fb6fedd-92b100.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.92 KiB (5.89 KiB) = b02624dcf8d618f12ba1-b02624.js 2.7 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2495,8 +2495,8 @@ b-normal:\n \n a-source-map:\n   assets by path *.js 3.44 KiB\n-    asset 455b77a33a8878c30d52-455b77.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 455b77a33a8878c30d52-455b77.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n+    asset 64f4e187a137fbe6d037-64f4e1.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 64f4e187a137fbe6d037-64f4e1.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 399 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2507,7 +2507,7 @@ a-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 3.03 KiB (20.5 KiB) = 455b77a33a8878c30d52-455b77.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3.03 KiB (20.5 KiB) = 64f4e187a137fbe6d037-64f4e1.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules\n@@ -2526,8 +2526,8 @@ a-source-map:\n \n b-source-map:\n   assets by path *.js 3.44 KiB\n-    asset 455b77a33a8878c30d52-455b77.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 455b77a33a8878c30d52-455b77.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n+    asset 3e79f6f89bbfaf1c154c-3e79f6.js 2.76 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 3e79f6f89bbfaf1c154c-3e79f6.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 395 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2538,7 +2538,7 @@ b-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 3.03 KiB (20.4 KiB) = 455b77a33a8878c30d52-455b77.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3.03 KiB (20.4 KiB) = 3e79f6f89bbfaf1c154c-3e79f6.js 2.76 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules"
      },
      {
        "sha": "763ca290750c1010c4327e5bb19aa2fbaff54917",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/6e585baba8f64f2319d2246465d4aba2716802f9/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/6e585baba8f64f2319d2246465d4aba2716802f9/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=6e585baba8f64f2319d2246465d4aba2716802f9",
        "patch": "@@ -6414,9 +6414,9 @@ terser-webpack-plugin@^5.1.3:\n     terser \"^5.7.0\"\n \n terser@^5.6.1, terser@^5.7.0:\n-  version \"5.7.0\"\n-  resolved \"https://registry.yarnpkg.com/terser/-/terser-5.7.0.tgz#a761eeec206bc87b605ab13029876ead938ae693\"\n-  integrity sha512-HP5/9hp2UaZt5fYkuhNBR8YyRcT8juw8+uFbAme53iN9hblvKnLUTKkmwJG6ocWpIKf8UK4DoeWG4ty0J6S6/g==\n+  version \"5.7.1\"\n+  resolved \"https://registry.yarnpkg.com/terser/-/terser-5.7.1.tgz#2dc7a61009b66bb638305cb2a824763b116bf784\"\n+  integrity sha512-b3e+d5JbHAe/JSjwsC3Zn55wsBIM7AsHLjKxT31kGCldgbpFePaFo+PiddtO6uwRZWRw7sPXmAN8dTW61xmnSg==\n   dependencies:\n     commander \"^2.20.0\"\n     source-map \"~0.7.2\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12990",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12990/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12990/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12990/events",
    "html_url": "https://github.com/webpack/webpack/pull/12990",
    "id": 841064068,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjAwODUzODYw",
    "number": 12990,
    "title": "memory usage improvements, add GC support for memory cache, persistent cache only mode",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2021-03-25T15:47:40Z",
    "updated_at": "2021-04-01T16:14:20Z",
    "closed_at": "2021-04-01T16:14:17Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12990",
      "html_url": "https://github.com/webpack/webpack/pull/12990",
      "diff_url": "https://github.com/webpack/webpack/pull/12990.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12990.patch",
      "merged_at": "2021-04-01T16:14:16Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* adds workaround for a v8 memory leak problem in ICs when code becomes optimized\r\n* add GC to the memory cache and make it configurable\r\n  * memory GC happens by default when persistent cache is enabled and in development mode\r\n  * otherwise memory cache is kept forever\r\n* make maxAge for persistent cache configurable\r\n* GC the oldest content file even if it's not touched (to keep cache size small)\r\n* filesystem cache will now no longer cache in memory, but restore items from disk again when it was persisted\r\n* Caches will be cleared on shutdown. That should allow to GC cache items once they are serialized.\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix, memory leak, feature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nn/a\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* new option for `cache.type === \"memory\"`: `cache.maxGenerations`: Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\r\n* new options for `cache.type === \"filesystem\"`:\r\n  * `cache.maxMemoryGenerations`: Number of generations unused cache entries stay in memory cache at minimum (0 = no memory cache used, 1 = may be removed after unused for a single compilation, ..., Infinity: kept forever). Cache entries will be deserialized from disk when removed from memory cache.\r\n    * `cache.maxMemoryGenerations: 0`: Persistent cache will not use an additional memory cache. It will only cache items in memory until they are serialized to disk. Once serialized the next read will deserialize them from disk again. This mode will minimize memory usage, but introduces a performance cost.\r\n    * `cache.maxMemoryGenerations: 1`: This will clear items from memory cache once they are serialized and unused for at least one compilation. When they are used again they will be deserialized from disk. This mode will minimize the memory usage while still keeping active items in memory cache.\r\n    * `cache.maxMemoryGenerations` small numbers > 0 will have a performance cost for the GC operation. It gets lower as the number increases.\r\n    * `cache.maxMemoryGenerations` default to 10 in development mode and to `Infinity` in production mode.\r\n  * `cache.maxAge`: Time for which unused cache entries stay in the filesystem cache at minimum (in milliseconds).\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12990/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "8300d187943e3420a328d34dc4a85121963601cb",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -903,6 +903,10 @@ export interface WebpackOptions {\n  * Options object for in-memory caching.\n  */\n export interface MemoryCacheOptions {\n+\t/**\n+\t * Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\n+\t */\n+\tmaxGenerations?: number;\n \t/**\n \t * In memory caching.\n \t */\n@@ -949,6 +953,14 @@ export interface FileCacheOptions {\n \t * List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\n \t */\n \tmanagedPaths?: string[];\n+\t/**\n+\t * Time for which unused cache entries stay in the filesystem cache at minimum (in milliseconds).\n+\t */\n+\tmaxAge?: number;\n+\t/**\n+\t * Number of generations unused cache entries stay in memory cache at minimum (0 = no memory cache used, 1 = may be removed after unused for a single compilation, ..., Infinity: kept forever). Cache entries will be deserialized from disk when removed from memory cache.\n+\t */\n+\tmaxMemoryGenerations?: number;\n \t/**\n \t * Name for the cache. Different names will lead to different coexisting caches.\n \t */"
      },
      {
        "sha": "ba6ab12f7b15a81dd3d53bf45e40b222b54c3e5c",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -1101,6 +1101,10 @@ ${other}`);\n \tclose(callback) {\n \t\tthis.hooks.shutdown.callAsync(err => {\n \t\t\tif (err) return callback(err);\n+\t\t\t// Get rid of reference to last compilation to avoid leaking memory\n+\t\t\t// We can't run this._cleanupLastCompilation() as the Stats to this compilation\n+\t\t\t// might be still in use. We try to get rid for the reference to the cache instead.\n+\t\t\tthis._lastCompilation = undefined;\n \t\t\tthis.cache.shutdown(callback);\n \t\t});\n \t}"
      },
      {
        "sha": "87a5f1a3cb20b69542b0579ec523e57e9726b16e",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 44,
        "deletions": 0,
        "changes": 44,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -412,6 +412,14 @@ class SnapshotOptimization {\n \t\t} times referenced)`;\n \t}\n \n+\tclear() {\n+\t\tthis._map.clear();\n+\t\tthis._statItemsShared = 0;\n+\t\tthis._statItemsUnshared = 0;\n+\t\tthis._statSharedSnapshots = 0;\n+\t\tthis._statReusedSharedSnapshots = 0;\n+\t}\n+\n \tstoreUnsharedSnapshot(snapshot, locations) {\n \t\tif (locations === undefined) return;\n \t\tconst optimizationEntry = {\n@@ -984,6 +992,42 @@ class FileSystemInfo {\n \t\t}\n \t}\n \n+\tclear() {\n+\t\tthis._remainingLogs = this.logger ? 40 : 0;\n+\t\tif (this._loggedPaths !== undefined) this._loggedPaths.clear();\n+\n+\t\tthis._snapshotCache = new WeakMap();\n+\t\tthis._fileTimestampsOptimization.clear();\n+\t\tthis._fileHashesOptimization.clear();\n+\t\tthis._fileTshsOptimization.clear();\n+\t\tthis._contextTimestampsOptimization.clear();\n+\t\tthis._contextHashesOptimization.clear();\n+\t\tthis._contextTshsOptimization.clear();\n+\t\tthis._missingExistenceOptimization.clear();\n+\t\tthis._managedItemInfoOptimization.clear();\n+\t\tthis._managedFilesOptimization.clear();\n+\t\tthis._managedContextsOptimization.clear();\n+\t\tthis._managedMissingOptimization.clear();\n+\t\tthis._fileTimestamps.clear();\n+\t\tthis._fileHashes.clear();\n+\t\tthis._fileTshs.clear();\n+\t\tthis._contextTimestamps.clear();\n+\t\tthis._contextHashes.clear();\n+\t\tthis._contextTshs.clear();\n+\t\tthis._managedItems.clear();\n+\t\tthis._managedItems.clear();\n+\n+\t\tthis._cachedDeprecatedFileTimestamps = undefined;\n+\t\tthis._cachedDeprecatedContextTimestamps = undefined;\n+\n+\t\tthis._statCreatedSnapshots = 0;\n+\t\tthis._statTestedSnapshotsCached = 0;\n+\t\tthis._statTestedSnapshotsNotCached = 0;\n+\t\tthis._statTestedChildrenCached = 0;\n+\t\tthis._statTestedChildrenNotCached = 0;\n+\t\tthis._statTestedEntries = 0;\n+\t}\n+\n \t/**\n \t * @param {Map<string, FileSystemInfoEntry | \"ignore\" | null>} map timestamps\n \t * @returns {void}"
      },
      {
        "sha": "b2a3f8fa315ddcc038f1179e837ac7bee13b641a",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -749,6 +749,9 @@ class NormalModule extends Module {\n \t\t\t\t}\n \t\t\t},\n \t\t\t(err, result) => {\n+\t\t\t\t// Cleanup loaderContext to avoid leaking memory in ICs\n+\t\t\t\tloaderContext._compilation = loaderContext._compiler = loaderContext._module = loaderContext.fs = undefined;\n+\n \t\t\t\tif (!result) {\n \t\t\t\t\treturn processResult(\n \t\t\t\t\t\terr || new Error(\"No result from loader-runner processing\"),"
      },
      {
        "sha": "0c9877b88daf0aeda99f5b349d13b802de8d3150",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 24,
        "deletions": 7,
        "changes": 31,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -521,9 +521,17 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\tconst cacheOptions = options.cache;\n \t\t\tswitch (cacheOptions.type) {\n \t\t\t\tcase \"memory\": {\n-\t\t\t\t\t//@ts-expect-error https://github.com/microsoft/TypeScript/issues/41697\n-\t\t\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n-\t\t\t\t\tnew MemoryCachePlugin().apply(compiler);\n+\t\t\t\t\tif (isFinite(cacheOptions.maxGenerations)) {\n+\t\t\t\t\t\t//@ts-expect-error https://github.com/microsoft/TypeScript/issues/41697\n+\t\t\t\t\t\tconst MemoryWithGcCachePlugin = require(\"./cache/MemoryWithGcCachePlugin\");\n+\t\t\t\t\t\tnew MemoryWithGcCachePlugin({\n+\t\t\t\t\t\t\tmaxGenerations: cacheOptions.maxGenerations\n+\t\t\t\t\t\t}).apply(compiler);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\t//@ts-expect-error https://github.com/microsoft/TypeScript/issues/41697\n+\t\t\t\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n+\t\t\t\t\t\tnew MemoryCachePlugin().apply(compiler);\n+\t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t\tcase \"filesystem\": {\n@@ -532,9 +540,17 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\tconst list = cacheOptions.buildDependencies[key];\n \t\t\t\t\t\tnew AddBuildDependenciesPlugin(list).apply(compiler);\n \t\t\t\t\t}\n-\t\t\t\t\t//@ts-expect-error https://github.com/microsoft/TypeScript/issues/41697\n-\t\t\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n-\t\t\t\t\tnew MemoryCachePlugin().apply(compiler);\n+\t\t\t\t\tif (!isFinite(cacheOptions.maxMemoryGenerations)) {\n+\t\t\t\t\t\t//@ts-expect-error https://github.com/microsoft/TypeScript/issues/41697\n+\t\t\t\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n+\t\t\t\t\t\tnew MemoryCachePlugin().apply(compiler);\n+\t\t\t\t\t} else if (cacheOptions.maxMemoryGenerations !== 0) {\n+\t\t\t\t\t\t//@ts-expect-error https://github.com/microsoft/TypeScript/issues/41697\n+\t\t\t\t\t\tconst MemoryWithGcCachePlugin = require(\"./cache/MemoryWithGcCachePlugin\");\n+\t\t\t\t\t\tnew MemoryWithGcCachePlugin({\n+\t\t\t\t\t\t\tmaxGenerations: cacheOptions.maxMemoryGenerations\n+\t\t\t\t\t\t}).apply(compiler);\n+\t\t\t\t\t}\n \t\t\t\t\tswitch (cacheOptions.store) {\n \t\t\t\t\t\tcase \"pack\": {\n \t\t\t\t\t\t\tconst IdleFileCachePlugin = require(\"./cache/IdleFileCachePlugin\");\n@@ -549,7 +565,8 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\t\t\t\tlogger: compiler.getInfrastructureLogger(\n \t\t\t\t\t\t\t\t\t\t\"webpack.cache.PackFileCacheStrategy\"\n \t\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\t\tsnapshot: options.snapshot\n+\t\t\t\t\t\t\t\t\tsnapshot: options.snapshot,\n+\t\t\t\t\t\t\t\t\tmaxAge: cacheOptions.maxAge\n \t\t\t\t\t\t\t\t}),\n \t\t\t\t\t\t\t\tcacheOptions.idleTimeout,\n \t\t\t\t\t\t\t\tcacheOptions.idleTimeoutForInitialStore"
      },
      {
        "sha": "acd681520b6ec60f8ad742bdc4d48e9f4d99d4a7",
        "filename": "lib/cache/IdleFileCachePlugin.js",
        "status": "modified",
        "additions": 26,
        "deletions": 16,
        "changes": 42,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FIdleFileCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FIdleFileCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FIdleFileCachePlugin.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -30,7 +30,7 @@ class IdleFileCachePlugin {\n \t * @returns {void}\n \t */\n \tapply(compiler) {\n-\t\tconst strategy = this.strategy;\n+\t\tlet strategy = this.strategy;\n \t\tconst idleTimeout = this.idleTimeout;\n \t\tconst idleTimeoutForInitialStore = Math.min(\n \t\t\tidleTimeout,\n@@ -54,20 +54,27 @@ class IdleFileCachePlugin {\n \t\tcompiler.cache.hooks.get.tapPromise(\n \t\t\t{ name: \"IdleFileCachePlugin\", stage: Cache.STAGE_DISK },\n \t\t\t(identifier, etag, gotHandlers) => {\n-\t\t\t\treturn strategy.restore(identifier, etag).then(cacheEntry => {\n-\t\t\t\t\tif (cacheEntry === undefined) {\n-\t\t\t\t\t\tgotHandlers.push((result, callback) => {\n-\t\t\t\t\t\t\tif (result !== undefined) {\n-\t\t\t\t\t\t\t\tpendingIdleTasks.set(identifier, () =>\n-\t\t\t\t\t\t\t\t\tstrategy.store(identifier, etag, result)\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t});\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\treturn cacheEntry;\n-\t\t\t\t\t}\n-\t\t\t\t});\n+\t\t\t\tconst restore = () =>\n+\t\t\t\t\tstrategy.restore(identifier, etag).then(cacheEntry => {\n+\t\t\t\t\t\tif (cacheEntry === undefined) {\n+\t\t\t\t\t\t\tgotHandlers.push((result, callback) => {\n+\t\t\t\t\t\t\t\tif (result !== undefined) {\n+\t\t\t\t\t\t\t\t\tpendingIdleTasks.set(identifier, () =>\n+\t\t\t\t\t\t\t\t\t\tstrategy.store(identifier, etag, result)\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\treturn cacheEntry;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\tconst pendingTask = pendingIdleTasks.get(identifier);\n+\t\t\t\tif (pendingTask !== undefined) {\n+\t\t\t\t\tpendingIdleTasks.delete(identifier);\n+\t\t\t\t\treturn pendingTask().then(restore);\n+\t\t\t\t}\n+\t\t\t\treturn restore();\n \t\t\t}\n \t\t);\n \n@@ -101,7 +108,10 @@ class IdleFileCachePlugin {\n \t\t\t\t\t\treportProgress(1, `stored`);\n \t\t\t\t\t});\n \t\t\t\t}\n-\t\t\t\treturn currentIdlePromise;\n+\t\t\t\treturn currentIdlePromise.then(() => {\n+\t\t\t\t\t// Reset strategy\n+\t\t\t\t\tif (strategy.clear) strategy.clear();\n+\t\t\t\t});\n \t\t\t}\n \t\t);\n "
      },
      {
        "sha": "cec61acdf650672fb76b6d2f18a5b10279b46ba4",
        "filename": "lib/cache/MemoryCachePlugin.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FMemoryCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FMemoryCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FMemoryCachePlugin.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -46,6 +46,12 @@ class MemoryCachePlugin {\n \t\t\t\t});\n \t\t\t}\n \t\t);\n+\t\tcompiler.cache.hooks.shutdown.tap(\n+\t\t\t{ name: \"MemoryCachePlugin\", stage: Cache.STAGE_MEMORY },\n+\t\t\t() => {\n+\t\t\t\tcache.clear();\n+\t\t\t}\n+\t\t);\n \t}\n }\n module.exports = MemoryCachePlugin;"
      },
      {
        "sha": "7d652f56611fae497014c986b7bab6bcfe9947a6",
        "filename": "lib/cache/MemoryWithGcCachePlugin.js",
        "status": "added",
        "additions": 129,
        "deletions": 0,
        "changes": 129,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FMemoryWithGcCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FMemoryWithGcCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FMemoryWithGcCachePlugin.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -0,0 +1,129 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const Cache = require(\"../Cache\");\n+\n+/** @typedef {import(\"webpack-sources\").Source} Source */\n+/** @typedef {import(\"../Cache\").Etag} Etag */\n+/** @typedef {import(\"../Compiler\")} Compiler */\n+/** @typedef {import(\"../Module\")} Module */\n+\n+class MemoryWithGcCachePlugin {\n+\tconstructor({ maxGenerations }) {\n+\t\tthis._maxGenerations = maxGenerations;\n+\t}\n+\t/**\n+\t * Apply the plugin\n+\t * @param {Compiler} compiler the compiler instance\n+\t * @returns {void}\n+\t */\n+\tapply(compiler) {\n+\t\tconst maxGenerations = this._maxGenerations;\n+\t\t/** @type {Map<string, { etag: Etag | null, data: any }>} */\n+\t\tconst cache = new Map();\n+\t\t/** @type {Map<string, { entry: { etag: Etag | null, data: any }, until: number }>} */\n+\t\tconst oldCache = new Map();\n+\t\tlet generation = 0;\n+\t\tlet cachePosition = 0;\n+\t\tconst logger = compiler.getInfrastructureLogger(\"MemoryWithGcCachePlugin\");\n+\t\tcompiler.hooks.afterDone.tap(\"MemoryWithGcCachePlugin\", () => {\n+\t\t\tgeneration++;\n+\t\t\tlet clearedEntries = 0;\n+\t\t\tlet lastClearedIdentifier;\n+\t\t\tfor (const [identifier, entry] of oldCache) {\n+\t\t\t\tif (entry.until > generation) break;\n+\n+\t\t\t\toldCache.delete(identifier);\n+\t\t\t\tif (cache.get(identifier) === undefined) {\n+\t\t\t\t\tcache.delete(identifier);\n+\t\t\t\t\tclearedEntries++;\n+\t\t\t\t\tlastClearedIdentifier = identifier;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tif (clearedEntries > 0 || oldCache.size > 0) {\n+\t\t\t\tlogger.log(\n+\t\t\t\t\t`${cache.size - oldCache.size} active entries, ${\n+\t\t\t\t\t\toldCache.size\n+\t\t\t\t\t} recently unused cached entries${\n+\t\t\t\t\t\tclearedEntries > 0\n+\t\t\t\t\t\t\t? `, ${clearedEntries} old unused cache entries removed e. g. ${lastClearedIdentifier}`\n+\t\t\t\t\t\t\t: \"\"\n+\t\t\t\t\t}`\n+\t\t\t\t);\n+\t\t\t}\n+\t\t\tlet i = (cache.size / maxGenerations) | 0;\n+\t\t\tlet j = cachePosition >= cache.size ? 0 : cachePosition;\n+\t\t\tcachePosition = j + i;\n+\t\t\tfor (const [identifier, entry] of cache) {\n+\t\t\t\tif (j !== 0) {\n+\t\t\t\t\tj--;\n+\t\t\t\t\tcontinue;\n+\t\t\t\t}\n+\t\t\t\tif (entry !== undefined) {\n+\t\t\t\t\t// We don't delete the cache entry, but set it to undefined instead\n+\t\t\t\t\t// This reserves the location in the data table and avoids rehashing\n+\t\t\t\t\t// when constantly adding and removing entries.\n+\t\t\t\t\t// It will be deleted when removed from oldCache.\n+\t\t\t\t\tcache.set(identifier, undefined);\n+\t\t\t\t\toldCache.delete(identifier);\n+\t\t\t\t\toldCache.set(identifier, {\n+\t\t\t\t\t\tentry,\n+\t\t\t\t\t\tuntil: generation + maxGenerations\n+\t\t\t\t\t});\n+\t\t\t\t\tif (i-- === 0) break;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+\t\tcompiler.cache.hooks.store.tap(\n+\t\t\t{ name: \"MemoryWithGcCachePlugin\", stage: Cache.STAGE_MEMORY },\n+\t\t\t(identifier, etag, data) => {\n+\t\t\t\tcache.set(identifier, { etag, data });\n+\t\t\t}\n+\t\t);\n+\t\tcompiler.cache.hooks.get.tap(\n+\t\t\t{ name: \"MemoryWithGcCachePlugin\", stage: Cache.STAGE_MEMORY },\n+\t\t\t(identifier, etag, gotHandlers) => {\n+\t\t\t\tconst cacheEntry = cache.get(identifier);\n+\t\t\t\tif (cacheEntry === null) {\n+\t\t\t\t\treturn null;\n+\t\t\t\t} else if (cacheEntry !== undefined) {\n+\t\t\t\t\treturn cacheEntry.etag === etag ? cacheEntry.data : null;\n+\t\t\t\t}\n+\t\t\t\tconst oldCacheEntry = oldCache.get(identifier);\n+\t\t\t\tif (oldCacheEntry !== undefined) {\n+\t\t\t\t\tconst cacheEntry = oldCacheEntry.entry;\n+\t\t\t\t\tif (cacheEntry === null) {\n+\t\t\t\t\t\toldCache.delete(identifier);\n+\t\t\t\t\t\tcache.set(identifier, cacheEntry);\n+\t\t\t\t\t\treturn null;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tif (cacheEntry.etag !== etag) return null;\n+\t\t\t\t\t\toldCache.delete(identifier);\n+\t\t\t\t\t\tcache.set(identifier, cacheEntry);\n+\t\t\t\t\t\treturn cacheEntry.data;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tgotHandlers.push((result, callback) => {\n+\t\t\t\t\tif (result === undefined) {\n+\t\t\t\t\t\tcache.set(identifier, null);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tcache.set(identifier, { etag, data: result });\n+\t\t\t\t\t}\n+\t\t\t\t\treturn callback();\n+\t\t\t\t});\n+\t\t\t}\n+\t\t);\n+\t\tcompiler.cache.hooks.shutdown.tap(\n+\t\t\t{ name: \"MemoryWithGcCachePlugin\", stage: Cache.STAGE_MEMORY },\n+\t\t\t() => {\n+\t\t\t\tcache.clear();\n+\t\t\t\toldCache.clear();\n+\t\t\t}\n+\t\t);\n+\t}\n+}\n+module.exports = MemoryWithGcCachePlugin;"
      },
      {
        "sha": "176119174233d24d5fa0d49531f9cb98c493fe22",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 94,
        "deletions": 12,
        "changes": 106,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -75,7 +75,6 @@ makeSerializable(\n \n const MIN_CONTENT_SIZE = 1024 * 1024; // 1 MB\n const CONTENT_COUNT_TO_MERGE = 10;\n-const MAX_AGE = 1000 * 60 * 60 * 24 * 60; // 1 month\n const MAX_ITEMS_IN_FRESH_PACK = 50000;\n \n class PackItemInfo {\n@@ -94,7 +93,7 @@ class PackItemInfo {\n }\n \n class Pack {\n-\tconstructor(logger) {\n+\tconstructor(logger, maxAge) {\n \t\t/** @type {Map<string, PackItemInfo>} */\n \t\tthis.itemInfo = new Map();\n \t\t/** @type {string[]} */\n@@ -105,6 +104,7 @@ class Pack {\n \t\tthis.content = [];\n \t\tthis.invalid = false;\n \t\tthis.logger = logger;\n+\t\tthis.maxAge = maxAge;\n \t}\n \n \t/**\n@@ -167,6 +167,21 @@ class Pack {\n \t\t}\n \t}\n \n+\tgetContentStats() {\n+\t\tlet count = 0;\n+\t\tlet size = 0;\n+\t\tfor (const content of this.content) {\n+\t\t\tif (content !== undefined) {\n+\t\t\t\tcount++;\n+\t\t\t\tconst s = content.getSize();\n+\t\t\t\tif (s > 0) {\n+\t\t\t\t\tsize += s;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\treturn { count, size };\n+\t}\n+\n \t/**\n \t * @returns {number} new location of data entries\n \t */\n@@ -182,7 +197,7 @@ class Pack {\n \t\tconst now = Date.now();\n \t\tfor (const identifier of items) {\n \t\t\tconst info = this.itemInfo.get(identifier);\n-\t\t\tif (now - info.lastAccess > MAX_AGE) {\n+\t\t\tif (now - info.lastAccess > this.maxAge) {\n \t\t\t\tthis.itemInfo.delete(identifier);\n \t\t\t\titems.delete(identifier);\n \t\t\t\tusedItems.delete(identifier);\n@@ -194,9 +209,10 @@ class Pack {\n \t\t}\n \t\tif (count > 0) {\n \t\t\tthis.logger.log(\n-\t\t\t\t\"Garbage Collected %d old items at pack %d e. g. %s\",\n+\t\t\t\t\"Garbage Collected %d old items at pack %d (%d items remaining) e. g. %s\",\n \t\t\t\tcount,\n \t\t\t\tnewLoc,\n+\t\t\t\titems.size,\n \t\t\t\tlastGC\n \t\t\t);\n \t\t}\n@@ -426,10 +442,45 @@ class Pack {\n \t\t}\n \t}\n \n+\t/**\n+\t * Find the content with the oldest item and run GC on that.\n+\t * Only runs for one content to avoid large invalidation.\n+\t */\n+\t_gcOldestContent() {\n+\t\t/** @type {PackItemInfo} */\n+\t\tlet oldest = undefined;\n+\t\tfor (const info of this.itemInfo.values()) {\n+\t\t\tif (oldest === undefined || info.lastAccess < oldest.lastAccess) {\n+\t\t\t\toldest = info;\n+\t\t\t}\n+\t\t}\n+\t\tif (Date.now() - oldest.lastAccess > this.maxAge) {\n+\t\t\tconst loc = oldest.location;\n+\t\t\tif (loc < 0) return;\n+\t\t\tconst content = this.content[loc];\n+\t\t\tconst items = new Set(content.items);\n+\t\t\tconst usedItems = new Set(content.used);\n+\t\t\tthis._gcAndUpdateLocation(items, usedItems, loc);\n+\n+\t\t\tthis.content[loc] =\n+\t\t\t\titems.size > 0\n+\t\t\t\t\t? new PackContent(items, usedItems, async () => {\n+\t\t\t\t\t\t\tawait content.unpack();\n+\t\t\t\t\t\t\tconst map = new Map();\n+\t\t\t\t\t\t\tfor (const identifier of items) {\n+\t\t\t\t\t\t\t\tmap.set(identifier, content.content.get(identifier));\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn new PackContentItems(map);\n+\t\t\t\t\t  })\n+\t\t\t\t\t: undefined;\n+\t\t}\n+\t}\n+\n \tserialize({ write, writeSeparate }) {\n \t\tthis._persistFreshContent();\n \t\tthis._optimizeSmallContent();\n \t\tthis._optimizeUnusedContent();\n+\t\tthis._gcOldestContent();\n \t\tfor (const identifier of this.itemInfo.keys()) {\n \t\t\twrite(identifier);\n \t\t}\n@@ -727,6 +778,7 @@ class PackFileCacheStrategy {\n \t * @param {string} options.version version identifier\n \t * @param {Logger} options.logger a logger\n \t * @param {SnapshotOptions} options.snapshot options regarding snapshotting\n+\t * @param {number} options.maxAge max age of cache items\n \t */\n \tconstructor({\n \t\tcompiler,\n@@ -735,7 +787,8 @@ class PackFileCacheStrategy {\n \t\tcacheLocation,\n \t\tversion,\n \t\tlogger,\n-\t\tsnapshot\n+\t\tsnapshot,\n+\t\tmaxAge\n \t}) {\n \t\tthis.fileSerializer = createFileSerializer(fs);\n \t\tthis.fileSystemInfo = new FileSystemInfo(fs, {\n@@ -748,6 +801,7 @@ class PackFileCacheStrategy {\n \t\tthis.cacheLocation = cacheLocation;\n \t\tthis.version = version;\n \t\tthis.logger = logger;\n+\t\tthis.maxAge = maxAge;\n \t\tthis.snapshot = snapshot;\n \t\t/** @type {Set<string>} */\n \t\tthis.buildDependencies = new Set();\n@@ -761,6 +815,14 @@ class PackFileCacheStrategy {\n \t\tthis.buildSnapshot = undefined;\n \t\t/** @type {Promise<Pack>} */\n \t\tthis.packPromise = this._openPack();\n+\t\tthis.storePromise = Promise.resolve();\n+\t}\n+\n+\t_getPack() {\n+\t\tif (this.packPromise === undefined) {\n+\t\t\tthis.packPromise = this.storePromise.then(() => this._openPack());\n+\t\t}\n+\t\treturn this.packPromise;\n \t}\n \n \t/**\n@@ -899,6 +961,7 @@ class PackFileCacheStrategy {\n \t\t\t})\n \t\t\t.then(pack => {\n \t\t\t\tif (pack) {\n+\t\t\t\t\tpack.maxAge = this.maxAge;\n \t\t\t\t\tthis.buildSnapshot = buildSnapshot;\n \t\t\t\t\tif (buildDependencies) this.buildDependencies = buildDependencies;\n \t\t\t\t\tif (newBuildDependencies)\n@@ -907,14 +970,14 @@ class PackFileCacheStrategy {\n \t\t\t\t\tthis.resolveBuildDependenciesSnapshot = resolveBuildDependenciesSnapshot;\n \t\t\t\t\treturn pack;\n \t\t\t\t}\n-\t\t\t\treturn new Pack(logger);\n+\t\t\t\treturn new Pack(logger, this.maxAge);\n \t\t\t})\n \t\t\t.catch(err => {\n \t\t\t\tthis.logger.warn(\n \t\t\t\t\t`Restoring pack from ${cacheLocation}.pack failed: ${err}`\n \t\t\t\t);\n \t\t\t\tthis.logger.debug(err.stack);\n-\t\t\t\treturn new Pack(logger);\n+\t\t\t\treturn new Pack(logger, this.maxAge);\n \t\t\t});\n \t}\n \n@@ -925,7 +988,7 @@ class PackFileCacheStrategy {\n \t * @returns {Promise<void>} promise\n \t */\n \tstore(identifier, etag, data) {\n-\t\treturn this.packPromise.then(pack => {\n+\t\treturn this._getPack().then(pack => {\n \t\t\tpack.set(identifier, etag === null ? null : etag.toString(), data);\n \t\t});\n \t}\n@@ -936,7 +999,7 @@ class PackFileCacheStrategy {\n \t * @returns {Promise<any>} promise to the cached content\n \t */\n \trestore(identifier, etag) {\n-\t\treturn this.packPromise\n+\t\treturn this._getPack()\n \t\t\t.then(pack =>\n \t\t\t\tpack.get(identifier, etag === null ? null : etag.toString())\n \t\t\t)\n@@ -955,8 +1018,11 @@ class PackFileCacheStrategy {\n \t}\n \n \tafterAllStored() {\n+\t\tconst packPromise = this.packPromise;\n+\t\tif (packPromise === undefined) return Promise.resolve();\n \t\tconst reportProgress = ProgressPlugin.getReporter(this.compiler);\n-\t\treturn this.packPromise\n+\t\tthis.packPromise = undefined;\n+\t\treturn (this.storePromise = packPromise\n \t\t\t.then(pack => {\n \t\t\t\tif (!pack.invalid) return;\n \t\t\t\tthis.logger.log(`Storing pack...`);\n@@ -1100,7 +1166,13 @@ class PackFileCacheStrategy {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tthis.newBuildDependencies.clear();\n \t\t\t\t\t\t\tthis.logger.timeEnd(`store pack`);\n-\t\t\t\t\t\t\tthis.logger.log(`Stored pack`);\n+\t\t\t\t\t\t\tconst stats = pack.getContentStats();\n+\t\t\t\t\t\t\tthis.logger.log(\n+\t\t\t\t\t\t\t\t\"Stored pack (%d items, %d files, %d MiB)\",\n+\t\t\t\t\t\t\t\tpack.itemInfo.size,\n+\t\t\t\t\t\t\t\tstats.count,\n+\t\t\t\t\t\t\t\tMath.round(stats.size / 1024 / 1024)\n+\t\t\t\t\t\t\t);\n \t\t\t\t\t\t})\n \t\t\t\t\t\t.catch(err => {\n \t\t\t\t\t\t\tthis.logger.timeEnd(`store pack`);\n@@ -1112,7 +1184,17 @@ class PackFileCacheStrategy {\n \t\t\t.catch(err => {\n \t\t\t\tthis.logger.warn(`Caching failed for pack: ${err}`);\n \t\t\t\tthis.logger.debug(err.stack);\n-\t\t\t});\n+\t\t\t}));\n+\t}\n+\n+\tclear() {\n+\t\tthis.fileSystemInfo.clear();\n+\t\tthis.buildDependencies.clear();\n+\t\tthis.newBuildDependencies.clear();\n+\t\tthis.resolveBuildDependenciesSnapshot = undefined;\n+\t\tthis.resolveResults = undefined;\n+\t\tthis.buildSnapshot = undefined;\n+\t\tthis.packPromise = undefined;\n \t}\n }\n "
      },
      {
        "sha": "7dcda49a7160fa86635bb066830c6012a95edd7e",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -163,7 +163,8 @@ const applyWebpackOptionsDefaults = options => {\n \t);\n \tapplyCacheDefaults(options.cache, {\n \t\tname: name || \"default\",\n-\t\tmode: mode || \"production\"\n+\t\tmode: mode || \"production\",\n+\t\tdevelopment\n \t});\n \tconst cache = !!options.cache;\n \n@@ -254,9 +255,10 @@ const applyExperimentsDefaults = experiments => {\n  * @param {Object} options options\n  * @param {string} options.name name\n  * @param {string} options.mode mode\n+ * @param {boolean} options.development is development mode\n  * @returns {void}\n  */\n-const applyCacheDefaults = (cache, { name, mode }) => {\n+const applyCacheDefaults = (cache, { name, mode, development }) => {\n \tif (cache === false) return;\n \tswitch (cache.type) {\n \t\tcase \"filesystem\":\n@@ -294,10 +296,15 @@ const applyCacheDefaults = (cache, { name, mode }) => {\n \t\t\tD(cache, \"store\", \"pack\");\n \t\t\tD(cache, \"idleTimeout\", 60000);\n \t\t\tD(cache, \"idleTimeoutForInitialStore\", 0);\n+\t\t\tD(cache, \"maxMemoryGenerations\", development ? 10 : Infinity);\n+\t\t\tD(cache, \"maxAge\", 1000 * 60 * 60 * 24 * 60); // 1 month\n \t\t\tD(cache.buildDependencies, \"defaultWebpack\", [\n \t\t\t\tpath.resolve(__dirname, \"..\") + path.sep\n \t\t\t]);\n \t\t\tbreak;\n+\t\tcase \"memory\":\n+\t\t\tD(cache, \"maxGenerations\", Infinity);\n+\t\t\tbreak;\n \t}\n };\n "
      },
      {
        "sha": "761d9c7aa1899754c579c3fa259cf207054c45e6",
        "filename": "lib/config/normalization.js",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fconfig%2Fnormalization.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fconfig%2Fnormalization.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fnormalization.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -121,13 +121,16 @@ const getNormalizedWebpackOptions = config => {\n \t\t\tif (cache === false) return false;\n \t\t\tif (cache === true) {\n \t\t\t\treturn {\n-\t\t\t\t\ttype: \"memory\"\n+\t\t\t\t\ttype: \"memory\",\n+\t\t\t\t\tmaxGenerations: undefined\n \t\t\t\t};\n \t\t\t}\n \t\t\tswitch (cache.type) {\n \t\t\t\tcase \"filesystem\":\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"filesystem\",\n+\t\t\t\t\t\tmaxMemoryGenerations: cache.maxMemoryGenerations,\n+\t\t\t\t\t\tmaxAge: cache.maxAge,\n \t\t\t\t\t\tbuildDependencies: cloneObject(cache.buildDependencies),\n \t\t\t\t\t\tcacheDirectory: cache.cacheDirectory,\n \t\t\t\t\t\tcacheLocation: cache.cacheLocation,\n@@ -141,7 +144,8 @@ const getNormalizedWebpackOptions = config => {\n \t\t\t\tcase undefined:\n \t\t\t\tcase \"memory\":\n \t\t\t\t\treturn {\n-\t\t\t\t\t\ttype: \"memory\"\n+\t\t\t\t\t\ttype: \"memory\",\n+\t\t\t\t\t\tmaxGenerations: cache.maxGenerations\n \t\t\t\t\t};\n \t\t\t\tdefault:\n \t\t\t\t\t// @ts-expect-error Property 'type' does not exist on type 'never'. ts(2339)"
      },
      {
        "sha": "dc913bf1f8eca39209642140ccbfaf9a640a4ffa",
        "filename": "lib/javascript/JavascriptParser.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fjavascript%2FJavascriptParser.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fjavascript%2FJavascriptParser.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptParser.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -942,6 +942,10 @@ class JavascriptParser extends Parser {\n \t\t\t\t\t\t\t.setRange(expr.range);\n \t\t\t\t\t}\n \t\t\t\t});\n+\t\t\tthis.hooks.finish.tap(\"JavascriptParser\", () => {\n+\t\t\t\t// Cleanup for GC\n+\t\t\t\tcachedExpression = cachedInfo = undefined;\n+\t\t\t});\n \t\t};\n \t\ttapEvaluateWithVariableInfo(\"Identifier\", expr => {\n \t\t\tconst info = this.getVariableInfo("
      },
      {
        "sha": "780d04410f20ba838f634e9cafb706b321ce2164",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "modified",
        "additions": 25,
        "deletions": 18,
        "changes": 43,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -253,13 +253,13 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t */\n \tserialize(data, context) {\n \t\t/** @type {any[]} */\n-\t\tconst result = [CURRENT_VERSION];\n+\t\tlet result = [CURRENT_VERSION];\n \t\tlet currentPos = 0;\n-\t\tconst referenceable = new Map();\n+\t\tlet referenceable = new Map();\n \t\tconst addReferenceable = item => {\n \t\t\treferenceable.set(item, currentPos++);\n \t\t};\n-\t\tconst bufferDedupeMap = new Map();\n+\t\tlet bufferDedupeMap = new Map();\n \t\tconst dedupeBuffer = buf => {\n \t\t\tconst len = buf.length;\n \t\t\tconst entry = bufferDedupeMap.get(len);\n@@ -322,7 +322,7 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t}\n \t\t};\n \t\tlet currentPosTypeLookup = 0;\n-\t\tconst objectTypeLookup = new Map();\n+\t\tlet objectTypeLookup = new Map();\n \t\tconst cycleStack = new Set();\n \t\tconst stackToString = item => {\n \t\t\tconst arr = Array.from(cycleStack);\n@@ -370,7 +370,7 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t.join(\" -> \");\n \t\t};\n \t\tlet hasDebugInfoAttached;\n-\t\tconst ctx = {\n+\t\tlet ctx = {\n \t\t\twrite(value, key) {\n \t\t\t\ttry {\n \t\t\t\t\tprocess(value);\n@@ -524,13 +524,18 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\tfor (const item of data) {\n \t\t\t\tprocess(item);\n \t\t\t}\n+\t\t\treturn result;\n \t\t} catch (e) {\n \t\t\tif (e === NOT_SERIALIZABLE) return null;\n \n \t\t\tthrow e;\n+\t\t} finally {\n+\t\t\t// Get rid of these references to avoid leaking memory\n+\t\t\t// This happens because the optimized code v8 generates\n+\t\t\t// is optimized for our \"ctx.write\" method so it will reference\n+\t\t\t// it from e. g. Dependency.prototype.serialize -(IC)-> ctx.write\n+\t\t\tdata = result = referenceable = bufferDedupeMap = objectTypeLookup = ctx = undefined;\n \t\t}\n-\n-\t\treturn result;\n \t}\n \n \t/**\n@@ -558,8 +563,8 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t};\n \t\tlet currentPosTypeLookup = 0;\n \t\tlet objectTypeLookup = [];\n-\t\tconst result = [];\n-\t\tconst ctx = {\n+\t\tlet result = [];\n+\t\tlet ctx = {\n \t\t\tread() {\n \t\t\t\treturn decodeValue();\n \t\t\t},\n@@ -686,16 +691,18 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t}\n \t\t};\n \n-\t\twhile (currentDataPos < data.length) {\n-\t\t\tresult.push(decodeValue());\n+\t\ttry {\n+\t\t\twhile (currentDataPos < data.length) {\n+\t\t\t\tresult.push(decodeValue());\n+\t\t\t}\n+\t\t\treturn result;\n+\t\t} finally {\n+\t\t\t// Get rid of these references to avoid leaking memory\n+\t\t\t// This happens because the optimized code v8 generates\n+\t\t\t// is optimized for our \"ctx.read\" method so it will reference\n+\t\t\t// it from e. g. Dependency.prototype.deserialize -(IC)-> ctx.read\n+\t\t\tresult = referenceable = data = objectTypeLookup = ctx = undefined;\n \t\t}\n-\n-\t\t// Help the GC, as functions above might be cached in inline caches\n-\t\treferenceable = undefined;\n-\t\tobjectTypeLookup = undefined;\n-\t\tdata = undefined;\n-\n-\t\treturn result;\n \t}\n }\n "
      },
      {
        "sha": "e485e91636103d54b86588d25d109674c46aec96",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -971,6 +971,16 @@\n             \"minLength\": 1\n           }\n         },\n+        \"maxAge\": {\n+          \"description\": \"Time for which unused cache entries stay in the filesystem cache at minimum (in milliseconds).\",\n+          \"type\": \"number\",\n+          \"minimum\": 0\n+        },\n+        \"maxMemoryGenerations\": {\n+          \"description\": \"Number of generations unused cache entries stay in memory cache at minimum (0 = no memory cache used, 1 = may be removed after unused for a single compilation, ..., Infinity: kept forever). Cache entries will be deserialized from disk when removed from memory cache.\",\n+          \"type\": \"number\",\n+          \"minimum\": 0\n+        },\n         \"name\": {\n           \"description\": \"Name for the cache. Different names will lead to different coexisting caches.\",\n           \"type\": \"string\"\n@@ -1547,6 +1557,11 @@\n       \"type\": \"object\",\n       \"additionalProperties\": false,\n       \"properties\": {\n+        \"maxGenerations\": {\n+          \"description\": \"Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\",\n+          \"type\": \"number\",\n+          \"minimum\": 1\n+        },\n         \"type\": {\n           \"description\": \"In memory caching.\",\n           \"enum\": [\"memory\"]"
      },
      {
        "sha": "be96aebd8e5245fdfe65aeabe61ae22d2a90e6e1",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -746,6 +746,7 @@ describe(\"Defaults\", () => {\n \t\t@@ ... @@\n \t\t-   \"cache\": false,\n \t\t+   \"cache\": Object {\n+\t\t+     \"maxGenerations\": Infinity,\n \t\t+     \"type\": \"memory\",\n \t\t+   },\n \t\t@@ ... @@\n@@ -1417,6 +1418,7 @@ describe(\"Defaults\", () => {\n \t\t@@ ... @@\n \t\t-   \"cache\": false,\n \t\t+   \"cache\": Object {\n+\t\t+     \"maxGenerations\": Infinity,\n \t\t+     \"type\": \"memory\",\n \t\t+   },\n \t\t@@ ... @@\n@@ -1448,6 +1450,8 @@ describe(\"Defaults\", () => {\n \t\t+     \"hashAlgorithm\": \"md4\",\n \t\t+     \"idleTimeout\": 60000,\n \t\t+     \"idleTimeoutForInitialStore\": 0,\n+\t\t+     \"maxAge\": 5184000000,\n+\t\t+     \"maxMemoryGenerations\": Infinity,\n \t\t+     \"name\": \"default-none\",\n \t\t+     \"store\": \"pack\",\n \t\t+     \"type\": \"filesystem\",\n@@ -1662,6 +1666,8 @@ describe(\"Defaults\", () => {\n \t\t\t+     \"hashAlgorithm\": \"md4\",\n \t\t\t+     \"idleTimeout\": 60000,\n \t\t\t+     \"idleTimeoutForInitialStore\": 0,\n+\t\t\t+     \"maxAge\": 5184000000,\n+\t\t\t+     \"maxMemoryGenerations\": Infinity,\n \t\t\t+     \"name\": \"default-none\",\n \t\t\t+     \"store\": \"pack\",\n \t\t\t+     \"type\": \"filesystem\","
      },
      {
        "sha": "8b958d7550157a575b33c4e5a51aae774136035e",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 39,
        "deletions": 0,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -173,6 +173,45 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"cache-max-age\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Time for which unused cache entries stay in the filesystem cache at minimum (in milliseconds).\",\n+        \"multiple\": false,\n+        \"path\": \"cache.maxAge\",\n+        \"type\": \"number\",\n+      },\n+    ],\n+    \"description\": \"Time for which unused cache entries stay in the filesystem cache at minimum (in milliseconds).\",\n+    \"multiple\": false,\n+    \"simpleType\": \"number\",\n+  },\n+  \"cache-max-generations\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\",\n+        \"multiple\": false,\n+        \"path\": \"cache.maxGenerations\",\n+        \"type\": \"number\",\n+      },\n+    ],\n+    \"description\": \"Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\",\n+    \"multiple\": false,\n+    \"simpleType\": \"number\",\n+  },\n+  \"cache-max-memory-generations\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Number of generations unused cache entries stay in memory cache at minimum (0 = no memory cache used, 1 = may be removed after unused for a single compilation, ..., Infinity: kept forever). Cache entries will be deserialized from disk when removed from memory cache.\",\n+        \"multiple\": false,\n+        \"path\": \"cache.maxMemoryGenerations\",\n+        \"type\": \"number\",\n+      },\n+    ],\n+    \"description\": \"Number of generations unused cache entries stay in memory cache at minimum (0 = no memory cache used, 1 = may be removed after unused for a single compilation, ..., Infinity: kept forever). Cache entries will be deserialized from disk when removed from memory cache.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"number\",\n+  },\n   \"cache-name\": Object {\n     \"configs\": Array [\n       Object {"
      },
      {
        "sha": "e468d47f7e34b6af02411aa74a07b20559e5d60f",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/c84329f73cb52968495e2e8bd0e029a289ea0b3d/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/c84329f73cb52968495e2e8bd0e029a289ea0b3d/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=c84329f73cb52968495e2e8bd0e029a289ea0b3d",
        "patch": "@@ -3669,6 +3669,16 @@ declare interface FileCacheOptions {\n \t */\n \tmanagedPaths?: string[];\n \n+\t/**\n+\t * Time for which unused cache entries stay in the filesystem cache at minimum (in milliseconds).\n+\t */\n+\tmaxAge?: number;\n+\n+\t/**\n+\t * Number of generations unused cache entries stay in memory cache at minimum (0 = no memory cache used, 1 = may be removed after unused for a single compilation, ..., Infinity: kept forever). Cache entries will be deserialized from disk when removed from memory cache.\n+\t */\n+\tmaxMemoryGenerations?: number;\n+\n \t/**\n \t * Name for the cache. Different names will lead to different coexisting caches.\n \t */\n@@ -3760,6 +3770,7 @@ declare abstract class FileSystemInfo {\n \timmutablePaths: string[];\n \timmutablePathsWithSlash: string[];\n \tlogStatistics(): void;\n+\tclear(): void;\n \taddFileTimestamps(\n \t\tmap: Map<string, null | FileSystemInfoEntry | \"ignore\">\n \t): void;\n@@ -5703,6 +5714,11 @@ declare interface MapOptions {\n  * Options object for in-memory caching.\n  */\n declare interface MemoryCacheOptions {\n+\t/**\n+\t * Number of generations unused cache entries stay in memory cache at minimum (1 = may be removed after unused for a single compilation, ..., Infinity: kept forever).\n+\t */\n+\tmaxGenerations?: number;\n+\n \t/**\n \t * In memory caching.\n \t */"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12822",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12822/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12822/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12822/events",
    "html_url": "https://github.com/webpack/webpack/pull/12822",
    "id": 823622502,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTg2MDQzNzk0",
    "number": 12822,
    "title": "avoid making the package.json in context a build dependency",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-03-06T11:09:53Z",
    "updated_at": "2021-03-08T09:46:04Z",
    "closed_at": "2021-03-08T09:46:03Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12822",
      "html_url": "https://github.com/webpack/webpack/pull/12822",
      "diff_url": "https://github.com/webpack/webpack/pull/12822.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12822.patch",
      "merged_at": "2021-03-08T09:46:03Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nAlso points out errors reading the package.json more verbosely\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance, caching\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\nYou might see invalid JSON in package.json breaking the build, but that's intendent.\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12822/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "4b26e1cb3e48be7f46999233571b9c0f86d06f2e",
        "filename": "lib/SourceMapDevToolPlugin.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/lib%2FSourceMapDevToolPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/lib%2FSourceMapDevToolPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FSourceMapDevToolPlugin.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -211,7 +211,10 @@ class SourceMapDevToolPlugin {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tconst cacheItem = cache.getItemCache(\n \t\t\t\t\t\t\t\tfile,\n-\t\t\t\t\t\t\t\tcache.getLazyHashedEtag(asset.source)\n+\t\t\t\t\t\t\t\tcache.mergeEtags(\n+\t\t\t\t\t\t\t\t\tcache.getLazyHashedEtag(asset.source),\n+\t\t\t\t\t\t\t\t\tnamespace\n+\t\t\t\t\t\t\t\t)\n \t\t\t\t\t\t\t);\n \n \t\t\t\t\t\t\tcacheItem.get((err, cacheEntry) => {"
      },
      {
        "sha": "83725d7b24c7e32708699d0cd23b535b403adaba",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -562,10 +562,15 @@ const applyOutputDefaults = (\n \tF(output, \"uniqueName\", () => {\n \t\tconst libraryName = getLibraryName(output.library);\n \t\tif (libraryName) return libraryName;\n+\t\tconst pkgPath = path.resolve(context, \"package.json\");\n \t\ttry {\n-\t\t\tconst packageInfo = require(`${context}/package.json`);\n+\t\t\tconst packageInfo = JSON.parse(fs.readFileSync(pkgPath, \"utf-8\"));\n \t\t\treturn packageInfo.name || \"\";\n \t\t} catch (e) {\n+\t\t\tif (e.code !== \"ENOENT\") {\n+\t\t\t\te.message += `\\nwhile determining default 'output.uniqueName' from 'name' in ${pkgPath}`;\n+\t\t\t\tthrow e;\n+\t\t\t}\n \t\t\treturn \"\";\n \t\t}\n \t});"
      },
      {
        "sha": "25c828a8eb5dfbc5ead1e9b5b89d4af8d51eab48",
        "filename": "test/BuildDependencies.test.js",
        "status": "modified",
        "additions": 79,
        "deletions": 42,
        "changes": 121,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FBuildDependencies.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FBuildDependencies.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FBuildDependencies.test.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -50,6 +50,13 @@ describe(\"BuildDependencies\", () => {\n \t\tfs.mkdir(inputDirectory, { recursive: true }, done);\n \t});\n \tit(\"should capture loader and config dependencies\", async () => {\n+\t\tfs.writeFileSync(\n+\t\t\tpath.resolve(inputDirectory, \"package.json\"),\n+\t\t\tJSON.stringify({\n+\t\t\t\tname: \"yep\",\n+\t\t\t\tversion: \"1.0.0\"\n+\t\t\t})\n+\t\t);\n \t\tfs.writeFileSync(\n \t\t\tpath.resolve(inputDirectory, \"loader-dependency.js\"),\n \t\t\t\"module.exports = 0;\"\n@@ -89,79 +96,109 @@ describe(\"BuildDependencies\", () => {\n \t\t\t\"module.exports = Date.now();\"\n \t\t);\n \t\tconst now1 = Date.now();\n-\t\texpect(await exec(\"2\")).toMatch(/Captured build dependencies/);\n-\t\texpect(await exec(\"3\")).not.toMatch(/Captured build dependencies/);\n+\t\tconst output2 = await exec(\"2\");\n+\t\texpect(output2).toMatch(/but build dependencies have changed/);\n+\t\texpect(output2).toMatch(/Captured build dependencies/);\n+\t\tconst output3 = await exec(\"3\");\n+\t\texpect(output3).not.toMatch(/resolving of build dependencies is invalid/);\n+\t\texpect(output3).not.toMatch(/but build dependencies have changed/);\n+\t\texpect(output3).not.toMatch(/Captured build dependencies/);\n+\t\tfs.writeFileSync(\n+\t\t\tpath.resolve(inputDirectory, \"package.json\"),\n+\t\t\tJSON.stringify({\n+\t\t\t\tname: \"other\",\n+\t\t\t\tversion: \"2.0.0\"\n+\t\t\t})\n+\t\t);\n+\t\tconst output4 = await exec(\"4\");\n+\t\texpect(output4).toMatch(/resolving of build dependencies is invalid/);\n+\t\texpect(output4).not.toMatch(/but build dependencies have changed/);\n+\t\texpect(output4).toMatch(/Captured build dependencies/);\n \t\tfs.writeFileSync(\n \t\t\tpath.resolve(inputDirectory, \"config-dependency\"),\n \t\t\t\"module.exports = Date.now();\"\n \t\t);\n \t\tconst now2 = Date.now();\n-\t\tawait exec(\"4\");\n-\t\tconst now3 = Date.now();\n \t\tawait exec(\"5\");\n+\t\tconst now3 = Date.now();\n+\t\tawait exec(\"6\");\n \t\tlet now4, now5;\n \t\tif (supportsEsm) {\n \t\t\tfs.writeFileSync(\n \t\t\t\tpath.resolve(inputDirectory, \"esm-dependency.js\"),\n \t\t\t\t\"module.exports = Date.now();\"\n \t\t\t);\n \t\t\tnow4 = Date.now();\n-\t\t\tawait exec(\"6\");\n+\t\t\tawait exec(\"7\");\n \t\t\tfs.writeFileSync(\n \t\t\t\tpath.resolve(inputDirectory, \"esm-async-dependency.mjs\"),\n \t\t\t\t\"export default Date.now();\"\n \t\t\t);\n \t\t\tnow5 = Date.now();\n-\t\t\tawait exec(\"7\");\n+\t\t\tawait exec(\"8\");\n \t\t}\n-\t\tconst results = Array.from({ length: supportsEsm ? 8 : 6 }).map((_, i) =>\n+\t\tconst results = Array.from({ length: supportsEsm ? 9 : 7 }).map((_, i) =>\n \t\t\trequire(`./js/buildDeps/${i}/main.js`)\n \t\t);\n \t\tfor (const r of results) {\n \t\t\texpect(typeof r.loader).toBe(\"number\");\n \t\t\texpect(typeof r.config).toBe(\"number\");\n \t\t\texpect(typeof r.uncached).toBe(\"number\");\n \t\t}\n-\t\texpect(results[0].loader).toBe(0);\n-\t\texpect(results[0].config).toBe(0);\n-\t\tif (supportsEsm) expect(results[0].esmConfig).toBe(0);\n-\t\texpect(results[0].uncached).toBe(0);\n+\t\tlet result = results.shift();\n+\t\texpect(result.loader).toBe(0);\n+\t\texpect(result.config).toBe(0);\n+\t\tif (supportsEsm) expect(result.esmConfig).toBe(0);\n+\t\texpect(result.uncached).toBe(0);\n \t\t// 0 -> 1 should not cache at all because of invalid buildDeps\n-\t\texpect(results[1].loader).toBe(1);\n-\t\texpect(results[1].config).toBe(1);\n-\t\texpect(results[1].esmConfig).toBe(1);\n-\t\texpect(results[1].uncached).toBe(1);\n+\t\tresult = results.shift();\n+\t\texpect(result.loader).toBe(1);\n+\t\texpect(result.config).toBe(1);\n+\t\texpect(result.esmConfig).toBe(1);\n+\t\texpect(result.uncached).toBe(1);\n \t\t// 1 -> 2 should be invalidated\n-\t\texpect(results[2].loader).toBeGreaterThan(now1);\n-\t\texpect(results[2].config).toBe(1);\n-\t\texpect(results[2].esmConfig).toBe(1);\n-\t\texpect(results[2].uncached).toBe(1);\n+\t\tresult = results.shift();\n+\t\texpect(result.loader).toBeGreaterThan(now1);\n+\t\texpect(result.config).toBe(1);\n+\t\texpect(result.esmConfig).toBe(1);\n+\t\texpect(result.uncached).toBe(1);\n \t\t// 2 -> 3 should stay cached\n-\t\texpect(results[3].loader).toBe(results[2].loader);\n-\t\texpect(results[3].config).toBe(1);\n-\t\texpect(results[3].esmConfig).toBe(1);\n-\t\texpect(results[3].uncached).toBe(1);\n-\t\t// 3 -> 4 should be invalidated\n-\t\texpect(results[4].loader).toBeGreaterThan(now2);\n-\t\texpect(results[4].config).toBeGreaterThan(now2);\n-\t\texpect(results[4].esmConfig).toBe(1);\n-\t\texpect(results[4].uncached).toBe(results[4].config);\n-\t\t// 4 -> 5 should stay cached, but uncacheable module still rebuilds\n-\t\texpect(results[5].loader).toBe(results[4].loader);\n-\t\texpect(results[5].config).toBe(results[4].config);\n-\t\texpect(results[5].uncached).toBeGreaterThan(now3);\n+\t\tresult = results.shift();\n+\t\texpect(result.loader).toBe(result.loader);\n+\t\texpect(result.config).toBe(1);\n+\t\texpect(result.esmConfig).toBe(1);\n+\t\texpect(result.uncached).toBe(1);\n+\t\t// 3 -> 4 should stay cached\n+\t\tresult = results.shift();\n+\t\texpect(result.loader).toBe(result.loader);\n+\t\texpect(result.config).toBe(1);\n+\t\texpect(result.esmConfig).toBe(1);\n+\t\texpect(result.uncached).toBe(1);\n+\t\t// 4 -> 5 should be invalidated\n+\t\tresult = results.shift();\n+\t\texpect(result.loader).toBeGreaterThan(now2);\n+\t\texpect(result.config).toBeGreaterThan(now2);\n+\t\texpect(result.esmConfig).toBe(1);\n+\t\texpect(result.uncached).toBe(result.config);\n+\t\t// 5 -> 6 should stay cached, but uncacheable module still rebuilds\n+\t\tresult = results.shift();\n+\t\texpect(result.loader).toBe(result.loader);\n+\t\texpect(result.config).toBe(result.config);\n+\t\texpect(result.uncached).toBeGreaterThan(now3);\n \t\tif (supportsEsm) {\n-\t\t\t// 5 -> 6 should be invalidated\n-\t\t\texpect(results[6].loader).toBeGreaterThan(now4);\n-\t\t\texpect(results[6].config).toBeGreaterThan(now4);\n-\t\t\texpect(results[6].esmConfig).toBeGreaterThan(now4);\n-\t\t\texpect(results[6].uncached).toBeGreaterThan(now4);\n \t\t\t// 6 -> 7 should be invalidated\n-\t\t\texpect(results[7].loader).toBeGreaterThan(now5);\n-\t\t\texpect(results[7].config).toBeGreaterThan(now5);\n-\t\t\texpect(results[7].esmConfig).toBeGreaterThan(now5);\n-\t\t\texpect(results[7].esmAsyncConfig).toBeGreaterThan(now5);\n-\t\t\texpect(results[7].uncached).toBeGreaterThan(now5);\n+\t\t\tresult = results.shift();\n+\t\t\texpect(result.loader).toBeGreaterThan(now4);\n+\t\t\texpect(result.config).toBeGreaterThan(now4);\n+\t\t\texpect(result.esmConfig).toBeGreaterThan(now4);\n+\t\t\texpect(result.uncached).toBeGreaterThan(now4);\n+\t\t\t// 7 -> 8 should be invalidated\n+\t\t\tresult = results.shift();\n+\t\t\texpect(result.loader).toBeGreaterThan(now5);\n+\t\t\texpect(result.config).toBeGreaterThan(now5);\n+\t\t\texpect(result.esmConfig).toBeGreaterThan(now5);\n+\t\t\texpect(result.esmAsyncConfig).toBeGreaterThan(now5);\n+\t\t\texpect(result.uncached).toBeGreaterThan(now5);\n \t\t}\n \t}, 100000);\n });"
      },
      {
        "sha": "416c3d67182e5847d4f2e5ffa53f5b423e43e3c5",
        "filename": "test/StatsTestCases.test.js",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FStatsTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FStatsTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStatsTestCases.test.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -117,6 +117,11 @@ describe(\"StatsTestCases\", () => {\n \t\t\t});\n \t\t\tc.run((err, stats) => {\n \t\t\t\tif (err) return done(err);\n+\t\t\t\tfor (const compilation of []\n+\t\t\t\t\t.concat(stats.stats || stats)\n+\t\t\t\t\t.map(s => s.compilation)) {\n+\t\t\t\t\tcompilation.logging.delete(\"webpack.Compilation.ModuleProfile\");\n+\t\t\t\t}\n \t\t\t\tif (/error$/.test(testName)) {\n \t\t\t\t\texpect(stats.hasErrors()).toBe(true);\n \t\t\t\t} else if (stats.hasErrors()) {\n@@ -184,10 +189,6 @@ describe(\"StatsTestCases\", () => {\n \t\t\t\tactual = actual\n \t\t\t\t\t.replace(/\\r\\n?/g, \"\\n\")\n \t\t\t\t\t.replace(/webpack [^ )]+(\\)?) compiled/g, \"webpack x.x.x$1 compiled\")\n-\t\t\t\t\t.replace(\n-\t\t\t\t\t\t/LOG from webpack\\.Compilation\\.ModuleProfile\\n([^\\n]+\\n)*\\n/g,\n-\t\t\t\t\t\t\"\"\n-\t\t\t\t\t)\n \t\t\t\t\t.replace(new RegExp(quotemeta(testPath), \"g\"), \"Xdir/\" + testName)\n \t\t\t\t\t.replace(/(\\w)\\\\(\\w)/g, \"$1/$2\")\n \t\t\t\t\t.replace(/, additional resolving: X ms/g, \"\");"
      },
      {
        "sha": "e5ba7d54ef9138982d5cae7d2167e981c00b0da9",
        "filename": "test/configCases/worker/node-worker-named/index.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FconfigCases%2Fworker%2Fnode-worker-named%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FconfigCases%2Fworker%2Fnode-worker-named%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fworker%2Fnode-worker-named%2Findex.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -25,7 +25,7 @@ it(\"should allow to create another WebWorker\", async () => {\n \t\t});\n \t});\n \texpect(result).toBe(\"data: OK, thanks\");\n-\tworker.terminate();\n+\tawait worker.terminate();\n });\n \n it(\"should allow to share chunks\", async () => {"
      },
      {
        "sha": "f82652c4c8d73b47c8b5ac0e1823f2061ed11f98",
        "filename": "test/fixtures/buildDependencies/run.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2Ffixtures%2FbuildDependencies%2Frun.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2Ffixtures%2FbuildDependencies%2Frun.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Ffixtures%2FbuildDependencies%2Frun.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -21,8 +21,8 @@ function run({ default: value2, asyncDep: value3 }) {\n \tconst compiler = webpack(\n \t\t{\n \t\t\tmode: \"development\",\n-\t\t\tcontext: __dirname,\n-\t\t\tentry: \"./index\",\n+\t\t\tcontext: path.resolve(__dirname, \"../../js/buildDepsInput\"),\n+\t\t\tentry: path.resolve(__dirname, \"./index\"),\n \t\t\toutput: {\n \t\t\t\tpath: path.resolve(__dirname, \"../../js/buildDeps/\" + process.argv[2]),\n \t\t\t\tlibraryTarget: \"commonjs2\"\n@@ -49,7 +49,7 @@ function run({ default: value2, asyncDep: value3 }) {\n \t\t\t\t\tconfig: [\n \t\t\t\t\t\t__filename,\n \t\t\t\t\t\tpath.resolve(__dirname, \"../../../node_modules/.yarn-integrity\")\n-\t\t\t\t\t].concat(esm ? [\"./esm.mjs\"] : []),\n+\t\t\t\t\t].concat(esm ? [\"../../fixtures/buildDependencies/esm.mjs\"] : []),\n \t\t\t\t\tinvalid: options.invalidBuildDepdencies\n \t\t\t\t\t\t? [\"should-fail-resolving\"]\n \t\t\t\t\t\t: []"
      },
      {
        "sha": "af333e73e64ba9c7c3c31750185a2130faad6ba5",
        "filename": "test/hotCases/worker/update-in-worker/index.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FhotCases%2Fworker%2Fupdate-in-worker%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FhotCases%2Fworker%2Fupdate-in-worker%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Fworker%2Fupdate-in-worker%2Findex.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -8,10 +8,11 @@ it(\"should support hot module replacement in WebWorkers\", done => {\n \t\t\t\t});\n \t\t\t\tbreak;\n \t\t\tcase \"done\":\n-\t\t\t\tdone();\n+\t\t\t\tPromise.resolve(worker.terminate()).then(() => done(), done);\n \t\t\t\tbreak;\n+\t\t\tdefault:\n+\t\t\t\tthrow new Error(`Unexpected message: ${msg}`);\n \t\t}\n \t};\n \tworker.postMessage(\"test\");\n-\tPromise.resolve(worker.terminate()).then(done, done);\n });"
      },
      {
        "sha": "3af3bbacb3f019b2d57d3f86f84932d39a9f4d08",
        "filename": "test/hotCases/worker/update-in-worker/worker.js",
        "status": "modified",
        "additions": 18,
        "deletions": 14,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FhotCases%2Fworker%2Fupdate-in-worker%2Fworker.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b6502d298363d70ec8a5226823f4e39c96b0becf/test%2FhotCases%2Fworker%2Fupdate-in-worker%2Fworker.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Fworker%2Fupdate-in-worker%2Fworker.js?ref=b6502d298363d70ec8a5226823f4e39c96b0becf",
        "patch": "@@ -3,21 +3,25 @@ import module from \"./module\";\n let counter = 1;\n \n self.onmessage = async ({ data: msg }) => {\n-\tswitch (msg) {\n-\t\tcase \"next\":\n-\t\t\tawait import.meta.webpackHot.check(true);\n-\t\tcase \"test\":\n-\t\t\tif (module === 42 && counter === 4) {\n-\t\t\t\tself.postMessage(\"done\");\n+\ttry {\n+\t\tswitch (msg) {\n+\t\t\tcase \"next\":\n+\t\t\t\tawait import.meta.webpackHot.check(true);\n+\t\t\tcase \"test\":\n+\t\t\t\tif (module === 42 && counter === 4) {\n+\t\t\t\t\tself.postMessage(\"done\");\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tif (module !== counter)\n+\t\t\t\t\tthrow new Error(`module (${module}) should be ${counter}`);\n+\t\t\t\tcounter++;\n+\t\t\t\tself.postMessage(\"next\");\n \t\t\t\tbreak;\n-\t\t\t}\n-\t\t\tif (module !== counter)\n-\t\t\t\tthrow new Error(`module (${module}) should be ${counter}`);\n-\t\t\tcounter++;\n-\t\t\tself.postMessage(\"next\");\n-\t\t\tbreak;\n-\t\tdefault:\n-\t\t\tthrow new Error(\"Unexpected message\");\n+\t\t\tdefault:\n+\t\t\t\tthrow new Error(\"Unexpected message\");\n+\t\t}\n+\t} catch (e) {\n+\t\tself.postMessage(\"error: \" + e.stack);\n \t}\n };\n "
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12764",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12764/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12764/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12764/events",
    "html_url": "https://github.com/webpack/webpack/pull/12764",
    "id": 814537615,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTc4NTEwNjQx",
    "number": 12764,
    "title": "ensure all successful compiled modules are persistent cached",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-02-23T14:51:54Z",
    "updated_at": "2021-02-23T21:26:04Z",
    "closed_at": "2021-02-23T21:26:04Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12764",
      "html_url": "https://github.com/webpack/webpack/pull/12764",
      "diff_url": "https://github.com/webpack/webpack/pull/12764.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12764.patch",
      "merged_at": "2021-02-23T21:26:04Z"
    },
    "body": "instead the code geneneration cache will cover everything<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12764/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "96727cbdc96bdc72f447e68d0d021f40f85f7865",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -1488,7 +1488,11 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \n \t\t\t\t\tfor (let i = 0; i < dependencies.length; i++) {\n \t\t\t\t\t\tconst dependency = dependencies[i];\n-\t\t\t\t\t\tmoduleGraph.setResolvedModule(originModule, dependency, module);\n+\t\t\t\t\t\tmoduleGraph.setResolvedModule(\n+\t\t\t\t\t\t\trecursive ? originModule : null,\n+\t\t\t\t\t\t\tdependency,\n+\t\t\t\t\t\t\tmodule\n+\t\t\t\t\t\t);\n \t\t\t\t\t}\n \n \t\t\t\t\tmoduleGraph.setIssuerIfUnset("
      },
      {
        "sha": "e602119ff8361a448234237d7d0293485c8551e2",
        "filename": "lib/optimize/ModuleConcatenationPlugin.js",
        "status": "modified",
        "additions": 363,
        "deletions": 402,
        "changes": 765,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FModuleConcatenationPlugin.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -8,8 +8,6 @@\n const asyncLib = require(\"neo-async\");\n const ChunkGraph = require(\"../ChunkGraph\");\n const ModuleGraph = require(\"../ModuleGraph\");\n-const ModuleRestoreError = require(\"../ModuleRestoreError\");\n-const ModuleStoreError = require(\"../ModuleStoreError\");\n const { STAGE_DEFAULT } = require(\"../OptimizationStages\");\n const HarmonyImportDependency = require(\"../dependencies/HarmonyImportDependency\");\n const { compareModulesByIdentifier } = require(\"../util/comparators\");\n@@ -58,441 +56,404 @@ class ModuleConcatenationPlugin {\n \t * @returns {void}\n \t */\n \tapply(compiler) {\n-\t\tcompiler.hooks.compilation.tap(\n-\t\t\t\"ModuleConcatenationPlugin\",\n-\t\t\t(compilation, { normalModuleFactory }) => {\n-\t\t\t\tconst moduleGraph = compilation.moduleGraph;\n-\t\t\t\tconst bailoutReasonMap = new Map();\n-\t\t\t\tconst cache = compilation.getCache(\"ModuleConcatenationPlugin\");\n-\n-\t\t\t\tconst setBailoutReason = (module, reason) => {\n-\t\t\t\t\tsetInnerBailoutReason(module, reason);\n-\t\t\t\t\tmoduleGraph\n-\t\t\t\t\t\t.getOptimizationBailout(module)\n-\t\t\t\t\t\t.push(\n-\t\t\t\t\t\t\ttypeof reason === \"function\"\n-\t\t\t\t\t\t\t\t? rs => formatBailoutReason(reason(rs))\n-\t\t\t\t\t\t\t\t: formatBailoutReason(reason)\n-\t\t\t\t\t\t);\n-\t\t\t\t};\n-\n-\t\t\t\tconst setInnerBailoutReason = (module, reason) => {\n-\t\t\t\t\tbailoutReasonMap.set(module, reason);\n-\t\t\t\t};\n+\t\tcompiler.hooks.compilation.tap(\"ModuleConcatenationPlugin\", compilation => {\n+\t\t\tconst moduleGraph = compilation.moduleGraph;\n+\t\t\tconst bailoutReasonMap = new Map();\n+\n+\t\t\tconst setBailoutReason = (module, reason) => {\n+\t\t\t\tsetInnerBailoutReason(module, reason);\n+\t\t\t\tmoduleGraph\n+\t\t\t\t\t.getOptimizationBailout(module)\n+\t\t\t\t\t.push(\n+\t\t\t\t\t\ttypeof reason === \"function\"\n+\t\t\t\t\t\t\t? rs => formatBailoutReason(reason(rs))\n+\t\t\t\t\t\t\t: formatBailoutReason(reason)\n+\t\t\t\t\t);\n+\t\t\t};\n \n-\t\t\t\tconst getInnerBailoutReason = (module, requestShortener) => {\n-\t\t\t\t\tconst reason = bailoutReasonMap.get(module);\n-\t\t\t\t\tif (typeof reason === \"function\") return reason(requestShortener);\n-\t\t\t\t\treturn reason;\n-\t\t\t\t};\n+\t\t\tconst setInnerBailoutReason = (module, reason) => {\n+\t\t\t\tbailoutReasonMap.set(module, reason);\n+\t\t\t};\n \n-\t\t\t\tconst formatBailoutWarning = (module, problem) => requestShortener => {\n-\t\t\t\t\tif (typeof problem === \"function\") {\n-\t\t\t\t\t\treturn formatBailoutReason(\n-\t\t\t\t\t\t\t`Cannot concat with ${module.readableIdentifier(\n-\t\t\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t\t\t)}: ${problem(requestShortener)}`\n-\t\t\t\t\t\t);\n-\t\t\t\t\t}\n-\t\t\t\t\tconst reason = getInnerBailoutReason(module, requestShortener);\n-\t\t\t\t\tconst reasonWithPrefix = reason ? `: ${reason}` : \"\";\n-\t\t\t\t\tif (module === problem) {\n-\t\t\t\t\t\treturn formatBailoutReason(\n-\t\t\t\t\t\t\t`Cannot concat with ${module.readableIdentifier(\n-\t\t\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t\t\t)}${reasonWithPrefix}`\n-\t\t\t\t\t\t);\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\treturn formatBailoutReason(\n-\t\t\t\t\t\t\t`Cannot concat with ${module.readableIdentifier(\n-\t\t\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t\t\t)} because of ${problem.readableIdentifier(\n-\t\t\t\t\t\t\t\trequestShortener\n-\t\t\t\t\t\t\t)}${reasonWithPrefix}`\n-\t\t\t\t\t\t);\n-\t\t\t\t\t}\n-\t\t\t\t};\n+\t\t\tconst getInnerBailoutReason = (module, requestShortener) => {\n+\t\t\t\tconst reason = bailoutReasonMap.get(module);\n+\t\t\t\tif (typeof reason === \"function\") return reason(requestShortener);\n+\t\t\t\treturn reason;\n+\t\t\t};\n \n-\t\t\t\tcompilation.hooks.optimizeChunkModules.tapAsync(\n-\t\t\t\t\t{\n-\t\t\t\t\t\tname: \"ModuleConcatenationPlugin\",\n-\t\t\t\t\t\tstage: STAGE_DEFAULT\n-\t\t\t\t\t},\n-\t\t\t\t\t(allChunks, modules, callback) => {\n-\t\t\t\t\t\tconst logger = compilation.getLogger(\n-\t\t\t\t\t\t\t\"webpack.ModuleConcatenationPlugin\"\n-\t\t\t\t\t\t);\n-\t\t\t\t\t\tconst { chunkGraph, moduleGraph } = compilation;\n-\t\t\t\t\t\tconst relevantModules = [];\n-\t\t\t\t\t\tconst possibleInners = new Set();\n-\t\t\t\t\t\tconst context = {\n-\t\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\t\tmoduleGraph\n-\t\t\t\t\t\t};\n-\t\t\t\t\t\tlogger.time(\"select relevant modules\");\n-\t\t\t\t\t\tfor (const module of modules) {\n-\t\t\t\t\t\t\tlet canBeRoot = true;\n-\t\t\t\t\t\t\tlet canBeInner = true;\n-\n-\t\t\t\t\t\t\tconst bailoutReason = module.getConcatenationBailoutReason(\n-\t\t\t\t\t\t\t\tcontext\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\tif (bailoutReason) {\n-\t\t\t\t\t\t\t\tsetBailoutReason(module, bailoutReason);\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n+\t\t\tconst formatBailoutWarning = (module, problem) => requestShortener => {\n+\t\t\t\tif (typeof problem === \"function\") {\n+\t\t\t\t\treturn formatBailoutReason(\n+\t\t\t\t\t\t`Cannot concat with ${module.readableIdentifier(\n+\t\t\t\t\t\t\trequestShortener\n+\t\t\t\t\t\t)}: ${problem(requestShortener)}`\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tconst reason = getInnerBailoutReason(module, requestShortener);\n+\t\t\t\tconst reasonWithPrefix = reason ? `: ${reason}` : \"\";\n+\t\t\t\tif (module === problem) {\n+\t\t\t\t\treturn formatBailoutReason(\n+\t\t\t\t\t\t`Cannot concat with ${module.readableIdentifier(\n+\t\t\t\t\t\t\trequestShortener\n+\t\t\t\t\t\t)}${reasonWithPrefix}`\n+\t\t\t\t\t);\n+\t\t\t\t} else {\n+\t\t\t\t\treturn formatBailoutReason(\n+\t\t\t\t\t\t`Cannot concat with ${module.readableIdentifier(\n+\t\t\t\t\t\t\trequestShortener\n+\t\t\t\t\t\t)} because of ${problem.readableIdentifier(\n+\t\t\t\t\t\t\trequestShortener\n+\t\t\t\t\t\t)}${reasonWithPrefix}`\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t};\n \n-\t\t\t\t\t\t\t// Must not be an async module\n-\t\t\t\t\t\t\tif (moduleGraph.isAsync(module)) {\n-\t\t\t\t\t\t\t\tsetBailoutReason(module, `Module is async`);\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n+\t\t\tcompilation.hooks.optimizeChunkModules.tapAsync(\n+\t\t\t\t{\n+\t\t\t\t\tname: \"ModuleConcatenationPlugin\",\n+\t\t\t\t\tstage: STAGE_DEFAULT\n+\t\t\t\t},\n+\t\t\t\t(allChunks, modules, callback) => {\n+\t\t\t\t\tconst logger = compilation.getLogger(\n+\t\t\t\t\t\t\"webpack.ModuleConcatenationPlugin\"\n+\t\t\t\t\t);\n+\t\t\t\t\tconst { chunkGraph, moduleGraph } = compilation;\n+\t\t\t\t\tconst relevantModules = [];\n+\t\t\t\t\tconst possibleInners = new Set();\n+\t\t\t\t\tconst context = {\n+\t\t\t\t\t\tchunkGraph,\n+\t\t\t\t\t\tmoduleGraph\n+\t\t\t\t\t};\n+\t\t\t\t\tlogger.time(\"select relevant modules\");\n+\t\t\t\t\tfor (const module of modules) {\n+\t\t\t\t\t\tlet canBeRoot = true;\n+\t\t\t\t\t\tlet canBeInner = true;\n+\n+\t\t\t\t\t\tconst bailoutReason = module.getConcatenationBailoutReason(context);\n+\t\t\t\t\t\tif (bailoutReason) {\n+\t\t\t\t\t\t\tsetBailoutReason(module, bailoutReason);\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t// Must be in strict mode\n-\t\t\t\t\t\t\tif (!module.buildInfo.strict) {\n-\t\t\t\t\t\t\t\tsetBailoutReason(module, `Module is not in strict mode`);\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t// Must not be an async module\n+\t\t\t\t\t\tif (moduleGraph.isAsync(module)) {\n+\t\t\t\t\t\t\tsetBailoutReason(module, `Module is async`);\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t// Module must be in any chunk (we don't want to do useless work)\n-\t\t\t\t\t\t\tif (chunkGraph.getNumberOfModuleChunks(module) === 0) {\n-\t\t\t\t\t\t\t\tsetBailoutReason(module, \"Module is not in any chunk\");\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t// Must be in strict mode\n+\t\t\t\t\t\tif (!module.buildInfo.strict) {\n+\t\t\t\t\t\t\tsetBailoutReason(module, `Module is not in strict mode`);\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t// Exports must be known (and not dynamic)\n-\t\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n-\t\t\t\t\t\t\tconst relevantExports = exportsInfo.getRelevantExports(undefined);\n-\t\t\t\t\t\t\tconst unknownReexports = relevantExports.filter(exportInfo => {\n-\t\t\t\t\t\t\t\treturn (\n-\t\t\t\t\t\t\t\t\texportInfo.isReexport() && !exportInfo.getTarget(moduleGraph)\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\tif (unknownReexports.length > 0) {\n-\t\t\t\t\t\t\t\tsetBailoutReason(\n-\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\t`Reexports in this module do not have a static target (${Array.from(\n-\t\t\t\t\t\t\t\t\t\tunknownReexports,\n-\t\t\t\t\t\t\t\t\t\texportInfo =>\n-\t\t\t\t\t\t\t\t\t\t\t`${\n-\t\t\t\t\t\t\t\t\t\t\t\texportInfo.name || \"other exports\"\n-\t\t\t\t\t\t\t\t\t\t\t}: ${exportInfo.getUsedInfo()}`\n-\t\t\t\t\t\t\t\t\t).join(\", \")})`\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t// Module must be in any chunk (we don't want to do useless work)\n+\t\t\t\t\t\tif (chunkGraph.getNumberOfModuleChunks(module) === 0) {\n+\t\t\t\t\t\t\tsetBailoutReason(module, \"Module is not in any chunk\");\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t// Root modules must have a static list of exports\n-\t\t\t\t\t\t\tconst unknownProvidedExports = relevantExports.filter(\n-\t\t\t\t\t\t\t\texportInfo => {\n-\t\t\t\t\t\t\t\t\treturn exportInfo.provided !== true;\n-\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t// Exports must be known (and not dynamic)\n+\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n+\t\t\t\t\t\tconst relevantExports = exportsInfo.getRelevantExports(undefined);\n+\t\t\t\t\t\tconst unknownReexports = relevantExports.filter(exportInfo => {\n+\t\t\t\t\t\t\treturn (\n+\t\t\t\t\t\t\t\texportInfo.isReexport() && !exportInfo.getTarget(moduleGraph)\n \t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\tif (unknownProvidedExports.length > 0) {\n-\t\t\t\t\t\t\t\tsetBailoutReason(\n-\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\t`List of module exports is dynamic (${Array.from(\n-\t\t\t\t\t\t\t\t\t\tunknownProvidedExports,\n-\t\t\t\t\t\t\t\t\t\texportInfo =>\n-\t\t\t\t\t\t\t\t\t\t\t`${\n-\t\t\t\t\t\t\t\t\t\t\t\texportInfo.name || \"other exports\"\n-\t\t\t\t\t\t\t\t\t\t\t}: ${exportInfo.getProvidedInfo()} and ${exportInfo.getUsedInfo()}`\n-\t\t\t\t\t\t\t\t\t).join(\", \")})`\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\tcanBeRoot = false;\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t});\n+\t\t\t\t\t\tif (unknownReexports.length > 0) {\n+\t\t\t\t\t\t\tsetBailoutReason(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\t`Reexports in this module do not have a static target (${Array.from(\n+\t\t\t\t\t\t\t\t\tunknownReexports,\n+\t\t\t\t\t\t\t\t\texportInfo =>\n+\t\t\t\t\t\t\t\t\t\t`${\n+\t\t\t\t\t\t\t\t\t\t\texportInfo.name || \"other exports\"\n+\t\t\t\t\t\t\t\t\t\t}: ${exportInfo.getUsedInfo()}`\n+\t\t\t\t\t\t\t\t).join(\", \")})`\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t// Module must not be an entry point\n-\t\t\t\t\t\t\tif (chunkGraph.isEntryModule(module)) {\n-\t\t\t\t\t\t\t\tsetInnerBailoutReason(module, \"Module is an entry point\");\n-\t\t\t\t\t\t\t\tcanBeInner = false;\n+\t\t\t\t\t\t// Root modules must have a static list of exports\n+\t\t\t\t\t\tconst unknownProvidedExports = relevantExports.filter(\n+\t\t\t\t\t\t\texportInfo => {\n+\t\t\t\t\t\t\t\treturn exportInfo.provided !== true;\n \t\t\t\t\t\t\t}\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tif (unknownProvidedExports.length > 0) {\n+\t\t\t\t\t\t\tsetBailoutReason(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\t`List of module exports is dynamic (${Array.from(\n+\t\t\t\t\t\t\t\t\tunknownProvidedExports,\n+\t\t\t\t\t\t\t\t\texportInfo =>\n+\t\t\t\t\t\t\t\t\t\t`${\n+\t\t\t\t\t\t\t\t\t\t\texportInfo.name || \"other exports\"\n+\t\t\t\t\t\t\t\t\t\t}: ${exportInfo.getProvidedInfo()} and ${exportInfo.getUsedInfo()}`\n+\t\t\t\t\t\t\t\t).join(\", \")})`\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcanBeRoot = false;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\tif (canBeRoot) relevantModules.push(module);\n-\t\t\t\t\t\t\tif (canBeInner) possibleInners.add(module);\n+\t\t\t\t\t\t// Module must not be an entry point\n+\t\t\t\t\t\tif (chunkGraph.isEntryModule(module)) {\n+\t\t\t\t\t\t\tsetInnerBailoutReason(module, \"Module is an entry point\");\n+\t\t\t\t\t\t\tcanBeInner = false;\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tlogger.timeEnd(\"select relevant modules\");\n-\t\t\t\t\t\tlogger.debug(\n-\t\t\t\t\t\t\t`${relevantModules.length} potential root modules, ${possibleInners.size} potential inner modules`\n+\n+\t\t\t\t\t\tif (canBeRoot) relevantModules.push(module);\n+\t\t\t\t\t\tif (canBeInner) possibleInners.add(module);\n+\t\t\t\t\t}\n+\t\t\t\t\tlogger.timeEnd(\"select relevant modules\");\n+\t\t\t\t\tlogger.debug(\n+\t\t\t\t\t\t`${relevantModules.length} potential root modules, ${possibleInners.size} potential inner modules`\n+\t\t\t\t\t);\n+\t\t\t\t\t// sort by depth\n+\t\t\t\t\t// modules with lower depth are more likely suited as roots\n+\t\t\t\t\t// this improves performance, because modules already selected as inner are skipped\n+\t\t\t\t\tlogger.time(\"sort relevant modules\");\n+\t\t\t\t\trelevantModules.sort((a, b) => {\n+\t\t\t\t\t\treturn moduleGraph.getDepth(a) - moduleGraph.getDepth(b);\n+\t\t\t\t\t});\n+\t\t\t\t\tlogger.timeEnd(\"sort relevant modules\");\n+\n+\t\t\t\t\t/** @type {Statistics} */\n+\t\t\t\t\tconst stats = {\n+\t\t\t\t\t\tcached: 0,\n+\t\t\t\t\t\talreadyInConfig: 0,\n+\t\t\t\t\t\tinvalidModule: 0,\n+\t\t\t\t\t\tincorrectChunks: 0,\n+\t\t\t\t\t\tincorrectDependency: 0,\n+\t\t\t\t\t\tincorrectModuleDependency: 0,\n+\t\t\t\t\t\tincorrectChunksOfImporter: 0,\n+\t\t\t\t\t\tincorrectRuntimeCondition: 0,\n+\t\t\t\t\t\timporterFailed: 0,\n+\t\t\t\t\t\tadded: 0\n+\t\t\t\t\t};\n+\t\t\t\t\tlet statsCandidates = 0;\n+\t\t\t\t\tlet statsSizeSum = 0;\n+\t\t\t\t\tlet statsEmptyConfigurations = 0;\n+\n+\t\t\t\t\tlogger.time(\"find modules to concatenate\");\n+\t\t\t\t\tconst concatConfigurations = [];\n+\t\t\t\t\tconst usedAsInner = new Set();\n+\t\t\t\t\tfor (const currentRoot of relevantModules) {\n+\t\t\t\t\t\t// when used by another configuration as inner:\n+\t\t\t\t\t\t// the other configuration is better and we can skip this one\n+\t\t\t\t\t\t// TODO reconsider that when it's only used in a different runtime\n+\t\t\t\t\t\tif (usedAsInner.has(currentRoot)) continue;\n+\n+\t\t\t\t\t\tlet chunkRuntime = undefined;\n+\t\t\t\t\t\tfor (const r of chunkGraph.getModuleRuntimes(currentRoot)) {\n+\t\t\t\t\t\t\tchunkRuntime = mergeRuntimeOwned(chunkRuntime, r);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(currentRoot);\n+\t\t\t\t\t\tconst filteredRuntime = filterRuntime(chunkRuntime, r =>\n+\t\t\t\t\t\t\texportsInfo.isModuleUsed(r)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tconst activeRuntime =\n+\t\t\t\t\t\t\tfilteredRuntime === true\n+\t\t\t\t\t\t\t\t? chunkRuntime\n+\t\t\t\t\t\t\t\t: filteredRuntime === false\n+\t\t\t\t\t\t\t\t? undefined\n+\t\t\t\t\t\t\t\t: filteredRuntime;\n+\n+\t\t\t\t\t\t// create a configuration with the root\n+\t\t\t\t\t\tconst currentConfiguration = new ConcatConfiguration(\n+\t\t\t\t\t\t\tcurrentRoot,\n+\t\t\t\t\t\t\tactiveRuntime\n \t\t\t\t\t\t);\n-\t\t\t\t\t\t// sort by depth\n-\t\t\t\t\t\t// modules with lower depth are more likely suited as roots\n-\t\t\t\t\t\t// this improves performance, because modules already selected as inner are skipped\n-\t\t\t\t\t\tlogger.time(\"sort relevant modules\");\n-\t\t\t\t\t\trelevantModules.sort((a, b) => {\n-\t\t\t\t\t\t\treturn moduleGraph.getDepth(a) - moduleGraph.getDepth(b);\n-\t\t\t\t\t\t});\n-\t\t\t\t\t\tlogger.timeEnd(\"sort relevant modules\");\n-\n-\t\t\t\t\t\t/** @type {Statistics} */\n-\t\t\t\t\t\tconst stats = {\n-\t\t\t\t\t\t\tcached: 0,\n-\t\t\t\t\t\t\talreadyInConfig: 0,\n-\t\t\t\t\t\t\tinvalidModule: 0,\n-\t\t\t\t\t\t\tincorrectChunks: 0,\n-\t\t\t\t\t\t\tincorrectDependency: 0,\n-\t\t\t\t\t\t\tincorrectModuleDependency: 0,\n-\t\t\t\t\t\t\tincorrectChunksOfImporter: 0,\n-\t\t\t\t\t\t\tincorrectRuntimeCondition: 0,\n-\t\t\t\t\t\t\timporterFailed: 0,\n-\t\t\t\t\t\t\tadded: 0\n-\t\t\t\t\t\t};\n-\t\t\t\t\t\tlet statsCandidates = 0;\n-\t\t\t\t\t\tlet statsSizeSum = 0;\n-\t\t\t\t\t\tlet statsEmptyConfigurations = 0;\n-\n-\t\t\t\t\t\tlogger.time(\"find modules to concatenate\");\n-\t\t\t\t\t\tconst concatConfigurations = [];\n-\t\t\t\t\t\tconst usedAsInner = new Set();\n-\t\t\t\t\t\tfor (const currentRoot of relevantModules) {\n-\t\t\t\t\t\t\t// when used by another configuration as inner:\n-\t\t\t\t\t\t\t// the other configuration is better and we can skip this one\n-\t\t\t\t\t\t\t// TODO reconsider that when it's only used in a different runtime\n-\t\t\t\t\t\t\tif (usedAsInner.has(currentRoot)) continue;\n-\n-\t\t\t\t\t\t\tlet chunkRuntime = undefined;\n-\t\t\t\t\t\t\tfor (const r of chunkGraph.getModuleRuntimes(currentRoot)) {\n-\t\t\t\t\t\t\t\tchunkRuntime = mergeRuntimeOwned(chunkRuntime, r);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(currentRoot);\n-\t\t\t\t\t\t\tconst filteredRuntime = filterRuntime(chunkRuntime, r =>\n-\t\t\t\t\t\t\t\texportsInfo.isModuleUsed(r)\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\tconst activeRuntime =\n-\t\t\t\t\t\t\t\tfilteredRuntime === true\n-\t\t\t\t\t\t\t\t\t? chunkRuntime\n-\t\t\t\t\t\t\t\t\t: filteredRuntime === false\n-\t\t\t\t\t\t\t\t\t? undefined\n-\t\t\t\t\t\t\t\t\t: filteredRuntime;\n-\n-\t\t\t\t\t\t\t// create a configuration with the root\n-\t\t\t\t\t\t\tconst currentConfiguration = new ConcatConfiguration(\n-\t\t\t\t\t\t\t\tcurrentRoot,\n-\t\t\t\t\t\t\t\tactiveRuntime\n-\t\t\t\t\t\t\t);\n \n-\t\t\t\t\t\t\t// cache failures to add modules\n-\t\t\t\t\t\t\tconst failureCache = new Map();\n+\t\t\t\t\t\t// cache failures to add modules\n+\t\t\t\t\t\tconst failureCache = new Map();\n \n-\t\t\t\t\t\t\t// potential optional import candidates\n-\t\t\t\t\t\t\t/** @type {Set<Module>} */\n-\t\t\t\t\t\t\tconst candidates = new Set();\n+\t\t\t\t\t\t// potential optional import candidates\n+\t\t\t\t\t\t/** @type {Set<Module>} */\n+\t\t\t\t\t\tconst candidates = new Set();\n \n-\t\t\t\t\t\t\t// try to add all imports\n-\t\t\t\t\t\t\tfor (const imp of this._getImports(\n-\t\t\t\t\t\t\t\tcompilation,\n-\t\t\t\t\t\t\t\tcurrentRoot,\n-\t\t\t\t\t\t\t\tactiveRuntime\n-\t\t\t\t\t\t\t)) {\n-\t\t\t\t\t\t\t\tcandidates.add(imp);\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t// try to add all imports\n+\t\t\t\t\t\tfor (const imp of this._getImports(\n+\t\t\t\t\t\t\tcompilation,\n+\t\t\t\t\t\t\tcurrentRoot,\n+\t\t\t\t\t\t\tactiveRuntime\n+\t\t\t\t\t\t)) {\n+\t\t\t\t\t\t\tcandidates.add(imp);\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\tfor (const imp of candidates) {\n-\t\t\t\t\t\t\t\tconst impCandidates = new Set();\n-\t\t\t\t\t\t\t\tconst problem = this._tryToAdd(\n-\t\t\t\t\t\t\t\t\tcompilation,\n-\t\t\t\t\t\t\t\t\tcurrentConfiguration,\n-\t\t\t\t\t\t\t\t\timp,\n-\t\t\t\t\t\t\t\t\tchunkRuntime,\n-\t\t\t\t\t\t\t\t\tactiveRuntime,\n-\t\t\t\t\t\t\t\t\tpossibleInners,\n-\t\t\t\t\t\t\t\t\timpCandidates,\n-\t\t\t\t\t\t\t\t\tfailureCache,\n-\t\t\t\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\t\t\t\ttrue,\n-\t\t\t\t\t\t\t\t\tstats\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\tif (problem) {\n-\t\t\t\t\t\t\t\t\tfailureCache.set(imp, problem);\n-\t\t\t\t\t\t\t\t\tcurrentConfiguration.addWarning(imp, problem);\n-\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\tfor (const c of impCandidates) {\n-\t\t\t\t\t\t\t\t\t\tcandidates.add(c);\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tstatsCandidates += candidates.size;\n-\t\t\t\t\t\t\tif (!currentConfiguration.isEmpty()) {\n-\t\t\t\t\t\t\t\tconst modules = currentConfiguration.getModules();\n-\t\t\t\t\t\t\t\tstatsSizeSum += modules.size;\n-\t\t\t\t\t\t\t\tconcatConfigurations.push(currentConfiguration);\n-\t\t\t\t\t\t\t\tfor (const module of modules) {\n-\t\t\t\t\t\t\t\t\tif (module !== currentConfiguration.rootModule) {\n-\t\t\t\t\t\t\t\t\t\tusedAsInner.add(module);\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\tfor (const imp of candidates) {\n+\t\t\t\t\t\t\tconst impCandidates = new Set();\n+\t\t\t\t\t\t\tconst problem = this._tryToAdd(\n+\t\t\t\t\t\t\t\tcompilation,\n+\t\t\t\t\t\t\t\tcurrentConfiguration,\n+\t\t\t\t\t\t\t\timp,\n+\t\t\t\t\t\t\t\tchunkRuntime,\n+\t\t\t\t\t\t\t\tactiveRuntime,\n+\t\t\t\t\t\t\t\tpossibleInners,\n+\t\t\t\t\t\t\t\timpCandidates,\n+\t\t\t\t\t\t\t\tfailureCache,\n+\t\t\t\t\t\t\t\tchunkGraph,\n+\t\t\t\t\t\t\t\ttrue,\n+\t\t\t\t\t\t\t\tstats\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tif (problem) {\n+\t\t\t\t\t\t\t\tfailureCache.set(imp, problem);\n+\t\t\t\t\t\t\t\tcurrentConfiguration.addWarning(imp, problem);\n \t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tstatsEmptyConfigurations++;\n-\t\t\t\t\t\t\t\tconst optimizationBailouts = moduleGraph.getOptimizationBailout(\n-\t\t\t\t\t\t\t\t\tcurrentRoot\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\tfor (const warning of currentConfiguration.getWarningsSorted()) {\n-\t\t\t\t\t\t\t\t\toptimizationBailouts.push(\n-\t\t\t\t\t\t\t\t\t\tformatBailoutWarning(warning[0], warning[1])\n-\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\tfor (const c of impCandidates) {\n+\t\t\t\t\t\t\t\t\tcandidates.add(c);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tlogger.timeEnd(\"find modules to concatenate\");\n-\t\t\t\t\t\tlogger.debug(\n-\t\t\t\t\t\t\t`${\n-\t\t\t\t\t\t\t\tconcatConfigurations.length\n-\t\t\t\t\t\t\t} successful concat configurations (avg size: ${\n-\t\t\t\t\t\t\t\tstatsSizeSum / concatConfigurations.length\n-\t\t\t\t\t\t\t}), ${statsEmptyConfigurations} bailed out completely`\n-\t\t\t\t\t\t);\n-\t\t\t\t\t\tlogger.debug(\n-\t\t\t\t\t\t\t`${statsCandidates} candidates were considered for adding (${stats.cached} cached failure, ${stats.alreadyInConfig} already in config, ${stats.invalidModule} invalid module, ${stats.incorrectChunks} incorrect chunks, ${stats.incorrectDependency} incorrect dependency, ${stats.incorrectChunksOfImporter} incorrect chunks of importer, ${stats.incorrectModuleDependency} incorrect module dependency, ${stats.incorrectRuntimeCondition} incorrect runtime condition, ${stats.importerFailed} importer failed, ${stats.added} added)`\n-\t\t\t\t\t\t);\n-\t\t\t\t\t\t// HACK: Sort configurations by length and start with the longest one\n-\t\t\t\t\t\t// to get the biggest groups possible. Used modules are marked with usedModules\n-\t\t\t\t\t\t// TODO: Allow to reuse existing configuration while trying to add dependencies.\n-\t\t\t\t\t\t// This would improve performance. O(n^2) -> O(n)\n-\t\t\t\t\t\tlogger.time(`sort concat configurations`);\n-\t\t\t\t\t\tconcatConfigurations.sort((a, b) => {\n-\t\t\t\t\t\t\treturn b.modules.size - a.modules.size;\n-\t\t\t\t\t\t});\n-\t\t\t\t\t\tlogger.timeEnd(`sort concat configurations`);\n-\t\t\t\t\t\tconst usedModules = new Set();\n-\n-\t\t\t\t\t\tlogger.time(\"create concatenated modules\");\n-\t\t\t\t\t\tasyncLib.each(\n-\t\t\t\t\t\t\tconcatConfigurations,\n-\t\t\t\t\t\t\t(concatConfiguration, callback) => {\n-\t\t\t\t\t\t\t\tconst rootModule = concatConfiguration.rootModule;\n-\n-\t\t\t\t\t\t\t\t// Avoid overlapping configurations\n-\t\t\t\t\t\t\t\t// TODO: remove this when todo above is fixed\n-\t\t\t\t\t\t\t\tif (usedModules.has(rootModule)) return callback();\n-\t\t\t\t\t\t\t\tconst modules = concatConfiguration.getModules();\n-\t\t\t\t\t\t\t\tfor (const m of modules) {\n-\t\t\t\t\t\t\t\t\tusedModules.add(m);\n+\t\t\t\t\t\tstatsCandidates += candidates.size;\n+\t\t\t\t\t\tif (!currentConfiguration.isEmpty()) {\n+\t\t\t\t\t\t\tconst modules = currentConfiguration.getModules();\n+\t\t\t\t\t\t\tstatsSizeSum += modules.size;\n+\t\t\t\t\t\t\tconcatConfigurations.push(currentConfiguration);\n+\t\t\t\t\t\t\tfor (const module of modules) {\n+\t\t\t\t\t\t\t\tif (module !== currentConfiguration.rootModule) {\n+\t\t\t\t\t\t\t\t\tusedAsInner.add(module);\n \t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t// Create a new ConcatenatedModule\n-\t\t\t\t\t\t\t\tlet newModule = ConcatenatedModule.create(\n-\t\t\t\t\t\t\t\t\trootModule,\n-\t\t\t\t\t\t\t\t\tmodules,\n-\t\t\t\t\t\t\t\t\tconcatConfiguration.runtime,\n-\t\t\t\t\t\t\t\t\tcompiler.root\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tstatsEmptyConfigurations++;\n+\t\t\t\t\t\t\tconst optimizationBailouts = moduleGraph.getOptimizationBailout(\n+\t\t\t\t\t\t\t\tcurrentRoot\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tfor (const warning of currentConfiguration.getWarningsSorted()) {\n+\t\t\t\t\t\t\t\toptimizationBailouts.push(\n+\t\t\t\t\t\t\t\t\tformatBailoutWarning(warning[0], warning[1])\n \t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tlogger.timeEnd(\"find modules to concatenate\");\n+\t\t\t\t\tlogger.debug(\n+\t\t\t\t\t\t`${\n+\t\t\t\t\t\t\tconcatConfigurations.length\n+\t\t\t\t\t\t} successful concat configurations (avg size: ${\n+\t\t\t\t\t\t\tstatsSizeSum / concatConfigurations.length\n+\t\t\t\t\t\t}), ${statsEmptyConfigurations} bailed out completely`\n+\t\t\t\t\t);\n+\t\t\t\t\tlogger.debug(\n+\t\t\t\t\t\t`${statsCandidates} candidates were considered for adding (${stats.cached} cached failure, ${stats.alreadyInConfig} already in config, ${stats.invalidModule} invalid module, ${stats.incorrectChunks} incorrect chunks, ${stats.incorrectDependency} incorrect dependency, ${stats.incorrectChunksOfImporter} incorrect chunks of importer, ${stats.incorrectModuleDependency} incorrect module dependency, ${stats.incorrectRuntimeCondition} incorrect runtime condition, ${stats.importerFailed} importer failed, ${stats.added} added)`\n+\t\t\t\t\t);\n+\t\t\t\t\t// HACK: Sort configurations by length and start with the longest one\n+\t\t\t\t\t// to get the biggest groups possible. Used modules are marked with usedModules\n+\t\t\t\t\t// TODO: Allow to reuse existing configuration while trying to add dependencies.\n+\t\t\t\t\t// This would improve performance. O(n^2) -> O(n)\n+\t\t\t\t\tlogger.time(`sort concat configurations`);\n+\t\t\t\t\tconcatConfigurations.sort((a, b) => {\n+\t\t\t\t\t\treturn b.modules.size - a.modules.size;\n+\t\t\t\t\t});\n+\t\t\t\t\tlogger.timeEnd(`sort concat configurations`);\n+\t\t\t\t\tconst usedModules = new Set();\n+\n+\t\t\t\t\tlogger.time(\"create concatenated modules\");\n+\t\t\t\t\tasyncLib.each(\n+\t\t\t\t\t\tconcatConfigurations,\n+\t\t\t\t\t\t(concatConfiguration, callback) => {\n+\t\t\t\t\t\t\tconst rootModule = concatConfiguration.rootModule;\n+\n+\t\t\t\t\t\t\t// Avoid overlapping configurations\n+\t\t\t\t\t\t\t// TODO: remove this when todo above is fixed\n+\t\t\t\t\t\t\tif (usedModules.has(rootModule)) return callback();\n+\t\t\t\t\t\t\tconst modules = concatConfiguration.getModules();\n+\t\t\t\t\t\t\tfor (const m of modules) {\n+\t\t\t\t\t\t\t\tusedModules.add(m);\n+\t\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\t\tconst cacheItem = cache.getItemCache(\n-\t\t\t\t\t\t\t\t\tnewModule.identifier(),\n-\t\t\t\t\t\t\t\t\tnull\n-\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t// Create a new ConcatenatedModule\n+\t\t\t\t\t\t\tlet newModule = ConcatenatedModule.create(\n+\t\t\t\t\t\t\t\trootModule,\n+\t\t\t\t\t\t\t\tmodules,\n+\t\t\t\t\t\t\t\tconcatConfiguration.runtime,\n+\t\t\t\t\t\t\t\tcompiler.root\n+\t\t\t\t\t\t\t);\n \n-\t\t\t\t\t\t\t\tconst restore = () => {\n-\t\t\t\t\t\t\t\t\tcacheItem.get((err, cacheModule) => {\n+\t\t\t\t\t\t\tconst build = () => {\n+\t\t\t\t\t\t\t\tnewModule.build(\n+\t\t\t\t\t\t\t\t\tcompiler.options,\n+\t\t\t\t\t\t\t\t\tcompilation,\n+\t\t\t\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t\t\t\terr => {\n \t\t\t\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\t\t\t\treturn callback(new ModuleRestoreError(newModule, err));\n-\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\tif (cacheModule) {\n-\t\t\t\t\t\t\t\t\t\t\tcacheModule.updateCacheModule(newModule);\n-\t\t\t\t\t\t\t\t\t\t\tnewModule = cacheModule;\n-\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\tbuild();\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t};\n-\n-\t\t\t\t\t\t\t\tconst build = () => {\n-\t\t\t\t\t\t\t\t\tnewModule.build(\n-\t\t\t\t\t\t\t\t\t\tcompiler.options,\n-\t\t\t\t\t\t\t\t\t\tcompilation,\n-\t\t\t\t\t\t\t\t\t\tnull,\n-\t\t\t\t\t\t\t\t\t\tnull,\n-\t\t\t\t\t\t\t\t\t\terr => {\n-\t\t\t\t\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\t\t\t\t\tif (!err.module) {\n-\t\t\t\t\t\t\t\t\t\t\t\t\terr.module = newModule;\n-\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\t\t\t\t\t\tif (!err.module) {\n+\t\t\t\t\t\t\t\t\t\t\t\terr.module = newModule;\n \t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\tintegrateAndStore();\n+\t\t\t\t\t\t\t\t\t\t\treturn callback(err);\n \t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\t\t\t\tintegrate();\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t};\n \n-\t\t\t\t\t\t\t\tconst integrateAndStore = () => {\n-\t\t\t\t\t\t\t\t\tChunkGraph.setChunkGraphForModule(newModule, chunkGraph);\n-\t\t\t\t\t\t\t\t\tModuleGraph.setModuleGraphForModule(newModule, moduleGraph);\n+\t\t\t\t\t\t\tconst integrate = () => {\n+\t\t\t\t\t\t\t\tChunkGraph.setChunkGraphForModule(newModule, chunkGraph);\n+\t\t\t\t\t\t\t\tModuleGraph.setModuleGraphForModule(newModule, moduleGraph);\n \n-\t\t\t\t\t\t\t\t\tfor (const warning of concatConfiguration.getWarningsSorted()) {\n-\t\t\t\t\t\t\t\t\t\tmoduleGraph\n-\t\t\t\t\t\t\t\t\t\t\t.getOptimizationBailout(newModule)\n-\t\t\t\t\t\t\t\t\t\t\t.push(formatBailoutWarning(warning[0], warning[1]));\n+\t\t\t\t\t\t\t\tfor (const warning of concatConfiguration.getWarningsSorted()) {\n+\t\t\t\t\t\t\t\t\tmoduleGraph\n+\t\t\t\t\t\t\t\t\t\t.getOptimizationBailout(newModule)\n+\t\t\t\t\t\t\t\t\t\t.push(formatBailoutWarning(warning[0], warning[1]));\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tmoduleGraph.cloneModuleAttributes(rootModule, newModule);\n+\t\t\t\t\t\t\t\tfor (const m of modules) {\n+\t\t\t\t\t\t\t\t\t// add to builtModules when one of the included modules was built\n+\t\t\t\t\t\t\t\t\tif (compilation.builtModules.has(m)) {\n+\t\t\t\t\t\t\t\t\t\tcompilation.builtModules.add(newModule);\n \t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\tmoduleGraph.cloneModuleAttributes(rootModule, newModule);\n-\t\t\t\t\t\t\t\t\tfor (const m of modules) {\n-\t\t\t\t\t\t\t\t\t\t// add to builtModules when one of the included modules was built\n-\t\t\t\t\t\t\t\t\t\tif (compilation.builtModules.has(m)) {\n-\t\t\t\t\t\t\t\t\t\t\tcompilation.builtModules.add(newModule);\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\tif (m !== rootModule) {\n-\t\t\t\t\t\t\t\t\t\t\t// attach external references to the concatenated module too\n-\t\t\t\t\t\t\t\t\t\t\tmoduleGraph.copyOutgoingModuleConnections(\n-\t\t\t\t\t\t\t\t\t\t\t\tm,\n-\t\t\t\t\t\t\t\t\t\t\t\tnewModule,\n-\t\t\t\t\t\t\t\t\t\t\t\tc => {\n-\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.originModule === m &&\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t!(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.dependency instanceof HarmonyImportDependency &&\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodules.has(c.module)\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t// remove module from chunk\n-\t\t\t\t\t\t\t\t\t\t\tfor (const chunk of chunkGraph.getModuleChunksIterable(\n-\t\t\t\t\t\t\t\t\t\t\t\trootModule\n-\t\t\t\t\t\t\t\t\t\t\t)) {\n-\t\t\t\t\t\t\t\t\t\t\t\tchunkGraph.disconnectChunkAndModule(chunk, m);\n+\t\t\t\t\t\t\t\t\tif (m !== rootModule) {\n+\t\t\t\t\t\t\t\t\t\t// attach external references to the concatenated module too\n+\t\t\t\t\t\t\t\t\t\tmoduleGraph.copyOutgoingModuleConnections(\n+\t\t\t\t\t\t\t\t\t\t\tm,\n+\t\t\t\t\t\t\t\t\t\t\tnewModule,\n+\t\t\t\t\t\t\t\t\t\t\tc => {\n+\t\t\t\t\t\t\t\t\t\t\t\treturn (\n+\t\t\t\t\t\t\t\t\t\t\t\t\tc.originModule === m &&\n+\t\t\t\t\t\t\t\t\t\t\t\t\t!(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.dependency instanceof HarmonyImportDependency &&\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodules.has(c.module)\n+\t\t\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t// remove module from chunk\n+\t\t\t\t\t\t\t\t\t\tfor (const chunk of chunkGraph.getModuleChunksIterable(\n+\t\t\t\t\t\t\t\t\t\t\trootModule\n+\t\t\t\t\t\t\t\t\t\t)) {\n+\t\t\t\t\t\t\t\t\t\t\tchunkGraph.disconnectChunkAndModule(chunk, m);\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\tcompilation.modules.delete(rootModule);\n-\t\t\t\t\t\t\t\t\t// remove module from chunk\n-\t\t\t\t\t\t\t\t\tchunkGraph.replaceModule(rootModule, newModule);\n-\t\t\t\t\t\t\t\t\t// replace module references with the concatenated module\n-\t\t\t\t\t\t\t\t\tmoduleGraph.moveModuleConnections(\n-\t\t\t\t\t\t\t\t\t\trootModule,\n-\t\t\t\t\t\t\t\t\t\tnewModule,\n-\t\t\t\t\t\t\t\t\t\tc => {\n-\t\t\t\t\t\t\t\t\t\t\tconst otherModule =\n-\t\t\t\t\t\t\t\t\t\t\t\tc.module === rootModule ? c.originModule : c.module;\n-\t\t\t\t\t\t\t\t\t\t\tconst innerConnection =\n-\t\t\t\t\t\t\t\t\t\t\t\tc.dependency instanceof HarmonyImportDependency &&\n-\t\t\t\t\t\t\t\t\t\t\t\tmodules.has(otherModule);\n-\t\t\t\t\t\t\t\t\t\t\treturn !innerConnection;\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t// add concatenated module to the compilation\n-\t\t\t\t\t\t\t\t\tcompilation.modules.add(newModule);\n-\n-\t\t\t\t\t\t\t\t\t// TODO check if module needs build to avoid caching it without change\n-\t\t\t\t\t\t\t\t\tcacheItem.store(newModule, err => {\n-\t\t\t\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\t\t\t\treturn callback(new ModuleStoreError(newModule, err));\n-\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t};\n-\n-\t\t\t\t\t\t\t\trestore();\n-\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\terr => {\n-\t\t\t\t\t\t\t\tlogger.timeEnd(\"create concatenated modules\");\n-\t\t\t\t\t\t\t\tprocess.nextTick(() => callback(err));\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t);\n-\t\t\t\t\t}\n-\t\t\t\t);\n-\t\t\t}\n-\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcompilation.modules.delete(rootModule);\n+\t\t\t\t\t\t\t\t// remove module from chunk\n+\t\t\t\t\t\t\t\tchunkGraph.replaceModule(rootModule, newModule);\n+\t\t\t\t\t\t\t\t// replace module references with the concatenated module\n+\t\t\t\t\t\t\t\tmoduleGraph.moveModuleConnections(rootModule, newModule, c => {\n+\t\t\t\t\t\t\t\t\tconst otherModule =\n+\t\t\t\t\t\t\t\t\t\tc.module === rootModule ? c.originModule : c.module;\n+\t\t\t\t\t\t\t\t\tconst innerConnection =\n+\t\t\t\t\t\t\t\t\t\tc.dependency instanceof HarmonyImportDependency &&\n+\t\t\t\t\t\t\t\t\t\tmodules.has(otherModule);\n+\t\t\t\t\t\t\t\t\treturn !innerConnection;\n+\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t// add concatenated module to the compilation\n+\t\t\t\t\t\t\t\tcompilation.modules.add(newModule);\n+\n+\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\t\tbuild();\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\terr => {\n+\t\t\t\t\t\t\tlogger.timeEnd(\"create concatenated modules\");\n+\t\t\t\t\t\t\tprocess.nextTick(() => callback(err));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t);\n+\t\t});\n \t}\n \n \t/**"
      },
      {
        "sha": "4597d2bb5236121b795d318fd0092add511cb2ec",
        "filename": "lib/util/semver.js",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/lib%2Futil%2Fsemver.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/lib%2Futil%2Fsemver.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Fsemver.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -215,11 +215,11 @@ exports.parseRange = str => {\n \n /* eslint-disable eqeqeq */\n const rangeToString = range => {\n+\tvar fixCount = range[0];\n+\tvar str = \"\";\n \tif (range.length === 1) {\n \t\treturn \"*\";\n-\t} else if (0 in range) {\n-\t\tvar str = \"\";\n-\t\tvar fixCount = range[0];\n+\t} else if (fixCount + 0.5) {\n \t\tstr +=\n \t\t\tfixCount == 0\n \t\t\t\t? \">=\"\n@@ -464,7 +464,7 @@ exports.versionLtRuntimeCode = runtimeTemplate =>\n exports.rangeToStringRuntimeCode = runtimeTemplate =>\n \t`var rangeToString = ${runtimeTemplate.basicFunction(\"range\", [\n \t\t\"// see webpack/lib/util/semver.js for original code\",\n-\t\t'if(1===range.length)return\"*\";if(0 in range){var r=\"\",n=range[0];r+=0==n?\">=\":-1==n?\"<\":1==n?\"^\":2==n?\"~\":n>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,r+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return r}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\\\((.+)\\\\)$/,\"$1\")}'\n+\t\t'var r=range[0],n=\"\";if(1===range.length)return\"*\";if(r+.5){n+=0==r?\">=\":-1==r?\"<\":1==r?\"^\":2==r?\"~\":r>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,n+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return n}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\\\((.+)\\\\)$/,\"$1\")}'\n \t])}`;\n //#endregion\n "
      },
      {
        "sha": "b560e7d9a6ce8c2c866a7473fb21aaff807128b3",
        "filename": "test/ConfigTestCases.template.js",
        "status": "modified",
        "additions": 29,
        "deletions": 1,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FConfigTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FConfigTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FConfigTestCases.template.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -168,9 +168,37 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\trimraf.sync(outputDirectory);\n \t\t\t\t\t\t\t\tfs.mkdirSync(outputDirectory, { recursive: true });\n \t\t\t\t\t\t\t\tconst deprecationTracker = deprecationTracking.start();\n-\t\t\t\t\t\t\t\twebpack(options, err => {\n+\t\t\t\t\t\t\t\twebpack(options, (err, stats) => {\n \t\t\t\t\t\t\t\t\tdeprecationTracker();\n \t\t\t\t\t\t\t\t\tif (err) return handleFatalError(err, done);\n+\t\t\t\t\t\t\t\t\tconst { modules, children, errorsCount } = stats.toJson({\n+\t\t\t\t\t\t\t\t\t\tall: false,\n+\t\t\t\t\t\t\t\t\t\tmodules: true,\n+\t\t\t\t\t\t\t\t\t\terrorsCount: true\n+\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\tif (errorsCount === 0) {\n+\t\t\t\t\t\t\t\t\t\tconst allModules = children\n+\t\t\t\t\t\t\t\t\t\t\t? children.reduce(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t(all, { modules }) => all.concat(modules),\n+\t\t\t\t\t\t\t\t\t\t\t\t\tmodules || []\n+\t\t\t\t\t\t\t\t\t\t\t  )\n+\t\t\t\t\t\t\t\t\t\t\t: modules;\n+\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\tallModules.some(\n+\t\t\t\t\t\t\t\t\t\t\t\tm => m.type !== \"cached modules\" && !m.cached\n+\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\t\treturn done(\n+\t\t\t\t\t\t\t\t\t\t\t\tnew Error(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t`Some modules were not cached:\\n${stats.toString({\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tall: false,\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodules: true,\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodulesSpace: 100\n+\t\t\t\t\t\t\t\t\t\t\t\t\t})}`\n+\t\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\tdone();\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}, 20000);"
      },
      {
        "sha": "80d125d390281577edbdf77600223a12a907eb9f",
        "filename": "test/configCases/rebuild/finishModules/loader.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FfinishModules%2Floader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FfinishModules%2Floader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Frebuild%2FfinishModules%2Floader.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -1,5 +1,7 @@\n module.exports = function (source) {\n-\tif (this.shouldReplace)\n+\tif (this.shouldReplace) {\n+\t\tthis._module.buildInfo._isReplaced = true;\n \t\treturn \"module.exports = { foo: { foo: 'bar' }, doThings: (v) => v}\";\n+\t}\n \treturn source;\n };"
      },
      {
        "sha": "50a95eefe24fe840eba16f373b0711fb5368ec02",
        "filename": "test/configCases/rebuild/finishModules/webpack.config.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FfinishModules%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FfinishModules%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Frebuild%2FfinishModules%2Fwebpack.config.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -33,6 +33,10 @@ var testPlugin = compiler => {\n \t\t\t\t\tthrow new Error(\"something went wrong\");\n \t\t\t\t}\n \n+\t\t\t\t// Check if already build the updated version\n+\t\t\t\t// this will happen when using caching\n+\t\t\t\tif (module.buildInfo._isReplaced) return callback();\n+\n \t\t\t\tshouldReplace = true;\n \t\t\t\tcompilation.rebuildModule(module, err => {\n \t\t\t\t\tshouldReplace = false;"
      },
      {
        "sha": "fc39654810ebcc90b8146777cf15bc8cc36a126f",
        "filename": "test/configCases/rebuild/rebuildWithNewDependencies/loader.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FrebuildWithNewDependencies%2Floader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FrebuildWithNewDependencies%2Floader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Frebuild%2FrebuildWithNewDependencies%2Floader.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -1,7 +1,9 @@\n module.exports = function (source) {\n-\tif (this.shouldReplace)\n+\tif (this.shouldReplace) {\n+\t\tthis._module.buildInfo._isReplaced = true;\n \t\treturn `import otherFile from './other-file.js';\n \t\texport default otherFile;\n \t\t`;\n+\t}\n \treturn source;\n };"
      },
      {
        "sha": "9a14a0baf4ffa48f619b8dede06c2c871546254c",
        "filename": "test/configCases/rebuild/rebuildWithNewDependencies/webpack.config.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FrebuildWithNewDependencies%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1a584d3148a1d8c6ae14d59696022486dd52e55e/test%2FconfigCases%2Frebuild%2FrebuildWithNewDependencies%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Frebuild%2FrebuildWithNewDependencies%2Fwebpack.config.js?ref=1a584d3148a1d8c6ae14d59696022486dd52e55e",
        "patch": "@@ -33,6 +33,10 @@ var testPlugin = compiler => {\n \t\t\t\t\tthrow new Error(\"something went wrong\");\n \t\t\t\t}\n \n+\t\t\t\t// Check if already build the updated version\n+\t\t\t\t// this will happen when using caching\n+\t\t\t\tif (module.buildInfo._isReplaced) return callback();\n+\n \t\t\t\tshouldReplace = true;\n \t\t\t\tcompilation.rebuildModule(module, err => {\n \t\t\t\t\tshouldReplace = false;"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12845",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12845/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12845/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12845/events",
    "html_url": "https://github.com/webpack/webpack/pull/12845",
    "id": 826041849,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTg4MDc4MDQ2",
    "number": 12845,
    "title": "improve hmr error handling abilities",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-03-09T14:45:45Z",
    "updated_at": "2021-03-15T19:24:50Z",
    "closed_at": "2021-03-09T21:50:19Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12845",
      "html_url": "https://github.com/webpack/webpack/pull/12845",
      "diff_url": "https://github.com/webpack/webpack/pull/12845.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12845.patch",
      "merged_at": "2021-03-09T21:50:19Z"
    },
    "body": "* pass module and moduleId with self error handler\r\n* add error handlers for dependency accept handlers\r\n* pass moduleId and dependencyId with dependency accept error handler\r\n* add output.strictModuleErrorHandling to opt-in into strict module error handling\r\n* HotModuleReplacementPlugin enabled output.strictModuleErrorHandling automatically\r\n\r\nfixes #12826\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nThere is a visible change in module error semantics. Error semantic is now more correct, so I consider this a bugfix.\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* deprecated `output.strictModuleExceptionHandling`\r\n* add `output.strictModuleErrorHandling`: Handles module execution error according to the ESM spec at a performance cost.\r\n* Additions to the HMR API:\r\n  * Added optional error handler argument to `accept` with dependency:\r\n    `import.meta.webpackHot.accept(\"./dep\", () => { ... }, (err, { moduleId, dependencyId }) => { ... })`\r\n    * `err` the error thrown by the callback in second argument or during dependency execution when using ESM dependencies\r\n    * `moduleId` the current module id\r\n    * `dependencyId` the module id of the (first) changed dependency. Here module id of `./dep`.\r\n  * Added meta info object to error handler in self `accept`:\r\n    `import.meta.webpackHot.accept((err, { moduleId, module }) => { ... })`\r\n    * `moduleId` the current module id\r\n    * `module` the current module instance\r\n      * `module.hot` allow to use the HMR API of the errored module instance. A common scenario is to self accept it again. It also makes sense to add a dispose handle to pass `data` along.\r\n      * Note that the errored module might be already partially executed, so make sure to not get into a inconsistent state. You can use `module.hot.data` to store partial state.\r\n      * `module.exports` can be overriden, but be careful since property names might be mangled in production mode.\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12845/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "9d10d7a000b207d44043cf2ac5fa2056bfe02e2a",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 15,
        "deletions": 3,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -560,7 +560,11 @@ export type SourceMapFilename = string;\n  */\n export type SourcePrefix = string;\n /**\n- * Handles exceptions in module loading correctly at a performance cost.\n+ * Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\n+ */\n+export type StrictModuleErrorHandling = boolean;\n+/**\n+ * Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\n  */\n export type StrictModuleExceptionHandling = boolean;\n /**\n@@ -2027,7 +2031,11 @@ export interface Output {\n \t */\n \tsourcePrefix?: SourcePrefix;\n \t/**\n-\t * Handles exceptions in module loading correctly at a performance cost.\n+\t * Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\n+\t */\n+\tstrictModuleErrorHandling?: StrictModuleErrorHandling;\n+\t/**\n+\t * Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\n \t */\n \tstrictModuleExceptionHandling?: StrictModuleExceptionHandling;\n \t/**\n@@ -2960,7 +2968,11 @@ export interface OutputNormalized {\n \t */\n \tsourcePrefix?: SourcePrefix;\n \t/**\n-\t * Handles exceptions in module loading correctly at a performance cost.\n+\t * Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\n+\t */\n+\tstrictModuleErrorHandling?: StrictModuleErrorHandling;\n+\t/**\n+\t * Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\n \t */\n \tstrictModuleExceptionHandling?: StrictModuleExceptionHandling;\n \t/**"
      },
      {
        "sha": "be1f999d8d3f1b1ed1b623ffd74cba04696ec438",
        "filename": "lib/HotModuleReplacementPlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/lib%2FHotModuleReplacementPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/lib%2FHotModuleReplacementPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FHotModuleReplacementPlugin.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -82,6 +82,8 @@ class HotModuleReplacementPlugin {\n \t * @returns {void}\n \t */\n \tapply(compiler) {\n+\t\tif (compiler.options.output.strictModuleErrorHandling === undefined)\n+\t\t\tcompiler.options.output.strictModuleErrorHandling = true;\n \t\tconst runtimeRequirements = [RuntimeGlobals.module];\n \n \t\tconst createAcceptHandler = (parser, ParamDependency) => {\n@@ -121,7 +123,9 @@ class HotModuleReplacementPlugin {\n \t\t\t\t\t\t});\n \t\t\t\t\t\tif (expr.arguments.length > 1) {\n \t\t\t\t\t\t\thotAcceptCallback.call(expr.arguments[1], requests);\n-\t\t\t\t\t\t\tparser.walkExpression(expr.arguments[1]); // other args are ignored\n+\t\t\t\t\t\t\tfor (let i = 1; i < expr.arguments.length; i++) {\n+\t\t\t\t\t\t\t\tparser.walkExpression(expr.arguments[i]);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\thotAcceptWithoutCallback.call(expr, requests);"
      },
      {
        "sha": "1170c63aac4975def0d3e808d9cb29d56cded1f3",
        "filename": "lib/hmr/HotModuleReplacement.runtime.js",
        "status": "modified",
        "additions": 10,
        "deletions": 4,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/lib%2Fhmr%2FHotModuleReplacement.runtime.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/lib%2Fhmr%2FHotModuleReplacement.runtime.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fhmr%2FHotModuleReplacement.runtime.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -104,6 +104,7 @@ module.exports = function () {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n+\t\t\t_acceptedErrorHandlers: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n@@ -118,13 +119,18 @@ module.exports = function () {\n \n \t\t\t// Module API\n \t\t\tactive: true,\n-\t\t\taccept: function (dep, callback) {\n+\t\t\taccept: function (dep, callback, errorHandler) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n-\t\t\t\telse if (typeof dep === \"object\" && dep !== null)\n-\t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n+\t\t\t\telse if (typeof dep === \"object\" && dep !== null) {\n+\t\t\t\t\tfor (var i = 0; i < dep.length; i++) {\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function () {};\n-\t\t\t\telse hot._acceptedDependencies[dep] = callback || function () {};\n+\t\t\t\t\t\thot._acceptedErrorHandlers[dep[i]] = errorHandler;\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\thot._acceptedDependencies[dep] = callback || function () {};\n+\t\t\t\t\thot._acceptedErrorHandlers[dep] = errorHandler;\n+\t\t\t\t}\n \t\t\t},\n \t\t\tdecline: function (dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;"
      },
      {
        "sha": "2006f1537845b943917375a7aa83ea716005e638",
        "filename": "lib/hmr/JavascriptHotModuleReplacement.runtime.js",
        "status": "modified",
        "additions": 48,
        "deletions": 17,
        "changes": 65,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/lib%2Fhmr%2FJavascriptHotModuleReplacement.runtime.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/lib%2Fhmr%2FJavascriptHotModuleReplacement.runtime.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fhmr%2FJavascriptHotModuleReplacement.runtime.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -204,18 +204,19 @@ module.exports = function () {\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (var j = 0; j < outdatedModules.length; j++) {\n \t\t\tvar outdatedModuleId = outdatedModules[j];\n+\t\t\tvar module = $moduleCache$[outdatedModuleId];\n \t\t\tif (\n-\t\t\t\t$moduleCache$[outdatedModuleId] &&\n-\t\t\t\t$moduleCache$[outdatedModuleId].hot._selfAccepted &&\n+\t\t\t\tmodule &&\n+\t\t\t\tmodule.hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[outdatedModuleId] !== warnUnexpectedRequire &&\n \t\t\t\t// when called invalidate self-accepting is not possible\n-\t\t\t\t!$moduleCache$[outdatedModuleId].hot._selfInvalidated\n+\t\t\t\t!module.hot._selfInvalidated\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: outdatedModuleId,\n-\t\t\t\t\trequire: $moduleCache$[outdatedModuleId].hot._requireSelf,\n-\t\t\t\t\terrorHandler: $moduleCache$[outdatedModuleId].hot._selfAccepted\n+\t\t\t\t\trequire: module.hot._requireSelf,\n+\t\t\t\t\terrorHandler: module.hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n@@ -303,31 +304,58 @@ module.exports = function () {\n \t\t\t\t\t\t\tmoduleOutdatedDependencies =\n \t\t\t\t\t\t\t\toutdatedDependencies[outdatedModuleId];\n \t\t\t\t\t\t\tvar callbacks = [];\n+\t\t\t\t\t\t\tvar errorHandlers = [];\n \t\t\t\t\t\t\tvar dependenciesForCallbacks = [];\n \t\t\t\t\t\t\tfor (var j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\t\t\tvar dependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\t\t\tvar acceptCallback =\n \t\t\t\t\t\t\t\t\tmodule.hot._acceptedDependencies[dependency];\n+\t\t\t\t\t\t\t\tvar errorHandler =\n+\t\t\t\t\t\t\t\t\tmodule.hot._acceptedErrorHandlers[dependency];\n \t\t\t\t\t\t\t\tif (acceptCallback) {\n \t\t\t\t\t\t\t\t\tif (callbacks.indexOf(acceptCallback) !== -1) continue;\n \t\t\t\t\t\t\t\t\tcallbacks.push(acceptCallback);\n+\t\t\t\t\t\t\t\t\terrorHandlers.push(errorHandler);\n \t\t\t\t\t\t\t\t\tdependenciesForCallbacks.push(dependency);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tfor (var k = 0; k < callbacks.length; k++) {\n \t\t\t\t\t\t\t\ttry {\n \t\t\t\t\t\t\t\t\tcallbacks[k].call(null, moduleOutdatedDependencies);\n \t\t\t\t\t\t\t\t} catch (err) {\n-\t\t\t\t\t\t\t\t\tif (options.onErrored) {\n-\t\t\t\t\t\t\t\t\t\toptions.onErrored({\n-\t\t\t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n-\t\t\t\t\t\t\t\t\t\t\tmoduleId: outdatedModuleId,\n-\t\t\t\t\t\t\t\t\t\t\tdependencyId: dependenciesForCallbacks[k],\n-\t\t\t\t\t\t\t\t\t\t\terror: err\n-\t\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\tif (!options.ignoreErrored) {\n-\t\t\t\t\t\t\t\t\t\treportError(err);\n+\t\t\t\t\t\t\t\t\tif (typeof errorHandlers[k] === \"function\") {\n+\t\t\t\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\t\t\t\terrorHandlers[k](err, {\n+\t\t\t\t\t\t\t\t\t\t\t\tmoduleId: outdatedModuleId,\n+\t\t\t\t\t\t\t\t\t\t\t\tdependencyId: dependenciesForCallbacks[k]\n+\t\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\t} catch (err2) {\n+\t\t\t\t\t\t\t\t\t\t\tif (options.onErrored) {\n+\t\t\t\t\t\t\t\t\t\t\t\toptions.onErrored({\n+\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"accept-error-handler-errored\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\tmoduleId: outdatedModuleId,\n+\t\t\t\t\t\t\t\t\t\t\t\t\tdependencyId: dependenciesForCallbacks[k],\n+\t\t\t\t\t\t\t\t\t\t\t\t\terror: err2,\n+\t\t\t\t\t\t\t\t\t\t\t\t\toriginalError: err\n+\t\t\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\tif (!options.ignoreErrored) {\n+\t\t\t\t\t\t\t\t\t\t\t\treportError(err2);\n+\t\t\t\t\t\t\t\t\t\t\t\treportError(err);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tif (options.onErrored) {\n+\t\t\t\t\t\t\t\t\t\t\toptions.onErrored({\n+\t\t\t\t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n+\t\t\t\t\t\t\t\t\t\t\t\tmoduleId: outdatedModuleId,\n+\t\t\t\t\t\t\t\t\t\t\t\tdependencyId: dependenciesForCallbacks[k],\n+\t\t\t\t\t\t\t\t\t\t\t\terror: err\n+\t\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\tif (!options.ignoreErrored) {\n+\t\t\t\t\t\t\t\t\t\t\treportError(err);\n+\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n@@ -344,7 +372,10 @@ module.exports = function () {\n \t\t\t\t\t} catch (err) {\n \t\t\t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\t\t\ttry {\n-\t\t\t\t\t\t\t\titem.errorHandler(err);\n+\t\t\t\t\t\t\t\titem.errorHandler(err, {\n+\t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n+\t\t\t\t\t\t\t\t\tmodule: $moduleCache$[moduleId]\n+\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\t\toptions.onErrored({\n@@ -356,8 +387,8 @@ module.exports = function () {\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\t\treportError(err2);\n+\t\t\t\t\t\t\t\t\treportError(err);\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\treportError(err);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tif (options.onErrored) {"
      },
      {
        "sha": "6c86b0f24f6be362ca8f0023bd2b16115e75afa3",
        "filename": "lib/javascript/JavascriptModulesPlugin.js",
        "status": "modified",
        "additions": 17,
        "deletions": 2,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptModulesPlugin.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -1124,8 +1124,14 @@ class JavascriptModulesPlugin {\n \t\t);\n \t\tconst content = Template.asString([\n \t\t\t\"// Check if module is in cache\",\n-\t\t\t\"if(__webpack_module_cache__[moduleId]) {\",\n-\t\t\tTemplate.indent(\"return __webpack_module_cache__[moduleId].exports;\"),\n+\t\t\t\"var cachedModule = __webpack_module_cache__[moduleId];\",\n+\t\t\t\"if (cachedModule !== undefined) {\",\n+\t\t\toutputOptions.strictModuleErrorHandling\n+\t\t\t\t? Template.indent([\n+\t\t\t\t\t\t\"if (cachedModule.error !== undefined) throw cachedModule.error;\",\n+\t\t\t\t\t\t\"return cachedModule.exports;\"\n+\t\t\t\t  ])\n+\t\t\t\t: Template.indent(\"return cachedModule.exports;\"),\n \t\t\t\"}\",\n \t\t\t\"// Create a new module (and put it into the cache)\",\n \t\t\t\"var module = __webpack_module_cache__[moduleId] = {\",\n@@ -1148,6 +1154,15 @@ class JavascriptModulesPlugin {\n \t\t\t\t\t\t]),\n \t\t\t\t\t\t\"}\"\n \t\t\t\t  ])\n+\t\t\t\t: outputOptions.strictModuleErrorHandling\n+\t\t\t\t? Template.asString([\n+\t\t\t\t\t\t\"// Execute the module function\",\n+\t\t\t\t\t\t\"try {\",\n+\t\t\t\t\t\tTemplate.indent(moduleExecution),\n+\t\t\t\t\t\t\"} catch(e) {\",\n+\t\t\t\t\t\tTemplate.indent([\"module.error = e;\", \"throw e;\"]),\n+\t\t\t\t\t\t\"}\"\n+\t\t\t\t  ])\n \t\t\t\t: Template.asString([\n \t\t\t\t\t\t\"// Execute the module function\",\n \t\t\t\t\t\tmoduleExecution"
      },
      {
        "sha": "bf22023a17a2c7088508f972f7729ce20df12822",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -2617,6 +2617,9 @@\n         \"sourcePrefix\": {\n           \"$ref\": \"#/definitions/SourcePrefix\"\n         },\n+        \"strictModuleErrorHandling\": {\n+          \"$ref\": \"#/definitions/StrictModuleErrorHandling\"\n+        },\n         \"strictModuleExceptionHandling\": {\n           \"$ref\": \"#/definitions/StrictModuleExceptionHandling\"\n         },\n@@ -2767,6 +2770,9 @@\n         \"sourcePrefix\": {\n           \"$ref\": \"#/definitions/SourcePrefix\"\n         },\n+        \"strictModuleErrorHandling\": {\n+          \"$ref\": \"#/definitions/StrictModuleErrorHandling\"\n+        },\n         \"strictModuleExceptionHandling\": {\n           \"$ref\": \"#/definitions/StrictModuleExceptionHandling\"\n         },\n@@ -4247,8 +4253,12 @@\n         }\n       ]\n     },\n+    \"StrictModuleErrorHandling\": {\n+      \"description\": \"Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\",\n+      \"type\": \"boolean\"\n+    },\n     \"StrictModuleExceptionHandling\": {\n-      \"description\": \"Handles exceptions in module loading correctly at a performance cost.\",\n+      \"description\": \"Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\",\n       \"type\": \"boolean\"\n     },\n     \"Target\": {"
      },
      {
        "sha": "56805cd3c057691e1ac7ab8d0eb0087134552e0e",
        "filename": "test/Stats.test.js",
        "status": "modified",
        "additions": 12,
        "deletions": 12,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FStats.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FStats.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStats.test.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -83,10 +83,10 @@ describe(\"Stats\", () => {\n \t\t\t      \"assets\": Array [\n \t\t\t        Object {\n \t\t\t          \"name\": \"entryA.js\",\n-\t\t\t          \"size\": 182,\n+\t\t\t          \"size\": 196,\n \t\t\t        },\n \t\t\t      ],\n-\t\t\t      \"assetsSize\": 182,\n+\t\t\t      \"assetsSize\": 196,\n \t\t\t      \"auxiliaryAssets\": undefined,\n \t\t\t      \"auxiliaryAssetsSize\": 0,\n \t\t\t      \"childAssets\": undefined,\n@@ -100,10 +100,10 @@ describe(\"Stats\", () => {\n \t\t\t      \"assets\": Array [\n \t\t\t        Object {\n \t\t\t          \"name\": \"entryB.js\",\n-\t\t\t          \"size\": 182,\n+\t\t\t          \"size\": 196,\n \t\t\t        },\n \t\t\t      ],\n-\t\t\t      \"assetsSize\": 182,\n+\t\t\t      \"assetsSize\": 196,\n \t\t\t      \"auxiliaryAssets\": undefined,\n \t\t\t      \"auxiliaryAssetsSize\": 0,\n \t\t\t      \"childAssets\": undefined,\n@@ -156,10 +156,10 @@ describe(\"Stats\", () => {\n \t\t\t      \"assets\": Array [\n \t\t\t        Object {\n \t\t\t          \"name\": \"entryA.js\",\n-\t\t\t          \"size\": 182,\n+\t\t\t          \"size\": 196,\n \t\t\t        },\n \t\t\t      ],\n-\t\t\t      \"assetsSize\": 182,\n+\t\t\t      \"assetsSize\": 196,\n \t\t\t      \"auxiliaryAssets\": undefined,\n \t\t\t      \"auxiliaryAssetsSize\": 0,\n \t\t\t      \"childAssets\": undefined,\n@@ -173,10 +173,10 @@ describe(\"Stats\", () => {\n \t\t\t      \"assets\": Array [\n \t\t\t        Object {\n \t\t\t          \"name\": \"entryB.js\",\n-\t\t\t          \"size\": 2926,\n+\t\t\t          \"size\": 2940,\n \t\t\t        },\n \t\t\t      ],\n-\t\t\t      \"assetsSize\": 2926,\n+\t\t\t      \"assetsSize\": 2940,\n \t\t\t      \"auxiliaryAssets\": undefined,\n \t\t\t      \"auxiliaryAssetsSize\": 0,\n \t\t\t      \"childAssets\": undefined,\n@@ -221,10 +221,10 @@ describe(\"Stats\", () => {\n \t\t\t      \"info\": Object {\n \t\t\t        \"javascriptModule\": false,\n \t\t\t        \"minimized\": true,\n-\t\t\t        \"size\": 2926,\n+\t\t\t        \"size\": 2940,\n \t\t\t      },\n \t\t\t      \"name\": \"entryB.js\",\n-\t\t\t      \"size\": 2926,\n+\t\t\t      \"size\": 2940,\n \t\t\t      \"type\": \"asset\",\n \t\t\t    },\n \t\t\t    Object {\n@@ -241,10 +241,10 @@ describe(\"Stats\", () => {\n \t\t\t      \"info\": Object {\n \t\t\t        \"javascriptModule\": false,\n \t\t\t        \"minimized\": true,\n-\t\t\t        \"size\": 182,\n+\t\t\t        \"size\": 196,\n \t\t\t      },\n \t\t\t      \"name\": \"entryA.js\",\n-\t\t\t      \"size\": 182,\n+\t\t\t      \"size\": 196,\n \t\t\t      \"type\": \"asset\",\n \t\t\t    },\n \t\t\t    Object {"
      },
      {
        "sha": "6dccf0a4a9b311f6f45a99aae81f1e70ea2b1527",
        "filename": "test/Validation.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FValidation.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FValidation.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FValidation.test.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -496,7 +496,7 @@ describe(\"Validation\", () => {\n \t\t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t\t - configuration.output has an unknown property 'ecmaVersion'. These properties are valid:\n-\t\t\t   object { assetModuleFilename?, auxiliaryComment?, charset?, chunkFilename?, chunkFormat?, chunkLoadTimeout?, chunkLoading?, chunkLoadingGlobal?, clean?, compareBeforeEmit?, crossOriginLoading?, devtoolFallbackModuleFilenameTemplate?, devtoolModuleFilenameTemplate?, devtoolNamespace?, enabledChunkLoadingTypes?, enabledLibraryTypes?, enabledWasmLoadingTypes?, environment?, filename?, globalObject?, hashDigest?, hashDigestLength?, hashFunction?, hashSalt?, hotUpdateChunkFilename?, hotUpdateGlobal?, hotUpdateMainFilename?, iife?, importFunctionName?, importMetaName?, library?, libraryExport?, libraryTarget?, module?, path?, pathinfo?, publicPath?, scriptType?, sourceMapFilename?, sourcePrefix?, strictModuleExceptionHandling?, umdNamedDefine?, uniqueName?, wasmLoading?, webassemblyModuleFilename?, workerChunkLoading?, workerWasmLoading? }\n+\t\t\t   object { assetModuleFilename?, auxiliaryComment?, charset?, chunkFilename?, chunkFormat?, chunkLoadTimeout?, chunkLoading?, chunkLoadingGlobal?, clean?, compareBeforeEmit?, crossOriginLoading?, devtoolFallbackModuleFilenameTemplate?, devtoolModuleFilenameTemplate?, devtoolNamespace?, enabledChunkLoadingTypes?, enabledLibraryTypes?, enabledWasmLoadingTypes?, environment?, filename?, globalObject?, hashDigest?, hashDigestLength?, hashFunction?, hashSalt?, hotUpdateChunkFilename?, hotUpdateGlobal?, hotUpdateMainFilename?, iife?, importFunctionName?, importMetaName?, library?, libraryExport?, libraryTarget?, module?, path?, pathinfo?, publicPath?, scriptType?, sourceMapFilename?, sourcePrefix?, strictModuleErrorHandling?, strictModuleExceptionHandling?, umdNamedDefine?, uniqueName?, wasmLoading?, webassemblyModuleFilename?, workerChunkLoading?, workerWasmLoading? }\n \t\t\t   -> Options affecting the output of the compilation. \\`output\\` options tell webpack how to write the compiled files to disk.\n \t\t\t   Did you mean output.environment (output.ecmaVersion was a temporary configuration option during webpack 5 beta)?\"\n \t\t`)"
      },
      {
        "sha": "3a1a9abc4bf9863f83867c3174692cf41c49a0de",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 15,
        "deletions": 2,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -5023,16 +5023,29 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"string\",\n   },\n+  \"output-strict-module-error-handling\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\",\n+        \"multiple\": false,\n+        \"path\": \"output.strictModuleErrorHandling\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"output-strict-module-exception-handling\": Object {\n     \"configs\": Array [\n       Object {\n-        \"description\": \"Handles exceptions in module loading correctly at a performance cost.\",\n+        \"description\": \"Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\",\n         \"multiple\": false,\n         \"path\": \"output.strictModuleExceptionHandling\",\n         \"type\": \"boolean\",\n       },\n     ],\n-    \"description\": \"Handles exceptions in module loading correctly at a performance cost.\",\n+    \"description\": \"Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\",\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },"
      },
      {
        "sha": "5b9bf81ee7b8b4575e2e27ee6a54d3450c447b3f",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 171,
        "deletions": 171,
        "changes": 342,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -3,12 +3,12 @@\n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n \"fitting:\n   PublicPath: auto\n-  asset fitting-9c97391e9f91d0184211.js 15.9 KiB [emitted] [immutable]\n+  asset fitting-26c6d35b93ceb4d464ff.js 16 KiB [emitted] [immutable]\n   asset fitting-1c702fff0ba9fe1126d9.js 1.9 KiB [emitted] [immutable]\n   asset fitting-c0e0ed061413e64a66c5.js 1.9 KiB [emitted] [immutable]\n   asset fitting-445185754184bf780ddc.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.7 KiB = fitting-1c702fff0ba9fe1126d9.js 1.9 KiB fitting-c0e0ed061413e64a66c5.js 1.9 KiB fitting-9c97391e9f91d0184211.js 15.9 KiB\n-  chunk (runtime: main) fitting-9c97391e9f91d0184211.js 1.87 KiB (javascript) 8.54 KiB (runtime) [entry] [rendered]\n+  Entrypoint main 19.8 KiB = fitting-1c702fff0ba9fe1126d9.js 1.9 KiB fitting-c0e0ed061413e64a66c5.js 1.9 KiB fitting-26c6d35b93ceb4d464ff.js 16 KiB\n+  chunk (runtime: main) fitting-26c6d35b93ceb4d464ff.js 1.87 KiB (javascript) 8.54 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.54 KiB 11 modules\n     cacheable modules 1.87 KiB\n@@ -30,12 +30,12 @@ exports[`StatsTestCases should print correct stats for aggressive-splitting-entr\n \n content-change:\n   PublicPath: auto\n-  asset content-change-7352f887fa9646e3ab49.js 15.9 KiB [emitted] [immutable]\n+  asset content-change-69a4356349e9ea3baa42.js 16 KiB [emitted] [immutable]\n   asset content-change-1c702fff0ba9fe1126d9.js 1.9 KiB [emitted] [immutable]\n   asset content-change-c0e0ed061413e64a66c5.js 1.9 KiB [emitted] [immutable]\n   asset content-change-445185754184bf780ddc.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.7 KiB = content-change-1c702fff0ba9fe1126d9.js 1.9 KiB content-change-c0e0ed061413e64a66c5.js 1.9 KiB content-change-7352f887fa9646e3ab49.js 15.9 KiB\n-  chunk (runtime: main) content-change-7352f887fa9646e3ab49.js 1.87 KiB (javascript) 8.54 KiB (runtime) [entry] [rendered]\n+  Entrypoint main 19.8 KiB = content-change-1c702fff0ba9fe1126d9.js 1.9 KiB content-change-c0e0ed061413e64a66c5.js 1.9 KiB content-change-69a4356349e9ea3baa42.js 16 KiB\n+  chunk (runtime: main) content-change-69a4356349e9ea3baa42.js 1.87 KiB (javascript) 8.54 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.54 KiB 11 modules\n     cacheable modules 1.87 KiB\n@@ -58,7 +58,7 @@ content-change:\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n \"PublicPath: auto\n-asset d0a5a9b763dbb2c1ae29.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset 3faf18a728a564f8fcc2.js 11.5 KiB [emitted] [immutable] (name: main)\n asset b28b42175852a350ae55.js 1.91 KiB [emitted] [immutable]\n asset 5dc82ad1144129efc6f0.js 1.91 KiB [emitted] [immutable]\n asset 6861109a893ce5c56a08.js 1.9 KiB [emitted] [immutable]\n@@ -70,12 +70,12 @@ asset c98f03fbb3549a9685f2.js 1.9 KiB [emitted] [immutable]\n asset 4437b7a806fda9652d78.js 1010 bytes [emitted] [immutable]\n asset 9711883e11bdd4d550ff.js 1010 bytes [emitted] [immutable]\n asset e0332efe5dd181ffeff5.js 1010 bytes [emitted] [immutable]\n-Entrypoint main 11.5 KiB = d0a5a9b763dbb2c1ae29.js\n+Entrypoint main 11.5 KiB = 3faf18a728a564f8fcc2.js\n chunk (runtime: main) c0e0ed061413e64a66c5.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./c ./d ./e ./index.js 3:0-30\n   ./c.js 899 bytes [built] [code generated]\n   ./d.js 899 bytes [built] [code generated]\n-chunk (runtime: main) d0a5a9b763dbb2c1ae29.js (main) 248 bytes (javascript) 6.25 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) 3faf18a728a564f8fcc2.js (main) 248 bytes (javascript) 6.25 KiB (runtime) [entry] [rendered]\n   > ./index main\n   runtime modules 6.25 KiB 7 modules\n   ./index.js 248 bytes [built] [code generated]\n@@ -253,9 +253,9 @@ default:\n \n vendors:\n   Entrypoint main 11 KiB = vendors/main.js\n-  Entrypoint a 14.3 KiB = vendors/vendors.js 1.08 KiB vendors/a.js 13.3 KiB\n-  Entrypoint b 8.01 KiB = vendors/vendors.js 1.08 KiB vendors/b.js 6.93 KiB\n-  Entrypoint c 8.01 KiB = vendors/vendors.js 1.08 KiB vendors/c.js 6.93 KiB\n+  Entrypoint a 14.4 KiB = vendors/vendors.js 1.08 KiB vendors/a.js 13.3 KiB\n+  Entrypoint b 8.04 KiB = vendors/vendors.js 1.08 KiB vendors/b.js 6.97 KiB\n+  Entrypoint c 8.04 KiB = vendors/vendors.js 1.08 KiB vendors/c.js 6.97 KiB\n   chunk (runtime: b) vendors/b.js (b) 156 bytes (javascript) 2.63 KiB (runtime) [entry] [rendered]\n     > ./b b\n     runtime modules 2.63 KiB 4 modules\n@@ -302,9 +302,9 @@ vendors:\n \n multiple-vendors:\n   Entrypoint main 11.4 KiB = multiple-vendors/main.js\n-  Entrypoint a 14.8 KiB = multiple-vendors/libs-x.js 414 bytes multiple-vendors/954.js 414 bytes multiple-vendors/767.js 414 bytes multiple-vendors/390.js 414 bytes multiple-vendors/a.js 13.2 KiB\n-  Entrypoint b 7.94 KiB = multiple-vendors/libs-x.js 414 bytes multiple-vendors/954.js 414 bytes multiple-vendors/767.js 414 bytes multiple-vendors/568.js 414 bytes multiple-vendors/b.js 6.32 KiB\n-  Entrypoint c 7.94 KiB = multiple-vendors/libs-x.js 414 bytes multiple-vendors/769.js 414 bytes multiple-vendors/767.js 414 bytes multiple-vendors/568.js 414 bytes multiple-vendors/c.js 6.32 KiB\n+  Entrypoint a 14.9 KiB = multiple-vendors/libs-x.js 414 bytes multiple-vendors/954.js 414 bytes multiple-vendors/767.js 414 bytes multiple-vendors/390.js 414 bytes multiple-vendors/a.js 13.2 KiB\n+  Entrypoint b 7.97 KiB = multiple-vendors/libs-x.js 414 bytes multiple-vendors/954.js 414 bytes multiple-vendors/767.js 414 bytes multiple-vendors/568.js 414 bytes multiple-vendors/b.js 6.35 KiB\n+  Entrypoint c 7.97 KiB = multiple-vendors/libs-x.js 414 bytes multiple-vendors/769.js 414 bytes multiple-vendors/767.js 414 bytes multiple-vendors/568.js 414 bytes multiple-vendors/c.js 6.35 KiB\n   chunk (runtime: a, b, c, main) multiple-vendors/libs-x.js (libs-x) (id hint: libs) 20 bytes [initial] [rendered] split chunk (cache group: libs) (name: libs-x)\n     > ./a ./index.js 1:0-47\n     > ./b ./index.js 2:0-47\n@@ -375,8 +375,8 @@ multiple-vendors:\n all:\n   Entrypoint main 11.4 KiB = all/main.js\n   Entrypoint a 14.8 KiB = all/282.js 414 bytes all/954.js 414 bytes all/767.js 414 bytes all/390.js 414 bytes all/a.js 13.2 KiB\n-  Entrypoint b 7.94 KiB = all/282.js 414 bytes all/954.js 414 bytes all/767.js 414 bytes all/568.js 414 bytes all/b.js 6.32 KiB\n-  Entrypoint c 7.94 KiB = all/282.js 414 bytes all/769.js 414 bytes all/767.js 414 bytes all/568.js 414 bytes all/c.js 6.32 KiB\n+  Entrypoint b 7.97 KiB = all/282.js 414 bytes all/954.js 414 bytes all/767.js 414 bytes all/568.js 414 bytes all/b.js 6.35 KiB\n+  Entrypoint c 7.97 KiB = all/282.js 414 bytes all/769.js 414 bytes all/767.js 414 bytes all/568.js 414 bytes all/c.js 6.35 KiB\n   chunk (runtime: b) all/b.js (b) 116 bytes (javascript) 2.64 KiB (runtime) [entry] [rendered]\n     > ./b b\n     runtime modules 2.64 KiB 4 modules\n@@ -466,10 +466,10 @@ webpack x.x.x compiled with 1 warning in X ms\"\n \n exports[`StatsTestCases should print correct stats for chunk-module-id-range 1`] = `\n \"PublicPath: auto\n-asset main1.js 4.47 KiB [emitted] (name: main1)\n-asset main2.js 4.47 KiB [emitted] (name: main2)\n-Entrypoint main1 4.47 KiB = main1.js\n-Entrypoint main2 4.47 KiB = main2.js\n+asset main1.js 4.51 KiB [emitted] (name: main1)\n+asset main2.js 4.5 KiB [emitted] (name: main2)\n+Entrypoint main1 4.51 KiB = main1.js\n+Entrypoint main2 4.5 KiB = main2.js\n chunk (runtime: main1) main1.js (main1) 189 bytes (javascript) 670 bytes (runtime) [entry] [rendered]\n   > ./main1 main1\n   runtime modules 670 bytes 3 modules\n@@ -493,7 +493,7 @@ webpack x.x.x compiled successfully in X ms\"\n \n exports[`StatsTestCases should print correct stats for chunks 1`] = `\n \"PublicPath: auto\n-asset bundle.js 10.1 KiB [emitted] (name: main)\n+asset bundle.js 10.2 KiB [emitted] (name: main)\n asset 460.bundle.js 320 bytes [emitted]\n asset 524.bundle.js 206 bytes [emitted]\n asset 996.bundle.js 138 bytes [emitted]\n@@ -616,7 +616,7 @@ webpack x.x.x compiled <CLR=32>successfully</CLR> in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for common-libs 1`] = `\n-\"asset react.js 3.01 KiB [emitted] [minimized] (name: react) 1 related asset\n+\"asset react.js 3.02 KiB [emitted] [minimized] (name: react) 1 related asset\n modules by path ../../../node_modules/react/ 6.48 KiB\n   ../../../node_modules/react/index.js 190 bytes [built] [code generated]\n   ../../../node_modules/react/cjs/react.production.min.js 6.3 KiB [built] [code generated]\n@@ -626,9 +626,9 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-0 1`] = `\n-\"asset entry-1.js 5.51 KiB [emitted] (name: entry-1)\n+\"asset entry-1.js 5.55 KiB [emitted] (name: entry-1)\n asset 429.js 274 bytes [emitted] (id hint: vendor-1)\n-Entrypoint entry-1 5.78 KiB = 429.js 274 bytes entry-1.js 5.51 KiB\n+Entrypoint entry-1 5.82 KiB = 429.js 274 bytes entry-1.js 5.55 KiB\n runtime modules 2.33 KiB 3 modules\n modules by path ./modules/*.js 132 bytes\n   ./modules/a.js 22 bytes [built] [code generated]\n@@ -642,9 +642,9 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-Infinity 1`] = `\n-\"asset entry-1.js 5.51 KiB [emitted] (name: entry-1)\n+\"asset entry-1.js 5.55 KiB [emitted] (name: entry-1)\n asset vendor-1.js 274 bytes [emitted] (name: vendor-1) (id hint: vendor-1)\n-Entrypoint entry-1 5.78 KiB = vendor-1.js 274 bytes entry-1.js 5.51 KiB\n+Entrypoint entry-1 5.82 KiB = vendor-1.js 274 bytes entry-1.js 5.55 KiB\n runtime modules 2.33 KiB 3 modules\n modules by path ./modules/*.js 132 bytes\n   ./modules/a.js 22 bytes [built] [code generated]\n@@ -658,19 +658,19 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"asset app.f647dc33e8f3d2c6a1ae-1.js 6.05 KiB [emitted] [immutable] (name: app)\n+\"asset app.d57c29ee13b80ecca98d-1.js 6.08 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-1.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.65 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.f647dc33e8f3d2c6a1ae-1.js 6.05 KiB\n+Entrypoint app 6.69 KiB = vendor.ebb9b6c7e5493f36bead-1.js 619 bytes app.d57c29ee13b80ecca98d-1.js 6.08 KiB\n runtime modules 2.63 KiB 4 modules\n orphan modules 118 bytes [orphan] 2 modules\n cacheable modules 272 bytes\n   ./entry-1.js + 2 modules 185 bytes [built] [code generated]\n   ./constants.js 87 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset app.452dd5271ba13c48133f-2.js 6.06 KiB [emitted] [immutable] (name: app)\n+asset app.4b538163b6d1bbb268b8-2.js 6.1 KiB [emitted] [immutable] (name: app)\n asset vendor.ebb9b6c7e5493f36bead-2.js 619 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.67 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.452dd5271ba13c48133f-2.js 6.06 KiB\n+Entrypoint app 6.7 KiB = vendor.ebb9b6c7e5493f36bead-2.js 619 bytes app.4b538163b6d1bbb268b8-2.js 6.1 KiB\n runtime modules 2.63 KiB 4 modules\n orphan modules 125 bytes [orphan] 2 modules\n cacheable modules 279 bytes\n@@ -700,8 +700,8 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"asset main-463ed5aa6adbae79d66f.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-463ed5aa6adbae79d66f.js.map 9.2 KiB [emitted] [dev] (auxiliary name: main)\n+\"asset main-69e8199e63e8b8a60ed5.js 10.3 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-69e8199e63e8b8a60ed5.js.map 9.24 KiB [emitted] [dev] (auxiliary name: main)\n asset 664-a0b92720f0f2d9d4aaf4.js 455 bytes [emitted] [immutable]\n   sourceMap 664-a0b92720f0f2d9d4aaf4.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n@@ -711,8 +711,8 @@ cacheable modules 106 bytes\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-463ed5aa6adbae79d66f.js 10.3 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-463ed5aa6adbae79d66f.js.map 9.2 KiB [emitted] [dev] (auxiliary name: main)\n+asset main-69e8199e63e8b8a60ed5.js 10.3 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-69e8199e63e8b8a60ed5.js.map 9.24 KiB [emitted] [dev] (auxiliary name: main)\n asset 664-a0b92720f0f2d9d4aaf4.js 455 bytes [emitted] [immutable]\n   sourceMap 664-a0b92720f0f2d9d4aaf4.js.map 344 bytes [emitted] [dev]\n runtime modules 6.23 KiB 8 modules\n@@ -722,7 +722,7 @@ cacheable modules 106 bytes\n   ./b/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-7c183c7900555907475e.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset main-6c3a9f2b1113ead258aa.js 11.6 KiB [emitted] [immutable] (name: main)\n asset 664-3cdeef446e88ad105071.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n@@ -731,7 +731,7 @@ cacheable modules 106 bytes\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-7c183c7900555907475e.js 11.5 KiB [emitted] [immutable] (name: main)\n+asset main-6c3a9f2b1113ead258aa.js 11.6 KiB [emitted] [immutable] (name: main)\n asset 664-3cdeef446e88ad105071.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.23 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n@@ -742,7 +742,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for custom-terser 1`] = `\n-\"asset bundle.js 556 bytes [emitted] [minimized] (name: main)\n+\"asset bundle.js 586 bytes [emitted] [minimized] (name: main)\n ./index.js 128 bytes [built] [code generated]\n   [no exports used]\n ./a.js 49 bytes [built] [code generated]\n@@ -751,15 +751,15 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for define-plugin 1`] = `\n-\"asset 123.js 1.36 KiB [emitted] (name: main)\n+\"asset 123.js 1.4 KiB [emitted] (name: main)\n ./index.js 24 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset 321.js 1.36 KiB [emitted] (name: main)\n+asset 321.js 1.4 KiB [emitted] (name: main)\n ./index.js 24 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset both.js 1.37 KiB [emitted] (name: main)\n+asset both.js 1.4 KiB [emitted] (name: main)\n ./index.js 24 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\"\n `;\n@@ -915,8 +915,8 @@ webpack x.x.x compiled with 1 error in X ms\"\n \n exports[`StatsTestCases should print correct stats for entry-filename 1`] = `\n \"PublicPath: auto\n-asset a.js 1.36 KiB [emitted] (name: a)\n-asset c.js 1.36 KiB [emitted] (name: b)\n+asset a.js 1.4 KiB [emitted] (name: a)\n+asset c.js 1.4 KiB [emitted] (name: b)\n chunk (runtime: b) c.js (b) 22 bytes [entry] [rendered]\n   > ./b.js b\n   ./b.js 22 bytes [built] [code generated]\n@@ -934,7 +934,7 @@ webpack x.x.x compiled successfully in X ms\"\n \n exports[`StatsTestCases should print correct stats for exclude-with-loader 1`] = `\n \"hidden assets 34 bytes 1 asset\n-asset bundle.js 5.24 KiB [emitted] (name: main)\n+asset bundle.js 5.28 KiB [emitted] (name: main)\n runtime modules 1.72 KiB 5 modules\n hidden modules 123 bytes 2 modules\n cacheable modules 119 bytes\n@@ -944,7 +944,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for external 1`] = `\n-\"asset main.js 1.33 KiB [emitted] (name: main)\n+\"asset main.js 1.37 KiB [emitted] (name: main)\n ./index.js 17 bytes [built] [code generated]\n external \\\\\"test\\\\\" 42 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\"\n@@ -1060,12 +1060,12 @@ webpack x.x.x compiled with 2 warnings in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for immutable 1`] = `\n-\"asset 57145cc682f7d5fd5bc0.js 13.2 KiB [emitted] [immutable] (name: main)\n+\"asset 2b55e7a29213e33abfa3.js 13.3 KiB [emitted] [immutable] (name: main)\n asset 22c24a3b26d46118dc06.js 809 bytes [emitted] [immutable]\"\n `;\n \n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n-\"asset entry.js 11.8 KiB [emitted] (name: entry)\n+\"asset entry.js 11.9 KiB [emitted] (name: entry)\n asset 398.js 482 bytes [emitted]\n asset 544.js 482 bytes [emitted]\n asset 718.js 482 bytes [emitted]\n@@ -1117,19 +1117,19 @@ webpack x.x.x compiled with 3 warnings\"\n `;\n \n exports[`StatsTestCases should print correct stats for issue-7577 1`] = `\n-\"asset a-runtime~main-6cb537e97c826a633827.js 4.76 KiB [emitted] [immutable] (name: runtime~main)\n+\"asset a-runtime~main-2ee3b719049796c1a859.js 4.8 KiB [emitted] [immutable] (name: runtime~main)\n asset a-main-f541dc606339a43b1ff1.js 398 bytes [emitted] [immutable] (name: main)\n asset a-all-a_js-5af81d3b60f9e87be69d.js 140 bytes [emitted] [immutable] (id hint: all)\n-Entrypoint main 5.29 KiB = a-runtime~main-6cb537e97c826a633827.js 4.76 KiB a-all-a_js-5af81d3b60f9e87be69d.js 140 bytes a-main-f541dc606339a43b1ff1.js 398 bytes\n+Entrypoint main 5.33 KiB = a-runtime~main-2ee3b719049796c1a859.js 4.8 KiB a-all-a_js-5af81d3b60f9e87be69d.js 140 bytes a-main-f541dc606339a43b1ff1.js 398 bytes\n runtime modules 2.34 KiB 3 modules\n ./a.js 18 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset b-runtime~main-cbec3b47ecc4d1afc8c5.js 5.7 KiB [emitted] [immutable] (name: runtime~main)\n+asset b-runtime~main-c0fda4a5ca3ab8452a13.js 5.74 KiB [emitted] [immutable] (name: runtime~main)\n asset b-all-b_js-286fe88eae15de65188e.js 475 bytes [emitted] [immutable] (id hint: all)\n asset b-main-9e35ddc0acdb05533ff7.js 431 bytes [emitted] [immutable] (name: main)\n asset b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 6.77 KiB = b-runtime~main-cbec3b47ecc4d1afc8c5.js 5.7 KiB b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes b-all-b_js-286fe88eae15de65188e.js 475 bytes b-main-9e35ddc0acdb05533ff7.js 431 bytes\n+Entrypoint main 6.8 KiB = b-runtime~main-c0fda4a5ca3ab8452a13.js 5.74 KiB b-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes b-all-b_js-286fe88eae15de65188e.js 475 bytes b-main-9e35ddc0acdb05533ff7.js 431 bytes\n runtime modules 2.9 KiB 5 modules\n cacheable modules 40 bytes\n   ./b.js 17 bytes [built] [code generated]\n@@ -1139,10 +1139,10 @@ webpack x.x.x compiled successfully in X ms\n assets by chunk 895 bytes (id hint: all)\n   asset c-all-b_js-fe3b412293f057de38c8.js 502 bytes [emitted] [immutable] (id hint: all)\n   asset c-all-c_js-172fc4c28be7e411e551.js 393 bytes [emitted] [immutable] (id hint: all)\n-asset c-runtime~main-c16af277f2aac178a0ad.js 13.4 KiB [emitted] [immutable] (name: runtime~main)\n+asset c-runtime~main-61f021fac209297b0356.js 13.4 KiB [emitted] [immutable] (name: runtime~main)\n asset c-main-012ece0a038732fde0a4.js 673 bytes [emitted] [immutable] (name: main)\n asset c-vendors-node_modules_vendor_js-499179597d8c965dd5e0.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 14.4 KiB = c-runtime~main-c16af277f2aac178a0ad.js 13.4 KiB c-all-c_js-172fc4c28be7e411e551.js 393 bytes c-main-012ece0a038732fde0a4.js 673 bytes\n+Entrypoint main 14.5 KiB = c-runtime~main-61f021fac209297b0356.js 13.4 KiB c-all-c_js-172fc4c28be7e411e551.js 393 bytes c-main-012ece0a038732fde0a4.js 673 bytes\n runtime modules 8.54 KiB 13 modules\n cacheable modules 101 bytes\n   ./c.js 61 bytes [built] [code generated]\n@@ -1153,7 +1153,7 @@ webpack x.x.x compiled successfully in X ms\"\n \n exports[`StatsTestCases should print correct stats for limit-chunk-count-plugin 1`] = `\n \"1 chunks:\n-  asset bundle1.js 4.8 KiB [emitted] (name: main)\n+  asset bundle1.js 4.83 KiB [emitted] (name: main)\n   chunk (runtime: main) bundle1.js (main) 219 bytes (javascript) 1.76 KiB (runtime) <{179}> >{179}< [entry] [rendered]\n     runtime modules 1.76 KiB 4 modules\n     cacheable modules 219 bytes\n@@ -1307,26 +1307,26 @@ webpack x.x.x compiled <CLR=32,BOLD>successfully</CLR> in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules 1`] = `\n-\"asset main.js 5.43 KiB [emitted] (name: main)\n+\"asset main.js 5.47 KiB [emitted] (name: main)\n 31 modules\n webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules-default 1`] = `\n-\"asset main.js 5.43 KiB [emitted] (name: main)\n+\"asset main.js 5.47 KiB [emitted] (name: main)\n 31 modules\n webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n \"assets by path *.js 11.6 KiB\n-  asset main.js 10.3 KiB [emitted] (name: main)\n+  asset main.js 10.4 KiB [emitted] (name: main)\n   asset a.js 746 bytes [emitted] (name: a)\n   asset b.js 563 bytes [emitted] (name: b)\n assets by path *.png 42 KiB\n   asset 1.png 21 KiB [emitted] [from: node_modules/a/1.png] (auxiliary name: a)\n   asset 2.png 21 KiB [emitted] [from: node_modules/a/2.png] (auxiliary name: a, b)\n-Entrypoint main 10.3 KiB = main.js\n+Entrypoint main 10.4 KiB = main.js\n Chunk Group a 746 bytes (42 KiB) = a.js 746 bytes (1.png 21 KiB 2.png 21 KiB)\n Chunk Group b 563 bytes (21 KiB) = b.js 563 bytes (2.png 21 KiB)\n chunk (runtime: main) b.js (b) 67 bytes [rendered]\n@@ -1396,9 +1396,9 @@ webpack x.x.x compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for module-deduplication-named 1`] = `\n-\"asset e1.js 11.9 KiB [emitted] (name: e1)\n-asset e2.js 11.9 KiB [emitted] (name: e2)\n-asset e3.js 11.9 KiB [emitted] (name: e3)\n+\"asset e1.js 12 KiB [emitted] (name: e1)\n+asset e2.js 12 KiB [emitted] (name: e2)\n+asset e3.js 12 KiB [emitted] (name: e3)\n asset async1.js 972 bytes [emitted] (name: async1)\n asset async2.js 972 bytes [emitted] (name: async2)\n asset async3.js 972 bytes [emitted] (name: async3)\n@@ -1433,7 +1433,7 @@ webpack x.x.x compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for module-federation-custom-exposed-module-name 1`] = `\n-\"asset container_bundle.js 11.8 KiB [emitted] (name: container)\n+\"asset container_bundle.js 11.9 KiB [emitted] (name: container)\n asset custom-entry_bundle.js 414 bytes [emitted] (name: custom-entry)\n asset main_bundle.js 84 bytes [emitted] (name: main)\n runtime modules 6.52 KiB 9 modules\n@@ -1473,7 +1473,7 @@ webpack compiled with 2 errors\"\n `;\n \n exports[`StatsTestCases should print correct stats for module-reasons 1`] = `\n-\"asset main.js 1.43 KiB [emitted] (name: main)\n+\"asset main.js 1.47 KiB [emitted] (name: main)\n orphan modules 75 bytes [orphan] 2 modules\n cacheable modules 110 bytes\n   ./index.js + 2 modules 102 bytes [built] [code generated]\n@@ -1485,7 +1485,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for module-trace-disabled-in-error 1`] = `\n-\"assets by status 1.97 KiB [cached] 1 asset\n+\"assets by status 2 KiB [cached] 1 asset\n ./index.js 19 bytes [built] [code generated]\n ./inner.js 53 bytes [built] [code generated]\n ./not-existing.js 26 bytes [built] [code generated]\n@@ -1507,7 +1507,7 @@ webpack x.x.x compiled with 2 errors in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for module-trace-enabled-in-error 1`] = `\n-\"assets by status 1.97 KiB [cached] 1 asset\n+\"assets by status 2 KiB [cached] 1 asset\n ./index.js 19 bytes [built] [code generated]\n ./inner.js 53 bytes [built] [code generated]\n ./not-existing.js 26 bytes [built] [code generated]\n@@ -1589,9 +1589,9 @@ webpack x.x.x compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin 1`] = `\n-\"asset entry.js 5.38 KiB [emitted] (name: entry)\n+\"asset entry.js 5.42 KiB [emitted] (name: entry)\n asset vendor.js 237 bytes [emitted] (name: vendor) (id hint: vendor)\n-Entrypoint entry 5.61 KiB = vendor.js 237 bytes entry.js 5.38 KiB\n+Entrypoint entry 5.65 KiB = vendor.js 237 bytes entry.js 5.42 KiB\n runtime modules 2.34 KiB 3 modules\n cacheable modules 138 bytes\n   ./entry.js 72 bytes [built] [code generated]\n@@ -1602,7 +1602,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin-async 1`] = `\n-\"asset entry.js 12.3 KiB [emitted] (name: entry)\n+\"asset entry.js 12.4 KiB [emitted] (name: entry)\n asset modules_a_js.js 313 bytes [emitted]\n asset modules_b_js.js 149 bytes [emitted]\n runtime modules 7.62 KiB 10 modules\n@@ -1627,7 +1627,7 @@ webpack x.x.x compiled with 1 error and 1 warning in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for optimize-chunks 1`] = `\n-\"asset main.js 10.9 KiB {179} [emitted] (name: main)\n+\"asset main.js 11 KiB {179} [emitted] (name: main)\n asset cir2 from cir1.js 374 bytes {288}, {289} [emitted] (name: cir2 from cir1)\n asset cir1.js 330 bytes {592} [emitted] (name: cir1)\n asset cir2.js 330 bytes {289} [emitted] (name: cir2)\n@@ -1673,7 +1673,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for output-module 1`] = `\n-\"asset main.js 9.94 KiB [emitted] [javascript module] (name: main)\n+\"asset main.js 9.97 KiB [emitted] [javascript module] (name: main)\n asset 52.js 417 bytes [emitted] [javascript module]\n runtime modules 6.01 KiB 8 modules\n orphan modules 38 bytes [orphan] 1 module\n@@ -1684,7 +1684,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for parse-error 1`] = `\n-\"assets by status 1.64 KiB [cached] 1 asset\n+\"assets by status 1.67 KiB [cached] 1 asset\n orphan modules 15 bytes [orphan] 1 module\n ./index.js + 1 modules 30 bytes [built] [code generated]\n ./b.js 55 bytes [built] [code generated] [1 error]\n@@ -1826,9 +1826,9 @@ webpack x.x.x compiled with <CLR=31,BOLD>2 errors</CLR> in X ms\"\n \n exports[`StatsTestCases should print correct stats for performance-no-async-chunks-shown 1`] = `\n \"asset <CLR=33,BOLD>main.js</CLR> <CLR=33,BOLD>294 KiB</CLR> <CLR=32,BOLD>[emitted]</CLR> <CLR=33,BOLD>[big]</CLR> (name: main)\n-asset <CLR=32,BOLD>sec.js</CLR> 1.49 KiB <CLR=32,BOLD>[emitted]</CLR> (name: sec)\n+asset <CLR=32,BOLD>sec.js</CLR> 1.53 KiB <CLR=32,BOLD>[emitted]</CLR> (name: sec)\n Entrypoint <CLR=BOLD>main</CLR> <CLR=33,BOLD>[big]</CLR> 294 KiB = <CLR=32,BOLD>main.js</CLR>\n-Entrypoint <CLR=BOLD>sec</CLR> 1.49 KiB = <CLR=32,BOLD>sec.js</CLR>\n+Entrypoint <CLR=BOLD>sec</CLR> 1.53 KiB = <CLR=32,BOLD>sec.js</CLR>\n <CLR=BOLD>./index.js</CLR> 32 bytes <CLR=33,BOLD>[built]</CLR> <CLR=33,BOLD>[code generated]</CLR>\n <CLR=BOLD>./index2.js</CLR> 48 bytes <CLR=33,BOLD>[built]</CLR> <CLR=33,BOLD>[code generated]</CLR>\n <CLR=BOLD>./a.js</CLR> 293 KiB <CLR=33,BOLD>[built]</CLR> <CLR=33,BOLD>[code generated]</CLR>\n@@ -1902,14 +1902,14 @@ webpack x.x.x compiled with <CLR=31,BOLD>3 errors</CLR> in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for prefetch 1`] = `\n-\"asset main.js 16.6 KiB {179} [emitted] (name: main)\n+\"asset main.js 16.7 KiB {179} [emitted] (name: main)\n asset prefetched.js 556 bytes {505} [emitted] (name: prefetched)\n asset inner2.js 150 bytes {641} [emitted] (name: inner2)\n asset inner.js 110 bytes {746} [emitted] (name: inner)\n asset prefetched2.js 110 bytes {379} [emitted] (name: prefetched2)\n asset prefetched3.js 110 bytes {220} [emitted] (name: prefetched3)\n asset normal.js 109 bytes {30} [emitted] (name: normal)\n-Entrypoint main 16.6 KiB = main.js\n+Entrypoint main 16.7 KiB = main.js\n   prefetch: prefetched2.js {379} (name: prefetched2), prefetched.js {505} (name: prefetched), prefetched3.js {220} (name: prefetched3)\n chunk {30} (runtime: main) normal.js (normal) 1 bytes <{179}> [rendered]\n chunk {179} (runtime: main) main.js (main) 436 bytes (javascript) 9.83 KiB (runtime) >{30}< >{220}< >{379}< >{505}< (prefetch: {379} {505} {220}) [entry] [rendered]\n@@ -1963,11 +1963,11 @@ exports[`StatsTestCases should print correct stats for preset-detailed 1`] = `\n       [LogTestPlugin] Log\n     [LogTestPlugin] End\n PublicPath: auto\n-asset main.js 10.1 KiB {179} [emitted] (name: main)\n+asset main.js 10.2 KiB {179} [emitted] (name: main)\n asset 460.js 320 bytes {460} [emitted]\n asset 524.js 206 bytes {524} [emitted]\n asset 996.js 138 bytes {996} [emitted]\n-Entrypoint main 10.1 KiB = main.js\n+Entrypoint main 10.2 KiB = main.js\n chunk {179} (runtime: main) main.js (main) 73 bytes (javascript) 5.94 KiB (runtime) >{460}< >{996}< [entry] [rendered]\n   > ./index main\n chunk {460} (runtime: main) 460.js 54 bytes <{179}> >{524}< [rendered]\n@@ -2066,7 +2066,7 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (e85141cf8138e8a965f7)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (fe92fce5f9b2c7e8e593)\"\n `;\n \n exports[`StatsTestCases should print correct stats for preset-errors-only 1`] = `\"\"`;\n@@ -2141,7 +2141,7 @@ exports[`StatsTestCases should print correct stats for preset-normal 1`] = `\n \"<e> [LogTestPlugin] Error\n <w> [LogTestPlugin] Warning\n <i> [LogTestPlugin] Info\n-asset main.js 10.1 KiB [emitted] (name: main)\n+asset main.js 10.2 KiB [emitted] (name: main)\n asset 460.js 320 bytes [emitted]\n asset 524.js 206 bytes [emitted]\n asset 996.js 138 bytes [emitted]\n@@ -2239,11 +2239,11 @@ exports[`StatsTestCases should print correct stats for preset-verbose 1`] = `\n       [LogTestPlugin] Log\n     [LogTestPlugin] End\n PublicPath: auto\n-asset main.js 10.1 KiB {179} [emitted] (name: main)\n+asset main.js 10.2 KiB {179} [emitted] (name: main)\n asset 460.js 320 bytes {460} [emitted]\n asset 524.js 206 bytes {524} [emitted]\n asset 996.js 138 bytes {996} [emitted]\n-Entrypoint main 10.1 KiB = main.js\n+Entrypoint main 10.2 KiB = main.js\n chunk {179} (runtime: main) main.js (main) 73 bytes (javascript) 5.94 KiB (runtime) >{460}< >{996}< [entry] [rendered]\n   > ./index main\n   runtime modules 5.94 KiB\n@@ -2435,21 +2435,21 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (e85141cf8138e8a965f7)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (fe92fce5f9b2c7e8e593)\"\n `;\n \n exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \"a-normal:\n-  assets by path *.js 3.18 KiB\n-    asset 0376541c58d425e234b6-037654.js 2.66 KiB [emitted] [immutable] [minimized] (name: runtime)\n+  assets by path *.js 3.19 KiB\n+    asset e8e56a295a1d995abc13-e8e56a.js 2.67 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.88 KiB (5.89 KiB) = 0376541c58d425e234b6-037654.js 2.66 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.89 KiB (5.89 KiB) = e8e56a295a1d995abc13-e8e56a.js 2.67 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2467,16 +2467,16 @@ exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n   a-normal (webpack x.x.x) compiled successfully in X ms\n \n b-normal:\n-  assets by path *.js 3.18 KiB\n-    asset 82fe050ef7ef8722d1ac-82fe05.js 2.66 KiB [emitted] [immutable] [minimized] (name: runtime)\n+  assets by path *.js 3.19 KiB\n+    asset dcb5f80b97576d2a9db6-dcb5f8.js 2.67 KiB [emitted] [immutable] [minimized] (name: runtime)\n     asset a639a9edc4557744bf94-a639a9.js 288 bytes [emitted] [immutable] [minimized] (name: lazy)\n     asset e00b58ce2785691cd374-e00b58.js 225 bytes [emitted] [immutable] [minimized] (name: index)\n     asset 666f2b8847021ccc7608-666f2b.js 21 bytes [emitted] [immutable] [minimized] (name: a, b)\n   assets by chunk 20.4 KiB (auxiliary name: lazy)\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.88 KiB (5.89 KiB) = 82fe050ef7ef8722d1ac-82fe05.js 2.66 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n+  Entrypoint index 2.89 KiB (5.89 KiB) = dcb5f80b97576d2a9db6-dcb5f8.js 2.67 KiB e00b58ce2785691cd374-e00b58.js 225 bytes 1 auxiliary asset\n   Entrypoint a 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   Entrypoint b 21 bytes = 666f2b8847021ccc7608-666f2b.js\n   runtime modules 7.19 KiB 9 modules\n@@ -2494,9 +2494,9 @@ b-normal:\n   b-normal (webpack x.x.x) compiled successfully in X ms\n \n a-source-map:\n-  assets by path *.js 3.4 KiB\n-    asset f73cb252bb1d3b81271a-f73cb2.js 2.71 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap f73cb252bb1d3b81271a-f73cb2.js.map 14.1 KiB [emitted] [dev] (auxiliary name: runtime)\n+  assets by path *.js 3.41 KiB\n+    asset 4f97fa2636befa21dcc1-4f97fa.js 2.73 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 4f97fa2636befa21dcc1-4f97fa.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 399 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2507,7 +2507,7 @@ a-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.99 KiB (20.4 KiB) = f73cb252bb1d3b81271a-f73cb2.js 2.71 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3 KiB (20.4 KiB) = 4f97fa2636befa21dcc1-4f97fa.js 2.73 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules\n@@ -2525,9 +2525,9 @@ a-source-map:\n   a-source-map (webpack x.x.x) compiled successfully in X ms\n \n b-source-map:\n-  assets by path *.js 3.4 KiB\n-    asset 3842cc0fdf097ba20f0d-3842cc.js 2.71 KiB [emitted] [immutable] [minimized] (name: runtime)\n-      sourceMap 3842cc0fdf097ba20f0d-3842cc.js.map 14.1 KiB [emitted] [dev] (auxiliary name: runtime)\n+  assets by path *.js 3.41 KiB\n+    asset 6be55260880baef884c5-6be552.js 2.73 KiB [emitted] [immutable] [minimized] (name: runtime)\n+      sourceMap 6be55260880baef884c5-6be552.js.map 14.2 KiB [emitted] [dev] (auxiliary name: runtime)\n     asset 05c637d15dff2d0dc5fd-05c637.js 344 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap 05c637d15dff2d0dc5fd-05c637.js.map 395 bytes [emitted] [dev] (auxiliary name: lazy)\n     asset c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes [emitted] [immutable] [minimized] (name: index)\n@@ -2538,7 +2538,7 @@ b-source-map:\n     asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n     asset 7382fad5b015914e0811.jpg?query 5.89 KiB [cached] [immutable] [from: file.jpg?query] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: index)\n-  Entrypoint index 2.99 KiB (20.3 KiB) = 3842cc0fdf097ba20f0d-3842cc.js 2.71 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n+  Entrypoint index 3 KiB (20.4 KiB) = 6be55260880baef884c5-6be552.js 2.73 KiB c41aff3dd03dbe1d8aa3-c41aff.js 281 bytes 3 auxiliary assets\n   Entrypoint a 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   Entrypoint b 77 bytes (254 bytes) = 222c2acc68675174e6b2-222c2a.js 1 auxiliary asset\n   runtime modules 7.19 KiB 9 modules\n@@ -2558,7 +2558,7 @@ b-source-map:\n \n exports[`StatsTestCases should print correct stats for related-assets 1`] = `\n \"default:\n-  assets by path *.js 15.1 KiB\n+  assets by path *.js 15.2 KiB\n     asset default-main.js 14.4 KiB [emitted] (name: main) 3 related assets\n     asset default-chunk_js.js 817 bytes [emitted] 3 related assets\n   assets by path *.css 142 bytes\n@@ -2570,9 +2570,9 @@ relatedAssets:\n     asset relatedAssets-main.js 14.4 KiB [emitted] (name: main)\n       compressed relatedAssets-main.js.br 14.4 KiB [emitted]\n       compressed relatedAssets-main.js.gz 14.4 KiB [emitted]\n-      sourceMap relatedAssets-main.js.map 12.4 KiB [emitted] [dev] (auxiliary name: main)\n-        compressed relatedAssets-main.js.map.br 12.4 KiB [emitted]\n-        compressed relatedAssets-main.js.map.gz 12.4 KiB [emitted]\n+      sourceMap relatedAssets-main.js.map 12.5 KiB [emitted] [dev] (auxiliary name: main)\n+        compressed relatedAssets-main.js.map.br 12.5 KiB [emitted]\n+        compressed relatedAssets-main.js.map.gz 12.5 KiB [emitted]\n     asset relatedAssets-chunk_js.js 823 bytes [emitted]\n       compressed relatedAssets-chunk_js.js.br 823 bytes [emitted]\n       compressed relatedAssets-chunk_js.js.gz 823 bytes [emitted]\n@@ -2596,9 +2596,9 @@ relatedAssets:\n exclude1:\n   assets by path *.js 15.2 KiB\n     asset exclude1-main.js 14.4 KiB [emitted] (name: main)\n-      hidden assets 28.7 KiB 2 assets\n-      sourceMap exclude1-main.js.map 12.4 KiB [emitted] [dev] (auxiliary name: main)\n-        hidden assets 24.8 KiB 2 assets\n+      hidden assets 28.8 KiB 2 assets\n+      sourceMap exclude1-main.js.map 12.5 KiB [emitted] [dev] (auxiliary name: main)\n+        hidden assets 24.9 KiB 2 assets\n         1 related asset\n       1 related asset\n     asset exclude1-chunk_js.js 818 bytes [emitted]\n@@ -2624,7 +2624,7 @@ exclude1:\n exclude2:\n   assets by path *.js 15.2 KiB\n     asset exclude2-main.js 14.4 KiB [emitted] (name: main)\n-      hidden assets 12.4 KiB 1 asset\n+      hidden assets 12.5 KiB 1 asset\n       compressed exclude2-main.js.br 14.4 KiB [emitted]\n       compressed exclude2-main.js.gz 14.4 KiB [emitted]\n     asset exclude2-chunk_js.js 818 bytes [emitted]\n@@ -2643,13 +2643,13 @@ exclude2:\n \n exclude3:\n   hidden assets 892 bytes 2 assets\n-  assets by status 14.4 KiB [emitted]\n+  assets by status 14.5 KiB [emitted]\n     asset exclude3-main.js 14.4 KiB [emitted] (name: main)\n       compressed exclude3-main.js.br 14.4 KiB [emitted]\n       compressed exclude3-main.js.gz 14.4 KiB [emitted]\n-      sourceMap exclude3-main.js.map 12.4 KiB [emitted] [dev] (auxiliary name: main)\n-        compressed exclude3-main.js.map.br 12.4 KiB [emitted]\n-        compressed exclude3-main.js.map.gz 12.4 KiB [emitted]\n+      sourceMap exclude3-main.js.map 12.5 KiB [emitted] [dev] (auxiliary name: main)\n+        compressed exclude3-main.js.map.br 12.5 KiB [emitted]\n+        compressed exclude3-main.js.map.gz 12.5 KiB [emitted]\n     asset exclude3-main.css 70 bytes [emitted] (name: main)\n       sourceMap exclude3-main.css.map 187 bytes [emitted] [dev] (auxiliary name: main)\n         compressed exclude3-main.css.map.br 187 bytes [emitted]\n@@ -2659,7 +2659,7 @@ exclude3:\n `;\n \n exports[`StatsTestCases should print correct stats for resolve-plugin-context 1`] = `\n-\"asset bundle.js 1.64 KiB [emitted] (name: main)\n+\"asset bundle.js 1.67 KiB [emitted] (name: main)\n modules by path ./node_modules/def/ 17 bytes\n   ./node_modules/def/index.js 16 bytes [built] [code generated]\n   ./node_modules/def/node_modules/xyz/index.js 1 bytes [built] [code generated]\n@@ -2670,7 +2670,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for reverse-sort-modules 1`] = `\n-\"asset main.js 5.43 KiB [emitted] (name: main)\n+\"asset main.js 5.47 KiB [emitted] (name: main)\n ./index.js 181 bytes [built] [code generated]\n ./c.js?9 33 bytes [built] [code generated]\n ./c.js?8 33 bytes [built] [code generated]\n@@ -2706,17 +2706,17 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-chunk 1`] = `\n-\"Entrypoint e1 6.38 KiB = runtime~e1.js 5.31 KiB e1.js 1.07 KiB\n-Entrypoint e2 6.38 KiB = runtime~e2.js 5.31 KiB e2.js 1.07 KiB\n+\"Entrypoint e1 6.42 KiB = runtime~e1.js 5.35 KiB e1.js 1.07 KiB\n+Entrypoint e2 6.42 KiB = runtime~e2.js 5.35 KiB e2.js 1.07 KiB\n webpack x.x.x compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-chunk-integration 1`] = `\n \"base:\n-  asset without-runtime.js 11.9 KiB [emitted] (name: runtime)\n+  asset without-runtime.js 12 KiB [emitted] (name: runtime)\n   asset without-505.js 1.22 KiB [emitted]\n   asset without-main1.js 848 bytes [emitted] (name: main1)\n-  Entrypoint main1 12.8 KiB = without-runtime.js 11.9 KiB without-main1.js 848 bytes\n+  Entrypoint main1 12.8 KiB = without-runtime.js 12 KiB without-main1.js 848 bytes\n   runtime modules 7.42 KiB 10 modules\n   cacheable modules 126 bytes\n     ./main1.js 66 bytes [built] [code generated]\n@@ -2726,14 +2726,14 @@ exports[`StatsTestCases should print correct stats for runtime-chunk-integration\n   base (webpack x.x.x) compiled successfully\n \n static custom name:\n-  asset with-manifest.js 11.9 KiB [emitted] (name: manifest)\n+  asset with-manifest.js 12 KiB [emitted] (name: manifest)\n   asset with-505.js 1.22 KiB [emitted]\n   asset with-main1.js 848 bytes [emitted] (name: main1)\n   asset with-main2.js 467 bytes [emitted] (name: main2)\n   asset with-main3.js 467 bytes [emitted] (name: main3)\n-  Entrypoint main1 12.8 KiB = with-manifest.js 11.9 KiB with-main1.js 848 bytes\n-  Entrypoint main2 12.4 KiB = with-manifest.js 11.9 KiB with-main2.js 467 bytes\n-  Entrypoint main3 12.4 KiB = with-manifest.js 11.9 KiB with-main3.js 467 bytes\n+  Entrypoint main1 12.8 KiB = with-manifest.js 12 KiB with-main1.js 848 bytes\n+  Entrypoint main2 12.4 KiB = with-manifest.js 12 KiB with-main2.js 467 bytes\n+  Entrypoint main3 12.4 KiB = with-manifest.js 12 KiB with-main3.js 467 bytes\n   runtime modules 7.41 KiB 10 modules\n   cacheable modules 166 bytes\n     ./main1.js 66 bytes [built] [code generated]\n@@ -2745,15 +2745,15 @@ static custom name:\n   static custom name (webpack x.x.x) compiled successfully\n \n dynamic custom name:\n-  asset func-b.js 11.9 KiB [emitted] (name: b)\n-  asset func-a.js 4.75 KiB [emitted] (name: a)\n+  asset func-b.js 12 KiB [emitted] (name: b)\n+  asset func-a.js 4.79 KiB [emitted] (name: a)\n   asset func-505.js 1.22 KiB [emitted]\n   asset func-main1.js 848 bytes [emitted] (name: main1)\n   asset func-main2.js 467 bytes [emitted] (name: main2)\n   asset func-main3.js 467 bytes [emitted] (name: main3)\n-  Entrypoint main1 12.8 KiB = func-b.js 11.9 KiB func-main1.js 848 bytes\n-  Entrypoint main2 12.4 KiB = func-b.js 11.9 KiB func-main2.js 467 bytes\n-  Entrypoint main3 5.21 KiB = func-a.js 4.75 KiB func-main3.js 467 bytes\n+  Entrypoint main1 12.8 KiB = func-b.js 12 KiB func-main1.js 848 bytes\n+  Entrypoint main2 12.4 KiB = func-b.js 12 KiB func-main2.js 467 bytes\n+  Entrypoint main3 5.25 KiB = func-a.js 4.79 KiB func-main3.js 467 bytes\n   runtime modules 9.75 KiB 13 modules\n   cacheable modules 166 bytes\n     ./main1.js 66 bytes [built] [code generated]\n@@ -2766,14 +2766,14 @@ dynamic custom name:\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-chunk-issue-7382 1`] = `\n-\"Entrypoint e1 7.23 KiB = runtime.js 5.31 KiB all.js 1020 bytes e1.js 955 bytes\n-Entrypoint e2 7.23 KiB = runtime.js 5.31 KiB all.js 1020 bytes e2.js 955 bytes\n+\"Entrypoint e1 7.27 KiB = runtime.js 5.34 KiB all.js 1020 bytes e1.js 955 bytes\n+Entrypoint e2 7.27 KiB = runtime.js 5.34 KiB all.js 1020 bytes e2.js 955 bytes\n webpack x.x.x compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-chunk-single 1`] = `\n-\"Entrypoint e1 6.38 KiB = runtime.js 5.31 KiB e1.js 1.07 KiB\n-Entrypoint e2 6.38 KiB = runtime.js 5.31 KiB e2.js 1.07 KiB\n+\"Entrypoint e1 6.42 KiB = runtime.js 5.34 KiB e1.js 1.07 KiB\n+Entrypoint e2 6.42 KiB = runtime.js 5.34 KiB e2.js 1.07 KiB\n webpack x.x.x compiled successfully\"\n `;\n \n@@ -3041,7 +3041,7 @@ webpack x.x.x compiled successfully in X ms\"\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-multi 1`] = `\n \"Entrypoint first 14.2 KiB = a-vendor.js 419 bytes a-first.js 13.8 KiB\n-Entrypoint second 13.7 KiB = a-vendor.js 419 bytes a-second.js 13.3 KiB\n+Entrypoint second 13.8 KiB = a-vendor.js 419 bytes a-second.js 13.4 KiB\n runtime modules 14.9 KiB 20 modules\n orphan modules 37 bytes [orphan] 1 module\n cacheable modules 807 bytes\n@@ -3058,7 +3058,7 @@ cacheable modules 807 bytes\n webpack x.x.x compiled successfully in X ms\n \n Entrypoint first 13.5 KiB = b-vendor.js 419 bytes b-first.js 13.1 KiB\n-Entrypoint second 13.4 KiB = b-vendor.js 419 bytes b-second.js 12.9 KiB\n+Entrypoint second 13.4 KiB = b-vendor.js 419 bytes b-second.js 13 KiB\n runtime modules 14.9 KiB 20 modules\n cacheable modules 975 bytes\n   code generated modules 857 bytes [code generated]\n@@ -3136,7 +3136,7 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-optimization 1`] = `\n-\"asset main.js 207 bytes [emitted] [minimized] (name: main)\n+\"asset main.js 221 bytes [emitted] [minimized] (name: main)\n orphan modules 1.2 KiB [orphan] 4 modules\n cacheable modules 1.22 KiB\n   ./index.js + 2 modules 1.18 KiB [built] [code generated]\n@@ -3156,7 +3156,7 @@ cacheable modules 1.22 KiB\n     ModuleConcatenation bailout: Module is not an ECMAScript module\n webpack x.x.x compiled successfully in X ms\n \n-asset main.no-side.js 965 bytes [emitted] [minimized] (name: main)\n+asset main.no-side.js 979 bytes [emitted] [minimized] (name: main)\n runtime modules 1010 bytes 4 modules\n orphan modules 102 bytes [orphan] 2 modules\n cacheable modules 1.35 KiB\n@@ -3253,9 +3253,9 @@ webpack x.x.x compiled successfully in X ms\"\n exports[`StatsTestCases should print correct stats for split-chunks 1`] = `\n \"default:\n   Entrypoint main 11.4 KiB = default/main.js\n-  Entrypoint a 12.4 KiB = default/a.js\n-  Entrypoint b 3.89 KiB = default/b.js\n-  Entrypoint c 3.89 KiB = default/c.js\n+  Entrypoint a 12.5 KiB = default/a.js\n+  Entrypoint b 3.93 KiB = default/b.js\n+  Entrypoint c 3.93 KiB = default/c.js\n   chunk (runtime: b) default/b.js (b) 196 bytes (javascript) 396 bytes (runtime) [entry] [rendered]\n     > ./b b\n     dependent modules 80 bytes [dependent] 4 modules\n@@ -3313,9 +3313,9 @@ exports[`StatsTestCases should print correct stats for split-chunks 1`] = `\n \n all-chunks:\n   Entrypoint main 11.4 KiB = all-chunks/main.js\n-  Entrypoint a 14.8 KiB = all-chunks/282.js 414 bytes all-chunks/954.js 414 bytes all-chunks/767.js 414 bytes all-chunks/390.js 414 bytes all-chunks/a.js 13.2 KiB\n-  Entrypoint b 7.94 KiB = all-chunks/282.js 414 bytes all-chunks/954.js 414 bytes all-chunks/767.js 414 bytes all-chunks/568.js 414 bytes all-chunks/b.js 6.32 KiB\n-  Entrypoint c 7.94 KiB = all-chunks/282.js 414 bytes all-chunks/769.js 414 bytes all-chunks/767.js 414 bytes all-chunks/568.js 414 bytes all-chunks/c.js 6.32 KiB\n+  Entrypoint a 14.9 KiB = all-chunks/282.js 414 bytes all-chunks/954.js 414 bytes all-chunks/767.js 414 bytes all-chunks/390.js 414 bytes all-chunks/a.js 13.2 KiB\n+  Entrypoint b 7.97 KiB = all-chunks/282.js 414 bytes all-chunks/954.js 414 bytes all-chunks/767.js 414 bytes all-chunks/568.js 414 bytes all-chunks/b.js 6.35 KiB\n+  Entrypoint c 7.97 KiB = all-chunks/282.js 414 bytes all-chunks/769.js 414 bytes all-chunks/767.js 414 bytes all-chunks/568.js 414 bytes all-chunks/c.js 6.35 KiB\n   chunk (runtime: b) all-chunks/b.js (b) 116 bytes (javascript) 2.64 KiB (runtime) ={282}= ={568}= ={767}= ={954}= [entry] [rendered]\n     > ./b b\n     runtime modules 2.64 KiB 4 modules\n@@ -3384,10 +3384,10 @@ all-chunks:\n   all-chunks (webpack x.x.x) compiled successfully\n \n manual:\n-  Entrypoint main 11.1 KiB = manual/main.js\n-  Entrypoint a 14.6 KiB = manual/vendors.js 1.08 KiB manual/a.js 13.5 KiB\n-  Entrypoint b 8.27 KiB = manual/vendors.js 1.08 KiB manual/b.js 7.2 KiB\n-  Entrypoint c 8.27 KiB = manual/vendors.js 1.08 KiB manual/c.js 7.2 KiB\n+  Entrypoint main 11.2 KiB = manual/main.js\n+  Entrypoint a 14.6 KiB = manual/vendors.js 1.08 KiB manual/a.js 13.6 KiB\n+  Entrypoint b 8.31 KiB = manual/vendors.js 1.08 KiB manual/b.js 7.23 KiB\n+  Entrypoint c 8.31 KiB = manual/vendors.js 1.08 KiB manual/c.js 7.23 KiB\n   chunk (runtime: b) manual/b.js (b) 156 bytes (javascript) 2.64 KiB (runtime) ={216}= [entry] [rendered]\n     > ./b b\n     > x b\n@@ -3455,9 +3455,9 @@ manual:\n \n name-too-long:\n   Entrypoint main 11.4 KiB = name-too-long/main.js\n-  Entrypoint aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 14.8 KiB = name-too-long/282.js 414 bytes name-too-long/954.js 414 bytes name-too-long/767.js 414 bytes name-too-long/390.js 414 bytes name-too-long/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.js 13.2 KiB\n-  Entrypoint bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb 7.94 KiB = name-too-long/282.js 414 bytes name-too-long/954.js 414 bytes name-too-long/767.js 414 bytes name-too-long/568.js 414 bytes name-too-long/bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.js 6.32 KiB\n-  Entrypoint cccccccccccccccccccccccccccccc 7.94 KiB = name-too-long/282.js 414 bytes name-too-long/769.js 414 bytes name-too-long/767.js 414 bytes name-too-long/568.js 414 bytes name-too-long/cccccccccccccccccccccccccccccc.js 6.32 KiB\n+  Entrypoint aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 14.9 KiB = name-too-long/282.js 414 bytes name-too-long/954.js 414 bytes name-too-long/767.js 414 bytes name-too-long/390.js 414 bytes name-too-long/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.js 13.2 KiB\n+  Entrypoint bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb 7.97 KiB = name-too-long/282.js 414 bytes name-too-long/954.js 414 bytes name-too-long/767.js 414 bytes name-too-long/568.js 414 bytes name-too-long/bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.js 6.35 KiB\n+  Entrypoint cccccccccccccccccccccccccccccc 7.97 KiB = name-too-long/282.js 414 bytes name-too-long/769.js 414 bytes name-too-long/767.js 414 bytes name-too-long/568.js 414 bytes name-too-long/cccccccccccccccccccccccccccccc.js 6.35 KiB\n   chunk (runtime: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, main) name-too-long/async-g.js (async-g) 45 bytes <{282}> <{390}> <{751}> <{767}> <{794}> <{954}> ={568}= [rendered]\n     > ./g ./a.js 6:0-47\n     ./g.js 45 bytes [built] [code generated]\n@@ -3528,8 +3528,8 @@ name-too-long:\n custom-chunks-filter:\n   Entrypoint main 11.4 KiB = custom-chunks-filter/main.js\n   Entrypoint a 12.5 KiB = custom-chunks-filter/a.js\n-  Entrypoint b 7.94 KiB = custom-chunks-filter/282.js 414 bytes custom-chunks-filter/954.js 414 bytes custom-chunks-filter/568.js 414 bytes custom-chunks-filter/767.js 414 bytes custom-chunks-filter/b.js 6.32 KiB\n-  Entrypoint c 7.94 KiB = custom-chunks-filter/282.js 414 bytes custom-chunks-filter/769.js 414 bytes custom-chunks-filter/568.js 414 bytes custom-chunks-filter/767.js 414 bytes custom-chunks-filter/c.js 6.32 KiB\n+  Entrypoint b 7.97 KiB = custom-chunks-filter/282.js 414 bytes custom-chunks-filter/954.js 414 bytes custom-chunks-filter/568.js 414 bytes custom-chunks-filter/767.js 414 bytes custom-chunks-filter/b.js 6.35 KiB\n+  Entrypoint c 7.97 KiB = custom-chunks-filter/282.js 414 bytes custom-chunks-filter/769.js 414 bytes custom-chunks-filter/568.js 414 bytes custom-chunks-filter/767.js 414 bytes custom-chunks-filter/c.js 6.35 KiB\n   chunk (runtime: b) custom-chunks-filter/b.js (b) 116 bytes (javascript) 2.64 KiB (runtime) ={282}= ={568}= ={767}= ={954}= [entry] [rendered]\n     > ./b b\n     runtime modules 2.64 KiB 4 modules\n@@ -3593,9 +3593,9 @@ custom-chunks-filter:\n \n custom-chunks-filter-in-cache-groups:\n   Entrypoint main 11.2 KiB = custom-chunks-filter-in-cache-groups/main.js\n-  Entrypoint a 14.4 KiB = custom-chunks-filter-in-cache-groups/176.js 892 bytes custom-chunks-filter-in-cache-groups/a.js 13.6 KiB\n-  Entrypoint b 8.28 KiB = custom-chunks-filter-in-cache-groups/vendors.js 1.08 KiB custom-chunks-filter-in-cache-groups/b.js 7.2 KiB\n-  Entrypoint c 8.28 KiB = custom-chunks-filter-in-cache-groups/vendors.js 1.08 KiB custom-chunks-filter-in-cache-groups/c.js 7.2 KiB\n+  Entrypoint a 14.5 KiB = custom-chunks-filter-in-cache-groups/176.js 892 bytes custom-chunks-filter-in-cache-groups/a.js 13.6 KiB\n+  Entrypoint b 8.31 KiB = custom-chunks-filter-in-cache-groups/vendors.js 1.08 KiB custom-chunks-filter-in-cache-groups/b.js 7.23 KiB\n+  Entrypoint c 8.31 KiB = custom-chunks-filter-in-cache-groups/vendors.js 1.08 KiB custom-chunks-filter-in-cache-groups/c.js 7.23 KiB\n   chunk (runtime: b) custom-chunks-filter-in-cache-groups/b.js (b) 156 bytes (javascript) 2.64 KiB (runtime) ={216}= [entry] [rendered]\n     > ./b b\n     > x b\n@@ -3813,7 +3813,7 @@ default (webpack x.x.x) compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for split-chunks-issue-7401 1`] = `\n-\"Entrypoint a 6.23 KiB = 282.js 414 bytes a.js 5.83 KiB\n+\"Entrypoint a 6.27 KiB = 282.js 414 bytes a.js 5.86 KiB\n Entrypoint b 10.8 KiB = b.js\n Chunk Group c 794 bytes = 282.js 414 bytes c.js 380 bytes\n chunk (runtime: b) b.js (b) 43 bytes (javascript) 6.53 KiB (runtime) >{282}< >{459}< [entry] [rendered]\n@@ -3835,7 +3835,7 @@ default (webpack x.x.x) compiled successfully\"\n `;\n \n exports[`StatsTestCases should print correct stats for split-chunks-keep-remaining-size 1`] = `\n-\"Entrypoint main 11.2 KiB = default/main.js\n+\"Entrypoint main 11.3 KiB = default/main.js\n chunk (runtime: main) default/async-d.js (async-d) 84 bytes <{179}> ={782}= [rendered]\n   > ./d ./index.js 4:0-47\n   ./d.js 84 bytes [built] [code generated]\n@@ -3865,7 +3865,7 @@ webpack x.x.x compiled successfully\"\n \n exports[`StatsTestCases should print correct stats for split-chunks-max-size 1`] = `\n \"production:\n-  Entrypoint main 31.6 KiB = 13 assets\n+  Entrypoint main 31.7 KiB = 13 assets\n   chunk (runtime: main) prod-main-6bb16544.js (main-6bb16544) 1.57 KiB ={59}= ={198}= ={204}= ={318}= ={358}= ={400}= ={410}= ={490}= ={520}= ={662}= ={663}= ={869}= [initial] [rendered]\n     > ./ main\n     ./in-some-directory/very-big.js?1 1.57 KiB [built] [code generated]\n@@ -4070,7 +4070,7 @@ switched:\n   switched (webpack x.x.x) compiled with 2 warnings\n \n zero-min:\n-  Entrypoint main 31.6 KiB = 13 assets\n+  Entrypoint main 31.7 KiB = 13 assets\n   chunk (runtime: main) zero-min-main-6bb16544.js (main-6bb16544) 1.57 KiB ={59}= ={198}= ={204}= ={318}= ={358}= ={400}= ={410}= ={490}= ={520}= ={662}= ={663}= ={869}= [initial] [rendered]\n     > ./ main\n     ./in-some-directory/very-big.js?1 1.57 KiB [built] [code generated]\n@@ -4279,13 +4279,13 @@ webpack x.x.x compiled successfully\"\n \n exports[`StatsTestCases should print correct stats for split-chunks-runtime-specific 1`] = `\n \"used-exports:\n-  asset used-exports-c.js 5.85 KiB [emitted] (name: c)\n-  asset used-exports-b.js 5.84 KiB [emitted] (name: b)\n+  asset used-exports-c.js 5.88 KiB [emitted] (name: c)\n+  asset used-exports-b.js 5.88 KiB [emitted] (name: b)\n   asset used-exports-332.js 424 bytes [emitted]\n   asset used-exports-a.js 257 bytes [emitted] (name: a)\n   Entrypoint a 257 bytes = used-exports-a.js\n-  Entrypoint b 6.25 KiB = used-exports-332.js 424 bytes used-exports-b.js 5.84 KiB\n-  Entrypoint c 6.26 KiB = used-exports-332.js 424 bytes used-exports-c.js 5.85 KiB\n+  Entrypoint b 6.29 KiB = used-exports-332.js 424 bytes used-exports-b.js 5.88 KiB\n+  Entrypoint c 6.3 KiB = used-exports-332.js 424 bytes used-exports-c.js 5.88 KiB\n   chunk (runtime: b) used-exports-b.js (b) 54 bytes (javascript) 2.63 KiB (runtime) [entry] [rendered]\n     runtime modules 2.63 KiB 4 modules\n     ./b.js 54 bytes [built] [code generated]\n@@ -4299,13 +4299,13 @@ exports[`StatsTestCases should print correct stats for split-chunks-runtime-spec\n   used-exports (webpack x.x.x) compiled successfully in X ms\n \n no-used-exports:\n-  asset no-used-exports-c.js 5.85 KiB [emitted] (name: c)\n-  asset no-used-exports-a.js 5.84 KiB [emitted] (name: a)\n-  asset no-used-exports-b.js 5.84 KiB [emitted] (name: b)\n+  asset no-used-exports-c.js 5.88 KiB [emitted] (name: c)\n+  asset no-used-exports-a.js 5.88 KiB [emitted] (name: a)\n+  asset no-used-exports-b.js 5.88 KiB [emitted] (name: b)\n   asset no-used-exports-332.js 447 bytes [emitted]\n-  Entrypoint a 6.28 KiB = no-used-exports-332.js 447 bytes no-used-exports-a.js 5.84 KiB\n-  Entrypoint b 6.28 KiB = no-used-exports-332.js 447 bytes no-used-exports-b.js 5.84 KiB\n-  Entrypoint c 6.28 KiB = no-used-exports-332.js 447 bytes no-used-exports-c.js 5.85 KiB\n+  Entrypoint a 6.31 KiB = no-used-exports-332.js 447 bytes no-used-exports-a.js 5.88 KiB\n+  Entrypoint b 6.31 KiB = no-used-exports-332.js 447 bytes no-used-exports-b.js 5.88 KiB\n+  Entrypoint c 6.32 KiB = no-used-exports-332.js 447 bytes no-used-exports-c.js 5.88 KiB\n   chunk (runtime: b) no-used-exports-b.js (b) 54 bytes (javascript) 2.63 KiB (runtime) [entry] [rendered]\n     runtime modules 2.63 KiB 4 modules\n     ./b.js 54 bytes [built] [code generated]\n@@ -4320,13 +4320,13 @@ no-used-exports:\n   no-used-exports (webpack x.x.x) compiled successfully in X ms\n \n global:\n-  asset global-c.js 5.85 KiB [emitted] (name: c)\n-  asset global-a.js 5.84 KiB [emitted] (name: a)\n-  asset global-b.js 5.84 KiB [emitted] (name: b)\n+  asset global-c.js 5.88 KiB [emitted] (name: c)\n+  asset global-a.js 5.88 KiB [emitted] (name: a)\n+  asset global-b.js 5.88 KiB [emitted] (name: b)\n   asset global-332.js 447 bytes [emitted]\n-  Entrypoint a 6.28 KiB = global-332.js 447 bytes global-a.js 5.84 KiB\n-  Entrypoint b 6.28 KiB = global-332.js 447 bytes global-b.js 5.84 KiB\n-  Entrypoint c 6.28 KiB = global-332.js 447 bytes global-c.js 5.85 KiB\n+  Entrypoint a 6.31 KiB = global-332.js 447 bytes global-a.js 5.88 KiB\n+  Entrypoint b 6.31 KiB = global-332.js 447 bytes global-b.js 5.88 KiB\n+  Entrypoint c 6.32 KiB = global-332.js 447 bytes global-c.js 5.88 KiB\n   chunk (runtime: b) global-b.js (b) 54 bytes (javascript) 2.63 KiB (runtime) [entry] [rendered]\n     runtime modules 2.63 KiB 4 modules\n     ./b.js 54 bytes [built] [code generated]\n@@ -4342,7 +4342,7 @@ global:\n `;\n \n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n-\"asset bundle.js 6.86 KiB [emitted] (name: main)\n+\"asset bundle.js 6.89 KiB [emitted] (name: main)\n runtime modules 663 bytes 3 modules\n orphan modules 14 bytes [orphan] 1 module\n cacheable modules 782 bytes\n@@ -4380,7 +4380,7 @@ webpack x.x.x compiled with 1 warning in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"assets by path *.js 21.4 KiB\n+\"assets by path *.js 21.5 KiB\n   asset bundle.js 16.1 KiB [emitted] (name: main)\n   asset 325.bundle.js 3.98 KiB [emitted]\n   asset 780.bundle.js 571 bytes [emitted]"
      },
      {
        "sha": "1bdc753c4eb3f147e849de3e5e6f387eb0405c01",
        "filename": "test/hotCases/errors/events/i.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Fi.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Fi.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Ferrors%2Fevents%2Fi.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -1,4 +1,4 @@\n export default 1;\n ---\n export default 2;\n-throw new Error(\"Error while loading module h\");\n+throw new Error(\"Error while loading module i\");"
      },
      {
        "sha": "01009fbd634c49d46a01c5f0eb117f26880e3eaf",
        "filename": "test/hotCases/errors/events/index.js",
        "status": "modified",
        "additions": 30,
        "deletions": 3,
        "changes": 33,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Ferrors%2Fevents%2Findex.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -4,6 +4,8 @@ import d from \"./d\";\n import f from \"./f\";\n import h from \"./h\";\n import j from \"./j\";\n+import k from \"./k\";\n+import l from \"./l\";\n \n it(\"should import modules correctly\", () => {\n \texpect(a).toBe(1);\n@@ -12,6 +14,8 @@ it(\"should import modules correctly\", () => {\n \texpect(f).toBe(1);\n \texpect(h).toBe(1);\n \texpect(j).toBe(1);\n+\texpect(k).toBe(1);\n+\texpect(l).toBe(1);\n });\n \n it(\"should fire the correct events\", done => {\n@@ -47,6 +51,10 @@ it(\"should fire the correct events\", done => {\n \t}\n \n \twaitForUpdate(() => {\n+\t\tconst error = msg =>\n+\t\t\texpect.objectContaining({\n+\t\t\t\tmessage: msg\n+\t\t\t});\n \t\texpect(events).toEqual([\n \t\t\t{\n \t\t\t\ttype: \"unaccepted\",\n@@ -73,7 +81,7 @@ it(\"should fire the correct events\", done => {\n \t\t\t{\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: \"./i.js\",\n-\t\t\t\toutdatedDependencies: { \"./h.js\": [\"./i.js\"] },\n+\t\t\t\toutdatedDependencies: { \"./h.js\": [\"./i.js\"], \"./k.js\": [\"./i.js\"] },\n \t\t\t\toutdatedModules: [\"./i.js\"]\n \t\t\t},\n \t\t\t{\n@@ -82,16 +90,35 @@ it(\"should fire the correct events\", done => {\n \t\t\t\toutdatedDependencies: {},\n \t\t\t\toutdatedModules: [\"./j.js\"]\n \t\t\t},\n+\t\t\t{\n+\t\t\t\ttype: \"accepted\",\n+\t\t\t\tmoduleId: \"./l.js\",\n+\t\t\t\toutdatedDependencies: {},\n+\t\t\t\toutdatedModules: [\"./l.js\"]\n+\t\t\t},\n \t\t\t{\n \t\t\t\ttype: \"accept-errored\",\n \t\t\t\tmoduleId: \"./h.js\",\n \t\t\t\tdependencyId: \"./i.js\",\n-\t\t\t\terror: new Error(\"Error while loading module h\")\n+\t\t\t\terror: error(\"Error while loading module i\")\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\ttype: \"accept-error-handler-errored\",\n+\t\t\t\tmoduleId: \"./k.js\",\n+\t\t\t\tdependencyId: \"./i.js\",\n+\t\t\t\terror: error(\"Error in accept error handler: ./k.js -> ./i.js\"),\n+\t\t\t\toriginalError: error(\"Error while loading module i\")\n \t\t\t},\n \t\t\t{\n \t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\tmoduleId: \"./j.js\",\n-\t\t\t\terror: new Error(\"Error while loading module j\")\n+\t\t\t\terror: error(\"Error while loading module j\")\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\ttype: \"self-accept-error-handler-errored\",\n+\t\t\t\tmoduleId: \"./l.js\",\n+\t\t\t\terror: error(\"Error in accept error handler: ./l.js\"),\n+\t\t\t\toriginalError: error(\"Error while loading module l\")\n \t\t\t}\n \t\t]);\n \t\tdone();"
      },
      {
        "sha": "111ee1357acf32507eccc1ecca2f31a1e1c9437f",
        "filename": "test/hotCases/errors/events/k.js",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Fk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Fk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Ferrors%2Fevents%2Fk.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -0,0 +1,14 @@\n+import i from \"./i\";\n+export default i;\n+\n+if (module.hot) {\n+\tmodule.hot.accept(\n+\t\t\"./i\",\n+\t\t() => {},\n+\t\t(err, { moduleId, dependencyId }) => {\n+\t\t\tthrow new Error(\n+\t\t\t\t`Error in accept error handler: ${moduleId} -> ${dependencyId}`\n+\t\t\t);\n+\t\t}\n+\t);\n+}"
      },
      {
        "sha": "9d55205734aa5bbec66d80eea9a69df93213e1be",
        "filename": "test/hotCases/errors/events/l.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Fl.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Ferrors%2Fevents%2Fl.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Ferrors%2Fevents%2Fl.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -0,0 +1,7 @@\n+export default 1;\n+module.hot.accept((err, { moduleId }) => {\n+\tthrow new Error(`Error in accept error handler: ${moduleId}`)\n+});\n+---\n+export default 2;\n+throw new Error(\"Error while loading module l\");"
      },
      {
        "sha": "768665488391e9d5e8b144c1228b331af442ea46",
        "filename": "test/hotCases/recover/recover-after-self-error/a.js",
        "status": "added",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Fa.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -0,0 +1,29 @@\n+const store = { value: 1, error: false };\n+export default () => store.value;\n+export const getError = () => store.error;\n+export const id = module.id;\n+import.meta.webpackHot.dispose(data => {\n+\tdata.store = store;\n+})\n+import.meta.webpackHot.accept(function errorHandler(err, { module, moduleId }) {\n+\timport.meta.webpackHot.data.store.error = true;\n+\tmodule.hot.accept(errorHandler);\n+\tmodule.hot.dispose(data => {\n+\t\tdata.store = store;\n+\t})\n+});\n+---\n+import.meta.webpackHot.data.store.error = false;\n+import.meta.webpackHot.data.store.value = 2;\n+export default () => { throw new Error(\"should not happen\") };\n+export const getError = () => { throw new Error(\"should not happen\") };\n+export const id = module.id;\n+throw new Error(\"Failed\");\n+---\n+)))\n+---\n+import.meta.webpackHot.data.store.error = false;\n+import.meta.webpackHot.data.store.value = 4;\n+export default () => { throw new Error(\"should not happen\") };\n+export const getError = () => { throw new Error(\"should not happen\") };\n+export const id = module.id;"
      },
      {
        "sha": "534e9facc4cbbde52ec2267fe09ee6fd5e7475c9",
        "filename": "test/hotCases/recover/recover-after-self-error/errors2.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Ferrors2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Ferrors2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Ferrors2.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -0,0 +1 @@\n+module.exports = [[/Module parse failed/]];"
      },
      {
        "sha": "68b728ded4e11a83743ff5487f42d089d68730b0",
        "filename": "test/hotCases/recover/recover-after-self-error/index.js",
        "status": "added",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FhotCases%2Frecover%2Frecover-after-self-error%2Findex.js?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -0,0 +1,31 @@\n+import getValue, { getError, id } from \"./a\";\n+\n+const moduleId = id;\n+\n+it(\"should abort when module is not accepted\", done => {\n+\texpect(getValue()).toBe(1);\n+\texpect(getError()).toBe(false);\n+\tNEXT(\n+\t\trequire(\"../../update\")(done, true, () => {\n+\t\t\texpect(getValue()).toBe(2);\n+\t\t\texpect(getError()).toBe(true);\n+\t\t\tNEXT(\n+\t\t\t\trequire(\"../../update\")(done, true, () => {\n+\t\t\t\t\texpect(getValue()).toBe(2);\n+\t\t\t\t\texpect(getError()).toBe(true);\n+\t\t\t\t\tNEXT(\n+\t\t\t\t\t\trequire(\"../../update\")(done, true, () => {\n+\t\t\t\t\t\t\texpect(getValue()).toBe(4);\n+\t\t\t\t\t\t\texpect(getError()).toBe(false);\n+\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t})\n+\t\t\t\t\t);\n+\t\t\t\t})\n+\t\t\t);\n+\t\t})\n+\t);\n+});\n+\n+if (module.hot) {\n+\tmodule.hot.accept(\"./a\");\n+}"
      },
      {
        "sha": "3579169099fc9c0a7ade6368b40b78b743c35906",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 12,
        "deletions": 2,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/404a854c8be6d1910384a23346f98bdc915f0344/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/404a854c8be6d1910384a23346f98bdc915f0344/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=404a854c8be6d1910384a23346f98bdc915f0344",
        "patch": "@@ -7350,7 +7350,12 @@ declare interface Output {\n \tsourcePrefix?: string;\n \n \t/**\n-\t * Handles exceptions in module loading correctly at a performance cost.\n+\t * Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\n+\t */\n+\tstrictModuleErrorHandling?: boolean;\n+\n+\t/**\n+\t * Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\n \t */\n \tstrictModuleExceptionHandling?: boolean;\n \n@@ -7607,7 +7612,12 @@ declare interface OutputNormalized {\n \tsourcePrefix?: string;\n \n \t/**\n-\t * Handles exceptions in module loading correctly at a performance cost.\n+\t * Handles error in module loading correctly at a performance cost. This will handle module error compatible with the EcmaScript Modules spec.\n+\t */\n+\tstrictModuleErrorHandling?: boolean;\n+\n+\t/**\n+\t * Handles exceptions in module loading correctly at a performance cost (Deprecated). This will handle module error compatible with the Node.js CommonJS way.\n \t */\n \tstrictModuleExceptionHandling?: boolean;\n "
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12497",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12497/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12497/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12497/events",
    "html_url": "https://github.com/webpack/webpack/pull/12497",
    "id": 792835029,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTYwNjMxMTk3",
    "number": 12497,
    "title": "move responsibility of exports info and connected modules hashing from Dependencies to Module",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572709861,
        "node_id": "MDU6TGFiZWw1NzI3MDk4NjE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-not-ok",
        "name": "PR: CI-not-ok",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-01-24T16:18:55Z",
    "updated_at": "2021-01-26T15:44:11Z",
    "closed_at": "2021-01-26T15:44:10Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12497",
      "html_url": "https://github.com/webpack/webpack/pull/12497",
      "diff_url": "https://github.com/webpack/webpack/pull/12497.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12497.patch",
      "merged_at": "2021-01-26T15:44:10Z"
    },
    "body": "This should also improve performance of hashing\r\n\r\nfixes a bug where modules are incorrectly cached when exports info of connected modules change\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix, refactoring\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12497/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "c8d1e9b8d2889ff7bac5350b78b9651e557364d7",
        "filename": "lib/CacheFacade.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FCacheFacade.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FCacheFacade.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCacheFacade.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -36,6 +36,7 @@ class MultiItemCache {\n \t */\n \tconstructor(items) {\n \t\tthis._items = items;\n+\t\tif (items.length === 1) return /** @type {any} */ (items[0]);\n \t}\n \n \t/**"
      },
      {
        "sha": "4eb662f24d34f64752f1b65257af06d49f9d870a",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 132,
        "deletions": 19,
        "changes": 151,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -8,6 +8,7 @@\n const util = require(\"util\");\n const ModuleGraphConnection = require(\"./ModuleGraphConnection\");\n const SortableSet = require(\"./util/SortableSet\");\n+const StringXor = require(\"./util/StringXor\");\n const {\n \tcompareModulesById,\n \tcompareIterables,\n@@ -16,12 +17,14 @@ const {\n \tcompareSelect,\n \tcompareIds\n } = require(\"./util/comparators\");\n+const createHash = require(\"./util/createHash\");\n const findGraphRoots = require(\"./util/findGraphRoots\");\n const {\n \tRuntimeSpecMap,\n \tRuntimeSpecSet,\n \truntimeToString,\n-\tmergeRuntime\n+\tmergeRuntime,\n+\tforEachRuntime\n } = require(\"./util/runtime\");\n \n /** @typedef {import(\"./AsyncDependenciesBlock\")} AsyncDependenciesBlock */\n@@ -47,11 +50,12 @@ const compareModuleIterables = compareIterables(compareModulesByIdentifier);\n  * @property {number=} entryChunkMultiplicator multiplicator for initial chunks\n  */\n \n-/**\n- * @typedef {Object} ModuleHashInfo\n- * @property {string} hash\n- * @property {string} renderedHash\n- */\n+class ModuleHashInfo {\n+\tconstructor(hash, renderedHash) {\n+\t\tthis.hash = hash;\n+\t\tthis.renderedHash = renderedHash;\n+\t}\n+}\n \n /** @template T @typedef {(set: SortableSet<T>) => T[]} SetToArrayFunction<T> */\n \n@@ -170,6 +174,10 @@ class ChunkGraphModule {\n \t\tthis.id = null;\n \t\t/** @type {RuntimeSpecMap<Set<string>> | undefined} */\n \t\tthis.runtimeRequirements = undefined;\n+\t\t/** @type {RuntimeSpecMap<string>} */\n+\t\tthis.graphHashes = undefined;\n+\t\t/** @type {RuntimeSpecMap<string>} */\n+\t\tthis.graphHashesWithConnections = undefined;\n \t}\n }\n \n@@ -1096,6 +1104,15 @@ class ChunkGraph {\n \t\treturn cgc.fullHashModules;\n \t}\n \n+\t/**\n+\t * @param {Chunk} chunk the chunk\n+\t * @returns {ReadonlySet<RuntimeModule> | undefined} set of modules (do not modify)\n+\t */\n+\tgetChunkFullHashModulesSet(chunk) {\n+\t\tconst cgc = this._getChunkGraphChunk(chunk);\n+\t\treturn cgc.fullHashModules;\n+\t}\n+\n \t/** @typedef {[Module, Entrypoint | undefined]} EntryModuleWithChunkGroup */\n \n \t/**\n@@ -1174,14 +1191,20 @@ class ChunkGraph {\n \t}\n \n \t/**\n+\t * @template T\n \t * @param {Module} module the module\n+\t * @param {RuntimeSpecMap<T>} hashes hashes data\n \t * @param {RuntimeSpec} runtime the runtime\n-\t * @returns {ModuleHashInfo} hash\n-\t */\n-\t_getModuleHashInfo(module, runtime) {\n-\t\tconst cgm = this._getChunkGraphModule(module);\n-\t\tconst hashes = cgm.hashes;\n-\t\tif (hashes && runtime === undefined) {\n+\t * @returns {T} hash\n+\t */\n+\t_getModuleHashInfo(module, hashes, runtime) {\n+\t\tif (!hashes) {\n+\t\t\tthrow new Error(\n+\t\t\t\t`Module ${module.identifier()} has no hash info for runtime ${runtimeToString(\n+\t\t\t\t\truntime\n+\t\t\t\t)} (hashes not set at all)`\n+\t\t\t);\n+\t\t} else if (runtime === undefined) {\n \t\t\tconst hashInfoItems = new Set(hashes.values());\n \t\t\tif (hashInfoItems.size !== 1) {\n \t\t\t\tthrow new Error(\n@@ -1194,14 +1217,15 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t\t}\n \t\t\treturn hashInfoItems.values().next().value;\n \t\t} else {\n-\t\t\tconst hashInfo = hashes && hashes.get(runtime);\n+\t\t\tconst hashInfo = hashes.get(runtime);\n \t\t\tif (!hashInfo) {\n \t\t\t\tthrow new Error(\n \t\t\t\t\t`Module ${module.identifier()} has no hash info for runtime ${runtimeToString(\n \t\t\t\t\t\truntime\n-\t\t\t\t\t)} (available runtimes ${\n-\t\t\t\t\t\thashes && Array.from(hashes.keys(), runtimeToString).join(\", \")\n-\t\t\t\t\t})`\n+\t\t\t\t\t)} (available runtimes ${Array.from(\n+\t\t\t\t\t\thashes.keys(),\n+\t\t\t\t\t\truntimeToString\n+\t\t\t\t\t).join(\", \")})`\n \t\t\t\t);\n \t\t\t}\n \t\t\treturn hashInfo;\n@@ -1225,7 +1249,9 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t * @returns {string} hash\n \t */\n \tgetModuleHash(module, runtime) {\n-\t\treturn this._getModuleHashInfo(module, runtime).hash;\n+\t\tconst cgm = this._getChunkGraphModule(module);\n+\t\tconst hashes = cgm.hashes;\n+\t\treturn this._getModuleHashInfo(module, hashes, runtime).hash;\n \t}\n \n \t/**\n@@ -1234,7 +1260,9 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t * @returns {string} hash\n \t */\n \tgetRenderedModuleHash(module, runtime) {\n-\t\treturn this._getModuleHashInfo(module, runtime).renderedHash;\n+\t\tconst cgm = this._getChunkGraphModule(module);\n+\t\tconst hashes = cgm.hashes;\n+\t\treturn this._getModuleHashInfo(module, hashes, runtime).renderedHash;\n \t}\n \n \t/**\n@@ -1249,7 +1277,7 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\tif (cgm.hashes === undefined) {\n \t\t\tcgm.hashes = new RuntimeSpecMap();\n \t\t}\n-\t\tcgm.hashes.set(runtime, { hash, renderedHash });\n+\t\tcgm.hashes.set(runtime, new ModuleHashInfo(hash, renderedHash));\n \t}\n \n \t/**\n@@ -1331,6 +1359,91 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\treturn runtimeRequirements === undefined ? EMPTY_SET : runtimeRequirements;\n \t}\n \n+\tgetModuleGraphHash(module, runtime, withConnections = true) {\n+\t\tconst cgm = this._getChunkGraphModule(module);\n+\t\tif (cgm.graphHashes === undefined) {\n+\t\t\tcgm.graphHashes = new RuntimeSpecMap();\n+\t\t}\n+\t\tconst graphHash = cgm.graphHashes.provide(runtime, () => {\n+\t\t\tconst hash = createHash(\"md4\");\n+\t\t\thash.update(`${cgm.id}`);\n+\t\t\thash.update(`${this.moduleGraph.isAsync(module)}`);\n+\t\t\tthis.moduleGraph.getExportsInfo(module).updateHash(hash, runtime);\n+\t\t\treturn /** @type {string} */ (hash.digest(\"hex\"));\n+\t\t});\n+\t\tif (!withConnections) return graphHash;\n+\t\tif (cgm.graphHashesWithConnections === undefined) {\n+\t\t\tcgm.graphHashesWithConnections = new RuntimeSpecMap();\n+\t\t}\n+\t\tconst activeStateToString = state => {\n+\t\t\tif (state === false) return \"false\";\n+\t\t\tif (state === true) return \"true\";\n+\t\t\tif (state === ModuleGraphConnection.TRANSITIVE_ONLY) return \"transitive\";\n+\t\t\tthrow new Error(\"Not implemented active state\");\n+\t\t};\n+\t\tconst strict = module.buildMeta && module.buildMeta.strictHarmonyModule;\n+\t\treturn cgm.graphHashesWithConnections.provide(runtime, () => {\n+\t\t\tconst connections = this.moduleGraph.getOutgoingConnections(module);\n+\t\t\t/** @type {Map<string, Module | Set<Module>>} */\n+\t\t\tconst connectedModules = new Map();\n+\t\t\tfor (const connection of connections) {\n+\t\t\t\tlet stateInfo;\n+\t\t\t\tif (typeof runtime === \"string\") {\n+\t\t\t\t\tconst state = connection.getActiveState(runtime);\n+\t\t\t\t\tif (state === false) continue;\n+\t\t\t\t\tstateInfo = activeStateToString(state);\n+\t\t\t\t} else {\n+\t\t\t\t\tconst states = new Set();\n+\t\t\t\t\tstateInfo = \"\";\n+\t\t\t\t\tforEachRuntime(\n+\t\t\t\t\t\truntime,\n+\t\t\t\t\t\truntime => {\n+\t\t\t\t\t\t\tconst state = connection.getActiveState(runtime);\n+\t\t\t\t\t\t\tstates.add(state);\n+\t\t\t\t\t\t\tstateInfo += runtime + activeStateToString(state);\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\ttrue\n+\t\t\t\t\t);\n+\t\t\t\t\tif (states.size === 1) {\n+\t\t\t\t\t\tconst state = states.values().next().value;\n+\t\t\t\t\t\tif (state === false) continue;\n+\t\t\t\t\t\tstateInfo = activeStateToString(state);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tconst module = connection.module;\n+\t\t\t\tstateInfo += module.getExportsType(this.moduleGraph, strict);\n+\t\t\t\tconst oldModule = connectedModules.get(stateInfo);\n+\t\t\t\tif (oldModule === undefined) {\n+\t\t\t\t\tconnectedModules.set(stateInfo, module);\n+\t\t\t\t} else if (oldModule instanceof Set) {\n+\t\t\t\t\toldModule.add(module);\n+\t\t\t\t} else if (oldModule !== module) {\n+\t\t\t\t\tconnectedModules.set(stateInfo, new Set([oldModule, module]));\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tif (connectedModules.size === 0) return graphHash;\n+\t\t\tconst connectedModulesInOrder =\n+\t\t\t\tconnectedModules.size > 1\n+\t\t\t\t\t? Array.from(connectedModules).sort(([a], [b]) => (a < b ? -1 : 1))\n+\t\t\t\t\t: connectedModules;\n+\t\t\tconst hash = createHash(\"md4\");\n+\t\t\tfor (const [stateInfo, modules] of connectedModulesInOrder) {\n+\t\t\t\thash.update(stateInfo);\n+\t\t\t\tif (modules instanceof Set) {\n+\t\t\t\t\tconst xor = new StringXor();\n+\t\t\t\t\tfor (const m of modules) {\n+\t\t\t\t\t\txor.add(this.getModuleGraphHash(m, runtime, false));\n+\t\t\t\t\t}\n+\t\t\t\t\txor.updateHash(hash);\n+\t\t\t\t} else {\n+\t\t\t\t\thash.update(this.getModuleGraphHash(modules, runtime, false));\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\thash.update(graphHash);\n+\t\t\treturn /** @type {string} */ (hash.digest(\"hex\"));\n+\t\t});\n+\t}\n+\n \t/**\n \t * @param {Chunk} chunk the chunk\n \t * @returns {ReadonlySet<string>} runtime requirements"
      },
      {
        "sha": "fa92133b999a877e73493e5a6b3ac2b184c54ba2",
        "filename": "lib/CodeGenerationResults.js",
        "status": "modified",
        "additions": 43,
        "deletions": 8,
        "changes": 51,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FCodeGenerationResults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FCodeGenerationResults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCodeGenerationResults.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -5,6 +5,8 @@\n \n \"use strict\";\n \n+const { provide } = require(\"./util/MapHelpers\");\n+const createHash = require(\"./util/createHash\");\n const { runtimeToString, RuntimeSpecMap } = require(\"./util/runtime\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n@@ -16,6 +18,8 @@ class CodeGenerationResults {\n \tconstructor() {\n \t\t/** @type {Map<Module, RuntimeSpecMap<CodeGenerationResult>>} */\n \t\tthis.map = new Map();\n+\t\t/** @type {Map<Module, RuntimeSpecMap<string>>} */\n+\t\tthis.hashes = new Map();\n \t}\n \n \t/**\n@@ -61,6 +65,24 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\t}\n \t}\n \n+\t/**\n+\t * @param {Module} module the module\n+\t * @param {RuntimeSpec} runtime runtime(s)\n+\t * @returns {boolean} true, when we have data for this\n+\t */\n+\thas(module, runtime) {\n+\t\tconst entry = this.map.get(module);\n+\t\tif (entry === undefined) {\n+\t\t\treturn false;\n+\t\t}\n+\t\tif (runtime === undefined) {\n+\t\t\tconst results = new Set(entry.values());\n+\t\t\treturn results.size === 1;\n+\t\t} else {\n+\t\t\treturn entry.has(runtime);\n+\t\t}\n+\t}\n+\n \t/**\n \t * @param {Module} module the module\n \t * @param {RuntimeSpec} runtime runtime(s)\n@@ -91,21 +113,34 @@ Caller might not support runtime-dependent code generation (opt-out via optimiza\n \t\treturn data === undefined ? undefined : data.get(key);\n \t}\n \n+\t/**\n+\t * @param {Module} module the module\n+\t * @param {RuntimeSpec} runtime runtime(s)\n+\t * @returns {any} hash of the code generation\n+\t */\n+\tgetHash(module, runtime) {\n+\t\tconst info = this.get(module, runtime);\n+\t\tif (info.hash !== undefined) return info.hash;\n+\t\tconst hash = createHash(\"md4\");\n+\t\tfor (const [type, source] of info.sources) {\n+\t\t\thash.update(type);\n+\t\t\tsource.updateHash(hash);\n+\t\t}\n+\t\tif (info.runtimeRequirements) {\n+\t\t\tfor (const rr of info.runtimeRequirements) hash.update(rr);\n+\t\t}\n+\t\treturn (info.hash = /** @type {string} */ (hash.digest(\"hex\")));\n+\t}\n+\n \t/**\n \t * @param {Module} module the module\n \t * @param {RuntimeSpec} runtime runtime(s)\n \t * @param {CodeGenerationResult} result result from module\n \t * @returns {void}\n \t */\n \tadd(module, runtime, result) {\n-\t\tconst map = this.map.get(module);\n-\t\tif (map !== undefined) {\n-\t\t\tmap.set(runtime, result);\n-\t\t} else {\n-\t\t\tconst newMap = new RuntimeSpecMap();\n-\t\t\tnewMap.set(runtime, result);\n-\t\t\tthis.map.set(module, newMap);\n-\t\t}\n+\t\tconst map = provide(this.map, module, () => new RuntimeSpecMap());\n+\t\tmap.set(runtime, result);\n \t}\n }\n "
      },
      {
        "sha": "c2a63baa43739c476120ea845642c9838b2c9732",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 233,
        "deletions": 134,
        "changes": 367,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -2173,77 +2173,83 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \n \t\t\t\t\t\tthis.logger.time(\"hashing\");\n \t\t\t\t\t\tthis.hooks.beforeHash.call();\n-\t\t\t\t\t\tthis.createHash();\n+\t\t\t\t\t\tconst codeGenerationJobs = this.createHash();\n \t\t\t\t\t\tthis.hooks.afterHash.call();\n \t\t\t\t\t\tthis.logger.timeEnd(\"hashing\");\n \n-\t\t\t\t\t\tif (shouldRecord) {\n-\t\t\t\t\t\t\tthis.logger.time(\"record hash\");\n-\t\t\t\t\t\t\tthis.hooks.recordHash.call(this.records);\n-\t\t\t\t\t\t\tthis.logger.timeEnd(\"record hash\");\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tthis.logger.time(\"module assets\");\n-\t\t\t\t\t\tthis.clearAssets();\n+\t\t\t\t\t\tthis._runCodeGenerationJobs(codeGenerationJobs, err => {\n+\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\t\t}\n \n-\t\t\t\t\t\tthis.hooks.beforeModuleAssets.call();\n-\t\t\t\t\t\tthis.createModuleAssets();\n-\t\t\t\t\t\tthis.logger.timeEnd(\"module assets\");\n+\t\t\t\t\t\t\tif (shouldRecord) {\n+\t\t\t\t\t\t\t\tthis.logger.time(\"record hash\");\n+\t\t\t\t\t\t\t\tthis.hooks.recordHash.call(this.records);\n+\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"record hash\");\n+\t\t\t\t\t\t\t}\n \n-\t\t\t\t\t\tconst cont = () => {\n-\t\t\t\t\t\t\tthis.logger.time(\"process assets\");\n-\t\t\t\t\t\t\tthis.hooks.processAssets.callAsync(this.assets, err => {\n-\t\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\t\t\t\tmakeWebpackError(err, \"Compilation.hooks.processAssets\")\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tthis.hooks.afterProcessAssets.call(this.assets);\n-\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"process assets\");\n-\t\t\t\t\t\t\t\tthis.assets = soonFrozenObjectDeprecation(\n-\t\t\t\t\t\t\t\t\tthis.assets,\n-\t\t\t\t\t\t\t\t\t\"Compilation.assets\",\n-\t\t\t\t\t\t\t\t\t\"DEP_WEBPACK_COMPILATION_ASSETS\",\n-\t\t\t\t\t\t\t\t\t`BREAKING CHANGE: No more changes should happen to Compilation.assets after sealing the Compilation.\n-\tDo changes to assets earlier, e. g. in Compilation.hooks.processAssets.\n-\tMake sure to select an appropriate stage from Compilation.PROCESS_ASSETS_STAGE_*.`\n-\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tthis.logger.time(\"module assets\");\n+\t\t\t\t\t\t\tthis.clearAssets();\n \n-\t\t\t\t\t\t\t\tthis.summarizeDependencies();\n-\t\t\t\t\t\t\t\tif (shouldRecord) {\n-\t\t\t\t\t\t\t\t\tthis.hooks.record.call(this, this.records);\n-\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tthis.hooks.beforeModuleAssets.call();\n+\t\t\t\t\t\t\tthis.createModuleAssets();\n+\t\t\t\t\t\t\tthis.logger.timeEnd(\"module assets\");\n \n-\t\t\t\t\t\t\t\tif (this.hooks.needAdditionalSeal.call()) {\n-\t\t\t\t\t\t\t\t\tthis.unseal();\n-\t\t\t\t\t\t\t\t\treturn this.seal(callback);\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\treturn this.hooks.afterSeal.callAsync(err => {\n+\t\t\t\t\t\t\tconst cont = () => {\n+\t\t\t\t\t\t\t\tthis.logger.time(\"process assets\");\n+\t\t\t\t\t\t\t\tthis.hooks.processAssets.callAsync(this.assets, err => {\n \t\t\t\t\t\t\t\t\tif (err) {\n \t\t\t\t\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\t\t\t\t\tmakeWebpackError(err, \"Compilation.hooks.afterSeal\")\n+\t\t\t\t\t\t\t\t\t\t\tmakeWebpackError(err, \"Compilation.hooks.processAssets\")\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\tthis.fileSystemInfo.logStatistics();\n-\t\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t\t\tthis.hooks.afterProcessAssets.call(this.assets);\n+\t\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"process assets\");\n+\t\t\t\t\t\t\t\t\tthis.assets = soonFrozenObjectDeprecation(\n+\t\t\t\t\t\t\t\t\t\tthis.assets,\n+\t\t\t\t\t\t\t\t\t\t\"Compilation.assets\",\n+\t\t\t\t\t\t\t\t\t\t\"DEP_WEBPACK_COMPILATION_ASSETS\",\n+\t\t\t\t\t\t\t\t\t\t`BREAKING CHANGE: No more changes should happen to Compilation.assets after sealing the Compilation.\n+\tDo changes to assets earlier, e. g. in Compilation.hooks.processAssets.\n+\tMake sure to select an appropriate stage from Compilation.PROCESS_ASSETS_STAGE_*.`\n+\t\t\t\t\t\t\t\t\t);\n+\n+\t\t\t\t\t\t\t\t\tthis.summarizeDependencies();\n+\t\t\t\t\t\t\t\t\tif (shouldRecord) {\n+\t\t\t\t\t\t\t\t\t\tthis.hooks.record.call(this, this.records);\n+\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\tif (this.hooks.needAdditionalSeal.call()) {\n+\t\t\t\t\t\t\t\t\t\tthis.unseal();\n+\t\t\t\t\t\t\t\t\t\treturn this.seal(callback);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\treturn this.hooks.afterSeal.callAsync(err => {\n+\t\t\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\t\t\treturn callback(\n+\t\t\t\t\t\t\t\t\t\t\t\tmakeWebpackError(err, \"Compilation.hooks.afterSeal\")\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\tthis.fileSystemInfo.logStatistics();\n+\t\t\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t};\n+\t\t\t\t\t\t\t};\n \n-\t\t\t\t\t\tthis.logger.time(\"create chunk assets\");\n-\t\t\t\t\t\tif (this.hooks.shouldGenerateChunkAssets.call() !== false) {\n-\t\t\t\t\t\t\tthis.hooks.beforeChunkAssets.call();\n-\t\t\t\t\t\t\tthis.createChunkAssets(err => {\n+\t\t\t\t\t\t\tthis.logger.time(\"create chunk assets\");\n+\t\t\t\t\t\t\tif (this.hooks.shouldGenerateChunkAssets.call() !== false) {\n+\t\t\t\t\t\t\t\tthis.hooks.beforeChunkAssets.call();\n+\t\t\t\t\t\t\t\tthis.createChunkAssets(err => {\n+\t\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"create chunk assets\");\n+\t\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tcont();\n+\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\tthis.logger.timeEnd(\"create chunk assets\");\n-\t\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\t\treturn callback(err);\n-\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tcont();\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tthis.logger.timeEnd(\"create chunk assets\");\n-\t\t\t\t\t\t\tcont();\n-\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t});\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t);\n@@ -2288,16 +2294,8 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t}\n \n \tcodeGeneration(callback) {\n-\t\tlet statModulesFromCache = 0;\n-\t\tlet statModulesGenerated = 0;\n-\t\tconst {\n-\t\t\tchunkGraph,\n-\t\t\tmoduleGraph,\n-\t\t\tdependencyTemplates,\n-\t\t\truntimeTemplate\n-\t\t} = this;\n-\t\tconst results = (this.codeGenerationResults = new CodeGenerationResults());\n-\t\tconst errors = [];\n+\t\tconst { chunkGraph } = this;\n+\t\tthis.codeGenerationResults = new CodeGenerationResults();\n \t\t/** @type {{module: Module, hash: string, runtime: RuntimeSpec, runtimes: RuntimeSpec[]}[]} */\n \t\tconst jobs = [];\n \t\tfor (const module of this.modules) {\n@@ -2324,52 +2322,41 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t}\n \t\t}\n \n+\t\tthis._runCodeGenerationJobs(jobs, callback);\n+\t}\n+\n+\t_runCodeGenerationJobs(jobs, callback) {\n+\t\tlet statModulesFromCache = 0;\n+\t\tlet statModulesGenerated = 0;\n+\t\tconst {\n+\t\t\tchunkGraph,\n+\t\t\tmoduleGraph,\n+\t\t\tdependencyTemplates,\n+\t\t\truntimeTemplate\n+\t\t} = this;\n+\t\tconst results = this.codeGenerationResults;\n+\t\tconst errors = [];\n \t\tasyncLib.eachLimit(\n \t\t\tjobs,\n \t\t\tthis.options.parallelism,\n \t\t\t({ module, hash, runtime, runtimes }, callback) => {\n-\t\t\t\tconst cache = new MultiItemCache(\n-\t\t\t\t\truntimes.map(runtime =>\n-\t\t\t\t\t\tthis._codeGenerationCache.getItemCache(\n-\t\t\t\t\t\t\t`${module.identifier()}|${getRuntimeKey(runtime)}`,\n-\t\t\t\t\t\t\t`${hash}|${dependencyTemplates.getHash()}`\n-\t\t\t\t\t\t)\n-\t\t\t\t\t)\n-\t\t\t\t);\n-\t\t\t\tcache.get((err, cachedResult) => {\n-\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\tlet result;\n-\t\t\t\t\tif (!cachedResult) {\n-\t\t\t\t\t\tstatModulesGenerated++;\n-\t\t\t\t\t\ttry {\n-\t\t\t\t\t\t\tthis.codeGeneratedModules.add(module);\n-\t\t\t\t\t\t\tresult = module.codeGeneration({\n-\t\t\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\t\t\tmoduleGraph,\n-\t\t\t\t\t\t\t\tdependencyTemplates,\n-\t\t\t\t\t\t\t\truntimeTemplate,\n-\t\t\t\t\t\t\t\truntime\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t} catch (err) {\n-\t\t\t\t\t\t\terrors.push(new CodeGenerationError(module, err));\n-\t\t\t\t\t\t\tresult = cachedResult = {\n-\t\t\t\t\t\t\t\tsources: new Map(),\n-\t\t\t\t\t\t\t\truntimeRequirements: null\n-\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tstatModulesFromCache++;\n-\t\t\t\t\t\tresult = cachedResult;\n-\t\t\t\t\t}\n-\t\t\t\t\tfor (const runtime of runtimes) {\n-\t\t\t\t\t\tresults.add(module, runtime, result);\n-\t\t\t\t\t}\n-\t\t\t\t\tif (!cachedResult) {\n-\t\t\t\t\t\tcache.store(result, callback);\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tcallback();\n+\t\t\t\tthis._codeGenerationModule(\n+\t\t\t\t\tmodule,\n+\t\t\t\t\truntime,\n+\t\t\t\t\truntimes,\n+\t\t\t\t\thash,\n+\t\t\t\t\tdependencyTemplates,\n+\t\t\t\t\tchunkGraph,\n+\t\t\t\t\tmoduleGraph,\n+\t\t\t\t\truntimeTemplate,\n+\t\t\t\t\terrors,\n+\t\t\t\t\tresults,\n+\t\t\t\t\t(err, codeGenerated) => {\n+\t\t\t\t\t\tif (codeGenerated) statModulesGenerated++;\n+\t\t\t\t\t\telse statModulesFromCache++;\n+\t\t\t\t\t\tcallback(err);\n \t\t\t\t\t}\n-\t\t\t\t});\n+\t\t\t\t);\n \t\t\t},\n \t\t\terr => {\n \t\t\t\tif (err) return callback(err);\n@@ -2392,6 +2379,76 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t);\n \t}\n \n+\t/**\n+\t * @param {Module} module module\n+\t * @param {RuntimeSpec} runtime runtime\n+\t * @param {RuntimeSpec[]} runtimes runtimes\n+\t * @param {string} hash hash\n+\t * @param {DependencyTemplates} dependencyTemplates dependencyTemplates\n+\t * @param {ChunkGraph} chunkGraph chunkGraph\n+\t * @param {ModuleGraph} moduleGraph moduleGraph\n+\t * @param {RuntimeTemplate} runtimeTemplate runtimeTemplate\n+\t * @param {WebpackError[]} errors errors\n+\t * @param {CodeGenerationResults} results results\n+\t * @param {function(WebpackError=, boolean=): void} callback callback\n+\t */\n+\t_codeGenerationModule(\n+\t\tmodule,\n+\t\truntime,\n+\t\truntimes,\n+\t\thash,\n+\t\tdependencyTemplates,\n+\t\tchunkGraph,\n+\t\tmoduleGraph,\n+\t\truntimeTemplate,\n+\t\terrors,\n+\t\tresults,\n+\t\tcallback\n+\t) {\n+\t\tlet codeGenerated = false;\n+\t\tconst cache = new MultiItemCache(\n+\t\t\truntimes.map(runtime =>\n+\t\t\t\tthis._codeGenerationCache.getItemCache(\n+\t\t\t\t\t`${module.identifier()}|${getRuntimeKey(runtime)}`,\n+\t\t\t\t\t`${hash}|${dependencyTemplates.getHash()}`\n+\t\t\t\t)\n+\t\t\t)\n+\t\t);\n+\t\tcache.get((err, cachedResult) => {\n+\t\t\tif (err) return callback(err);\n+\t\t\tlet result;\n+\t\t\tif (!cachedResult) {\n+\t\t\t\ttry {\n+\t\t\t\t\tcodeGenerated = true;\n+\t\t\t\t\tthis.codeGeneratedModules.add(module);\n+\t\t\t\t\tresult = module.codeGeneration({\n+\t\t\t\t\t\tchunkGraph,\n+\t\t\t\t\t\tmoduleGraph,\n+\t\t\t\t\t\tdependencyTemplates,\n+\t\t\t\t\t\truntimeTemplate,\n+\t\t\t\t\t\truntime\n+\t\t\t\t\t});\n+\t\t\t\t} catch (err) {\n+\t\t\t\t\terrors.push(new CodeGenerationError(module, err));\n+\t\t\t\t\tresult = cachedResult = {\n+\t\t\t\t\t\tsources: new Map(),\n+\t\t\t\t\t\truntimeRequirements: null\n+\t\t\t\t\t};\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tresult = cachedResult;\n+\t\t\t}\n+\t\t\tfor (const runtime of runtimes) {\n+\t\t\t\tresults.add(module, runtime, result);\n+\t\t\t}\n+\t\t\tif (!cachedResult) {\n+\t\t\t\tcache.store(result, err => callback(err, codeGenerated));\n+\t\t\t} else {\n+\t\t\t\tcallback(null, codeGenerated);\n+\t\t\t}\n+\t\t});\n+\t}\n+\n \t/**\n \t * @returns {void}\n \t */\n@@ -2818,20 +2875,14 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\tfor (const module of this.modules) {\n \t\t\tfor (const runtime of chunkGraph.getModuleRuntimes(module)) {\n \t\t\t\tstatModulesHashed++;\n-\t\t\t\tconst moduleHash = createHash(hashFunction);\n-\t\t\t\tmodule.updateHash(moduleHash, {\n-\t\t\t\t\tchunkGraph,\n-\t\t\t\t\truntime,\n-\t\t\t\t\truntimeTemplate\n-\t\t\t\t});\n-\t\t\t\tconst moduleHashDigest = /** @type {string} */ (moduleHash.digest(\n-\t\t\t\t\thashDigest\n-\t\t\t\t));\n-\t\t\t\tchunkGraph.setModuleHashes(\n+\t\t\t\tthis._createModuleHash(\n \t\t\t\t\tmodule,\n+\t\t\t\t\tchunkGraph,\n \t\t\t\t\truntime,\n-\t\t\t\t\tmoduleHashDigest,\n-\t\t\t\t\tmoduleHashDigest.substr(0, hashDigestLength)\n+\t\t\t\t\thashFunction,\n+\t\t\t\t\truntimeTemplate,\n+\t\t\t\t\thashDigest,\n+\t\t\t\t\thashDigestLength\n \t\t\t\t);\n \t\t\t}\n \t\t}\n@@ -2842,6 +2893,33 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t);\n \t}\n \n+\t_createModuleHash(\n+\t\tmodule,\n+\t\tchunkGraph,\n+\t\truntime,\n+\t\thashFunction,\n+\t\truntimeTemplate,\n+\t\thashDigest,\n+\t\thashDigestLength\n+\t) {\n+\t\tconst moduleHash = createHash(hashFunction);\n+\t\tmodule.updateHash(moduleHash, {\n+\t\t\tchunkGraph,\n+\t\t\truntime,\n+\t\t\truntimeTemplate\n+\t\t});\n+\t\tconst moduleHashDigest = /** @type {string} */ (moduleHash.digest(\n+\t\t\thashDigest\n+\t\t));\n+\t\tchunkGraph.setModuleHashes(\n+\t\t\tmodule,\n+\t\t\truntime,\n+\t\t\tmoduleHashDigest,\n+\t\t\tmoduleHashDigest.substr(0, hashDigestLength)\n+\t\t);\n+\t\treturn moduleHashDigest;\n+\t}\n+\n \tcreateHash() {\n \t\tthis.logger.time(\"hashing: initialize hash\");\n \t\tconst chunkGraph = this.chunkGraph;\n@@ -2922,31 +3000,49 @@ This prevents using hashes of each other and should be avoided.`\n \t\t});\n \t\tthis.logger.timeEnd(\"hashing: sort chunks\");\n \t\tconst fullHashChunks = new Set();\n+\t\t/** @type {{module: Module, hash: string, runtime: RuntimeSpec, runtimes: RuntimeSpec[]}[]} */\n+\t\tconst codeGenerationJobs = [];\n+\t\t/** @type {Map<string, Map<Module, {module: Module, hash: string, runtime: RuntimeSpec, runtimes: RuntimeSpec[]}>>} */\n+\t\tconst codeGenerationJobsMap = new Map();\n \t\tconst processChunk = chunk => {\n \t\t\t// Last minute module hash generation for modules that depend on chunk hashes\n \t\t\tthis.logger.time(\"hashing: hash runtime modules\");\n+\t\t\tconst runtime = chunk.runtime;\n \t\t\tfor (const module of chunkGraph.getChunkModulesIterable(chunk)) {\n-\t\t\t\tif (!chunkGraph.hasModuleHashes(module, chunk.runtime)) {\n-\t\t\t\t\tconst moduleHash = createHash(hashFunction);\n-\t\t\t\t\tmodule.updateHash(moduleHash, {\n-\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\truntime: chunk.runtime,\n-\t\t\t\t\t\truntimeTemplate\n-\t\t\t\t\t});\n-\t\t\t\t\tconst moduleHashDigest = /** @type {string} */ (moduleHash.digest(\n-\t\t\t\t\t\thashDigest\n-\t\t\t\t\t));\n-\t\t\t\t\tchunkGraph.setModuleHashes(\n+\t\t\t\tif (!chunkGraph.hasModuleHashes(module, runtime)) {\n+\t\t\t\t\tconst hash = this._createModuleHash(\n \t\t\t\t\t\tmodule,\n-\t\t\t\t\t\tchunk.runtime,\n-\t\t\t\t\t\tmoduleHashDigest,\n-\t\t\t\t\t\tmoduleHashDigest.substr(0, hashDigestLength)\n+\t\t\t\t\t\tchunkGraph,\n+\t\t\t\t\t\truntime,\n+\t\t\t\t\t\thashFunction,\n+\t\t\t\t\t\truntimeTemplate,\n+\t\t\t\t\t\thashDigest,\n+\t\t\t\t\t\thashDigestLength\n \t\t\t\t\t);\n+\t\t\t\t\tlet hashMap = codeGenerationJobsMap.get(hash);\n+\t\t\t\t\tif (hashMap) {\n+\t\t\t\t\t\tconst moduleJob = hashMap.get(module);\n+\t\t\t\t\t\tif (moduleJob) {\n+\t\t\t\t\t\t\tmoduleJob.runtimes.push(runtime);\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\thashMap = new Map();\n+\t\t\t\t\t\tcodeGenerationJobsMap.set(hash, hashMap);\n+\t\t\t\t\t}\n+\t\t\t\t\tconst job = {\n+\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\thash,\n+\t\t\t\t\t\truntime,\n+\t\t\t\t\t\truntimes: [runtime]\n+\t\t\t\t\t};\n+\t\t\t\t\thashMap.set(module, job);\n+\t\t\t\t\tcodeGenerationJobs.push(job);\n \t\t\t\t}\n \t\t\t}\n \t\t\tthis.logger.timeAggregate(\"hashing: hash runtime modules\");\n-\t\t\tconst chunkHash = createHash(hashFunction);\n \t\t\tthis.logger.time(\"hashing: hash chunks\");\n+\t\t\tconst chunkHash = createHash(hashFunction);\n \t\t\ttry {\n \t\t\t\tif (outputOptions.hashSalt) {\n \t\t\t\t\tchunkHash.update(outputOptions.hashSalt);\n@@ -2999,12 +3095,14 @@ This prevents using hashes of each other and should be avoided.`\n \t\t\t\tconst moduleHashDigest = /** @type {string} */ (moduleHash.digest(\n \t\t\t\t\thashDigest\n \t\t\t\t));\n+\t\t\t\tconst oldHash = chunkGraph.getModuleHash(module, chunk.runtime);\n \t\t\t\tchunkGraph.setModuleHashes(\n \t\t\t\t\tmodule,\n \t\t\t\t\tchunk.runtime,\n \t\t\t\t\tmoduleHashDigest,\n \t\t\t\t\tmoduleHashDigest.substr(0, hashDigestLength)\n \t\t\t\t);\n+\t\t\t\tcodeGenerationJobsMap.get(oldHash).get(module).hash = moduleHashDigest;\n \t\t\t}\n \t\t\tconst chunkHash = createHash(hashFunction);\n \t\t\tchunkHash.update(chunk.hash);\n@@ -3017,6 +3115,7 @@ This prevents using hashes of each other and should be avoided.`\n \t\t\tthis.hooks.contentHash.call(chunk);\n \t\t}\n \t\tthis.logger.timeEnd(\"hashing: process full hash modules\");\n+\t\treturn codeGenerationJobs;\n \t}\n \n \t/**"
      },
      {
        "sha": "0d73385a9a63f6f313444abbbbc4cce042aba9ea",
        "filename": "lib/Dependency.js",
        "status": "modified",
        "additions": 1,
        "deletions": 7,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -167,13 +167,7 @@ class Dependency {\n \t * @param {UpdateHashContext} context context\n \t * @returns {void}\n \t */\n-\tupdateHash(hash, context) {\n-\t\tconst { chunkGraph } = context;\n-\t\tconst module = chunkGraph.moduleGraph.getModule(this);\n-\t\tif (module) {\n-\t\t\thash.update(chunkGraph.getModuleId(module) + \"\");\n-\t\t}\n-\t}\n+\tupdateHash(hash, context) {}\n \n \t/**\n \t * implement this method to allow the occurrence order plugin to count correctly"
      },
      {
        "sha": "7d8b1cdf6445a0eef921379c72ffd1a434904b87",
        "filename": "lib/ExportsInfo.js",
        "status": "modified",
        "additions": 23,
        "deletions": 4,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FExportsInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FExportsInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FExportsInfo.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -684,15 +684,27 @@ class ExportsInfo {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, runtime) {\n+\t\tthis._updateHash(hash, runtime, new Set());\n+\t}\n+\n+\t/**\n+\t * @param {Hash} hash the hash\n+\t * @param {RuntimeSpec} runtime the runtime\n+\t * @param {Set<ExportsInfo>} alreadyVisitedExportsInfo for circular references\n+\t * @returns {void}\n+\t */\n+\t_updateHash(hash, runtime, alreadyVisitedExportsInfo) {\n+\t\tconst set = new Set(alreadyVisitedExportsInfo);\n+\t\tset.add(this);\n \t\tfor (const exportInfo of this.orderedExports) {\n \t\t\tif (exportInfo.hasInfo(this._otherExportsInfo, runtime)) {\n-\t\t\t\texportInfo.updateHash(hash, runtime);\n+\t\t\t\texportInfo._updateHash(hash, runtime, set);\n \t\t\t}\n \t\t}\n-\t\tthis._sideEffectsOnlyInfo.updateHash(hash, runtime);\n-\t\tthis._otherExportsInfo.updateHash(hash, runtime);\n+\t\tthis._sideEffectsOnlyInfo._updateHash(hash, runtime, set);\n+\t\tthis._otherExportsInfo._updateHash(hash, runtime, set);\n \t\tif (this._redirectTo !== undefined) {\n-\t\t\tthis._redirectTo.updateHash(hash, runtime);\n+\t\t\tthis._redirectTo._updateHash(hash, runtime, set);\n \t\t}\n \t}\n \n@@ -1338,10 +1350,17 @@ class ExportInfo {\n \t}\n \n \tupdateHash(hash, runtime) {\n+\t\tthis._updateHash(hash, runtime, new Set());\n+\t}\n+\n+\t_updateHash(hash, runtime, alreadyVisitedExportsInfo) {\n \t\thash.update(`${this._usedName || this.name}`);\n \t\thash.update(`${this.getUsed(runtime)}`);\n \t\thash.update(`${this.provided}`);\n \t\thash.update(`${this.terminalBinding}`);\n+\t\tif (this.exportsInfo && !alreadyVisitedExportsInfo.has(this.exportsInfo)) {\n+\t\t\tthis.exportsInfo._updateHash(hash, runtime, alreadyVisitedExportsInfo);\n+\t\t}\n \t}\n \n \tgetUsedInfo() {"
      },
      {
        "sha": "dbe689f99769e6ad8899172f6185036a8e7a20cf",
        "filename": "lib/HotModuleReplacementPlugin.js",
        "status": "modified",
        "additions": 76,
        "deletions": 29,
        "changes": 105,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FHotModuleReplacementPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FHotModuleReplacementPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FHotModuleReplacementPlugin.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -39,6 +39,7 @@ const {\n /** @typedef {import(\"./Compiler\")} Compiler */\n /** @typedef {import(\"./Module\")} Module */\n /** @typedef {import(\"./RuntimeModule\")} RuntimeModule */\n+/** @typedef {import(\"./util/runtime\").RuntimeSpec} RuntimeSpec */\n \n /**\n  * @typedef {Object} HMRJavascriptParserHooks\n@@ -316,50 +317,86 @@ class HotModuleReplacementPlugin {\n \t\t\t\t/** @type {TupleSet<[Module, Chunk]>} */\n \t\t\t\tconst updatedModules = new TupleSet();\n \t\t\t\t/** @type {TupleSet<[Module, Chunk]>} */\n-\t\t\t\tconst lazyHashedModules = new TupleSet();\n+\t\t\t\tconst fullHashModules = new TupleSet();\n+\t\t\t\t/** @type {TupleSet<[Module, RuntimeSpec]>} */\n+\t\t\t\tconst nonCodeGeneratedModules = new TupleSet();\n \t\t\t\tcompilation.hooks.fullHash.tap(\"HotModuleReplacementPlugin\", hash => {\n \t\t\t\t\tconst chunkGraph = compilation.chunkGraph;\n \t\t\t\t\tconst records = compilation.records;\n \t\t\t\t\tfor (const chunk of compilation.chunks) {\n-\t\t\t\t\t\t/** @type {Set<Module>} */\n-\t\t\t\t\t\tconst lazyHashedModulesInThisChunk = new Set();\n-\t\t\t\t\t\tconst fullHashModules = chunkGraph.getChunkFullHashModulesIterable(\n+\t\t\t\t\t\tconst getModuleHash = module => {\n+\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\tcompilation.codeGenerationResults.has(module, chunk.runtime)\n+\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\treturn compilation.codeGenerationResults.getHash(\n+\t\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\t\tchunk.runtime\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tnonCodeGeneratedModules.add(module, chunk.runtime);\n+\t\t\t\t\t\t\t\treturn chunkGraph.getModuleHash(module, chunk.runtime);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t};\n+\t\t\t\t\t\tconst fullHashModulesInThisChunk = chunkGraph.getChunkFullHashModulesSet(\n \t\t\t\t\t\t\tchunk\n \t\t\t\t\t\t);\n-\t\t\t\t\t\tif (fullHashModules !== undefined) {\n-\t\t\t\t\t\t\tfor (const module of fullHashModules) {\n-\t\t\t\t\t\t\t\tlazyHashedModules.add(module, chunk);\n-\t\t\t\t\t\t\t\tlazyHashedModulesInThisChunk.add(module);\n+\t\t\t\t\t\tif (fullHashModulesInThisChunk !== undefined) {\n+\t\t\t\t\t\t\tfor (const module of fullHashModulesInThisChunk) {\n+\t\t\t\t\t\t\t\tfullHashModules.add(module, chunk);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t\tconst modules = chunkGraph.getChunkModulesIterable(chunk);\n \t\t\t\t\t\tif (modules !== undefined) {\n-\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\trecords.chunkModuleHashes &&\n-\t\t\t\t\t\t\t\trecords.fullHashChunkModuleHashes\n-\t\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\t\tfor (const module of modules) {\n-\t\t\t\t\t\t\t\t\tconst key = `${chunk.id}|${module.identifier()}`;\n-\t\t\t\t\t\t\t\t\tconst hash = chunkGraph.getModuleHash(module, chunk.runtime);\n-\t\t\t\t\t\t\t\t\tif (lazyHashedModulesInThisChunk.has(module)) {\n-\t\t\t\t\t\t\t\t\t\tif (records.fullHashChunkModuleHashes[key] !== hash) {\n-\t\t\t\t\t\t\t\t\t\t\tupdatedModules.add(module, chunk);\n+\t\t\t\t\t\t\tif (records.chunkModuleHashes) {\n+\t\t\t\t\t\t\t\tif (fullHashModulesInThisChunk !== undefined) {\n+\t\t\t\t\t\t\t\t\tfor (const module of modules) {\n+\t\t\t\t\t\t\t\t\t\tconst key = `${chunk.id}|${module.identifier()}`;\n+\t\t\t\t\t\t\t\t\t\tconst hash = getModuleHash(module);\n+\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\tfullHashModulesInThisChunk.has(\n+\t\t\t\t\t\t\t\t\t\t\t\t/** @type {RuntimeModule} */ (module)\n+\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\t\tif (records.fullHashChunkModuleHashes[key] !== hash) {\n+\t\t\t\t\t\t\t\t\t\t\t\tupdatedModules.add(module, chunk);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\tfullHashChunkModuleHashes[key] = hash;\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\tif (records.chunkModuleHashes[key] !== hash) {\n+\t\t\t\t\t\t\t\t\t\t\t\tupdatedModules.add(module, chunk);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\tchunkModuleHashes[key] = hash;\n \t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\tfullHashChunkModuleHashes[key] = hash;\n-\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tfor (const module of modules) {\n+\t\t\t\t\t\t\t\t\t\tconst key = `${chunk.id}|${module.identifier()}`;\n+\t\t\t\t\t\t\t\t\t\tconst hash = getModuleHash(module);\n \t\t\t\t\t\t\t\t\t\tif (records.chunkModuleHashes[key] !== hash) {\n \t\t\t\t\t\t\t\t\t\t\tupdatedModules.add(module, chunk);\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\tchunkModuleHashes[key] = hash;\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tfor (const module of modules) {\n-\t\t\t\t\t\t\t\t\tconst key = `${chunk.id}|${module.identifier()}`;\n-\t\t\t\t\t\t\t\t\tconst hash = chunkGraph.getModuleHash(module, chunk.runtime);\n-\t\t\t\t\t\t\t\t\tif (lazyHashedModulesInThisChunk.has(module)) {\n-\t\t\t\t\t\t\t\t\t\tfullHashChunkModuleHashes[key] = hash;\n-\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tif (fullHashModulesInThisChunk !== undefined) {\n+\t\t\t\t\t\t\t\t\tfor (const module of modules) {\n+\t\t\t\t\t\t\t\t\t\tconst key = `${chunk.id}|${module.identifier()}`;\n+\t\t\t\t\t\t\t\t\t\tconst hash = getModuleHash(module);\n+\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\tfullHashModulesInThisChunk.has(\n+\t\t\t\t\t\t\t\t\t\t\t\t/** @type {RuntimeModule} */ (module)\n+\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\t\tfullHashChunkModuleHashes[key] = hash;\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\tchunkModuleHashes[key] = hash;\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tfor (const module of modules) {\n+\t\t\t\t\t\t\t\t\t\tconst key = `${chunk.id}|${module.identifier()}`;\n+\t\t\t\t\t\t\t\t\t\tconst hash = getModuleHash(module);\n \t\t\t\t\t\t\t\t\t\tchunkModuleHashes[key] = hash;\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n@@ -388,9 +425,14 @@ class HotModuleReplacementPlugin {\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tfor (const [module, chunk] of lazyHashedModules) {\n+\t\t\t\t\t\tfor (const [module, chunk] of fullHashModules) {\n \t\t\t\t\t\t\tconst key = `${chunk.id}|${module.identifier()}`;\n-\t\t\t\t\t\t\tconst hash = chunkGraph.getModuleHash(module, chunk.runtime);\n+\t\t\t\t\t\t\tconst hash = nonCodeGeneratedModules.has(module, chunk.runtime)\n+\t\t\t\t\t\t\t\t? chunkGraph.getModuleHash(module, chunk.runtime)\n+\t\t\t\t\t\t\t\t: compilation.codeGenerationResults.getHash(\n+\t\t\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\t\t\tchunk.runtime\n+\t\t\t\t\t\t\t\t  );\n \t\t\t\t\t\t\tif (records.chunkModuleHashes[key] !== hash) {\n \t\t\t\t\t\t\t\tupdatedModules.add(module, chunk);\n \t\t\t\t\t\t\t}\n@@ -500,7 +542,12 @@ class HotModuleReplacementPlugin {\n \t\t\t\t\t\t\t\t\tconst runtimes = chunkGraph.getModuleRuntimes(module);\n \t\t\t\t\t\t\t\t\tif (oldRuntime === newRuntime && runtimes.has(newRuntime)) {\n \t\t\t\t\t\t\t\t\t\t// Module is still in the same runtime combination\n-\t\t\t\t\t\t\t\t\t\tconst hash = chunkGraph.getModuleHash(module, newRuntime);\n+\t\t\t\t\t\t\t\t\t\tconst hash = nonCodeGeneratedModules.has(module, newRuntime)\n+\t\t\t\t\t\t\t\t\t\t\t? chunkGraph.getModuleHash(module, newRuntime)\n+\t\t\t\t\t\t\t\t\t\t\t: compilation.codeGenerationResults.getHash(\n+\t\t\t\t\t\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\t\t\t\t\t\tnewRuntime\n+\t\t\t\t\t\t\t\t\t\t\t  );\n \t\t\t\t\t\t\t\t\t\tif (hash !== oldHash) {\n \t\t\t\t\t\t\t\t\t\t\tif (module.type === \"runtime\") {\n \t\t\t\t\t\t\t\t\t\t\t\tnewRuntimeModules = newRuntimeModules || [];"
      },
      {
        "sha": "c33fe6d7666987b5997be408aad61ea567bd896f",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -67,6 +67,7 @@ const makeSerializable = require(\"./util/makeSerializable\");\n  * @property {Map<string, Source>} sources the resulting sources for all source types\n  * @property {Map<string, any>=} data the resulting data for all source types\n  * @property {ReadonlySet<string>} runtimeRequirements the runtime requirements\n+ * @property {string=} hash a hash of the code generation result (will be automatically calculated from sources and runtimeRequirements if not provided)\n  */\n \n /**\n@@ -703,9 +704,7 @@ class Module extends DependenciesBlock {\n \t\t}\n \t) {\n \t\tconst { chunkGraph, runtime } = context;\n-\t\thash.update(`${chunkGraph.getModuleId(this)}`);\n-\t\tconst exportsInfo = chunkGraph.moduleGraph.getExportsInfo(this);\n-\t\texportsInfo.updateHash(hash, runtime);\n+\t\thash.update(chunkGraph.getModuleGraphHash(this, runtime));\n \t\tif (this.presentationalDependencies !== undefined) {\n \t\t\tfor (const dep of this.presentationalDependencies) {\n \t\t\t\tdep.updateHash(hash, context);"
      },
      {
        "sha": "03d4c231252f143daecb61d04b7a74b91e746514",
        "filename": "lib/Template.js",
        "status": "modified",
        "additions": 32,
        "deletions": 23,
        "changes": 55,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FTemplate.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2FTemplate.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FTemplate.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -349,34 +349,43 @@ class Template {\n \n \t/**\n \t * @param {RuntimeModule[]} runtimeModules array of runtime modules in order\n-\t * @param {RenderContext} renderContext render context\n+\t * @param {RenderContext & { codeGenerationResults?: CodeGenerationResults }} renderContext render context\n \t * @returns {Source} rendered runtime modules in a Source object\n \t */\n \tstatic renderRuntimeModules(runtimeModules, renderContext) {\n \t\tconst source = new ConcatSource();\n \t\tfor (const module of runtimeModules) {\n-\t\t\tconst codeGenResult = module.codeGeneration({\n-\t\t\t\tchunkGraph: renderContext.chunkGraph,\n-\t\t\t\tdependencyTemplates: renderContext.dependencyTemplates,\n-\t\t\t\tmoduleGraph: renderContext.moduleGraph,\n-\t\t\t\truntimeTemplate: renderContext.runtimeTemplate,\n-\t\t\t\truntime: renderContext.chunk.runtime\n-\t\t\t});\n-\t\t\tif (codeGenResult) {\n-\t\t\t\tconst moduleSource = codeGenResult.sources.get(\"runtime\");\n-\t\t\t\tif (moduleSource) {\n-\t\t\t\t\tsource.add(Template.toNormalComment(module.identifier()) + \"\\n\");\n-\t\t\t\t\tif (!module.shouldIsolate()) {\n-\t\t\t\t\t\tsource.add(moduleSource);\n-\t\t\t\t\t} else if (renderContext.runtimeTemplate.supportsArrowFunction()) {\n-\t\t\t\t\t\tsource.add(\"(() => {\\n\");\n-\t\t\t\t\t\tsource.add(new PrefixSource(\"\\t\", moduleSource));\n-\t\t\t\t\t\tsource.add(\"\\n})();\\n\\n\");\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tsource.add(\"!function() {\\n\");\n-\t\t\t\t\t\tsource.add(new PrefixSource(\"\\t\", moduleSource));\n-\t\t\t\t\t\tsource.add(\"\\n}();\\n\\n\");\n-\t\t\t\t\t}\n+\t\t\tconst codeGenerationResults = renderContext.codeGenerationResults;\n+\t\t\tlet runtimeSource;\n+\t\t\tif (codeGenerationResults) {\n+\t\t\t\truntimeSource = codeGenerationResults.getSource(\n+\t\t\t\t\tmodule,\n+\t\t\t\t\trenderContext.chunk.runtime,\n+\t\t\t\t\t\"runtime\"\n+\t\t\t\t);\n+\t\t\t} else {\n+\t\t\t\tconst codeGenResult = module.codeGeneration({\n+\t\t\t\t\tchunkGraph: renderContext.chunkGraph,\n+\t\t\t\t\tdependencyTemplates: renderContext.dependencyTemplates,\n+\t\t\t\t\tmoduleGraph: renderContext.moduleGraph,\n+\t\t\t\t\truntimeTemplate: renderContext.runtimeTemplate,\n+\t\t\t\t\truntime: renderContext.chunk.runtime\n+\t\t\t\t});\n+\t\t\t\tif (!codeGenResult) continue;\n+\t\t\t\truntimeSource = codeGenResult.sources.get(\"runtime\");\n+\t\t\t}\n+\t\t\tif (runtimeSource) {\n+\t\t\t\tsource.add(Template.toNormalComment(module.identifier()) + \"\\n\");\n+\t\t\t\tif (!module.shouldIsolate()) {\n+\t\t\t\t\tsource.add(runtimeSource);\n+\t\t\t\t} else if (renderContext.runtimeTemplate.supportsArrowFunction()) {\n+\t\t\t\t\tsource.add(\"(() => {\\n\");\n+\t\t\t\t\tsource.add(new PrefixSource(\"\\t\", runtimeSource));\n+\t\t\t\t\tsource.add(\"\\n})();\\n\\n\");\n+\t\t\t\t} else {\n+\t\t\t\t\tsource.add(\"!function() {\\n\");\n+\t\t\t\t\tsource.add(new PrefixSource(\"\\t\", runtimeSource));\n+\t\t\t\t\tsource.add(\"\\n}();\\n\\n\");\n \t\t\t\t}\n \t\t\t}\n \t\t}"
      },
      {
        "sha": "5aa28e5d4e82e37010c1a4c6c0d224b0b2f9371f",
        "filename": "lib/dependencies/ExportsInfoDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 20,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FExportsInfoDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FExportsInfoDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FExportsInfoDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -83,26 +83,6 @@ class ExportsInfoDependency extends NullDependency {\n \t\tthis.property = property;\n \t}\n \n-\t/**\n-\t * Update the hash\n-\t * @param {Hash} hash hash to be updated\n-\t * @param {UpdateHashContext} context context\n-\t * @returns {void}\n-\t */\n-\tupdateHash(hash, context) {\n-\t\tconst { chunkGraph, runtime } = context;\n-\t\tconst { moduleGraph } = chunkGraph;\n-\t\tconst module = moduleGraph.getParentModule(this);\n-\t\tconst value = getProperty(\n-\t\t\tmoduleGraph,\n-\t\t\tmodule,\n-\t\t\tthis.exportName,\n-\t\t\tthis.property,\n-\t\t\truntime\n-\t\t);\n-\t\thash.update(value === undefined ? \"undefined\" : JSON.stringify(value));\n-\t}\n-\n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.range);"
      },
      {
        "sha": "4e8e645561c1ad878b14c3dc2be1c026287414c2",
        "filename": "lib/dependencies/HarmonyExportImportedSpecifierDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 29,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -680,35 +680,6 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\treturn errors;\n \t}\n \n-\t/**\n-\t * Update the hash\n-\t * @param {Hash} hash hash to be updated\n-\t * @param {UpdateHashContext} context context\n-\t * @returns {void}\n-\t */\n-\tupdateHash(hash, context) {\n-\t\tconst { chunkGraph, runtime } = context;\n-\t\tsuper.updateHash(hash, context);\n-\n-\t\tconst mode = this.getMode(chunkGraph.moduleGraph, runtime);\n-\n-\t\thash.update(mode.type);\n-\t\tif (mode.items) {\n-\t\t\tfor (const item of mode.items) {\n-\t\t\t\thash.update(item.name);\n-\t\t\t\thash.update(item.ids.join());\n-\t\t\t\tif (item.checked) hash.update(\"checked\");\n-\t\t\t}\n-\t\t}\n-\t\tif (mode.ignored) {\n-\t\t\thash.update(\"ignored\");\n-\t\t\tfor (const k of mode.ignored) {\n-\t\t\t\thash.update(k);\n-\t\t\t}\n-\t\t}\n-\t\thash.update(mode.name || \"\");\n-\t}\n-\n \tserialize(context) {\n \t\tconst { write } = context;\n "
      },
      {
        "sha": "9ecc0e1617b54d02ffba49ab0b19d62fe82ac589",
        "filename": "lib/dependencies/HarmonyImportDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 41,
        "changes": 41,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -196,47 +196,6 @@ class HarmonyImportDependency extends ModuleDependency {\n \t\t}\n \t}\n \n-\t/**\n-\t * Update the hash\n-\t * @param {Hash} hash hash to be updated\n-\t * @param {UpdateHashContext} context context\n-\t * @returns {void}\n-\t */\n-\tupdateHash(hash, context) {\n-\t\tconst { chunkGraph, runtime, runtimeTemplate } = context;\n-\t\tconst { moduleGraph } = chunkGraph;\n-\t\tsuper.updateHash(hash, context);\n-\t\thash.update(`${this.sourceOrder}`);\n-\t\tconst connection = moduleGraph.getConnection(this);\n-\t\tif (connection) {\n-\t\t\tconst importedModule = connection.module;\n-\t\t\tif (importedModule) {\n-\t\t\t\tconst parentModule = moduleGraph.getParentModule(this);\n-\t\t\t\thash.update(\n-\t\t\t\t\timportedModule.getExportsType(\n-\t\t\t\t\t\tmoduleGraph,\n-\t\t\t\t\t\tparentModule.buildMeta && parentModule.buildMeta.strictHarmonyModule\n-\t\t\t\t\t)\n-\t\t\t\t);\n-\t\t\t\tif (moduleGraph.isAsync(importedModule)) hash.update(\"async\");\n-\t\t\t}\n-\t\t\tif (runtimeTemplate) {\n-\t\t\t\tconst runtimeRequirements = new Set();\n-\t\t\t\thash.update(\n-\t\t\t\t\truntimeTemplate.runtimeConditionExpression({\n-\t\t\t\t\t\tchunkGraph,\n-\t\t\t\t\t\truntimeCondition: filterRuntime(runtime, runtime => {\n-\t\t\t\t\t\t\treturn connection.isTargetActive(runtime);\n-\t\t\t\t\t\t}),\n-\t\t\t\t\t\truntime,\n-\t\t\t\t\t\truntimeRequirements\n-\t\t\t\t\t})\n-\t\t\t\t);\n-\t\t\t\tfor (const rr of runtimeRequirements) hash.update(rr);\n-\t\t\t}\n-\t\t}\n-\t}\n-\n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.sourceOrder);"
      },
      {
        "sha": "0d8633e22ec3615322dd2a5dbf6c6ba522bb5d4b",
        "filename": "lib/dependencies/HarmonyImportSpecifierDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 19,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -181,25 +181,6 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\treturn 0;\n \t}\n \n-\t/**\n-\t * Update the hash\n-\t * @param {Hash} hash hash to be updated\n-\t * @param {UpdateHashContext} context context\n-\t * @returns {void}\n-\t */\n-\tupdateHash(hash, context) {\n-\t\tconst { chunkGraph, runtime } = context;\n-\t\tsuper.updateHash(hash, context);\n-\t\tconst moduleGraph = chunkGraph.moduleGraph;\n-\t\tconst importedModule = moduleGraph.getModule(this);\n-\t\tconst ids = this.getIds(moduleGraph);\n-\t\thash.update(ids.join());\n-\t\tif (importedModule) {\n-\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(importedModule);\n-\t\t\thash.update(`${exportsInfo.getUsedName(ids, runtime)}`);\n-\t\t}\n-\t}\n-\n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.ids);"
      },
      {
        "sha": "fbaf9dbeb048c4559c1545e346134af411f0cebf",
        "filename": "lib/dependencies/JsonExportsDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FJsonExportsDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FJsonExportsDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FJsonExportsDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -73,7 +73,6 @@ class JsonExportsDependency extends NullDependency {\n \t */\n \tupdateHash(hash, context) {\n \t\thash.update(this.exports ? JSON.stringify(this.exports) : \"undefined\");\n-\t\tsuper.updateHash(hash, context);\n \t}\n \n \tserialize(context) {"
      },
      {
        "sha": "cd0248437b3c32098a75289677da77ab69f99aeb",
        "filename": "lib/dependencies/ModuleDecoratorDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FModuleDecoratorDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FModuleDecoratorDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleDecoratorDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -69,7 +69,6 @@ class ModuleDecoratorDependency extends NullDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\tsuper.updateHash(hash, context);\n \t\thash.update(this.decorator);\n \t\thash.update(`${this.allowExportsAccess}`);\n \t}"
      },
      {
        "sha": "a18c25d4fa7fddf9e32d575ce15d30f293a50f79",
        "filename": "lib/dependencies/NullDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FNullDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FNullDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FNullDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -20,14 +20,6 @@ class NullDependency extends Dependency {\n \t\treturn \"null\";\n \t}\n \n-\t/**\n-\t * Update the hash\n-\t * @param {Hash} hash hash to be updated\n-\t * @param {UpdateHashContext} context context\n-\t * @returns {void}\n-\t */\n-\tupdateHash(hash, context) {}\n-\n \tserialize({ write }) {\n \t\twrite(this.loc);\n \t}"
      },
      {
        "sha": "2362e3a0df910817a921713d9cbc9b01f1e1df02",
        "filename": "lib/dependencies/ProvidedDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FProvidedDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FProvidedDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FProvidedDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -51,7 +51,6 @@ class ProvidedDependency extends ModuleDependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n-\t\tsuper.updateHash(hash, context);\n \t\thash.update(this.identifier);\n \t\thash.update(this.path ? this.path.join(\",\") : \"null\");\n \t}"
      },
      {
        "sha": "d58e3286de47ad2c5d3adc10260e8394b28b2428",
        "filename": "lib/dependencies/StaticExportsDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 12,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FStaticExportsDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fdependencies%2FStaticExportsDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FStaticExportsDependency.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -43,18 +43,6 @@ class StaticExportsDependency extends NullDependency {\n \t\t};\n \t}\n \n-\t/**\n-\t * Update the hash\n-\t * @param {Hash} hash hash to be updated\n-\t * @param {UpdateHashContext} context context\n-\t * @returns {void}\n-\t */\n-\tupdateHash(hash, context) {\n-\t\thash.update(JSON.stringify(this.exports));\n-\t\tif (this.canMangle) hash.update(\"canMangle\");\n-\t\tsuper.updateHash(hash, context);\n-\t}\n-\n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.exports);"
      },
      {
        "sha": "766a958ee99dc6fb16b93d1ed5ffbaccd6a9ab75",
        "filename": "lib/optimize/ConcatenatedModule.js",
        "status": "modified",
        "additions": 0,
        "deletions": 12,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Foptimize%2FConcatenatedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Foptimize%2FConcatenatedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FConcatenatedModule.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -1650,18 +1650,6 @@ ${defineGetters}`\n \t\t}\n \t}\n \n-\t/**\n-\t * @param {ChunkGraph} chunkGraph the chunk graph\n-\t * @param {DependencyTemplates} dependencyTemplates dependency templates\n-\t * @param {RuntimeSpec} runtime the runtime\n-\t * @returns {string} hash\n-\t */\n-\t_getHashDigest(chunkGraph, dependencyTemplates, runtime) {\n-\t\tconst hash = chunkGraph.getModuleHash(this, runtime);\n-\t\tconst dtHash = dependencyTemplates.getHash();\n-\t\treturn `${hash}-${dtHash}`;\n-\t}\n-\n \t/**\n \t * @param {ModuleGraph} moduleGraph the module graph\n \t * @param {RuntimeSpec} runtime the runtime"
      },
      {
        "sha": "d294672d6f3c72b0742073153f0abeaf8cc5d096",
        "filename": "lib/stats/DefaultStatsPresetPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fstats%2FDefaultStatsPresetPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Fstats%2FDefaultStatsPresetPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsPresetPlugin.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -48,6 +48,7 @@ const NAMED_PRESETS = {\n \t\truntimeModules: true,\n \t\texclude: false,\n \t\tmodulesSpace: Infinity,\n+\t\tchunkModulesSpace: Infinity,\n \t\tassetsSpace: Infinity,\n \t\tchildren: true\n \t},"
      },
      {
        "sha": "c87b93b71ba2e6991fd3a44df8f6c1508c7683b7",
        "filename": "lib/util/MapHelpers.js",
        "status": "added",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Futil%2FMapHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Futil%2FMapHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FMapHelpers.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,22 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+/**\n+ * @template K\n+ * @template V\n+ * @param {Map<K, V>} map a map\n+ * @param {K} key the key\n+ * @param {function(): V} computer compute value\n+ * @returns {V} value\n+ */\n+exports.provide = (map, key, computer) => {\n+\tconst value = map.get(key);\n+\tif (value !== undefined) return value;\n+\tconst newValue = computer();\n+\tmap.set(key, newValue);\n+\treturn newValue;\n+};"
      },
      {
        "sha": "bbabc61306cfc9544c6fd3f9851d453cd9036fd4",
        "filename": "lib/util/createHash.js",
        "status": "modified",
        "additions": 13,
        "deletions": 7,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Futil%2FcreateHash.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Futil%2FcreateHash.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FcreateHash.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -7,9 +7,11 @@\n \n const Hash = require(\"./Hash\");\n \n-const BULK_SIZE = 1000;\n+const BULK_SIZE = 2000;\n \n-const digestCache = new Map();\n+// We are using an object instead of a Map as this will stay static during the runtime\n+// so access to it can be optimized by v8\n+const digestCaches = {};\n \n class BulkUpdateDecorator extends Hash {\n \t/**\n@@ -64,11 +66,15 @@ class BulkUpdateDecorator extends Hash {\n \t * @returns {string|Buffer} digest\n \t */\n \tdigest(encoding) {\n-\t\tlet cacheKey;\n+\t\tlet digestCache;\n \t\tif (this.hash === undefined) {\n \t\t\t// short data for hash, we can use caching\n-\t\t\tcacheKey = `${this.hashKey}-${encoding}-${this.buffer}`;\n-\t\t\tconst cacheEntry = digestCache.get(cacheKey);\n+\t\t\tconst cacheKey = `${this.hashKey}-${encoding}`;\n+\t\t\tdigestCache = digestCaches[cacheKey];\n+\t\t\tif (digestCache === undefined) {\n+\t\t\t\tdigestCache = digestCaches[cacheKey] = new Map();\n+\t\t\t}\n+\t\t\tconst cacheEntry = digestCache.get(this.buffer);\n \t\t\tif (cacheEntry !== undefined) return cacheEntry;\n \t\t\tthis.hash = this.hashFactory();\n \t\t}\n@@ -78,8 +84,8 @@ class BulkUpdateDecorator extends Hash {\n \t\tconst digestResult = this.hash.digest(encoding);\n \t\tconst result =\n \t\t\ttypeof digestResult === \"string\" ? digestResult : digestResult.toString();\n-\t\tif (cacheKey !== undefined) {\n-\t\t\tdigestCache.set(cacheKey, result);\n+\t\tif (digestCache !== undefined) {\n+\t\t\tdigestCache.set(this.buffer, result);\n \t\t}\n \t\treturn result;\n \t}"
      },
      {
        "sha": "cd00620f070f7247a9567259a1552a7bdf6d059b",
        "filename": "lib/util/runtime.js",
        "status": "modified",
        "additions": 12,
        "deletions": 1,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Futil%2Fruntime.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/lib%2Futil%2Fruntime.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Fruntime.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -54,14 +54,16 @@ exports.getEntryRuntime = (compilation, name, options) => {\n /**\n  * @param {RuntimeSpec} runtime runtime\n  * @param {function(string): void} fn functor\n+ * @param {boolean} deterministicOrder enforce a deterministic order\n  * @returns {void}\n  */\n-exports.forEachRuntime = (runtime, fn) => {\n+exports.forEachRuntime = (runtime, fn, deterministicOrder = false) => {\n \tif (runtime === undefined) {\n \t\tfn(undefined);\n \t} else if (typeof runtime === \"string\") {\n \t\tfn(runtime);\n \t} else {\n+\t\tif (deterministicOrder) runtime.sort();\n \t\tfor (const r of runtime) {\n \t\t\tfn(r);\n \t\t}\n@@ -448,6 +450,15 @@ class RuntimeSpecMap {\n \t\tthis._map.set(getRuntimeKey(runtime), value);\n \t}\n \n+\tprovide(runtime, computer) {\n+\t\tconst key = getRuntimeKey(runtime);\n+\t\tconst value = this._map.get(key);\n+\t\tif (value !== undefined) return value;\n+\t\tconst newValue = computer();\n+\t\tthis._map.set(key, newValue);\n+\t\treturn newValue;\n+\t}\n+\n \tdelete(runtime) {\n \t\tthis._map.delete(getRuntimeKey(runtime));\n \t}"
      },
      {
        "sha": "cb30887f2bff85fc7c47757f174452c316be576a",
        "filename": "test/WatchTestCases.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FWatchTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FWatchTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FWatchTestCases.test.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -197,6 +197,7 @@ describe(\"WatchTestCases\", () => {\n \t\t\t\t\t\t\t\t\t\t\tpreset: \"verbose\",\n \t\t\t\t\t\t\t\t\t\t\tcached: true,\n \t\t\t\t\t\t\t\t\t\t\tcachedAssets: true,\n+\t\t\t\t\t\t\t\t\t\t\tcachedModules: true,\n \t\t\t\t\t\t\t\t\t\t\tcolors: false\n \t\t\t\t\t\t\t\t\t\t};\n \t\t\t\t\t\t\t\t\t\tfs.mkdirSync(outputDirectory, { recursive: true });"
      },
      {
        "sha": "a6067e3e6db788929b45f1274aed7baa0a6fd7f7",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 116,
        "deletions": 92,
        "changes": 208,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -3,121 +3,121 @@\n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n \"fitting:\n   PublicPath: auto\n-  asset fitting-1e3d9e2613ff95528777.js 16 KiB [emitted] [immutable]\n-  asset fitting-1bcc27c827d1564d3703.js 1.9 KiB [emitted] [immutable]\n-  asset fitting-b993a079b21885c8fe58.js 1.9 KiB [emitted] [immutable]\n-  asset fitting-0774b7847a706e47b664.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.8 KiB = fitting-1bcc27c827d1564d3703.js 1.9 KiB fitting-b993a079b21885c8fe58.js 1.9 KiB fitting-1e3d9e2613ff95528777.js 16 KiB\n-  chunk (runtime: main) fitting-1e3d9e2613ff95528777.js 1.87 KiB (javascript) 8.78 KiB (runtime) [entry] [rendered]\n+  asset fitting-651c6c406dfa2495bd52.js 16 KiB [emitted] [immutable]\n+  asset fitting-81fdd4d134979a9eff04.js 1.9 KiB [emitted] [immutable]\n+  asset fitting-e41a3d89ffdb1cb7ce16.js 1.9 KiB [emitted] [immutable]\n+  asset fitting-a1f9ac66e64370ec1073.js 1.08 KiB [emitted] [immutable]\n+  Entrypoint main 19.8 KiB = fitting-81fdd4d134979a9eff04.js 1.9 KiB fitting-e41a3d89ffdb1cb7ce16.js 1.9 KiB fitting-651c6c406dfa2495bd52.js 16 KiB\n+  chunk (runtime: main) fitting-651c6c406dfa2495bd52.js 1.87 KiB (javascript) 8.78 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.78 KiB 10 modules\n     cacheable modules 1.87 KiB\n       ./e.js 899 bytes [dependent] [built] [code generated]\n       ./f.js 900 bytes [dependent] [built] [code generated]\n       ./index.js 111 bytes [built] [code generated]\n-  chunk (runtime: main) fitting-b993a079b21885c8fe58.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) fitting-e41a3d89ffdb1cb7ce16.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./c.js 899 bytes [built] [code generated]\n     ./d.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) fitting-1bcc27c827d1564d3703.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) fitting-81fdd4d134979a9eff04.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./a.js 899 bytes [built] [code generated]\n     ./b.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) fitting-0774b7847a706e47b664.js 916 bytes [rendered]\n+  chunk (runtime: main) fitting-a1f9ac66e64370ec1073.js 916 bytes [rendered]\n     > ./g ./index.js 7:0-13\n     ./g.js 916 bytes [built] [code generated]\n   fitting (webpack x.x.x) compiled successfully in X ms\n \n content-change:\n   PublicPath: auto\n-  asset content-change-e8038392bcd8bd94d7ee.js 16 KiB [emitted] [immutable]\n-  asset content-change-1bcc27c827d1564d3703.js 1.9 KiB [emitted] [immutable]\n-  asset content-change-b993a079b21885c8fe58.js 1.9 KiB [emitted] [immutable]\n-  asset content-change-0774b7847a706e47b664.js 1.08 KiB [emitted] [immutable]\n-  Entrypoint main 19.9 KiB = content-change-1bcc27c827d1564d3703.js 1.9 KiB content-change-b993a079b21885c8fe58.js 1.9 KiB content-change-e8038392bcd8bd94d7ee.js 16 KiB\n-  chunk (runtime: main) content-change-e8038392bcd8bd94d7ee.js 1.87 KiB (javascript) 8.78 KiB (runtime) [entry] [rendered]\n+  asset content-change-556bc15bdc30b799d903.js 16 KiB [emitted] [immutable]\n+  asset content-change-81fdd4d134979a9eff04.js 1.9 KiB [emitted] [immutable]\n+  asset content-change-e41a3d89ffdb1cb7ce16.js 1.9 KiB [emitted] [immutable]\n+  asset content-change-a1f9ac66e64370ec1073.js 1.08 KiB [emitted] [immutable]\n+  Entrypoint main 19.9 KiB = content-change-81fdd4d134979a9eff04.js 1.9 KiB content-change-e41a3d89ffdb1cb7ce16.js 1.9 KiB content-change-556bc15bdc30b799d903.js 16 KiB\n+  chunk (runtime: main) content-change-556bc15bdc30b799d903.js 1.87 KiB (javascript) 8.78 KiB (runtime) [entry] [rendered]\n     > ./index main\n     runtime modules 8.78 KiB 10 modules\n     cacheable modules 1.87 KiB\n       ./e.js 899 bytes [dependent] [built] [code generated]\n       ./f.js 900 bytes [dependent] [built] [code generated]\n       ./index.js 111 bytes [built] [code generated]\n-  chunk (runtime: main) content-change-b993a079b21885c8fe58.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) content-change-e41a3d89ffdb1cb7ce16.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./c.js 899 bytes [built] [code generated]\n     ./d.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) content-change-1bcc27c827d1564d3703.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+  chunk (runtime: main) content-change-81fdd4d134979a9eff04.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n     > ./index main\n     ./a.js 899 bytes [built] [code generated]\n     ./b.js 899 bytes [built] [code generated]\n-  chunk (runtime: main) content-change-0774b7847a706e47b664.js 916 bytes [rendered]\n+  chunk (runtime: main) content-change-a1f9ac66e64370ec1073.js 916 bytes [rendered]\n     > ./g ./index.js 7:0-13\n     ./g.js 916 bytes [built] [code generated]\n   content-change (webpack x.x.x) compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n \"PublicPath: auto\n-asset f744e0e7c7d8d4c4c9c3.js 11.6 KiB [emitted] [immutable] (name: main)\n-asset 95f6c9e223fe52d2c61c.js 1.91 KiB [emitted] [immutable]\n-asset 7e706b5f05f0fc798d98.js 1.91 KiB [emitted] [immutable]\n-asset 33bae5032b6d590a0460.js 1.9 KiB [emitted] [immutable]\n-asset df46492dc5950ab1e1cf.js 1.9 KiB [emitted] [immutable]\n-asset 6ba144b816cd9ef0e99c.js 1.9 KiB [emitted] [immutable]\n-asset b949539bb8d61317ac2f.js 1.9 KiB [emitted] [immutable]\n-asset b993a079b21885c8fe58.js 1.9 KiB [emitted] [immutable]\n-asset ddea22d99afc20447b50.js 1.9 KiB [emitted] [immutable]\n-asset 231393e27a139e7d96e1.js 1010 bytes [emitted] [immutable]\n-asset 9c8bbdffc2a1a9125e6c.js 1010 bytes [emitted] [immutable]\n-asset e156080e73721dfb8a7a.js 1010 bytes [emitted] [immutable]\n-Entrypoint main 11.6 KiB = f744e0e7c7d8d4c4c9c3.js\n-chunk (runtime: main) b993a079b21885c8fe58.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+asset 2900fe34f0d2e57a8d56.js 11.6 KiB [emitted] [immutable] (name: main)\n+asset 1e20e43d71572fd13c1b.js 1.91 KiB [emitted] [immutable]\n+asset c0a3c4cd82f060e0e54a.js 1.91 KiB [emitted] [immutable]\n+asset 0e1e0b1075aee0f68fe0.js 1.9 KiB [emitted] [immutable]\n+asset de0767714e01acfd7d49.js 1.9 KiB [emitted] [immutable]\n+asset 188e3180c5f9c227c9cb.js 1.9 KiB [emitted] [immutable]\n+asset 5aa03d6f3b4f74da40b4.js 1.9 KiB [emitted] [immutable]\n+asset 8a195d4bfdb7b7cd9eb0.js 1.9 KiB [emitted] [immutable]\n+asset e41a3d89ffdb1cb7ce16.js 1.9 KiB [emitted] [immutable]\n+asset 192fb87c431c15998731.js 1010 bytes [emitted] [immutable]\n+asset 3a4b04cd876597b95e48.js 1010 bytes [emitted] [immutable]\n+asset 5c4979681019b2c11ce8.js 1010 bytes [emitted] [immutable]\n+Entrypoint main 11.6 KiB = 2900fe34f0d2e57a8d56.js\n+chunk (runtime: main) e41a3d89ffdb1cb7ce16.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./c ./d ./e ./index.js 3:0-30\n   ./c.js 899 bytes [built] [code generated]\n   ./d.js 899 bytes [built] [code generated]\n-chunk (runtime: main) f744e0e7c7d8d4c4c9c3.js (main) 248 bytes (javascript) 6.33 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) 2900fe34f0d2e57a8d56.js (main) 248 bytes (javascript) 6.33 KiB (runtime) [entry] [rendered]\n   > ./index main\n   runtime modules 6.33 KiB 7 modules\n   ./index.js 248 bytes [built] [code generated]\n-chunk (runtime: main) 95f6c9e223fe52d2c61c.js 1.76 KiB [rendered]\n+chunk (runtime: main) 1e20e43d71572fd13c1b.js 1.76 KiB [rendered]\n   > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n   ./j.js 901 bytes [built] [code generated]\n   ./k.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 9c8bbdffc2a1a9125e6c.js 899 bytes [rendered]\n+chunk (runtime: main) 5c4979681019b2c11ce8.js 899 bytes [rendered]\n   > ./c ./d ./e ./index.js 3:0-30\n   > ./b ./d ./e ./f ./g ./index.js 5:0-44\n   ./e.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 33bae5032b6d590a0460.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 0e1e0b1075aee0f68fe0.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./i.js 899 bytes [built] [code generated]\n   ./j.js 901 bytes [built] [code generated]\n-chunk (runtime: main) 7e706b5f05f0fc798d98.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) c0a3c4cd82f060e0e54a.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./e.js 899 bytes [built] [code generated]\n   ./h.js 899 bytes [built] [code generated]\n-chunk (runtime: main) b949539bb8d61317ac2f.js 1.76 KiB [rendered]\n+chunk (runtime: main) 8a195d4bfdb7b7cd9eb0.js 1.76 KiB [rendered]\n   > ./b ./c ./index.js 2:0-23\n   ./b.js 899 bytes [built] [code generated]\n   ./c.js 899 bytes [built] [code generated]\n-chunk (runtime: main) ddea22d99afc20447b50.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 5aa03d6f3b4f74da40b4.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n   ./h.js 899 bytes [built] [code generated]\n   ./i.js 899 bytes [built] [code generated]\n-chunk (runtime: main) df46492dc5950ab1e1cf.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) de0767714e01acfd7d49.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n   > ./b ./d ./e ./f ./g ./index.js 5:0-44\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./f.js 899 bytes [built] [code generated]\n   ./g.js 901 bytes [built] [code generated]\n-chunk (runtime: main) 231393e27a139e7d96e1.js 899 bytes [rendered]\n+chunk (runtime: main) 192fb87c431c15998731.js 899 bytes [rendered]\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./k.js 899 bytes [built] [code generated]\n-chunk (runtime: main) 6ba144b816cd9ef0e99c.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 188e3180c5f9c227c9cb.js 1.76 KiB [rendered] [recorded] aggressive splitted\n   > ./b ./d ./e ./f ./g ./index.js 5:0-44\n   > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n   ./b.js 899 bytes [built] [code generated]\n   ./d.js 899 bytes [built] [code generated]\n-chunk (runtime: main) e156080e73721dfb8a7a.js 899 bytes [rendered]\n+chunk (runtime: main) 3a4b04cd876597b95e48.js 899 bytes [rendered]\n   > ./a ./index.js 1:0-16\n   ./a.js 899 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\"\n@@ -656,19 +656,19 @@ webpack x.x.x compiled successfully in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"asset app.d5849d2643b9103fe821-1.js 6.16 KiB [emitted] [immutable] (name: app)\n-asset vendor.d47f20e8540ab8acac9c-1.js 611 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.75 KiB = vendor.d47f20e8540ab8acac9c-1.js 611 bytes app.d5849d2643b9103fe821-1.js 6.16 KiB\n+\"asset app.6501900e8276ea2396d5-1.js 6.16 KiB [emitted] [immutable] (name: app)\n+asset vendor.445bee2044cf472e1ee5-1.js 611 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n+Entrypoint app 6.75 KiB = vendor.445bee2044cf472e1ee5-1.js 611 bytes app.6501900e8276ea2396d5-1.js 6.16 KiB\n runtime modules 2.87 KiB 3 modules\n orphan modules 118 bytes [orphan] 2 modules\n cacheable modules 272 bytes\n   ./entry-1.js + 2 modules 185 bytes [built] [code generated]\n   ./constants.js 87 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset app.f3db1f3f7ded85397e40-2.js 6.17 KiB [emitted] [immutable] (name: app)\n-asset vendor.d47f20e8540ab8acac9c-2.js 611 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-Entrypoint app 6.77 KiB = vendor.d47f20e8540ab8acac9c-2.js 611 bytes app.f3db1f3f7ded85397e40-2.js 6.17 KiB\n+asset app.fc302b6af723e5d0d9f1-2.js 6.17 KiB [emitted] [immutable] (name: app)\n+asset vendor.445bee2044cf472e1ee5-2.js 611 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n+Entrypoint app 6.77 KiB = vendor.445bee2044cf472e1ee5-2.js 611 bytes app.fc302b6af723e5d0d9f1-2.js 6.17 KiB\n runtime modules 2.87 KiB 3 modules\n orphan modules 125 bytes [orphan] 2 modules\n cacheable modules 279 bytes\n@@ -698,39 +698,39 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"asset main-a99c4b0415661253dc84.js 10.4 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-a99c4b0415661253dc84.js.map 9.31 KiB [emitted] [dev] (auxiliary name: main)\n-asset 664-3ff01e96ecafa7f78b72.js 455 bytes [emitted] [immutable]\n-  sourceMap 664-3ff01e96ecafa7f78b72.js.map 344 bytes [emitted] [dev]\n+\"asset main-d0873f99928b940b391c.js 10.4 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-d0873f99928b940b391c.js.map 9.31 KiB [emitted] [dev] (auxiliary name: main)\n+asset 664-d4657a55a9eb4278f79f.js 455 bytes [emitted] [immutable]\n+  sourceMap 664-d4657a55a9eb4278f79f.js.map 344 bytes [emitted] [dev]\n runtime modules 6.31 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-a99c4b0415661253dc84.js 10.4 KiB [emitted] [immutable] (name: main)\n-  sourceMap main-a99c4b0415661253dc84.js.map 9.31 KiB [emitted] [dev] (auxiliary name: main)\n-asset 664-3ff01e96ecafa7f78b72.js 455 bytes [emitted] [immutable]\n-  sourceMap 664-3ff01e96ecafa7f78b72.js.map 344 bytes [emitted] [dev]\n+asset main-d0873f99928b940b391c.js 10.4 KiB [emitted] [immutable] (name: main)\n+  sourceMap main-d0873f99928b940b391c.js.map 9.31 KiB [emitted] [dev] (auxiliary name: main)\n+asset 664-d4657a55a9eb4278f79f.js 455 bytes [emitted] [immutable]\n+  sourceMap 664-d4657a55a9eb4278f79f.js.map 344 bytes [emitted] [dev]\n runtime modules 6.31 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./b/index.js 40 bytes [built] [code generated]\n   ./b/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-32f3b12dcedee5e61c4a.js 11.3 KiB [emitted] [immutable] (name: main)\n-asset 664-9b0875d15bd23acf607c.js 1.5 KiB [emitted] [immutable]\n+asset main-1128d87998ce889ee575.js 11.3 KiB [emitted] [immutable] (name: main)\n+asset 664-1c825c5a8359323d098a.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.31 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n   ./a/index.js 40 bytes [built] [code generated]\n   ./a/chunk.js + 1 modules 66 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset main-32f3b12dcedee5e61c4a.js 11.3 KiB [emitted] [immutable] (name: main)\n-asset 664-9b0875d15bd23acf607c.js 1.5 KiB [emitted] [immutable]\n+asset main-1128d87998ce889ee575.js 11.3 KiB [emitted] [immutable] (name: main)\n+asset 664-1c825c5a8359323d098a.js 1.5 KiB [emitted] [immutable]\n runtime modules 6.31 KiB 8 modules\n orphan modules 19 bytes [orphan] 1 module\n cacheable modules 106 bytes\n@@ -925,8 +925,8 @@ webpack x.x.x compiled with 2 warnings in X ms\"\n `;\n \n exports[`StatsTestCases should print correct stats for immutable 1`] = `\n-\"asset 891cf719145527e9bc8a.js 13 KiB [emitted] [immutable] (name: main)\n-asset fb6af8aa7f2f734e1bc5.js 809 bytes [emitted] [immutable]\"\n+\"asset 8b361f531f9461866398.js 13 KiB [emitted] [immutable] (name: main)\n+asset e85b93346c5afc5a4ef8.js 809 bytes [emitted] [immutable]\"\n `;\n \n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n@@ -982,32 +982,32 @@ webpack x.x.x compiled with 3 warnings\"\n `;\n \n exports[`StatsTestCases should print correct stats for issue-7577 1`] = `\n-\"asset a-runtime~main-940cd58bf7f4aa5bfd13.js 5.18 KiB [emitted] [immutable] (name: runtime~main)\n-asset a-all-a_js-b09ec1eaeb33c1b6a973.js 140 bytes [emitted] [immutable] (id hint: all)\n+\"asset a-runtime~main-c31caa6b71d7c7e6bfe1.js 5.18 KiB [emitted] [immutable] (name: runtime~main)\n+asset a-all-a_js-24b3a36b0bcd8b148576.js 140 bytes [emitted] [immutable] (id hint: all)\n asset a-main-b1eee3373fffb0185d2b.js 114 bytes [emitted] [immutable] (name: main)\n-Entrypoint main 5.42 KiB = a-runtime~main-940cd58bf7f4aa5bfd13.js 5.18 KiB a-all-a_js-b09ec1eaeb33c1b6a973.js 140 bytes a-main-b1eee3373fffb0185d2b.js 114 bytes\n+Entrypoint main 5.42 KiB = a-runtime~main-c31caa6b71d7c7e6bfe1.js 5.18 KiB a-all-a_js-24b3a36b0bcd8b148576.js 140 bytes a-main-b1eee3373fffb0185d2b.js 114 bytes\n runtime modules 2.57 KiB 2 modules\n ./a.js 18 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n-asset b-runtime~main-9540cab94d47809045d1.js 6.11 KiB [emitted] [immutable] (name: runtime~main)\n-asset b-all-b_js-a1898b0836bf79904e00.js 475 bytes [emitted] [immutable] (id hint: all)\n-asset b-vendors-node_modules_vendor_js-8312cbaa60f0829f9942.js 185 bytes [emitted] [immutable] (id hint: vendors)\n+asset b-runtime~main-500d2b490933962060fe.js 6.11 KiB [emitted] [immutable] (name: runtime~main)\n+asset b-all-b_js-8a88ef1b2a10719b18de.js 475 bytes [emitted] [immutable] (id hint: all)\n+asset b-vendors-node_modules_vendor_js-87b185096f3c2c34e4cc.js 185 bytes [emitted] [immutable] (id hint: vendors)\n asset b-main-0780253982d2b99627d2.js 147 bytes [emitted] [immutable] (name: main)\n-Entrypoint main 6.9 KiB = b-runtime~main-9540cab94d47809045d1.js 6.11 KiB b-vendors-node_modules_vendor_js-8312cbaa60f0829f9942.js 185 bytes b-all-b_js-a1898b0836bf79904e00.js 475 bytes b-main-0780253982d2b99627d2.js 147 bytes\n+Entrypoint main 6.9 KiB = b-runtime~main-500d2b490933962060fe.js 6.11 KiB b-vendors-node_modules_vendor_js-87b185096f3c2c34e4cc.js 185 bytes b-all-b_js-8a88ef1b2a10719b18de.js 475 bytes b-main-0780253982d2b99627d2.js 147 bytes\n runtime modules 3.13 KiB 4 modules\n cacheable modules 40 bytes\n   ./b.js 17 bytes [built] [code generated]\n   ./node_modules/vendor.js 23 bytes [built] [code generated]\n webpack x.x.x compiled successfully in X ms\n \n assets by chunk 895 bytes (id hint: all)\n-  asset c-all-b_js-dc3c6087ec7f68d726e7.js 502 bytes [emitted] [immutable] (id hint: all)\n-  asset c-all-c_js-0a8ce0d1bd0a1806e2fe.js 393 bytes [emitted] [immutable] (id hint: all)\n-asset c-runtime~main-46d8f6a78c85ee502fc2.js 13.8 KiB [emitted] [immutable] (name: runtime~main)\n-asset c-main-142c4b047af79cfa6bbd.js 603 bytes [emitted] [immutable] (name: main)\n-asset c-vendors-node_modules_vendor_js-8312cbaa60f0829f9942.js 185 bytes [emitted] [immutable] (id hint: vendors)\n-Entrypoint main 14.8 KiB = c-runtime~main-46d8f6a78c85ee502fc2.js 13.8 KiB c-all-c_js-0a8ce0d1bd0a1806e2fe.js 393 bytes c-main-142c4b047af79cfa6bbd.js 603 bytes\n+  asset c-all-b_js-efcfde93406c664055f2.js 502 bytes [emitted] [immutable] (id hint: all)\n+  asset c-all-c_js-f089b995f31645508ed6.js 393 bytes [emitted] [immutable] (id hint: all)\n+asset c-runtime~main-89d530ce533830fc4ad5.js 13.8 KiB [emitted] [immutable] (name: runtime~main)\n+asset c-main-77a0c713b09701f50ccd.js 603 bytes [emitted] [immutable] (name: main)\n+asset c-vendors-node_modules_vendor_js-87b185096f3c2c34e4cc.js 185 bytes [emitted] [immutable] (id hint: vendors)\n+Entrypoint main 14.8 KiB = c-runtime~main-89d530ce533830fc4ad5.js 13.8 KiB c-all-c_js-f089b995f31645508ed6.js 393 bytes c-main-77a0c713b09701f50ccd.js 603 bytes\n runtime modules 8.83 KiB 12 modules\n cacheable modules 101 bytes\n   ./c.js 61 bytes [built] [code generated]\n@@ -1122,6 +1122,7 @@ asset <CLR=32,BOLD>main.js</CLR> 54 bytes <CLR=32,BOLD>[emitted]</CLR> (name: ma\n <CLR=BOLD>LOG from webpack.Compilation</CLR>\n     <CLR=BOLD>1 modules hashed (1 variants per module in average)</CLR>\n     <CLR=BOLD>100% code generated (1 generated, 0 from cache)</CLR>\n+    <CLR=BOLD>NaN% code generated (0 generated, 0 from cache)</CLR>\n + 19 hidden lines\n \n <CLR=BOLD>LOG from webpack.buildChunkGraph</CLR>\n@@ -1871,6 +1872,7 @@ LOG from webpack.FlagDependencyExportsPlugin\n LOG from webpack.Compilation\n     6 modules hashed (1 variants per module in average)\n     100% code generated (6 generated, 0 from cache)\n+    100% code generated (7 generated, 0 from cache)\n + 19 hidden lines\n \n LOG from webpack.buildChunkGraph\n@@ -1890,7 +1892,7 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (616f694e9b3f7a8615d7)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (2a64d4ead6e9d518ad6c)\"\n `;\n \n exports[`StatsTestCases should print correct stats for preset-errors-only 1`] = `\"\"`;\n@@ -2069,7 +2071,28 @@ asset 996.js 138 bytes {996} [emitted]\n Entrypoint main 10.1 KiB = main.js\n chunk {179} (runtime: main) main.js (main) 73 bytes (javascript) 6.01 KiB (runtime) >{460}< >{996}< [entry] [rendered]\n   > ./index main\n-  runtime modules 6.01 KiB 7 modules\n+  runtime modules 6.01 KiB\n+    webpack/runtime/ensure chunk 326 bytes {179} [code generated]\n+      [no exports]\n+      [used exports unknown]\n+    webpack/runtime/get javascript chunk filename 167 bytes {179} [code generated]\n+      [no exports]\n+      [used exports unknown]\n+    webpack/runtime/global 221 bytes {179} [code generated]\n+      [no exports]\n+      [used exports unknown]\n+    webpack/runtime/hasOwnProperty shorthand 86 bytes {179} [code generated]\n+      [no exports]\n+      [used exports unknown]\n+    webpack/runtime/jsonp chunk loading 3.02 KiB {179} [code generated]\n+      [no exports]\n+      [used exports unknown]\n+    webpack/runtime/load script 1.36 KiB {179} [code generated]\n+      [no exports]\n+      [used exports unknown]\n+    webpack/runtime/publicPath 867 bytes {179} [code generated]\n+      [no exports]\n+      [used exports unknown]\n   cacheable modules 73 bytes\n     ./a.js [847] 22 bytes {179} [depth 1] [dependent] [built] [code generated]\n       [used exports unknown]\n@@ -2180,6 +2203,7 @@ LOG from webpack.Compilation\n <t> hashing: hash digest: X ms\n <t> hashing: process full hash modules: X ms\n <t> hashing: X ms\n+    100% code generated (7 generated, 0 from cache)\n <t> record hash: X ms\n <t> module assets: X ms\n <t> create chunk assets: X ms\n@@ -2235,18 +2259,18 @@ LOG from webpack.FileSystemInfo\n     Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \n-1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (616f694e9b3f7a8615d7)\"\n+1970-04-20 12:42:42: webpack x.x.x compiled successfully in X ms (2a64d4ead6e9d518ad6c)\"\n `;\n \n exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \"a-normal:\n   assets by path *.js 3 KiB\n-    asset 4408ab3a86604e4c16e2-4408ab.js 2.61 KiB [emitted] [immutable] [minimized] (name: runtime~main)\n+    asset 18c2d7f22a461e1f021f-18c2d7.js 2.61 KiB [emitted] [immutable] [minimized] (name: runtime~main)\n     asset 3cc8faad16137711c07e-3cc8fa.js 210 bytes [emitted] [immutable] [minimized] (name: main)\n     asset b6f77787a670e97d47b5-b6f777.js 193 bytes [emitted] [immutable] [minimized] (name: lazy)\n   asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: main)\n-  Entrypoint main 2.81 KiB (5.89 KiB) = 4408ab3a86604e4c16e2-4408ab.js 2.61 KiB 3cc8faad16137711c07e-3cc8fa.js 210 bytes 1 auxiliary asset\n+  Entrypoint main 2.81 KiB (5.89 KiB) = 18c2d7f22a461e1f021f-18c2d7.js 2.61 KiB 3cc8faad16137711c07e-3cc8fa.js 210 bytes 1 auxiliary asset\n   runtime modules 7.37 KiB 8 modules\n   orphan modules 23 bytes [orphan] 1 module\n   cacheable modules 340 bytes (javascript) 20.4 KiB (asset)\n@@ -2260,12 +2284,12 @@ exports[`StatsTestCases should print correct stats for real-content-hash 1`] = `\n \n b-normal:\n   assets by path *.js 3 KiB\n-    asset b43f5614326bae5a6e28-b43f56.js 2.61 KiB [emitted] [immutable] [minimized] (name: runtime~main)\n+    asset 4408ab3a86604e4c16e2-4408ab.js 2.61 KiB [emitted] [immutable] [minimized] (name: runtime~main)\n     asset 3cc8faad16137711c07e-3cc8fa.js 210 bytes [emitted] [immutable] [minimized] (name: main)\n     asset b6f77787a670e97d47b5-b6f777.js 193 bytes [emitted] [immutable] [minimized] (name: lazy)\n   asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: main)\n-  Entrypoint main 2.81 KiB (5.89 KiB) = b43f5614326bae5a6e28-b43f56.js 2.61 KiB 3cc8faad16137711c07e-3cc8fa.js 210 bytes 1 auxiliary asset\n+  Entrypoint main 2.81 KiB (5.89 KiB) = 4408ab3a86604e4c16e2-4408ab.js 2.61 KiB 3cc8faad16137711c07e-3cc8fa.js 210 bytes 1 auxiliary asset\n   runtime modules 7.37 KiB 8 modules\n   orphan modules 19 bytes [orphan] 1 module\n   cacheable modules 295 bytes (javascript) 20.4 KiB (asset)\n@@ -2301,15 +2325,15 @@ a-source-map:\n \n b-source-map:\n   assets by path *.js 3.17 KiB\n-    asset fb3225ff81afeaa66787-fb3225.js 2.66 KiB [emitted] [immutable] [minimized] (name: runtime~main)\n-      sourceMap fb3225ff81afeaa66787-fb3225.js.map 14.4 KiB [emitted] [dev] (auxiliary name: runtime~main)\n+    asset ff44eb1f030374616671-ff44eb.js 2.66 KiB [emitted] [immutable] [minimized] (name: runtime~main)\n+      sourceMap ff44eb1f030374616671-ff44eb.js.map 14.4 KiB [emitted] [dev] (auxiliary name: runtime~main)\n     asset b8bfcec62cdd15c9a840-b8bfce.js 266 bytes [emitted] [immutable] [minimized] (name: main)\n       sourceMap b8bfcec62cdd15c9a840-b8bfce.js.map 323 bytes [emitted] [dev] (auxiliary name: main)\n     asset c7c0f8bb2e61b59a89f5-c7c0f8.js 249 bytes [emitted] [immutable] [minimized] (name: lazy)\n       sourceMap c7c0f8bb2e61b59a89f5-c7c0f8.js.map 327 bytes [emitted] [dev] (auxiliary name: lazy)\n   asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: file.png] (auxiliary name: lazy)\n   asset 7382fad5b015914e0811.jpg 5.89 KiB [emitted] [immutable] [from: file.jpg] (auxiliary name: main)\n-  Entrypoint main 2.92 KiB (20.6 KiB) = fb3225ff81afeaa66787-fb3225.js 2.66 KiB b8bfcec62cdd15c9a840-b8bfce.js 266 bytes 3 auxiliary assets\n+  Entrypoint main 2.92 KiB (20.6 KiB) = ff44eb1f030374616671-ff44eb.js 2.66 KiB b8bfcec62cdd15c9a840-b8bfce.js 266 bytes 3 auxiliary assets\n   runtime modules 7.37 KiB 8 modules\n   orphan modules 19 bytes [orphan] 1 module\n   cacheable modules 295 bytes (javascript) 20.4 KiB (asset)\n@@ -4154,12 +4178,12 @@ exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sy\n   asset 230.bundle.js 242 bytes [emitted]\n   asset 99.bundle.js 240 bytes [emitted]\n assets by path *.wasm 1.37 KiB\n-  asset 88265b28fc447b09acc0.module.wasm 531 bytes [emitted] [immutable]\n-  asset a03528a13f4b906d3696.module.wasm 290 bytes [emitted] [immutable]\n-  asset f33098dd7c2e5a9aafb8.module.wasm 156 bytes [emitted] [immutable]\n-  asset 1880be69ad9aa72c3d41.module.wasm 154 bytes [emitted] [immutable]\n-  asset e3b94e46bddb13499a21.module.wasm 154 bytes [emitted] [immutable]\n-  asset 27eb6405bf771edbf2bd.module.wasm 120 bytes [emitted] [immutable]\n+  asset 4098dd6bcb43bd54baf6.module.wasm 531 bytes [emitted] [immutable]\n+  asset c3c66cf69b0a4bd721a4.module.wasm 290 bytes [emitted] [immutable]\n+  asset 86fec7665231a0198df8.module.wasm 156 bytes [emitted] [immutable]\n+  asset 1da1d844c1509ed4d4c3.module.wasm 154 bytes [emitted] [immutable]\n+  asset 2be4d707a05b1f7313ca.module.wasm 154 bytes [emitted] [immutable]\n+  asset d1fdb94978c775bdc12a.module.wasm 120 bytes [emitted] [immutable]\n chunk (runtime: main) 99.bundle.js 50 bytes (javascript) 531 bytes (webassembly) [rendered]\n   ./duff.wasm 50 bytes (javascript) 531 bytes (webassembly) [built] [code generated]\n chunk (runtime: main) bundle.js (main) 586 bytes (javascript) 7.1 KiB (runtime) [entry] [rendered]"
      },
      {
        "sha": "02712e80f3e34c3885ab571f06d80ccfb95d8c81",
        "filename": "test/watchCases/cache/reexport-mangle/0/bar.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fbar.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fbar.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fbar.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,2 @@\n+export const bar = \"bar\";\n+export const bar2 = \"bar2\";"
      },
      {
        "sha": "fbbec29ce79aaf6f21f53d2cb111d39a02c866ff",
        "filename": "test/watchCases/cache/reexport-mangle/0/foo.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Ffoo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Ffoo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Ffoo.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,2 @@\n+export default \"foo\";\n+export const unused = \"foo2\";"
      },
      {
        "sha": "7e2d1f2292dd20bf71548ff3cb2c9a7bf16ca462",
        "filename": "test/watchCases/cache/reexport-mangle/0/index.js",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Findex.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,14 @@\n+import { foo, bar } from \"./module\";\n+import value from \"./other-user\";\n+\n+it(\"should invalidate when mangled name change\", () => {\n+\texpect(foo).toBe(\"foo\");\n+\texpect(bar).toBe(\"bar\");\n+\texpect(value).toBe(42);\n+});\n+\n+it(\"should invalidate when mangled name change (cjs)\", () => {\n+\texpect(require(\"./module-cjs\").foo).toBe(\"foo\");\n+\texpect(require(\"./module-cjs\").bar).toBe(\"bar\");\n+\texpect(value).toBe(42);\n+});"
      },
      {
        "sha": "bc7f96a1143019ccb645fad1ba24f19a84bf7465",
        "filename": "test/watchCases/cache/reexport-mangle/0/module-cjs.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-cjs.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-cjs.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-cjs.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,7 @@\n+var foo = require(\"./foo?cjs\").default;\n+exports.foo = foo;\n+var bar = require(\"./bar?cjs\").bar;\n+exports.bar = bar;\n+exports.baz = \"baz\";\n+\n+console.log.bind(console);"
      },
      {
        "sha": "8660f141af8d7546f027f351fea6f2b918c15d7b",
        "filename": "test/watchCases/cache/reexport-mangle/0/module-reexport-cjs.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-reexport-cjs.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-reexport-cjs.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-reexport-cjs.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,5 @@\n+exports.foo = require(\"./foo?reexport-cjs\").default;\n+exports.bar = require(\"./bar?reexport-cjs\").bar;\n+exports.baz = \"baz\";\n+\n+console.log.bind(console);"
      },
      {
        "sha": "8926a7937d77c9730e746f4f243a37adfb272fee",
        "filename": "test/watchCases/cache/reexport-mangle/0/module-reexport.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-reexport.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-reexport.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule-reexport.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,5 @@\n+export { default as foo } from \"./foo?reexport\";\n+export { bar } from \"./bar?reexport\";\n+export const baz = \"baz\";\n+\n+console.log.bind(console);"
      },
      {
        "sha": "4353d2074d82027af5d96d3aeb1927024f80381f",
        "filename": "test/watchCases/cache/reexport-mangle/0/module.js",
        "status": "added",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fmodule.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,8 @@\n+const ident = x => x;\n+import { default as fooImp } from \"./foo\";\n+export const foo = ident(fooImp);\n+import { bar as barImp } from \"./bar\";\n+export const bar = ident(barImp);\n+export const baz = \"baz\";\n+\n+console.log.bind(console);"
      },
      {
        "sha": "02e480d6741a1c5e62b8bead7f1b60ea4eaff5e9",
        "filename": "test/watchCases/cache/reexport-mangle/0/other-user.js",
        "status": "added",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fother-user.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fother-user.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F0%2Fother-user.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,12 @@\n+if (Math.random() < 0) {\n+\timport(\"./foo\");\n+\timport(\"./foo?cjs\");\n+\timport(\"./bar\");\n+\timport(\"./bar?cjs\");\n+\timport(\"./foo?reexport\");\n+\timport(\"./foo?reexport-cjs\");\n+\timport(\"./bar?reexport\");\n+\timport(\"./bar?reexport-cjs\");\n+}\n+\n+export default 42;"
      },
      {
        "sha": "f80bea5e0b9201dee32b177fcb752924dbc73ecc",
        "filename": "test/watchCases/cache/reexport-mangle/1/other-user.js",
        "status": "added",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F1%2Fother-user.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F1%2Fother-user.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F1%2Fother-user.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,8 @@\n+if (Math.random() < 0) {\n+\timport(\"./foo\");\n+\timport(\"./foo?cjs\");\n+\timport(\"./foo?reexport\");\n+\timport(\"./foo?reexport-cjs\");\n+}\n+\n+export default 42;"
      },
      {
        "sha": "7a4e8a723a40729b6e762041efee0922abd27bd9",
        "filename": "test/watchCases/cache/reexport-mangle/2/other-user.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F2%2Fother-user.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2F2%2Fother-user.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2F2%2Fother-user.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1 @@\n+export default 42;"
      },
      {
        "sha": "10396828746a8c5465169433f31b8c78835da7cc",
        "filename": "test/watchCases/cache/reexport-mangle/webpack.config.js",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/test%2FwatchCases%2Fcache%2Freexport-mangle%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Freexport-mangle%2Fwebpack.config.js?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -0,0 +1,14 @@\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\tmode: \"production\",\n+\tcache: {\n+\t\ttype: \"memory\"\n+\t},\n+\toutput: {\n+\t\tpathinfo: true\n+\t},\n+\toptimization: {\n+\t\tminimize: false,\n+\t\tconcatenateModules: false\n+\t}\n+};"
      },
      {
        "sha": "c7c87589076694f3fb8191512b68c52fd9443a50",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 26,
        "deletions": 2,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/349a5e395e083763c7245782d82cfdfb0cff160a/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/349a5e395e083763c7245782d82cfdfb0cff160a/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=349a5e395e083763c7245782d82cfdfb0cff160a",
        "patch": "@@ -799,6 +799,9 @@ declare class ChunkGraph {\n \tgetChunkFullHashModulesIterable(\n \t\tchunk: Chunk\n \t): undefined | Iterable<RuntimeModule>;\n+\tgetChunkFullHashModulesSet(\n+\t\tchunk: Chunk\n+\t): undefined | ReadonlySet<RuntimeModule>;\n \tgetChunkEntryModulesWithChunkGroupIterable(\n \t\tchunk: Chunk\n \t): Iterable<[Module, undefined | Entrypoint]>;\n@@ -833,6 +836,11 @@ declare class ChunkGraph {\n \t\truntime: RuntimeSpec\n \t): ReadonlySet<string>;\n \tgetChunkRuntimeRequirements(chunk: Chunk): ReadonlySet<string>;\n+\tgetModuleGraphHash(\n+\t\tmodule?: any,\n+\t\truntime?: any,\n+\t\twithConnections?: boolean\n+\t): any;\n \tgetTreeRuntimeRequirements(chunk: Chunk): ReadonlySet<string>;\n \tstatic getChunkGraphForModule(\n \t\tmodule: Module,\n@@ -1063,16 +1071,24 @@ declare interface CodeGenerationResult {\n \t * the runtime requirements\n \t */\n \truntimeRequirements: ReadonlySet<string>;\n+\n+\t/**\n+\t * a hash of the code generation result (will be automatically calculated from sources and runtimeRequirements if not provided)\n+\t */\n+\thash?: string;\n }\n declare abstract class CodeGenerationResults {\n \tmap: Map<Module, RuntimeSpecMap<CodeGenerationResult>>;\n+\thashes: Map<Module, RuntimeSpecMap<string>>;\n \tget(module: Module, runtime: RuntimeSpec): CodeGenerationResult;\n+\thas(module: Module, runtime: RuntimeSpec): boolean;\n \tgetSource(module: Module, runtime: RuntimeSpec, sourceType: string): Source;\n \tgetRuntimeRequirements(\n \t\tmodule: Module,\n \t\truntime: RuntimeSpec\n \t): ReadonlySet<string>;\n \tgetData(module: Module, runtime: RuntimeSpec, key: string): any;\n+\tgetHash(module: Module, runtime: RuntimeSpec): any;\n \tadd(module: Module, runtime: RuntimeSpec, result: CodeGenerationResult): void;\n }\n type CodeValue =\n@@ -1437,7 +1453,12 @@ declare class Compilation {\n \tsortItemsWithChunkIds(): void;\n \tsummarizeDependencies(): void;\n \tcreateModuleHashes(): void;\n-\tcreateHash(): void;\n+\tcreateHash(): {\n+\t\tmodule: Module;\n+\t\thash: string;\n+\t\truntime: RuntimeSpec;\n+\t\truntimes: RuntimeSpec[];\n+\t}[];\n \tfullHash?: string;\n \thash?: string;\n \temitAsset(file: string, source: Source, assetInfo?: AssetInfo): void;\n@@ -8728,6 +8749,7 @@ declare abstract class RuntimeSpecMap<T> {\n \tget(runtime: RuntimeSpec): T;\n \thas(runtime: RuntimeSpec): boolean;\n \tset(runtime?: any, value?: any): void;\n+\tprovide(runtime?: any, computer?: any): any;\n \tdelete(runtime?: any): void;\n \tupdate(runtime?: any, fn?: any): void;\n \tkeys(): RuntimeSpec[];\n@@ -10117,7 +10139,9 @@ declare class Template {\n \t): Source;\n \tstatic renderRuntimeModules(\n \t\truntimeModules: RuntimeModule[],\n-\t\trenderContext: RenderContextModuleTemplate\n+\t\trenderContext: RenderContextModuleTemplate & {\n+\t\t\tcodeGenerationResults?: CodeGenerationResults;\n+\t\t}\n \t): Source;\n \tstatic renderChunkRuntimeModules(\n \t\truntimeModules: RuntimeModule[],"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/11475",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/11475/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/11475/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/11475/events",
    "html_url": "https://github.com/webpack/webpack/pull/11475",
    "id": 701895515,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDg3MjY4MjQw",
    "number": 11475,
    "title": "Deprecated timestamps performance and deprecation",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-09-15T12:40:52Z",
    "updated_at": "2020-09-15T13:57:47Z",
    "closed_at": "2020-09-15T13:57:46Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/11475",
      "html_url": "https://github.com/webpack/webpack/pull/11475",
      "diff_url": "https://github.com/webpack/webpack/pull/11475.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/11475.patch",
      "merged_at": "2020-09-15T13:57:46Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nfixes #11443\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\ndeprecation, performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nIf there is any occurence of Module.needRebuild in the docs, this should be replaced with Module.needBuild\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/11475/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/11475/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "c4f1c41284f279bf94d41ae4e36fad6f08ace3e5",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 15,
        "deletions": 2,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -877,6 +877,9 @@ class FileSystemInfo {\n \t\t\tjoin(fs, p, \"_\").slice(0, -1)\n \t\t);\n \n+\t\tthis._cachedDeprecatedFileTimestamps = undefined;\n+\t\tthis._cachedDeprecatedContextTimestamps = undefined;\n+\n \t\tthis._statCreatedSnapshots = 0;\n \t\tthis._statTestedSnapshotsCached = 0;\n \t\tthis._statTestedSnapshotsNotCached = 0;\n@@ -991,6 +994,7 @@ class FileSystemInfo {\n \t\tfor (const [path, ts] of map) {\n \t\t\tthis._fileTimestamps.set(path, ts);\n \t\t}\n+\t\tthis._cachedDeprecatedFileTimestamps = undefined;\n \t}\n \n \t/**\n@@ -1001,6 +1005,7 @@ class FileSystemInfo {\n \t\tfor (const [path, ts] of map) {\n \t\t\tthis._contextTimestamps.set(path, ts);\n \t\t}\n+\t\tthis._cachedDeprecatedContextTimestamps = undefined;\n \t}\n \n \t/**\n@@ -2300,6 +2305,7 @@ class FileSystemInfo {\n \t\t\tif (err) {\n \t\t\t\tif (err.code === \"ENOENT\") {\n \t\t\t\t\tthis._fileTimestamps.set(path, null);\n+\t\t\t\t\tthis._cachedDeprecatedFileTimestamps = undefined;\n \t\t\t\t\treturn callback(null, null);\n \t\t\t\t}\n \t\t\t\treturn callback(err);\n@@ -2323,6 +2329,7 @@ class FileSystemInfo {\n \t\t\t}\n \n \t\t\tthis._fileTimestamps.set(path, ts);\n+\t\t\tthis._cachedDeprecatedFileTimestamps = undefined;\n \n \t\t\tcallback(null, ts);\n \t\t});\n@@ -2402,6 +2409,7 @@ class FileSystemInfo {\n \t\t\tif (err) {\n \t\t\t\tif (err.code === \"ENOENT\") {\n \t\t\t\t\tthis._contextTimestamps.set(path, null);\n+\t\t\t\t\tthis._cachedDeprecatedContextTimestamps = undefined;\n \t\t\t\t\treturn callback(null, null);\n \t\t\t\t}\n \t\t\t\treturn callback(err);\n@@ -2484,6 +2492,7 @@ class FileSystemInfo {\n \t\t\t\t\t};\n \n \t\t\t\t\tthis._contextTimestamps.set(path, result);\n+\t\t\t\t\tthis._cachedDeprecatedContextTimestamps = undefined;\n \n \t\t\t\t\tcallback(null, result);\n \t\t\t\t}\n@@ -2669,19 +2678,23 @@ class FileSystemInfo {\n \t}\n \n \tgetDeprecatedFileTimestamps() {\n+\t\tif (this._cachedDeprecatedFileTimestamps !== undefined)\n+\t\t\treturn this._cachedDeprecatedFileTimestamps;\n \t\tconst map = new Map();\n \t\tfor (const [path, info] of this._fileTimestamps) {\n \t\t\tif (info) map.set(path, typeof info === \"object\" ? info.safeTime : null);\n \t\t}\n-\t\treturn map;\n+\t\treturn (this._cachedDeprecatedFileTimestamps = map);\n \t}\n \n \tgetDeprecatedContextTimestamps() {\n+\t\tif (this._cachedDeprecatedContextTimestamps !== undefined)\n+\t\t\treturn this._cachedDeprecatedContextTimestamps;\n \t\tconst map = new Map();\n \t\tfor (const [path, info] of this._contextTimestamps) {\n \t\t\tif (info) map.set(path, typeof info === \"object\" ? info.safeTime : null);\n \t\t}\n-\t\treturn map;\n+\t\treturn (this._cachedDeprecatedContextTimestamps = map);\n \t}\n }\n "
      },
      {
        "sha": "9140ada1c3ec115e697eb6b49e5098ea0b2ca91b",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 12,
        "deletions": 4,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -92,6 +92,17 @@ let debugId = 1000;\n const DEFAULT_TYPES_UNKNOWN = new Set([\"unknown\"]);\n const DEFAULT_TYPES_JS = new Set([\"javascript\"]);\n \n+const deprecatedNeedRebuild = util.deprecate(\n+\t(module, context) => {\n+\t\treturn module.needRebuild(\n+\t\t\tcontext.fileSystemInfo.getDeprecatedFileTimestamps(),\n+\t\t\tcontext.fileSystemInfo.getDeprecatedContextTimestamps()\n+\t\t);\n+\t},\n+\t\"Module.needRebuild is deprecated in favor of Module.needBuild\",\n+\t\"DEP_WEBPACK_MODULE_NEED_REBUILD\"\n+);\n+\n /** @typedef {(requestShortener: RequestShortener) => string} OptimizationBailoutFunction */\n \n class Module extends DependenciesBlock {\n@@ -633,10 +644,7 @@ class Module extends DependenciesBlock {\n \t\t\tnull,\n \t\t\t!this.buildMeta ||\n \t\t\t\tthis.needRebuild === Module.prototype.needRebuild ||\n-\t\t\t\tthis.needRebuild(\n-\t\t\t\t\tcontext.fileSystemInfo.getDeprecatedFileTimestamps(),\n-\t\t\t\t\tcontext.fileSystemInfo.getDeprecatedContextTimestamps()\n-\t\t\t\t)\n+\t\t\t\tdeprecatedNeedRebuild(this, context)\n \t\t);\n \t}\n "
      },
      {
        "sha": "eca7ed3b6e271922544a67a7e91a84e392656608",
        "filename": "test/WatchTestCases.test.js",
        "status": "modified",
        "additions": 20,
        "deletions": 1,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FWatchTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FWatchTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FWatchTestCases.test.js?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -8,6 +8,8 @@ const checkArrayExpectation = require(\"./checkArrayExpectation\");\n const createLazyTestEnv = require(\"./helpers/createLazyTestEnv\");\n const { remove } = require(\"./helpers/remove\");\n const prepareOptions = require(\"./helpers/prepareOptions\");\n+const deprecationTracking = require(\"./helpers/deprecationTracking\");\n+const FakeDocument = require(\"./helpers/FakeDocument\");\n \n const webpack = require(\"..\");\n \n@@ -153,6 +155,7 @@ describe(\"WatchTestCases\", () => {\n \t\t\t\t\t\t\tcopyDiff(path.join(testDirectory, run.name), tempDirectory, true);\n \n \t\t\t\t\t\t\tsetTimeout(() => {\n+\t\t\t\t\t\t\t\tconst deprecationTracker = deprecationTracking.start();\n \t\t\t\t\t\t\t\tconst compiler = webpack(options);\n \t\t\t\t\t\t\t\tcompiler.hooks.invalid.tap(\n \t\t\t\t\t\t\t\t\t\"WatchTestCasesTest\",\n@@ -231,7 +234,10 @@ describe(\"WatchTestCases\", () => {\n \n \t\t\t\t\t\t\t\t\t\tconst globalContext = {\n \t\t\t\t\t\t\t\t\t\t\tconsole: console,\n-\t\t\t\t\t\t\t\t\t\t\texpect: expect\n+\t\t\t\t\t\t\t\t\t\t\texpect: expect,\n+\t\t\t\t\t\t\t\t\t\t\tsetTimeout,\n+\t\t\t\t\t\t\t\t\t\t\tclearTimeout,\n+\t\t\t\t\t\t\t\t\t\t\tdocument: new FakeDocument()\n \t\t\t\t\t\t\t\t\t\t};\n \n \t\t\t\t\t\t\t\t\t\tfunction _require(currentDirectory, module) {\n@@ -341,6 +347,19 @@ describe(\"WatchTestCases\", () => {\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t\t\t}, 1500);\n \t\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\t\tconst deprecations = deprecationTracker();\n+\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckArrayExpectation(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttestDirectory,\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ deprecations },\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"deprecation\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Deprecation\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdone\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\twatching.close();\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t\t\t\twatching.close(done);\n \t\t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t\t},"
      },
      {
        "sha": "8cbf1faa6cdcafc40ec6a6910d99bd5f5cc0a66e",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/1/a.css",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fa.css",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fa.css",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fa.css?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,5 @@\n+@import \"./dependency.css\";\n+\n+.a {\n+\tcolor: red;\n+}"
      },
      {
        "sha": "869690c300d564dfc0a18af7d442d9ba509e0c7c",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/1/b.css",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fb.css",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fb.css",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fb.css?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,3 @@\n+.b {\n+\tcolor: red;\n+}"
      },
      {
        "sha": "aad283b7bcaf7b8b333647a8486aff2e9b649c19",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/1/chunk.css",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fchunk.css",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fchunk.css",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fchunk.css?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,5 @@\n+@import \"./dependency.css\";\n+\n+.chunk {\n+\tcolor: red;\n+}"
      },
      {
        "sha": "c7300ee6e935422f29e56c3ec087b4e32ca6de81",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/1/chunk.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fchunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fchunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fchunk.js?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1 @@\n+import \"./chunk.css\";"
      },
      {
        "sha": "9e006e4b0c57c8c2da8435fafdf84afb63e403a0",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/1/dependency.css",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fdependency.css",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fdependency.css",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Fdependency.css?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,3 @@\n+.dependency {\n+\tcolor: red;\n+}"
      },
      {
        "sha": "5b27cad97a9da8f1b4eae7c9560da733b94eb0b2",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/1/index.js",
        "status": "added",
        "additions": 57,
        "deletions": 0,
        "changes": 57,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F1%2Findex.js?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,57 @@\n+import \"./a.css\";\n+import \"./b.css\";\n+\n+const fs = __non_webpack_require__(\"fs\");\n+const path = __non_webpack_require__(\"path\");\n+\n+it(\"should load a chunk with css\", () => {\n+\tconst linkStart = document.getElementsByTagName(\"link\").length;\n+\tconst scriptStart = document.getElementsByTagName(\"script\").length;\n+\tconst promise = import(\"./chunk\");\n+\n+\tconst links = document.getElementsByTagName(\"link\").slice(linkStart);\n+\tconst scripts = document.getElementsByTagName(\"script\").slice(scriptStart);\n+\n+\texpect(links.length).toBe(1);\n+\texpect(scripts.length).toBe(1);\n+\tlinks[0].onload();\n+\t__non_webpack_require__(\n+\t\tscripts[0].src.replace(\"https://test.cases/path\", \".\")\n+\t);\n+\n+\tconst css = fs\n+\t\t.readFileSync(\n+\t\t\tpath.resolve(\n+\t\t\t\t__dirname,\n+\t\t\t\tlinks[0].href.replace(\"https://test.cases/path\", \".\")\n+\t\t\t),\n+\t\t\t\"utf-8\"\n+\t\t)\n+\t\t.trim();\n+\texpect(css).toMatchInlineSnapshot(`\n+\t\t\".chunk {\n+\t\t\tcolor: red;\n+\t\t}\"\n+\t`);\n+\n+\treturn promise;\n+});\n+\n+it(\"should generate correct css\", () => {\n+\tconst css = fs\n+\t\t.readFileSync(path.resolve(__dirname, \"main.css\"), \"utf-8\")\n+\t\t.trim();\n+\texpect(css).toMatchInlineSnapshot(`\n+\t\t\".dependency {\n+\t\t\tcolor: ${WATCH_STEP === \"1\" ? \"red\" : \"green\"};\n+\t\t}\n+\n+\t\t.a {\n+\t\t\tcolor: red;\n+\t\t}\n+\n+\t\t.b {\n+\t\t\tcolor: ${WATCH_STEP === \"1\" ? \"red\" : \"green\"};\n+\t\t}\"\n+\t`);\n+});"
      },
      {
        "sha": "a4710ab8618049837a1f74bf04c2bbf0323ce86c",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/2/b.css",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F2%2Fb.css",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F2%2Fb.css",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F2%2Fb.css?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,3 @@\n+.b {\n+\tcolor: green;\n+}"
      },
      {
        "sha": "b0c6c9c5b88107a9152fd7f38f9e73be09db72ce",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/2/dependency.css",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F2%2Fdependency.css",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F2%2Fdependency.css",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2F2%2Fdependency.css?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,3 @@\n+.dependency {\n+\tcolor: green;\n+}"
      },
      {
        "sha": "91e4067815380159b0e637427ce4ccd953bac57a",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/deprecations.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2Fdeprecations.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2Fdeprecations.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2Fdeprecations.js?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1 @@\n+module.exports = [{ code: /DEP_WEBPACK_MODULE_NEED_REBUILD/ }];"
      },
      {
        "sha": "7568bd619d35cd06aeba0a80735587b5fec8aa74",
        "filename": "test/watchCases/plugins/mini-css-extract-plugin/webpack.config.js",
        "status": "added",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f5be6f0d8531a09f841f4a8c448ba9439bb1df1c/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fplugins%2Fmini-css-extract-plugin%2Fwebpack.config.js?ref=f5be6f0d8531a09f841f4a8c448ba9439bb1df1c",
        "patch": "@@ -0,0 +1,18 @@\n+var MCEP = require(\"mini-css-extract-plugin\");\n+\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\tmodule: {\n+\t\trules: [\n+\t\t\t{\n+\t\t\t\ttest: /\\.css$/,\n+\t\t\t\tuse: [MCEP.loader, \"css-loader\"]\n+\t\t\t}\n+\t\t]\n+\t},\n+\ttarget: \"web\",\n+\tnode: {\n+\t\t__dirname: false\n+\t},\n+\tplugins: [new MCEP()]\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/11323",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/11323/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/11323/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/11323/events",
    "html_url": "https://github.com/webpack/webpack/pull/11323",
    "id": 678926956,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3NzkyNzIx",
    "number": 11323,
    "title": "Performance improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-08-14T06:11:09Z",
    "updated_at": "2020-08-14T17:56:02Z",
    "closed_at": "2020-08-14T17:56:00Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/11323",
      "html_url": "https://github.com/webpack/webpack/pull/11323",
      "diff_url": "https://github.com/webpack/webpack/pull/11323.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/11323.patch",
      "merged_at": "2020-08-14T17:56:00Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nreletated to https://github.com/webpack/webpack/issues/9802#issuecomment-670401358\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperf\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nn/a\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/11323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/11323/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "48595448cb1c4366224ee8776fa7cd5c107489db",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -9,6 +9,7 @@ const ChunkGraph = require(\"./ChunkGraph\");\n const Entrypoint = require(\"./Entrypoint\");\n const { intersect } = require(\"./util/SetHelpers\");\n const SortableSet = require(\"./util/SortableSet\");\n+const StringXor = require(\"./util/StringXor\");\n const {\n \tcompareModulesByIdentifier,\n \tcompareChunkGroupsByIndex,\n@@ -529,12 +530,11 @@ class Chunk {\n \t\thash.update(`${this.id} `);\n \t\thash.update(this.ids ? this.ids.join(\",\") : \"\");\n \t\thash.update(`${this.name || \"\"} `);\n-\t\tfor (const m of chunkGraph.getOrderedChunkModulesIterable(\n-\t\t\tthis,\n-\t\t\tcompareModulesByIdentifier\n-\t\t)) {\n-\t\t\thash.update(chunkGraph.getModuleHash(m, this.runtime));\n+\t\tconst xor = new StringXor();\n+\t\tfor (const m of chunkGraph.getChunkModulesIterable(this)) {\n+\t\t\txor.add(chunkGraph.getModuleHash(m, this.runtime));\n \t\t}\n+\t\txor.updateHash(hash);\n \t\tconst entryModules = chunkGraph.getChunkEntryModulesWithChunkGroupIterable(\n \t\t\tthis\n \t\t);"
      },
      {
        "sha": "4f4d43b81b911091b17ee9c9eaa6867db86e33bb",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -2063,6 +2063,8 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t}\n \n \tcodeGeneration(callback) {\n+\t\tlet statModulesFromCache = 0;\n+\t\tlet statModulesGenerated = 0;\n \t\tconst {\n \t\t\tchunkGraph,\n \t\t\tmoduleGraph,\n@@ -2113,6 +2115,7 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t\tif (err) return callback(err);\n \t\t\t\t\tlet result;\n \t\t\t\t\tif (!cachedResult) {\n+\t\t\t\t\t\tstatModulesGenerated++;\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tresult = module.codeGeneration({\n \t\t\t\t\t\t\t\tchunkGraph,\n@@ -2129,6 +2132,7 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t\t\t\t};\n \t\t\t\t\t\t}\n \t\t\t\t\t} else {\n+\t\t\t\t\t\tstatModulesFromCache++;\n \t\t\t\t\t\tresult = cachedResult;\n \t\t\t\t\t}\n \t\t\t\t\tfor (const runtime of runtimes) {\n@@ -2151,6 +2155,12 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t\t\tthis.errors.push(error);\n \t\t\t\t\t}\n \t\t\t\t}\n+\t\t\t\tthis.logger.log(\n+\t\t\t\t\t`${Math.round(\n+\t\t\t\t\t\t(100 * statModulesGenerated) /\n+\t\t\t\t\t\t\t(statModulesGenerated + statModulesFromCache)\n+\t\t\t\t\t)}% code generated (${statModulesGenerated} generated, ${statModulesFromCache} from cache)`\n+\t\t\t\t);\n \t\t\t\tcallback();\n \t\t\t}\n \t\t);\n@@ -2512,10 +2522,12 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t}\n \n \tcreateModuleHashes() {\n+\t\tlet statModulesHashed = 0;\n \t\tconst chunkGraph = this.chunkGraph;\n \t\tconst { hashFunction, hashDigest, hashDigestLength } = this.outputOptions;\n \t\tfor (const module of this.modules) {\n \t\t\tfor (const runtime of chunkGraph.getModuleRuntimes(module)) {\n+\t\t\t\tstatModulesHashed++;\n \t\t\t\tconst moduleHash = createHash(hashFunction);\n \t\t\t\tmodule.updateHash(moduleHash, {\n \t\t\t\t\tchunkGraph,\n@@ -2532,6 +2544,11 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t);\n \t\t\t}\n \t\t}\n+\t\tthis.logger.log(\n+\t\t\t`${statModulesHashed} modules hashed (${\n+\t\t\t\tMath.round((100 * statModulesHashed) / this.modules.size) / 100\n+\t\t\t} variants per module in average)`\n+\t\t);\n \t}\n \n \tcreateHash() {"
      },
      {
        "sha": "31b65dbc550e58f6b472ccbbbaca93c263c86c21",
        "filename": "lib/FlagDependencyExportsPlugin.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FFlagDependencyExportsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FFlagDependencyExportsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyExportsPlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -33,6 +33,10 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\tconst logger = compilation.getLogger(\n \t\t\t\t\t\t\t\"webpack.FlagDependencyExportsPlugin\"\n \t\t\t\t\t\t);\n+\t\t\t\t\t\tlet statRestoredFromCache = 0;\n+\t\t\t\t\t\tlet statFlaggedUncached = 0;\n+\t\t\t\t\t\tlet statNotCached = 0;\n+\t\t\t\t\t\tlet statQueueItemsProcessed = 0;\n \n \t\t\t\t\t\t/** @type {Queue<Module>} */\n \t\t\t\t\t\tconst queue = new Queue();\n@@ -46,6 +50,7 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\tmodule.buildInfo.cacheable !== true ||\n \t\t\t\t\t\t\t\t\ttypeof module.buildInfo.hash !== \"string\"\n \t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\tstatFlaggedUncached++;\n \t\t\t\t\t\t\t\t\t// Enqueue uncacheable module for determining the exports\n \t\t\t\t\t\t\t\t\tqueue.enqueue(module);\n \t\t\t\t\t\t\t\t\tmoduleGraph.getExportsInfo(module).setHasProvideInfo();\n@@ -58,10 +63,12 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t\tif (err) return callback(err);\n \n \t\t\t\t\t\t\t\t\t\tif (result !== undefined) {\n+\t\t\t\t\t\t\t\t\t\t\tstatRestoredFromCache++;\n \t\t\t\t\t\t\t\t\t\t\tmoduleGraph\n \t\t\t\t\t\t\t\t\t\t\t\t.getExportsInfo(module)\n \t\t\t\t\t\t\t\t\t\t\t\t.restoreProvided(result);\n \t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\tstatNotCached++;\n \t\t\t\t\t\t\t\t\t\t\t// Without cached info enqueue module for determining the exports\n \t\t\t\t\t\t\t\t\t\t\tqueue.enqueue(module);\n \t\t\t\t\t\t\t\t\t\t\tmoduleGraph.getExportsInfo(module).setHasProvideInfo();\n@@ -256,6 +263,8 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\twhile (queue.length > 0) {\n \t\t\t\t\t\t\t\t\tmodule = queue.dequeue();\n \n+\t\t\t\t\t\t\t\t\tstatQueueItemsProcessed++;\n+\n \t\t\t\t\t\t\t\t\texportsInfo = moduleGraph.getExportsInfo(module);\n \t\t\t\t\t\t\t\t\tif (!module.buildMeta || !module.buildMeta.exportsType) {\n \t\t\t\t\t\t\t\t\t\tif (exportsInfo.otherExportsInfo.provided !== null) {\n@@ -283,6 +292,20 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tlogger.timeEnd(\"figure out provided exports\");\n \n+\t\t\t\t\t\t\t\tlogger.log(\n+\t\t\t\t\t\t\t\t\t`${Math.round(\n+\t\t\t\t\t\t\t\t\t\t100 -\n+\t\t\t\t\t\t\t\t\t\t\t(100 * statRestoredFromCache) /\n+\t\t\t\t\t\t\t\t\t\t\t\t(statRestoredFromCache +\n+\t\t\t\t\t\t\t\t\t\t\t\t\tstatNotCached +\n+\t\t\t\t\t\t\t\t\t\t\t\t\tstatFlaggedUncached)\n+\t\t\t\t\t\t\t\t\t)}% of exports of modules have been determined (${statNotCached} not cached, ${statFlaggedUncached} flagged uncacheable, ${statRestoredFromCache} from cache, ${\n+\t\t\t\t\t\t\t\t\t\tstatQueueItemsProcessed -\n+\t\t\t\t\t\t\t\t\t\tstatNotCached -\n+\t\t\t\t\t\t\t\t\t\tstatFlaggedUncached\n+\t\t\t\t\t\t\t\t\t} additional calculations due to dependencies)`\n+\t\t\t\t\t\t\t\t);\n+\n \t\t\t\t\t\t\t\tlogger.time(\"store provided exports into cache\");\n \t\t\t\t\t\t\t\tasyncLib.each(\n \t\t\t\t\t\t\t\t\tmodulesToStore,"
      },
      {
        "sha": "35521463892ce75f71861a684e859a0360e7b3b0",
        "filename": "lib/ProgressPlugin.js",
        "status": "modified",
        "additions": 26,
        "deletions": 26,
        "changes": 52,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FProgressPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FProgressPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FProgressPlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -182,8 +182,8 @@ class ProgressPlugin {\n \t\tconst showActiveModules = this.showActiveModules;\n \t\tlet lastActiveModule = \"\";\n \t\tlet currentLoader = \"\";\n-\t\tlet lastModulesCount = this.modulesCount;\n-\t\tlet lastDependenciesCount = this.dependenciesCount;\n+\t\tlet lastModulesCount = 0;\n+\t\tlet lastDependenciesCount = 0;\n \t\tlet lastEntriesCount = 0;\n \t\tlet modulesCount = 0;\n \t\tlet dependenciesCount = 0;\n@@ -202,9 +202,11 @@ class ProgressPlugin {\n \t\t\t/** @type {string[]} */\n \t\t\tconst items = [];\n \t\t\tconst percentByModules =\n-\t\t\t\tdoneModules / Math.max(lastModulesCount, modulesCount);\n+\t\t\t\tdoneModules /\n+\t\t\t\tMath.max(lastModulesCount || this.modulesCount, modulesCount);\n \t\t\tconst percentByEntries =\n-\t\t\t\tdoneEntries / Math.max(lastEntriesCount, entriesCount);\n+\t\t\t\tdoneEntries /\n+\t\t\t\tMath.max(lastEntriesCount || this.dependenciesCount, entriesCount);\n \t\t\tconst percentByDependencies =\n \t\t\t\tdoneDependencies / Math.max(lastDependenciesCount, dependenciesCount);\n \t\t\tlet percentageFactor;\n@@ -323,32 +325,30 @@ class ProgressPlugin {\n \t\t\t.getCache(\"ProgressPlugin\")\n \t\t\t.getItemCache(\"counts\", null);\n \n-\t\tcompiler.hooks.beforeCompile.tapAsync(\n-\t\t\t\"ProgressPlugin\",\n-\t\t\t(params, callback) => {\n-\t\t\t\thandler(0.06, \"setup\", \"waiting for cache\");\n-\t\t\t\tcache.get((err, data) => {\n-\t\t\t\t\tif (err) {\n-\t\t\t\t\t\treturn callback(err);\n-\t\t\t\t\t}\n+\t\tlet cacheGetPromise;\n \n-\t\t\t\t\tif (data) {\n-\t\t\t\t\t\tlastModulesCount = lastModulesCount || data.modulesCount;\n-\t\t\t\t\t\tlastDependenciesCount =\n-\t\t\t\t\t\t\tlastDependenciesCount || data.dependenciesCount;\n+\t\tcompiler.hooks.beforeCompile.tap(\"ProgressPlugin\", () => {\n+\t\t\tif (!cacheGetPromise) {\n+\t\t\t\tcacheGetPromise = cache.getPromise().then(\n+\t\t\t\t\tdata => {\n+\t\t\t\t\t\tif (data) {\n+\t\t\t\t\t\t\tlastModulesCount = lastModulesCount || data.modulesCount;\n+\t\t\t\t\t\t\tlastDependenciesCount =\n+\t\t\t\t\t\t\t\tlastDependenciesCount || data.dependenciesCount;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t},\n+\t\t\t\t\terr => {\n+\t\t\t\t\t\t// Ignore error\n \t\t\t\t\t}\n-\n-\t\t\t\t\tcallback();\n-\t\t\t\t});\n+\t\t\t\t);\n \t\t\t}\n-\t\t);\n+\t\t});\n \n-\t\tcompiler.hooks.afterCompile.tapAsync(\n-\t\t\t\"ProgressPlugin\",\n-\t\t\t(compilation, callback) => {\n-\t\t\t\tcache.store({ modulesCount, dependenciesCount }, callback);\n-\t\t\t}\n-\t\t);\n+\t\tcompiler.hooks.afterCompile.tapPromise(\"ProgressPlugin\", compilation => {\n+\t\t\treturn cacheGetPromise.then(() =>\n+\t\t\t\tcache.storePromise({ modulesCount, dependenciesCount })\n+\t\t\t);\n+\t\t});\n \n \t\tcompiler.hooks.compilation.tap(\"ProgressPlugin\", compilation => {\n \t\t\tif (compilation.compiler.isChild()) return;"
      },
      {
        "sha": "384e5cf96eba77a0879ad962099303cc723805d5",
        "filename": "lib/RuntimeModule.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FRuntimeModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FRuntimeModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRuntimeModule.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -98,6 +98,8 @@ class RuntimeModule extends Module {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, context) {\n+\t\thash.update(this.name);\n+\t\thash.update(`${this.stage}`);\n \t\t// Do not use getGeneratedCode here, because i. e. compilation hash is not\n \t\t// ready at this point. We will cache it later instead.\n \t\ttry {"
      },
      {
        "sha": "3867901b9dac63a90dd9d4949c68688385f72a22",
        "filename": "lib/RuntimePlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FRuntimePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FRuntimePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRuntimePlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -22,6 +22,7 @@ const MakeNamespaceObjectRuntimeModule = require(\"./runtime/MakeNamespaceObjectR\n const PublicPathRuntimeModule = require(\"./runtime/PublicPathRuntimeModule\");\n const SystemContextRuntimeModule = require(\"./runtime/SystemContextRuntimeModule\");\n const ShareRuntimeModule = require(\"./sharing/ShareRuntimeModule\");\n+const StringXor = require(\"./util/StringXor\");\n \n /** @typedef {import(\"./Chunk\")} Chunk */\n /** @typedef {import(\"./Compiler\")} Compiler */\n@@ -291,9 +292,11 @@ class RuntimePlugin {\n \t\t\tJavascriptModulesPlugin.getCompilationHooks(compilation).chunkHash.tap(\n \t\t\t\t\"RuntimePlugin\",\n \t\t\t\t(chunk, hash, { chunkGraph }) => {\n-\t\t\t\t\tfor (const m of chunkGraph.getChunkRuntimeModulesInOrder(chunk)) {\n-\t\t\t\t\t\thash.update(chunkGraph.getModuleHash(m, chunk.runtime));\n+\t\t\t\t\tconst xor = new StringXor();\n+\t\t\t\t\tfor (const m of chunkGraph.getChunkRuntimeModulesIterable(chunk)) {\n+\t\t\t\t\t\txor.add(chunkGraph.getModuleHash(m, chunk.runtime));\n \t\t\t\t\t}\n+\t\t\t\t\txor.updateHash(hash);\n \t\t\t\t}\n \t\t\t);\n \t\t});"
      },
      {
        "sha": "36ef547e30cb4da5866ed1706e7cbd8ff234fa6f",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -547,6 +547,7 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\t\tconst PackFileCacheStrategy = require(\"./cache/PackFileCacheStrategy\");\n \t\t\t\t\t\t\tnew IdleFileCachePlugin(\n \t\t\t\t\t\t\t\tnew PackFileCacheStrategy({\n+\t\t\t\t\t\t\t\t\tcompiler,\n \t\t\t\t\t\t\t\t\tfs: compiler.intermediateFileSystem,\n \t\t\t\t\t\t\t\t\tcontext: options.context,\n \t\t\t\t\t\t\t\t\tcacheLocation: cacheOptions.cacheLocation,"
      },
      {
        "sha": "71c67873e3bf5377adc94c687420c392acc7e40f",
        "filename": "lib/buildChunkGraph.js",
        "status": "modified",
        "additions": 153,
        "deletions": 2,
        "changes": 155,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -154,6 +154,20 @@ const visitModules = (\n \tlogger.time(\"visitModules: prepare\");\n \tconst blockModulesMap = extractBlockModulesMap(compilation);\n \n+\tlet statProcessedQueueItems = 0;\n+\tlet statProcessedBlocks = 0;\n+\tlet statConnectedChunkGroups = 0;\n+\tlet statProcessedChunkGroupsForMerging = 0;\n+\tlet statMergedAvailableModuleSets = 0;\n+\tlet statForkedAvailableModules = 0;\n+\tlet statForkedAvailableModulesCount = 0;\n+\tlet statForkedAvailableModulesCountPlus = 0;\n+\tlet statForkedMergedModulesCount = 0;\n+\tlet statForkedMergedModulesCountPlus = 0;\n+\tlet statForkedResultModulesCount = 0;\n+\tlet statChunkGroupInfoUpdated = 0;\n+\tlet statChildChunkGroupsReconnected = 0;\n+\n \tlet nextChunkGroupIndex = 0;\n \tlet nextFreeModulePreOrderIndex = 0;\n \tlet nextFreeModulePostOrderIndex = 0;\n@@ -357,6 +371,7 @@ const visitModules = (\n \t * @returns {void}\n \t */\n \tconst processBlock = block => {\n+\t\tstatProcessedBlocks++;\n \t\t// get prepared block info\n \t\tconst blockModules = blockModulesMap.get(block);\n \n@@ -423,6 +438,7 @@ const visitModules = (\n \n \tconst processQueue = () => {\n \t\twhile (queue.length) {\n+\t\t\tstatProcessedQueueItems++;\n \t\t\tconst queueItem = queue.pop();\n \t\t\tmodule = queueItem.module;\n \t\t\tblock = queueItem.block;\n@@ -552,16 +568,22 @@ const visitModules = (\n \t\t\t\ttarget.availableModulesToBeMerged.push(resultingAvailableModules);\n \t\t\t\tchunkGroupsForMerging.add(target);\n \t\t\t}\n+\n+\t\t\tstatConnectedChunkGroups += targets.size;\n \t\t}\n \t\tqueueConnect.clear();\n \t};\n \n \tconst processChunkGroupsForMerging = () => {\n+\t\tstatProcessedChunkGroupsForMerging += chunkGroupsForMerging.size;\n+\n \t\t// Execute the merge\n \t\tfor (const info of chunkGroupsForMerging) {\n \t\t\tconst availableModulesToBeMerged = info.availableModulesToBeMerged;\n \t\t\tlet cachedMinAvailableModules = info.minAvailableModules;\n \n+\t\t\tstatMergedAvailableModuleSets += availableModulesToBeMerged.length;\n+\n \t\t\t// 1. Get minimal available modules\n \t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n \t\t\t// This step calculates the minimal available modules and skips traversal when\n@@ -579,17 +601,123 @@ const visitModules = (\n \t\t\t\t} else {\n \t\t\t\t\tif (info.minAvailableModulesOwned) {\n \t\t\t\t\t\t// We own it and can modify it\n+\t\t\t\t\t\tif (cachedMinAvailableModules.plus === availableModules.plus) {\n+\t\t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n+\t\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.delete(m);\n+\t\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n+\t\t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.delete(m);\n+\t\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tfor (const m of cachedMinAvailableModules.plus) {\n+\t\t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n+\t\t\t\t\t\t\t\t\t// We can't remove modules from the plus part\n+\t\t\t\t\t\t\t\t\t// so we need to merge plus into the normal part to allow modifying it\n+\t\t\t\t\t\t\t\t\tconst iterator = cachedMinAvailableModules.plus[\n+\t\t\t\t\t\t\t\t\t\tSymbol.iterator\n+\t\t\t\t\t\t\t\t\t]();\n+\t\t\t\t\t\t\t\t\t// fast forward add all modules until m\n+\t\t\t\t\t\t\t\t\t/** @type {IteratorResult<Module>} */\n+\t\t\t\t\t\t\t\t\tlet it;\n+\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\t\tif (module === m) break;\n+\t\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.add(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t// check the remaining modules before adding\n+\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\tavailableModules.has(module) ||\n+\t\t\t\t\t\t\t\t\t\t\tavailableModules.plus.has(m)\n+\t\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.add(module);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.plus = EMPTY_SET;\n+\t\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\t\tcontinue merge;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else if (cachedMinAvailableModules.plus === availableModules.plus) {\n+\t\t\t\t\t\t// Common and fast case when the plus part is shared\n+\t\t\t\t\t\t// We only need to care about the normal part\n+\t\t\t\t\t\tif (availableModules.size < cachedMinAvailableModules.size) {\n+\t\t\t\t\t\t\t// the new availableModules is smaller so it's faster to\n+\t\t\t\t\t\t\t// fork from the new availableModules\n+\t\t\t\t\t\t\tstatForkedAvailableModules++;\n+\t\t\t\t\t\t\tstatForkedAvailableModulesCount += availableModules.size;\n+\t\t\t\t\t\t\tstatForkedMergedModulesCount += cachedMinAvailableModules.size;\n+\t\t\t\t\t\t\t// construct a new Set as intersection of cachedMinAvailableModules and availableModules\n+\t\t\t\t\t\t\tconst newSet = /** @type {ModuleSetPlus} */ (new Set());\n+\t\t\t\t\t\t\tnewSet.plus = availableModules.plus;\n+\t\t\t\t\t\t\tfor (const m of availableModules) {\n+\t\t\t\t\t\t\t\tif (cachedMinAvailableModules.has(m)) {\n+\t\t\t\t\t\t\t\t\tnewSet.add(m);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tstatForkedResultModulesCount += newSet.size;\n+\t\t\t\t\t\t\tcachedMinAvailableModules = newSet;\n+\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n+\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n+\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\tcontinue merge;\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n-\t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n-\t\t\t\t\t\t\t\tcachedMinAvailableModules.delete(m);\n+\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n+\t\t\t\t\t\t\t\t// cachedMinAvailableModules need to be modified\n+\t\t\t\t\t\t\t\t// but we don't own it\n+\t\t\t\t\t\t\t\tstatForkedAvailableModules++;\n+\t\t\t\t\t\t\t\tstatForkedAvailableModulesCount +=\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.size;\n+\t\t\t\t\t\t\t\tstatForkedMergedModulesCount += availableModules.size;\n+\t\t\t\t\t\t\t\t// construct a new Set as intersection of cachedMinAvailableModules and availableModules\n+\t\t\t\t\t\t\t\t// as the plus part is equal we can just take over this one\n+\t\t\t\t\t\t\t\tconst newSet = /** @type {ModuleSetPlus} */ (new Set());\n+\t\t\t\t\t\t\t\tnewSet.plus = availableModules.plus;\n+\t\t\t\t\t\t\t\tconst iterator = cachedMinAvailableModules[Symbol.iterator]();\n+\t\t\t\t\t\t\t\t// fast forward add all modules until m\n+\t\t\t\t\t\t\t\t/** @type {IteratorResult<Module>} */\n+\t\t\t\t\t\t\t\tlet it;\n+\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\tif (module === m) break;\n+\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t// check the remaining modules before adding\n+\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\tif (availableModules.has(module)) {\n+\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tstatForkedResultModulesCount += newSet.size;\n+\t\t\t\t\t\t\t\tcachedMinAvailableModules = newSet;\n+\t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n+\t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n \t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\tcontinue merge;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t} else {\n \t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n \t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n \t\t\t\t\t\t\t\t// cachedMinAvailableModules need to be modified\n \t\t\t\t\t\t\t\t// but we don't own it\n+\t\t\t\t\t\t\t\tstatForkedAvailableModules++;\n+\t\t\t\t\t\t\t\tstatForkedAvailableModulesCount +=\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.size;\n+\t\t\t\t\t\t\t\tstatForkedAvailableModulesCountPlus +=\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.plus.size;\n+\t\t\t\t\t\t\t\tstatForkedMergedModulesCount += availableModules.size;\n+\t\t\t\t\t\t\t\tstatForkedMergedModulesCountPlus += availableModules.plus.size;\n \t\t\t\t\t\t\t\t// construct a new Set as intersection of cachedMinAvailableModules and availableModules\n \t\t\t\t\t\t\t\tconst newSet = /** @type {ModuleSetPlus} */ (new Set());\n \t\t\t\t\t\t\t\tnewSet.plus = EMPTY_SET;\n@@ -621,6 +749,7 @@ const visitModules = (\n \t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tstatForkedResultModulesCount += newSet.size;\n \t\t\t\t\t\t\t\tcachedMinAvailableModules = newSet;\n \t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n \t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n@@ -632,6 +761,13 @@ const visitModules = (\n \t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n \t\t\t\t\t\t\t\t// cachedMinAvailableModules need to be modified\n \t\t\t\t\t\t\t\t// but we don't own it\n+\t\t\t\t\t\t\t\tstatForkedAvailableModules++;\n+\t\t\t\t\t\t\t\tstatForkedAvailableModulesCount +=\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.size;\n+\t\t\t\t\t\t\t\tstatForkedAvailableModulesCountPlus +=\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.plus.size;\n+\t\t\t\t\t\t\t\tstatForkedMergedModulesCount += availableModules.size;\n+\t\t\t\t\t\t\t\tstatForkedMergedModulesCountPlus += availableModules.plus.size;\n \t\t\t\t\t\t\t\t// construct a new Set as intersection of cachedMinAvailableModules and availableModules\n \t\t\t\t\t\t\t\t// we already know that all modules directly from cachedMinAvailableModules are in availableModules too\n \t\t\t\t\t\t\t\tconst newSet = /** @type {ModuleSetPlus} */ (new Set(\n@@ -659,6 +795,7 @@ const visitModules = (\n \t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tstatForkedResultModulesCount += newSet.size;\n \t\t\t\t\t\t\t\tcachedMinAvailableModules = newSet;\n \t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n \t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n@@ -675,6 +812,7 @@ const visitModules = (\n \t\t\t\toutdatedChunkGroupInfo.add(info);\n \t\t\t}\n \t\t}\n+\t\tchunkGroupsForMerging.clear();\n \t};\n \n \tconst processChunkGroupsForCombining = () => {\n@@ -709,6 +847,7 @@ const visitModules = (\n \t};\n \n \tconst processOutdatedChunkGroupInfo = () => {\n+\t\tstatChunkGroupInfoUpdated += outdatedChunkGroupInfo.size;\n \t\t// Revisit skipped elements\n \t\tfor (const info of outdatedChunkGroupInfo) {\n \t\t\t// 1. Reconsider skipped items\n@@ -734,6 +873,7 @@ const visitModules = (\n \n \t\t\t// 2. Reconsider children chunk groups\n \t\t\tif (info.children !== undefined) {\n+\t\t\t\tstatChildChunkGroupsReconnected += info.children.size;\n \t\t\t\tfor (const cgi of info.children) {\n \t\t\t\t\tlet connectList = queueConnect.get(info);\n \t\t\t\t\tif (connectList === undefined) {\n@@ -794,6 +934,17 @@ const visitModules = (\n \t\t\tqueueDelayed = tempQueue;\n \t\t}\n \t}\n+\n+\tlogger.log(\n+\t\t`${statProcessedQueueItems} queue items processed (${statProcessedBlocks} blocks)`\n+\t);\n+\tlogger.log(`${statConnectedChunkGroups} chunk groups connected`);\n+\tlogger.log(\n+\t\t`${statProcessedChunkGroupsForMerging} chunk groups processed for merging (${statMergedAvailableModuleSets} module sets, ${statForkedAvailableModules} forked, ${statForkedAvailableModulesCount} + ${statForkedAvailableModulesCountPlus} modules forked, ${statForkedMergedModulesCount} + ${statForkedMergedModulesCountPlus} modules merged into fork, ${statForkedResultModulesCount} resulting modules)`\n+\t);\n+\tlogger.log(\n+\t\t`${statChunkGroupInfoUpdated} chunk group info updated (${statChildChunkGroupsReconnected} already connected chunk groups reconnected)`\n+\t);\n };\n \n /**"
      },
      {
        "sha": "82020938ea8da1d645abc695188012208342bfb8",
        "filename": "lib/cache/IdleFileCachePlugin.js",
        "status": "modified",
        "additions": 11,
        "deletions": 2,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fcache%2FIdleFileCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fcache%2FIdleFileCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FIdleFileCachePlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const Cache = require(\"../Cache\");\n+const ProgressPlugin = require(\"../ProgressPlugin\");\n \n /** @typedef {import(\"../Compiler\")} Compiler */\n \n@@ -87,11 +88,19 @@ class IdleFileCachePlugin {\n \t\t\t\t\tidleTimer = undefined;\n \t\t\t\t}\n \t\t\t\tisIdle = false;\n-\t\t\t\tconst promises = Array.from(pendingIdleTasks.values()).map(fn => fn());\n+\t\t\t\tconst reportProgress = ProgressPlugin.getReporter(compiler);\n+\t\t\t\tconst jobs = Array.from(pendingIdleTasks.values());\n+\t\t\t\tif (reportProgress) reportProgress(0, \"process pending cache items\");\n+\t\t\t\tconst promises = jobs.map(fn => fn());\n \t\t\t\tpendingIdleTasks.clear();\n \t\t\t\tpromises.push(currentIdlePromise);\n-\t\t\t\tlet promise = Promise.all(promises);\n+\t\t\t\tconst promise = Promise.all(promises);\n \t\t\t\tcurrentIdlePromise = promise.then(() => strategy.afterAllStored());\n+\t\t\t\tif (reportProgress) {\n+\t\t\t\t\tcurrentIdlePromise = currentIdlePromise.then(() => {\n+\t\t\t\t\t\treportProgress(1, `stored`);\n+\t\t\t\t\t});\n+\t\t\t\t}\n \t\t\t\treturn currentIdlePromise;\n \t\t\t}\n \t\t);"
      },
      {
        "sha": "96eca9f6b079045a16b7c5de9ca7537f30f9abf0",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -6,12 +6,14 @@\n \"use strict\";\n \n const FileSystemInfo = require(\"../FileSystemInfo\");\n+const ProgressPlugin = require(\"../ProgressPlugin\");\n const LazySet = require(\"../util/LazySet\");\n const makeSerializable = require(\"../util/makeSerializable\");\n const memorize = require(\"../util/memorize\");\n const { createFileSerializer } = require(\"../util/serialization\");\n \n /** @typedef {import(\"../Cache\").Etag} Etag */\n+/** @typedef {import(\"../Compiler\")} Compiler */\n /** @typedef {import(\"../logging/Logger\").Logger} Logger */\n /** @typedef {import(\"../util/fs\").IntermediateFileSystem} IntermediateFileSystem */\n \n@@ -588,6 +590,7 @@ class PackContent {\n class PackFileCacheStrategy {\n \t/**\n \t * @param {Object} options options\n+\t * @param {Compiler} options.compiler the compiler\n \t * @param {IntermediateFileSystem} options.fs the filesystem\n \t * @param {string} options.context the context directory\n \t * @param {string} options.cacheLocation the location of the cache data\n@@ -597,6 +600,7 @@ class PackFileCacheStrategy {\n \t * @param {Iterable<string>} options.immutablePaths immutable paths\n \t */\n \tconstructor({\n+\t\tcompiler,\n \t\tfs,\n \t\tcontext,\n \t\tcacheLocation,\n@@ -611,6 +615,7 @@ class PackFileCacheStrategy {\n \t\t\timmutablePaths,\n \t\t\tlogger: logger.getChildLogger(\"webpack.FileSystemInfo\")\n \t\t});\n+\t\tthis.compiler = compiler;\n \t\tthis.context = context;\n \t\tthis.cacheLocation = cacheLocation;\n \t\tthis.version = version;\n@@ -822,6 +827,7 @@ class PackFileCacheStrategy {\n \t}\n \n \tafterAllStored() {\n+\t\tconst reportProgress = ProgressPlugin.getReporter(this.compiler);\n \t\treturn this.packPromise\n \t\t\t.then(pack => {\n \t\t\t\tif (!pack.invalid) return;\n@@ -836,6 +842,7 @@ class PackFileCacheStrategy {\n \t\t\t\t}\n \t\t\t\tthis.newBuildDependencies.clear();\n \t\t\t\tif (newBuildDependencies.size > 0 || !this.buildSnapshot) {\n+\t\t\t\t\tif (reportProgress) reportProgress(0.5, \"resolve build dependencies\");\n \t\t\t\t\tthis.logger.debug(\n \t\t\t\t\t\t`Capturing build dependencies... (${Array.from(\n \t\t\t\t\t\t\tnewBuildDependencies\n@@ -865,6 +872,11 @@ class PackFileCacheStrategy {\n \t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\tthis.resolveResults = resolveResults;\n \t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tif (reportProgress)\n+\t\t\t\t\t\t\t\t\treportProgress(\n+\t\t\t\t\t\t\t\t\t\t0.6,\n+\t\t\t\t\t\t\t\t\t\t\"snapshot build dependencies (timestamps)\"\n+\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tthis.fileSystemInfo.createSnapshot(\n \t\t\t\t\t\t\t\t\tundefined,\n \t\t\t\t\t\t\t\t\tresolveDependencies.files,\n@@ -890,6 +902,11 @@ class PackFileCacheStrategy {\n \t\t\t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t\t\tthis.resolveBuildDependenciesSnapshot = snapshot;\n \t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\tif (reportProgress)\n+\t\t\t\t\t\t\t\t\t\t\treportProgress(\n+\t\t\t\t\t\t\t\t\t\t\t\t0.7,\n+\t\t\t\t\t\t\t\t\t\t\t\t\"snapshot build dependencies (hashes)\"\n+\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\tthis.fileSystemInfo.createSnapshot(\n \t\t\t\t\t\t\t\t\t\t\tundefined,\n \t\t\t\t\t\t\t\t\t\t\tfiles,\n@@ -927,6 +944,7 @@ class PackFileCacheStrategy {\n \t\t\t\t\tpromise = Promise.resolve();\n \t\t\t\t}\n \t\t\t\treturn promise.then(() => {\n+\t\t\t\t\tif (reportProgress) reportProgress(0.8, \"serialize pack\");\n \t\t\t\t\tthis.logger.time(`store pack`);\n \t\t\t\t\tconst content = new PackContainer(\n \t\t\t\t\t\tpack,"
      },
      {
        "sha": "d90711ede85f7d71eae91176ada1547df6dda3bc",
        "filename": "lib/cache/ResolverCachePlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fcache%2FResolverCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fcache%2FResolverCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FResolverCachePlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -103,7 +103,7 @@ class ResolverCachePlugin {\n \t\t\tcompilation.hooks.finishModules.tap(\"ResolverCachePlugin\", () => {\n \t\t\t\tif (realResolves + cachedResolves > 0) {\n \t\t\t\t\tconst logger = compilation.getLogger(\"webpack.ResolverCachePlugin\");\n-\t\t\t\t\tlogger.debug(\n+\t\t\t\t\tlogger.log(\n \t\t\t\t\t\t`${Math.round(\n \t\t\t\t\t\t\t(100 * realResolves) / (realResolves + cachedResolves)\n \t\t\t\t\t\t)}% really resolved (${realResolves} real resolves with ${cacheInvalidResolves} cached but invalid, ${cachedResolves} cached valid, ${concurrentResolves} concurrent)`"
      },
      {
        "sha": "a9ea918ea8c0ba74737b9a15e18736822a5472de",
        "filename": "lib/dependencies/HarmonyDetectionParserPlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 9,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyDetectionParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyDetectionParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyDetectionParserPlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -28,14 +28,6 @@ module.exports = class HarmonyDetectionParserPlugin {\n \t\t\t\t\t\tstatement.type === \"ExportAllDeclaration\"\n \t\t\t\t);\n \t\t\tif (isHarmony) {\n-\t\t\t\tconst isAsync = ast.body.some(\n-\t\t\t\t\tstatement =>\n-\t\t\t\t\t\t(statement.type === \"ImportDeclaration\" ||\n-\t\t\t\t\t\t\tstatement.type === \"ExportDefaultDeclaration\" ||\n-\t\t\t\t\t\t\tstatement.type === \"ExportNamedDeclaration\" ||\n-\t\t\t\t\t\t\tstatement.type === \"ExportAllDeclaration\") &&\n-\t\t\t\t\t\tstatement.await\n-\t\t\t\t);\n \t\t\t\tconst module = parser.state.module;\n \t\t\t\tconst compatDep = new HarmonyCompatibilityDependency();\n \t\t\t\tcompatDep.loc = {\n@@ -53,7 +45,6 @@ module.exports = class HarmonyDetectionParserPlugin {\n \t\t\t\tDynamicExports.bailout(parser.state);\n \t\t\t\tHarmonyExports.enable(parser.state, isStrictHarmony);\n \t\t\t\tparser.scope.isStrict = true;\n-\t\t\t\tmodule.buildMeta.async = isAsync;\n \t\t\t}\n \t\t});\n "
      },
      {
        "sha": "5cd1ce207abeb78018ed0f99b06d44c54eb02acb",
        "filename": "lib/dependencies/HarmonyExportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -127,7 +127,6 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\t\t\tnull,\n \t\t\t\t\t\tthis.strictExportPresence\n \t\t\t\t\t);\n-\t\t\t\t\tdep.await = settings.await;\n \t\t\t\t} else {\n \t\t\t\t\tdep = new HarmonyExportSpecifierDependency(id, name);\n \t\t\t\t}\n@@ -161,7 +160,6 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\tif (harmonyStarExports) {\n \t\t\t\t\tharmonyStarExports.push(dep);\n \t\t\t\t}\n-\t\t\t\tdep.await = statement.await;\n \t\t\t\tdep.loc = Object.create(statement.loc);\n \t\t\t\tdep.loc.index = idx;\n \t\t\t\tparser.state.current.addDependency(dep);"
      },
      {
        "sha": "9df244c5a0407ea3b9bfb4b3f83b55a7f393c346",
        "filename": "lib/dependencies/HarmonyImportDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependency.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -35,7 +35,6 @@ class HarmonyImportDependency extends ModuleDependency {\n \tconstructor(request, sourceOrder) {\n \t\tsuper(request);\n \t\tthis.sourceOrder = sourceOrder;\n-\t\tthis.await = false;\n \t}\n \n \tget category() {\n@@ -212,20 +211,17 @@ class HarmonyImportDependency extends ModuleDependency {\n \t\t\tif (chunkGraph.moduleGraph.isAsync(importedModule)) hash.update(\"async\");\n \t\t}\n \t\thash.update(`${this.sourceOrder}`);\n-\t\tif (this.await) hash.update(\"await\");\n \t}\n \n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.sourceOrder);\n-\t\twrite(this.await);\n \t\tsuper.serialize(context);\n \t}\n \n \tdeserialize(context) {\n \t\tconst { read } = context;\n \t\tthis.sourceOrder = read();\n-\t\tthis.await = read();\n \t\tsuper.deserialize(context);\n \t}\n }"
      },
      {
        "sha": "29265607a50e85508ccdae531b89d4488670cd2d",
        "filename": "lib/dependencies/HarmonyImportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 5,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -62,8 +62,7 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\tname,\n \t\t\t\t\tsource,\n \t\t\t\t\tids,\n-\t\t\t\t\tsourceOrder: parser.state.lastHarmonyImportOrder,\n-\t\t\t\t\tawait: statement.await\n+\t\t\t\t\tsourceOrder: parser.state.lastHarmonyImportOrder\n \t\t\t\t});\n \t\t\t\treturn true;\n \t\t\t}\n@@ -83,7 +82,6 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\tdep.shorthand = parser.scope.inShorthand;\n \t\t\t\tdep.directImport = true;\n \t\t\t\tdep.asiSafe = !parser.isAsiPosition(expr.range[0]);\n-\t\t\t\tdep.await = settings.await;\n \t\t\t\tdep.loc = expr.loc;\n \t\t\t\tparser.state.module.addDependency(dep);\n \t\t\t\tInnerGraph.onUsage(parser.state, e => (dep.usedByExports = e));\n@@ -102,7 +100,6 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\texpr.range,\n \t\t\t\t\tthis.strictExportPresence\n \t\t\t\t);\n-\t\t\t\tdep.await = settings.await;\n \t\t\t\tdep.asiSafe = !parser.isAsiPosition(expr.range[0]);\n \t\t\t\tdep.loc = expr.loc;\n \t\t\t\tparser.state.module.addDependency(dep);\n@@ -125,7 +122,6 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\tthis.strictExportPresence\n \t\t\t\t);\n \t\t\t\tdep.directImport = members.length === 0;\n-\t\t\t\tdep.await = settings.await;\n \t\t\t\tdep.call = true;\n \t\t\t\tdep.asiSafe = !parser.isAsiPosition(expr.range[0]);\n \t\t\t\t// only in case when we strictly follow the spec we need a special case here"
      },
      {
        "sha": "2b3a711f1abb0419cb9be5b7f486a32dcaf9db7f",
        "filename": "lib/javascript/JavascriptModulesPlugin.js",
        "status": "modified",
        "additions": 11,
        "deletions": 8,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptModulesPlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -18,6 +18,7 @@ const { tryRunOrWebpackError } = require(\"../HookWebpackError\");\n const HotUpdateChunk = require(\"../HotUpdateChunk\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n const Template = require(\"../Template\");\n+const StringXor = require(\"../util/StringXor\");\n const { compareModulesByIdentifier } = require(\"../util/comparators\");\n const createHash = require(\"../util/createHash\");\n const JavascriptGenerator = require(\"./JavascriptGenerator\");\n@@ -328,25 +329,27 @@ class JavascriptModulesPlugin {\n \t\t\t\t\t\tmoduleGraph,\n \t\t\t\t\t\truntimeTemplate\n \t\t\t\t\t});\n-\t\t\t\t\tconst modules = chunkGraph.getOrderedChunkModulesIterableBySourceType(\n+\t\t\t\t\tconst modules = chunkGraph.getChunkModulesIterableBySourceType(\n \t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\"javascript\",\n-\t\t\t\t\t\tcompareModulesByIdentifier\n+\t\t\t\t\t\t\"javascript\"\n \t\t\t\t\t);\n \t\t\t\t\tif (modules) {\n+\t\t\t\t\t\tconst xor = new StringXor();\n \t\t\t\t\t\tfor (const m of modules) {\n-\t\t\t\t\t\t\thash.update(chunkGraph.getModuleHash(m, chunk.runtime));\n+\t\t\t\t\t\t\txor.add(chunkGraph.getModuleHash(m, chunk.runtime));\n \t\t\t\t\t\t}\n+\t\t\t\t\t\txor.updateHash(hash);\n \t\t\t\t\t}\n-\t\t\t\t\tconst runtimeModules = chunkGraph.getOrderedChunkModulesIterableBySourceType(\n+\t\t\t\t\tconst runtimeModules = chunkGraph.getChunkModulesIterableBySourceType(\n \t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\"runtime\",\n-\t\t\t\t\t\tcompareModulesByIdentifier\n+\t\t\t\t\t\t\"runtime\"\n \t\t\t\t\t);\n \t\t\t\t\tif (runtimeModules) {\n+\t\t\t\t\t\tconst xor = new StringXor();\n \t\t\t\t\t\tfor (const m of runtimeModules) {\n-\t\t\t\t\t\t\thash.update(chunkGraph.getModuleHash(m, chunk.runtime));\n+\t\t\t\t\t\t\txor.add(chunkGraph.getModuleHash(m, chunk.runtime));\n \t\t\t\t\t\t}\n+\t\t\t\t\t\txor.updateHash(hash);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotUpdateChunk) {\n \t\t\t\t\t\thash.update(JSON.stringify(hotUpdateChunk.removedModules));"
      },
      {
        "sha": "6243250dd019f2bac305d55160b252069905af87",
        "filename": "lib/optimize/SplitChunksPlugin.js",
        "status": "modified",
        "additions": 103,
        "deletions": 49,
        "changes": 152,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Foptimize%2FSplitChunksPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Foptimize%2FSplitChunksPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSplitChunksPlugin.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const Chunk = require(\"../Chunk\");\n const { STAGE_ADVANCED } = require(\"../OptimizationStages\");\n const WebpackError = require(\"../WebpackError\");\n const { requestToId } = require(\"../ids/IdHelpers\");\n@@ -155,7 +156,7 @@ const MinMaxSizeWarning = require(\"./MinMaxSizeWarning\");\n  * @property {Record<string, number>} sizes\n  * @property {Set<Chunk>} chunks\n  * @property {Set<Chunk>} reuseableChunks\n- * @property {Set<bigint>} chunksKeys\n+ * @property {Set<bigint | Chunk>} chunksKeys\n  */\n \n const defaultGetName = /** @type {GetName} */ (() => {});\n@@ -706,31 +707,44 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t}\n \t\t\t\t\t/**\n \t\t\t\t\t * @param {Iterable<Chunk>} chunks list of chunks\n-\t\t\t\t\t * @returns {bigint} key of the chunks\n+\t\t\t\t\t * @returns {bigint | Chunk} key of the chunks\n \t\t\t\t\t */\n \t\t\t\t\tconst getKey = chunks => {\n-\t\t\t\t\t\tlet key = ZERO;\n-\t\t\t\t\t\tfor (const c of chunks) {\n-\t\t\t\t\t\t\tkey = key | chunkIndexMap.get(c);\n+\t\t\t\t\t\tconst iterator = chunks[Symbol.iterator]();\n+\t\t\t\t\t\tlet result = iterator.next();\n+\t\t\t\t\t\tif (result.done) return ZERO;\n+\t\t\t\t\t\tconst first = result.value;\n+\t\t\t\t\t\tresult = iterator.next();\n+\t\t\t\t\t\tif (result.done) return first;\n+\t\t\t\t\t\tlet key =\n+\t\t\t\t\t\t\tchunkIndexMap.get(first) | chunkIndexMap.get(result.value);\n+\t\t\t\t\t\twhile (!(result = iterator.next()).done) {\n+\t\t\t\t\t\t\tkey = key | chunkIndexMap.get(result.value);\n \t\t\t\t\t\t}\n \t\t\t\t\t\treturn key;\n \t\t\t\t\t};\n+\t\t\t\t\tconst keyToString = key => {\n+\t\t\t\t\t\tif (typeof key === \"bigint\") return key.toString(16);\n+\t\t\t\t\t\treturn chunkIndexMap.get(key).toString(16);\n+\t\t\t\t\t};\n \n \t\t\t\t\tconst getChunkSetsInGraph = memorize(() => {\n \t\t\t\t\t\t/** @type {Map<bigint, Set<Chunk>>} */\n \t\t\t\t\t\tconst chunkSetsInGraph = new Map();\n+\t\t\t\t\t\t/** @type {Set<Chunk>} */\n+\t\t\t\t\t\tconst singleChunkSets = new Set();\n \t\t\t\t\t\tfor (const module of compilation.modules) {\n-\t\t\t\t\t\t\tconst chunksKey = getKey(\n-\t\t\t\t\t\t\t\tchunkGraph.getModuleChunksIterable(module)\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\tif (!chunkSetsInGraph.has(chunksKey)) {\n-\t\t\t\t\t\t\t\tchunkSetsInGraph.set(\n-\t\t\t\t\t\t\t\t\tchunksKey,\n-\t\t\t\t\t\t\t\t\tnew Set(chunkGraph.getModuleChunksIterable(module))\n-\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tconst chunks = chunkGraph.getModuleChunksIterable(module);\n+\t\t\t\t\t\t\tconst chunksKey = getKey(chunks);\n+\t\t\t\t\t\t\tif (typeof chunksKey === \"bigint\") {\n+\t\t\t\t\t\t\t\tif (!chunkSetsInGraph.has(chunksKey)) {\n+\t\t\t\t\t\t\t\t\tchunkSetsInGraph.set(chunksKey, new Set(chunks));\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tsingleChunkSets.add(chunksKey);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n-\t\t\t\t\t\treturn chunkSetsInGraph;\n+\t\t\t\t\t\treturn { chunkSetsInGraph, singleChunkSets };\n \t\t\t\t\t});\n \n \t\t\t\t\t/**\n@@ -758,17 +772,23 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\tconst getExportsChunkSetsInGraph = memorize(() => {\n \t\t\t\t\t\t/** @type {Map<bigint, Set<Chunk>>} */\n \t\t\t\t\t\tconst chunkSetsInGraph = new Map();\n+\t\t\t\t\t\t/** @type {Set<Chunk>} */\n+\t\t\t\t\t\tconst singleChunkSets = new Set();\n \t\t\t\t\t\tfor (const module of compilation.modules) {\n \t\t\t\t\t\t\tconst groupedChunks = Array.from(groupChunksByExports(module));\n \t\t\t\t\t\t\tgroupedByExportsMap.set(module, groupedChunks);\n \t\t\t\t\t\t\tfor (const chunks of groupedChunks) {\n-\t\t\t\t\t\t\t\tconst chunksKey = getKey(chunks);\n-\t\t\t\t\t\t\t\tif (!chunkSetsInGraph.has(chunksKey)) {\n-\t\t\t\t\t\t\t\t\tchunkSetsInGraph.set(chunksKey, new Set(chunks));\n+\t\t\t\t\t\t\t\tif (chunks.length === 1) {\n+\t\t\t\t\t\t\t\t\tsingleChunkSets.add(chunks[0]);\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tconst chunksKey = /** @type {bigint} */ (getKey(chunks));\n+\t\t\t\t\t\t\t\t\tif (!chunkSetsInGraph.has(chunksKey)) {\n+\t\t\t\t\t\t\t\t\t\tchunkSetsInGraph.set(chunksKey, new Set(chunks));\n+\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n-\t\t\t\t\t\treturn chunkSetsInGraph;\n+\t\t\t\t\t\treturn { chunkSetsInGraph, singleChunkSets };\n \t\t\t\t\t});\n \n \t\t\t\t\t// group these set of chunks by count\n@@ -789,67 +809,93 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\treturn chunkSetsByCount;\n \t\t\t\t\t};\n \t\t\t\t\tconst getChunkSetsByCount = memorize(() =>\n-\t\t\t\t\t\tgroupChunkSetsByCount(getChunkSetsInGraph().values())\n+\t\t\t\t\t\tgroupChunkSetsByCount(\n+\t\t\t\t\t\t\tgetChunkSetsInGraph().chunkSetsInGraph.values()\n+\t\t\t\t\t\t)\n \t\t\t\t\t);\n \t\t\t\t\tconst getExportsChunkSetsByCount = memorize(() =>\n-\t\t\t\t\t\tgroupChunkSetsByCount(getExportsChunkSetsInGraph().values())\n+\t\t\t\t\t\tgroupChunkSetsByCount(\n+\t\t\t\t\t\t\tgetExportsChunkSetsInGraph().chunkSetsInGraph.values()\n+\t\t\t\t\t\t)\n \t\t\t\t\t);\n \n \t\t\t\t\t// Create a list of possible combinations\n-\t\t\t\t\tconst createGetCombinations = (chunkSets, chunkSetsByCount) => {\n-\t\t\t\t\t\t/** @type {Map<bigint, Set<Chunk>[]>} */\n+\t\t\t\t\tconst createGetCombinations = (\n+\t\t\t\t\t\tchunkSets,\n+\t\t\t\t\t\tsingleChunkSets,\n+\t\t\t\t\t\tchunkSetsByCount\n+\t\t\t\t\t) => {\n+\t\t\t\t\t\t/** @type {Map<bigint | Chunk, (Set<Chunk> | Chunk)[]>} */\n \t\t\t\t\t\tconst combinationsCache = new Map();\n \n \t\t\t\t\t\treturn key => {\n \t\t\t\t\t\t\tconst cacheEntry = combinationsCache.get(key);\n \t\t\t\t\t\t\tif (cacheEntry !== undefined) return cacheEntry;\n+\t\t\t\t\t\t\tif (key instanceof Chunk) {\n+\t\t\t\t\t\t\t\tconst result = [key];\n+\t\t\t\t\t\t\t\tcombinationsCache.set(key, result);\n+\t\t\t\t\t\t\t\treturn result;\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tconst chunksSet = chunkSets.get(key);\n-\t\t\t\t\t\t\t/** @type {Set<Chunk>[]} */\n-\t\t\t\t\t\t\tvar array = [chunksSet];\n-\t\t\t\t\t\t\tif (chunksSet.size > 1) {\n-\t\t\t\t\t\t\t\tfor (const [count, setArray] of chunkSetsByCount) {\n-\t\t\t\t\t\t\t\t\t// \"equal\" is not needed because they would have been merge in the first step\n-\t\t\t\t\t\t\t\t\tif (count < chunksSet.size) {\n-\t\t\t\t\t\t\t\t\t\tfor (const set of setArray) {\n-\t\t\t\t\t\t\t\t\t\t\tif (isSubset(chunksSet, set)) {\n-\t\t\t\t\t\t\t\t\t\t\t\tarray.push(set);\n-\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t/** @type {(Set<Chunk> | Chunk)[]} */\n+\t\t\t\t\t\t\tconst array = [chunksSet];\n+\t\t\t\t\t\t\tfor (const [count, setArray] of chunkSetsByCount) {\n+\t\t\t\t\t\t\t\t// \"equal\" is not needed because they would have been merge in the first step\n+\t\t\t\t\t\t\t\tif (count < chunksSet.size) {\n+\t\t\t\t\t\t\t\t\tfor (const set of setArray) {\n+\t\t\t\t\t\t\t\t\t\tif (isSubset(chunksSet, set)) {\n+\t\t\t\t\t\t\t\t\t\t\tarray.push(set);\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tfor (const chunk of singleChunkSets) {\n+\t\t\t\t\t\t\t\tif (chunksSet.has(chunk)) {\n+\t\t\t\t\t\t\t\t\tarray.push(chunk);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tcombinationsCache.set(key, array);\n \t\t\t\t\t\t\treturn array;\n \t\t\t\t\t\t};\n \t\t\t\t\t};\n \n-\t\t\t\t\tconst getCombinationsFactory = memorize(() =>\n-\t\t\t\t\t\tcreateGetCombinations(getChunkSetsInGraph(), getChunkSetsByCount())\n-\t\t\t\t\t);\n+\t\t\t\t\tconst getCombinationsFactory = memorize(() => {\n+\t\t\t\t\t\tconst { chunkSetsInGraph, singleChunkSets } = getChunkSetsInGraph();\n+\t\t\t\t\t\treturn createGetCombinations(\n+\t\t\t\t\t\t\tchunkSetsInGraph,\n+\t\t\t\t\t\t\tsingleChunkSets,\n+\t\t\t\t\t\t\tgetChunkSetsByCount()\n+\t\t\t\t\t\t);\n+\t\t\t\t\t});\n \t\t\t\t\tconst getCombinations = key => getCombinationsFactory()(key);\n \n-\t\t\t\t\tconst getExportsCombinationsFactory = memorize(() =>\n-\t\t\t\t\t\tcreateGetCombinations(\n-\t\t\t\t\t\t\tgetExportsChunkSetsInGraph(),\n+\t\t\t\t\tconst getExportsCombinationsFactory = memorize(() => {\n+\t\t\t\t\t\tconst {\n+\t\t\t\t\t\t\tchunkSetsInGraph,\n+\t\t\t\t\t\t\tsingleChunkSets\n+\t\t\t\t\t\t} = getExportsChunkSetsInGraph();\n+\t\t\t\t\t\treturn createGetCombinations(\n+\t\t\t\t\t\t\tchunkSetsInGraph,\n+\t\t\t\t\t\t\tsingleChunkSets,\n \t\t\t\t\t\t\tgetExportsChunkSetsByCount()\n-\t\t\t\t\t\t)\n-\t\t\t\t\t);\n+\t\t\t\t\t\t);\n+\t\t\t\t\t});\n \t\t\t\t\tconst getExportsCombinations = key =>\n \t\t\t\t\t\tgetExportsCombinationsFactory()(key);\n \n \t\t\t\t\t/**\n \t\t\t\t\t * @typedef {Object} SelectedChunksResult\n \t\t\t\t\t * @property {Chunk[]} chunks the list of chunks\n-\t\t\t\t\t * @property {bigint} key a key of the list\n+\t\t\t\t\t * @property {bigint | Chunk} key a key of the list\n \t\t\t\t\t */\n \n-\t\t\t\t\t/** @type {WeakMap<Set<Chunk>, WeakMap<ChunkFilterFunction, SelectedChunksResult>>} */\n+\t\t\t\t\t/** @type {WeakMap<Set<Chunk> | Chunk, WeakMap<ChunkFilterFunction, SelectedChunksResult>>} */\n \t\t\t\t\tconst selectedChunksCacheByChunksSet = new WeakMap();\n \n \t\t\t\t\t/**\n \t\t\t\t\t * get list and key by applying the filter function to the list\n \t\t\t\t\t * It is cached for performance reasons\n-\t\t\t\t\t * @param {Set<Chunk>} chunks list of chunks\n+\t\t\t\t\t * @param {Set<Chunk> | Chunk} chunks list of chunks\n \t\t\t\t\t * @param {ChunkFilterFunction} chunkFilter filter function for chunks\n \t\t\t\t\t * @returns {SelectedChunksResult} list and key\n \t\t\t\t\t */\n@@ -864,8 +910,12 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\tif (entry2 === undefined) {\n \t\t\t\t\t\t\t/** @type {Chunk[]} */\n \t\t\t\t\t\t\tconst selectedChunks = [];\n-\t\t\t\t\t\t\tfor (const chunk of chunks) {\n-\t\t\t\t\t\t\t\tif (chunkFilter(chunk)) selectedChunks.push(chunk);\n+\t\t\t\t\t\t\tif (chunks instanceof Chunk) {\n+\t\t\t\t\t\t\t\tif (chunkFilter(chunks)) selectedChunks.push(chunks);\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tfor (const chunk of chunks) {\n+\t\t\t\t\t\t\t\t\tif (chunkFilter(chunk)) selectedChunks.push(chunk);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tentry2 = {\n \t\t\t\t\t\t\t\tchunks: selectedChunks,\n@@ -888,7 +938,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t * @param {CacheGroup} cacheGroup the current cache group\n \t\t\t\t\t * @param {number} cacheGroupIndex the index of the cache group of ordering\n \t\t\t\t\t * @param {Chunk[]} selectedChunks chunks selected for this module\n-\t\t\t\t\t * @param {bigint} selectedChunksKey a key of selectedChunks\n+\t\t\t\t\t * @param {bigint | Chunk} selectedChunksKey a key of selectedChunks\n \t\t\t\t\t * @param {Module} module the current module\n \t\t\t\t\t * @returns {void}\n \t\t\t\t\t */\n@@ -933,7 +983,9 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t// This automatically merges equal names\n \t\t\t\t\t\tconst key =\n \t\t\t\t\t\t\tcacheGroup.key +\n-\t\t\t\t\t\t\t(name ? ` name:${name}` : ` chunks:${selectedChunksKey}`);\n+\t\t\t\t\t\t\t(name\n+\t\t\t\t\t\t\t\t? ` name:${name}`\n+\t\t\t\t\t\t\t\t: ` chunks:${keyToString(selectedChunksKey)}`);\n \t\t\t\t\t\t// Add module to maps\n \t\t\t\t\t\tlet info = chunksInfoMap.get(key);\n \t\t\t\t\t\tif (info === undefined) {\n@@ -994,7 +1046,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\tconst getCombsByUsedExports = memorize(() => {\n \t\t\t\t\t\t\t// fill the groupedByExportsMap\n \t\t\t\t\t\t\tgetExportsChunkSetsInGraph();\n-\t\t\t\t\t\t\t/** @type {Set<Set<Chunk>>} */\n+\t\t\t\t\t\t\t/** @type {Set<Set<Chunk> | Chunk>} */\n \t\t\t\t\t\t\tconst set = new Set();\n \t\t\t\t\t\t\tconst groupedByUsedExports = groupedByExportsMap.get(module);\n \t\t\t\t\t\t\tfor (const chunks of groupedByUsedExports) {\n@@ -1015,7 +1067,9 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t// For all combination of chunk selection\n \t\t\t\t\t\t\tfor (const chunkCombination of combs) {\n \t\t\t\t\t\t\t\t// Break if minimum number of chunks is not reached\n-\t\t\t\t\t\t\t\tif (chunkCombination.size < cacheGroup.minChunks) continue;\n+\t\t\t\t\t\t\t\tconst count =\n+\t\t\t\t\t\t\t\t\tchunkCombination instanceof Chunk ? 1 : chunkCombination.size;\n+\t\t\t\t\t\t\t\tif (count < cacheGroup.minChunks) continue;\n \t\t\t\t\t\t\t\t// Select chunks by configuration\n \t\t\t\t\t\t\t\tconst {\n \t\t\t\t\t\t\t\t\tchunks: selectedChunks,"
      },
      {
        "sha": "9f77c020bc492bc2c57ef7bfc7696db405f2d951",
        "filename": "lib/util/StringXor.js",
        "status": "added",
        "additions": 49,
        "deletions": 0,
        "changes": 49,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Futil%2FStringXor.js",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/lib%2Futil%2FStringXor.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FStringXor.js?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -0,0 +1,49 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+class StringXor {\n+\tconstructor() {\n+\t\tthis._value = undefined;\n+\t\tthis._buffer = undefined;\n+\t}\n+\n+\tadd(str) {\n+\t\tlet buf = this._buffer;\n+\t\tlet value;\n+\t\tif (buf === undefined) {\n+\t\t\tbuf = this._buffer = Buffer.from(str, \"latin1\");\n+\t\t\tthis._value = Buffer.from(buf);\n+\t\t\treturn;\n+\t\t} else if (buf.length !== str.length) {\n+\t\t\tvalue = this._value;\n+\t\t\tbuf = this._buffer = Buffer.from(str, \"latin1\");\n+\t\t\tif (value.length < buf.length) {\n+\t\t\t\tthis._value = Buffer.allocUnsafe(buf.length);\n+\t\t\t\tvalue.copy(this._value);\n+\t\t\t\tthis._value.fill(0, value.length);\n+\t\t\t\tvalue = this._value;\n+\t\t\t}\n+\t\t} else {\n+\t\t\tvalue = this._value;\n+\t\t\tbuf.write(str, \"latin1\");\n+\t\t}\n+\t\tconst len = buf.length;\n+\t\tfor (let i = 0; i < len; i++) {\n+\t\t\tvalue[i] = value[i] ^ buf[i];\n+\t\t}\n+\t}\n+\n+\ttoString() {\n+\t\treturn this._value === undefined ? \"\" : this._value.toString(\"latin1\");\n+\t}\n+\n+\tupdateHash(hash) {\n+\t\tif (this._value !== undefined) hash.update(this._value);\n+\t}\n+}\n+\n+module.exports = StringXor;"
      },
      {
        "sha": "0b63caba41a2956531413e2c2606fa6c53649f50",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 181,
        "deletions": 142,
        "changes": 323,
        "blob_url": "https://github.com/webpack/webpack/blob/0b66fdacdf399e022b96d56565fab89206663ab8/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/0b66fdacdf399e022b96d56565fab89206663ab8/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=0b66fdacdf399e022b96d56565fab89206663ab8",
        "patch": "@@ -1,55 +1,55 @@\n // Jest Snapshot v1, https://goo.gl/fbAQLP\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n-\"Hash: 7f52b0015b13d157fbc002e485634123a94e9c9d\n+\"Hash: 3cea87b04e295cb18b75b371e83b915ef2991c38\n Child fitting:\n-    Hash: 7f52b0015b13d157fbc0\n+    Hash: 3cea87b04e295cb18b75\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n     asset fitting-2ce4172190249c003ff7.js 1.08 KiB [emitted] [immutable]\n-    asset fitting-48603b4a6b009232d19f.js 14.1 KiB [emitted] [immutable]\n-    asset fitting-bc3aac1690277ea5ccd2.js 1.91 KiB [emitted] [immutable]\n-    asset fitting-f68a7570a13e9aeb3974.js 1.91 KiB [emitted] [immutable]\n-    Entrypoint main = fitting-f68a7570a13e9aeb3974.js fitting-bc3aac1690277ea5ccd2.js fitting-48603b4a6b009232d19f.js\n-    chunk (runtime: main) fitting-48603b4a6b009232d19f.js 1.87 KiB (javascript) 7.31 KiB (runtime) [entry] [rendered]\n+    asset fitting-777c89201ccc4c88cf23.js 1.91 KiB [emitted] [immutable]\n+    asset fitting-8bda2dbdb4c050049cab.js 14.1 KiB [emitted] [immutable]\n+    asset fitting-d910406fbdc08b5ed848.js 1.91 KiB [emitted] [immutable]\n+    Entrypoint main = fitting-d910406fbdc08b5ed848.js fitting-777c89201ccc4c88cf23.js fitting-8bda2dbdb4c050049cab.js\n+    chunk (runtime: main) fitting-8bda2dbdb4c050049cab.js 1.87 KiB (javascript) 7.31 KiB (runtime) [entry] [rendered]\n         > ./index main\n      ./e.js 899 bytes [built]\n      ./f.js 900 bytes [built]\n      ./index.js 111 bytes [built]\n          + 9 hidden chunk modules\n-    chunk (runtime: main) fitting-bc3aac1690277ea5ccd2.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk (runtime: main) fitting-777c89201ccc4c88cf23.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./c.js 899 bytes [built]\n      ./d.js 899 bytes [built]\n-    chunk (runtime: main) fitting-f68a7570a13e9aeb3974.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk (runtime: main) fitting-d910406fbdc08b5ed848.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./a.js 899 bytes [built]\n      ./b.js 899 bytes [built]\n     chunk (runtime: main) fitting-2ce4172190249c003ff7.js 916 bytes [rendered]\n         > ./g ./index.js 7:0-13\n      ./g.js 916 bytes [built]\n Child content-change:\n-    Hash: 02e485634123a94e9c9d\n+    Hash: b371e83b915ef2991c38\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n-    asset content-change-137f090eaaf54d566aa9.js 14.1 KiB [emitted] [immutable]\n+    asset content-change-18606cb0b9e415dbf537.js 14.1 KiB [emitted] [immutable]\n     asset content-change-2ce4172190249c003ff7.js 1.08 KiB [emitted] [immutable]\n-    asset content-change-bc3aac1690277ea5ccd2.js 1.91 KiB [emitted] [immutable]\n-    asset content-change-f68a7570a13e9aeb3974.js 1.91 KiB [emitted] [immutable]\n-    Entrypoint main = content-change-f68a7570a13e9aeb3974.js content-change-bc3aac1690277ea5ccd2.js content-change-137f090eaaf54d566aa9.js\n-    chunk (runtime: main) content-change-137f090eaaf54d566aa9.js 1.87 KiB (javascript) 7.32 KiB (runtime) [entry] [rendered]\n+    asset content-change-777c89201ccc4c88cf23.js 1.91 KiB [emitted] [immutable]\n+    asset content-change-d910406fbdc08b5ed848.js 1.91 KiB [emitted] [immutable]\n+    Entrypoint main = content-change-d910406fbdc08b5ed848.js content-change-777c89201ccc4c88cf23.js content-change-18606cb0b9e415dbf537.js\n+    chunk (runtime: main) content-change-18606cb0b9e415dbf537.js 1.87 KiB (javascript) 7.32 KiB (runtime) [entry] [rendered]\n         > ./index main\n      ./e.js 899 bytes [built]\n      ./f.js 900 bytes [built]\n      ./index.js 111 bytes [built]\n          + 9 hidden chunk modules\n-    chunk (runtime: main) content-change-bc3aac1690277ea5ccd2.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk (runtime: main) content-change-777c89201ccc4c88cf23.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./c.js 899 bytes [built]\n      ./d.js 899 bytes [built]\n-    chunk (runtime: main) content-change-f68a7570a13e9aeb3974.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk (runtime: main) content-change-d910406fbdc08b5ed848.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./a.js 899 bytes [built]\n      ./b.js 899 bytes [built]\n@@ -59,56 +59,56 @@ Child content-change:\n `;\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n-\"Hash: 27038a11ce852dfba1c1\n+\"Hash: 70fbd7febd1655607e8f\n Time: X ms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n+asset 0925b174634cc781a545.js 1.91 KiB [emitted] [immutable]\n asset 2cabfc3b8313a67a4c2c.js 1010 bytes [emitted] [immutable]\n-asset 304c56177677530c2720.js 1.91 KiB [emitted] [immutable]\n-asset 41467272e32d322bf552.js 1.91 KiB [emitted] [immutable]\n-asset 542810369e2cee6caca4.js 1.91 KiB [emitted] [immutable]\n+asset 39b3e05de61888270c74.js 1.91 KiB [emitted] [immutable]\n+asset 3e1174afbe76dd33d63b.js 1.91 KiB [emitted] [immutable]\n+asset 7276ad5f96c10b5b59b8.js 1.91 KiB [emitted] [immutable]\n+asset 777c89201ccc4c88cf23.js 1.91 KiB [emitted] [immutable]\n asset 8635445dc14cc0897dd3.js 1010 bytes [emitted] [immutable]\n asset 87489f9b4bf317385523.js 1010 bytes [emitted] [immutable]\n-asset b0769053401d5641b78a.js 10.2 KiB [emitted] [immutable] (name: main)\n-asset b8ad0428494bc567e4b6.js 1.91 KiB [emitted] [immutable]\n-asset bc3aac1690277ea5ccd2.js 1.91 KiB [emitted] [immutable]\n-asset cb46ab61fbab48b269a9.js 1.91 KiB [emitted] [immutable]\n-asset de0a7b7e1deeb417820e.js 1.91 KiB [emitted] [immutable]\n-asset ffc712973cdbcb9d00e5.js 1.91 KiB [emitted] [immutable]\n-Entrypoint main = b0769053401d5641b78a.js\n-chunk (runtime: main) bc3aac1690277ea5ccd2.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+asset be7ae128cfddc089762e.js 1.91 KiB [emitted] [immutable]\n+asset c46bd63d6c0ffc10b349.js 1.91 KiB [emitted] [immutable]\n+asset c57b1e26ce16da2c818f.js 1.91 KiB [emitted] [immutable]\n+asset fccf7eb97d0d4d52954a.js 10.2 KiB [emitted] [immutable] (name: main)\n+Entrypoint main = fccf7eb97d0d4d52954a.js\n+chunk (runtime: main) 777c89201ccc4c88cf23.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./c ./d ./e ./index.js 3:0-30\n  ./c.js 899 bytes [built]\n  ./d.js 899 bytes [built]\n-chunk (runtime: main) b0769053401d5641b78a.js (main) 248 bytes (javascript) 5.19 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) fccf7eb97d0d4d52954a.js (main) 248 bytes (javascript) 5.19 KiB (runtime) [entry] [rendered]\n     > ./index main\n  ./index.js 248 bytes [built]\n      + 6 hidden chunk modules\n-chunk (runtime: main) ffc712973cdbcb9d00e5.js 1.76 KiB [rendered]\n+chunk (runtime: main) 39b3e05de61888270c74.js 1.76 KiB [rendered]\n     > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n  ./j.js 901 bytes [built]\n  ./k.js 899 bytes [built]\n chunk (runtime: main) 2cabfc3b8313a67a4c2c.js 899 bytes [rendered]\n     > ./c ./d ./e ./index.js 3:0-30\n     > ./b ./d ./e ./f ./g ./index.js 5:0-44\n  ./e.js 899 bytes [built]\n-chunk (runtime: main) 304c56177677530c2720.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) be7ae128cfddc089762e.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n  ./i.js 899 bytes [built]\n  ./j.js 901 bytes [built]\n-chunk (runtime: main) de0a7b7e1deeb417820e.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 7276ad5f96c10b5b59b8.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n  ./e.js 899 bytes [built]\n  ./h.js 899 bytes [built]\n-chunk (runtime: main) 41467272e32d322bf552.js 1.76 KiB [rendered]\n+chunk (runtime: main) c46bd63d6c0ffc10b349.js 1.76 KiB [rendered]\n     > ./b ./c ./index.js 2:0-23\n  ./b.js 899 bytes [built]\n  ./c.js 899 bytes [built]\n-chunk (runtime: main) b8ad0428494bc567e4b6.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) c57b1e26ce16da2c818f.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n  ./h.js 899 bytes [built]\n  ./i.js 899 bytes [built]\n-chunk (runtime: main) 542810369e2cee6caca4.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 0925b174634cc781a545.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k ./index.js 4:0-51\n     > ./b ./d ./e ./f ./g ./index.js 5:0-44\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n@@ -117,7 +117,7 @@ chunk (runtime: main) 542810369e2cee6caca4.js 1.76 KiB [rendered] [recorded] agg\n chunk (runtime: main) 8635445dc14cc0897dd3.js 899 bytes [rendered]\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n  ./k.js 899 bytes [built]\n-chunk (runtime: main) cb46ab61fbab48b269a9.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk (runtime: main) 3e1174afbe76dd33d63b.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g ./index.js 5:0-44\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k ./index.js 6:0-72\n  ./b.js 899 bytes [built]\n@@ -128,7 +128,7 @@ chunk (runtime: main) 87489f9b4bf317385523.js 899 bytes [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for asset 1`] = `\n-\"Hash: 7a656436e45bf36da28b\n+\"Hash: 4a5e54fc355f298ca288\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] (auxiliary name: main)\n@@ -447,7 +447,7 @@ Child all:\n `;\n \n exports[`StatsTestCases should print correct stats for chunk-module-id-range 1`] = `\n-\"Hash: 64306788071e5e0d9e6c\n+\"Hash: b09588f244aed9b4de44\n Time: X ms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -474,7 +474,7 @@ chunk main2.js (main2) 136 bytes (javascript) 668 bytes (runtime) [entry] [rende\n `;\n \n exports[`StatsTestCases should print correct stats for chunks 1`] = `\n-\"Hash: c04fb71543d7233dc36a\n+\"Hash: a91f816c5859ab61a26a\n Time: X ms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -517,7 +517,7 @@ chunk (runtime: main) 996.bundle.js 22 bytes <{179}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for chunks-development 1`] = `\n-\"Hash: 9bbbb063d69924a0bf41\n+\"Hash: 073e1516ec17494b3898\n Time: X ms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -601,7 +601,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32>main.js</CLR>\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-0 1`] = `\n-\"Hash: d4cc06aa357392fdfc73\n+\"Hash: b96c5a233eb1688dd315\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 429.js 278 bytes [emitted] (id hint: vendor-1)\n@@ -618,7 +618,7 @@ Entrypoint entry-1 = 429.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-Infinity 1`] = `\n-\"Hash: 13b2cdecc8ead47df49c\n+\"Hash: 0c514901cd16479cd4c3\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset entry-1.js 5.59 KiB [emitted] (name: entry-1)\n@@ -635,24 +635,24 @@ Entrypoint entry-1 = vendor-1.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"Hash: 2d4387e2b26df91bae522610a52458062eacdded\n+\"Hash: d1a06bc935a1cfd31918482b53e7ddc901745e87\n Child\n-    Hash: 2d4387e2b26df91bae52\n+    Hash: d1a06bc935a1cfd31918\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset app.f6185bf52c9cc14eb23a-1.js 6.13 KiB [emitted] [immutable] (name: app)\n-    asset vendor.3966b6d7f97401321740-1.js 615 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-    Entrypoint app = vendor.3966b6d7f97401321740-1.js app.f6185bf52c9cc14eb23a-1.js\n+    asset app.7ac6821d933504caf880-1.js 6.13 KiB [emitted] [immutable] (name: app)\n+    asset vendor.fe9978592064920d8678-1.js 615 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n+    Entrypoint app = vendor.fe9978592064920d8678-1.js app.7ac6821d933504caf880-1.js\n     ./entry-1.js + 2 modules 185 bytes [built]\n     ./constants.js 87 bytes [built]\n         + 5 hidden modules\n Child\n-    Hash: 2610a52458062eacdded\n+    Hash: 482b53e7ddc901745e87\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset app.943d01c51ac0980a628b-2.js 6.14 KiB [emitted] [immutable] (name: app)\n-    asset vendor.3966b6d7f97401321740-2.js 615 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n-    Entrypoint app = vendor.3966b6d7f97401321740-2.js app.943d01c51ac0980a628b-2.js\n+    asset app.b963ebd3b0e81f8204e9-2.js 6.14 KiB [emitted] [immutable] (name: app)\n+    asset vendor.fe9978592064920d8678-2.js 615 bytes [emitted] [immutable] (name: vendor) (id hint: vendor)\n+    Entrypoint app = vendor.fe9978592064920d8678-2.js app.b963ebd3b0e81f8204e9-2.js\n     ./entry-2.js + 2 modules 192 bytes [built]\n     ./constants.js 87 bytes [built]\n         + 5 hidden modules\"\n@@ -678,48 +678,48 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"Hash: 3cc756d27811b8706e673cc756d27811b8706e67ebad5d9de9903b4c971febad5d9de9903b4c971f\n+\"Hash: 6d906f43900f4bd1d4b56d906f43900f4bd1d4b5e118175cf8c57500afe5e118175cf8c57500afe5\n Child\n-    Hash: 3cc756d27811b8706e67\n+    Hash: 6d906f43900f4bd1d4b5\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset 664-e0de9ed13fdf5a239644.js 457 bytes [emitted] [immutable]\n-      sourceMap 664-e0de9ed13fdf5a239644.js.map 344 bytes [emitted] [dev]\n-    asset main-7b6b9219458fa739aa2a.js 8.95 KiB [emitted] [immutable] (name: main)\n-      sourceMap main-7b6b9219458fa739aa2a.js.map 7.96 KiB [emitted] [dev] (auxiliary name: main)\n-    Entrypoint main = main-7b6b9219458fa739aa2a.js (main-7b6b9219458fa739aa2a.js.map)\n+    asset 664-86b829db209d9229fef8.js 457 bytes [emitted] [immutable]\n+      sourceMap 664-86b829db209d9229fef8.js.map 344 bytes [emitted] [dev]\n+    asset main-b0a26a04443520866e0f.js 8.95 KiB [emitted] [immutable] (name: main)\n+      sourceMap main-b0a26a04443520866e0f.js.map 7.96 KiB [emitted] [dev] (auxiliary name: main)\n+    Entrypoint main = main-b0a26a04443520866e0f.js (main-b0a26a04443520866e0f.js.map)\n     ./a/index.js 40 bytes [built]\n     ./a/chunk.js + 1 modules 66 bytes [built]\n         + 8 hidden modules\n Child\n-    Hash: 3cc756d27811b8706e67\n+    Hash: 6d906f43900f4bd1d4b5\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset 664-e0de9ed13fdf5a239644.js 457 bytes [emitted] [immutable]\n-      sourceMap 664-e0de9ed13fdf5a239644.js.map 344 bytes [emitted] [dev]\n-    asset main-7b6b9219458fa739aa2a.js 8.95 KiB [emitted] [immutable] (name: main)\n-      sourceMap main-7b6b9219458fa739aa2a.js.map 7.96 KiB [emitted] [dev] (auxiliary name: main)\n-    Entrypoint main = main-7b6b9219458fa739aa2a.js (main-7b6b9219458fa739aa2a.js.map)\n+    asset 664-86b829db209d9229fef8.js 457 bytes [emitted] [immutable]\n+      sourceMap 664-86b829db209d9229fef8.js.map 344 bytes [emitted] [dev]\n+    asset main-b0a26a04443520866e0f.js 8.95 KiB [emitted] [immutable] (name: main)\n+      sourceMap main-b0a26a04443520866e0f.js.map 7.96 KiB [emitted] [dev] (auxiliary name: main)\n+    Entrypoint main = main-b0a26a04443520866e0f.js (main-b0a26a04443520866e0f.js.map)\n     ./b/index.js 40 bytes [built]\n     ./b/chunk.js + 1 modules 66 bytes [built]\n         + 8 hidden modules\n Child\n-    Hash: ebad5d9de9903b4c971f\n+    Hash: e118175cf8c57500afe5\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset 664-c4ff7b1035d4a5feef64.js 1.51 KiB [emitted] [immutable]\n-    asset main-c985ecad55a169b202fb.js 9.84 KiB [emitted] [immutable] (name: main)\n-    Entrypoint main = main-c985ecad55a169b202fb.js\n+    asset 664-88b7437bfddd47731764.js 1.51 KiB [emitted] [immutable]\n+    asset main-15b30585ef6893085ced.js 9.84 KiB [emitted] [immutable] (name: main)\n+    Entrypoint main = main-15b30585ef6893085ced.js\n     ./a/index.js 40 bytes [built]\n     ./a/chunk.js + 1 modules 66 bytes [built]\n         + 8 hidden modules\n Child\n-    Hash: ebad5d9de9903b4c971f\n+    Hash: e118175cf8c57500afe5\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset 664-c4ff7b1035d4a5feef64.js 1.51 KiB [emitted] [immutable]\n-    asset main-c985ecad55a169b202fb.js 9.84 KiB [emitted] [immutable] (name: main)\n-    Entrypoint main = main-c985ecad55a169b202fb.js\n+    asset 664-88b7437bfddd47731764.js 1.51 KiB [emitted] [immutable]\n+    asset main-15b30585ef6893085ced.js 9.84 KiB [emitted] [immutable] (name: main)\n+    Entrypoint main = main-15b30585ef6893085ced.js\n     ./b/index.js 40 bytes [built]\n     ./b/chunk.js + 1 modules 66 bytes [built]\n         + 8 hidden modules\"\n@@ -796,7 +796,7 @@ chunk (runtime: a) a.js (a) 22 bytes [entry] [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for exclude-with-loader 1`] = `\n-\"Hash: ea096fe5f45dcf33613a\n+\"Hash: 0f9eb63e65113c4a3960\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset bundle.js 3.73 KiB [emitted] (name: main)\n@@ -808,7 +808,7 @@ Entrypoint main = bundle.js (89245aae14d2d745f85a29195aa6ffc1.json)\n `;\n \n exports[`StatsTestCases should print correct stats for external 1`] = `\n-\"Hash: f4eebb92b151379afdf0\n+\"Hash: 9978ce02fe54941151a1\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset main.js 1.2 KiB [emitted] (name: main)\n@@ -818,9 +818,9 @@ external \\\\\"test\\\\\" 42 bytes [built]\"\n `;\n \n exports[`StatsTestCases should print correct stats for filter-warnings 1`] = `\n-\"Hash: 0f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e10f5fbc2246d7575d11e1\n+\"Hash: a5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aaa5b6c739ac29303bf2aa\n Child undefined:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle0.js 556 bytes [emitted] [minimized] (name: main)\n@@ -849,43 +849,43 @@ Child undefined:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child Terser:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle1.js 556 bytes [emitted] [minimized] (name: main)\n     Entrypoint main = bundle1.js\n Child /Terser/:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle2.js 556 bytes [emitted] [minimized] (name: main)\n     Entrypoint main = bundle2.js\n Child warnings => true:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle3.js 556 bytes [emitted] [minimized] (name: main)\n     Entrypoint main = bundle3.js\n Child [Terser]:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle4.js 556 bytes [emitted] [minimized] (name: main)\n     Entrypoint main = bundle4.js\n Child [/Terser/]:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle5.js 556 bytes [emitted] [minimized] (name: main)\n     Entrypoint main = bundle5.js\n Child [warnings => true]:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle6.js 556 bytes [emitted] [minimized] (name: main)\n     Entrypoint main = bundle6.js\n Child should not filter:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle7.js 556 bytes [emitted] [minimized] (name: main)\n@@ -914,7 +914,7 @@ Child should not filter:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child /should not filter/:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle8.js 556 bytes [emitted] [minimized] (name: main)\n@@ -943,7 +943,7 @@ Child /should not filter/:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child warnings => false:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle9.js 556 bytes [emitted] [minimized] (name: main)\n@@ -972,7 +972,7 @@ Child warnings => false:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [should not filter]:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle10.js 556 bytes [emitted] [minimized] (name: main)\n@@ -1001,7 +1001,7 @@ Child [should not filter]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [/should not filter/]:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle11.js 556 bytes [emitted] [minimized] (name: main)\n@@ -1030,7 +1030,7 @@ Child [/should not filter/]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [warnings => false]:\n-    Hash: 0f5fbc2246d7575d11e1\n+    Hash: a5b6c739ac29303bf2aa\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle12.js 556 bytes [emitted] [minimized] (name: main)\n@@ -1154,12 +1154,12 @@ chunk trees.js (trees) 71 bytes [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for immutable 1`] = `\n-\"asset 0eab684fb60814ff321f.js 11.2 KiB [emitted] [immutable] (name: main)\n+\"asset 86c0b7ca424d8da2d79d.js 11.2 KiB [emitted] [immutable] (name: main)\n asset c62144f50210f5198a46.js 888 bytes [emitted] [immutable]\"\n `;\n \n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n-\"Hash: 3f20e50d5081a3727c56\n+\"Hash: dbd76047163edad1430a\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 398.js 484 bytes [emitted]\n@@ -1176,7 +1176,7 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for import-weak 1`] = `\n-\"Hash: af1bdbddb4677d0f07bb\n+\"Hash: adef98566df3f771207d\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 836.js 142 bytes [emitted]\n@@ -1212,49 +1212,49 @@ Compilation error while processing magic comment(-s): /* webpackPrefetch: nope *\n `;\n \n exports[`StatsTestCases should print correct stats for issue-7577 1`] = `\n-\"Hash: fb83f02daa601afbad74260280784b7c94401b8a30005c964cb38fcd71ee\n+\"Hash: 1b81c797085581b87feb8e6123b7fca33988143b41cadc2d06748c80473d\n Child\n-    Hash: fb83f02daa601afbad74\n+    Hash: 1b81c797085581b87feb\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset a-all-a_js-96a9d499d095df377e0e.js 144 bytes [emitted] [immutable] (id hint: all)\n     asset a-main-75ca7c3a6f28dc0e82f6.js 115 bytes [emitted] [immutable] (name: main)\n-    asset a-runtime~main-32a24e90ca6f130097fd.js 5.15 KiB [emitted] [immutable] (name: runtime~main)\n-    Entrypoint main = a-runtime~main-32a24e90ca6f130097fd.js a-all-a_js-96a9d499d095df377e0e.js a-main-75ca7c3a6f28dc0e82f6.js\n+    asset a-runtime~main-d33b9830d7eb52d3458b.js 5.15 KiB [emitted] [immutable] (name: runtime~main)\n+    Entrypoint main = a-runtime~main-d33b9830d7eb52d3458b.js a-all-a_js-96a9d499d095df377e0e.js a-main-75ca7c3a6f28dc0e82f6.js\n     ./a.js 18 bytes [built]\n         + 2 hidden modules\n Child\n-    Hash: 260280784b7c94401b8a\n+    Hash: 8e6123b7fca33988143b\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset b-all-b_js-e105234bdff412ed5b4a.js 479 bytes [emitted] [immutable] (id hint: all)\n+    asset b-all-b_js-bf62409959a8b47587bb.js 479 bytes [emitted] [immutable] (id hint: all)\n     asset b-main-cf285fb4c72c0ac8fed9.js 148 bytes [emitted] [immutable] (name: main)\n-    asset b-runtime~main-85e120260946486d534e.js 6.08 KiB [emitted] [immutable] (name: runtime~main)\n+    asset b-runtime~main-e0e0768945b0e9b11ffd.js 6.08 KiB [emitted] [immutable] (name: runtime~main)\n     asset b-vendors-node_modules_vendor_js-fd05d8267564d8631cf2.js 189 bytes [emitted] [immutable] (id hint: vendors)\n-    Entrypoint main = b-runtime~main-85e120260946486d534e.js b-vendors-node_modules_vendor_js-fd05d8267564d8631cf2.js b-all-b_js-e105234bdff412ed5b4a.js b-main-cf285fb4c72c0ac8fed9.js\n+    Entrypoint main = b-runtime~main-e0e0768945b0e9b11ffd.js b-vendors-node_modules_vendor_js-fd05d8267564d8631cf2.js b-all-b_js-bf62409959a8b47587bb.js b-main-cf285fb4c72c0ac8fed9.js\n     ./b.js 17 bytes [built]\n     ./node_modules/vendor.js 23 bytes [built]\n         + 4 hidden modules\n Child\n-    Hash: 30005c964cb38fcd71ee\n+    Hash: 41cadc2d06748c80473d\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n-    asset c-all-b_js-0b120f61b8a8d333d1fa.js 506 bytes [emitted] [immutable] (id hint: all)\n+    asset c-all-b_js-c22049bf9483dff35b22.js 506 bytes [emitted] [immutable] (id hint: all)\n     asset c-all-c_js-bd2625245a25f1ecb685.js 397 bytes [emitted] [immutable] (id hint: all)\n-    asset c-main-5281efad717c08fed777.js 607 bytes [emitted] [immutable] (name: main)\n-    asset c-runtime~main-eb37c43e0f01a5eb9289.js 12.4 KiB [emitted] [immutable] (name: runtime~main)\n+    asset c-main-998d41995a7f1e87428d.js 607 bytes [emitted] [immutable] (name: main)\n+    asset c-runtime~main-a0d04318387108922358.js 12.4 KiB [emitted] [immutable] (name: runtime~main)\n     asset c-vendors-node_modules_vendor_js-fd05d8267564d8631cf2.js 189 bytes [emitted] [immutable] (id hint: vendors)\n-    Entrypoint main = c-runtime~main-eb37c43e0f01a5eb9289.js c-all-c_js-bd2625245a25f1ecb685.js c-main-5281efad717c08fed777.js (prefetch: c-vendors-node_modules_vendor_js-fd05d8267564d8631cf2.js c-all-b_js-0b120f61b8a8d333d1fa.js)\n+    Entrypoint main = c-runtime~main-a0d04318387108922358.js c-all-c_js-bd2625245a25f1ecb685.js c-main-998d41995a7f1e87428d.js (prefetch: c-vendors-node_modules_vendor_js-fd05d8267564d8631cf2.js c-all-b_js-c22049bf9483dff35b22.js)\n     ./c.js 61 bytes [built]\n     ./b.js 17 bytes [built]\n     ./node_modules/vendor.js 23 bytes [built]\n         + 11 hidden modules\"\n `;\n \n exports[`StatsTestCases should print correct stats for limit-chunk-count-plugin 1`] = `\n-\"Hash: 4f7c13933d252b110a238078d4406e6cff4d407c9099e8e06920917be43d99dbb22cd3f251deb509\n+\"Hash: 6a5f0207a3fe8ebd8d4f1a9cd80b306cf88704e156ee3daa4db6b8852d1ab43e1fc20ff42e48c7b7\n Child 1 chunks:\n-    Hash: 4f7c13933d252b110a23\n+    Hash: 6a5f0207a3fe8ebd8d4f\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset bundle1.js 4.14 KiB [emitted] (name: main)\n@@ -1268,7 +1268,7 @@ Child 1 chunks:\n      ./index.js 101 bytes [built]\n          + 4 hidden chunk modules\n Child 2 chunks:\n-    Hash: 8078d4406e6cff4d407c\n+    Hash: 1a9cd80b306cf88704e1\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset 459.bundle2.js 666 bytes [emitted] (name: c)\n@@ -1284,7 +1284,7 @@ Child 2 chunks:\n      ./d.js 22 bytes [built]\n      ./e.js 22 bytes [built]\n Child 3 chunks:\n-    Hash: 9099e8e06920917be43d\n+    Hash: 56ee3daa4db6b8852d1a\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset 459.bundle3.js 530 bytes [emitted] (name: c)\n@@ -1302,7 +1302,7 @@ Child 3 chunks:\n      ./d.js 22 bytes [built]\n      ./e.js 22 bytes [built]\n Child 4 chunks:\n-    Hash: 99dbb22cd3f251deb509\n+    Hash: b43e1fc20ff42e48c7b7\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset 394.bundle4.js 210 bytes [emitted]\n@@ -1361,11 +1361,27 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n \n <CLR=31,BOLD>DEBUG</CLR> <CLR=BOLD>LOG from ./node_modules/custom-loader/index.js Named Logger ./node_modules/custom-loader/index.js!./index.js</CLR>\n     Message with named logger\n+\n+<CLR=BOLD>LOG from webpack.FlagDependencyExportsPlugin</CLR>\n+    <CLR=BOLD>100% of exports of modules have been determined (1 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)</CLR>\n++ 3 hidden lines\n+\n+<CLR=BOLD>LOG from webpack.Compilation</CLR>\n+    <CLR=BOLD>1 modules hashed (1 variants per module in average)</CLR>\n+    <CLR=BOLD>100% code generated (1 generated, 0 from cache)</CLR>\n++ 19 hidden lines\n+\n+<CLR=BOLD>LOG from webpack.buildChunkGraph</CLR>\n+    <CLR=BOLD>2 queue items processed (1 blocks)</CLR>\n+    <CLR=BOLD>0 chunk groups connected</CLR>\n+    <CLR=BOLD>0 chunk groups processed for merging (0 module sets, 0 forked, 0 + 0 modules forked, 0 + 0 modules merged into fork, 0 resulting modules)</CLR>\n+    <CLR=BOLD>0 chunk group info updated (0 already connected chunk groups reconnected)</CLR>\n++ 5 hidden lines\n \"\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules 1`] = `\n-\"Hash: 0ac31f6a26a7e76f8947\n+\"Hash: 0472a87d3155b407209a\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset main.js 5.29 KiB [emitted] (name: main)\n@@ -1394,7 +1410,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules-default 1`] = `\n-\"Hash: 0ac31f6a26a7e76f8947\n+\"Hash: 0472a87d3155b407209a\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset main.js 5.29 KiB [emitted] (name: main)\n@@ -1418,7 +1434,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n-\"Hash: 8adbf5a7ed60a74dbaed\n+\"Hash: 789d721eda4901e776dc\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 1.png 21 KiB [emitted] (auxiliary name: a)\n@@ -1564,7 +1580,7 @@ If you don't want to include a polyfill, you can use an empty module like this:\n `;\n \n exports[`StatsTestCases should print correct stats for module-reasons 1`] = `\n-\"Hash: c133ce492ac6b1890b51\n+\"Hash: 7fa16e2f198467c6f4e2\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset main.js 1.32 KiB [emitted] (name: main)\n@@ -1685,7 +1701,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin 1`] = `\n-\"Hash: 976ba5fac7ccbe7b7e96\n+\"Hash: 915154cee377f640be5b\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset entry.js 5.46 KiB [emitted] (name: entry)\n@@ -1699,7 +1715,7 @@ Entrypoint entry = vendor.js entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin-async 1`] = `\n-\"Hash: 01bf8ea7a919366f2211\n+\"Hash: 6c62a2f54793c00775b7\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset entry.js 10.4 KiB [emitted] (name: entry)\n@@ -1727,7 +1743,7 @@ You can also set it to 'none' to disable any default behavior. Learn more: https\n `;\n \n exports[`StatsTestCases should print correct stats for optimize-chunks 1`] = `\n-\"Hash: c75f0ca2cea28969a6d2\n+\"Hash: e67e6d50954e0fdcb8d7\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset ab.js 153 bytes {90} [emitted] (name: ab)\n@@ -2076,7 +2092,7 @@ exports[`StatsTestCases should print correct stats for preset-detailed 1`] = `\n   <+> [LogTestPlugin] Collaped group\n       [LogTestPlugin] Log\n     [LogTestPlugin] End\n-Hash: a64467711f86e3c69166\n+Hash: 7fe4d0da452dab01db49\n Time: X ms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -2140,6 +2156,22 @@ LOG from LogTestPlugin\n       Log\n     End\n + 6 hidden lines\n+\n+LOG from webpack.FlagDependencyExportsPlugin\n+    100% of exports of modules have been determined (6 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n++ 3 hidden lines\n+\n+LOG from webpack.Compilation\n+    6 modules hashed (1 variants per module in average)\n+    100% code generated (6 generated, 0 from cache)\n++ 19 hidden lines\n+\n+LOG from webpack.buildChunkGraph\n+    15 queue items processed (9 blocks)\n+    3 chunk groups connected\n+    3 chunk groups processed for merging (3 module sets, 0 forked, 0 + 0 modules forked, 0 + 0 modules merged into fork, 0 resulting modules)\n+    3 chunk group info updated (0 already connected chunk groups reconnected)\n++ 13 hidden lines\n \"\n `;\n \n@@ -2203,7 +2235,7 @@ exports[`StatsTestCases should print correct stats for preset-normal 1`] = `\n \"<e> [LogTestPlugin] Error\n <w> [LogTestPlugin] Warning\n <i> [LogTestPlugin] Info\n-Hash: a64467711f86e3c69166\n+Hash: 7fe4d0da452dab01db49\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 460.js 324 bytes [emitted]\n@@ -2297,7 +2329,7 @@ exports[`StatsTestCases should print correct stats for preset-verbose 1`] = `\n           [LogTestPlugin] Inner inner message\n       [LogTestPlugin] Log\n     [LogTestPlugin] End\n-Hash: a64467711f86e3c69166\n+Hash: 7fe4d0da452dab01db49\n Time: X ms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -2395,6 +2427,7 @@ LOG from webpack.Compiler\n LOG from webpack.FlagDependencyExportsPlugin\n <t> restore cached provided exports: X ms\n <t> figure out provided exports: X ms\n+    100% of exports of modules have been determined (6 not cached, 0 flagged uncacheable, 0 from cache, 0 additional calculations due to dependencies)\n <t> store provided exports into cache: X ms\n \n LOG from webpack.InnerGraphPlugin\n@@ -2406,7 +2439,9 @@ LOG from webpack.Compilation\n <t> optimize dependencies: X ms\n <t> create chunks: X ms\n <t> optimize: X ms\n+    6 modules hashed (1 variants per module in average)\n <t> module hashing: X ms\n+    100% code generated (6 generated, 0 from cache)\n <t> code generation: X ms\n <t> runtime requirements: X ms\n <t> hashing: initialize hash: X ms\n@@ -2439,6 +2474,10 @@ LOG from webpack.buildChunkGraph\n <t> visitModules: merging available modules: X ms\n <t> visitModules: check modules for revisit: X ms\n <t> visitModules: visiting: X ms\n+    15 queue items processed (9 blocks)\n+    3 chunk groups connected\n+    3 chunk groups processed for merging (3 module sets, 0 forked, 0 + 0 modules forked, 0 + 0 modules merged into fork, 0 resulting modules)\n+    3 chunk group info updated (0 already connected chunk groups reconnected)\n <t> visitModules: X ms\n <t> connectChunkGroups: X ms\n <t> cleanup: X ms\n@@ -2537,7 +2576,7 @@ Child exclude3:\n `;\n \n exports[`StatsTestCases should print correct stats for resolve-plugin-context 1`] = `\n-\"Hash: add15693d82e789bd89d\n+\"Hash: 84e6f916625b4d3e9458\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset bundle.js 1.5 KiB [emitted] (name: main)\n@@ -2550,7 +2589,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for reverse-sort-modules 1`] = `\n-\"Hash: 0ac31f6a26a7e76f8947\n+\"Hash: 0472a87d3155b407209a\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset main.js 5.29 KiB [emitted] (name: main)\n@@ -2640,9 +2679,9 @@ Entrypoint e2 = runtime.js e2.js\"\n `;\n \n exports[`StatsTestCases should print correct stats for runtime-specific-used-exports 1`] = `\n-\"Hash: 8a6f72e5c173319d756a64f8ba10f2bd4dc5cce0ab3956b9d1d6b87f9b0a\n+\"Hash: aff2eed6a32462dbf4e417edaf39ac75038d0fcaed8c12dd4bf148562a8b\n Child production:\n-    Hash: 8a6f72e5c173319d756a\n+    Hash: aff2eed6a32462dbf4e4\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset production-a.js 11.5 KiB [emitted] (name: a)\n@@ -2725,7 +2764,7 @@ Child production:\n     ./dx.js 46 bytes [built]\n         + 16 hidden modules\n Child development:\n-    Hash: 64f8ba10f2bd4dc5cce0\n+    Hash: 17edaf39ac75038d0fca\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset development-a.js 16.8 KiB [emitted] (name: a)\n@@ -2811,7 +2850,7 @@ Child development:\n         [used exports unknown]\n         + 16 hidden modules\n Child global:\n-    Hash: ab3956b9d1d6b87f9b0a\n+    Hash: ed8c12dd4bf148562a8b\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset global-a.js 11.7 KiB [emitted] (name: a)\n@@ -2891,7 +2930,7 @@ Child global:\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-bailouts 1`] = `\n-\"Hash: 4f1004a2fb9cd96d0e8e\n+\"Hash: cff177e9c99c8a85c27e\n Time: X ms\n Built at: 1970-04-20 12:42:42\n Entrypoint index = index.js\n@@ -2923,9 +2962,9 @@ external \\\\\"external\\\\\" 42 bytes [built]\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-multi 1`] = `\n-\"Hash: 4694fdf34c07be8f4109f93da5818b398ce37850\n+\"Hash: 0ceb4dc9405536108a820fb28106577aa1fe18af\n Child\n-    Hash: 4694fdf34c07be8f4109\n+    Hash: 0ceb4dc9405536108a82\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     Entrypoint first = a-vendor.js a-first.js\n@@ -2943,7 +2982,7 @@ Child\n     ./common_lazy_shared.js 25 bytes [built]\n         + 14 hidden modules\n Child\n-    Hash: f93da5818b398ce37850\n+    Hash: 0fb28106577aa1fe18af\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     Entrypoint first = b-vendor.js b-first.js\n@@ -2968,7 +3007,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-issue-7428 1`] = `\n-\"Hash: 950351689c2e354f1a10\n+\"Hash: d01e707834ddd9e8c875\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 1.js 642 bytes [emitted]\n@@ -3026,9 +3065,9 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-optimization 1`] = `\n-\"Hash: 84a5d60e0d3be84ee22320487d1e3f0e67d84b50\n+\"Hash: d26335b5c063fdfc2a88c8cd6c316db9be4953d2\n Child\n-    Hash: 84a5d60e0d3be84ee223\n+    Hash: d26335b5c063fdfc2a88\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset main.js 207 bytes [emitted] [minimized] (name: main)\n@@ -3049,7 +3088,7 @@ Child\n         ModuleConcatenation bailout: Module is not an ECMAScript module\n         + 4 hidden modules\n Child\n-    Hash: 20487d1e3f0e67d84b50\n+    Hash: c8cd6c316db9be4953d2\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset main.no-side.js 1.24 KiB [emitted] [minimized] (name: main)\n@@ -3078,7 +3117,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-simple-unused 1`] = `\n-\"Hash: 220b5c3e11d97ae4cf3e\n+\"Hash: 587f210fb70cc49bc7a1\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset main.js 322 bytes [emitted] (name: main)\n@@ -4161,9 +4200,9 @@ chunk (runtime: main) default/async-a.js (async-a) 134 bytes <{179}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for split-chunks-runtime-specific 1`] = `\n-\"Hash: 47f6414c6665f152179201b6a5d2eba848468a7901b6a5d2eba848468a79\n+\"Hash: 8806e97b150c3e9184a3289e4df7c9426107b9c0289e4df7c9426107b9c0\n Child used-exports:\n-    Hash: 47f6414c6665f1521792\n+    Hash: 8806e97b150c3e9184a3\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset used-exports-332.js 426 bytes [emitted]\n@@ -4184,7 +4223,7 @@ Child used-exports:\n     chunk (runtime: a) used-exports-a.js (a) 126 bytes [entry] [rendered]\n      ./a.js + 1 modules 126 bytes [built]\n Child no-used-exports:\n-    Hash: 01b6a5d2eba848468a79\n+    Hash: 289e4df7c9426107b9c0\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset no-used-exports-332.js 447 bytes [emitted]\n@@ -4206,7 +4245,7 @@ Child no-used-exports:\n      ./a.js 54 bytes [built]\n          + 3 hidden root modules\n Child global:\n-    Hash: 01b6a5d2eba848468a79\n+    Hash: 289e4df7c9426107b9c0\n     Time: X ms\n     Built at: 1970-04-20 12:42:42\n     asset global-332.js 447 bytes [emitted]\n@@ -4230,7 +4269,7 @@ Child global:\n `;\n \n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n-\"Hash: eabb67f895a2e1692d7b\n+\"Hash: e0f1716012b18c82ad97\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset bundle.js 7.09 KiB [emitted] (name: main)\n@@ -4272,7 +4311,7 @@ require.include() is deprecated and will be removed soon.\n `;\n \n exports[`StatsTestCases should print correct stats for warnings-terser 1`] = `\n-\"Hash: 16e00baae062d8b73afb\n+\"Hash: e306aedf19a06803f6c7\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset bundle.js 823 bytes [emitted] [minimized] (name: main)\n@@ -4296,7 +4335,7 @@ WARNING in Terser Plugin: Dropping unused function someUnRemoteUsedFunction5 [we\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"Hash: 4e99c264c2f5ee4eb5ba\n+\"Hash: 0619a9df73eaf24bd65e\n Time: X ms\n Built at: 1970-04-20 12:42:42\n asset 230.bundle.js 246 bytes [emitted]"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/12191",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/12191/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/12191/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/12191/events",
    "html_url": "https://github.com/webpack/webpack/pull/12191",
    "id": 766030954,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTM5MjEwMzYx",
    "number": 12191,
    "title": "allow to store large caches",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-12-14T07:21:52Z",
    "updated_at": "2020-12-15T06:43:53Z",
    "closed_at": "2020-12-15T06:43:51Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/12191",
      "html_url": "https://github.com/webpack/webpack/pull/12191",
      "diff_url": "https://github.com/webpack/webpack/pull/12191.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/12191.patch",
      "merged_at": "2020-12-15T06:43:51Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nfixes #12126\r\n\r\n* use 64bit instead 32bit for length now to allow cache files > 2GB.\r\n* internally this is still limited to 52bit due to javascript number limits -> 4096TiB should be enough\r\n* read cache file in multiple steps to allow files > 2GB\r\n* add buffer deduplication to avoid duplicate code in cache file\r\n* Tested it with 15GB cache file\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix, performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/12191/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/12191/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "43864530714a55366fc6a6d920c7af3ce1ad1308",
        "filename": "lib/serialization/BinaryMiddleware.js",
        "status": "modified",
        "additions": 467,
        "deletions": 136,
        "changes": 603,
        "blob_url": "https://github.com/webpack/webpack/blob/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Fserialization%2FBinaryMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Fserialization%2FBinaryMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FBinaryMiddleware.js?ref=e500ad07142abf3c1df970a34326ef72880f3e9d",
        "patch": "@@ -10,31 +10,36 @@ const SerializerMiddleware = require(\"./SerializerMiddleware\");\n /** @typedef {import(\"./types\").BufferSerializableType} BufferSerializableType */\n /** @typedef {import(\"./types\").PrimitiveSerializableType} PrimitiveSerializableType */\n \n+/* eslint-disable no-loop-func */\n+\n /*\n Format:\n \n File -> Section*\n \n Section -> NullsSection |\n+\t\t\t\t\t BooleansSection |\n \t\t\t\t\t F64NumbersSection |\n \t\t\t\t\t I32NumbersSection |\n \t\t\t\t\t I8NumbersSection |\n \t\t\t\t\t ShortStringSection |\n \t\t\t\t\t StringSection |\n \t\t\t\t\t BufferSection |\n-\t\t\t\t\t BooleanSection |\n \t\t\t\t\t NopSection\n \n \n \n-NullsSection -> NullsSectionHeaderByte\n+NullsSection ->\n+\tNullHeaderByte | Null2HeaderByte | Null3HeaderByte |\n+\tNulls8HeaderByte 0xnn (n:count - 4) |\n+\tNulls32HeaderByte n:ui32 (n:count - 260) |\n+BooleansSection -> TrueHeaderByte | FalseHeaderByte | BooleansSectionHeaderByte BooleansCountAndBitsByte\n F64NumbersSection -> F64NumbersSectionHeaderByte f64*\n I32NumbersSection -> I32NumbersSectionHeaderByte i32*\n I8NumbersSection -> I8NumbersSectionHeaderByte i8*\n-ShortStringSection -> ShortStringSectionHeaderByte utf8-byte*\n+ShortStringSection -> ShortStringSectionHeaderByte ascii-byte*\n StringSection -> StringSectionHeaderByte i32:length utf8-byte*\n BufferSection -> BufferSectionHeaderByte i32:length byte*\n-BooleanSection -> TrueHeaderByte | FalseHeaderByte\n NopSection --> NopSectionHeaderByte\n \n ShortStringSectionHeaderByte -> 0b1nnn_nnnn (n:length)\n@@ -44,6 +49,13 @@ I32NumbersSectionHeaderByte -> 0b010n_nnnn (n:count - 1)\n I8NumbersSectionHeaderByte -> 0b011n_nnnn (n:count - 1)\n \n NullsSectionHeaderByte -> 0b0001_nnnn (n:count - 1)\n+BooleansCountAndBitsByte ->\n+\t0b0000_1xxx (count = 3) |\n+\t0b0001_xxxx (count = 4) |\n+\t0b001x_xxxx (count = 5) |\n+\t0b01xx_xxxx (count = 6) |\n+\t0b1nnn_nnnn (n:count - 7, 7 <= count <= 133)\n+\t0xff n:ui32 (n:count, 134 <= count < 2^32)\n \n StringSectionHeaderByte -> 0b0000_1110\n BufferSectionHeaderByte -> 0b0000_1111\n@@ -58,20 +70,26 @@ RawNumber -> n (n <= 10)\n const LAZY_HEADER = 0x0b;\n const TRUE_HEADER = 0x0c;\n const FALSE_HEADER = 0x0d;\n-const STRING_HEADER = 0x0e;\n-const BUFFER_HEADER = 0x0f;\n-const NULLS_HEADER = 0x10;\n+const BOOLEANS_HEADER = 0x0e;\n+const NULL_HEADER = 0x10;\n+const NULL2_HEADER = 0x11;\n+const NULL3_HEADER = 0x12;\n+const NULLS8_HEADER = 0x13;\n+const NULLS32_HEADER = 0x14;\n+const NULL_AND_I8_HEADER = 0x15;\n+const NULL_AND_I32_HEADER = 0x16;\n+const NULL_AND_TRUE_HEADER = 0x17;\n+const NULL_AND_FALSE_HEADER = 0x18;\n+const STRING_HEADER = 0x1e;\n+const BUFFER_HEADER = 0x1f;\n const I8_HEADER = 0x60;\n const I32_HEADER = 0x40;\n const F64_HEADER = 0x20;\n const SHORT_STRING_HEADER = 0x80;\n \n-/** Uplift high-order bits */\n-const NULLS_HEADER_MASK = 0xf0;\n /** Uplift high-order bits */\n const NUMBERS_HEADER_MASK = 0xe0;\n const NUMBERS_COUNT_MASK = 0x1f; // 0b0001_1111\n-const NULLS_COUNT_MASK = 0x0f; // 0b0000_1111\n const SHORT_STRING_LENGTH_MASK = 0x7f; // 0b0111_1111\n \n const HEADER_SIZE = 1;\n@@ -198,51 +216,73 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\t\t\tcase \"function\": {\n \t\t\t\t\t\tif (!SerializerMiddleware.isLazy(thing))\n \t\t\t\t\t\t\tthrow new Error(\"Unexpected function \" + thing);\n-\t\t\t\t\t\t/** @type {SerializedType[0]} */\n-\t\t\t\t\t\tconst serializedData = SerializerMiddleware.getLazySerializedValue(\n+\t\t\t\t\t\t/** @type {SerializedType | (() => SerializedType)} */\n+\t\t\t\t\t\tlet serializedData = SerializerMiddleware.getLazySerializedValue(\n \t\t\t\t\t\t\tthing\n \t\t\t\t\t\t);\n-\t\t\t\t\t\tif (serializedData !== undefined) {\n-\t\t\t\t\t\t\tif (typeof serializedData === \"function\") {\n-\t\t\t\t\t\t\t\tflush();\n-\t\t\t\t\t\t\t\tbuffers.push(serializedData);\n+\t\t\t\t\t\tif (serializedData === undefined) {\n+\t\t\t\t\t\t\tif (SerializerMiddleware.isLazy(thing, this)) {\n+\t\t\t\t\t\t\t\tconst data = this._serialize(thing(), context);\n+\t\t\t\t\t\t\t\tSerializerMiddleware.setLazySerializedValue(thing, data);\n+\t\t\t\t\t\t\t\tserializedData = data;\n \t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tserializeData(serializedData);\n-\t\t\t\t\t\t\t\tallocate(5);\n-\t\t\t\t\t\t\t\twriteU8(LAZY_HEADER);\n-\t\t\t\t\t\t\t\twriteU32(serializedData.length);\n+\t\t\t\t\t\t\t\tserializedData = SerializerMiddleware.serializeLazy(\n+\t\t\t\t\t\t\t\t\tthing,\n+\t\t\t\t\t\t\t\t\tdata => this._serialize(data, context)\n+\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t} else if (SerializerMiddleware.isLazy(thing, this)) {\n-\t\t\t\t\t\t\t/** @type {SerializedType} */\n-\t\t\t\t\t\t\tconst data = BinaryMiddleware.optimizeSerializedData(\n-\t\t\t\t\t\t\t\tthis._serialize(thing(), context)\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\tSerializerMiddleware.setLazySerializedValue(thing, data);\n-\t\t\t\t\t\t\tserializeData(data);\n-\t\t\t\t\t\t\tallocate(5);\n-\t\t\t\t\t\t\twriteU8(LAZY_HEADER);\n-\t\t\t\t\t\t\twriteU32(data.length);\n-\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (typeof serializedData === \"function\") {\n \t\t\t\t\t\t\tflush();\n-\t\t\t\t\t\t\tbuffers.push(\n-\t\t\t\t\t\t\t\tSerializerMiddleware.serializeLazy(thing, data =>\n-\t\t\t\t\t\t\t\t\tthis._serialize(data, context)\n-\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tbuffers.push(serializedData);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tconst lengths = [];\n+\t\t\t\t\t\t\tfor (const item of serializedData) {\n+\t\t\t\t\t\t\t\tlet last;\n+\t\t\t\t\t\t\t\tif (typeof item === \"function\") {\n+\t\t\t\t\t\t\t\t\tlengths.push(0);\n+\t\t\t\t\t\t\t\t} else if (item.length === 0) {\n+\t\t\t\t\t\t\t\t\t// ignore\n+\t\t\t\t\t\t\t\t} else if (\n+\t\t\t\t\t\t\t\t\tlengths.length > 0 &&\n+\t\t\t\t\t\t\t\t\t(last = lengths[lengths.length - 1]) !== 0\n+\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\tconst remaining = 0xffffffff - last;\n+\t\t\t\t\t\t\t\t\tif (remaining >= item.length) {\n+\t\t\t\t\t\t\t\t\t\tlengths[lengths.length - 1] += item.length;\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tlengths.push(item.length - remaining);\n+\t\t\t\t\t\t\t\t\t\tlengths[lengths.length - 2] = 0xffffffff;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tlengths.push(item.length);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tallocate(5 + lengths.length * 4);\n+\t\t\t\t\t\t\twriteU8(LAZY_HEADER);\n+\t\t\t\t\t\t\twriteU32(lengths.length);\n+\t\t\t\t\t\t\tfor (const l of lengths) {\n+\t\t\t\t\t\t\t\twriteU32(l);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tfor (const item of serializedData) {\n+\t\t\t\t\t\t\t\tflush();\n+\t\t\t\t\t\t\t\tbuffers.push(item);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t\tcase \"string\": {\n \t\t\t\t\t\tconst len = Buffer.byteLength(thing);\n-\t\t\t\t\t\tif (len >= 128) {\n+\t\t\t\t\t\tif (len >= 128 || len !== thing.length) {\n \t\t\t\t\t\t\tallocate(len + HEADER_SIZE + I32_SIZE);\n \t\t\t\t\t\t\twriteU8(STRING_HEADER);\n \t\t\t\t\t\t\twriteU32(len);\n+\t\t\t\t\t\t\tcurrentBuffer.write(thing, currentPosition);\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tallocate(len + HEADER_SIZE);\n \t\t\t\t\t\t\twriteU8(SHORT_STRING_HEADER | len);\n+\t\t\t\t\t\t\tcurrentBuffer.write(thing, currentPosition, \"latin1\");\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tcurrentBuffer.write(thing, currentPosition);\n \t\t\t\t\t\tcurrentPosition += len;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n@@ -309,20 +349,111 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\t\t\t\ti--;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n-\t\t\t\t\tcase \"boolean\":\n-\t\t\t\t\t\tallocate(HEADER_SIZE);\n-\t\t\t\t\t\twriteU8(thing === true ? TRUE_HEADER : FALSE_HEADER);\n+\t\t\t\t\tcase \"boolean\": {\n+\t\t\t\t\t\tlet lastByte = thing === true ? 1 : 0;\n+\t\t\t\t\t\tconst bytes = [];\n+\t\t\t\t\t\tlet count = 1;\n+\t\t\t\t\t\tlet n;\n+\t\t\t\t\t\tfor (n = 1; n < 0xffffffff && i + n < data.length; n++) {\n+\t\t\t\t\t\t\tconst item = data[i + n];\n+\t\t\t\t\t\t\tif (typeof item !== \"boolean\") break;\n+\t\t\t\t\t\t\tconst pos = count & 0x7;\n+\t\t\t\t\t\t\tif (pos === 0) {\n+\t\t\t\t\t\t\t\tbytes.push(lastByte);\n+\t\t\t\t\t\t\t\tlastByte = item === true ? 1 : 0;\n+\t\t\t\t\t\t\t} else if (item === true) {\n+\t\t\t\t\t\t\t\tlastByte |= 1 << pos;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tcount++;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\ti += count - 1;\n+\t\t\t\t\t\tif (count === 1) {\n+\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\twriteU8(lastByte === 1 ? TRUE_HEADER : FALSE_HEADER);\n+\t\t\t\t\t\t} else if (count === 2) {\n+\t\t\t\t\t\t\tallocate(HEADER_SIZE * 2);\n+\t\t\t\t\t\t\twriteU8(lastByte & 1 ? TRUE_HEADER : FALSE_HEADER);\n+\t\t\t\t\t\t\twriteU8(lastByte & 2 ? TRUE_HEADER : FALSE_HEADER);\n+\t\t\t\t\t\t} else if (count <= 6) {\n+\t\t\t\t\t\t\tallocate(HEADER_SIZE + I8_SIZE);\n+\t\t\t\t\t\t\twriteU8(BOOLEANS_HEADER);\n+\t\t\t\t\t\t\twriteU8((1 << count) | lastByte);\n+\t\t\t\t\t\t} else if (count <= 133) {\n+\t\t\t\t\t\t\tallocate(HEADER_SIZE + I8_SIZE * bytes.length + I8_SIZE);\n+\t\t\t\t\t\t\twriteU8(BOOLEANS_HEADER);\n+\t\t\t\t\t\t\twriteU8(0x80 | (count - 7));\n+\t\t\t\t\t\t\tfor (const byte of bytes) writeU8(byte);\n+\t\t\t\t\t\t\twriteU8(lastByte);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tallocate(HEADER_SIZE + I8_SIZE * bytes.length + I8_SIZE);\n+\t\t\t\t\t\t\twriteU8(BOOLEANS_HEADER);\n+\t\t\t\t\t\t\twriteU8(0xff);\n+\t\t\t\t\t\t\twriteU32(count);\n+\t\t\t\t\t\t\tfor (const byte of bytes) writeU8(byte);\n+\t\t\t\t\t\t\twriteU8(lastByte);\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n \t\t\t\t\tcase \"object\": {\n \t\t\t\t\t\tif (thing === null) {\n \t\t\t\t\t\t\tlet n;\n-\t\t\t\t\t\t\tfor (n = 1; n < 16 && i + n < data.length; n++) {\n+\t\t\t\t\t\t\tfor (n = 1; n < 0x100000104 && i + n < data.length; n++) {\n \t\t\t\t\t\t\t\tconst item = data[i + n];\n \t\t\t\t\t\t\t\tif (item !== null) break;\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n-\t\t\t\t\t\t\twriteU8(NULLS_HEADER | (n - 1));\n \t\t\t\t\t\t\ti += n - 1;\n+\t\t\t\t\t\t\tif (n === 1) {\n+\t\t\t\t\t\t\t\tif (i + 1 < data.length) {\n+\t\t\t\t\t\t\t\t\tconst next = data[i + 1];\n+\t\t\t\t\t\t\t\t\tif (next === true) {\n+\t\t\t\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\t\t\t\twriteU8(NULL_AND_TRUE_HEADER);\n+\t\t\t\t\t\t\t\t\t\ti++;\n+\t\t\t\t\t\t\t\t\t} else if (next === false) {\n+\t\t\t\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\t\t\t\twriteU8(NULL_AND_FALSE_HEADER);\n+\t\t\t\t\t\t\t\t\t\ti++;\n+\t\t\t\t\t\t\t\t\t} else if (typeof next === \"number\") {\n+\t\t\t\t\t\t\t\t\t\tconst type = identifyNumber(next);\n+\t\t\t\t\t\t\t\t\t\tif (type === 0) {\n+\t\t\t\t\t\t\t\t\t\t\tallocate(HEADER_SIZE + I8_SIZE);\n+\t\t\t\t\t\t\t\t\t\t\twriteU8(NULL_AND_I8_HEADER);\n+\t\t\t\t\t\t\t\t\t\t\tcurrentBuffer.writeInt8(next, currentPosition);\n+\t\t\t\t\t\t\t\t\t\t\tcurrentPosition += I8_SIZE;\n+\t\t\t\t\t\t\t\t\t\t\ti++;\n+\t\t\t\t\t\t\t\t\t\t} else if (type === 1) {\n+\t\t\t\t\t\t\t\t\t\t\tallocate(HEADER_SIZE + I32_SIZE);\n+\t\t\t\t\t\t\t\t\t\t\twriteU8(NULL_AND_I32_HEADER);\n+\t\t\t\t\t\t\t\t\t\t\tcurrentBuffer.writeInt32LE(next, currentPosition);\n+\t\t\t\t\t\t\t\t\t\t\tcurrentPosition += I32_SIZE;\n+\t\t\t\t\t\t\t\t\t\t\ti++;\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\t\t\t\t\twriteU8(NULL_HEADER);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\t\t\t\twriteU8(NULL_HEADER);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\t\t\twriteU8(NULL_HEADER);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} else if (n === 2) {\n+\t\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\t\twriteU8(NULL2_HEADER);\n+\t\t\t\t\t\t\t} else if (n === 3) {\n+\t\t\t\t\t\t\t\tallocate(HEADER_SIZE);\n+\t\t\t\t\t\t\t\twriteU8(NULL3_HEADER);\n+\t\t\t\t\t\t\t} else if (n < 260) {\n+\t\t\t\t\t\t\t\tallocate(HEADER_SIZE + I8_SIZE);\n+\t\t\t\t\t\t\t\twriteU8(NULLS8_HEADER);\n+\t\t\t\t\t\t\t\twriteU8(n - 4);\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tallocate(HEADER_SIZE + I32_SIZE);\n+\t\t\t\t\t\t\t\twriteU8(NULLS32_HEADER);\n+\t\t\t\t\t\t\t\twriteU32(n - 260);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t} else if (Buffer.isBuffer(thing)) {\n \t\t\t\t\t\t\tallocate(HEADER_SIZE + I32_SIZE, true);\n \t\t\t\t\t\t\twriteU8(BUFFER_HEADER);\n@@ -409,6 +540,31 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\tcheckOverflow();\n \t\t\treturn res;\n \t\t};\n+\t\t/**\n+\t\t * Reads up to n bytes\n+\t\t * @param {number} n amount of bytes to read\n+\t\t * @returns {Buffer} buffer with bytes\n+\t\t */\n+\t\tconst readUpTo = n => {\n+\t\t\tif (!currentIsBuffer) {\n+\t\t\t\tthrow new Error(\n+\t\t\t\t\tcurrentBuffer === null\n+\t\t\t\t\t\t? \"Unexpected end of stream\"\n+\t\t\t\t\t\t: \"Unexpected lazy element in stream\"\n+\t\t\t\t);\n+\t\t\t}\n+\t\t\tconst rem = currentBuffer.length - currentPosition;\n+\t\t\tif (rem < n) {\n+\t\t\t\tn = rem;\n+\t\t\t}\n+\t\t\tconst res = /** @type {Buffer} */ (currentBuffer).slice(\n+\t\t\t\tcurrentPosition,\n+\t\t\t\tcurrentPosition + n\n+\t\t\t);\n+\t\t\tcurrentPosition += n;\n+\t\t\tcheckOverflow();\n+\t\t\treturn res;\n+\t\t};\n \t\tconst readU8 = () => {\n \t\t\tif (!currentIsBuffer) {\n \t\t\t\tthrow new Error(\n@@ -431,117 +587,292 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\tconst readU32 = () => {\n \t\t\treturn read(I32_SIZE).readUInt32LE(0);\n \t\t};\n-\n-\t\t/** @type {DeserializedType} */\n-\t\tconst result = [];\n-\t\twhile (currentBuffer !== null) {\n-\t\t\tif (typeof currentBuffer === \"function\") {\n-\t\t\t\tresult.push(\n-\t\t\t\t\tSerializerMiddleware.deserializeLazy(currentBuffer, data =>\n-\t\t\t\t\t\tthis._deserialize(data, context)\n-\t\t\t\t\t)\n-\t\t\t\t);\n-\t\t\t\tcurrentDataItem++;\n-\t\t\t\tcurrentBuffer =\n-\t\t\t\t\tcurrentDataItem < data.length ? data[currentDataItem] : null;\n-\t\t\t\tcurrentIsBuffer = Buffer.isBuffer(currentBuffer);\n-\t\t\t\tcontinue;\n+\t\tconst readBits = (data, n) => {\n+\t\t\tlet mask = 1;\n+\t\t\twhile (n !== 0) {\n+\t\t\t\tresult.push((data & mask) !== 0);\n+\t\t\t\tmask = mask << 1;\n+\t\t\t\tn--;\n \t\t\t}\n-\t\t\tconst header = readU8();\n+\t\t};\n+\t\tconst dispatchTable = Array.from({ length: 256 }).map((_, header) => {\n \t\t\tswitch (header) {\n-\t\t\t\tcase LAZY_HEADER: {\n-\t\t\t\t\tconst count = readU32();\n-\t\t\t\t\tconst start = result.length - count;\n-\t\t\t\t\tconst data = /** @type {SerializedType} */ (result.slice(start));\n-\t\t\t\t\tresult.length = start;\n-\t\t\t\t\tresult.push(\n-\t\t\t\t\t\tSerializerMiddleware.createLazy(\n-\t\t\t\t\t\t\tmemorize(() => this._deserialize(data, context)),\n-\t\t\t\t\t\t\tthis,\n-\t\t\t\t\t\t\tundefined,\n-\t\t\t\t\t\t\tdata\n-\t\t\t\t\t\t)\n-\t\t\t\t\t);\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n-\t\t\t\tcase BUFFER_HEADER: {\n-\t\t\t\t\tconst len = readU32();\n-\t\t\t\t\tresult.push(read(len));\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n+\t\t\t\tcase LAZY_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tconst count = readU32();\n+\t\t\t\t\t\tconst lengths = Array.from({ length: count }).map(() => readU32());\n+\t\t\t\t\t\tconst content = [];\n+\t\t\t\t\t\tfor (let l of lengths) {\n+\t\t\t\t\t\t\tif (l === 0) {\n+\t\t\t\t\t\t\t\tif (typeof currentBuffer !== \"function\") {\n+\t\t\t\t\t\t\t\t\tthrow new Error(\"Unexpected non-lazy element in stream\");\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcontent.push(currentBuffer);\n+\t\t\t\t\t\t\t\tcurrentDataItem++;\n+\t\t\t\t\t\t\t\tcurrentBuffer =\n+\t\t\t\t\t\t\t\t\tcurrentDataItem < data.length ? data[currentDataItem] : null;\n+\t\t\t\t\t\t\t\tcurrentIsBuffer = Buffer.isBuffer(currentBuffer);\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tdo {\n+\t\t\t\t\t\t\t\t\tconst buf = readUpTo(l);\n+\t\t\t\t\t\t\t\t\tl -= buf.length;\n+\t\t\t\t\t\t\t\t\tcontent.push(buf);\n+\t\t\t\t\t\t\t\t} while (l > 0);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\tSerializerMiddleware.createLazy(\n+\t\t\t\t\t\t\t\tmemorize(() => this._deserialize(content, context)),\n+\t\t\t\t\t\t\t\tthis,\n+\t\t\t\t\t\t\t\tundefined,\n+\t\t\t\t\t\t\t\tcontent\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t};\n+\t\t\t\tcase BUFFER_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tconst len = readU32();\n+\t\t\t\t\t\tresult.push(read(len));\n+\t\t\t\t\t};\n \t\t\t\tcase TRUE_HEADER:\n-\t\t\t\t\tresult.push(true);\n-\t\t\t\t\tbreak;\n+\t\t\t\t\treturn () => result.push(true);\n \t\t\t\tcase FALSE_HEADER:\n-\t\t\t\t\tresult.push(false);\n-\t\t\t\t\tbreak;\n-\t\t\t\tcase STRING_HEADER: {\n-\t\t\t\t\tconst len = readU32();\n-\t\t\t\t\tconst buf = read(len);\n-\t\t\t\t\tresult.push(buf.toString());\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n+\t\t\t\t\treturn () => result.push(false);\n+\t\t\t\tcase NULL3_HEADER:\n+\t\t\t\t\treturn () => result.push(null, null, null);\n+\t\t\t\tcase NULL2_HEADER:\n+\t\t\t\t\treturn () => result.push(null, null);\n+\t\t\t\tcase NULL_HEADER:\n+\t\t\t\t\treturn () => result.push(null);\n+\t\t\t\tcase NULL_AND_TRUE_HEADER:\n+\t\t\t\t\treturn () => result.push(null, true);\n+\t\t\t\tcase NULL_AND_FALSE_HEADER:\n+\t\t\t\t\treturn () => result.push(null, false);\n+\t\t\t\tcase NULL_AND_I8_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tif (currentIsBuffer) {\n+\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t\t\t/** @type {Buffer} */ (currentBuffer).readInt8(currentPosition)\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcurrentPosition += I8_SIZE;\n+\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tresult.push(null, read(I8_SIZE).readInt8(0));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\tcase NULL_AND_I32_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tresult.push(null);\n+\t\t\t\t\t\tif (isInCurrentBuffer(I32_SIZE)) {\n+\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\t/** @type {Buffer} */ (currentBuffer).readInt32LE(\n+\t\t\t\t\t\t\t\t\tcurrentPosition\n+\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcurrentPosition += I32_SIZE;\n+\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tresult.push(read(I32_SIZE).readInt32LE(0));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\tcase NULLS8_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tconst len = readU8() + 4;\n+\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\tresult.push(null);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\tcase NULLS32_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tconst len = readU32() + 260;\n+\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\tresult.push(null);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\tcase BOOLEANS_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tconst innerHeader = readU8();\n+\t\t\t\t\t\tif ((innerHeader & 0xf0) === 0) {\n+\t\t\t\t\t\t\treadBits(innerHeader, 3);\n+\t\t\t\t\t\t} else if ((innerHeader & 0xe0) === 0) {\n+\t\t\t\t\t\t\treadBits(innerHeader, 4);\n+\t\t\t\t\t\t} else if ((innerHeader & 0xc0) === 0) {\n+\t\t\t\t\t\t\treadBits(innerHeader, 5);\n+\t\t\t\t\t\t} else if ((innerHeader & 0x80) === 0) {\n+\t\t\t\t\t\t\treadBits(innerHeader, 6);\n+\t\t\t\t\t\t} else if (innerHeader !== 0xff) {\n+\t\t\t\t\t\t\tlet count = (innerHeader & 0x7f) + 7;\n+\t\t\t\t\t\t\twhile (count > 8) {\n+\t\t\t\t\t\t\t\treadBits(readU8(), 8);\n+\t\t\t\t\t\t\t\tcount -= 8;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treadBits(readU8(), count);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tlet count = readU32();\n+\t\t\t\t\t\t\twhile (count > 8) {\n+\t\t\t\t\t\t\t\treadBits(readU8(), 8);\n+\t\t\t\t\t\t\t\tcount -= 8;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treadBits(readU8(), count);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\tcase STRING_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tconst len = readU32();\n+\t\t\t\t\t\tif (isInCurrentBuffer(len)) {\n+\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\tcurrentBuffer.toString(\n+\t\t\t\t\t\t\t\t\tundefined,\n+\t\t\t\t\t\t\t\t\tcurrentPosition,\n+\t\t\t\t\t\t\t\t\tcurrentPosition + len\n+\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcurrentPosition += len;\n+\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tresult.push(read(len).toString());\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\tcase SHORT_STRING_HEADER:\n+\t\t\t\t\treturn () => result.push(\"\");\n+\t\t\t\tcase SHORT_STRING_HEADER | 1:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tif (currentIsBuffer) {\n+\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\tcurrentBuffer.toString(\n+\t\t\t\t\t\t\t\t\t\"latin1\",\n+\t\t\t\t\t\t\t\t\tcurrentPosition,\n+\t\t\t\t\t\t\t\t\tcurrentPosition + 1\n+\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcurrentPosition++;\n+\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tresult.push(read(1).toString(\"latin1\"));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\tcase I8_HEADER:\n+\t\t\t\t\treturn () => {\n+\t\t\t\t\t\tif (currentIsBuffer) {\n+\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\t/** @type {Buffer} */ (currentBuffer).readInt8(currentPosition)\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\tcurrentPosition++;\n+\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tresult.push(read(1).readInt8(0));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n \t\t\t\tdefault:\n \t\t\t\t\tif (header <= 10) {\n-\t\t\t\t\t\tresult.push(header);\n+\t\t\t\t\t\treturn () => result.push(header);\n \t\t\t\t\t} else if ((header & SHORT_STRING_HEADER) === SHORT_STRING_HEADER) {\n \t\t\t\t\t\tconst len = header & SHORT_STRING_LENGTH_MASK;\n-\t\t\t\t\t\tconst buf = read(len);\n-\t\t\t\t\t\tresult.push(buf.toString());\n+\t\t\t\t\t\treturn () => {\n+\t\t\t\t\t\t\tif (isInCurrentBuffer(len)) {\n+\t\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\t\tcurrentBuffer.toString(\n+\t\t\t\t\t\t\t\t\t\t\"latin1\",\n+\t\t\t\t\t\t\t\t\t\tcurrentPosition,\n+\t\t\t\t\t\t\t\t\t\tcurrentPosition + len\n+\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\tcurrentPosition += len;\n+\t\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tresult.push(read(len).toString(\"latin1\"));\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t};\n \t\t\t\t\t} else if ((header & NUMBERS_HEADER_MASK) === F64_HEADER) {\n \t\t\t\t\t\tconst len = (header & NUMBERS_COUNT_MASK) + 1;\n-\t\t\t\t\t\tconst need = F64_SIZE * len;\n-\t\t\t\t\t\tif (isInCurrentBuffer(need)) {\n-\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t\t\t\t\tresult.push(currentBuffer.readDoubleLE(currentPosition));\n-\t\t\t\t\t\t\t\tcurrentPosition += F64_SIZE;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tcheckOverflow();\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tconst buf = read(need);\n-\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t\t\t\t\tresult.push(buf.readDoubleLE(i * F64_SIZE));\n+\t\t\t\t\t\treturn () => {\n+\t\t\t\t\t\t\tconst need = F64_SIZE * len;\n+\t\t\t\t\t\t\tif (isInCurrentBuffer(need)) {\n+\t\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\t\t\t/** @type {Buffer} */ (currentBuffer).readDoubleLE(\n+\t\t\t\t\t\t\t\t\t\t\tcurrentPosition\n+\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\tcurrentPosition += F64_SIZE;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tconst buf = read(need);\n+\t\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\t\t\tresult.push(buf.readDoubleLE(i * F64_SIZE));\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n+\t\t\t\t\t\t};\n \t\t\t\t\t} else if ((header & NUMBERS_HEADER_MASK) === I32_HEADER) {\n \t\t\t\t\t\tconst len = (header & NUMBERS_COUNT_MASK) + 1;\n-\t\t\t\t\t\tconst need = I32_SIZE * len;\n-\t\t\t\t\t\tif (isInCurrentBuffer(need)) {\n-\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t\t\t\t\tresult.push(currentBuffer.readInt32LE(currentPosition));\n-\t\t\t\t\t\t\t\tcurrentPosition += I32_SIZE;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tcheckOverflow();\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tconst buf = read(need);\n-\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t\t\t\t\tresult.push(buf.readInt32LE(i * I32_SIZE));\n+\t\t\t\t\t\treturn () => {\n+\t\t\t\t\t\t\tconst need = I32_SIZE * len;\n+\t\t\t\t\t\t\tif (isInCurrentBuffer(need)) {\n+\t\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\t\t\t/** @type {Buffer} */ (currentBuffer).readInt32LE(\n+\t\t\t\t\t\t\t\t\t\t\tcurrentPosition\n+\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\tcurrentPosition += I32_SIZE;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tconst buf = read(need);\n+\t\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\t\t\tresult.push(buf.readInt32LE(i * I32_SIZE));\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n+\t\t\t\t\t\t};\n \t\t\t\t\t} else if ((header & NUMBERS_HEADER_MASK) === I8_HEADER) {\n \t\t\t\t\t\tconst len = (header & NUMBERS_COUNT_MASK) + 1;\n-\t\t\t\t\t\tconst need = I8_SIZE * len;\n-\t\t\t\t\t\tif (isInCurrentBuffer(need)) {\n-\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t\t\t\t\tresult.push(currentBuffer.readInt8(currentPosition));\n-\t\t\t\t\t\t\t\tcurrentPosition += I8_SIZE;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tcheckOverflow();\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tconst buf = read(need);\n-\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t\t\t\t\tresult.push(buf.readInt8(i * I8_SIZE));\n+\t\t\t\t\t\treturn () => {\n+\t\t\t\t\t\t\tconst need = I8_SIZE * len;\n+\t\t\t\t\t\t\tif (isInCurrentBuffer(need)) {\n+\t\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\t\t\tresult.push(\n+\t\t\t\t\t\t\t\t\t\t/** @type {Buffer} */ (currentBuffer).readInt8(\n+\t\t\t\t\t\t\t\t\t\t\tcurrentPosition\n+\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\tcurrentPosition += I8_SIZE;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcheckOverflow();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tconst buf = read(need);\n+\t\t\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t\t\t\t\t\tresult.push(buf.readInt8(i * I8_SIZE));\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else if ((header & NULLS_HEADER_MASK) === NULLS_HEADER) {\n-\t\t\t\t\t\tconst len = (header & NULLS_COUNT_MASK) + 1;\n-\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t\t\t\tresult.push(null);\n-\t\t\t\t\t\t}\n+\t\t\t\t\t\t};\n \t\t\t\t\t} else {\n-\t\t\t\t\t\tthrow new Error(`Unexpected header byte 0x${header.toString(16)}`);\n+\t\t\t\t\t\treturn () => {\n+\t\t\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t\t\t`Unexpected header byte 0x${header.toString(16)}`\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t};\n \t\t\t\t\t}\n-\t\t\t\t\tbreak;\n+\t\t\t}\n+\t\t});\n+\n+\t\t/** @type {DeserializedType} */\n+\t\tconst result = [];\n+\t\twhile (currentBuffer !== null) {\n+\t\t\tif (typeof currentBuffer === \"function\") {\n+\t\t\t\tresult.push(\n+\t\t\t\t\tSerializerMiddleware.deserializeLazy(currentBuffer, data =>\n+\t\t\t\t\t\tthis._deserialize(data, context)\n+\t\t\t\t\t)\n+\t\t\t\t);\n+\t\t\t\tcurrentDataItem++;\n+\t\t\t\tcurrentBuffer =\n+\t\t\t\t\tcurrentDataItem < data.length ? data[currentDataItem] : null;\n+\t\t\t\tcurrentIsBuffer = Buffer.isBuffer(currentBuffer);\n+\t\t\t} else {\n+\t\t\t\tconst header = readU8();\n+\t\t\t\tdispatchTable[header]();\n \t\t\t}\n \t\t}\n \t\treturn result;"
      },
      {
        "sha": "7243d91cbe5c55561d49e119f03b7541ecee68a7",
        "filename": "lib/serialization/FileMiddleware.js",
        "status": "modified",
        "additions": 227,
        "deletions": 37,
        "changes": 264,
        "blob_url": "https://github.com/webpack/webpack/blob/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Fserialization%2FFileMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Fserialization%2FFileMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FFileMiddleware.js?ref=e500ad07142abf3c1df970a34326ef72880f3e9d",
        "patch": "@@ -4,6 +4,7 @@\n \n \"use strict\";\n \n+const { constants } = require(\"buffer\");\n const createHash = require(\"../util/createHash\");\n const { dirname, join, mkdirp } = require(\"../util/fs\");\n const memorize = require(\"../util/memorize\");\n@@ -28,14 +29,35 @@ Section -> Buffer\n \n */\n \n-// \"wpc\" + 0 in little-endian\n-const VERSION = 0x00637077;\n+// \"wpc\" + 1 in little-endian\n+const VERSION = 0x01637077;\n const hashForName = buffers => {\n \tconst hash = createHash(\"md4\");\n \tfor (const buf of buffers) hash.update(buf);\n \treturn /** @type {string} */ (hash.digest(\"hex\"));\n };\n \n+const writeUInt64LE = Buffer.prototype.writeBigUInt64LE\n+\t? (buf, value, offset) => {\n+\t\t\tbuf.writeBigUInt64LE(BigInt(value), offset);\n+\t  }\n+\t: (buf, value, offset) => {\n+\t\t\tconst low = value % 0x100000000;\n+\t\t\tconst high = (value - low) / 0x100000000;\n+\t\t\tbuf.writeUInt32LE(low, offset);\n+\t\t\tbuf.writeUInt32LE(high, offset + 4);\n+\t  };\n+\n+const readUInt64LE = Buffer.prototype.readBigUInt64LE\n+\t? (buf, offset) => {\n+\t\t\treturn Number(buf.readBigUInt64LE(offset));\n+\t  }\n+\t: (buf, offset) => {\n+\t\t\tconst low = buf.readUInt32LE(offset);\n+\t\t\tconst high = buf.readUInt32LE(offset + 4);\n+\t\t\treturn high * 0x100000000 + low;\n+\t  };\n+\n /**\n  * @typedef {Object} SerializeResult\n  * @property {string | false} name\n@@ -122,24 +144,29 @@ const serialize = async (middleware, data, name, writeFile) => {\n \t\t// create pointer buffer from size and name\n \t\tconst name = /** @type {string} */ (item.name);\n \t\tconst nameBuffer = Buffer.from(name);\n-\t\tconst buf = Buffer.allocUnsafe(4 + nameBuffer.length);\n-\t\tbuf.writeUInt32LE(item.size, 0);\n-\t\tnameBuffer.copy(buf, 4, 0);\n+\t\tconst buf = Buffer.allocUnsafe(8 + nameBuffer.length);\n+\t\twriteUInt64LE(buf, item.size, 0);\n+\t\tnameBuffer.copy(buf, 8, 0);\n \t\tconst lazy = resultToLazy.get(item);\n \t\tSerializerMiddleware.setLazySerializedValue(lazy, buf);\n \t\treturn buf;\n \t});\n-\tconst lengths = resolvedData.map(item => {\n+\tconst lengths = [];\n+\tfor (const item of resolvedData) {\n \t\tif (Array.isArray(item)) {\n \t\t\tlet l = 0;\n \t\t\tfor (const b of item) l += b.length;\n-\t\t\treturn l;\n+\t\t\twhile (l > 0x7fffffff) {\n+\t\t\t\tlengths.push(0x7fffffff);\n+\t\t\t\tl -= 0x7fffffff;\n+\t\t\t}\n+\t\t\tlengths.push(l);\n \t\t} else if (item) {\n-\t\t\treturn -item.length;\n+\t\t\tlengths.push(-item.length);\n \t\t} else {\n \t\t\tthrow new Error(\"Unexpected falsy value in resolved data \" + item);\n \t\t}\n-\t});\n+\t}\n \tconst header = Buffer.allocUnsafe(8 + lengths.length * 4);\n \theader.writeUInt32LE(VERSION, 0);\n \theader.writeUInt32LE(lengths.length, 4);\n@@ -173,45 +200,145 @@ const serialize = async (middleware, data, name, writeFile) => {\n /**\n  * @param {FileMiddleware} middleware this\n  * @param {string | false} name filename\n- * @param {function(string | false): Promise<Buffer>} readFile read content of a file\n+ * @param {function(string | false): Promise<Buffer[]>} readFile read content of a file\n  * @returns {Promise<BufferSerializableType[]>} deserialized data\n  */\n const deserialize = async (middleware, name, readFile) => {\n-\tconst content = await readFile(name);\n-\tif (content.length === 0) throw new Error(\"Empty file \" + name);\n-\tconst version = content.readUInt32LE(0);\n+\tconst contents = await readFile(name);\n+\tif (contents.length === 0) throw new Error(\"Empty file \" + name);\n+\tlet contentsIndex = 0;\n+\tlet contentItem = contents[0];\n+\tlet contentItemLength = contentItem.length;\n+\tlet contentPosition = 0;\n+\tif (contentItemLength === 0) throw new Error(\"Empty file \" + name);\n+\tconst nextContent = () => {\n+\t\tcontentsIndex++;\n+\t\tcontentItem = contents[contentsIndex];\n+\t\tcontentItemLength = contentItem.length;\n+\t\tcontentPosition = 0;\n+\t};\n+\tconst ensureData = n => {\n+\t\tif (contentPosition === contentItemLength) {\n+\t\t\tnextContent();\n+\t\t}\n+\t\twhile (contentItemLength - contentPosition < n) {\n+\t\t\tconst remaining = contentItem.slice(contentPosition);\n+\t\t\tlet lengthFromNext = n - remaining.length;\n+\t\t\tconst buffers = [remaining];\n+\t\t\tfor (let i = contentsIndex + 1; i < contents.length; i++) {\n+\t\t\t\tconst l = contents[i].length;\n+\t\t\t\tif (l > lengthFromNext) {\n+\t\t\t\t\tbuffers.push(contents[i].slice(0, lengthFromNext));\n+\t\t\t\t\tcontents[i] = contents[i].slice(lengthFromNext);\n+\t\t\t\t\tlengthFromNext = 0;\n+\t\t\t\t\tbreak;\n+\t\t\t\t} else {\n+\t\t\t\t\tbuffers.push(contents[i]);\n+\t\t\t\t\tcontentsIndex = i;\n+\t\t\t\t\tlengthFromNext -= l;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tif (lengthFromNext > 0) throw new Error(\"Unexpected end of data\");\n+\t\t\tcontentItem = Buffer.concat(buffers, n);\n+\t\t\tcontentItemLength = n;\n+\t\t\tcontentPosition = 0;\n+\t\t}\n+\t};\n+\tconst readUInt32LE = () => {\n+\t\tensureData(4);\n+\t\tconst value = contentItem.readUInt32LE(contentPosition);\n+\t\tcontentPosition += 4;\n+\t\treturn value;\n+\t};\n+\tconst readInt32LE = () => {\n+\t\tensureData(4);\n+\t\tconst value = contentItem.readInt32LE(contentPosition);\n+\t\tcontentPosition += 4;\n+\t\treturn value;\n+\t};\n+\tconst readSlice = l => {\n+\t\tensureData(l);\n+\t\tif (contentPosition === 0 && contentItemLength === l) {\n+\t\t\tconst result = contentItem;\n+\t\t\tif (contentsIndex + 1 < contents.length) {\n+\t\t\t\tnextContent();\n+\t\t\t} else {\n+\t\t\t\tcontentPosition = l;\n+\t\t\t}\n+\t\t\treturn result;\n+\t\t}\n+\t\tconst result = contentItem.slice(contentPosition, contentPosition + l);\n+\t\tcontentPosition += l;\n+\t\t// we clone the buffer here to allow the original content to be garbage collected\n+\t\treturn l * 2 < contentItem.buffer.byteLength ? Buffer.from(result) : result;\n+\t};\n+\tconst version = readUInt32LE();\n \tif (version !== VERSION) {\n \t\tthrow new Error(\"Invalid file version\");\n \t}\n-\tconst sectionCount = content.readUInt32LE(4);\n+\tconst sectionCount = readUInt32LE();\n \tconst lengths = [];\n \tfor (let i = 0; i < sectionCount; i++) {\n-\t\tlengths.push(content.readInt32LE(8 + 4 * i));\n+\t\tlengths.push(readInt32LE());\n \t}\n-\tlet position = sectionCount * 4 + 8;\n-\tconst result = lengths.map(length => {\n-\t\tconst l = Math.abs(length);\n-\t\tconst section = content.slice(position, position + l);\n-\t\tposition += l;\n+\tconst result = [];\n+\tfor (let length of lengths) {\n \t\tif (length < 0) {\n-\t\t\t// we clone the buffer here to allow the original content to be garbage collected\n-\t\t\tconst clone = Buffer.from(section);\n-\t\t\tconst size = section.readUInt32LE(0);\n-\t\t\tconst nameBuffer = clone.slice(4);\n+\t\t\tconst slice = readSlice(-length);\n+\t\t\tconst size = Number(readUInt64LE(slice, 0));\n+\t\t\tconst nameBuffer = slice.slice(8);\n \t\t\tconst name = nameBuffer.toString();\n-\t\t\treturn SerializerMiddleware.createLazy(\n-\t\t\t\tmemorize(() => deserialize(middleware, name, readFile)),\n-\t\t\t\tmiddleware,\n-\t\t\t\t{\n-\t\t\t\t\tname,\n-\t\t\t\t\tsize\n-\t\t\t\t},\n-\t\t\t\tclone\n+\t\t\tresult.push(\n+\t\t\t\tSerializerMiddleware.createLazy(\n+\t\t\t\t\tmemorize(() => deserialize(middleware, name, readFile)),\n+\t\t\t\t\tmiddleware,\n+\t\t\t\t\t{\n+\t\t\t\t\t\tname,\n+\t\t\t\t\t\tsize\n+\t\t\t\t\t},\n+\t\t\t\t\tslice\n+\t\t\t\t)\n \t\t\t);\n \t\t} else {\n-\t\t\treturn section;\n+\t\t\tif (contentPosition === contentItemLength) {\n+\t\t\t\tnextContent();\n+\t\t\t} else if (contentPosition !== 0) {\n+\t\t\t\tif (length <= contentItemLength - contentPosition) {\n+\t\t\t\t\tresult.push(\n+\t\t\t\t\t\tcontentItem.slice(contentPosition, contentPosition + length)\n+\t\t\t\t\t);\n+\t\t\t\t\tcontentPosition += length;\n+\t\t\t\t\tlength = 0;\n+\t\t\t\t} else {\n+\t\t\t\t\tresult.push(contentItem.slice(contentPosition));\n+\t\t\t\t\tlength -= contentItemLength - contentPosition;\n+\t\t\t\t\tcontentPosition = contentItemLength;\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tif (length >= contentItemLength) {\n+\t\t\t\t\tresult.push(contentItem);\n+\t\t\t\t\tlength -= contentItemLength;\n+\t\t\t\t\tcontentPosition = contentItemLength;\n+\t\t\t\t} else {\n+\t\t\t\t\tresult.push(contentItem.slice(0, length));\n+\t\t\t\t\tcontentPosition += length;\n+\t\t\t\t\tlength = 0;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\twhile (length > 0) {\n+\t\t\t\tnextContent();\n+\t\t\t\tif (length >= contentItemLength) {\n+\t\t\t\t\tresult.push(contentItem);\n+\t\t\t\t\tlength -= contentItemLength;\n+\t\t\t\t\tcontentPosition = contentItemLength;\n+\t\t\t\t} else {\n+\t\t\t\t\tresult.push(contentItem.slice(0, length));\n+\t\t\t\t\tcontentPosition += length;\n+\t\t\t\t\tlength = 0;\n+\t\t\t\t}\n+\t\t\t}\n \t\t}\n-\t});\n+\t}\n \treturn result;\n };\n \n@@ -309,9 +436,72 @@ class FileMiddleware extends SerializerMiddleware {\n \t\t\t\tconst file = name\n \t\t\t\t\t? join(this.fs, filename, `../${name}${extension}`)\n \t\t\t\t\t: filename;\n-\t\t\t\treturn this.fs.readFile(file, (err, content) => {\n-\t\t\t\t\tif (err) return reject(err);\n-\t\t\t\t\tresolve(content);\n+\t\t\t\tthis.fs.stat(file, (err, stats) => {\n+\t\t\t\t\tif (err) {\n+\t\t\t\t\t\treject(err);\n+\t\t\t\t\t\treturn;\n+\t\t\t\t\t}\n+\t\t\t\t\tlet remaining = stats.size;\n+\t\t\t\t\tlet currentBuffer;\n+\t\t\t\t\tlet currentBufferUsed;\n+\t\t\t\t\tconst buf = [];\n+\t\t\t\t\tthis.fs.open(file, \"r\", (err, fd) => {\n+\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\treject(err);\n+\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tconst read = () => {\n+\t\t\t\t\t\t\tif (currentBuffer === undefined) {\n+\t\t\t\t\t\t\t\tcurrentBuffer = Buffer.allocUnsafeSlow(\n+\t\t\t\t\t\t\t\t\tMath.min(constants.MAX_LENGTH, remaining)\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\tcurrentBufferUsed = 0;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tlet readBuffer = currentBuffer;\n+\t\t\t\t\t\t\tlet readOffset = currentBufferUsed;\n+\t\t\t\t\t\t\tlet readLength = currentBuffer.length - currentBufferUsed;\n+\t\t\t\t\t\t\tif (readOffset > 0x7fffffff) {\n+\t\t\t\t\t\t\t\treadBuffer = currentBuffer.slice(readOffset);\n+\t\t\t\t\t\t\t\treadOffset = 0;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tif (readLength > 0x7fffffff) {\n+\t\t\t\t\t\t\t\treadLength = 0x7fffffff;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tthis.fs.read(\n+\t\t\t\t\t\t\t\tfd,\n+\t\t\t\t\t\t\t\treadBuffer,\n+\t\t\t\t\t\t\t\treadOffset,\n+\t\t\t\t\t\t\t\treadLength,\n+\t\t\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t\t\t(err, bytesRead) => {\n+\t\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\t\tthis.fs.close(fd, () => {\n+\t\t\t\t\t\t\t\t\t\t\treject(err);\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tcurrentBufferUsed += bytesRead;\n+\t\t\t\t\t\t\t\t\tremaining -= bytesRead;\n+\t\t\t\t\t\t\t\t\tif (currentBufferUsed === currentBuffer.length) {\n+\t\t\t\t\t\t\t\t\t\tbuf.push(currentBuffer);\n+\t\t\t\t\t\t\t\t\t\tcurrentBuffer = undefined;\n+\t\t\t\t\t\t\t\t\t\tif (remaining === 0) {\n+\t\t\t\t\t\t\t\t\t\t\tthis.fs.close(fd, err => {\n+\t\t\t\t\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\treject(err);\n+\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t\tresolve(buf);\n+\t\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tread();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t};\n+\t\t\t\t\t\tread();\n+\t\t\t\t\t});\n \t\t\t\t});\n \t\t\t});\n \t\treturn deserialize(this, false, readFile);"
      },
      {
        "sha": "ac0e401037512e4abb9eab64923abf8d96f6b049",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "modified",
        "additions": 89,
        "deletions": 5,
        "changes": 94,
        "blob_url": "https://github.com/webpack/webpack/blob/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=e500ad07142abf3c1df970a34326ef72880f3e9d",
        "patch": "@@ -4,6 +4,7 @@\n \n \"use strict\";\n \n+const createHash = require(\"../util/createHash\");\n const ArraySerializer = require(\"./ArraySerializer\");\n const DateObjectSerializer = require(\"./DateObjectSerializer\");\n const ErrorObjectSerializer = require(\"./ErrorObjectSerializer\");\n@@ -75,6 +76,12 @@ const setMapSize = (map, size) => {\n \t}\n };\n \n+const toHash = buffer => {\n+\tconst hash = createHash(\"md4\");\n+\thash.update(buffer);\n+\treturn /** @type {string} */ (hash.digest(\"latin1\"));\n+};\n+\n const ESCAPE = null;\n const ESCAPE_ESCAPE_VALUE = null;\n const ESCAPE_END_OBJECT = true;\n@@ -244,6 +251,68 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\tconst addReferenceable = item => {\n \t\t\treferenceable.set(item, currentPos++);\n \t\t};\n+\t\tconst bufferDedupeMap = new Map();\n+\t\tconst dedupeBuffer = buf => {\n+\t\t\tconst len = buf.length;\n+\t\t\tconst entry = bufferDedupeMap.get(len);\n+\t\t\tif (entry === undefined) {\n+\t\t\t\tbufferDedupeMap.set(len, buf);\n+\t\t\t\treturn buf;\n+\t\t\t}\n+\t\t\tif (Buffer.isBuffer(entry)) {\n+\t\t\t\tif (len < 32) {\n+\t\t\t\t\tif (buf.equals(entry)) {\n+\t\t\t\t\t\treturn entry;\n+\t\t\t\t\t}\n+\t\t\t\t\tbufferDedupeMap.set(len, [entry, buf]);\n+\t\t\t\t\treturn buf;\n+\t\t\t\t} else {\n+\t\t\t\t\tconst hash = toHash(entry);\n+\t\t\t\t\tconst newMap = new Map();\n+\t\t\t\t\tnewMap.set(hash, entry);\n+\t\t\t\t\tbufferDedupeMap.set(len, newMap);\n+\t\t\t\t\tconst hashBuf = toHash(buf);\n+\t\t\t\t\tif (hash === hashBuf) {\n+\t\t\t\t\t\treturn entry;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn buf;\n+\t\t\t\t}\n+\t\t\t} else if (Array.isArray(entry)) {\n+\t\t\t\tif (entry.length < 16) {\n+\t\t\t\t\tfor (const item of entry) {\n+\t\t\t\t\t\tif (buf.equals(item)) {\n+\t\t\t\t\t\t\treturn item;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tentry.push(buf);\n+\t\t\t\t\treturn buf;\n+\t\t\t\t} else {\n+\t\t\t\t\tconst newMap = new Map();\n+\t\t\t\t\tconst hash = toHash(buf);\n+\t\t\t\t\tlet found;\n+\t\t\t\t\tfor (const item of entry) {\n+\t\t\t\t\t\tconst itemHash = toHash(item);\n+\t\t\t\t\t\tnewMap.set(itemHash, item);\n+\t\t\t\t\t\tif (found === undefined && itemHash === hash) found = item;\n+\t\t\t\t\t}\n+\t\t\t\t\tbufferDedupeMap.set(len, newMap);\n+\t\t\t\t\tif (found === undefined) {\n+\t\t\t\t\t\tnewMap.set(hash, buf);\n+\t\t\t\t\t\treturn buf;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\treturn found;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tconst hash = toHash(buf);\n+\t\t\t\tconst item = entry.get(hash);\n+\t\t\t\tif (item !== undefined) {\n+\t\t\t\t\treturn item;\n+\t\t\t\t}\n+\t\t\t\tentry.set(hash, buf);\n+\t\t\t\treturn buf;\n+\t\t\t}\n+\t\t};\n \t\tlet currentPosTypeLookup = 0;\n \t\tconst objectTypeLookup = new Map();\n \t\tconst cycleStack = new Set();\n@@ -339,6 +408,16 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t}\n \n \t\t\tif (Buffer.isBuffer(item)) {\n+\t\t\t\tconst alreadyUsedBuffer = dedupeBuffer(item);\n+\t\t\t\tif (alreadyUsedBuffer !== item) {\n+\t\t\t\t\tconst ref = referenceable.get(alreadyUsedBuffer);\n+\t\t\t\t\tif (ref !== undefined) {\n+\t\t\t\t\t\treferenceable.set(item, ref);\n+\t\t\t\t\t\tresult.push(ESCAPE, ref - currentPos);\n+\t\t\t\t\t\treturn;\n+\t\t\t\t\t}\n+\t\t\t\t\titem = alreadyUsedBuffer;\n+\t\t\t\t}\n \t\t\t\taddReferenceable(item);\n \n \t\t\t\tresult.push(item);\n@@ -373,8 +452,8 @@ class ObjectMiddleware extends SerializerMiddleware {\n \n \t\t\t\taddReferenceable(item);\n \t\t\t} else if (typeof item === \"string\") {\n-\t\t\t\tif (item !== \"\") {\n-\t\t\t\t\t// empty strings are shorter when not emitting a reference (this saves 1 byte per empty string)\n+\t\t\t\tif (item.length > 1) {\n+\t\t\t\t\t// short strings are shorter when not emitting a reference (this saves 1 byte per empty string)\n \t\t\t\t\taddReferenceable(item);\n \t\t\t\t}\n \n@@ -449,13 +528,13 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\tthrow new Error(\"Version mismatch, serializer changed\");\n \n \t\tlet currentPos = 0;\n-\t\tconst referenceable = [];\n+\t\tlet referenceable = [];\n \t\tconst addReferenceable = item => {\n \t\t\treferenceable.push(item);\n \t\t\tcurrentPos++;\n \t\t};\n \t\tlet currentPosTypeLookup = 0;\n-\t\tconst objectTypeLookup = [];\n+\t\tlet objectTypeLookup = [];\n \t\tconst result = [];\n \t\tconst ctx = {\n \t\t\tread() {\n@@ -558,7 +637,7 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else if (typeof item === \"string\") {\n-\t\t\t\tif (item !== \"\") {\n+\t\t\t\tif (item.length > 1) {\n \t\t\t\t\taddReferenceable(item);\n \t\t\t\t}\n \n@@ -581,6 +660,11 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\tresult.push(decodeValue());\n \t\t}\n \n+\t\t// Help the GC, as functions above might be cached in inline caches\n+\t\treferenceable = undefined;\n+\t\tobjectTypeLookup = undefined;\n+\t\tdata = undefined;\n+\n \t\treturn result;\n \t}\n }"
      },
      {
        "sha": "f1a3f3014ae1754e0aab12df8440edfc50a2c762",
        "filename": "lib/util/fs.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Futil%2Ffs.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e500ad07142abf3c1df970a34326ef72880f3e9d/lib%2Futil%2Ffs.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Ffs.js?ref=e500ad07142abf3c1df970a34326ef72880f3e9d",
        "patch": "@@ -16,6 +16,7 @@ const path = require(\"path\");\n /** @typedef {function(NodeJS.ErrnoException=, Buffer|string=): void} BufferOrStringCallback */\n /** @typedef {function(NodeJS.ErrnoException=, string[]=): void} StringArrayCallback */\n /** @typedef {function(NodeJS.ErrnoException=, string=): void} StringCallback */\n+/** @typedef {function(NodeJS.ErrnoException=, number=): void} NumberCallback */\n /** @typedef {function(NodeJS.ErrnoException=, NodeFsStats=): void} StatsCallback */\n /** @typedef {function((NodeJS.ErrnoException | Error)=, any=): void} ReadJsonCallback */\n \n@@ -73,6 +74,9 @@ const path = require(\"path\");\n  * @typedef {Object} IntermediateFileSystemExtras\n  * @property {function(string): void} mkdirSync\n  * @property {function(string): import(\"fs\").WriteStream} createWriteStream\n+ * @property {function(string, string, NumberCallback): void} open\n+ * @property {function(number, Buffer, number, number, number, NumberCallback): void} read\n+ * @property {function(number, Callback): void} close\n  * @property {function(string, string, Callback): void} rename\n  */\n "
      },
      {
        "sha": "5372b31db68fbe9088d847495409a4b85caa11c1",
        "filename": "test/BinaryMiddleware.unittest.js",
        "status": "added",
        "additions": 112,
        "deletions": 0,
        "changes": 112,
        "blob_url": "https://github.com/webpack/webpack/blob/e500ad07142abf3c1df970a34326ef72880f3e9d/test%2FBinaryMiddleware.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e500ad07142abf3c1df970a34326ef72880f3e9d/test%2FBinaryMiddleware.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FBinaryMiddleware.unittest.js?ref=e500ad07142abf3c1df970a34326ef72880f3e9d",
        "patch": "@@ -0,0 +1,112 @@\n+const BinaryMiddleware = require(\"../lib/serialization/BinaryMiddleware\");\n+const SerializerMiddleware = require(\"../lib/serialization/SerializerMiddleware\");\n+\n+const cont = (base, count) => {\n+\tconst result = [];\n+\tfor (let i = 0; i < count; i++) {\n+\t\tresult.push(base[i % base.length]);\n+\t}\n+\treturn result;\n+};\n+\n+const mw = new BinaryMiddleware();\n+const other = { other: true };\n+\n+const resolveLazy = item => {\n+\tif (SerializerMiddleware.isLazy(item)) {\n+\t\tconst data = item();\n+\t\tif (Array.isArray(data)) return { resolvesTo: data.map(resolveLazy) };\n+\t\treturn { resolvesTo: resolveLazy(data) };\n+\t}\n+\treturn item;\n+};\n+\n+describe(\"BinaryMiddleware\", () => {\n+\tconst items = [\n+\t\ttrue,\n+\t\tfalse,\n+\t\tnull,\n+\t\t\"\",\n+\t\t\"hi\",\n+\t\t\"hi\".repeat(200),\n+\t\t\"😀\",\n+\t\t\"😀\".repeat(200),\n+\t\tBuffer.from(\"hello\"),\n+\t\t1,\n+\t\t11,\n+\t\t0x100,\n+\t\t-1,\n+\t\t-11,\n+\t\t-0x100,\n+\t\t-1.25,\n+\t\tSerializerMiddleware.createLazy([5], other),\n+\t\tSerializerMiddleware.createLazy(\n+\t\t\t[SerializerMiddleware.createLazy([5], other)],\n+\t\t\tmw\n+\t\t),\n+\t\tSerializerMiddleware.createLazy(\n+\t\t\t[\n+\t\t\t\t1,\n+\t\t\t\tSerializerMiddleware.createLazy([2], mw),\n+\t\t\t\tSerializerMiddleware.createLazy([5], other),\n+\t\t\t\t4\n+\t\t\t],\n+\t\t\tmw\n+\t\t)\n+\t];\n+\titems.push(SerializerMiddleware.createLazy(items.slice(), mw));\n+\titems.push(SerializerMiddleware.createLazy(items.slice(), other));\n+\titems.push(undefined);\n+\n+\tconst cases = [\n+\t\t...items.map(item => [item]),\n+\t\t[(true, true)],\n+\t\t[false, true],\n+\t\t[true, false],\n+\t\t[false, false],\n+\t\t[false, false, false],\n+\t\t[false, true, false, true],\n+\t\t[true, true, true],\n+\t\t[false, false, false],\n+\t\tcont([false, true, false, true], 5),\n+\t\tcont([true], 5),\n+\t\tcont([false], 5),\n+\t\tcont([false, true, false, true], 6),\n+\t\tcont([true], 6),\n+\t\tcont([false], 6),\n+\t\tcont([false, true, false, true], 7),\n+\t\tcont([false, true, false, true], 8),\n+\t\tcont([false, true, false, true], 9),\n+\t\tcont([false, true, false, true], 132),\n+\t\tcont([false, true, false, true], 133),\n+\t\tcont([false, true, false, true], 134),\n+\t\tcont([false, true, false, true], 135),\n+\t\tcont([true], 135),\n+\t\t[null],\n+\t\t[null, null],\n+\t\t[null, null, null],\n+\t\tcont([null], 4),\n+\t\tcont([null], 100),\n+\t\tcont([null], 300),\n+\t\tcont([-20], 20),\n+\t\tcont([400], 20),\n+\t\tcont([5.5], 20)\n+\t];\n+\n+\tfor (const caseData of cases) {\n+\t\tfor (const prepend of items) {\n+\t\t\tfor (const append of items) {\n+\t\t\t\tconst data = [prepend, ...caseData, append].filter(\n+\t\t\t\t\tx => x !== undefined\n+\t\t\t\t);\n+\t\t\t\tif (data.length === 0) continue;\n+\t\t\t\tconst key = JSON.stringify(data.map(resolveLazy));\n+\t\t\t\tit(`should serialize ${key} (${data.length}) correctly`, () => {\n+\t\t\t\t\tconst serialized = mw.serialize(data, {});\n+\t\t\t\t\tconst newData = mw.deserialize(serialized, {});\n+\t\t\t\t\texpect(newData.map(resolveLazy)).toEqual(data.map(resolveLazy));\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n+\t}\n+});"
      },
      {
        "sha": "503a321747e2eb0cd1d56fe4f238f59ee2304041",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/e500ad07142abf3c1df970a34326ef72880f3e9d/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/e500ad07142abf3c1df970a34326ef72880f3e9d/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=e500ad07142abf3c1df970a34326ef72880f3e9d",
        "patch": "@@ -3690,6 +3690,20 @@ type IntermediateFileSystem = InputFileSystem &\n declare interface IntermediateFileSystemExtras {\n \tmkdirSync: (arg0: string) => void;\n \tcreateWriteStream: (arg0: string) => WriteStream;\n+\topen: (\n+\t\targ0: string,\n+\t\targ1: string,\n+\t\targ2: (arg0: NodeJS.ErrnoException, arg1: number) => void\n+\t) => void;\n+\tread: (\n+\t\targ0: number,\n+\t\targ1: Buffer,\n+\t\targ2: number,\n+\t\targ3: number,\n+\t\targ4: number,\n+\t\targ5: (arg0: NodeJS.ErrnoException, arg1: number) => void\n+\t) => void;\n+\tclose: (arg0: number, arg1: (arg0: NodeJS.ErrnoException) => void) => void;\n \trename: (\n \t\targ0: string,\n \t\targ1: string,"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/11369",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/11369/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/11369/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/11369/events",
    "html_url": "https://github.com/webpack/webpack/pull/11369",
    "id": 684800695,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDcyNjI4OTg0",
    "number": 11369,
    "title": "Persistent Caching performance improvements and logging for large builds",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-08-24T16:24:17Z",
    "updated_at": "2020-08-25T11:41:22Z",
    "closed_at": "2020-08-25T11:41:20Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/11369",
      "html_url": "https://github.com/webpack/webpack/pull/11369",
      "diff_url": "https://github.com/webpack/webpack/pull/11369.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/11369.patch",
      "merged_at": "2020-08-25T11:41:20Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/11369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/11369/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "0ac7f22817d2bbf25656a0cafbdd40e9f3f33702",
        "filename": "declarations.d.ts",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/declarations.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/declarations.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations.d.ts?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -328,9 +328,11 @@ declare module \"webpack-sources\" {\n \t}\n \n \texport class CachedSource extends Source {\n-\t\tconstructor(source: Source, cachedData?: any);\n+\t\tconstructor(source: Source);\n+\t\tconstructor(source: Source | (() => Source), cachedData?: any);\n \n \t\toriginal(): Source;\n+\t\toriginalLazy(): Source | (() => Source);\n \t\tgetCachedData(): any;\n \t}\n "
      },
      {
        "sha": "bbf353303b2234d323e2178eec69cf17c4fbdc14",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 18,
        "deletions": 16,
        "changes": 34,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -1451,13 +1451,13 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si\n \t\t\t\t\t\tcontextDependencies,\n \t\t\t\t\t\tmissingDependencies\n \t\t\t\t\t} = result;\n-\t\t\t\t\tif (fileDependencies && fileDependencies.size > 0) {\n+\t\t\t\t\tif (fileDependencies) {\n \t\t\t\t\t\tthis.fileDependencies.addAll(fileDependencies);\n \t\t\t\t\t}\n-\t\t\t\t\tif (contextDependencies && contextDependencies.size > 0) {\n+\t\t\t\t\tif (contextDependencies) {\n \t\t\t\t\t\tthis.contextDependencies.addAll(contextDependencies);\n \t\t\t\t\t}\n-\t\t\t\t\tif (missingDependencies && missingDependencies.size > 0) {\n+\t\t\t\t\tif (missingDependencies) {\n \t\t\t\t\t\tthis.missingDependencies.addAll(missingDependencies);\n \t\t\t\t\t}\n \t\t\t\t}\n@@ -1998,7 +1998,15 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t\t\t\t\t\t\t\tthis.unseal();\n \t\t\t\t\t\t\t\t\treturn this.seal(callback);\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\treturn this.hooks.afterSeal.callAsync(callback);\n+\t\t\t\t\t\t\t\treturn this.hooks.afterSeal.callAsync(err => {\n+\t\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\t\treturn callback(\n+\t\t\t\t\t\t\t\t\t\t\tmakeWebpackError(err, \"Compilation.hooks.afterSeal\")\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tthis.fileSystemInfo.logStatistics();\n+\t\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t};\n \n@@ -2503,18 +2511,12 @@ Or do you want to use the entrypoints '${name}' and '${runtime}' independently o\n \t\t}\n \n \t\tfor (const module of this.modules) {\n-\t\t\tconst fileDependencies = module.buildInfo.fileDependencies;\n-\t\t\tconst contextDependencies = module.buildInfo.contextDependencies;\n-\t\t\tconst missingDependencies = module.buildInfo.missingDependencies;\n-\t\t\tif (fileDependencies) {\n-\t\t\t\tthis.fileDependencies.addAll(fileDependencies);\n-\t\t\t}\n-\t\t\tif (contextDependencies) {\n-\t\t\t\tthis.contextDependencies.addAll(contextDependencies);\n-\t\t\t}\n-\t\t\tif (missingDependencies) {\n-\t\t\t\tthis.missingDependencies.addAll(missingDependencies);\n-\t\t\t}\n+\t\t\tmodule.addCacheDependencies(\n+\t\t\t\tthis.fileDependencies,\n+\t\t\t\tthis.contextDependencies,\n+\t\t\t\tthis.missingDependencies,\n+\t\t\t\tthis.buildDependencies\n+\t\t\t);\n \t\t}\n \t}\n "
      },
      {
        "sha": "e615fc6d4a1c803b852186d365efb464ce7f2096",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -243,7 +243,7 @@ class Compiler {\n \t * @returns {CacheFacade} the cache facade instance\n \t */\n \tgetCache(name) {\n-\t\treturn new CacheFacade(this.cache, `${this.compilerPath}/${name}`);\n+\t\treturn new CacheFacade(this.cache, `${this.compilerPath}${name}`);\n \t}\n \n \t/**\n@@ -854,8 +854,7 @@ ${other}`);\n \t\tchildCompiler.fileTimestamps = this.fileTimestamps;\n \t\tchildCompiler.contextTimestamps = this.contextTimestamps;\n \t\tchildCompiler.cache = this.cache;\n-\t\tchildCompiler.compilerPath =\n-\t\t\tthis.compilerPath + \"/\" + compilerName + compilerIndex;\n+\t\tchildCompiler.compilerPath = `${this.compilerPath}${compilerName}|${compilerIndex}|`;\n \n \t\tconst relativeCompilerName = makePathsRelative(\n \t\t\tthis.context,"
      },
      {
        "sha": "ec680c67dfd45bac660ea04c70af86dd30067442",
        "filename": "lib/ContextModule.js",
        "status": "modified",
        "additions": 17,
        "deletions": 5,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FContextModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FContextModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModule.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -38,6 +38,7 @@ const makeSerializable = require(\"./util/makeSerializable\");\n /** @typedef {import(\"./ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\n /** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n /** @typedef {import(\"./dependencies/ContextElementDependency\")} ContextElementDependency */\n+/** @template T @typedef {import(\"./util/LazySet\")<T>} LazySet<T> */\n /** @typedef {import(\"./util/fs\").InputFileSystem} InputFileSystem */\n \n /** @typedef {\"sync\" | \"eager\" | \"weak\" | \"async-weak\" | \"lazy\" | \"lazy-once\"} ContextMode Context mode */\n@@ -109,9 +110,6 @@ class ContextModule extends Module {\n \t\t\tthis.resolveOptions = options.resolveOptions;\n \t\t}\n \n-\t\t// Info from Build\n-\t\tthis._contextDependencies = new Set([this.context]);\n-\n \t\tif (options && typeof options.mode !== \"string\") {\n \t\t\tthrow new Error(\"options.mode is a required option\");\n \t\t}\n@@ -333,8 +331,7 @@ class ContextModule extends Module {\n \t\t\tdefaultObject: \"redirect-warn\"\n \t\t};\n \t\tthis.buildInfo = {\n-\t\t\tsnapshot: undefined,\n-\t\t\tcontextDependencies: this._contextDependencies\n+\t\t\tsnapshot: undefined\n \t\t};\n \t\tthis.dependencies.length = 0;\n \t\tthis.blocks.length = 0;\n@@ -441,6 +438,21 @@ class ContextModule extends Module {\n \t\t});\n \t}\n \n+\t/**\n+\t * @param {LazySet<string>} fileDependencies set where file dependencies are added to\n+\t * @param {LazySet<string>} contextDependencies set where context dependencies are added to\n+\t * @param {LazySet<string>} missingDependencies set where missing dependencies are added to\n+\t * @param {LazySet<string>} buildDependencies set where build dependencies are added to\n+\t */\n+\taddCacheDependencies(\n+\t\tfileDependencies,\n+\t\tcontextDependencies,\n+\t\tmissingDependencies,\n+\t\tbuildDependencies\n+\t) {\n+\t\tcontextDependencies.add(this.context);\n+\t}\n+\n \t/**\n \t * @param {ContextElementDependency[]} dependencies all dependencies\n \t * @param {ChunkGraph} chunkGraph chunk graph"
      },
      {
        "sha": "5ea9a8fb1018dd5ef0a3679f8c96872f7a0a8d6b",
        "filename": "lib/DefinePlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FDefinePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FDefinePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDefinePlugin.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -32,8 +32,6 @@ class RuntimeValue {\n \t\t} else {\n \t\t\tfor (const fileDependency of this.fileDependencies) {\n \t\t\t\tbuildInfo.fileDependencies.add(fileDependency);\n-\t\t\t\tif (!buildInfo.snapshot.fileTimestamps.has(fileDependency))\n-\t\t\t\t\tbuildInfo.snapshot.fileTimestamps.set(fileDependency, {});\n \t\t\t}\n \t\t}\n "
      },
      {
        "sha": "623c4d6ca83ed2fe512a8117dc6bc34b05c9cde9",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 868,
        "deletions": 276,
        "changes": 1144,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -10,6 +10,7 @@ const asyncLib = require(\"neo-async\");\n const AsyncQueue = require(\"./util/AsyncQueue\");\n const createHash = require(\"./util/createHash\");\n const { join, dirname, relative } = require(\"./util/fs\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"./WebpackError\")} WebpackError */\n /** @typedef {import(\"./logging/Logger\").Logger} Logger */\n@@ -45,18 +46,6 @@ const INVALID = Symbol(\"invalid\");\n  * @property {string=} timestampHash\n  */\n \n-/**\n- * @typedef {Object} Snapshot\n- * @property {number=} startTime\n- * @property {Map<string, FileSystemInfoEntry>=} fileTimestamps\n- * @property {Map<string, string>=} fileHashes\n- * @property {Map<string, FileSystemInfoEntry>=} contextTimestamps\n- * @property {Map<string, string>=} contextHashes\n- * @property {Map<string, boolean>=} missingExistence\n- * @property {Map<string, string>=} managedItemInfo\n- * @property {Set<Snapshot>=} children\n- */\n-\n /**\n  * @typedef {Object} SnapshotOptimizationEntry\n  * @property {Snapshot} snapshot\n@@ -77,6 +66,523 @@ const INVALID = Symbol(\"invalid\");\n  * @property {Set<string>} resolveDependencies.missing list of missing entries\n  */\n \n+const DONE_ITERATOR_RESULT = new Set().keys().next();\n+\n+class Snapshot {\n+\tconstructor() {\n+\t\tthis._flags = 0;\n+\t\t/** @type {number | undefined} */\n+\t\tthis.startTime = undefined;\n+\t\t/** @type {Map<string, FileSystemInfoEntry> | undefined} */\n+\t\tthis.fileTimestamps = undefined;\n+\t\t/** @type {Map<string, string> | undefined} */\n+\t\tthis.fileHashes = undefined;\n+\t\t/** @type {Map<string, FileSystemInfoEntry> | undefined} */\n+\t\tthis.contextTimestamps = undefined;\n+\t\t/** @type {Map<string, string> | undefined} */\n+\t\tthis.contextHashes = undefined;\n+\t\t/** @type {Map<string, boolean> | undefined} */\n+\t\tthis.missingExistence = undefined;\n+\t\t/** @type {Map<string, string> | undefined} */\n+\t\tthis.managedItemInfo = undefined;\n+\t\t/** @type {Set<string> | undefined} */\n+\t\tthis.managedFiles = undefined;\n+\t\t/** @type {Set<string> | undefined} */\n+\t\tthis.managedContexts = undefined;\n+\t\t/** @type {Set<string> | undefined} */\n+\t\tthis.managedMissing = undefined;\n+\t\t/** @type {Set<Snapshot> | undefined} */\n+\t\tthis.children = undefined;\n+\t}\n+\n+\thasStartTime() {\n+\t\treturn (this._flags & 1) !== 0;\n+\t}\n+\n+\tsetStartTime(value) {\n+\t\tthis._flags = this._flags | 1;\n+\t\tthis.startTime = value;\n+\t}\n+\n+\tsetMergedStartTime(value, snapshot) {\n+\t\tif (value) {\n+\t\t\tif (snapshot.hasStartTime()) {\n+\t\t\t\tthis.setStartTime(Math.min(value, snapshot.startTime));\n+\t\t\t} else {\n+\t\t\t\tthis.setStartTime(value);\n+\t\t\t}\n+\t\t} else {\n+\t\t\tif (snapshot.hasStartTime()) this.setStartTime(snapshot.startTime);\n+\t\t}\n+\t}\n+\n+\thasFileTimestamps() {\n+\t\treturn (this._flags & 2) !== 0;\n+\t}\n+\n+\tsetFileTimestamps(value) {\n+\t\tthis._flags = this._flags | 2;\n+\t\tthis.fileTimestamps = value;\n+\t}\n+\n+\thasFileHashes() {\n+\t\treturn (this._flags & 4) !== 0;\n+\t}\n+\n+\tsetFileHashes(value) {\n+\t\tthis._flags = this._flags | 4;\n+\t\tthis.fileHashes = value;\n+\t}\n+\n+\thasContextTimestamps() {\n+\t\treturn (this._flags & 8) !== 0;\n+\t}\n+\n+\tsetContextTimestamps(value) {\n+\t\tthis._flags = this._flags | 8;\n+\t\tthis.contextTimestamps = value;\n+\t}\n+\n+\thasContextHashes() {\n+\t\treturn (this._flags & 0x10) !== 0;\n+\t}\n+\n+\tsetContextHashes(value) {\n+\t\tthis._flags = this._flags | 0x10;\n+\t\tthis.contextHashes = value;\n+\t}\n+\n+\thasMissingExistence() {\n+\t\treturn (this._flags & 0x20) !== 0;\n+\t}\n+\n+\tsetMissingExistence(value) {\n+\t\tthis._flags = this._flags | 0x20;\n+\t\tthis.missingExistence = value;\n+\t}\n+\n+\thasManagedItemInfo() {\n+\t\treturn (this._flags & 0x40) !== 0;\n+\t}\n+\n+\tsetManagedItemInfo(value) {\n+\t\tthis._flags = this._flags | 0x40;\n+\t\tthis.managedItemInfo = value;\n+\t}\n+\n+\thasManagedFiles() {\n+\t\treturn (this._flags & 0x80) !== 0;\n+\t}\n+\n+\tsetManagedFiles(value) {\n+\t\tthis._flags = this._flags | 0x80;\n+\t\tthis.managedFiles = value;\n+\t}\n+\n+\thasManagedContexts() {\n+\t\treturn (this._flags & 0x100) !== 0;\n+\t}\n+\n+\tsetManagedContexts(value) {\n+\t\tthis._flags = this._flags | 0x100;\n+\t\tthis.managedContexts = value;\n+\t}\n+\n+\thasManagedMissing() {\n+\t\treturn (this._flags & 0x200) !== 0;\n+\t}\n+\n+\tsetManagedMissing(value) {\n+\t\tthis._flags = this._flags | 0x200;\n+\t\tthis.managedMissing = value;\n+\t}\n+\n+\thasChildren() {\n+\t\treturn (this._flags & 0x400) !== 0;\n+\t}\n+\n+\tsetChildren(value) {\n+\t\tthis._flags = this._flags | 0x400;\n+\t\tthis.children = value;\n+\t}\n+\n+\taddChild(child) {\n+\t\tif (!this.hasChildren()) {\n+\t\t\tthis.setChildren(new Set());\n+\t\t}\n+\t\tthis.children.add(child);\n+\t}\n+\n+\tserialize({ write }) {\n+\t\twrite(this._flags);\n+\t\tif (this.hasStartTime()) write(this.startTime);\n+\t\tif (this.hasFileTimestamps()) write(this.fileTimestamps);\n+\t\tif (this.hasFileHashes()) write(this.fileHashes);\n+\t\tif (this.hasContextTimestamps()) write(this.contextTimestamps);\n+\t\tif (this.hasContextHashes()) write(this.contextHashes);\n+\t\tif (this.hasMissingExistence()) write(this.missingExistence);\n+\t\tif (this.hasManagedItemInfo()) write(this.managedItemInfo);\n+\t\tif (this.hasManagedFiles()) write(this.managedFiles);\n+\t\tif (this.hasManagedContexts()) write(this.managedContexts);\n+\t\tif (this.hasManagedMissing()) write(this.managedMissing);\n+\t\tif (this.hasChildren()) write(this.children);\n+\t}\n+\n+\tdeserialize({ read }) {\n+\t\tthis._flags = read();\n+\t\tif (this.hasStartTime()) this.startTime = read();\n+\t\tif (this.hasFileTimestamps()) this.fileTimestamps = read();\n+\t\tif (this.hasFileHashes()) this.fileHashes = read();\n+\t\tif (this.hasContextTimestamps()) this.contextTimestamps = read();\n+\t\tif (this.hasContextHashes()) this.contextHashes = read();\n+\t\tif (this.hasMissingExistence()) this.missingExistence = read();\n+\t\tif (this.hasManagedItemInfo()) this.managedItemInfo = read();\n+\t\tif (this.hasManagedFiles()) this.managedFiles = read();\n+\t\tif (this.hasManagedContexts()) this.managedContexts = read();\n+\t\tif (this.hasManagedMissing()) this.managedMissing = read();\n+\t\tif (this.hasChildren()) this.children = read();\n+\t}\n+\n+\t/**\n+\t * @param {function(Snapshot): Map<string, any> | undefined} getMap first\n+\t * @param {function(Snapshot): Set<string> | undefined} getSet second\n+\t * @param {function(Snapshot): Iterable<string> | undefined} getIterable 3rd\n+\t * @returns {Iterable<string>} iterable\n+\t */\n+\t_createIterable(getMap, getSet, getIterable) {\n+\t\tlet snapshot = this;\n+\t\treturn {\n+\t\t\t[Symbol.iterator]() {\n+\t\t\t\tlet state = 0;\n+\t\t\t\t/** @type {IterableIterator<string>} */\n+\t\t\t\tlet it;\n+\t\t\t\tconst queue = [];\n+\t\t\t\treturn {\n+\t\t\t\t\tnext() {\n+\t\t\t\t\t\tfor (;;) {\n+\t\t\t\t\t\t\tswitch (state) {\n+\t\t\t\t\t\t\t\tcase 0: {\n+\t\t\t\t\t\t\t\t\tconst map = getMap(snapshot);\n+\t\t\t\t\t\t\t\t\tif (map !== undefined) {\n+\t\t\t\t\t\t\t\t\t\tit = map.keys();\n+\t\t\t\t\t\t\t\t\t\tstate = 1;\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tstate = 2;\n+\t\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t/* falls through */\n+\t\t\t\t\t\t\t\tcase 1: {\n+\t\t\t\t\t\t\t\t\tconst result = it.next();\n+\t\t\t\t\t\t\t\t\tif (!result.done) return result;\n+\t\t\t\t\t\t\t\t\tstate = 2;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t/* falls through */\n+\t\t\t\t\t\t\t\tcase 2: {\n+\t\t\t\t\t\t\t\t\tconst set = getSet(snapshot);\n+\t\t\t\t\t\t\t\t\tif (set !== undefined) {\n+\t\t\t\t\t\t\t\t\t\tit = set.keys();\n+\t\t\t\t\t\t\t\t\t\tstate = 3;\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tstate = 4;\n+\t\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t/* falls through */\n+\t\t\t\t\t\t\t\tcase 3: {\n+\t\t\t\t\t\t\t\t\tconst result = it.next();\n+\t\t\t\t\t\t\t\t\tif (!result.done) return result;\n+\t\t\t\t\t\t\t\t\tstate = 4;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t/* falls through */\n+\t\t\t\t\t\t\t\tcase 4: {\n+\t\t\t\t\t\t\t\t\tconst children = snapshot.children;\n+\t\t\t\t\t\t\t\t\tif (children !== undefined) {\n+\t\t\t\t\t\t\t\t\t\tfor (const child of children) {\n+\t\t\t\t\t\t\t\t\t\t\tqueue.push(child);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tif (queue.length > 0) {\n+\t\t\t\t\t\t\t\t\t\tsnapshot = queue.pop();\n+\t\t\t\t\t\t\t\t\t\tstate = 0;\n+\t\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tstate = 5;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t/* falls through */\n+\t\t\t\t\t\t\t\tcase 5:\n+\t\t\t\t\t\t\t\t\treturn DONE_ITERATOR_RESULT;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t};\n+\t\t\t}\n+\t\t};\n+\t}\n+\n+\t/**\n+\t * @returns {Iterable<string>} iterable\n+\t */\n+\tgetFileIterable() {\n+\t\treturn this._createIterable(\n+\t\t\ts => s.fileTimestamps,\n+\t\t\ts => s.managedFiles,\n+\t\t\ts => s.getFileIterable()\n+\t\t);\n+\t}\n+\n+\t/**\n+\t * @returns {Iterable<string>} iterable\n+\t */\n+\tgetContextIterable() {\n+\t\treturn this._createIterable(\n+\t\t\ts => s.contextTimestamps,\n+\t\t\ts => s.managedContexts,\n+\t\t\ts => s.getContextIterable()\n+\t\t);\n+\t}\n+\n+\t/**\n+\t * @returns {Iterable<string>} iterable\n+\t */\n+\tgetMissingIterable() {\n+\t\treturn this._createIterable(\n+\t\t\ts => s.missingExistence,\n+\t\t\ts => s.managedMissing,\n+\t\t\ts => s.getMissingIterable()\n+\t\t);\n+\t}\n+}\n+\n+makeSerializable(Snapshot, \"webpack/lib/FileSystemInfo\", \"Snapshot\");\n+\n+const MIN_COMMON_SNAPSHOT_SIZE = 3;\n+\n+/**\n+ * @template T\n+ */\n+class SnapshotOptimization {\n+\t/**\n+\t * @param {function(Snapshot): boolean} has has value\n+\t * @param {function(Snapshot): Map<string, T> | Set<string>} get get value\n+\t * @param {function(Snapshot, Map<string, T> | Set<string>): void} set set value\n+\t * @param {boolean=} isSet value is an Set instead of a Map\n+\t */\n+\tconstructor(has, get, set, isSet = false) {\n+\t\tthis._has = has;\n+\t\tthis._get = get;\n+\t\tthis._set = set;\n+\t\tthis._isSet = isSet;\n+\t\t/** @type {Map<string, SnapshotOptimizationEntry>} */\n+\t\tthis._map = new Map();\n+\t\tthis._statItemsShared = 0;\n+\t\tthis._statItemsUnshared = 0;\n+\t\tthis._statSharedSnapshots = 0;\n+\t\tthis._statReusedSharedSnapshots = 0;\n+\t}\n+\n+\tgetStatisticMessage() {\n+\t\tconst total = this._statItemsShared + this._statItemsUnshared;\n+\t\tif (total === 0) return undefined;\n+\t\treturn `${\n+\t\t\tthis._statItemsShared && Math.round((this._statItemsShared * 100) / total)\n+\t\t}% (${this._statItemsShared}/${total}) entries shared via ${\n+\t\t\tthis._statSharedSnapshots\n+\t\t} shared snapshots (${\n+\t\t\tthis._statReusedSharedSnapshots + this._statSharedSnapshots\n+\t\t} times referenced)`;\n+\t}\n+\n+\tstoreUnsharedSnapshot(snapshot, locations) {\n+\t\tif (locations === undefined) return;\n+\t\tconst optimizationEntry = {\n+\t\t\tsnapshot,\n+\t\t\tshared: 0,\n+\t\t\tsnapshotContent: undefined,\n+\t\t\tchildren: undefined\n+\t\t};\n+\t\tfor (const path of locations) {\n+\t\t\tthis._map.set(path, optimizationEntry);\n+\t\t}\n+\t}\n+\n+\toptimize(capturedFiles, startTime, children) {\n+\t\t/** @type {Set<string>} */\n+\t\tconst unsetOptimizationEntries = new Set();\n+\t\t/** @type {Set<SnapshotOptimizationEntry>} */\n+\t\tconst checkedOptimizationEntries = new Set();\n+\t\t/**\n+\t\t * @param {SnapshotOptimizationEntry} entry optimization entry\n+\t\t * @returns {void}\n+\t\t */\n+\t\tconst increaseSharedAndStoreOptimizationEntry = entry => {\n+\t\t\tif (entry.children !== undefined) {\n+\t\t\t\tentry.children.forEach(increaseSharedAndStoreOptimizationEntry);\n+\t\t\t}\n+\t\t\tentry.shared++;\n+\t\t\tstoreOptimizationEntry(entry);\n+\t\t};\n+\t\t/**\n+\t\t * @param {SnapshotOptimizationEntry} entry optimization entry\n+\t\t * @returns {void}\n+\t\t */\n+\t\tconst storeOptimizationEntry = entry => {\n+\t\t\tfor (const path of entry.snapshotContent) {\n+\t\t\t\tconst old = this._map.get(path);\n+\t\t\t\tif (old.shared < entry.shared) {\n+\t\t\t\t\tthis._map.set(path, entry);\n+\t\t\t\t}\n+\t\t\t\tcapturedFiles.delete(path);\n+\t\t\t}\n+\t\t};\n+\t\tconst capturedFilesSize = capturedFiles.size;\n+\t\tcapturedFiles: for (const path of capturedFiles) {\n+\t\t\tconst optimizationEntry = this._map.get(path);\n+\t\t\tif (optimizationEntry === undefined) {\n+\t\t\t\tunsetOptimizationEntries.add(path);\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t\tif (checkedOptimizationEntries.has(optimizationEntry)) continue;\n+\t\t\tconst snapshot = optimizationEntry.snapshot;\n+\t\t\tif (optimizationEntry.shared > 0) {\n+\t\t\t\t// It's a shared snapshot\n+\t\t\t\t// We can't change it, so we can only use it when all files match\n+\t\t\t\t// and startTime is compatible\n+\t\t\t\tif (\n+\t\t\t\t\tstartTime &&\n+\t\t\t\t\t(!snapshot.startTime || snapshot.startTime > startTime)\n+\t\t\t\t) {\n+\t\t\t\t\tcontinue;\n+\t\t\t\t}\n+\t\t\t\tconst nonSharedFiles = new Set();\n+\t\t\t\tconst snapshotContent = optimizationEntry.snapshotContent;\n+\t\t\t\tconst snapshotEntries = this._get(snapshot);\n+\t\t\t\tfor (const path of snapshotContent) {\n+\t\t\t\t\tif (!capturedFiles.has(path)) {\n+\t\t\t\t\t\tif (!snapshotEntries.has(path)) {\n+\t\t\t\t\t\t\t// File is not shared and can't be removed from the snapshot\n+\t\t\t\t\t\t\t// because it's in a child of the snapshot\n+\t\t\t\t\t\t\tcheckedOptimizationEntries.add(optimizationEntry);\n+\t\t\t\t\t\t\tcontinue capturedFiles;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tnonSharedFiles.add(path);\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif (nonSharedFiles.size === 0) {\n+\t\t\t\t\t// The complete snapshot is shared\n+\t\t\t\t\t// add it as child\n+\t\t\t\t\tchildren.add(snapshot);\n+\t\t\t\t\tincreaseSharedAndStoreOptimizationEntry(optimizationEntry);\n+\t\t\t\t\tthis._statReusedSharedSnapshots++;\n+\t\t\t\t} else {\n+\t\t\t\t\t// Only a part of the snapshot is shared\n+\t\t\t\t\tconst sharedCount = snapshotContent.size - nonSharedFiles.size;\n+\t\t\t\t\tif (sharedCount < MIN_COMMON_SNAPSHOT_SIZE) {\n+\t\t\t\t\t\t// Common part it too small\n+\t\t\t\t\t\tcheckedOptimizationEntries.add(optimizationEntry);\n+\t\t\t\t\t\tcontinue capturedFiles;\n+\t\t\t\t\t}\n+\t\t\t\t\t// Extract common timestamps from both snapshots\n+\t\t\t\t\tlet commonMap;\n+\t\t\t\t\tif (this._isSet) {\n+\t\t\t\t\t\tcommonMap = new Set();\n+\t\t\t\t\t\tfor (const path of /** @type {Set<string>} */ (snapshotEntries)) {\n+\t\t\t\t\t\t\tif (nonSharedFiles.has(path)) continue;\n+\t\t\t\t\t\t\tcommonMap.add(path);\n+\t\t\t\t\t\t\tsnapshotEntries.delete(path);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tcommonMap = new Map();\n+\t\t\t\t\t\tconst map = /** @type {Map<string, T>} */ (snapshotEntries);\n+\t\t\t\t\t\tfor (const [path, value] of map) {\n+\t\t\t\t\t\t\tif (nonSharedFiles.has(path)) continue;\n+\t\t\t\t\t\t\tcommonMap.set(path, value);\n+\t\t\t\t\t\t\tsnapshotEntries.delete(path);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\t// Create and attach snapshot\n+\t\t\t\t\tconst commonSnapshot = new Snapshot();\n+\t\t\t\t\tcommonSnapshot.setMergedStartTime(startTime, snapshot);\n+\t\t\t\t\tthis._set(commonSnapshot, commonMap);\n+\t\t\t\t\tchildren.add(commonSnapshot);\n+\t\t\t\t\tsnapshot.addChild(commonSnapshot);\n+\t\t\t\t\t// Create optimization entry\n+\t\t\t\t\tconst newEntry = {\n+\t\t\t\t\t\tsnapshot: commonSnapshot,\n+\t\t\t\t\t\tshared: optimizationEntry.shared + 1,\n+\t\t\t\t\t\tsnapshotContent: new Set(commonMap.keys()),\n+\t\t\t\t\t\tchildren: undefined\n+\t\t\t\t\t};\n+\t\t\t\t\tif (optimizationEntry.children === undefined)\n+\t\t\t\t\t\toptimizationEntry.children = new Set();\n+\t\t\t\t\toptimizationEntry.children.add(newEntry);\n+\t\t\t\t\tstoreOptimizationEntry(newEntry);\n+\t\t\t\t\tthis._statSharedSnapshots++;\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\t// It's a unshared snapshot\n+\t\t\t\t// We can extract a common shared snapshot\n+\t\t\t\t// with all common files\n+\t\t\t\tconst snapshotEntries = this._get(snapshot);\n+\t\t\t\tlet commonMap;\n+\t\t\t\tif (this._isSet) {\n+\t\t\t\t\tcommonMap = new Set();\n+\t\t\t\t\tconst set = /** @type {Set<string>} */ (snapshotEntries);\n+\t\t\t\t\tif (capturedFiles.size < set.size) {\n+\t\t\t\t\t\tfor (const path of capturedFiles) {\n+\t\t\t\t\t\t\tif (set.has(path)) commonMap.add(path);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tfor (const path of set) {\n+\t\t\t\t\t\t\tif (capturedFiles.has(path)) commonMap.add(path);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\tcommonMap = new Map();\n+\t\t\t\t\tconst map = /** @type {Map<string, T>} */ (snapshotEntries);\n+\t\t\t\t\tfor (const path of capturedFiles) {\n+\t\t\t\t\t\tconst ts = map.get(path);\n+\t\t\t\t\t\tif (ts === undefined) continue;\n+\t\t\t\t\t\tcommonMap.set(path, ts);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\tif (commonMap.size < MIN_COMMON_SNAPSHOT_SIZE) {\n+\t\t\t\t\t// Common part it too small\n+\t\t\t\t\tcheckedOptimizationEntries.add(optimizationEntry);\n+\t\t\t\t\tcontinue capturedFiles;\n+\t\t\t\t}\n+\t\t\t\t// Create and attach snapshot\n+\t\t\t\tconst commonSnapshot = new Snapshot();\n+\t\t\t\tcommonSnapshot.setMergedStartTime(startTime, snapshot);\n+\t\t\t\tthis._set(commonSnapshot, commonMap);\n+\t\t\t\tchildren.add(commonSnapshot);\n+\t\t\t\tsnapshot.addChild(commonSnapshot);\n+\t\t\t\t// Remove files from snapshot\n+\t\t\t\tfor (const path of commonMap.keys()) snapshotEntries.delete(path);\n+\t\t\t\tconst sharedCount = commonMap.size;\n+\t\t\t\tthis._statItemsUnshared -= sharedCount;\n+\t\t\t\tthis._statItemsShared += sharedCount;\n+\t\t\t\t// Create optimization entry\n+\t\t\t\tstoreOptimizationEntry({\n+\t\t\t\t\tsnapshot: commonSnapshot,\n+\t\t\t\t\tshared: 2,\n+\t\t\t\t\tsnapshotContent: new Set(commonMap.keys()),\n+\t\t\t\t\tchildren: undefined\n+\t\t\t\t});\n+\t\t\t\tthis._statSharedSnapshots++;\n+\t\t\t}\n+\t\t\tcheckedOptimizationEntries.add(optimizationEntry);\n+\t\t}\n+\t\tconst unshared = capturedFiles.size;\n+\t\tthis._statItemsUnshared += unshared;\n+\t\tthis._statItemsShared += capturedFilesSize - unshared;\n+\t\treturn unsetOptimizationEntries;\n+\t}\n+}\n+\n /* istanbul ignore next */\n /**\n  * @param {number} mtime mtime\n@@ -215,8 +721,54 @@ class FileSystemInfo {\n \t\tthis._loggedPaths = logger ? new Set() : undefined;\n \t\t/** @type {WeakMap<Snapshot, boolean | (function(WebpackError=, boolean=): void)[]>} */\n \t\tthis._snapshotCache = new WeakMap();\n-\t\t/** @type {Map<string, SnapshotOptimizationEntry>} */\n-\t\tthis._snapshotOptimization = new Map();\n+\t\tthis._fileTimestampsOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasFileTimestamps(),\n+\t\t\ts => s.fileTimestamps,\n+\t\t\t(s, v) => s.setFileTimestamps(v)\n+\t\t);\n+\t\tthis._fileHashesOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasFileHashes(),\n+\t\t\ts => s.fileHashes,\n+\t\t\t(s, v) => s.setFileHashes(v)\n+\t\t);\n+\t\tthis._contextTimestampsOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasContextTimestamps(),\n+\t\t\ts => s.contextTimestamps,\n+\t\t\t(s, v) => s.setContextTimestamps(v)\n+\t\t);\n+\t\tthis._contextHashesOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasContextHashes(),\n+\t\t\ts => s.contextHashes,\n+\t\t\t(s, v) => s.setContextHashes(v)\n+\t\t);\n+\t\tthis._missingExistenceOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasMissingExistence(),\n+\t\t\ts => s.missingExistence,\n+\t\t\t(s, v) => s.setMissingExistence(v)\n+\t\t);\n+\t\tthis._managedItemInfoOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasManagedItemInfo(),\n+\t\t\ts => s.managedItemInfo,\n+\t\t\t(s, v) => s.setManagedItemInfo(v)\n+\t\t);\n+\t\tthis._managedFilesOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasManagedFiles(),\n+\t\t\ts => s.managedFiles,\n+\t\t\t(s, v) => s.setManagedFiles(v),\n+\t\t\ttrue\n+\t\t);\n+\t\tthis._managedContextsOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasManagedContexts(),\n+\t\t\ts => s.managedContexts,\n+\t\t\t(s, v) => s.setManagedContexts(v),\n+\t\t\ttrue\n+\t\t);\n+\t\tthis._managedMissingOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasManagedMissing(),\n+\t\t\ts => s.managedMissing,\n+\t\t\t(s, v) => s.setManagedMissing(v),\n+\t\t\ttrue\n+\t\t);\n \t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | null>} */\n \t\tthis._fileTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n@@ -271,6 +823,91 @@ class FileSystemInfo {\n \t\tthis.immutablePathsWithSlash = this.immutablePaths.map(p =>\n \t\t\tjoin(fs, p, \"_\").slice(0, -1)\n \t\t);\n+\n+\t\tthis._statCreatedSnapshots = 0;\n+\t\tthis._statTestedSnapshotsCached = 0;\n+\t\tthis._statTestedSnapshotsNotCached = 0;\n+\t\tthis._statTestedChildrenCached = 0;\n+\t\tthis._statTestedChildrenNotCached = 0;\n+\t\tthis._statTestedEntries = 0;\n+\t}\n+\n+\tlogStatistics() {\n+\t\tconst logWhenMessage = (header, message) => {\n+\t\t\tif (message) {\n+\t\t\t\tthis.logger.log(`${header}: ${message}`);\n+\t\t\t}\n+\t\t};\n+\t\tthis.logger.log(`${this._statCreatedSnapshots} new snapshots created`);\n+\t\tthis.logger.log(\n+\t\t\t`${\n+\t\t\t\tthis._statTestedSnapshotsNotCached &&\n+\t\t\t\tMath.round(\n+\t\t\t\t\t(this._statTestedSnapshotsNotCached * 100) /\n+\t\t\t\t\t\t(this._statTestedSnapshotsCached +\n+\t\t\t\t\t\t\tthis._statTestedSnapshotsNotCached)\n+\t\t\t\t)\n+\t\t\t}% root snapshot uncached (${this._statTestedSnapshotsNotCached} / ${\n+\t\t\t\tthis._statTestedSnapshotsCached + this._statTestedSnapshotsNotCached\n+\t\t\t})`\n+\t\t);\n+\t\tthis.logger.log(\n+\t\t\t`${\n+\t\t\t\tthis._statTestedChildrenNotCached &&\n+\t\t\t\tMath.round(\n+\t\t\t\t\t(this._statTestedChildrenNotCached * 100) /\n+\t\t\t\t\t\t(this._statTestedChildrenCached + this._statTestedChildrenNotCached)\n+\t\t\t\t)\n+\t\t\t}% children snapshot uncached (${this._statTestedChildrenNotCached} / ${\n+\t\t\t\tthis._statTestedChildrenCached + this._statTestedChildrenNotCached\n+\t\t\t})`\n+\t\t);\n+\t\tthis.logger.log(`${this._statTestedEntries} entries tested`);\n+\t\tthis.logger.log(\n+\t\t\t`File info in cache: ${this._fileTimestamps.size} timestamps ${this._fileHashes.size} hashes`\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`File timestamp snapshot optimization`,\n+\t\t\tthis._fileTimestampsOptimization.getStatisticMessage()\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`File hash snapshot optimization`,\n+\t\t\tthis._fileHashesOptimization.getStatisticMessage()\n+\t\t);\n+\t\tthis.logger.log(\n+\t\t\t`Directory info in cache: ${this._contextTimestamps.size} timestamps ${this._contextHashes.size} hashes`\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Directory timestamp snapshot optimization`,\n+\t\t\tthis._contextTimestampsOptimization.getStatisticMessage()\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Directory hash snapshot optimization`,\n+\t\t\tthis._contextHashesOptimization.getStatisticMessage()\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Missing items snapshot optimization`,\n+\t\t\tthis._missingExistenceOptimization.getStatisticMessage()\n+\t\t);\n+\t\tthis.logger.log(\n+\t\t\t`Managed items info in cache: ${this._managedItems.size} items`\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Managed items snapshot optimization`,\n+\t\t\tthis._managedItemInfoOptimization.getStatisticMessage()\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Managed files snapshot optimization`,\n+\t\t\tthis._managedFilesOptimization.getStatisticMessage()\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Managed contexts snapshot optimization`,\n+\t\t\tthis._managedContextsOptimization.getStatisticMessage()\n+\t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Managed missing snapshot optimization`,\n+\t\t\tthis._managedMissingOptimization.getStatisticMessage()\n+\t\t);\n \t}\n \n \t_log(path, reason, ...args) {\n@@ -690,6 +1327,7 @@ class FileSystemInfo {\n \t * @param {Iterable<string>} missing all missing files or directories\n \t * @param {Object} options options object (for future extensions)\n \t * @param {boolean=} options.hash should use hash to snapshot\n+\t * @param {boolean=} options.timestamp should use timestamp to snapshot\n \t * @param {function(WebpackError=, Snapshot=): void} callback callback function\n \t * @returns {void}\n \t */\n@@ -706,40 +1344,120 @@ class FileSystemInfo {\n \t\tconst missingExistence = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tconst managedItemInfo = new Map();\n+\t\t/** @type {Set<string>} */\n+\t\tconst managedFiles = new Set();\n+\t\t/** @type {Set<string>} */\n+\t\tconst managedContexts = new Set();\n+\t\t/** @type {Set<string>} */\n+\t\tconst managedMissing = new Set();\n \t\t/** @type {Set<Snapshot>} */\n \t\tconst children = new Set();\n \n \t\t/** @type {Set<string>} */\n-\t\tconst unsetOptimizationEntries = new Set();\n+\t\tlet unsharedFileTimestamps;\n+\t\t/** @type {Set<string>} */\n+\t\tlet unsharedFileHashes;\n+\t\t/** @type {Set<string>} */\n+\t\tlet unsharedContextTimestamps;\n+\t\t/** @type {Set<string>} */\n+\t\tlet unsharedContextHashes;\n+\t\t/** @type {Set<string>} */\n+\t\tlet unsharedMissingExistence;\n+\t\t/** @type {Set<string>} */\n+\t\tlet unsharedManagedItemInfo;\n \n \t\t/** @type {Set<string>} */\n \t\tconst managedItems = new Set();\n \n \t\tlet jobs = 1;\n \t\tconst jobDone = () => {\n \t\t\tif (--jobs === 0) {\n-\t\t\t\tconst snapshot = {};\n-\t\t\t\tif (startTime) snapshot.startTime = startTime;\n-\t\t\t\tif (fileTimestamps.size !== 0) snapshot.fileTimestamps = fileTimestamps;\n-\t\t\t\tif (fileHashes.size !== 0) snapshot.fileHashes = fileHashes;\n-\t\t\t\tif (contextTimestamps.size !== 0)\n-\t\t\t\t\tsnapshot.contextTimestamps = contextTimestamps;\n-\t\t\t\tif (contextHashes.size !== 0) snapshot.contextHashes = contextHashes;\n-\t\t\t\tif (missingExistence.size !== 0)\n-\t\t\t\t\tsnapshot.missingExistence = missingExistence;\n-\t\t\t\tif (managedItemInfo.size !== 0)\n-\t\t\t\t\tsnapshot.managedItemInfo = managedItemInfo;\n-\t\t\t\tif (children.size !== 0) snapshot.children = children;\n-\t\t\t\tthis._snapshotCache.set(snapshot, true);\n-\t\t\t\tconst optimizationEntry = {\n-\t\t\t\t\tsnapshot,\n-\t\t\t\t\tshared: 0,\n-\t\t\t\t\tsnapshotContent: undefined,\n-\t\t\t\t\tchildren: undefined\n-\t\t\t\t};\n-\t\t\t\tfor (const path of unsetOptimizationEntries) {\n-\t\t\t\t\tthis._snapshotOptimization.set(path, optimizationEntry);\n+\t\t\t\tconst snapshot = new Snapshot();\n+\t\t\t\tif (startTime) snapshot.setStartTime(startTime);\n+\t\t\t\tif (fileTimestamps.size !== 0) {\n+\t\t\t\t\tsnapshot.setFileTimestamps(fileTimestamps);\n+\t\t\t\t\tthis._fileTimestampsOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedFileTimestamps\n+\t\t\t\t\t);\n \t\t\t\t}\n+\t\t\t\tif (fileHashes.size !== 0) {\n+\t\t\t\t\tsnapshot.setFileHashes(fileHashes);\n+\t\t\t\t\tthis._fileHashesOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedFileHashes\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tif (contextTimestamps.size !== 0) {\n+\t\t\t\t\tsnapshot.setContextTimestamps(contextTimestamps);\n+\t\t\t\t\tthis._contextTimestampsOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedContextTimestamps\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tif (contextHashes.size !== 0) {\n+\t\t\t\t\tsnapshot.setContextHashes(contextHashes);\n+\t\t\t\t\tthis._contextHashesOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedContextHashes\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tif (missingExistence.size !== 0) {\n+\t\t\t\t\tsnapshot.setMissingExistence(missingExistence);\n+\t\t\t\t\tthis._missingExistenceOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedMissingExistence\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tif (managedItemInfo.size !== 0) {\n+\t\t\t\t\tsnapshot.setManagedItemInfo(managedItemInfo);\n+\t\t\t\t\tthis._managedItemInfoOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedManagedItemInfo\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tconst unsharedManagedFiles = this._managedFilesOptimization.optimize(\n+\t\t\t\t\tmanagedFiles,\n+\t\t\t\t\tundefined,\n+\t\t\t\t\tchildren\n+\t\t\t\t);\n+\t\t\t\tif (managedFiles.size !== 0) {\n+\t\t\t\t\tsnapshot.setManagedFiles(managedFiles);\n+\t\t\t\t\tthis._managedFilesOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedManagedFiles\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tconst unsharedManagedContexts = this._managedContextsOptimization.optimize(\n+\t\t\t\t\tmanagedContexts,\n+\t\t\t\t\tundefined,\n+\t\t\t\t\tchildren\n+\t\t\t\t);\n+\t\t\t\tif (managedContexts.size !== 0) {\n+\t\t\t\t\tsnapshot.setManagedContexts(managedContexts);\n+\t\t\t\t\tthis._managedContextsOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedManagedContexts\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tconst unsharedManagedMissing = this._managedMissingOptimization.optimize(\n+\t\t\t\t\tmanagedMissing,\n+\t\t\t\t\tundefined,\n+\t\t\t\t\tchildren\n+\t\t\t\t);\n+\t\t\t\tif (managedMissing.size !== 0) {\n+\t\t\t\t\tsnapshot.setManagedMissing(managedMissing);\n+\t\t\t\t\tthis._managedMissingOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedManagedMissing\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tif (children.size !== 0) {\n+\t\t\t\t\tsnapshot.setChildren(children);\n+\t\t\t\t}\n+\t\t\t\tthis._snapshotCache.set(snapshot, true);\n+\t\t\t\tthis._statCreatedSnapshots++;\n+\n \t\t\t\tcallback(null, snapshot);\n \t\t\t}\n \t\t};\n@@ -750,23 +1468,41 @@ class FileSystemInfo {\n \t\t\t\tcallback(null, null);\n \t\t\t}\n \t\t};\n+\t\tconst checkManaged = (path, managedSet) => {\n+\t\t\tfor (const immutablePath of this.immutablePathsWithSlash) {\n+\t\t\t\tif (path.startsWith(immutablePath)) {\n+\t\t\t\t\tmanagedSet.add(path);\n+\t\t\t\t\treturn true;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tfor (const managedPath of this.managedPathsWithSlash) {\n+\t\t\t\tif (path.startsWith(managedPath)) {\n+\t\t\t\t\tconst managedItem = getManagedItem(managedPath, path);\n+\t\t\t\t\tif (managedItem) {\n+\t\t\t\t\t\tmanagedItems.add(managedItem);\n+\t\t\t\t\t\tmanagedSet.add(path);\n+\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn false;\n+\t\t};\n+\t\tconst captureNonManaged = (items, managedSet) => {\n+\t\t\tconst capturedItems = new Set();\n+\t\t\tfor (const path of items) {\n+\t\t\t\tif (!checkManaged(path, managedSet)) capturedItems.add(path);\n+\t\t\t}\n+\t\t\treturn capturedItems;\n+\t\t};\n \t\tif (files) {\n+\t\t\tconst capturedFiles = captureNonManaged(files, managedFiles);\n \t\t\tif (options && options.hash) {\n-\t\t\t\tfiles: for (const path of files) {\n-\t\t\t\t\tfor (const immutablePath of this.immutablePathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(immutablePath)) {\n-\t\t\t\t\t\t\tcontinue files;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tfor (const managedPath of this.managedPathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(managedPath)) {\n-\t\t\t\t\t\t\tconst managedItem = getManagedItem(managedPath, path);\n-\t\t\t\t\t\t\tif (managedItem) {\n-\t\t\t\t\t\t\t\tmanagedItems.add(managedItem);\n-\t\t\t\t\t\t\t\tcontinue files;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n+\t\t\t\tunsharedFileHashes = this._fileHashesOptimization.optimize(\n+\t\t\t\t\tcapturedFiles,\n+\t\t\t\t\tundefined,\n+\t\t\t\t\tchildren\n+\t\t\t\t);\n+\t\t\t\tfor (const path of capturedFiles) {\n \t\t\t\t\tconst cache = this._fileHashes.get(path);\n \t\t\t\t\tif (cache !== undefined) {\n \t\t\t\t\t\tfileHashes.set(path, cache);\n@@ -788,156 +1524,11 @@ class FileSystemInfo {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\tconst capturedFiles = new Set();\n-\t\t\t\tfiles: for (const path of files) {\n-\t\t\t\t\tfor (const immutablePath of this.immutablePathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(immutablePath)) {\n-\t\t\t\t\t\t\tcontinue files;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tfor (const managedPath of this.managedPathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(managedPath)) {\n-\t\t\t\t\t\t\tconst managedItem = getManagedItem(managedPath, path);\n-\t\t\t\t\t\t\tif (managedItem) {\n-\t\t\t\t\t\t\t\tmanagedItems.add(managedItem);\n-\t\t\t\t\t\t\t\tcontinue files;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tcapturedFiles.add(path);\n-\t\t\t\t}\n-\t\t\t\tconst checkedOptimizationEntries = new Set();\n-\t\t\t\t/**\n-\t\t\t\t * @param {SnapshotOptimizationEntry} entry optimization entry\n-\t\t\t\t * @returns {void}\n-\t\t\t\t */\n-\t\t\t\tconst increaseSharedAndStoreOptimizationEntry = entry => {\n-\t\t\t\t\tif (entry.children !== undefined) {\n-\t\t\t\t\t\tentry.children.forEach(increaseSharedAndStoreOptimizationEntry);\n-\t\t\t\t\t}\n-\t\t\t\t\tentry.shared++;\n-\t\t\t\t\tstoreOptimizationEntry(entry);\n-\t\t\t\t};\n-\t\t\t\t/**\n-\t\t\t\t * @param {SnapshotOptimizationEntry} entry optimization entry\n-\t\t\t\t * @returns {void}\n-\t\t\t\t */\n-\t\t\t\tconst storeOptimizationEntry = entry => {\n-\t\t\t\t\tfor (const path of entry.snapshotContent) {\n-\t\t\t\t\t\tconst old = this._snapshotOptimization.get(path);\n-\t\t\t\t\t\tif (old.shared < entry.shared) {\n-\t\t\t\t\t\t\tthis._snapshotOptimization.set(path, entry);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tcapturedFiles.delete(path);\n-\t\t\t\t\t}\n-\t\t\t\t};\n-\t\t\t\tcapturedFiles: for (const path of capturedFiles) {\n-\t\t\t\t\tconst optimizationEntry = this._snapshotOptimization.get(path);\n-\t\t\t\t\tif (optimizationEntry === undefined) {\n-\t\t\t\t\t\tunsetOptimizationEntries.add(path);\n-\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t}\n-\t\t\t\t\tif (checkedOptimizationEntries.has(optimizationEntry)) continue;\n-\t\t\t\t\tconst snapshot = optimizationEntry.snapshot;\n-\t\t\t\t\tif (optimizationEntry.shared > 0) {\n-\t\t\t\t\t\t// It's a shared snapshot\n-\t\t\t\t\t\t// We can't change it, so we can only use it when all files match\n-\t\t\t\t\t\t// and startTime is compatible\n-\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\tstartTime &&\n-\t\t\t\t\t\t\t(!snapshot.startTime || snapshot.startTime > startTime)\n-\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tconst nonSharedFiles = new Set();\n-\t\t\t\t\t\tfor (const path of optimizationEntry.snapshotContent) {\n-\t\t\t\t\t\t\tif (!capturedFiles.has(path)) {\n-\t\t\t\t\t\t\t\tif (!snapshot.fileTimestamps.has(path)) {\n-\t\t\t\t\t\t\t\t\t// File is not shared and can't be removed from the snapshot\n-\t\t\t\t\t\t\t\t\t// because it's in a child of the snapshot\n-\t\t\t\t\t\t\t\t\tcheckedOptimizationEntries.add(optimizationEntry);\n-\t\t\t\t\t\t\t\t\tcontinue capturedFiles;\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tnonSharedFiles.add(path);\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tif (nonSharedFiles.size === 0) {\n-\t\t\t\t\t\t\t// The complete snapshot is shared\n-\t\t\t\t\t\t\t// add it as child\n-\t\t\t\t\t\t\tchildren.add(snapshot);\n-\t\t\t\t\t\t\tincreaseSharedAndStoreOptimizationEntry(optimizationEntry);\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t// Only a part of the snapshot is shared\n-\t\t\t\t\t\t\t// Extract common timestamps from both snapshots\n-\t\t\t\t\t\t\tconst commonMap = new Map();\n-\t\t\t\t\t\t\tfor (const [path, ts] of snapshot.fileTimestamps) {\n-\t\t\t\t\t\t\t\tif (nonSharedFiles.has(path)) continue;\n-\t\t\t\t\t\t\t\tcommonMap.set(path, ts);\n-\t\t\t\t\t\t\t\tsnapshot.fileTimestamps.delete(path);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t// Create and attach snapshot\n-\t\t\t\t\t\t\t/** @type {Snapshot} */\n-\t\t\t\t\t\t\tconst commonSnapshot = {\n-\t\t\t\t\t\t\t\tstartTime:\n-\t\t\t\t\t\t\t\t\tstartTime && snapshot.startTime\n-\t\t\t\t\t\t\t\t\t\t? Math.min(startTime, snapshot.startTime)\n-\t\t\t\t\t\t\t\t\t\t: startTime || snapshot.startTime,\n-\t\t\t\t\t\t\t\tfileTimestamps: commonMap\n-\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t\tchildren.add(commonSnapshot);\n-\t\t\t\t\t\t\tif (!snapshot.children) snapshot.children = new Set();\n-\t\t\t\t\t\t\tsnapshot.children.add(commonSnapshot);\n-\t\t\t\t\t\t\t// Create optimization entry\n-\t\t\t\t\t\t\tconst newEntry = {\n-\t\t\t\t\t\t\t\tsnapshot: commonSnapshot,\n-\t\t\t\t\t\t\t\tshared: optimizationEntry.shared + 1,\n-\t\t\t\t\t\t\t\tsnapshotContent: new Set(commonMap.keys()),\n-\t\t\t\t\t\t\t\tchildren: undefined\n-\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t\tif (optimizationEntry.children === undefined)\n-\t\t\t\t\t\t\t\toptimizationEntry.children = new Set();\n-\t\t\t\t\t\t\toptimizationEntry.children.add(newEntry);\n-\t\t\t\t\t\t\tstoreOptimizationEntry(newEntry);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\t// It's a unshared snapshot\n-\t\t\t\t\t\t// We can extract a common shared snapshot\n-\t\t\t\t\t\t// with all common files\n-\t\t\t\t\t\tconst commonMap = new Map();\n-\t\t\t\t\t\tfor (const path of capturedFiles) {\n-\t\t\t\t\t\t\tconst ts = snapshot.fileTimestamps.get(path);\n-\t\t\t\t\t\t\tif (ts === undefined) continue;\n-\t\t\t\t\t\t\tcommonMap.set(path, ts);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tif (commonMap.size < 2) {\n-\t\t\t\t\t\t\t// Common part it too small\n-\t\t\t\t\t\t\tcontinue capturedFiles;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\t// Create and attach snapshot\n-\t\t\t\t\t\t/** @type {Snapshot} */\n-\t\t\t\t\t\tconst commonSnapshot = {\n-\t\t\t\t\t\t\tstartTime:\n-\t\t\t\t\t\t\t\tstartTime && snapshot.startTime\n-\t\t\t\t\t\t\t\t\t? Math.min(startTime, snapshot.startTime)\n-\t\t\t\t\t\t\t\t\t: startTime || snapshot.startTime,\n-\t\t\t\t\t\t\tfileTimestamps: commonMap\n-\t\t\t\t\t\t};\n-\t\t\t\t\t\tchildren.add(commonSnapshot);\n-\t\t\t\t\t\tif (!snapshot.children) snapshot.children = new Set();\n-\t\t\t\t\t\tsnapshot.children.add(commonSnapshot);\n-\t\t\t\t\t\t// Remove files from snapshot\n-\t\t\t\t\t\tfor (const path of commonMap.keys())\n-\t\t\t\t\t\t\tsnapshot.fileTimestamps.delete(path);\n-\t\t\t\t\t\t// Create optimization entry\n-\t\t\t\t\t\tstoreOptimizationEntry({\n-\t\t\t\t\t\t\tsnapshot: commonSnapshot,\n-\t\t\t\t\t\t\tshared: 2,\n-\t\t\t\t\t\t\tsnapshotContent: new Set(commonMap.keys()),\n-\t\t\t\t\t\t\tchildren: undefined\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\t\tunsharedFileTimestamps = this._fileTimestampsOptimization.optimize(\n+\t\t\t\t\tcapturedFiles,\n+\t\t\t\t\tstartTime,\n+\t\t\t\t\tchildren\n+\t\t\t\t);\n \t\t\t\tfor (const path of capturedFiles) {\n \t\t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\t\tif (cache !== undefined) {\n@@ -964,22 +1555,17 @@ class FileSystemInfo {\n \t\t\t}\n \t\t}\n \t\tif (directories) {\n+\t\t\tconst capturedDirectories = captureNonManaged(\n+\t\t\t\tdirectories,\n+\t\t\t\tmanagedContexts\n+\t\t\t);\n \t\t\tif (options && options.hash) {\n-\t\t\t\tdirectories: for (const path of directories) {\n-\t\t\t\t\tfor (const immutablePath of this.immutablePathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(immutablePath)) {\n-\t\t\t\t\t\t\tcontinue directories;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tfor (const managedPath of this.managedPathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(managedPath)) {\n-\t\t\t\t\t\t\tconst managedItem = getManagedItem(managedPath, path);\n-\t\t\t\t\t\t\tif (managedItem) {\n-\t\t\t\t\t\t\t\tmanagedItems.add(managedItem);\n-\t\t\t\t\t\t\t\tcontinue directories;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n+\t\t\t\tunsharedContextHashes = this._contextHashesOptimization.optimize(\n+\t\t\t\t\tcapturedDirectories,\n+\t\t\t\t\tundefined,\n+\t\t\t\t\tchildren\n+\t\t\t\t);\n+\t\t\t\tfor (const path of capturedDirectories) {\n \t\t\t\t\tconst cache = this._contextHashes.get(path);\n \t\t\t\t\tif (cache !== undefined) {\n \t\t\t\t\t\tcontextHashes.set(path, cache);\n@@ -1001,21 +1587,12 @@ class FileSystemInfo {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\tdirectories: for (const path of directories) {\n-\t\t\t\t\tfor (const immutablePath of this.immutablePathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(immutablePath)) {\n-\t\t\t\t\t\t\tcontinue directories;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tfor (const managedPath of this.managedPathsWithSlash) {\n-\t\t\t\t\t\tif (path.startsWith(managedPath)) {\n-\t\t\t\t\t\t\tconst managedItem = getManagedItem(managedPath, path);\n-\t\t\t\t\t\t\tif (managedItem) {\n-\t\t\t\t\t\t\t\tmanagedItems.add(managedItem);\n-\t\t\t\t\t\t\t\tcontinue directories;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n+\t\t\t\tunsharedContextTimestamps = this._contextTimestampsOptimization.optimize(\n+\t\t\t\t\tcapturedDirectories,\n+\t\t\t\t\tstartTime,\n+\t\t\t\t\tchildren\n+\t\t\t\t);\n+\t\t\t\tfor (const path of capturedDirectories) {\n \t\t\t\t\tconst cache = this._contextTimestamps.get(path);\n \t\t\t\t\tif (cache !== undefined) {\n \t\t\t\t\t\tif (cache !== \"ignore\") {\n@@ -1041,21 +1618,13 @@ class FileSystemInfo {\n \t\t\t}\n \t\t}\n \t\tif (missing) {\n-\t\t\tmissing: for (const path of missing) {\n-\t\t\t\tfor (const immutablePath of this.immutablePathsWithSlash) {\n-\t\t\t\t\tif (path.startsWith(immutablePath)) {\n-\t\t\t\t\t\tcontinue missing;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\tfor (const managedPath of this.managedPathsWithSlash) {\n-\t\t\t\t\tif (path.startsWith(managedPath)) {\n-\t\t\t\t\t\tconst managedItem = getManagedItem(managedPath, path);\n-\t\t\t\t\t\tif (managedItem) {\n-\t\t\t\t\t\t\tmanagedItems.add(managedItem);\n-\t\t\t\t\t\t\tcontinue missing;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\tconst capturedMissing = captureNonManaged(missing, managedMissing);\n+\t\t\tunsharedMissingExistence = this._missingExistenceOptimization.optimize(\n+\t\t\t\tcapturedMissing,\n+\t\t\t\tstartTime,\n+\t\t\t\tchildren\n+\t\t\t);\n+\t\t\tfor (const path of capturedMissing) {\n \t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n \t\t\t\t\tif (cache !== \"ignore\") {\n@@ -1079,6 +1648,11 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\tunsharedManagedItemInfo = this._managedItemInfoOptimization.optimize(\n+\t\t\tmanagedItems,\n+\t\t\tundefined,\n+\t\t\tchildren\n+\t\t);\n \t\tfor (const path of managedItems) {\n \t\t\tconst cache = this._managedItems.get(path);\n \t\t\tif (cache !== undefined) {\n@@ -1168,28 +1742,29 @@ class FileSystemInfo {\n \tcheckSnapshotValid(snapshot, callback) {\n \t\tconst cachedResult = this._snapshotCache.get(snapshot);\n \t\tif (cachedResult !== undefined) {\n+\t\t\tthis._statTestedSnapshotsCached++;\n \t\t\tif (typeof cachedResult === \"boolean\") {\n \t\t\t\tcallback(null, cachedResult);\n \t\t\t} else {\n \t\t\t\tcachedResult.push(callback);\n \t\t\t}\n \t\t\treturn;\n \t\t}\n+\t\tthis._statTestedSnapshotsNotCached++;\n \t\tthis._checkSnapshotValidNoCache(snapshot, callback);\n \t}\n \n+\t/**\n+\t * @param {Snapshot} snapshot the snapshot made\n+\t * @param {function(WebpackError=, boolean=): void} callback callback function\n+\t * @returns {void}\n+\t */\n \t_checkSnapshotValidNoCache(snapshot, callback) {\n-\t\tlet callbacks;\n-\t\tconst {\n-\t\t\tstartTime,\n-\t\t\tfileTimestamps,\n-\t\t\tfileHashes,\n-\t\t\tcontextTimestamps,\n-\t\t\tcontextHashes,\n-\t\t\tmissingExistence,\n-\t\t\tmanagedItemInfo,\n-\t\t\tchildren\n-\t\t} = snapshot;\n+\t\t/** @type {number | undefined} */\n+\t\tlet startTime = undefined;\n+\t\tif (snapshot.hasStartTime()) {\n+\t\t\tstartTime = snapshot.startTime;\n+\t\t}\n \t\tlet jobs = 1;\n \t\tconst jobDone = () => {\n \t\t\tif (--jobs === 0) {\n@@ -1316,33 +1891,35 @@ class FileSystemInfo {\n \t\t\t}\n \t\t\treturn true;\n \t\t};\n-\t\tif (children) {\n+\t\tif (snapshot.hasChildren()) {\n \t\t\tconst childCallback = (err, result) => {\n \t\t\t\tif (err || !result) return invalid();\n \t\t\t\telse jobDone();\n \t\t\t};\n-\t\t\tfor (const child of children) {\n+\t\t\tfor (const child of snapshot.children) {\n \t\t\t\tconst cache = this._snapshotCache.get(child);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\t\t/* istanbul ignore else */\n-\t\t\t\t\t\tif (typeof cache === \"boolean\") {\n-\t\t\t\t\t\t\tif (cache === false) {\n-\t\t\t\t\t\t\t\tinvalid();\n-\t\t\t\t\t\t\t\treturn;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tjobs++;\n-\t\t\t\t\t\t\tcache.push(childCallback);\n+\t\t\t\t\tthis._statTestedChildrenCached++;\n+\t\t\t\t\t/* istanbul ignore else */\n+\t\t\t\t\tif (typeof cache === \"boolean\") {\n+\t\t\t\t\t\tif (cache === false) {\n+\t\t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\tcache.push(childCallback);\n \t\t\t\t\t}\n \t\t\t\t} else {\n+\t\t\t\t\tthis._statTestedChildrenNotCached++;\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis._checkSnapshotValidNoCache(child, childCallback);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif (fileTimestamps) {\n+\t\tif (snapshot.hasFileTimestamps()) {\n+\t\t\tconst { fileTimestamps } = snapshot;\n+\t\t\tthis._statTestedEntries += fileTimestamps.size;\n \t\t\tfor (const [path, ts] of fileTimestamps) {\n \t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n@@ -1363,7 +1940,9 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif (fileHashes) {\n+\t\tif (snapshot.hasFileHashes()) {\n+\t\t\tconst { fileHashes } = snapshot;\n+\t\t\tthis._statTestedEntries += fileHashes.size;\n \t\t\tfor (const [path, hash] of fileHashes) {\n \t\t\t\tconst cache = this._fileHashes.get(path);\n \t\t\t\tif (cache !== undefined) {\n@@ -1384,7 +1963,9 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif (contextTimestamps && contextTimestamps.size > 0) {\n+\t\tif (snapshot.hasContextTimestamps()) {\n+\t\t\tconst { contextTimestamps } = snapshot;\n+\t\t\tthis._statTestedEntries += contextTimestamps.size;\n \t\t\tfor (const [path, ts] of contextTimestamps) {\n \t\t\t\tconst cache = this._contextTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n@@ -1405,7 +1986,9 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif (contextHashes) {\n+\t\tif (snapshot.hasContextHashes()) {\n+\t\t\tconst { contextHashes } = snapshot;\n+\t\t\tthis._statTestedEntries += contextHashes.size;\n \t\t\tfor (const [path, hash] of contextHashes) {\n \t\t\t\tconst cache = this._contextHashes.get(path);\n \t\t\t\tif (cache !== undefined) {\n@@ -1426,7 +2009,9 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif (missingExistence) {\n+\t\tif (snapshot.hasMissingExistence()) {\n+\t\t\tconst { missingExistence } = snapshot;\n+\t\t\tthis._statTestedEntries += missingExistence.size;\n \t\t\tfor (const [path, existence] of missingExistence) {\n \t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n@@ -1450,7 +2035,9 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif (managedItemInfo) {\n+\t\tif (snapshot.hasManagedItemInfo()) {\n+\t\t\tconst { managedItemInfo } = snapshot;\n+\t\t\tthis._statTestedEntries += managedItemInfo.size;\n \t\t\tfor (const [path, info] of managedItemInfo) {\n \t\t\t\tconst cache = this._managedItems.get(path);\n \t\t\t\tif (cache !== undefined) {\n@@ -1476,7 +2063,7 @@ class FileSystemInfo {\n \t\t// if there was an async action\n \t\t// try to join multiple concurrent request for this snapshot\n \t\tif (jobs > 0) {\n-\t\t\tcallbacks = [callback];\n+\t\t\tconst callbacks = [callback];\n \t\t\tcallback = (err, result) => {\n \t\t\t\tfor (const callback of callbacks) callback(err, result);\n \t\t\t};\n@@ -1520,6 +2107,10 @@ class FileSystemInfo {\n \t_readFileHash(path, callback) {\n \t\tthis.fs.readFile(path, (err, content) => {\n \t\t\tif (err) {\n+\t\t\t\tif (err.code === \"EISDIR\") {\n+\t\t\t\t\tthis._fileHashes.set(path, \"directory\");\n+\t\t\t\t\treturn callback(null, \"directory\");\n+\t\t\t\t}\n \t\t\t\tif (err.code === \"ENOENT\") {\n \t\t\t\t\tthis._fileHashes.set(path, null);\n \t\t\t\t\treturn callback(null, null);\n@@ -1785,3 +2376,4 @@ class FileSystemInfo {\n }\n \n module.exports = FileSystemInfo;\n+module.exports.Snapshot = Snapshot;"
      },
      {
        "sha": "9e437d9155d937be2ef073b5bf175fa1bde96853",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -29,6 +29,7 @@ const makeSerializable = require(\"./util/makeSerializable\");\n /** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n /** @typedef {import(\"./WebpackError\")} WebpackError */\n /** @typedef {import(\"./util/Hash\")} Hash */\n+/** @template T @typedef {import(\"./util/LazySet\")<T>} LazySet<T> */\n /** @template T @typedef {import(\"./util/SortableSet\")<T>} SortableSet<T> */\n /** @typedef {import(\"./util/fs\").InputFileSystem} InputFileSystem */\n /** @typedef {import(\"./util/runtime\").RuntimeSpec} RuntimeSpec */\n@@ -850,6 +851,19 @@ class Module extends DependenciesBlock {\n \t\treturn null;\n \t}\n \n+\t/**\n+\t * @param {LazySet<string>} fileDependencies set where file dependencies are added to\n+\t * @param {LazySet<string>} contextDependencies set where context dependencies are added to\n+\t * @param {LazySet<string>} missingDependencies set where missing dependencies are added to\n+\t * @param {LazySet<string>} buildDependencies set where build dependencies are added to\n+\t */\n+\taddCacheDependencies(\n+\t\tfileDependencies,\n+\t\tcontextDependencies,\n+\t\tmissingDependencies,\n+\t\tbuildDependencies\n+\t) {}\n+\n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.type);"
      },
      {
        "sha": "927ec2c5a3bf2cf0c43691f114083c2260fbd1e0",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 84,
        "deletions": 29,
        "changes": 113,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -25,6 +25,7 @@ const ModuleWarning = require(\"./ModuleWarning\");\n const RuntimeGlobals = require(\"./RuntimeGlobals\");\n const UnhandledSchemeError = require(\"./UnhandledSchemeError\");\n const WebpackError = require(\"./WebpackError\");\n+const LazySet = require(\"./util/LazySet\");\n const { getScheme } = require(\"./util/URLAbsoluteSpecifier\");\n const {\n \tcompareLocations,\n@@ -472,6 +473,12 @@ class NormalModule extends Module {\n \t\t\t\t);\n \t\t\t\tthis.buildInfo.assetsInfo.set(name, assetInfo);\n \t\t\t},\n+\t\t\taddBuildDependency: dep => {\n+\t\t\t\tif (this.buildInfo.buildDependencies === undefined) {\n+\t\t\t\t\tthis.buildInfo.buildDependencies = new LazySet();\n+\t\t\t\t}\n+\t\t\t\tthis.buildInfo.buildDependencies.add(dep);\n+\t\t\t},\n \t\t\trootContext: options.context,\n \t\t\twebpack: true,\n \t\t\tsourceMap: !!this.useSourceMap,\n@@ -557,8 +564,6 @@ class NormalModule extends Module {\n \t\t\tfs\n \t\t);\n \n-\t\tconst startTime = Date.now();\n-\n \t\tconst processResult = (err, result) => {\n \t\t\tif (err) {\n \t\t\t\tif (!(err instanceof Error)) {\n@@ -642,33 +647,23 @@ class NormalModule extends Module {\n \t\t\t\t\t\tnull\n \t\t\t\t\t);\n \t\t\t\t}\n-\t\t\t\tfor (const loader of this.loaders) {\n-\t\t\t\t\tcompilation.buildDependencies.add(loader.loader);\n+\t\t\t\tthis.buildInfo.fileDependencies = new LazySet();\n+\t\t\t\tthis.buildInfo.fileDependencies.addAll(result.fileDependencies);\n+\t\t\t\tthis.buildInfo.contextDependencies = new LazySet();\n+\t\t\t\tthis.buildInfo.contextDependencies.addAll(result.contextDependencies);\n+\t\t\t\tthis.buildInfo.missingDependencies = new LazySet();\n+\t\t\t\tthis.buildInfo.missingDependencies.addAll(result.missingDependencies);\n+\t\t\t\tif (\n+\t\t\t\t\tthis.loaders.length > 0 &&\n+\t\t\t\t\tthis.buildInfo.buildDependencies === undefined\n+\t\t\t\t) {\n+\t\t\t\t\tthis.buildInfo.buildDependencies = new LazySet();\n \t\t\t\t}\n-\t\t\t\tthis.buildInfo.fileDependencies = new Set(result.fileDependencies);\n-\t\t\t\tthis.buildInfo.contextDependencies = new Set(\n-\t\t\t\t\tresult.contextDependencies\n-\t\t\t\t);\n-\t\t\t\tthis.buildInfo.missingDependencies = new Set(\n-\t\t\t\t\tresult.missingDependencies\n-\t\t\t\t);\n-\t\t\t\tif (!result.cacheable) {\n-\t\t\t\t\tthis.buildInfo.cacheable = false;\n-\t\t\t\t\tprocessResult(err, result.result);\n-\t\t\t\t\treturn;\n+\t\t\t\tfor (const loader of this.loaders) {\n+\t\t\t\t\tthis.buildInfo.buildDependencies.add(loader.loader);\n \t\t\t\t}\n-\t\t\t\tthis.buildInfo.cacheable = true;\n-\t\t\t\tcompilation.fileSystemInfo.createSnapshot(\n-\t\t\t\t\tstartTime,\n-\t\t\t\t\tresult.fileDependencies,\n-\t\t\t\t\tresult.contextDependencies,\n-\t\t\t\t\tresult.missingDependencies,\n-\t\t\t\t\tnull,\n-\t\t\t\t\t(err2, snapshot) => {\n-\t\t\t\t\t\tthis.buildInfo.snapshot = snapshot;\n-\t\t\t\t\t\tprocessResult(err || err2, result.result);\n-\t\t\t\t\t}\n-\t\t\t\t);\n+\t\t\t\tthis.buildInfo.cacheable = result.cacheable;\n+\t\t\t\tprocessResult(err, result.result);\n \t\t\t}\n \t\t);\n \t}\n@@ -759,11 +754,14 @@ class NormalModule extends Module {\n \t\t\tfileDependencies: undefined,\n \t\t\tcontextDependencies: undefined,\n \t\t\tmissingDependencies: undefined,\n+\t\t\tbuildDependencies: undefined,\n \t\t\thash: undefined,\n \t\t\tassets: undefined,\n \t\t\tassetsInfo: undefined\n \t\t};\n \n+\t\tconst startTime = Date.now();\n+\n \t\treturn this.doBuild(options, compilation, resolver, fs, err => {\n \t\t\t// if we have an error mark module as failed and exit\n \t\t\tif (err) {\n@@ -800,9 +798,34 @@ class NormalModule extends Module {\n \t\t\t\t\t\tkeepOriginalOrder(this.dependencies)\n \t\t\t\t\t)\n \t\t\t\t);\n-\t\t\t\tthis._lastSuccessfulBuildMeta = this.buildMeta;\n \t\t\t\tthis._initBuildHash(compilation);\n-\t\t\t\treturn callback();\n+\t\t\t\tthis._lastSuccessfulBuildMeta = this.buildMeta;\n+\t\t\t\treturn handleBuildDone();\n+\t\t\t};\n+\n+\t\t\tconst handleBuildDone = () => {\n+\t\t\t\tif (!this.buildInfo.cacheable) {\n+\t\t\t\t\treturn callback();\n+\t\t\t\t}\n+\t\t\t\t// convert file/context/missingDependencies into filesystem snapshot\n+\t\t\t\tcompilation.fileSystemInfo.createSnapshot(\n+\t\t\t\t\tstartTime,\n+\t\t\t\t\tthis.buildInfo.fileDependencies,\n+\t\t\t\t\tthis.buildInfo.contextDependencies,\n+\t\t\t\t\tthis.buildInfo.missingDependencies,\n+\t\t\t\t\tnull,\n+\t\t\t\t\t(err, snapshot) => {\n+\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\tthis.markModuleAsErrored(err);\n+\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tthis.buildInfo.fileDependencies = undefined;\n+\t\t\t\t\t\tthis.buildInfo.contextDependencies = undefined;\n+\t\t\t\t\t\tthis.buildInfo.missingDependencies = undefined;\n+\t\t\t\t\t\tthis.buildInfo.snapshot = snapshot;\n+\t\t\t\t\t\treturn callback();\n+\t\t\t\t\t}\n+\t\t\t\t);\n \t\t\t};\n \n \t\t\tlet result;\n@@ -933,6 +956,38 @@ class NormalModule extends Module {\n \t\treturn size;\n \t}\n \n+\t/**\n+\t * @param {LazySet<string>} fileDependencies set where file dependencies are added to\n+\t * @param {LazySet<string>} contextDependencies set where context dependencies are added to\n+\t * @param {LazySet<string>} missingDependencies set where missing dependencies are added to\n+\t * @param {LazySet<string>} buildDependencies set where build dependencies are added to\n+\t */\n+\taddCacheDependencies(\n+\t\tfileDependencies,\n+\t\tcontextDependencies,\n+\t\tmissingDependencies,\n+\t\tbuildDependencies\n+\t) {\n+\t\tconst { snapshot, buildDependencies: buildDeps } = this.buildInfo;\n+\t\tif (snapshot) {\n+\t\t\tfileDependencies.addAll(snapshot.getFileIterable());\n+\t\t\tcontextDependencies.addAll(snapshot.getContextIterable());\n+\t\t\tmissingDependencies.addAll(snapshot.getMissingIterable());\n+\t\t} else {\n+\t\t\tconst {\n+\t\t\t\tfileDependencies: fileDeps,\n+\t\t\t\tcontextDependencies: contextDeps,\n+\t\t\t\tmissingDependencies: missingDeps\n+\t\t\t} = this.buildInfo;\n+\t\t\tif (fileDeps !== undefined) fileDependencies.addAll(fileDeps);\n+\t\t\tif (contextDeps !== undefined) contextDependencies.addAll(contextDeps);\n+\t\t\tif (missingDeps !== undefined) missingDependencies.addAll(missingDeps);\n+\t\t}\n+\t\tif (buildDeps !== undefined) {\n+\t\t\tbuildDependencies.addAll(buildDeps);\n+\t\t}\n+\t}\n+\n \t/**\n \t * @param {Hash} hash the hash used to track dependencies\n \t * @param {UpdateHashContext} context context"
      },
      {
        "sha": "5adbadf2cbeac1a51ebdb5fd21c4b980bbadc4cb",
        "filename": "lib/ProgressPlugin.js",
        "status": "modified",
        "additions": 12,
        "deletions": 3,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2FProgressPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2FProgressPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FProgressPlugin.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -336,6 +336,7 @@ class ProgressPlugin {\n \t\t\t\t\t\t\tlastDependenciesCount =\n \t\t\t\t\t\t\t\tlastDependenciesCount || data.dependenciesCount;\n \t\t\t\t\t\t}\n+\t\t\t\t\t\treturn data;\n \t\t\t\t\t},\n \t\t\t\t\terr => {\n \t\t\t\t\t\t// Ignore error\n@@ -345,9 +346,15 @@ class ProgressPlugin {\n \t\t});\n \n \t\tcompiler.hooks.afterCompile.tapPromise(\"ProgressPlugin\", compilation => {\n-\t\t\treturn cacheGetPromise.then(() =>\n-\t\t\t\tcache.storePromise({ modulesCount, dependenciesCount })\n-\t\t\t);\n+\t\t\treturn cacheGetPromise.then(async oldData => {\n+\t\t\t\tif (\n+\t\t\t\t\t!oldData ||\n+\t\t\t\t\toldData.modulesCount !== modulesCount ||\n+\t\t\t\t\toldData.dependenciesCount !== dependenciesCount\n+\t\t\t\t) {\n+\t\t\t\t\tawait cache.storePromise({ modulesCount, dependenciesCount });\n+\t\t\t\t}\n+\t\t\t});\n \t\t});\n \n \t\tcompiler.hooks.compilation.tap(\"ProgressPlugin\", compilation => {\n@@ -456,6 +463,7 @@ class ProgressPlugin {\n \t\t\t\t\t\thandler(percentage, \"sealing\", title);\n \t\t\t\t\t},\n \t\t\t\t\tdone() {\n+\t\t\t\t\t\tprogressReporters.set(compiler, undefined);\n \t\t\t\t\t\thandler(percentage, \"sealing\", title);\n \t\t\t\t\t},\n \t\t\t\t\tresult() {\n@@ -491,6 +499,7 @@ class ProgressPlugin {\n \t\t\t\t\thandler(progress, category, name);\n \t\t\t\t},\n \t\t\t\tdone() {\n+\t\t\t\t\tprogressReporters.set(compiler, undefined);\n \t\t\t\t\thandler(progress, category, name);\n \t\t\t\t},\n \t\t\t\tresult() {"
      },
      {
        "sha": "7deced184101d041838635c3fa72244fe62a43cd",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 92,
        "deletions": 33,
        "changes": 125,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -7,24 +7,26 @@\n \n const FileSystemInfo = require(\"../FileSystemInfo\");\n const ProgressPlugin = require(\"../ProgressPlugin\");\n+const { formatSize } = require(\"../SizeFormatHelpers\");\n const LazySet = require(\"../util/LazySet\");\n const makeSerializable = require(\"../util/makeSerializable\");\n const memorize = require(\"../util/memorize\");\n const { createFileSerializer } = require(\"../util/serialization\");\n \n /** @typedef {import(\"../Cache\").Etag} Etag */\n /** @typedef {import(\"../Compiler\")} Compiler */\n+/** @typedef {import(\"../FileSystemInfo\").Snapshot} Snapshot */\n /** @typedef {import(\"../logging/Logger\").Logger} Logger */\n /** @typedef {import(\"../util/fs\").IntermediateFileSystem} IntermediateFileSystem */\n \n class PackContainer {\n \t/**\n \t * @param {Object} data stored data\n \t * @param {string} version version identifier\n-\t * @param {FileSystemInfo.Snapshot} buildSnapshot snapshot of all build dependencies\n+\t * @param {Snapshot} buildSnapshot snapshot of all build dependencies\n \t * @param {Set<string>} buildDependencies list of all unresolved build dependencies captured\n \t * @param {Map<string, string>} resolveResults result of the resolved build dependencies\n-\t * @param {FileSystemInfo.Snapshot} resolveBuildDependenciesSnapshot snapshot of the dependencies of the build dependencies resolving\n+\t * @param {Snapshot} resolveBuildDependenciesSnapshot snapshot of the dependencies of the build dependencies resolving\n \t */\n \tconstructor(\n \t\tdata,\n@@ -70,6 +72,7 @@ makeSerializable(\n const MIN_CONTENT_SIZE = 1024 * 1024; // 1 MB\n const CONTENT_COUNT_TO_MERGE = 10;\n const MAX_AGE = 1000 * 60 * 60 * 24 * 60; // 1 month\n+const MAX_ITEMS_IN_FRESH_PACK = 50000;\n \n class PackItemInfo {\n \t/**\n@@ -90,8 +93,10 @@ class Pack {\n \tconstructor(logger) {\n \t\t/** @type {Map<string, PackItemInfo>} */\n \t\tthis.itemInfo = new Map();\n-\t\t/** @type {PackItemInfo[]} */\n-\t\tthis.freshContent = [];\n+\t\t/** @type {string[]} */\n+\t\tthis.requests = [];\n+\t\t/** @type {Map<string, PackItemInfo>} */\n+\t\tthis.freshContent = new Map();\n \t\t/** @type {(undefined | PackContent)[]} */\n \t\tthis.content = [];\n \t\tthis.invalid = false;\n@@ -105,7 +110,10 @@ class Pack {\n \t */\n \tget(identifier, etag) {\n \t\tconst info = this.itemInfo.get(identifier);\n-\t\tif (info === undefined) return undefined;\n+\t\tthis.requests.push(identifier);\n+\t\tif (info === undefined) {\n+\t\t\treturn undefined;\n+\t\t}\n \t\tif (info.etag !== etag) return null;\n \t\tinfo.lastAccess = Date.now();\n \t\tconst loc = info.location;\n@@ -128,17 +136,19 @@ class Pack {\n \tset(identifier, etag, data) {\n \t\tif (!this.invalid) {\n \t\t\tthis.invalid = true;\n-\t\t\tthis.logger.debug(`Pack got invalid because of ${identifier}`);\n+\t\t\tthis.logger.log(`Pack got invalid because of write to: ${identifier}`);\n \t\t}\n \t\tconst info = this.itemInfo.get(identifier);\n \t\tif (info === undefined) {\n \t\t\tconst newInfo = new PackItemInfo(identifier, etag, data);\n \t\t\tthis.itemInfo.set(identifier, newInfo);\n-\t\t\tthis.freshContent.push(newInfo);\n+\t\t\tthis.requests.push(identifier);\n+\t\t\tthis.freshContent.set(identifier, newInfo);\n \t\t} else {\n \t\t\tconst loc = info.location;\n \t\t\tif (loc >= 0) {\n-\t\t\t\tthis.freshContent.push(info);\n+\t\t\t\tthis.requests.push(identifier);\n+\t\t\t\tthis.freshContent.set(identifier, info);\n \t\t\t\tconst content = this.content[loc];\n \t\t\t\tcontent.delete(identifier);\n \t\t\t\tif (content.items.size === 0) {\n@@ -189,25 +199,46 @@ class Pack {\n \t}\n \n \t_persistFreshContent() {\n-\t\tif (this.freshContent.length > 0) {\n-\t\t\t/** @type {Set<string>} */\n-\t\t\tconst items = new Set();\n-\t\t\t/** @type {Map<string, any>} */\n-\t\t\tconst map = new Map();\n-\t\t\tconst loc = this._findLocation();\n-\t\t\tfor (const info of this.freshContent) {\n-\t\t\t\tconst { identifier } = info;\n-\t\t\t\titems.add(identifier);\n-\t\t\t\tmap.set(identifier, info.freshValue);\n-\t\t\t\tinfo.location = loc;\n+\t\tif (this.freshContent.size > 0) {\n+\t\t\tconst packCount = Math.ceil(\n+\t\t\t\tthis.freshContent.size / MAX_ITEMS_IN_FRESH_PACK\n+\t\t\t);\n+\t\t\tconst itemsPerPack = Math.ceil(this.freshContent.size / packCount);\n+\t\t\tthis.logger.log(`${this.freshContent.size} fresh items in cache`);\n+\t\t\tconst packs = Array.from({ length: packCount }, () => {\n+\t\t\t\tconst loc = this._findLocation();\n+\t\t\t\tthis.content[loc] = null; // reserve\n+\t\t\t\treturn {\n+\t\t\t\t\t/** @type {Set<string>} */\n+\t\t\t\t\titems: new Set(),\n+\t\t\t\t\t/** @type {Map<string, any>} */\n+\t\t\t\t\tmap: new Map(),\n+\t\t\t\t\tloc\n+\t\t\t\t};\n+\t\t\t});\n+\t\t\tlet i = 0;\n+\t\t\tlet pack = packs[0];\n+\t\t\tlet packIndex = 0;\n+\t\t\tfor (const identifier of this.requests) {\n+\t\t\t\tconst info = this.freshContent.get(identifier);\n+\t\t\t\tif (info === undefined) continue;\n+\t\t\t\tpack.items.add(identifier);\n+\t\t\t\tpack.map.set(identifier, info.freshValue);\n+\t\t\t\tinfo.location = pack.loc;\n \t\t\t\tinfo.freshValue = undefined;\n+\t\t\t\tthis.freshContent.delete(identifier);\n+\t\t\t\tif (++i > itemsPerPack) {\n+\t\t\t\t\ti = 0;\n+\t\t\t\t\tpack = packs[++packIndex];\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tfor (const pack of packs) {\n+\t\t\t\tthis.content[pack.loc] = new PackContent(\n+\t\t\t\t\tpack.items,\n+\t\t\t\t\tnew Set(pack.items),\n+\t\t\t\t\tnew PackContentItems(pack.map)\n+\t\t\t\t);\n \t\t\t}\n-\t\t\tthis.content[loc] = new PackContent(\n-\t\t\t\titems,\n-\t\t\t\tnew Set(items),\n-\t\t\t\tnew PackContentItems(map)\n-\t\t\t);\n-\t\t\tthis.freshContent.length = 0;\n \t\t}\n \t}\n \n@@ -550,22 +581,35 @@ class PackContent {\n \t\t\treturn this.content.get(identifier);\n \t\t}\n \t\tconst { lazyName } = this;\n+\t\tlet timeMessage;\n \t\tif (lazyName) {\n \t\t\t// only log once\n \t\t\tthis.lazyName = undefined;\n-\t\t\tthis.logger.time(`restore cache content ${lazyName}`);\n+\t\t\ttimeMessage = `restore cache content ${lazyName} (${formatSize(\n+\t\t\t\tthis.getSize()\n+\t\t\t)})`;\n+\t\t\tthis.logger.log(\n+\t\t\t\t`starting to restore cache content ${lazyName} (${formatSize(\n+\t\t\t\t\tthis.getSize()\n+\t\t\t\t)}) because of request to: ${identifier}`\n+\t\t\t);\n+\t\t\tthis.logger.time(timeMessage);\n \t\t}\n \t\tconst value = this.lazy();\n \t\tif (value instanceof Promise) {\n \t\t\treturn value.then(data => {\n-\t\t\t\tif (lazyName) this.logger.timeEnd(`restore cache content ${lazyName}`);\n \t\t\t\tconst map = data.map;\n+\t\t\t\tif (timeMessage) {\n+\t\t\t\t\tthis.logger.timeEnd(timeMessage);\n+\t\t\t\t}\n \t\t\t\tthis.content = map;\n \t\t\t\treturn map.get(identifier);\n \t\t\t});\n \t\t} else {\n-\t\t\tif (lazyName) this.logger.timeEnd(`restore cache content ${lazyName}`);\n \t\t\tconst map = value.map;\n+\t\t\tif (timeMessage) {\n+\t\t\t\tthis.logger.timeEnd(timeMessage);\n+\t\t\t}\n \t\t\tthis.content = map;\n \t\t\treturn map.get(identifier);\n \t\t}\n@@ -577,12 +621,28 @@ class PackContent {\n \tunpack() {\n \t\tif (this.content) return;\n \t\tif (this.lazy) {\n+\t\t\tconst { lazyName } = this;\n+\t\t\tlet timeMessage;\n+\t\t\tif (lazyName) {\n+\t\t\t\t// only log once\n+\t\t\t\tthis.lazyName = undefined;\n+\t\t\t\ttimeMessage = `unpack cache content ${lazyName} (${formatSize(\n+\t\t\t\t\tthis.getSize()\n+\t\t\t\t)})`;\n+\t\t\t\tthis.logger.time(timeMessage);\n+\t\t\t}\n \t\t\tconst value = this.lazy();\n \t\t\tif (value instanceof Promise) {\n \t\t\t\treturn value.then(data => {\n+\t\t\t\t\tif (timeMessage) {\n+\t\t\t\t\t\tthis.logger.timeEnd(timeMessage);\n+\t\t\t\t\t}\n \t\t\t\t\tthis.content = data.map;\n \t\t\t\t});\n \t\t\t} else {\n+\t\t\t\tif (timeMessage) {\n+\t\t\t\t\tthis.logger.timeEnd(timeMessage);\n+\t\t\t\t}\n \t\t\t\tthis.content = value.map;\n \t\t\t}\n \t\t}\n@@ -689,11 +749,11 @@ class PackFileCacheStrategy {\n \t\tthis.buildDependencies = new Set();\n \t\t/** @type {LazySet<string>} */\n \t\tthis.newBuildDependencies = new LazySet();\n-\t\t/** @type {FileSystemInfo.Snapshot} */\n+\t\t/** @type {Snapshot} */\n \t\tthis.resolveBuildDependenciesSnapshot = undefined;\n \t\t/** @type {Map<string, string>} */\n \t\tthis.resolveResults = undefined;\n-\t\t/** @type {FileSystemInfo.Snapshot} */\n+\t\t/** @type {Snapshot} */\n \t\tthis.buildSnapshot = undefined;\n \t\t/** @type {Promise<Pack>} */\n \t\tthis.packPromise = this._openPack();\n@@ -704,13 +764,13 @@ class PackFileCacheStrategy {\n \t */\n \t_openPack() {\n \t\tconst { logger, cacheLocation, version } = this;\n-\t\t/** @type {FileSystemInfo.Snapshot} */\n+\t\t/** @type {Snapshot} */\n \t\tlet buildSnapshot;\n \t\t/** @type {Set<string>} */\n \t\tlet buildDependencies;\n \t\t/** @type {Set<string>} */\n \t\tlet newBuildDependencies;\n-\t\t/** @type {FileSystemInfo.Snapshot} */\n+\t\t/** @type {Snapshot} */\n \t\tlet resolveBuildDependenciesSnapshot;\n \t\t/** @type {Map<string, string>} */\n \t\tlet resolveResults;\n@@ -862,7 +922,6 @@ class PackFileCacheStrategy {\n \t */\n \tstore(identifier, etag, data) {\n \t\treturn this.packPromise.then(pack => {\n-\t\t\tthis.logger.debug(`Cached ${identifier} to pack.`);\n \t\t\tpack.set(identifier, etag === null ? null : etag.toString(), data);\n \t\t});\n \t}"
      },
      {
        "sha": "750f06523cad30998a908b7671307f03054420a0",
        "filename": "lib/cache/ResolverCachePlugin.js",
        "status": "modified",
        "additions": 13,
        "deletions": 36,
        "changes": 49,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Fcache%2FResolverCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Fcache%2FResolverCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FResolverCachePlugin.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -16,33 +16,18 @@ const makeSerializable = require(\"../util/makeSerializable\");\n /** @template T @typedef {import(\"../util/LazySet\")<T>} LazySet<T> */\n \n class CacheEntry {\n-\tconstructor(\n-\t\tresult,\n-\t\tfileDependencies,\n-\t\tcontextDependencies,\n-\t\tmissingDependencies,\n-\t\tsnapshot\n-\t) {\n+\tconstructor(result, snapshot) {\n \t\tthis.result = result;\n-\t\tthis.fileDependencies = fileDependencies;\n-\t\tthis.contextDependencies = contextDependencies;\n-\t\tthis.missingDependencies = missingDependencies;\n \t\tthis.snapshot = snapshot;\n \t}\n \n \tserialize({ write }) {\n \t\twrite(this.result);\n-\t\twrite(this.fileDependencies);\n-\t\twrite(this.contextDependencies);\n-\t\twrite(this.missingDependencies);\n \t\twrite(this.snapshot);\n \t}\n \n \tdeserialize({ read }) {\n \t\tthis.result = read();\n-\t\tthis.fileDependencies = read();\n-\t\tthis.contextDependencies = read();\n-\t\tthis.missingDependencies = read();\n \t\tthis.snapshot = read();\n \t}\n }\n@@ -166,27 +151,18 @@ class ResolverCachePlugin {\n \t\t\t\t\t\tfileDependencies,\n \t\t\t\t\t\tcontextDependencies,\n \t\t\t\t\t\tmissingDependencies,\n-\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t{ timestamp: true },\n \t\t\t\t\t\t(err, snapshot) => {\n \t\t\t\t\t\t\tif (err) return callback(err);\n \t\t\t\t\t\t\tif (!snapshot) {\n \t\t\t\t\t\t\t\tif (result) return callback(null, result);\n \t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\titemCache.store(\n-\t\t\t\t\t\t\t\tnew CacheEntry(\n-\t\t\t\t\t\t\t\t\tresult,\n-\t\t\t\t\t\t\t\t\tnewResolveContext.fileDependencies,\n-\t\t\t\t\t\t\t\t\tnewResolveContext.contextDependencies,\n-\t\t\t\t\t\t\t\t\tnewResolveContext.missingDependencies,\n-\t\t\t\t\t\t\t\t\tsnapshot\n-\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\tstoreErr => {\n-\t\t\t\t\t\t\t\t\tif (storeErr) return callback(storeErr);\n-\t\t\t\t\t\t\t\t\tif (result) return callback(null, result);\n-\t\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\titemCache.store(new CacheEntry(result, snapshot), storeErr => {\n+\t\t\t\t\t\t\t\tif (storeErr) return callback(storeErr);\n+\t\t\t\t\t\t\t\tif (result) return callback(null, result);\n+\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t);\n \t\t\t\t}\n@@ -252,8 +228,9 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\t\tif (err) return done(err);\n \n \t\t\t\t\t\t\t\t\tif (cacheEntry) {\n+\t\t\t\t\t\t\t\t\t\tconst { snapshot, result } = cacheEntry;\n \t\t\t\t\t\t\t\t\t\tfileSystemInfo.checkSnapshotValid(\n-\t\t\t\t\t\t\t\t\t\t\tcacheEntry.snapshot,\n+\t\t\t\t\t\t\t\t\t\t\tsnapshot,\n \t\t\t\t\t\t\t\t\t\t\t(err, valid) => {\n \t\t\t\t\t\t\t\t\t\t\t\tif (err || !valid) {\n \t\t\t\t\t\t\t\t\t\t\t\t\tcacheInvalidResolves++;\n@@ -269,22 +246,22 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\t\t\t\t\tif (resolveContext.missingDependencies) {\n \t\t\t\t\t\t\t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tresolveContext.missingDependencies,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tcacheEntry.missingDependencies\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tsnapshot.getMissingIterable()\n \t\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t\t\tif (resolveContext.fileDependencies) {\n \t\t\t\t\t\t\t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tresolveContext.fileDependencies,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tcacheEntry.fileDependencies\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tsnapshot.getFileIterable()\n \t\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t\t\tif (resolveContext.contextDependencies) {\n \t\t\t\t\t\t\t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tresolveContext.contextDependencies,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tcacheEntry.contextDependencies\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tsnapshot.getContextIterable()\n \t\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\tdone(null, cacheEntry.result);\n+\t\t\t\t\t\t\t\t\t\t\t\tdone(null, result);\n \t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t} else {"
      },
      {
        "sha": "008e2c5e49ea704dc338e319f8630c13c40cbef6",
        "filename": "lib/dependencies/LoaderPlugin.js",
        "status": "modified",
        "additions": 22,
        "deletions": 9,
        "changes": 31,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Fdependencies%2FLoaderPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Fdependencies%2FLoaderPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FLoaderPlugin.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const NormalModule = require(\"../NormalModule\");\n+const LazySet = require(\"../util/LazySet\");\n const LoaderDependency = require(\"./LoaderDependency\");\n \n /** @typedef {import(\"../Module\")} Module */\n@@ -88,16 +89,28 @@ class LoaderPlugin {\n \t\t\t\t\t\t\t\t\tmap = moduleSource.map();\n \t\t\t\t\t\t\t\t\tsource = moduleSource.source();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tif (referencedModule.buildInfo.fileDependencies) {\n-\t\t\t\t\t\t\t\t\tfor (const d of referencedModule.buildInfo.fileDependencies) {\n-\t\t\t\t\t\t\t\t\t\tloaderContext.addDependency(d);\n-\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tconst fileDependencies = new LazySet();\n+\t\t\t\t\t\t\t\tconst contextDependencies = new LazySet();\n+\t\t\t\t\t\t\t\tconst missingDependencies = new LazySet();\n+\t\t\t\t\t\t\t\tconst buildDependencies = new LazySet();\n+\t\t\t\t\t\t\t\treferencedModule.addCacheDependencies(\n+\t\t\t\t\t\t\t\t\tfileDependencies,\n+\t\t\t\t\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\t\t\t\t\tmissingDependencies,\n+\t\t\t\t\t\t\t\t\tbuildDependencies\n+\t\t\t\t\t\t\t\t);\n+\n+\t\t\t\t\t\t\t\tfor (const d of fileDependencies) {\n+\t\t\t\t\t\t\t\t\tloaderContext.addDependency(d);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tfor (const d of contextDependencies) {\n+\t\t\t\t\t\t\t\t\tloaderContext.addContextDependency(d);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tfor (const d of missingDependencies) {\n+\t\t\t\t\t\t\t\t\tloaderContext.addMissingDependency(d);\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tif (referencedModule.buildInfo.contextDependencies) {\n-\t\t\t\t\t\t\t\t\tfor (const d of referencedModule.buildInfo\n-\t\t\t\t\t\t\t\t\t\t.contextDependencies) {\n-\t\t\t\t\t\t\t\t\t\tloaderContext.addContextDependency(d);\n-\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tfor (const d of buildDependencies) {\n+\t\t\t\t\t\t\t\t\tloaderContext.addBuildDependency(d);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\treturn callback(null, source, map, referencedModule);\n \t\t\t\t\t\t\t}"
      },
      {
        "sha": "14a23c5da57dd66d49a29a27f130f9bcf45f0cc0",
        "filename": "lib/optimize/ConcatenatedModule.js",
        "status": "modified",
        "additions": 22,
        "deletions": 17,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Foptimize%2FConcatenatedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Foptimize%2FConcatenatedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FConcatenatedModule.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -810,23 +810,6 @@ class ConcatenatedModule extends Module {\n \t\t\t\tthis.blocks.push(d);\n \t\t\t}\n \n-\t\t\t// populate file dependencies\n-\t\t\tif (m.buildInfo.fileDependencies) {\n-\t\t\t\tthis.buildInfo.fileDependencies.addAll(m.buildInfo.fileDependencies);\n-\t\t\t}\n-\t\t\t// populate context dependencies\n-\t\t\tif (m.buildInfo.contextDependencies) {\n-\t\t\t\tthis.buildInfo.contextDependencies.addAll(\n-\t\t\t\t\tm.buildInfo.contextDependencies\n-\t\t\t\t);\n-\t\t\t}\n-\t\t\t// populate missing dependencies\n-\t\t\tif (m.buildInfo.missingDependencies) {\n-\t\t\t\tthis.buildInfo.missingDependencies.addAll(\n-\t\t\t\t\tm.buildInfo.missingDependencies\n-\t\t\t\t);\n-\t\t\t}\n-\n \t\t\t// populate warnings\n \t\t\tconst warnings = m.getWarnings();\n \t\t\tif (warnings !== undefined) {\n@@ -976,6 +959,28 @@ class ConcatenatedModule extends Module {\n \t\treturn rootModule.identifier() + \"|\" + hash.digest(\"hex\");\n \t}\n \n+\t/**\n+\t * @param {LazySet<string>} fileDependencies set where file dependencies are added to\n+\t * @param {LazySet<string>} contextDependencies set where context dependencies are added to\n+\t * @param {LazySet<string>} missingDependencies set where missing dependencies are added to\n+\t * @param {LazySet<string>} buildDependencies set where build dependencies are added to\n+\t */\n+\taddCacheDependencies(\n+\t\tfileDependencies,\n+\t\tcontextDependencies,\n+\t\tmissingDependencies,\n+\t\tbuildDependencies\n+\t) {\n+\t\tfor (const module of this._modules) {\n+\t\t\tmodule.addCacheDependencies(\n+\t\t\t\tfileDependencies,\n+\t\t\t\tcontextDependencies,\n+\t\t\t\tmissingDependencies,\n+\t\t\t\tbuildDependencies\n+\t\t\t);\n+\t\t}\n+\t}\n+\n \t/**\n \t * @param {CodeGenerationContext} context context for code generation\n \t * @returns {CodeGenerationResult} result"
      },
      {
        "sha": "a6fc1f625bfe86befd23b49b86c98f924c694051",
        "filename": "lib/serialization/BinaryMiddleware.js",
        "status": "modified",
        "additions": 45,
        "deletions": 4,
        "changes": 49,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Fserialization%2FBinaryMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Fserialization%2FBinaryMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FBinaryMiddleware.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -96,6 +96,31 @@ const identifyNumber = n => {\n  * @extends {SerializerMiddleware<DeserializedType, SerializedType>}\n  */\n class BinaryMiddleware extends SerializerMiddleware {\n+\tstatic optimizeSerializedData(data) {\n+\t\tconst result = [];\n+\t\tconst temp = [];\n+\t\tconst flush = () => {\n+\t\t\tif (temp.length > 0) {\n+\t\t\t\tif (temp.length === 1) {\n+\t\t\t\t\tresult.push(temp[0]);\n+\t\t\t\t} else {\n+\t\t\t\t\tresult.push(Buffer.concat(temp));\n+\t\t\t\t}\n+\t\t\t\ttemp.length = 0;\n+\t\t\t}\n+\t\t};\n+\t\tfor (const item of data) {\n+\t\t\tif (Buffer.isBuffer(item)) {\n+\t\t\t\ttemp.push(item);\n+\t\t\t} else {\n+\t\t\t\tflush();\n+\t\t\t\tresult.push(item);\n+\t\t\t}\n+\t\t}\n+\t\tflush();\n+\t\treturn result;\n+\t}\n+\n \t/**\n \t * @param {DeserializedType} data data\n \t * @param {Object} context context object\n@@ -113,22 +138,36 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t_serialize(data, context) {\n \t\t/** @type {Buffer} */\n \t\tlet currentBuffer = null;\n+\t\t/** @type {Buffer} */\n+\t\tlet leftOverBuffer = null;\n \t\tlet currentPosition = 0;\n \t\t/** @type {BufferSerializableType[]} */\n \t\tconst buffers = [];\n+\t\tlet buffersTotalLength = 0;\n \t\tconst allocate = (bytesNeeded, exact = false) => {\n \t\t\tif (currentBuffer !== null) {\n \t\t\t\tif (currentBuffer.length - currentPosition >= bytesNeeded) return;\n \t\t\t\tflush();\n \t\t\t}\n-\t\t\tcurrentBuffer = Buffer.allocUnsafe(\n-\t\t\t\texact ? bytesNeeded : Math.max(bytesNeeded, 1024)\n-\t\t\t);\n+\t\t\tif (leftOverBuffer && leftOverBuffer.length >= bytesNeeded) {\n+\t\t\t\tcurrentBuffer = leftOverBuffer;\n+\t\t\t\tleftOverBuffer = null;\n+\t\t\t} else {\n+\t\t\t\tcurrentBuffer = Buffer.allocUnsafe(\n+\t\t\t\t\texact ? bytesNeeded : Math.max(bytesNeeded, buffersTotalLength, 1024)\n+\t\t\t\t);\n+\t\t\t}\n \t\t};\n \t\tconst flush = () => {\n \t\t\tif (currentBuffer !== null) {\n \t\t\t\tbuffers.push(currentBuffer.slice(0, currentPosition));\n+\t\t\t\tif (\n+\t\t\t\t\t!leftOverBuffer ||\n+\t\t\t\t\tleftOverBuffer.length < currentBuffer.length - currentPosition\n+\t\t\t\t)\n+\t\t\t\t\tleftOverBuffer = currentBuffer.slice(currentPosition);\n \t\t\t\tcurrentBuffer = null;\n+\t\t\t\tbuffersTotalLength += currentPosition;\n \t\t\t\tcurrentPosition = 0;\n \t\t\t}\n \t\t};\n@@ -175,7 +214,9 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t} else if (SerializerMiddleware.isLazy(thing, this)) {\n \t\t\t\t\t\t\t/** @type {SerializedType} */\n-\t\t\t\t\t\t\tconst data = this._serialize(thing(), context);\n+\t\t\t\t\t\t\tconst data = BinaryMiddleware.optimizeSerializedData(\n+\t\t\t\t\t\t\t\tthis._serialize(thing(), context)\n+\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\tSerializerMiddleware.setLazySerializedValue(thing, data);\n \t\t\t\t\t\t\tserializeData(data);\n \t\t\t\t\t\t\tallocate(5);"
      },
      {
        "sha": "ec27cbe9feb3d23ca9afe579a697fcd64811dd22",
        "filename": "lib/util/LazySet.js",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Futil%2FLazySet.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Futil%2FLazySet.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FLazySet.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -24,13 +24,13 @@ const merge = (targetSet, toMerge) => {\n /**\n  * @template T\n  * @param {Set<Iterable<T>>} targetSet set where iterables should be added\n- * @param {Set<Iterable<T> | LazySet<T>>} toDeepMerge iterables or lazy set to be flattened\n+ * @param {Array<Iterable<T> | LazySet<T>>} toDeepMerge iterables or lazy set to be flattened\n  * @returns {void}\n  */\n const flatten = (targetSet, toDeepMerge) => {\n \tfor (const set of toDeepMerge) {\n \t\tif (set instanceof LazySet) {\n-\t\t\ttargetSet.add(set._set);\n+\t\t\tif (set._set.size > 0) targetSet.add(set._set);\n \t\t\tif (set._needMerge) {\n \t\t\t\tfor (const mergedSet of set._toMerge) {\n \t\t\t\t\ttargetSet.add(mergedSet);\n@@ -58,15 +58,15 @@ class LazySet {\n \t\tthis._set = new Set(iterable);\n \t\t/** @type {Set<Iterable<T>>} */\n \t\tthis._toMerge = new Set();\n-\t\t/** @type {Set<Iterable<T> | LazySet<T>>} */\n-\t\tthis._toDeepMerge = new Set();\n+\t\t/** @type {Array<Iterable<T> | LazySet<T>>} */\n+\t\tthis._toDeepMerge = [];\n \t\tthis._needMerge = false;\n \t\tthis._deopt = false;\n \t}\n \n \t_flatten() {\n \t\tflatten(this._toMerge, this._toDeepMerge);\n-\t\tthis._toDeepMerge.clear();\n+\t\tthis._toDeepMerge.length = 0;\n \t}\n \n \t_merge() {\n@@ -101,10 +101,10 @@ class LazySet {\n \t\t\t\t_set.add(item);\n \t\t\t}\n \t\t} else {\n-\t\t\tthis._toDeepMerge.add(iterable);\n+\t\t\tthis._toDeepMerge.push(iterable);\n \t\t\tthis._needMerge = true;\n \t\t\t// Avoid being too memory hungry\n-\t\t\tif (this._toDeepMerge.size > 100000) {\n+\t\t\tif (this._toDeepMerge.length > 100000) {\n \t\t\t\tthis._flatten();\n \t\t\t\tif (this._toMerge.size > 100000) this._merge();\n \t\t\t}\n@@ -115,7 +115,7 @@ class LazySet {\n \tclear() {\n \t\tthis._set.clear();\n \t\tthis._toMerge.clear();\n-\t\tthis._toDeepMerge.clear();\n+\t\tthis._toDeepMerge.length = 0;\n \t\tthis._needMerge = false;\n \t\tthis._deopt = false;\n \t}"
      },
      {
        "sha": "5ebdfcb82a10798dac4444ff2f09fe2c12c23d78",
        "filename": "lib/util/internalSerializables.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Futil%2FinternalSerializables.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Futil%2FinternalSerializables.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FinternalSerializables.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -155,6 +155,7 @@ module.exports = {\n \tDependenciesBlock: () => require(\"../DependenciesBlock\"),\n \tDllModule: () => require(\"../DllModule\"),\n \tExternalModule: () => require(\"../ExternalModule\"),\n+\tFileSystemInfo: () => require(\"../FileSystemInfo\"),\n \tModule: () => require(\"../Module\"),\n \tModuleBuildError: () => require(\"../ModuleBuildError\"),\n \tModuleError: () => require(\"../ModuleError\"),"
      },
      {
        "sha": "bdf4bdc510bdd40cad2366ba22748d4596ab2187",
        "filename": "lib/util/registerExternalSerializer.js",
        "status": "modified",
        "additions": 18,
        "deletions": 12,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/lib%2Futil%2FregisterExternalSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/lib%2Futil%2FregisterExternalSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FregisterExternalSerializer.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -26,6 +26,8 @@ const {\n /** @typedef {import(\"./serialization\").ObjectDeserializerContext} ObjectDeserializerContext */\n /** @typedef {import(\"./serialization\").ObjectSerializerContext} ObjectSerializerContext */\n \n+/** @typedef {ObjectSerializerContext & { writeLazy?: (any) => void }} WebpackObjectSerializerContext */\n+\n const CURRENT_MODULE = \"webpack/lib/util/registerExternalSerializer\";\n \n register(\n@@ -35,11 +37,15 @@ register(\n \tnew (class CachedSourceSerializer {\n \t\t/**\n \t\t * @param {CachedSource} source the cached source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n-\t\tserialize(source, { write }) {\n-\t\t\twrite(source.original());\n+\t\tserialize(source, { write, writeLazy }) {\n+\t\t\tif (writeLazy) {\n+\t\t\t\twriteLazy(source.originalLazy());\n+\t\t\t} else {\n+\t\t\t\twrite(source.original());\n+\t\t\t}\n \t\t\twrite(source.getCachedData());\n \t\t}\n \n@@ -62,7 +68,7 @@ register(\n \tnew (class RawSourceSerializer {\n \t\t/**\n \t\t * @param {RawSource} source the raw source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(source, { write }) {\n@@ -89,7 +95,7 @@ register(\n \tnew (class ConcatSourceSerializer {\n \t\t/**\n \t\t * @param {ConcatSource} source the concat source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(source, { write }) {\n@@ -115,7 +121,7 @@ register(\n \tnew (class PrefixSourceSerializer {\n \t\t/**\n \t\t * @param {PrefixSource} source the prefix source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(source, { write }) {\n@@ -140,7 +146,7 @@ register(\n \tnew (class ReplaceSourceSerializer {\n \t\t/**\n \t\t * @param {ReplaceSource} source the replace source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(source, { write }) {\n@@ -190,7 +196,7 @@ register(\n \tnew (class OriginalSourceSerializer {\n \t\t/**\n \t\t * @param {OriginalSource} source the original source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(source, { write }) {\n@@ -217,7 +223,7 @@ register(\n \tnew (class SourceLocationSerializer {\n \t\t/**\n \t\t * @param {SourceLocation} loc the location to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(loc, { write }) {\n@@ -253,7 +259,7 @@ register(\n \tnew (class PositionSerializer {\n \t\t/**\n \t\t * @param {Position} pos the position to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(pos, { write }) {\n@@ -281,7 +287,7 @@ register(\n \tnew (class SourceMapSourceSerializer {\n \t\t/**\n \t\t * @param {SourceMapSource} source the source map source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(source, { write }) {\n@@ -306,7 +312,7 @@ register(\n \tnew (class ValidationErrorSerializer {\n \t\t/**\n \t\t * @param {ValidationError} error the source map source to be serialized\n-\t\t * @param {ObjectSerializerContext} context context\n+\t\t * @param {WebpackObjectSerializerContext} context context\n \t\t * @returns {void}\n \t\t */\n \t\tserialize(error, { write }) {"
      },
      {
        "sha": "08ac1f01e97eb407bdd77d766e2c4c4666a04c68",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -28,7 +28,7 @@\n     \"tapable\": \"^2.0.0-beta.11\",\n     \"terser-webpack-plugin\": \"^4.1.0\",\n     \"watchpack\": \"2.0.0-beta.14\",\n-    \"webpack-sources\": \"2.0.0-beta.9\"\n+    \"webpack-sources\": \"2.0.0-beta.10\"\n   },\n   \"peerDependenciesMeta\": {\n     \"webpack-cli\": {"
      },
      {
        "sha": "4dd0fb53818b804a1ea83e27b423c55016a56daa",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -1158,6 +1158,16 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n     <CLR=BOLD>0 chunk groups processed for merging (0 module sets, 0 forked, 0 + 0 modules forked, 0 + 0 modules merged into fork, 0 resulting modules)</CLR>\n     <CLR=BOLD>0 chunk group info updated (0 already connected chunk groups reconnected)</CLR>\n + 5 hidden lines\n+\n+<CLR=BOLD>LOG from webpack.FileSystemInfo</CLR>\n+    <CLR=BOLD>1 new snapshots created</CLR>\n+    <CLR=BOLD>0% root snapshot uncached (0 / 0)</CLR>\n+    <CLR=BOLD>0% children snapshot uncached (0 / 0)</CLR>\n+    <CLR=BOLD>0 entries tested</CLR>\n+    <CLR=BOLD>File info in cache: 1 timestamps 0 hashes</CLR>\n+    <CLR=BOLD>File timestamp snapshot optimization: 0% (0/1) entries shared via 0 shared snapshots (0 times referenced)</CLR>\n+    <CLR=BOLD>Directory info in cache: 0 timestamps 0 hashes</CLR>\n+    <CLR=BOLD>Managed items info in cache: 0 items</CLR>\n \"\n `;\n \n@@ -1957,6 +1967,16 @@ LOG from webpack.buildChunkGraph\n     3 chunk groups processed for merging (3 module sets, 0 forked, 0 + 0 modules forked, 0 + 0 modules merged into fork, 0 resulting modules)\n     3 chunk group info updated (0 already connected chunk groups reconnected)\n + 13 hidden lines\n+\n+LOG from webpack.FileSystemInfo\n+    6 new snapshots created\n+    0% root snapshot uncached (0 / 0)\n+    0% children snapshot uncached (0 / 0)\n+    0 entries tested\n+    File info in cache: 6 timestamps 0 hashes\n+    File timestamp snapshot optimization: 0% (0/6) entries shared via 0 shared snapshots (0 times referenced)\n+    Directory info in cache: 0 timestamps 0 hashes\n+    Managed items info in cache: 0 items\n \"\n `;\n \n@@ -2284,6 +2304,16 @@ LOG from ModuleConcatenationPlugin\n <t> sort concat configurations: X ms\n <t> create concatenated modules: X ms\n + 2 hidden lines\n+\n+LOG from webpack.FileSystemInfo\n+    6 new snapshots created\n+    0% root snapshot uncached (0 / 0)\n+    0% children snapshot uncached (0 / 0)\n+    0 entries tested\n+    File info in cache: 6 timestamps 0 hashes\n+    File timestamp snapshot optimization: 0% (0/6) entries shared via 0 shared snapshots (0 times referenced)\n+    Directory info in cache: 0 timestamps 0 hashes\n+    Managed items info in cache: 0 items\n \"\n `;\n "
      },
      {
        "sha": "147b0659af6b452041d83c430a716bc2d197eb6e",
        "filename": "test/watchCases/cache/child-compilation-cache/0/index.js",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/test%2FwatchCases%2Fcache%2Fchild-compilation-cache%2F0%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/test%2FwatchCases%2Fcache%2Fchild-compilation-cache%2F0%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2Fchild-compilation-cache%2F0%2Findex.js?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -1,14 +1,14 @@\n-it(\"should use correct caches in compilation and child compilations\", function() {\n+it(\"should use correct caches in compilation and child compilations\", function () {\n \tvar x = require(\"./report-cache-counters-loader!./changing-file\");\n-\tswitch(WATCH_STEP) {\n+\tswitch (WATCH_STEP) {\n \t\tcase \"0\":\n-\t\t\texpect(x).toEqual([\"\", 1, \"/my-compiler 1230\", 1]);\n+\t\t\texpect(x).toEqual([\"\", 1, \"my-compiler 123|0|\", 1]);\n \t\t\tbreak;\n \t\tcase \"1\":\n-\t\t\texpect(x).toEqual([\"\", 2, \"/my-compiler 4560\", 1]);\n+\t\t\texpect(x).toEqual([\"\", 2, \"my-compiler 456|0|\", 1]);\n \t\t\tbreak;\n \t\tcase \"2\":\n-\t\t\texpect(x).toEqual([\"\", 3, \"/my-compiler 1230\", 2]);\n+\t\t\texpect(x).toEqual([\"\", 3, \"my-compiler 123|0|\", 2]);\n \t\t\tbreak;\n \t\tdefault:\n \t\t\tthrow new Error(\"Not handled step\");"
      },
      {
        "sha": "d7b2196747098610fa2dc45b0d4271565891e53f",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 55,
        "deletions": 10,
        "changes": 65,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -554,8 +554,10 @@ declare interface CacheGroupsContext {\n type CacheOptions = boolean | MemoryCacheOptions | FileCacheOptions;\n type CacheOptionsNormalized = false | MemoryCacheOptions | FileCacheOptions;\n declare class CachedSource extends Source {\n-\tconstructor(source: Source, cachedData?: any);\n+\tconstructor(source: Source);\n+\tconstructor(source: Source | (() => Source), cachedData?: any);\n \toriginal(): Source;\n+\toriginalLazy(): Source | (() => Source);\n \tgetCachedData(): any;\n }\n type CallExpression = SimpleCallExpression | NewExpression;\n@@ -3053,6 +3055,7 @@ declare abstract class FileSystemInfo {\n \tmanagedPathsWithSlash: string[];\n \timmutablePaths: string[];\n \timmutablePathsWithSlash: string[];\n+\tlogStatistics(): void;\n \taddFileTimestamps(map: Map<string, FileSystemInfoEntry | \"ignore\">): void;\n \taddContextTimestamps(map: Map<string, FileSystemInfoEntry | \"ignore\">): void;\n \tgetFileTimestamp(\n@@ -3090,6 +3093,10 @@ declare abstract class FileSystemInfo {\n \t\t\t * should use hash to snapshot\n \t\t\t */\n \t\t\thash?: boolean;\n+\t\t\t/**\n+\t\t\t * should use timestamp to snapshot\n+\t\t\t */\n+\t\t\ttimestamp?: boolean;\n \t\t},\n \t\tcallback: (arg0: WebpackError, arg1: Snapshot) => void\n \t): void;\n@@ -4386,6 +4393,12 @@ declare class Module extends DependenciesBlock {\n \t */\n \tupdateCacheModule(module: Module): void;\n \toriginalSource(): Source;\n+\taddCacheDependencies(\n+\t\tfileDependencies: LazySet<string>,\n+\t\tcontextDependencies: LazySet<string>,\n+\t\tmissingDependencies: LazySet<string>,\n+\t\tbuildDependencies: LazySet<string>\n+\t): void;\n \tuseSourceMap: any;\n \treadonly hasEqualsChunks: any;\n \treadonly isUsed: any;\n@@ -7842,15 +7855,47 @@ declare class SideEffectsFlagPlugin {\n declare class SizeOnlySource extends Source {\n \tconstructor(size: number);\n }\n-declare interface Snapshot {\n-\tstartTime?: number;\n-\tfileTimestamps?: Map<string, FileSystemInfoEntry>;\n-\tfileHashes?: Map<string, string>;\n-\tcontextTimestamps?: Map<string, FileSystemInfoEntry>;\n-\tcontextHashes?: Map<string, string>;\n-\tmissingExistence?: Map<string, boolean>;\n-\tmanagedItemInfo?: Map<string, string>;\n-\tchildren?: Set<Snapshot>;\n+declare abstract class Snapshot {\n+\tstartTime: number;\n+\tfileTimestamps: Map<string, FileSystemInfoEntry>;\n+\tfileHashes: Map<string, string>;\n+\tcontextTimestamps: Map<string, FileSystemInfoEntry>;\n+\tcontextHashes: Map<string, string>;\n+\tmissingExistence: Map<string, boolean>;\n+\tmanagedItemInfo: Map<string, string>;\n+\tmanagedFiles: Set<string>;\n+\tmanagedContexts: Set<string>;\n+\tmanagedMissing: Set<string>;\n+\tchildren: Set<Snapshot>;\n+\thasStartTime(): boolean;\n+\tsetStartTime(value?: any): void;\n+\tsetMergedStartTime(value?: any, snapshot?: any): void;\n+\thasFileTimestamps(): boolean;\n+\tsetFileTimestamps(value?: any): void;\n+\thasFileHashes(): boolean;\n+\tsetFileHashes(value?: any): void;\n+\thasContextTimestamps(): boolean;\n+\tsetContextTimestamps(value?: any): void;\n+\thasContextHashes(): boolean;\n+\tsetContextHashes(value?: any): void;\n+\thasMissingExistence(): boolean;\n+\tsetMissingExistence(value?: any): void;\n+\thasManagedItemInfo(): boolean;\n+\tsetManagedItemInfo(value?: any): void;\n+\thasManagedFiles(): boolean;\n+\tsetManagedFiles(value?: any): void;\n+\thasManagedContexts(): boolean;\n+\tsetManagedContexts(value?: any): void;\n+\thasManagedMissing(): boolean;\n+\tsetManagedMissing(value?: any): void;\n+\thasChildren(): boolean;\n+\tsetChildren(value?: any): void;\n+\taddChild(child?: any): void;\n+\tserialize(__0: { write: any }): void;\n+\tdeserialize(__0: { read: any }): void;\n+\tgetFileIterable(): Iterable<string>;\n+\tgetContextIterable(): Iterable<string>;\n+\tgetMissingIterable(): Iterable<string>;\n }\n declare abstract class SortableSet<T> extends Set<T> {\n \t/**"
      },
      {
        "sha": "8b7d86f2f969d4b917127137e19ac204003d72a7",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/62c42636719766f1706a50837ccaed18a2153547/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/62c42636719766f1706a50837ccaed18a2153547/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=62c42636719766f1706a50837ccaed18a2153547",
        "patch": "@@ -6724,10 +6724,10 @@ webidl-conversions@^4.0.2:\n   resolved \"https://registry.yarnpkg.com/webidl-conversions/-/webidl-conversions-4.0.2.tgz#a855980b1f0b6b359ba1d5d9fb39ae941faa63ad\"\n   integrity sha512-YQ+BmxuTgd6UXZW3+ICGfyqRyHXVlD5GtQr5+qjiNW7bF0cqrzX500HVXPBOvgXb5YnzDd+h0zqyv61KUD7+Sg==\n \n-webpack-sources@2.0.0-beta.9:\n-  version \"2.0.0-beta.9\"\n-  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-2.0.0-beta.9.tgz#49a504a08c0a8b1c5418c1fdca4ced06b5cb9119\"\n-  integrity sha512-q6O+gKGojLye0Fm05vgthtmx5LPbYpAU4FsdMsX8YBgkOZovDbQmBMhjY/CiWhxD9u/0AWeWdXFNbQz17mkdLw==\n+webpack-sources@2.0.0-beta.10:\n+  version \"2.0.0-beta.10\"\n+  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-2.0.0-beta.10.tgz#f603355c5518141976601bfd620a3a5a01ac7b5d\"\n+  integrity sha512-HxeYa9Q6nMk3MtSbi5mKUUV+gOxYlGQwujKbeK0JQ+SmLSMgC4cQkZ+xpsWvsUtTvskDwpKvuVLpE9eW7vn0IQ==\n   dependencies:\n     source-list-map \"^2.0.1\"\n     source-map \"^0.6.1\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/11379",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/11379/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/11379/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/11379/events",
    "html_url": "https://github.com/webpack/webpack/pull/11379",
    "id": 685886978,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDczNTQ4NDA0",
    "number": 11379,
    "title": "add \"snapshot\" configuration to allow to configure how snapshots are created",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-08-25T22:57:19Z",
    "updated_at": "2020-08-26T07:24:24Z",
    "closed_at": "2020-08-26T07:24:17Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/11379",
      "html_url": "https://github.com/webpack/webpack/pull/11379",
      "diff_url": "https://github.com/webpack/webpack/pull/11379.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/11379.patch",
      "merged_at": "2020-08-26T07:24:17Z"
    },
    "body": "* expose snapshot options for module, resolve, buildDependencies and resolveBuildDependencies\r\n* move managedPaths and immutablePaths from config.cache to config.snapshot\r\n* add timestamp + hash snapshotting mode\r\n* use timestamp + hash mode by default in production and for buildDependencies\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nnot yet, but the new defaults test the \r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes, config options move. Hints added to point to the new locations.\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* config options have moved `cache.managedPaths/immutablePaths` -> `snapshot.managedPaths/immutablePaths`\r\n* new config options how snapshots are created.\r\n  * `snapshot.module`: Snapshots for building of modules\r\n  * `snapshot.resolve`: Snapshots for resolving of requests\r\n  * `snapshot.buildDependencies`: Snapshots for build dependencies when using the persistent cache\r\n  * `snapshot.resolveBuildDependencies`: Snapshots for resolving of build dependencies when using the persistent cache\r\n  * Each takes an object with two optional properties: `hash` and `timestamp`\r\n  * `timestamp: true`: compare timestamps to determine if dependencies have changed\r\n  * `hash: true`: compare content hashes to determine if dependencies have changed (more expensive, but changes less often)\r\n  * when both are specified, timestamps are compared first and if they mismatch hashes are compared. This allows cheap check before file need to be read for hash.\r\n  * `{ timestamp: true }`: Good for local development caching.\r\n  * `{ hash: true }`: Good for CI caching with a fresh checkout. A fresh checkout doesn't keep timestamps so hashes are used.\r\n  * `{ timestamp: true, hash: true }`: Good for both, but has a small performance hit for the initial build.\r\n  * Defaults\r\n    * (resolve)buildDependencies: `{ timestamp: true, hash: true }` (we play safe here, only timestamp would risk a full cache invalidation)\r\n    * module/resolve: `{ timestamp: true }` in development (fastest for local dev), `{ timestamp: true, hash: true }` in production (we might run in CI, so better play safe here)\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/11379/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 4,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/11379/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "96eeb41920122b1870efd0df921df680c2791137",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 73,
        "deletions": 8,
        "changes": 81,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -679,6 +679,10 @@ export interface WebpackOptions {\n \t * Options for the resolver when resolving loaders.\n \t */\n \tresolveLoader?: ResolveLoader;\n+\t/**\n+\t * Options affecting how file system snapshots are created and validated.\n+\t */\n+\tsnapshot?: SnapshotOptions;\n \t/**\n \t * Stats options object or preset name.\n \t */\n@@ -700,14 +704,6 @@ export interface WebpackOptions {\n  * Options object for in-memory caching.\n  */\n export interface MemoryCacheOptions {\n-\t/**\n-\t * List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\n-\t */\n-\timmutablePaths?: string[];\n-\t/**\n-\t * List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\n-\t */\n-\tmanagedPaths?: string[];\n \t/**\n \t * In memory caching.\n \t */\n@@ -1751,6 +1747,71 @@ export interface PerformanceOptions {\n \t */\n \tmaxEntrypointSize?: number;\n }\n+/**\n+ * Options affecting how file system snapshots are created and validated.\n+ */\n+export interface SnapshotOptions {\n+\t/**\n+\t * Options for snapshotting build dependencies to determine if the whole cache need to be invalidated.\n+\t */\n+\tbuildDependencies?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+\t/**\n+\t * List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\n+\t */\n+\timmutablePaths?: string[];\n+\t/**\n+\t * List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\n+\t */\n+\tmanagedPaths?: string[];\n+\t/**\n+\t * Options for snapshotting dependencies of modules to determine if they need to be built again.\n+\t */\n+\tmodule?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+\t/**\n+\t * Options for snapshotting dependencies of request resolving to determine if requests need to be re-resolved.\n+\t */\n+\tresolve?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+\t/**\n+\t * Options for snapshotting the resolving of build dependencies to determine if the build dependencies need to be re-resolved.\n+\t */\n+\tresolveBuildDependencies?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+}\n /**\n  * Stats options object.\n  */\n@@ -2303,6 +2364,10 @@ export interface WebpackOptionsNormalized {\n \t * Options for the resolver when resolving loaders.\n \t */\n \tresolveLoader: ResolveLoader;\n+\t/**\n+\t * Options affecting how file system snapshots are created and validated.\n+\t */\n+\tsnapshot: SnapshotOptions;\n \t/**\n \t * Stats options object or preset name.\n \t */"
      },
      {
        "sha": "d7197e23998343854c99ce3e01fd836f11332b0d",
        "filename": "lib/ContextModule.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FContextModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FContextModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModule.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -81,6 +81,8 @@ const makeSerializable = require(\"./util/makeSerializable\");\n  * @param {ResolveDependenciesCallback} callback\n  */\n \n+const SNAPSHOT_OPTIONS = { timestamp: true };\n+\n const TYPES = new Set([\"javascript\"]);\n \n class ContextModule extends Module {\n@@ -428,7 +430,7 @@ class ContextModule extends Module {\n \t\t\t\tnull,\n \t\t\t\t[this.context],\n \t\t\t\tnull,\n-\t\t\t\t{},\n+\t\t\t\tSNAPSHOT_OPTIONS,\n \t\t\t\t(err, snapshot) => {\n \t\t\t\t\tif (err) return callback(err);\n \t\t\t\t\tthis.buildInfo.snapshot = snapshot;"
      },
      {
        "sha": "7192d9ffbe24b64ef2caa42ddda375a751a4369a",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 538,
        "deletions": 228,
        "changes": 766,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -46,6 +46,14 @@ const INVALID = Symbol(\"invalid\");\n  * @property {string=} timestampHash\n  */\n \n+/**\n+ * @typedef {Object} TimestampAndHash\n+ * @property {number} safeTime\n+ * @property {number=} timestamp\n+ * @property {string=} timestampHash\n+ * @property {string} hash\n+ */\n+\n /**\n  * @typedef {Object} SnapshotOptimizationEntry\n  * @property {Snapshot} snapshot\n@@ -68,6 +76,10 @@ const INVALID = Symbol(\"invalid\");\n \n const DONE_ITERATOR_RESULT = new Set().keys().next();\n \n+// cspell:word tshs\n+// Tsh = Timestamp + Hash\n+// Tshs = Timestamp + Hash combinations\n+\n class Snapshot {\n \tconstructor() {\n \t\tthis._flags = 0;\n@@ -77,10 +89,14 @@ class Snapshot {\n \t\tthis.fileTimestamps = undefined;\n \t\t/** @type {Map<string, string> | undefined} */\n \t\tthis.fileHashes = undefined;\n+\t\t/** @type {Map<string, TimestampAndHash | string> | undefined} */\n+\t\tthis.fileTshs = undefined;\n \t\t/** @type {Map<string, FileSystemInfoEntry> | undefined} */\n \t\tthis.contextTimestamps = undefined;\n \t\t/** @type {Map<string, string> | undefined} */\n \t\tthis.contextHashes = undefined;\n+\t\t/** @type {Map<string, TimestampAndHash | string> | undefined} */\n+\t\tthis.contextTshs = undefined;\n \t\t/** @type {Map<string, boolean> | undefined} */\n \t\tthis.missingExistence = undefined;\n \t\t/** @type {Map<string, string> | undefined} */\n@@ -134,75 +150,93 @@ class Snapshot {\n \t\tthis.fileHashes = value;\n \t}\n \n-\thasContextTimestamps() {\n+\thasFileTshs() {\n \t\treturn (this._flags & 8) !== 0;\n \t}\n \n-\tsetContextTimestamps(value) {\n+\tsetFileTshs(value) {\n \t\tthis._flags = this._flags | 8;\n+\t\tthis.fileTshs = value;\n+\t}\n+\n+\thasContextTimestamps() {\n+\t\treturn (this._flags & 0x10) !== 0;\n+\t}\n+\n+\tsetContextTimestamps(value) {\n+\t\tthis._flags = this._flags | 0x10;\n \t\tthis.contextTimestamps = value;\n \t}\n \n \thasContextHashes() {\n-\t\treturn (this._flags & 0x10) !== 0;\n+\t\treturn (this._flags & 0x20) !== 0;\n \t}\n \n \tsetContextHashes(value) {\n-\t\tthis._flags = this._flags | 0x10;\n+\t\tthis._flags = this._flags | 0x20;\n \t\tthis.contextHashes = value;\n \t}\n \n+\thasContextTshs() {\n+\t\treturn (this._flags & 0x40) !== 0;\n+\t}\n+\n+\tsetContextTshs(value) {\n+\t\tthis._flags = this._flags | 0x40;\n+\t\tthis.contextTshs = value;\n+\t}\n+\n \thasMissingExistence() {\n-\t\treturn (this._flags & 0x20) !== 0;\n+\t\treturn (this._flags & 0x80) !== 0;\n \t}\n \n \tsetMissingExistence(value) {\n-\t\tthis._flags = this._flags | 0x20;\n+\t\tthis._flags = this._flags | 0x80;\n \t\tthis.missingExistence = value;\n \t}\n \n \thasManagedItemInfo() {\n-\t\treturn (this._flags & 0x40) !== 0;\n+\t\treturn (this._flags & 0x100) !== 0;\n \t}\n \n \tsetManagedItemInfo(value) {\n-\t\tthis._flags = this._flags | 0x40;\n+\t\tthis._flags = this._flags | 0x100;\n \t\tthis.managedItemInfo = value;\n \t}\n \n \thasManagedFiles() {\n-\t\treturn (this._flags & 0x80) !== 0;\n+\t\treturn (this._flags & 0x200) !== 0;\n \t}\n \n \tsetManagedFiles(value) {\n-\t\tthis._flags = this._flags | 0x80;\n+\t\tthis._flags = this._flags | 0x200;\n \t\tthis.managedFiles = value;\n \t}\n \n \thasManagedContexts() {\n-\t\treturn (this._flags & 0x100) !== 0;\n+\t\treturn (this._flags & 0x400) !== 0;\n \t}\n \n \tsetManagedContexts(value) {\n-\t\tthis._flags = this._flags | 0x100;\n+\t\tthis._flags = this._flags | 0x400;\n \t\tthis.managedContexts = value;\n \t}\n \n \thasManagedMissing() {\n-\t\treturn (this._flags & 0x200) !== 0;\n+\t\treturn (this._flags & 0x800) !== 0;\n \t}\n \n \tsetManagedMissing(value) {\n-\t\tthis._flags = this._flags | 0x200;\n+\t\tthis._flags = this._flags | 0x800;\n \t\tthis.managedMissing = value;\n \t}\n \n \thasChildren() {\n-\t\treturn (this._flags & 0x400) !== 0;\n+\t\treturn (this._flags & 0x1000) !== 0;\n \t}\n \n \tsetChildren(value) {\n-\t\tthis._flags = this._flags | 0x400;\n+\t\tthis._flags = this._flags | 0x1000;\n \t\tthis.children = value;\n \t}\n \n@@ -218,8 +252,10 @@ class Snapshot {\n \t\tif (this.hasStartTime()) write(this.startTime);\n \t\tif (this.hasFileTimestamps()) write(this.fileTimestamps);\n \t\tif (this.hasFileHashes()) write(this.fileHashes);\n+\t\tif (this.hasFileTshs()) write(this.fileTshs);\n \t\tif (this.hasContextTimestamps()) write(this.contextTimestamps);\n \t\tif (this.hasContextHashes()) write(this.contextHashes);\n+\t\tif (this.hasContextTshs()) write(this.contextTshs);\n \t\tif (this.hasMissingExistence()) write(this.missingExistence);\n \t\tif (this.hasManagedItemInfo()) write(this.managedItemInfo);\n \t\tif (this.hasManagedFiles()) write(this.managedFiles);\n@@ -233,8 +269,10 @@ class Snapshot {\n \t\tif (this.hasStartTime()) this.startTime = read();\n \t\tif (this.hasFileTimestamps()) this.fileTimestamps = read();\n \t\tif (this.hasFileHashes()) this.fileHashes = read();\n+\t\tif (this.hasFileTshs()) this.fileTshs = read();\n \t\tif (this.hasContextTimestamps()) this.contextTimestamps = read();\n \t\tif (this.hasContextHashes()) this.contextHashes = read();\n+\t\tif (this.hasContextTshs()) this.contextTshs = read();\n \t\tif (this.hasMissingExistence()) this.missingExistence = read();\n \t\tif (this.hasManagedItemInfo()) this.managedItemInfo = read();\n \t\tif (this.hasManagedFiles()) this.managedFiles = read();\n@@ -244,58 +282,43 @@ class Snapshot {\n \t}\n \n \t/**\n-\t * @param {function(Snapshot): Map<string, any> | undefined} getMap first\n-\t * @param {function(Snapshot): Set<string> | undefined} getSet second\n-\t * @param {function(Snapshot): Iterable<string> | undefined} getIterable 3rd\n+\t * @param {function(Snapshot): (Map<string, any> | Set<string>)[]} getMaps first\n \t * @returns {Iterable<string>} iterable\n \t */\n-\t_createIterable(getMap, getSet, getIterable) {\n+\t_createIterable(getMaps) {\n \t\tlet snapshot = this;\n \t\treturn {\n \t\t\t[Symbol.iterator]() {\n \t\t\t\tlet state = 0;\n \t\t\t\t/** @type {IterableIterator<string>} */\n \t\t\t\tlet it;\n+\t\t\t\tlet maps = getMaps(snapshot);\n \t\t\t\tconst queue = [];\n \t\t\t\treturn {\n \t\t\t\t\tnext() {\n \t\t\t\t\t\tfor (;;) {\n \t\t\t\t\t\t\tswitch (state) {\n-\t\t\t\t\t\t\t\tcase 0: {\n-\t\t\t\t\t\t\t\t\tconst map = getMap(snapshot);\n-\t\t\t\t\t\t\t\t\tif (map !== undefined) {\n-\t\t\t\t\t\t\t\t\t\tit = map.keys();\n-\t\t\t\t\t\t\t\t\t\tstate = 1;\n+\t\t\t\t\t\t\t\tcase 0:\n+\t\t\t\t\t\t\t\t\tif (maps.length > 0) {\n+\t\t\t\t\t\t\t\t\t\tconst map = maps.pop();\n+\t\t\t\t\t\t\t\t\t\tif (map !== undefined) {\n+\t\t\t\t\t\t\t\t\t\t\tit = map.keys();\n+\t\t\t\t\t\t\t\t\t\t\tstate = 1;\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t\tstate = 2;\n \t\t\t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t/* falls through */\n \t\t\t\t\t\t\t\tcase 1: {\n \t\t\t\t\t\t\t\t\tconst result = it.next();\n \t\t\t\t\t\t\t\t\tif (!result.done) return result;\n-\t\t\t\t\t\t\t\t\tstate = 2;\n+\t\t\t\t\t\t\t\t\tstate = 0;\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t/* falls through */\n \t\t\t\t\t\t\t\tcase 2: {\n-\t\t\t\t\t\t\t\t\tconst set = getSet(snapshot);\n-\t\t\t\t\t\t\t\t\tif (set !== undefined) {\n-\t\t\t\t\t\t\t\t\t\tit = set.keys();\n-\t\t\t\t\t\t\t\t\t\tstate = 3;\n-\t\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\t\tstate = 4;\n-\t\t\t\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t/* falls through */\n-\t\t\t\t\t\t\t\tcase 3: {\n-\t\t\t\t\t\t\t\t\tconst result = it.next();\n-\t\t\t\t\t\t\t\t\tif (!result.done) return result;\n-\t\t\t\t\t\t\t\t\tstate = 4;\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t/* falls through */\n-\t\t\t\t\t\t\t\tcase 4: {\n \t\t\t\t\t\t\t\t\tconst children = snapshot.children;\n \t\t\t\t\t\t\t\t\tif (children !== undefined) {\n \t\t\t\t\t\t\t\t\t\tfor (const child of children) {\n@@ -304,14 +327,15 @@ class Snapshot {\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\tif (queue.length > 0) {\n \t\t\t\t\t\t\t\t\t\tsnapshot = queue.pop();\n+\t\t\t\t\t\t\t\t\t\tmaps = getMaps(snapshot);\n \t\t\t\t\t\t\t\t\t\tstate = 0;\n \t\t\t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\t\tstate = 5;\n+\t\t\t\t\t\t\t\t\t\tstate = 3;\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t/* falls through */\n-\t\t\t\t\t\t\t\tcase 5:\n+\t\t\t\t\t\t\t\tcase 3:\n \t\t\t\t\t\t\t\t\treturn DONE_ITERATOR_RESULT;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n@@ -325,33 +349,31 @@ class Snapshot {\n \t * @returns {Iterable<string>} iterable\n \t */\n \tgetFileIterable() {\n-\t\treturn this._createIterable(\n-\t\t\ts => s.fileTimestamps,\n-\t\t\ts => s.managedFiles,\n-\t\t\ts => s.getFileIterable()\n-\t\t);\n+\t\treturn this._createIterable(s => [\n+\t\t\ts.fileTimestamps,\n+\t\t\ts.fileHashes,\n+\t\t\ts.fileTshs,\n+\t\t\ts.managedFiles\n+\t\t]);\n \t}\n \n \t/**\n \t * @returns {Iterable<string>} iterable\n \t */\n \tgetContextIterable() {\n-\t\treturn this._createIterable(\n-\t\t\ts => s.contextTimestamps,\n-\t\t\ts => s.managedContexts,\n-\t\t\ts => s.getContextIterable()\n-\t\t);\n+\t\treturn this._createIterable(s => [\n+\t\t\ts.contextTimestamps,\n+\t\t\ts.contextHashes,\n+\t\t\ts.contextTshs,\n+\t\t\ts.managedContexts\n+\t\t]);\n \t}\n \n \t/**\n \t * @returns {Iterable<string>} iterable\n \t */\n \tgetMissingIterable() {\n-\t\treturn this._createIterable(\n-\t\t\ts => s.missingExistence,\n-\t\t\ts => s.managedMissing,\n-\t\t\ts => s.getMissingIterable()\n-\t\t);\n+\t\treturn this._createIterable(s => [s.missingExistence, s.managedMissing]);\n \t}\n }\n \n@@ -611,6 +633,23 @@ const mergeMaps = (a, b) => {\n \treturn map;\n };\n \n+/**\n+ * @template T\n+ * @template K\n+ * @param {Set<T, K>} a source map\n+ * @param {Set<T, K>} b joining map\n+ * @returns {Set<T, K>} joined map\n+ */\n+const mergeSets = (a, b) => {\n+\tif (!b || b.size === 0) return a;\n+\tif (!a || a.size === 0) return b;\n+\tconst map = new Set(a);\n+\tfor (const item of b) {\n+\t\tmap.add(item);\n+\t}\n+\treturn map;\n+};\n+\n /**\n  * Finding file or directory to manage\n  * @param {string} managedPath path that is managing by {@link FileSystemInfo}\n@@ -731,6 +770,11 @@ class FileSystemInfo {\n \t\t\ts => s.fileHashes,\n \t\t\t(s, v) => s.setFileHashes(v)\n \t\t);\n+\t\tthis._fileTshsOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasFileTshs(),\n+\t\t\ts => s.fileTshs,\n+\t\t\t(s, v) => s.setFileTshs(v)\n+\t\t);\n \t\tthis._contextTimestampsOptimization = new SnapshotOptimization(\n \t\t\ts => s.hasContextTimestamps(),\n \t\t\ts => s.contextTimestamps,\n@@ -741,6 +785,11 @@ class FileSystemInfo {\n \t\t\ts => s.contextHashes,\n \t\t\t(s, v) => s.setContextHashes(v)\n \t\t);\n+\t\tthis._contextTshsOptimization = new SnapshotOptimization(\n+\t\t\ts => s.hasContextTshs(),\n+\t\t\ts => s.contextTshs,\n+\t\t\t(s, v) => s.setContextTshs(v)\n+\t\t);\n \t\tthis._missingExistenceOptimization = new SnapshotOptimization(\n \t\t\ts => s.hasMissingExistence(),\n \t\t\ts => s.missingExistence,\n@@ -773,10 +822,14 @@ class FileSystemInfo {\n \t\tthis._fileTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tthis._fileHashes = new Map();\n+\t\t/** @type {Map<string, TimestampAndHash | string>} */\n+\t\tthis._fileTshs = new Map();\n \t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | null>} */\n \t\tthis._contextTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tthis._contextHashes = new Map();\n+\t\t/** @type {Map<string, TimestampAndHash | string>} */\n+\t\tthis._contextTshs = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tthis._managedItems = new Map();\n \t\t/** @type {AsyncQueue<string, string, FileSystemInfoEntry | null>} */\n@@ -864,7 +917,7 @@ class FileSystemInfo {\n \t\t);\n \t\tthis.logger.log(`${this._statTestedEntries} entries tested`);\n \t\tthis.logger.log(\n-\t\t\t`File info in cache: ${this._fileTimestamps.size} timestamps ${this._fileHashes.size} hashes`\n+\t\t\t`File info in cache: ${this._fileTimestamps.size} timestamps ${this._fileHashes.size} hashes ${this._fileTshs.size} timestamp hash combinations`\n \t\t);\n \t\tlogWhenMessage(\n \t\t\t`File timestamp snapshot optimization`,\n@@ -874,8 +927,12 @@ class FileSystemInfo {\n \t\t\t`File hash snapshot optimization`,\n \t\t\tthis._fileHashesOptimization.getStatisticMessage()\n \t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`File timestamp hash combination snapshot optimization`,\n+\t\t\tthis._fileTshsOptimization.getStatisticMessage()\n+\t\t);\n \t\tthis.logger.log(\n-\t\t\t`Directory info in cache: ${this._contextTimestamps.size} timestamps ${this._contextHashes.size} hashes`\n+\t\t\t`Directory info in cache: ${this._contextTimestamps.size} timestamps ${this._contextHashes.size} hashes ${this._contextTshs.size} timestamp hash combinations`\n \t\t);\n \t\tlogWhenMessage(\n \t\t\t`Directory timestamp snapshot optimization`,\n@@ -885,6 +942,10 @@ class FileSystemInfo {\n \t\t\t`Directory hash snapshot optimization`,\n \t\t\tthis._contextHashesOptimization.getStatisticMessage()\n \t\t);\n+\t\tlogWhenMessage(\n+\t\t\t`Directory timestamp hash combination snapshot optimization`,\n+\t\t\tthis._contextTshsOptimization.getStatisticMessage()\n+\t\t);\n \t\tlogWhenMessage(\n \t\t\t`Missing items snapshot optimization`,\n \t\t\tthis._missingExistenceOptimization.getStatisticMessage()\n@@ -1336,10 +1397,14 @@ class FileSystemInfo {\n \t\tconst fileTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tconst fileHashes = new Map();\n+\t\t/** @type {Map<string, TimestampAndHash | string>} */\n+\t\tconst fileTshs = new Map();\n \t\t/** @type {Map<string, FileSystemInfoEntry>} */\n \t\tconst contextTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tconst contextHashes = new Map();\n+\t\t/** @type {Map<string, TimestampAndHash | string>} */\n+\t\tconst contextTshs = new Map();\n \t\t/** @type {Map<string, boolean>} */\n \t\tconst missingExistence = new Map();\n \t\t/** @type {Map<string, string>} */\n@@ -1358,17 +1423,24 @@ class FileSystemInfo {\n \t\t/** @type {Set<string>} */\n \t\tlet unsharedFileHashes;\n \t\t/** @type {Set<string>} */\n+\t\tlet unsharedFileTshs;\n+\t\t/** @type {Set<string>} */\n \t\tlet unsharedContextTimestamps;\n \t\t/** @type {Set<string>} */\n \t\tlet unsharedContextHashes;\n \t\t/** @type {Set<string>} */\n+\t\tlet unsharedContextTshs;\n+\t\t/** @type {Set<string>} */\n \t\tlet unsharedMissingExistence;\n \t\t/** @type {Set<string>} */\n \t\tlet unsharedManagedItemInfo;\n \n \t\t/** @type {Set<string>} */\n \t\tconst managedItems = new Set();\n \n+\t\t/** 1 = timestamp, 2 = hash, 3 = timestamp + hash */\n+\t\tconst mode = options && options.hash ? (options.timestamp ? 3 : 2) : 1;\n+\n \t\tlet jobs = 1;\n \t\tconst jobDone = () => {\n \t\t\tif (--jobs === 0) {\n@@ -1388,6 +1460,13 @@ class FileSystemInfo {\n \t\t\t\t\t\tunsharedFileHashes\n \t\t\t\t\t);\n \t\t\t\t}\n+\t\t\t\tif (fileTshs.size !== 0) {\n+\t\t\t\t\tsnapshot.setFileTshs(fileTshs);\n+\t\t\t\t\tthis._fileTshsOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedFileTshs\n+\t\t\t\t\t);\n+\t\t\t\t}\n \t\t\t\tif (contextTimestamps.size !== 0) {\n \t\t\t\t\tsnapshot.setContextTimestamps(contextTimestamps);\n \t\t\t\t\tthis._contextTimestampsOptimization.storeUnsharedSnapshot(\n@@ -1402,6 +1481,13 @@ class FileSystemInfo {\n \t\t\t\t\t\tunsharedContextHashes\n \t\t\t\t\t);\n \t\t\t\t}\n+\t\t\t\tif (contextTshs.size !== 0) {\n+\t\t\t\t\tsnapshot.setContextTshs(contextTshs);\n+\t\t\t\t\tthis._contextTshsOptimization.storeUnsharedSnapshot(\n+\t\t\t\t\t\tsnapshot,\n+\t\t\t\t\t\tunsharedContextTshs\n+\t\t\t\t\t);\n+\t\t\t\t}\n \t\t\t\tif (missingExistence.size !== 0) {\n \t\t\t\t\tsnapshot.setMissingExistence(missingExistence);\n \t\t\t\t\tthis._missingExistenceOptimization.storeUnsharedSnapshot(\n@@ -1496,125 +1582,187 @@ class FileSystemInfo {\n \t\t};\n \t\tif (files) {\n \t\t\tconst capturedFiles = captureNonManaged(files, managedFiles);\n-\t\t\tif (options && options.hash) {\n-\t\t\t\tunsharedFileHashes = this._fileHashesOptimization.optimize(\n-\t\t\t\t\tcapturedFiles,\n-\t\t\t\t\tundefined,\n-\t\t\t\t\tchildren\n-\t\t\t\t);\n-\t\t\t\tfor (const path of capturedFiles) {\n-\t\t\t\t\tconst cache = this._fileHashes.get(path);\n-\t\t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\t\tfileHashes.set(path, cache);\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tjobs++;\n-\t\t\t\t\t\tthis.fileHashQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\tif (this.logger) {\n-\t\t\t\t\t\t\t\t\tthis.logger.debug(\n-\t\t\t\t\t\t\t\t\t\t`Error snapshotting file hash of ${path}: ${err}`\n-\t\t\t\t\t\t\t\t\t);\n+\t\t\tswitch (mode) {\n+\t\t\t\tcase 3:\n+\t\t\t\t\tunsharedFileTshs = this._fileTshsOptimization.optimize(\n+\t\t\t\t\t\tcapturedFiles,\n+\t\t\t\t\t\tundefined,\n+\t\t\t\t\t\tchildren\n+\t\t\t\t\t);\n+\t\t\t\t\tfor (const path of capturedFiles) {\n+\t\t\t\t\t\tconst cache = this._fileTshs.get(path);\n+\t\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\t\tfileTshs.set(path, cache);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\t\tthis._getFileTimestampAndHash(path, (err, entry) => {\n+\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t\t`Error snapshotting file timestamp hash combination of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tjobError();\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tfileTshs.set(path, entry);\n+\t\t\t\t\t\t\t\t\tjobDone();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tjobError();\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tfileHashes.set(path, entry);\n-\t\t\t\t\t\t\t\tjobDone();\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tunsharedFileTimestamps = this._fileTimestampsOptimization.optimize(\n-\t\t\t\t\tcapturedFiles,\n-\t\t\t\t\tstartTime,\n-\t\t\t\t\tchildren\n-\t\t\t\t);\n-\t\t\t\tfor (const path of capturedFiles) {\n-\t\t\t\t\tconst cache = this._fileTimestamps.get(path);\n-\t\t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\t\tif (cache !== \"ignore\") {\n-\t\t\t\t\t\t\tfileTimestamps.set(path, cache);\n+\t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tjobs++;\n-\t\t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\tif (this.logger) {\n-\t\t\t\t\t\t\t\t\tthis.logger.debug(\n-\t\t\t\t\t\t\t\t\t\t`Error snapshotting file timestamp of ${path}: ${err}`\n-\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase 2:\n+\t\t\t\t\tunsharedFileHashes = this._fileHashesOptimization.optimize(\n+\t\t\t\t\t\tcapturedFiles,\n+\t\t\t\t\t\tundefined,\n+\t\t\t\t\t\tchildren\n+\t\t\t\t\t);\n+\t\t\t\t\tfor (const path of capturedFiles) {\n+\t\t\t\t\t\tconst cache = this._fileHashes.get(path);\n+\t\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\t\tfileHashes.set(path, cache);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\t\tthis.fileHashQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t\t`Error snapshotting file hash of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tjobError();\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tfileHashes.set(path, entry);\n+\t\t\t\t\t\t\t\t\tjobDone();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tjobError();\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tfileTimestamps.set(path, entry);\n-\t\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase 1:\n+\t\t\t\t\tunsharedFileTimestamps = this._fileTimestampsOptimization.optimize(\n+\t\t\t\t\t\tcapturedFiles,\n+\t\t\t\t\t\tstartTime,\n+\t\t\t\t\t\tchildren\n+\t\t\t\t\t);\n+\t\t\t\t\tfor (const path of capturedFiles) {\n+\t\t\t\t\t\tconst cache = this._fileTimestamps.get(path);\n+\t\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\t\tif (cache !== \"ignore\") {\n+\t\t\t\t\t\t\t\tfileTimestamps.set(path, cache);\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t});\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t\t`Error snapshotting file timestamp of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tjobError();\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tfileTimestamps.set(path, entry);\n+\t\t\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\t\t\tbreak;\n \t\t\t}\n \t\t}\n \t\tif (directories) {\n \t\t\tconst capturedDirectories = captureNonManaged(\n \t\t\t\tdirectories,\n \t\t\t\tmanagedContexts\n \t\t\t);\n-\t\t\tif (options && options.hash) {\n-\t\t\t\tunsharedContextHashes = this._contextHashesOptimization.optimize(\n-\t\t\t\t\tcapturedDirectories,\n-\t\t\t\t\tundefined,\n-\t\t\t\t\tchildren\n-\t\t\t\t);\n-\t\t\t\tfor (const path of capturedDirectories) {\n-\t\t\t\t\tconst cache = this._contextHashes.get(path);\n-\t\t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\t\tcontextHashes.set(path, cache);\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tjobs++;\n-\t\t\t\t\t\tthis.contextHashQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\tif (this.logger) {\n-\t\t\t\t\t\t\t\t\tthis.logger.debug(\n-\t\t\t\t\t\t\t\t\t\t`Error snapshotting context hash of ${path}: ${err}`\n-\t\t\t\t\t\t\t\t\t);\n+\t\t\tswitch (mode) {\n+\t\t\t\tcase 3:\n+\t\t\t\t\tunsharedContextTshs = this._contextTshsOptimization.optimize(\n+\t\t\t\t\t\tcapturedDirectories,\n+\t\t\t\t\t\tundefined,\n+\t\t\t\t\t\tchildren\n+\t\t\t\t\t);\n+\t\t\t\t\tfor (const path of capturedDirectories) {\n+\t\t\t\t\t\tconst cache = this._contextTshs.get(path);\n+\t\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\t\tcontextTshs.set(path, cache);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\t\tthis._getContextTimestampAndHash(path, (err, entry) => {\n+\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t\t`Error snapshotting context timestamp hash combination of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tjobError();\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tcontextTshs.set(path, entry);\n+\t\t\t\t\t\t\t\t\tjobDone();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tjobError();\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tcontextHashes.set(path, entry);\n-\t\t\t\t\t\t\t\tjobDone();\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tunsharedContextTimestamps = this._contextTimestampsOptimization.optimize(\n-\t\t\t\t\tcapturedDirectories,\n-\t\t\t\t\tstartTime,\n-\t\t\t\t\tchildren\n-\t\t\t\t);\n-\t\t\t\tfor (const path of capturedDirectories) {\n-\t\t\t\t\tconst cache = this._contextTimestamps.get(path);\n-\t\t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\t\tif (cache !== \"ignore\") {\n-\t\t\t\t\t\t\tcontextTimestamps.set(path, cache);\n+\t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tjobs++;\n-\t\t\t\t\t\tthis.contextTimestampQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\tif (this.logger) {\n-\t\t\t\t\t\t\t\t\tthis.logger.debug(\n-\t\t\t\t\t\t\t\t\t\t`Error snapshotting context timestamp of ${path}: ${err}`\n-\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase 2:\n+\t\t\t\t\tunsharedContextHashes = this._contextHashesOptimization.optimize(\n+\t\t\t\t\t\tcapturedDirectories,\n+\t\t\t\t\t\tundefined,\n+\t\t\t\t\t\tchildren\n+\t\t\t\t\t);\n+\t\t\t\t\tfor (const path of capturedDirectories) {\n+\t\t\t\t\t\tconst cache = this._contextHashes.get(path);\n+\t\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\t\tcontextHashes.set(path, cache);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\t\tthis.contextHashQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t\t`Error snapshotting context hash of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tjobError();\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tcontextHashes.set(path, entry);\n+\t\t\t\t\t\t\t\t\tjobDone();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tjobError();\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tcontextTimestamps.set(path, entry);\n-\t\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase 1:\n+\t\t\t\t\tunsharedContextTimestamps = this._contextTimestampsOptimization.optimize(\n+\t\t\t\t\t\tcapturedDirectories,\n+\t\t\t\t\t\tstartTime,\n+\t\t\t\t\t\tchildren\n+\t\t\t\t\t);\n+\t\t\t\t\tfor (const path of capturedDirectories) {\n+\t\t\t\t\t\tconst cache = this._contextTimestamps.get(path);\n+\t\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\t\tif (cache !== \"ignore\") {\n+\t\t\t\t\t\t\t\tcontextTimestamps.set(path, cache);\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t});\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\t\tthis.contextTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t\t`Error snapshotting context timestamp of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tjobError();\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tcontextTimestamps.set(path, entry);\n+\t\t\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\t\t\tbreak;\n \t\t\t}\n \t\t}\n \t\tif (missing) {\n@@ -1683,48 +1831,67 @@ class FileSystemInfo {\n \t * @returns {Snapshot} merged snapshot\n \t */\n \tmergeSnapshots(snapshot1, snapshot2) {\n-\t\t/** @type {Snapshot} */\n-\t\tconst snapshot = {};\n-\t\tif (snapshot1.startTime && snapshot2.startTime)\n-\t\t\tsnapshot.startTime = Math.min(snapshot1.startTime, snapshot2.startTime);\n-\t\telse if (snapshot2.startTime) snapshot.startTime = snapshot2.startTime;\n-\t\telse if (snapshot1.startTime) snapshot.startTime = snapshot1.startTime;\n-\t\tif (snapshot1.fileTimestamps || snapshot2.fileTimestamps) {\n-\t\t\tsnapshot.fileTimestamps = mergeMaps(\n-\t\t\t\tsnapshot1.fileTimestamps,\n-\t\t\t\tsnapshot2.fileTimestamps\n+\t\tconst snapshot = new Snapshot();\n+\t\tif (snapshot1.hasStartTime() && snapshot2.hasStartTime())\n+\t\t\tsnapshot.setStartTime(Math.min(snapshot1.startTime, snapshot2.startTime));\n+\t\telse if (snapshot2.hasStartTime()) snapshot.startTime = snapshot2.startTime;\n+\t\telse if (snapshot1.hasStartTime()) snapshot.startTime = snapshot1.startTime;\n+\t\tif (snapshot1.hasFileTimestamps() || snapshot2.hasFileTimestamps()) {\n+\t\t\tsnapshot.setFileTimestamps(\n+\t\t\t\tmergeMaps(snapshot1.fileTimestamps, snapshot2.fileTimestamps)\n+\t\t\t);\n+\t\t}\n+\t\tif (snapshot1.hasFileHashes() || snapshot2.hasFileHashes()) {\n+\t\t\tsnapshot.setFileHashes(\n+\t\t\t\tmergeMaps(snapshot1.fileHashes, snapshot2.fileHashes)\n+\t\t\t);\n+\t\t}\n+\t\tif (snapshot1.hasFileTshs() || snapshot2.hasFileTshs()) {\n+\t\t\tsnapshot.setFileTshs(mergeMaps(snapshot1.fileTshs, snapshot2.fileTshs));\n+\t\t}\n+\t\tif (snapshot1.hasContextTimestamps() || snapshot2.hasContextTimestamps()) {\n+\t\t\tsnapshot.setContextTimestamps(\n+\t\t\t\tmergeMaps(snapshot1.contextTimestamps, snapshot2.contextTimestamps)\n+\t\t\t);\n+\t\t}\n+\t\tif (snapshot1.hasContextHashes() || snapshot2.hasContextHashes()) {\n+\t\t\tsnapshot.setContextHashes(\n+\t\t\t\tmergeMaps(snapshot1.contextHashes, snapshot2.contextHashes)\n \t\t\t);\n \t\t}\n-\t\tif (snapshot1.fileHashes || snapshot2.fileHashes) {\n-\t\t\tsnapshot.fileHashes = mergeMaps(\n-\t\t\t\tsnapshot1.fileHashes,\n-\t\t\t\tsnapshot2.fileHashes\n+\t\tif (snapshot1.hasContextTshs() || snapshot2.hasContextTshs()) {\n+\t\t\tsnapshot.setContextTshs(\n+\t\t\t\tmergeMaps(snapshot1.contextTshs, snapshot2.contextTshs)\n \t\t\t);\n \t\t}\n-\t\tif (snapshot1.contextTimestamps || snapshot2.contextTimestamps) {\n-\t\t\tsnapshot.contextTimestamps = mergeMaps(\n-\t\t\t\tsnapshot1.contextTimestamps,\n-\t\t\t\tsnapshot2.contextTimestamps\n+\t\tif (snapshot1.hasMissingExistence() || snapshot2.hasMissingExistence()) {\n+\t\t\tsnapshot.setMissingExistence(\n+\t\t\t\tmergeMaps(snapshot1.missingExistence, snapshot2.missingExistence)\n \t\t\t);\n \t\t}\n-\t\tif (snapshot1.contextHashes || snapshot2.contextHashes) {\n-\t\t\tsnapshot.contextHashes = mergeMaps(\n-\t\t\t\tsnapshot1.contextHashes,\n-\t\t\t\tsnapshot2.contextHashes\n+\t\tif (snapshot1.hasManagedItemInfo() || snapshot2.hasManagedItemInfo()) {\n+\t\t\tsnapshot.setManagedItemInfo(\n+\t\t\t\tmergeMaps(snapshot1.managedItemInfo, snapshot2.managedItemInfo)\n \t\t\t);\n \t\t}\n-\t\tif (snapshot1.missingExistence || snapshot2.missingExistence) {\n-\t\t\tsnapshot.missingExistence = mergeMaps(\n-\t\t\t\tsnapshot1.missingExistence,\n-\t\t\t\tsnapshot2.missingExistence\n+\t\tif (snapshot1.hasManagedFiles() || snapshot2.hasManagedFiles()) {\n+\t\t\tsnapshot.setManagedFiles(\n+\t\t\t\tmergeSets(snapshot1.managedFiles, snapshot2.managedFiles)\n \t\t\t);\n \t\t}\n-\t\tif (snapshot1.managedItemInfo || snapshot2.managedItemInfo) {\n-\t\t\tsnapshot.managedItemInfo = mergeMaps(\n-\t\t\t\tsnapshot1.managedItemInfo,\n-\t\t\t\tsnapshot2.managedItemInfo\n+\t\tif (snapshot1.hasManagedContexts() || snapshot2.hasManagedContexts()) {\n+\t\t\tsnapshot.setManagedContexts(\n+\t\t\t\tmergeSets(snapshot1.managedContexts, snapshot2.managedContexts)\n \t\t\t);\n \t\t}\n+\t\tif (snapshot1.hasManagedMissing() || snapshot2.hasManagedMissing()) {\n+\t\t\tsnapshot.setManagedMissing(\n+\t\t\t\tmergeSets(snapshot1.managedMissing, snapshot2.managedMissing)\n+\t\t\t);\n+\t\t}\n+\t\tif (snapshot1.hasChildren() || snapshot2.hasChildren()) {\n+\t\t\tsnapshot.setChildren(mergeSets(snapshot1.children, snapshot2.children));\n+\t\t}\n \t\tif (\n \t\t\tthis._snapshotCache.get(snapshot1) === true &&\n \t\t\tthis._snapshotCache.get(snapshot2) === true\n@@ -1826,14 +1993,15 @@ class FileSystemInfo {\n \t\t * @param {string} path file path\n \t\t * @param {FileSystemInfoEntry} current current entry\n \t\t * @param {FileSystemInfoEntry} snap entry from snapshot\n+\t\t * @param {boolean} log log reason\n \t\t * @returns {boolean} true, if ok\n \t\t */\n-\t\tconst checkFile = (path, current, snap) => {\n+\t\tconst checkFile = (path, current, snap, log = true) => {\n \t\t\tif (current === snap) return true;\n \t\t\tif (!current !== !snap) {\n \t\t\t\t// If existence of item differs\n \t\t\t\t// it's invalid\n-\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\tif (log && this._remainingLogs > 0) {\n \t\t\t\t\tthis._log(\n \t\t\t\t\t\tpath,\n \t\t\t\t\t\tcurrent ? \"it didn't exist before\" : \"it does no longer exist\"\n@@ -1846,7 +2014,7 @@ class FileSystemInfo {\n \t\t\t\tif (typeof startTime === \"number\" && current.safeTime > startTime) {\n \t\t\t\t\t// If a change happened after starting reading the item\n \t\t\t\t\t// this may no longer be valid\n-\t\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tif (log && this._remainingLogs > 0) {\n \t\t\t\t\t\tthis._log(\n \t\t\t\t\t\t\tpath,\n \t\t\t\t\t\t\t`it may have changed (%d) after the start time of the snapshot (%d)`,\n@@ -1862,7 +2030,7 @@ class FileSystemInfo {\n \t\t\t\t) {\n \t\t\t\t\t// If we have a timestamp (it was a file or symlink) and it differs from current timestamp\n \t\t\t\t\t// it's invalid\n-\t\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tif (log && this._remainingLogs > 0) {\n \t\t\t\t\t\tthis._log(\n \t\t\t\t\t\t\tpath,\n \t\t\t\t\t\t\t`timestamps differ (%d != %d)`,\n@@ -1878,7 +2046,7 @@ class FileSystemInfo {\n \t\t\t\t) {\n \t\t\t\t\t// If we have a timestampHash (it was a directory) and it differs from current timestampHash\n \t\t\t\t\t// it's invalid\n-\t\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tif (log && this._remainingLogs > 0) {\n \t\t\t\t\t\tthis._log(\n \t\t\t\t\t\t\tpath,\n \t\t\t\t\t\t\t`timestamps hashes differ (%s != %s)`,\n@@ -1940,26 +2108,54 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\tconst processFileHashSnapshot = (path, hash) => {\n+\t\t\tconst cache = this._fileHashes.get(path);\n+\t\t\tif (cache !== undefined) {\n+\t\t\t\tif (cache !== \"ignore\" && !checkHash(path, cache, hash)) {\n+\t\t\t\t\tinvalid();\n+\t\t\t\t\treturn;\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tjobs++;\n+\t\t\t\tthis.fileHashQueue.add(path, (err, entry) => {\n+\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\tif (!checkHash(path, entry, hash)) {\n+\t\t\t\t\t\tinvalid();\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t}\n+\t\t};\n \t\tif (snapshot.hasFileHashes()) {\n \t\t\tconst { fileHashes } = snapshot;\n \t\t\tthis._statTestedEntries += fileHashes.size;\n \t\t\tfor (const [path, hash] of fileHashes) {\n-\t\t\t\tconst cache = this._fileHashes.get(path);\n-\t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (cache !== \"ignore\" && !checkHash(path, cache, hash)) {\n-\t\t\t\t\t\tinvalid();\n-\t\t\t\t\t\treturn;\n-\t\t\t\t\t}\n+\t\t\t\tprocessFileHashSnapshot(path, hash);\n+\t\t\t}\n+\t\t}\n+\t\tif (snapshot.hasFileTshs()) {\n+\t\t\tconst { fileTshs } = snapshot;\n+\t\t\tthis._statTestedEntries += fileTshs.size;\n+\t\t\tfor (const [path, tsh] of fileTshs) {\n+\t\t\t\tif (typeof tsh === \"string\") {\n+\t\t\t\t\tprocessFileHashSnapshot(path, tsh);\n \t\t\t\t} else {\n-\t\t\t\t\tjobs++;\n-\t\t\t\t\tthis.fileHashQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n-\t\t\t\t\t\tif (!checkHash(path, entry, hash)) {\n-\t\t\t\t\t\t\tinvalid();\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\tconst cache = this._fileTimestamps.get(path);\n+\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\tif (cache === \"ignore\" || !checkFile(path, cache, tsh, false)) {\n+\t\t\t\t\t\t\tprocessFileHashSnapshot(path, tsh.hash);\n \t\t\t\t\t\t}\n-\t\t\t\t\t});\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\t\tif (!checkFile(path, entry, tsh, false)) {\n+\t\t\t\t\t\t\t\tprocessFileHashSnapshot(path, tsh.hash);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -1986,26 +2182,54 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\tconst processContextHashSnapshot = (path, hash) => {\n+\t\t\tconst cache = this._contextHashes.get(path);\n+\t\t\tif (cache !== undefined) {\n+\t\t\t\tif (cache !== \"ignore\" && !checkHash(path, cache, hash)) {\n+\t\t\t\t\tinvalid();\n+\t\t\t\t\treturn;\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tjobs++;\n+\t\t\t\tthis.contextHashQueue.add(path, (err, entry) => {\n+\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\tif (!checkHash(path, entry, hash)) {\n+\t\t\t\t\t\tinvalid();\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t}\n+\t\t};\n \t\tif (snapshot.hasContextHashes()) {\n \t\t\tconst { contextHashes } = snapshot;\n \t\t\tthis._statTestedEntries += contextHashes.size;\n \t\t\tfor (const [path, hash] of contextHashes) {\n-\t\t\t\tconst cache = this._contextHashes.get(path);\n-\t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (cache !== \"ignore\" && !checkHash(path, cache, hash)) {\n-\t\t\t\t\t\tinvalid();\n-\t\t\t\t\t\treturn;\n-\t\t\t\t\t}\n+\t\t\t\tprocessContextHashSnapshot(path, hash);\n+\t\t\t}\n+\t\t}\n+\t\tif (snapshot.hasContextTshs()) {\n+\t\t\tconst { contextTshs } = snapshot;\n+\t\t\tthis._statTestedEntries += contextTshs.size;\n+\t\t\tfor (const [path, tsh] of contextTshs) {\n+\t\t\t\tif (typeof tsh === \"string\") {\n+\t\t\t\t\tprocessContextHashSnapshot(path, tsh);\n \t\t\t\t} else {\n-\t\t\t\t\tjobs++;\n-\t\t\t\t\tthis.contextHashQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n-\t\t\t\t\t\tif (!checkHash(path, entry, hash)) {\n-\t\t\t\t\t\t\tinvalid();\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\tconst cache = this._contextTimestamps.get(path);\n+\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\tif (cache === \"ignore\" || !checkFile(path, cache, tsh, false)) {\n+\t\t\t\t\t\t\tprocessContextHashSnapshot(path, tsh.hash);\n \t\t\t\t\t\t}\n-\t\t\t\t\t});\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\tthis.contextTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\t\tif (!checkFile(path, entry, tsh, false)) {\n+\t\t\t\t\t\t\t\tprocessContextHashSnapshot(path, tsh.hash);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -2130,6 +2354,49 @@ class FileSystemInfo {\n \t\t});\n \t}\n \n+\t_getFileTimestampAndHash(path, callback) {\n+\t\tconst continueWithHash = hash => {\n+\t\t\tconst cache = this._fileTimestamps.get(path);\n+\t\t\tif (cache !== undefined) {\n+\t\t\t\tif (cache !== \"ignore\") {\n+\t\t\t\t\tconst result = {\n+\t\t\t\t\t\t...cache,\n+\t\t\t\t\t\thash\n+\t\t\t\t\t};\n+\t\t\t\t\tthis._fileTshs.set(path, result);\n+\t\t\t\t\treturn callback(null, result);\n+\t\t\t\t} else {\n+\t\t\t\t\tthis._fileTshs.set(path, hash);\n+\t\t\t\t\treturn callback(null, hash);\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\tif (err) {\n+\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t}\n+\t\t\t\t\tconst result = {\n+\t\t\t\t\t\t...entry,\n+\t\t\t\t\t\thash\n+\t\t\t\t\t};\n+\t\t\t\t\tthis._fileTshs.set(path, result);\n+\t\t\t\t\treturn callback(null, result);\n+\t\t\t\t});\n+\t\t\t}\n+\t\t};\n+\n+\t\tconst cache = this._fileHashes.get(path);\n+\t\tif (cache !== undefined) {\n+\t\t\tcontinueWithHash(cache);\n+\t\t} else {\n+\t\t\tthis.fileHashQueue.add(path, (err, entry) => {\n+\t\t\t\tif (err) {\n+\t\t\t\t\treturn callback(err);\n+\t\t\t\t}\n+\t\t\t\tcontinueWithHash(entry);\n+\t\t\t});\n+\t\t}\n+\t}\n+\n \t_readContextTimestamp(path, callback) {\n \t\tthis.fs.readdir(path, (err, files) => {\n \t\t\tif (err) {\n@@ -2296,6 +2563,49 @@ class FileSystemInfo {\n \t\t});\n \t}\n \n+\t_getContextTimestampAndHash(path, callback) {\n+\t\tconst continueWithHash = hash => {\n+\t\t\tconst cache = this._contextTimestamps.get(path);\n+\t\t\tif (cache !== undefined) {\n+\t\t\t\tif (cache !== \"ignore\") {\n+\t\t\t\t\tconst result = {\n+\t\t\t\t\t\t...cache,\n+\t\t\t\t\t\thash\n+\t\t\t\t\t};\n+\t\t\t\t\tthis._contextTshs.set(path, result);\n+\t\t\t\t\treturn callback(null, result);\n+\t\t\t\t} else {\n+\t\t\t\t\tthis._contextTshs.set(path, hash);\n+\t\t\t\t\treturn callback(null, hash);\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tthis.contextTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\tif (err) {\n+\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t}\n+\t\t\t\t\tconst result = {\n+\t\t\t\t\t\t...entry,\n+\t\t\t\t\t\thash\n+\t\t\t\t\t};\n+\t\t\t\t\tthis._contextTshs.set(path, result);\n+\t\t\t\t\treturn callback(null, result);\n+\t\t\t\t});\n+\t\t\t}\n+\t\t};\n+\n+\t\tconst cache = this._contextHashes.get(path);\n+\t\tif (cache !== undefined) {\n+\t\t\tcontinueWithHash(cache);\n+\t\t} else {\n+\t\t\tthis.contextHashQueue.add(path, (err, entry) => {\n+\t\t\t\tif (err) {\n+\t\t\t\t\treturn callback(err);\n+\t\t\t\t}\n+\t\t\t\tcontinueWithHash(entry);\n+\t\t\t});\n+\t\t}\n+\t}\n+\n \t_getManagedItemDirectoryInfo(path, callback) {\n \t\tthis.fs.readdir(path, (err, elements) => {\n \t\t\tif (err) {"
      },
      {
        "sha": "57a03b3c4790d341373c8c13f255028717dafc47",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -804,7 +804,8 @@ class NormalModule extends Module {\n \t\t\t};\n \n \t\t\tconst handleBuildDone = () => {\n-\t\t\t\tif (!this.buildInfo.cacheable) {\n+\t\t\t\tconst snapshotOptions = compilation.options.snapshot.module;\n+\t\t\t\tif (!this.buildInfo.cacheable || !snapshotOptions) {\n \t\t\t\t\treturn callback();\n \t\t\t\t}\n \t\t\t\t// convert file/context/missingDependencies into filesystem snapshot\n@@ -813,7 +814,7 @@ class NormalModule extends Module {\n \t\t\t\t\tthis.buildInfo.fileDependencies,\n \t\t\t\t\tthis.buildInfo.contextDependencies,\n \t\t\t\t\tthis.buildInfo.missingDependencies,\n-\t\t\t\t\tnull,\n+\t\t\t\t\tsnapshotOptions,\n \t\t\t\t\t(err, snapshot) => {\n \t\t\t\t\t\tif (err) {\n \t\t\t\t\t\t\tthis.markModuleAsErrored(err);"
      },
      {
        "sha": "2efe97137b6efe7895363512a940517c6fe4b60a",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 7,
        "deletions": 7,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -490,13 +490,14 @@ class WebpackOptionsApply extends OptionsApply {\n \n \t\tnew WarnCaseSensitiveModulesPlugin().apply(compiler);\n \n+\t\tconst AddManagedPathsPlugin = require(\"./cache/AddManagedPathsPlugin\");\n+\t\tnew AddManagedPathsPlugin(\n+\t\t\toptions.snapshot.managedPaths,\n+\t\t\toptions.snapshot.immutablePaths\n+\t\t).apply(compiler);\n+\n \t\tif (options.cache && typeof options.cache === \"object\") {\n \t\t\tconst cacheOptions = options.cache;\n-\t\t\tconst AddManagedPathsPlugin = require(\"./cache/AddManagedPathsPlugin\");\n-\t\t\tnew AddManagedPathsPlugin(\n-\t\t\t\tcacheOptions.managedPaths,\n-\t\t\t\tcacheOptions.immutablePaths\n-\t\t\t).apply(compiler);\n \t\t\tswitch (cacheOptions.type) {\n \t\t\t\tcase \"memory\": {\n \t\t\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n@@ -525,8 +526,7 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\t\t\t\tlogger: compiler.getInfrastructureLogger(\n \t\t\t\t\t\t\t\t\t\t\"webpack.cache.PackFileCacheStrategy\"\n \t\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\t\tmanagedPaths: cacheOptions.managedPaths,\n-\t\t\t\t\t\t\t\t\timmutablePaths: cacheOptions.immutablePaths\n+\t\t\t\t\t\t\t\t\tsnapshot: options.snapshot\n \t\t\t\t\t\t\t\t}),\n \t\t\t\t\t\t\t\tcacheOptions.idleTimeout,\n \t\t\t\t\t\t\t\tcacheOptions.idleTimeoutForInitialStore"
      },
      {
        "sha": "1b355e38acf94d224eced949eb209ce0a941e08b",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 16,
        "deletions": 12,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -13,6 +13,7 @@ const makeSerializable = require(\"../util/makeSerializable\");\n const memorize = require(\"../util/memorize\");\n const { createFileSerializer } = require(\"../util/serialization\");\n \n+/** @typedef {import(\"../../declarations/WebpackOptions\").SnapshotOptions} SnapshotOptions */\n /** @typedef {import(\"../Cache\").Etag} Etag */\n /** @typedef {import(\"../Compiler\")} Compiler */\n /** @typedef {import(\"../FileSystemInfo\").Snapshot} Snapshot */\n@@ -721,8 +722,7 @@ class PackFileCacheStrategy {\n \t * @param {string} options.cacheLocation the location of the cache data\n \t * @param {string} options.version version identifier\n \t * @param {Logger} options.logger a logger\n-\t * @param {Iterable<string>} options.managedPaths paths managed only by package manager\n-\t * @param {Iterable<string>} options.immutablePaths immutable paths\n+\t * @param {SnapshotOptions} options.snapshot options regarding snapshotting\n \t */\n \tconstructor({\n \t\tcompiler,\n@@ -731,20 +731,20 @@ class PackFileCacheStrategy {\n \t\tcacheLocation,\n \t\tversion,\n \t\tlogger,\n-\t\tmanagedPaths,\n-\t\timmutablePaths\n+\t\tsnapshot\n \t}) {\n \t\tthis.fileSerializer = createFileSerializer(fs);\n \t\tthis.fileSystemInfo = new FileSystemInfo(fs, {\n-\t\t\tmanagedPaths,\n-\t\t\timmutablePaths,\n+\t\t\tmanagedPaths: snapshot.managedPaths,\n+\t\t\timmutablePaths: snapshot.immutablePaths,\n \t\t\tlogger: logger.getChildLogger(\"webpack.FileSystemInfo\")\n \t\t});\n \t\tthis.compiler = compiler;\n \t\tthis.context = context;\n \t\tthis.cacheLocation = cacheLocation;\n \t\tthis.version = version;\n \t\tthis.logger = logger;\n+\t\tthis.snapshot = snapshot;\n \t\t/** @type {Set<string>} */\n \t\tthis.buildDependencies = new Set();\n \t\t/** @type {LazySet<string>} */\n@@ -996,17 +996,19 @@ class PackFileCacheStrategy {\n \t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\tthis.resolveResults = resolveResults;\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tif (reportProgress)\n+\t\t\t\t\t\t\t\tif (reportProgress) {\n \t\t\t\t\t\t\t\t\treportProgress(\n \t\t\t\t\t\t\t\t\t\t0.6,\n-\t\t\t\t\t\t\t\t\t\t\"snapshot build dependencies (timestamps)\"\n+\t\t\t\t\t\t\t\t\t\t\"snapshot build dependencies\",\n+\t\t\t\t\t\t\t\t\t\t\"resolving\"\n \t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tthis.fileSystemInfo.createSnapshot(\n \t\t\t\t\t\t\t\t\tundefined,\n \t\t\t\t\t\t\t\t\tresolveDependencies.files,\n \t\t\t\t\t\t\t\t\tresolveDependencies.directories,\n \t\t\t\t\t\t\t\t\tresolveDependencies.missing,\n-\t\t\t\t\t\t\t\t\t{},\n+\t\t\t\t\t\t\t\t\tthis.snapshot.resolveBuildDependencies,\n \t\t\t\t\t\t\t\t\t(err, snapshot) => {\n \t\t\t\t\t\t\t\t\t\tif (err) {\n \t\t\t\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"snapshot build dependencies\");\n@@ -1026,17 +1028,19 @@ class PackFileCacheStrategy {\n \t\t\t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t\t\tthis.resolveBuildDependenciesSnapshot = snapshot;\n \t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\tif (reportProgress)\n+\t\t\t\t\t\t\t\t\t\tif (reportProgress) {\n \t\t\t\t\t\t\t\t\t\t\treportProgress(\n \t\t\t\t\t\t\t\t\t\t\t\t0.7,\n-\t\t\t\t\t\t\t\t\t\t\t\t\"snapshot build dependencies (hashes)\"\n+\t\t\t\t\t\t\t\t\t\t\t\t\"snapshot build dependencies\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\"modules\"\n \t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\tthis.fileSystemInfo.createSnapshot(\n \t\t\t\t\t\t\t\t\t\t\tundefined,\n \t\t\t\t\t\t\t\t\t\t\tfiles,\n \t\t\t\t\t\t\t\t\t\t\tdirectories,\n \t\t\t\t\t\t\t\t\t\t\tmissing,\n-\t\t\t\t\t\t\t\t\t\t\t{ hash: true },\n+\t\t\t\t\t\t\t\t\t\t\tthis.snapshot.buildDependencies,\n \t\t\t\t\t\t\t\t\t\t\t(err, snapshot) => {\n \t\t\t\t\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"snapshot build dependencies\");\n \t\t\t\t\t\t\t\t\t\t\t\tif (err) return reject(err);"
      },
      {
        "sha": "a58dd1e50976830b85b859267edc71cc53c8b446",
        "filename": "lib/cache/ResolverCachePlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fcache%2FResolverCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fcache%2FResolverCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FResolverCachePlugin.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -79,11 +79,13 @@ class ResolverCachePlugin {\n \t\tconst cache = compiler.getCache(\"ResolverCachePlugin\");\n \t\t/** @type {FileSystemInfo} */\n \t\tlet fileSystemInfo;\n+\t\tlet snapshotOptions;\n \t\tlet realResolves = 0;\n \t\tlet cachedResolves = 0;\n \t\tlet cacheInvalidResolves = 0;\n \t\tlet concurrentResolves = 0;\n \t\tcompiler.hooks.thisCompilation.tap(\"ResolverCachePlugin\", compilation => {\n+\t\t\tsnapshotOptions = compilation.options.snapshot.resolve;\n \t\t\tfileSystemInfo = compilation.fileSystemInfo;\n \t\t\tcompilation.hooks.finishModules.tap(\"ResolverCachePlugin\", () => {\n \t\t\t\tif (realResolves + cachedResolves > 0) {\n@@ -151,7 +153,7 @@ class ResolverCachePlugin {\n \t\t\t\t\t\tfileDependencies,\n \t\t\t\t\t\tcontextDependencies,\n \t\t\t\t\t\tmissingDependencies,\n-\t\t\t\t\t\t{ timestamp: true },\n+\t\t\t\t\t\tsnapshotOptions,\n \t\t\t\t\t\t(err, snapshot) => {\n \t\t\t\t\t\t\tif (err) return callback(err);\n \t\t\t\t\t\t\tif (!snapshot) {"
      },
      {
        "sha": "aa2d134c5b19e17425b6c54d7fc981373173475f",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 25,
        "deletions": 2,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -23,6 +23,7 @@ const { cleverMerge } = require(\"../util/cleverMerge\");\n /** @typedef {import(\"../../declarations/WebpackOptions\").Performance} Performance */\n /** @typedef {import(\"../../declarations/WebpackOptions\").ResolveOptions} ResolveOptions */\n /** @typedef {import(\"../../declarations/WebpackOptions\").RuleSetRules} RuleSetRules */\n+/** @typedef {import(\"../../declarations/WebpackOptions\").SnapshotOptions} SnapshotOptions */\n /** @typedef {import(\"../../declarations/WebpackOptions\").Target} Target */\n /** @typedef {import(\"../../declarations/WebpackOptions\").WebpackOptionsNormalized} WebpackOptions */\n \n@@ -148,6 +149,8 @@ const applyWebpackOptionsDefaults = options => {\n \t});\n \tconst cache = !!options.cache;\n \n+\tapplySnapshotDefaults(options.snapshot, { production });\n+\n \tapplyExperimentsDefaults(options.experiments);\n \n \tapplyModuleDefaults(options.module, {\n@@ -267,7 +270,16 @@ const applyCacheDefaults = (cache, { name, mode }) => {\n \t\t\t]);\n \t\t\tbreak;\n \t}\n-\tA(cache, \"managedPaths\", () => {\n+};\n+\n+/**\n+ * @param {SnapshotOptions} snapshot options\n+ * @param {Object} options options\n+ * @param {boolean} options.production is production\n+ * @returns {void}\n+ */\n+const applySnapshotDefaults = (snapshot, { production }) => {\n+\tA(snapshot, \"managedPaths\", () => {\n \t\tif (process.versions.pnp === \"3\") {\n \t\t\tconst match = /^(.+?)[\\\\/]cache[\\\\/]watchpack-npm-[^\\\\/]+\\.zip[\\\\/]node_modules[\\\\/]/.exec(\n \t\t\t\trequire.resolve(\"watchpack\")\n@@ -286,7 +298,7 @@ const applyCacheDefaults = (cache, { name, mode }) => {\n \t\t}\n \t\treturn [];\n \t});\n-\tA(cache, \"immutablePaths\", () => {\n+\tA(snapshot, \"immutablePaths\", () => {\n \t\tif (process.versions.pnp === \"1\") {\n \t\t\tconst match = /^(.+?[\\\\/]v4)[\\\\/]npm-watchpack-[^\\\\/]+-[\\da-f]{40}[\\\\/]node_modules[\\\\/]/.exec(\n \t\t\t\trequire.resolve(\"watchpack\")\n@@ -304,6 +316,17 @@ const applyCacheDefaults = (cache, { name, mode }) => {\n \t\t}\n \t\treturn [];\n \t});\n+\tF(snapshot, \"resolveBuildDependencies\", () => ({\n+\t\ttimestamp: true,\n+\t\thash: true\n+\t}));\n+\tF(snapshot, \"buildDependencies\", () => ({ timestamp: true, hash: true }));\n+\tF(snapshot, \"module\", () =>\n+\t\tproduction ? { timestamp: true, hash: true } : { timestamp: true }\n+\t);\n+\tF(snapshot, \"resolve\", () =>\n+\t\tproduction ? { timestamp: true, hash: true } : { timestamp: true }\n+\t);\n };\n \n /**"
      },
      {
        "sha": "2f53bda33f35a6355c14f17cc5289666ecb10b36",
        "filename": "lib/config/normalization.js",
        "status": "modified",
        "additions": 27,
        "deletions": 9,
        "changes": 36,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fconfig%2Fnormalization.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2Fconfig%2Fnormalization.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fnormalization.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -115,22 +115,14 @@ const getNormalizedWebpackOptions = config => {\n \t\t\t\t\t\thashAlgorithm: cache.hashAlgorithm,\n \t\t\t\t\t\tidleTimeout: cache.idleTimeout,\n \t\t\t\t\t\tidleTimeoutForInitialStore: cache.idleTimeoutForInitialStore,\n-\t\t\t\t\t\timmutablePaths: optionalNestedArray(cache.immutablePaths, p => [\n-\t\t\t\t\t\t\t...p\n-\t\t\t\t\t\t]),\n-\t\t\t\t\t\tmanagedPaths: optionalNestedArray(cache.managedPaths, p => [...p]),\n \t\t\t\t\t\tname: cache.name,\n \t\t\t\t\t\tstore: cache.store,\n \t\t\t\t\t\tversion: cache.version\n \t\t\t\t\t};\n \t\t\t\tcase undefined:\n \t\t\t\tcase \"memory\":\n \t\t\t\t\treturn {\n-\t\t\t\t\t\ttype: \"memory\",\n-\t\t\t\t\t\timmutablePaths: optionalNestedArray(cache.immutablePaths, p => [\n-\t\t\t\t\t\t\t...p\n-\t\t\t\t\t\t]),\n-\t\t\t\t\t\tmanagedPaths: optionalNestedArray(cache.managedPaths, p => [...p])\n+\t\t\t\t\t\ttype: \"memory\"\n \t\t\t\t\t};\n \t\t\t\tdefault:\n \t\t\t\t\t// @ts-expect-error Property 'type' does not exist on type 'never'. ts(2339)\n@@ -307,6 +299,32 @@ const getNormalizedWebpackOptions = config => {\n \t\tresolveLoader: nestedConfig(config.resolveLoader, resolve => ({\n \t\t\t...resolve\n \t\t})),\n+\t\tsnapshot: nestedConfig(config.snapshot, snapshot => ({\n+\t\t\tresolveBuildDependencies: optionalNestedConfig(\n+\t\t\t\tsnapshot.resolveBuildDependencies,\n+\t\t\t\tresolveBuildDependencies => ({\n+\t\t\t\t\ttimestamp: resolveBuildDependencies.timestamp,\n+\t\t\t\t\thash: resolveBuildDependencies.hash\n+\t\t\t\t})\n+\t\t\t),\n+\t\t\tbuildDependencies: optionalNestedConfig(\n+\t\t\t\tsnapshot.buildDependencies,\n+\t\t\t\tbuildDependencies => ({\n+\t\t\t\t\ttimestamp: buildDependencies.timestamp,\n+\t\t\t\t\thash: buildDependencies.hash\n+\t\t\t\t})\n+\t\t\t),\n+\t\t\tresolve: optionalNestedConfig(snapshot.resolve, resolve => ({\n+\t\t\t\ttimestamp: resolve.timestamp,\n+\t\t\t\thash: resolve.hash\n+\t\t\t})),\n+\t\t\tmodule: optionalNestedConfig(snapshot.module, module => ({\n+\t\t\t\ttimestamp: module.timestamp,\n+\t\t\t\thash: module.hash\n+\t\t\t})),\n+\t\t\timmutablePaths: optionalNestedArray(snapshot.immutablePaths, p => [...p]),\n+\t\t\tmanagedPaths: optionalNestedArray(snapshot.managedPaths, p => [...p])\n+\t\t})),\n \t\tstats: nestedConfig(config.stats, stats => {\n \t\t\tif (stats === false) {\n \t\t\t\treturn {"
      },
      {
        "sha": "424d18652001193192daece7f60462dc2ae7ca8a",
        "filename": "lib/validateSchema.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FvalidateSchema.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/lib%2FvalidateSchema.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FvalidateSchema.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -23,6 +23,8 @@ const DID_YOU_MEAN = {\n \tpathinfo: \"output.pathinfo\",\n \tpathInfo: \"output.pathinfo\",\n \tsplitChunks: \"optimization.splitChunks\",\n+\timmutablePaths: \"snapshot.immutablePaths\",\n+\tmanagedPaths: \"snapshot.managedPaths\",\n \thashedModuleIds:\n \t\t'optimization.moduleIds: \"hashed\" (BREAKING CHANGE since webpack 5)',\n \tnamedChunks:"
      },
      {
        "sha": "8e99b3fe1fbd91d886827ae461ba443fe6ccc83c",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 94,
        "deletions": 20,
        "changes": 114,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -854,26 +854,6 @@\n       \"type\": \"object\",\n       \"additionalProperties\": false,\n       \"properties\": {\n-        \"immutablePaths\": {\n-          \"description\": \"List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\",\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"A path to a immutable directory (usually a package manager cache directory).\",\n-            \"type\": \"string\",\n-            \"absolutePath\": true,\n-            \"minLength\": 1\n-          }\n-        },\n-        \"managedPaths\": {\n-          \"description\": \"List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\",\n-          \"type\": \"array\",\n-          \"items\": {\n-            \"description\": \"A path to a managed directory (usually a node_modules directory).\",\n-            \"type\": \"string\",\n-            \"absolutePath\": true,\n-            \"minLength\": 1\n-          }\n-        },\n         \"type\": {\n           \"description\": \"In memory caching.\",\n           \"enum\": [\"memory\"]\n@@ -2802,6 +2782,93 @@\n       \"description\": \"This option enables loading async chunks via a custom script type, such as script type=\\\"module\\\".\",\n       \"enum\": [false, \"text/javascript\", \"module\"]\n     },\n+    \"SnapshotOptions\": {\n+      \"description\": \"Options affecting how file system snapshots are created and validated.\",\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"buildDependencies\": {\n+          \"description\": \"Options for snapshotting build dependencies to determine if the whole cache need to be invalidated.\",\n+          \"type\": \"object\",\n+          \"additionalProperties\": false,\n+          \"properties\": {\n+            \"hash\": {\n+              \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            },\n+            \"timestamp\": {\n+              \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            }\n+          }\n+        },\n+        \"immutablePaths\": {\n+          \"description\": \"List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\",\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"A path to a immutable directory (usually a package manager cache directory).\",\n+            \"type\": \"string\",\n+            \"absolutePath\": true,\n+            \"minLength\": 1\n+          }\n+        },\n+        \"managedPaths\": {\n+          \"description\": \"List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\",\n+          \"type\": \"array\",\n+          \"items\": {\n+            \"description\": \"A path to a managed directory (usually a node_modules directory).\",\n+            \"type\": \"string\",\n+            \"absolutePath\": true,\n+            \"minLength\": 1\n+          }\n+        },\n+        \"module\": {\n+          \"description\": \"Options for snapshotting dependencies of modules to determine if they need to be built again.\",\n+          \"type\": \"object\",\n+          \"additionalProperties\": false,\n+          \"properties\": {\n+            \"hash\": {\n+              \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            },\n+            \"timestamp\": {\n+              \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            }\n+          }\n+        },\n+        \"resolve\": {\n+          \"description\": \"Options for snapshotting dependencies of request resolving to determine if requests need to be re-resolved.\",\n+          \"type\": \"object\",\n+          \"additionalProperties\": false,\n+          \"properties\": {\n+            \"hash\": {\n+              \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            },\n+            \"timestamp\": {\n+              \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            }\n+          }\n+        },\n+        \"resolveBuildDependencies\": {\n+          \"description\": \"Options for snapshotting the resolving of build dependencies to determine if the build dependencies need to be re-resolved.\",\n+          \"type\": \"object\",\n+          \"additionalProperties\": false,\n+          \"properties\": {\n+            \"hash\": {\n+              \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            },\n+            \"timestamp\": {\n+              \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+              \"type\": \"boolean\"\n+            }\n+          }\n+        }\n+      }\n+    },\n     \"SourceMapFilename\": {\n       \"description\": \"The filename of the SourceMaps for the JavaScript files. They are inside the `output.path` directory.\",\n       \"type\": \"string\",\n@@ -3308,6 +3375,9 @@\n         \"resolveLoader\": {\n           \"$ref\": \"#/definitions/ResolveLoader\"\n         },\n+        \"snapshot\": {\n+          \"$ref\": \"#/definitions/SnapshotOptions\"\n+        },\n         \"stats\": {\n           \"$ref\": \"#/definitions/StatsValue\"\n         },\n@@ -3323,6 +3393,7 @@\n       },\n       \"required\": [\n         \"cache\",\n+        \"snapshot\",\n         \"entry\",\n         \"experiments\",\n         \"externals\",\n@@ -3445,6 +3516,9 @@\n     \"resolveLoader\": {\n       \"$ref\": \"#/definitions/ResolveLoader\"\n     },\n+    \"snapshot\": {\n+      \"$ref\": \"#/definitions/SnapshotOptions\"\n+    },\n     \"stats\": {\n       \"$ref\": \"#/definitions/StatsValue\"\n     },"
      },
      {
        "sha": "308260ca862cfee5c19a05c6de47303ee4a8ff3a",
        "filename": "test/ConfigCacheTestCases.test.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FConfigCacheTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FConfigCacheTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FConfigCacheTestCases.test.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -4,7 +4,9 @@ const { describeCases } = require(\"./ConfigTestCases.template\");\n describeCases({\n \tname: \"ConfigCacheTestCases\",\n \tcache: {\n-\t\ttype: \"filesystem\",\n+\t\ttype: \"filesystem\"\n+\t},\n+\tsnapshot: {\n \t\tmanagedPaths: [path.resolve(__dirname, \"../node_modules\")]\n \t}\n });"
      },
      {
        "sha": "819fe9aa54457e1602deee3e2149a1a561406b98",
        "filename": "test/ConfigTestCases.template.js",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FConfigTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FConfigTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FConfigTestCases.template.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -72,6 +72,11 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\t...config.cache\n \t\t\t\t\t\t\t\t\t};\n \t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tif (config.snapshot) {\n+\t\t\t\t\t\t\t\t\toptions.snapshot = {\n+\t\t\t\t\t\t\t\t\t\t...config.snapshot\n+\t\t\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t\ttestConfig = {\n \t\t\t\t\t\t\t\tfindBundle: function (i, options) {"
      },
      {
        "sha": "b6c4bdf0116a67539dffbaf21ef15a23d30bc2e3",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 28,
        "deletions": 12,
        "changes": 40,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -444,6 +444,26 @@ describe(\"Defaults\", () => {\n \t\t      \"index\",\n \t\t    ],\n \t\t  },\n+\t\t  \"snapshot\": Object {\n+\t\t    \"buildDependencies\": Object {\n+\t\t      \"hash\": true,\n+\t\t      \"timestamp\": true,\n+\t\t    },\n+\t\t    \"immutablePaths\": Array [],\n+\t\t    \"managedPaths\": Array [\n+\t\t      \"<cwd>/node_modules\",\n+\t\t    ],\n+\t\t    \"module\": Object {\n+\t\t      \"timestamp\": true,\n+\t\t    },\n+\t\t    \"resolve\": Object {\n+\t\t      \"timestamp\": true,\n+\t\t    },\n+\t\t    \"resolveBuildDependencies\": Object {\n+\t\t      \"hash\": true,\n+\t\t      \"timestamp\": true,\n+\t\t    },\n+\t\t  },\n \t\t  \"stats\": Object {},\n \t\t  \"target\": \"web\",\n \t\t  \"watch\": false,\n@@ -527,6 +547,10 @@ describe(\"Defaults\", () => {\n \t\t+     \"maxAssetSize\": 250000,\n \t\t+     \"maxEntrypointSize\": 250000,\n \t\t+   },\n+\t\t@@ ... @@\n+\t\t+       \"hash\": true,\n+\t\t@@ ... @@\n+\t\t+       \"hash\": true,\n \t`)\n \t);\n \ttest(\"production\", { mode: \"production\" }, e =>\n@@ -585,6 +609,10 @@ describe(\"Defaults\", () => {\n \t\t+     \"maxAssetSize\": 250000,\n \t\t+     \"maxEntrypointSize\": 250000,\n \t\t+   },\n+\t\t@@ ... @@\n+\t\t+       \"hash\": true,\n+\t\t@@ ... @@\n+\t\t+       \"hash\": true,\n \t`)\n \t);\n \ttest(\"development\", { mode: \"development\" }, e =>\n@@ -595,10 +623,6 @@ describe(\"Defaults\", () => {\n \t\t@@ ... @@\n \t\t-   \"cache\": false,\n \t\t+   \"cache\": Object {\n-\t\t+     \"immutablePaths\": Array [],\n-\t\t+     \"managedPaths\": Array [\n-\t\t+       \"<cwd>/node_modules\",\n-\t\t+     ],\n \t\t+     \"type\": \"memory\",\n \t\t+   },\n \t\t@@ ... @@\n@@ -1271,10 +1295,6 @@ describe(\"Defaults\", () => {\n \t\t@@ ... @@\n \t\t-   \"cache\": false,\n \t\t+   \"cache\": Object {\n-\t\t+     \"immutablePaths\": Array [],\n-\t\t+     \"managedPaths\": Array [\n-\t\t+       \"<cwd>/node_modules\",\n-\t\t+     ],\n \t\t+     \"type\": \"memory\",\n \t\t+   },\n \t\t@@ ... @@\n@@ -1306,10 +1326,6 @@ describe(\"Defaults\", () => {\n \t\t+     \"hashAlgorithm\": \"md4\",\n \t\t+     \"idleTimeout\": 60000,\n \t\t+     \"idleTimeoutForInitialStore\": 0,\n-\t\t+     \"immutablePaths\": Array [],\n-\t\t+     \"managedPaths\": Array [\n-\t\t+       \"<cwd>/node_modules\",\n-\t\t+     ],\n \t\t+     \"name\": \"default-none\",\n \t\t+     \"store\": \"pack\",\n \t\t+     \"type\": \"filesystem\","
      },
      {
        "sha": "6599b29dced8838d25018f46b456ee303c779a41",
        "filename": "test/TestCasesCachePack.test.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FTestCasesCachePack.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FTestCasesCachePack.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCasesCachePack.test.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -5,7 +5,9 @@ describe(\"TestCases\", () => {\n \tdescribeCases({\n \t\tname: \"cache pack\",\n \t\tcache: {\n-\t\t\ttype: \"filesystem\",\n+\t\t\ttype: \"filesystem\"\n+\t\t},\n+\t\tsnapshot: {\n \t\t\tmanagedPaths: [path.resolve(__dirname, \"../node_modules\")]\n \t\t},\n \t\toptimization: {"
      },
      {
        "sha": "a4150fc1253f51b44f768377409f4a06cb776f7c",
        "filename": "test/Validation.test.js",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FValidation.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FValidation.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FValidation.test.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -24,7 +24,7 @@ describe(\"Validation\", () => {\n \t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t - configuration should be an object:\n-\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t   -> Options object as provided by the user.\"\n \t`)\n \t);\n@@ -33,7 +33,7 @@ describe(\"Validation\", () => {\n \t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t - configuration should be an object:\n-\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t   -> Options object as provided by the user.\"\n \t`)\n \t);\n@@ -196,7 +196,7 @@ describe(\"Validation\", () => {\n \t\t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t\t - configuration has an unknown property 'postcss'. These properties are valid:\n-\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t\t   -> Options object as provided by the user.\n \t\t\t   For typos: please correct them.\n \t\t\t   For loader options: webpack >= v2.0.0 no longer allows custom properties in configuration.\n@@ -426,7 +426,7 @@ describe(\"Validation\", () => {\n \t\t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t\t - configuration has an unknown property 'debug'. These properties are valid:\n-\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t\t   -> Options object as provided by the user.\n \t\t\t   The 'debug' property was removed in webpack 2.0.0.\n \t\t\t   Loaders should be updated to allow passing this option via loader options in module.rules.\n@@ -482,7 +482,7 @@ describe(\"Validation\", () => {\n \t\t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t\t - configuration[1] should be an object:\n-\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t\t   -> Options object as provided by the user.\"\n \t\t`)\n \t);\n@@ -621,7 +621,7 @@ describe(\"Validation\", () => {\n \t\t\t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t\t - configuration has an unknown property 'rules'. These properties are valid:\n-\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t\t   -> Options object as provided by the user.\n \t\t\t   Did you mean module.rules?\"\n \t\t`)\n@@ -635,7 +635,7 @@ describe(\"Validation\", () => {\n \t\t\t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t\t - configuration has an unknown property 'splitChunks'. These properties are valid:\n-\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t\t   -> Options object as provided by the user.\n \t\t\t   Did you mean optimization.splitChunks?\"\n \t\t`)\n@@ -649,7 +649,7 @@ describe(\"Validation\", () => {\n \t\t\t\texpect(msg).toMatchInlineSnapshot(`\n \t\t\t\"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n \t\t\t - configuration has an unknown property 'noParse'. These properties are valid:\n-\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\n+\t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, externalsType?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, snapshot?, stats?, target?, watch?, watchOptions? }\n \t\t\t   -> Options object as provided by the user.\n \t\t\t   Did you mean module.noParse?\"\n \t\t`)"
      },
      {
        "sha": "db10d264526afda372727152c427aef0463aa18f",
        "filename": "test/__snapshots__/Cli.test.js.snap",
        "status": "modified",
        "additions": 156,
        "deletions": 0,
        "changes": 156,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2F__snapshots__%2FCli.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2F__snapshots__%2FCli.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FCli.test.js.snap?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -3552,6 +3552,162 @@ Object {\n     \"multiple\": false,\n     \"simpleType\": \"boolean\",\n   },\n+  \"snapshot-build-dependencies-hash\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.buildDependencies.hash\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-build-dependencies-timestamp\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.buildDependencies.timestamp\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-immutable-paths\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"A path to a immutable directory (usually a package manager cache directory).\",\n+        \"multiple\": true,\n+        \"path\": \"snapshot.immutablePaths[]\",\n+        \"type\": \"path\",\n+      },\n+    ],\n+    \"description\": \"A path to a immutable directory (usually a package manager cache directory).\",\n+    \"multiple\": true,\n+    \"simpleType\": \"string\",\n+  },\n+  \"snapshot-immutable-paths-reset\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Clear all items provided in configuration. List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.immutablePaths\",\n+        \"type\": \"reset\",\n+      },\n+    ],\n+    \"description\": \"Clear all items provided in configuration. List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-managed-paths\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"A path to a managed directory (usually a node_modules directory).\",\n+        \"multiple\": true,\n+        \"path\": \"snapshot.managedPaths[]\",\n+        \"type\": \"path\",\n+      },\n+    ],\n+    \"description\": \"A path to a managed directory (usually a node_modules directory).\",\n+    \"multiple\": true,\n+    \"simpleType\": \"string\",\n+  },\n+  \"snapshot-managed-paths-reset\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Clear all items provided in configuration. List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.managedPaths\",\n+        \"type\": \"reset\",\n+      },\n+    ],\n+    \"description\": \"Clear all items provided in configuration. List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-module-hash\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.module.hash\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-module-timestamp\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.module.timestamp\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-resolve-build-dependencies-hash\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.resolveBuildDependencies.hash\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-resolve-build-dependencies-timestamp\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.resolveBuildDependencies.timestamp\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-resolve-hash\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.resolve.hash\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use hashes of the content of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n+  \"snapshot-resolve-timestamp\": Object {\n+    \"configs\": Array [\n+      Object {\n+        \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+        \"multiple\": false,\n+        \"path\": \"snapshot.resolve.timestamp\",\n+        \"type\": \"boolean\",\n+      },\n+    ],\n+    \"description\": \"Use timestamps of the files/directories to determine invalidation.\",\n+    \"multiple\": false,\n+    \"simpleType\": \"boolean\",\n+  },\n   \"stats\": Object {\n     \"configs\": Array [\n       Object {"
      },
      {
        "sha": "645f883a002497a946d6a3c5be7a0ee5feeb897e",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 9,
        "deletions": 9,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -1164,9 +1164,9 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n     <CLR=BOLD>0% root snapshot uncached (0 / 0)</CLR>\n     <CLR=BOLD>0% children snapshot uncached (0 / 0)</CLR>\n     <CLR=BOLD>0 entries tested</CLR>\n-    <CLR=BOLD>File info in cache: 1 timestamps 0 hashes</CLR>\n-    <CLR=BOLD>File timestamp snapshot optimization: 0% (0/1) entries shared via 0 shared snapshots (0 times referenced)</CLR>\n-    <CLR=BOLD>Directory info in cache: 0 timestamps 0 hashes</CLR>\n+    <CLR=BOLD>File info in cache: 1 timestamps 1 hashes 1 timestamp hash combinations</CLR>\n+    <CLR=BOLD>File timestamp hash combination snapshot optimization: 0% (0/1) entries shared via 0 shared snapshots (0 times referenced)</CLR>\n+    <CLR=BOLD>Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations</CLR>\n     <CLR=BOLD>Managed items info in cache: 0 items</CLR>\n \"\n `;\n@@ -1973,9 +1973,9 @@ LOG from webpack.FileSystemInfo\n     0% root snapshot uncached (0 / 0)\n     0% children snapshot uncached (0 / 0)\n     0 entries tested\n-    File info in cache: 6 timestamps 0 hashes\n-    File timestamp snapshot optimization: 0% (0/6) entries shared via 0 shared snapshots (0 times referenced)\n-    Directory info in cache: 0 timestamps 0 hashes\n+    File info in cache: 6 timestamps 6 hashes 6 timestamp hash combinations\n+    File timestamp hash combination snapshot optimization: 0% (0/6) entries shared via 0 shared snapshots (0 times referenced)\n+    Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \"\n `;\n@@ -2310,9 +2310,9 @@ LOG from webpack.FileSystemInfo\n     0% root snapshot uncached (0 / 0)\n     0% children snapshot uncached (0 / 0)\n     0 entries tested\n-    File info in cache: 6 timestamps 0 hashes\n-    File timestamp snapshot optimization: 0% (0/6) entries shared via 0 shared snapshots (0 times referenced)\n-    Directory info in cache: 0 timestamps 0 hashes\n+    File info in cache: 6 timestamps 6 hashes 6 timestamp hash combinations\n+    File timestamp hash combination snapshot optimization: 0% (0/6) entries shared via 0 shared snapshots (0 times referenced)\n+    Directory info in cache: 0 timestamps 0 hashes 0 timestamp hash combinations\n     Managed items info in cache: 0 items\n \"\n `;"
      },
      {
        "sha": "59cdbb47480afb800790fc75665835712a556647",
        "filename": "test/fixtures/buildDependencies/run.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2Ffixtures%2FbuildDependencies%2Frun.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2Ffixtures%2FbuildDependencies%2Frun.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Ffixtures%2FbuildDependencies%2Frun.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -31,7 +31,9 @@ webpack(\n \t\t\t\t\t__filename,\n \t\t\t\t\tpath.resolve(__dirname, \"../../../node_modules/.yarn-integrity\")\n \t\t\t\t]\n-\t\t\t},\n+\t\t\t}\n+\t\t},\n+\t\tsnapshot: {\n \t\t\tmanagedPaths: [path.resolve(__dirname, \"../../../node_modules\")]\n \t\t}\n \t},"
      },
      {
        "sha": "10c3ab8899e79f575668d19d7dd0288bc0090b08",
        "filename": "test/watchCases/cache/managedPath/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FwatchCases%2Fcache%2FmanagedPath%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FwatchCases%2Fcache%2FmanagedPath%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2Fwebpack.config.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -4,7 +4,9 @@ const path = require(\"path\");\n module.exports = {\n \tmode: \"development\",\n \tcache: {\n-\t\ttype: \"memory\",\n+\t\ttype: \"memory\"\n+\t},\n+\tsnapshot: {\n \t\tmanagedPaths: [\n \t\t\tpath.resolve(\n \t\t\t\t__dirname,"
      },
      {
        "sha": "49aa73848d391c8994346a5943d6c6d374e53d3d",
        "filename": "test/watchCases/snapshot/unable-to-snapshot/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FwatchCases%2Fsnapshot%2Funable-to-snapshot%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/test%2FwatchCases%2Fsnapshot%2Funable-to-snapshot%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fsnapshot%2Funable-to-snapshot%2Fwebpack.config.js?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -2,7 +2,9 @@ const path = require(\"path\");\n /** @type {function(any, any): import(\"../../../../\").Configuration} */\n module.exports = (env, { srcPath }) => ({\n \tcache: {\n-\t\ttype: \"memory\",\n+\t\ttype: \"memory\"\n+\t},\n+\tsnapshot: {\n \t\tmanagedPaths: [path.resolve(srcPath, \"node_modules\")]\n \t}\n });"
      },
      {
        "sha": "bb0d33c857939df0d27c6c619b5afce642281f34",
        "filename": "types.d.ts",
        "status": "modified",
        "additions": 95,
        "deletions": 12,
        "changes": 107,
        "blob_url": "https://github.com/webpack/webpack/blob/d6e637f33c0193f5517aa41df98993cd5eb09ac9/types.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/d6e637f33c0193f5517aa41df98993cd5eb09ac9/types.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/types.d.ts?ref=d6e637f33c0193f5517aa41df98993cd5eb09ac9",
        "patch": "@@ -1741,6 +1741,11 @@ declare interface Configuration {\n \t */\n \tresolveLoader?: ResolveOptionsWebpackOptions;\n \n+\t/**\n+\t * Options affecting how file system snapshots are created and validated.\n+\t */\n+\tsnapshot?: SnapshotOptions;\n+\n \t/**\n \t * Stats options object or preset name.\n \t */\n@@ -3090,11 +3095,11 @@ declare abstract class FileSystemInfo {\n \t\tmissing: Iterable<string>,\n \t\toptions: {\n \t\t\t/**\n-\t\t\t * should use hash to snapshot\n+\t\t\t * Use hashes of the content of the files/directories to determine invalidation.\n \t\t\t */\n \t\t\thash?: boolean;\n \t\t\t/**\n-\t\t\t * should use timestamp to snapshot\n+\t\t\t * Use timestamps of the files/directories to determine invalidation.\n \t\t\t */\n \t\t\ttimestamp?: boolean;\n \t\t},\n@@ -4236,16 +4241,6 @@ declare interface MapOptions {\n  * Options object for in-memory caching.\n  */\n declare interface MemoryCacheOptions {\n-\t/**\n-\t * List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\n-\t */\n-\timmutablePaths?: string[];\n-\n-\t/**\n-\t * List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\n-\t */\n-\tmanagedPaths?: string[];\n-\n \t/**\n \t * In memory caching.\n \t */\n@@ -7859,8 +7854,10 @@ declare abstract class Snapshot {\n \tstartTime: number;\n \tfileTimestamps: Map<string, FileSystemInfoEntry>;\n \tfileHashes: Map<string, string>;\n+\tfileTshs: Map<string, string | TimestampAndHash>;\n \tcontextTimestamps: Map<string, FileSystemInfoEntry>;\n \tcontextHashes: Map<string, string>;\n+\tcontextTshs: Map<string, string | TimestampAndHash>;\n \tmissingExistence: Map<string, boolean>;\n \tmanagedItemInfo: Map<string, string>;\n \tmanagedFiles: Set<string>;\n@@ -7874,10 +7871,14 @@ declare abstract class Snapshot {\n \tsetFileTimestamps(value?: any): void;\n \thasFileHashes(): boolean;\n \tsetFileHashes(value?: any): void;\n+\thasFileTshs(): boolean;\n+\tsetFileTshs(value?: any): void;\n \thasContextTimestamps(): boolean;\n \tsetContextTimestamps(value?: any): void;\n \thasContextHashes(): boolean;\n \tsetContextHashes(value?: any): void;\n+\thasContextTshs(): boolean;\n+\tsetContextTshs(value?: any): void;\n \thasMissingExistence(): boolean;\n \tsetMissingExistence(value?: any): void;\n \thasManagedItemInfo(): boolean;\n@@ -7897,6 +7898,77 @@ declare abstract class Snapshot {\n \tgetContextIterable(): Iterable<string>;\n \tgetMissingIterable(): Iterable<string>;\n }\n+\n+/**\n+ * Options affecting how file system snapshots are created and validated.\n+ */\n+declare interface SnapshotOptions {\n+\t/**\n+\t * Options for snapshotting build dependencies to determine if the whole cache need to be invalidated.\n+\t */\n+\tbuildDependencies?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+\n+\t/**\n+\t * List of paths that are managed by a package manager and contain a version or hash in its path so all files are immutable.\n+\t */\n+\timmutablePaths?: string[];\n+\n+\t/**\n+\t * List of paths that are managed by a package manager and can be trusted to not be modified otherwise.\n+\t */\n+\tmanagedPaths?: string[];\n+\n+\t/**\n+\t * Options for snapshotting dependencies of modules to determine if they need to be built again.\n+\t */\n+\tmodule?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+\n+\t/**\n+\t * Options for snapshotting dependencies of request resolving to determine if requests need to be re-resolved.\n+\t */\n+\tresolve?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+\n+\t/**\n+\t * Options for snapshotting the resolving of build dependencies to determine if the build dependencies need to be re-resolved.\n+\t */\n+\tresolveBuildDependencies?: {\n+\t\t/**\n+\t\t * Use hashes of the content of the files/directories to determine invalidation.\n+\t\t */\n+\t\thash?: boolean;\n+\t\t/**\n+\t\t * Use timestamps of the files/directories to determine invalidation.\n+\t\t */\n+\t\ttimestamp?: boolean;\n+\t};\n+}\n declare abstract class SortableSet<T> extends Set<T> {\n \t/**\n \t * Sort with a comparer function\n@@ -8507,6 +8579,12 @@ declare class Template {\n \tstatic NUMBER_OF_IDENTIFIER_START_CHARS: number;\n \tstatic NUMBER_OF_IDENTIFIER_CONTINUATION_CHARS: number;\n }\n+declare interface TimestampAndHash {\n+\tsafeTime: number;\n+\ttimestamp?: number;\n+\ttimestampHash?: string;\n+\thash: string;\n+}\n declare const UNDEFINED_MARKER: unique symbol;\n declare interface UpdateHashContextDependency {\n \tchunkGraph: ChunkGraph;\n@@ -8970,6 +9048,11 @@ declare interface WebpackOptionsNormalized {\n \t */\n \tresolveLoader: ResolveOptionsWebpackOptions;\n \n+\t/**\n+\t * Options affecting how file system snapshots are created and validated.\n+\t */\n+\tsnapshot: SnapshotOptions;\n+\n \t/**\n \t * Stats options object or preset name.\n \t */"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/10335",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/10335/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/10335/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/10335/events",
    "html_url": "https://github.com/webpack/webpack/pull/10335",
    "id": 559135669,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzcwMzYwNzI2",
    "number": 10335,
    "title": "Performance improvement",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-02-03T14:54:54Z",
    "updated_at": "2020-02-04T09:02:26Z",
    "closed_at": "2020-02-04T09:02:25Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/10335",
      "html_url": "https://github.com/webpack/webpack/pull/10335",
      "diff_url": "https://github.com/webpack/webpack/pull/10335.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/10335.patch",
      "merged_at": "2020-02-04T09:02:25Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* Snapshots dedupe themselve during capturing\r\n* chunk graph building avoids copying availableModules much longer (more lazy)\r\n* Use bigint for faster chunk key\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/10335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/10335/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "3b7cb96863009b45da39295e44eeff846b5bf6a4",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b",
        "patch": "@@ -1549,6 +1549,10 @@ export interface StatsOptions {\n \t * add the hash of the compilation\n \t */\n \thash?: boolean;\n+\t/**\n+\t * add ids\n+\t */\n+\tids?: boolean;\n \t/**\n \t * add logging output\n \t */"
      },
      {
        "sha": "29abfffd70589ddc909b0cced7b3db21cc4399c4",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 175,
        "deletions": 1,
        "changes": 176,
        "blob_url": "https://github.com/webpack/webpack/blob/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b",
        "patch": "@@ -52,6 +52,15 @@ const INVALID = Symbol(\"invalid\");\n  * @property {Map<string, string>=} contextHashes\n  * @property {Map<string, boolean>=} missingExistance\n  * @property {Map<string, string>=} managedItemInfo\n+ * @property {Set<Snapshot>=} children\n+ */\n+\n+/**\n+ * @typedef {Object} SnapshotOptimizationEntry\n+ * @property {Snapshot} snapshot\n+ * @property {number} shared\n+ * @property {Set<string>} snapshotContent\n+ * @property {Set<SnapshotOptimizationEntry>} children\n  */\n \n /**\n@@ -204,6 +213,8 @@ class FileSystemInfo {\n \t\tthis._loggedPaths = logger ? new Set() : undefined;\n \t\t/** @type {WeakMap<Snapshot, boolean | (function(WebpackError=, boolean=): void)[]>} */\n \t\tthis._snapshotCache = new WeakMap();\n+\t\t/** @type {Map<string, SnapshotOptimizationEntry>} */\n+\t\tthis._snapshotOptimization = new Map();\n \t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | null>} */\n \t\tthis._fileTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n@@ -688,6 +699,11 @@ class FileSystemInfo {\n \t\tconst missingExistance = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tconst managedItemInfo = new Map();\n+\t\t/** @type {Set<Snapshot>} */\n+\t\tconst children = new Set();\n+\n+\t\t/** @type {Set<string>} */\n+\t\tconst unsetOptimizationEntries = new Set();\n \n \t\t/** @type {Set<string>} */\n \t\tconst managedItems = new Set();\n@@ -706,7 +722,17 @@ class FileSystemInfo {\n \t\t\t\t\tsnapshot.missingExistance = missingExistance;\n \t\t\t\tif (managedItemInfo.size !== 0)\n \t\t\t\t\tsnapshot.managedItemInfo = managedItemInfo;\n+\t\t\t\tif (children.size !== 0) snapshot.children = children;\n \t\t\t\tthis._snapshotCache.set(snapshot, true);\n+\t\t\t\tconst optimizationEntry = {\n+\t\t\t\t\tsnapshot,\n+\t\t\t\t\tshared: 0,\n+\t\t\t\t\tsnapshotContent: undefined,\n+\t\t\t\t\tchildren: undefined\n+\t\t\t\t};\n+\t\t\t\tfor (const path of unsetOptimizationEntries) {\n+\t\t\t\t\tthis._snapshotOptimization.set(path, optimizationEntry);\n+\t\t\t\t}\n \t\t\t\tcallback(null, snapshot);\n \t\t\t}\n \t\t};\n@@ -755,6 +781,7 @@ class FileSystemInfo {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else {\n+\t\t\t\tconst capturedFiles = new Set();\n \t\t\t\tfiles: for (const path of files) {\n \t\t\t\t\tfor (const immutablePath of this.immutablePathsWithSlash) {\n \t\t\t\t\t\tif (path.startsWith(immutablePath)) {\n@@ -770,6 +797,123 @@ class FileSystemInfo {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n+\t\t\t\t\tcapturedFiles.add(path);\n+\t\t\t\t}\n+\t\t\t\tconst checkedOptimizationEntries = new Set();\n+\t\t\t\t/**\n+\t\t\t\t * @param {SnapshotOptimizationEntry} entry optimization entry\n+\t\t\t\t * @returns {void}\n+\t\t\t\t */\n+\t\t\t\tconst increaseSharedAndStoreOptimizationEntry = entry => {\n+\t\t\t\t\tif (entry.children !== undefined) {\n+\t\t\t\t\t\tentry.children.forEach(increaseSharedAndStoreOptimizationEntry);\n+\t\t\t\t\t}\n+\t\t\t\t\tentry.shared++;\n+\t\t\t\t\tstoreOptimizationEntry(entry);\n+\t\t\t\t};\n+\t\t\t\t/**\n+\t\t\t\t * @param {SnapshotOptimizationEntry} entry optimization entry\n+\t\t\t\t * @returns {void}\n+\t\t\t\t */\n+\t\t\t\tconst storeOptimizationEntry = entry => {\n+\t\t\t\t\tfor (const path of entry.snapshotContent) {\n+\t\t\t\t\t\tconst old = this._snapshotOptimization.get(path);\n+\t\t\t\t\t\tif (old.shared < entry.shared) {\n+\t\t\t\t\t\t\tthis._snapshotOptimization.set(path, entry);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tcapturedFiles.delete(path);\n+\t\t\t\t\t}\n+\t\t\t\t};\n+\t\t\t\tcapturedFiles: for (const path of capturedFiles) {\n+\t\t\t\t\tconst optimizationEntry = this._snapshotOptimization.get(path);\n+\t\t\t\t\tif (optimizationEntry === undefined) {\n+\t\t\t\t\t\tunsetOptimizationEntries.add(path);\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\t\t\t\t\tif (checkedOptimizationEntries.has(optimizationEntry)) continue;\n+\t\t\t\t\tconst snapshot = optimizationEntry.snapshot;\n+\t\t\t\t\tif (optimizationEntry.shared > 0) {\n+\t\t\t\t\t\t// It's a shared snapshot\n+\t\t\t\t\t\t// We can't change it, so we can only use it when all files match\n+\t\t\t\t\t\tconst nonSharedFiles = new Set();\n+\t\t\t\t\t\tfor (const path of optimizationEntry.snapshotContent) {\n+\t\t\t\t\t\t\tif (!capturedFiles.has(path)) {\n+\t\t\t\t\t\t\t\tif (!snapshot.fileTimestamps.has(path)) {\n+\t\t\t\t\t\t\t\t\t// File is not shared and can't be removed from the snapshot\n+\t\t\t\t\t\t\t\t\t// because it's in a child of the snapshot\n+\t\t\t\t\t\t\t\t\tcheckedOptimizationEntries.add(optimizationEntry);\n+\t\t\t\t\t\t\t\t\tcontinue capturedFiles;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tnonSharedFiles.add(path);\n+\t\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (nonSharedFiles.size === 0) {\n+\t\t\t\t\t\t\t// The complete snapshot is shared\n+\t\t\t\t\t\t\t// add it as child\n+\t\t\t\t\t\t\tchildren.add(snapshot);\n+\t\t\t\t\t\t\tincreaseSharedAndStoreOptimizationEntry(optimizationEntry);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t// Only a part of the snapshot is shared\n+\t\t\t\t\t\t\t// Extract common timestamps from both snapshots\n+\t\t\t\t\t\t\tconst commonMap = new Map();\n+\t\t\t\t\t\t\tfor (const [path, ts] of snapshot.fileTimestamps) {\n+\t\t\t\t\t\t\t\tif (nonSharedFiles.has(path)) continue;\n+\t\t\t\t\t\t\t\tcommonMap.set(path, ts);\n+\t\t\t\t\t\t\t\tsnapshot.fileTimestamps.delete(path);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t// Create and attach snapshot\n+\t\t\t\t\t\t\t/** @type {Snapshot} */\n+\t\t\t\t\t\t\tconst commonSnapshot = { fileTimestamps: commonMap };\n+\t\t\t\t\t\t\tchildren.add(commonSnapshot);\n+\t\t\t\t\t\t\tif (!snapshot.children) snapshot.children = new Set();\n+\t\t\t\t\t\t\tsnapshot.children.add(commonSnapshot);\n+\t\t\t\t\t\t\t// Create optimization entry\n+\t\t\t\t\t\t\tconst newEntry = {\n+\t\t\t\t\t\t\t\tsnapshot: commonSnapshot,\n+\t\t\t\t\t\t\t\tshared: optimizationEntry.shared + 1,\n+\t\t\t\t\t\t\t\tsnapshotContent: new Set(commonMap.keys()),\n+\t\t\t\t\t\t\t\tchildren: undefined\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\tif (optimizationEntry.children === undefined)\n+\t\t\t\t\t\t\t\toptimizationEntry.children = new Set();\n+\t\t\t\t\t\t\toptimizationEntry.children.add(newEntry);\n+\t\t\t\t\t\t\tstoreOptimizationEntry(newEntry);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\t// It's a unshared snapshot\n+\t\t\t\t\t\t// We can extract a common shared snapshot\n+\t\t\t\t\t\t// with all common files\n+\t\t\t\t\t\tconst commonMap = new Map();\n+\t\t\t\t\t\tfor (const path of capturedFiles) {\n+\t\t\t\t\t\t\tconst ts = snapshot.fileTimestamps.get(path);\n+\t\t\t\t\t\t\tif (ts === undefined) continue;\n+\t\t\t\t\t\t\tcommonMap.set(path, ts);\n+\t\t\t\t\t\t\tsnapshot.fileTimestamps.delete(path);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (commonMap.size < 2) {\n+\t\t\t\t\t\t\t// Common part it too small\n+\t\t\t\t\t\t\tcontinue capturedFiles;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t// Create and attach snapshot\n+\t\t\t\t\t\t/** @type {Snapshot} */\n+\t\t\t\t\t\tconst commonSnapshot = { fileTimestamps: commonMap };\n+\t\t\t\t\t\tchildren.add(commonSnapshot);\n+\t\t\t\t\t\tif (!snapshot.children) snapshot.children = new Set();\n+\t\t\t\t\t\tsnapshot.children.add(commonSnapshot);\n+\t\t\t\t\t\t// Remove files from snaphot\n+\t\t\t\t\t\tfor (const path of commonMap.keys())\n+\t\t\t\t\t\t\tsnapshot.fileTimestamps.delete(path);\n+\t\t\t\t\t\t// Create optimization entry\n+\t\t\t\t\t\tstoreOptimizationEntry({\n+\t\t\t\t\t\t\tsnapshot: commonSnapshot,\n+\t\t\t\t\t\t\tshared: 2,\n+\t\t\t\t\t\t\tsnapshotContent: new Set(commonMap.keys()),\n+\t\t\t\t\t\t\tchildren: undefined\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tfor (const path of capturedFiles) {\n \t\t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\t\tif (cache !== undefined) {\n \t\t\t\t\t\tif (cache !== \"ignore\") {\n@@ -1006,6 +1150,10 @@ class FileSystemInfo {\n \t\t\t}\n \t\t\treturn;\n \t\t}\n+\t\tthis._checkSnapshotValidNoCache(snapshot, callback);\n+\t}\n+\n+\t_checkSnapshotValidNoCache(snapshot, callback) {\n \t\tlet callbacks;\n \t\tconst {\n \t\t\tstartTime,\n@@ -1014,7 +1162,8 @@ class FileSystemInfo {\n \t\t\tcontextTimestamps,\n \t\t\tcontextHashes,\n \t\t\tmissingExistance,\n-\t\t\tmanagedItemInfo\n+\t\t\tmanagedItemInfo,\n+\t\t\tchildren\n \t\t} = snapshot;\n \t\tlet jobs = 1;\n \t\tconst jobDone = () => {\n@@ -1142,6 +1291,31 @@ class FileSystemInfo {\n \t\t\t}\n \t\t\treturn true;\n \t\t};\n+\t\tif (children) {\n+\t\t\tconst childCallback = (err, result) => {\n+\t\t\t\tif (err || !result) return invalid();\n+\t\t\t\telse jobDone();\n+\t\t\t};\n+\t\t\tfor (const child of children) {\n+\t\t\t\tconst cache = this._snapshotCache.get(child);\n+\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\t\tif (typeof cache === \"boolean\") {\n+\t\t\t\t\t\t\tif (cache === false) {\n+\t\t\t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tjobs++;\n+\t\t\t\t\t\t\tcache.push(childCallback);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\tjobs++;\n+\t\t\t\t\tthis._checkSnapshotValidNoCache(child, childCallback);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n \t\tif (fileTimestamps) {\n \t\t\tfor (const [path, ts] of fileTimestamps) {\n \t\t\t\tconst cache = this._fileTimestamps.get(path);"
      },
      {
        "sha": "c2f4fe6210671dc49d6b44fe10c16c8d08f327aa",
        "filename": "lib/buildChunkGraph.js",
        "status": "modified",
        "additions": 228,
        "deletions": 137,
        "changes": 365,
        "blob_url": "https://github.com/webpack/webpack/blob/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b",
        "patch": "@@ -29,14 +29,16 @@ const { connectChunkGroupParentAndChild } = require(\"./GraphHelpers\");\n  * @property {ChunkGroupInfo} chunkGroupInfo\n  */\n \n+/** @typedef {Set<Module> & { plus: Set<Module> }} ModuleSetPlus */\n+\n /**\n  * @typedef {Object} ChunkGroupInfo\n  * @property {ChunkGroup} chunkGroup the chunk group\n- * @property {Set<Module>} minAvailableModules current minimal set of modules available at this point\n+ * @property {ModuleSetPlus} minAvailableModules current minimal set of modules available at this point\n  * @property {boolean} minAvailableModulesOwned true, if minAvailableModules is owned and can be modified\n- * @property {Set<Module>[]} availableModulesToBeMerged enqueued updates to the minimal set of available modules\n+ * @property {ModuleSetPlus[]} availableModulesToBeMerged enqueued updates to the minimal set of available modules\n  * @property {Set<Module>=} skippedItems modules that were skipped because module is already available in parent chunks (need to reconsider when minAvailableModules is shrinking)\n- * @property {Set<Module>} resultingAvailableModules set of modules available including modules from this chunk group\n+ * @property {ModuleSetPlus} resultingAvailableModules set of modules available including modules from this chunk group\n  * @property {Set<ChunkGroupInfo>} children set of children chunk groups, that will be revisited when availableModules shrink\n  * @property {number} preOrderIndex next pre order index\n  * @property {number} postOrderIndex next post order index\n@@ -48,14 +50,16 @@ const { connectChunkGroupParentAndChild } = require(\"./GraphHelpers\");\n  * @property {ChunkGroup} chunkGroup referenced chunk group\n  */\n \n+const EMPTY_SET = /** @type {ModuleSetPlus} */ (new Set());\n+EMPTY_SET.plus = EMPTY_SET;\n+\n /**\n- * @template T\n- * @param {Set<T>} a first set\n- * @param {Set<T>} b second set\n+ * @param {ModuleSetPlus} a first set\n+ * @param {ModuleSetPlus} b second set\n  * @returns {number} cmp\n  */\n const bySetSize = (a, b) => {\n-\treturn b.size - a.size;\n+\treturn b.size + b.plus.size - a.size - a.plus.size;\n };\n \n /**\n@@ -170,8 +174,8 @@ const visitModules = (\n \tfor (const chunkGroup of inputChunkGroups) {\n \t\tconst chunkGroupInfo = {\n \t\t\tchunkGroup,\n-\t\t\tminAvailableModules: new Set(),\n-\t\t\tminAvailableModulesOwned: true,\n+\t\t\tminAvailableModules: EMPTY_SET,\n+\t\t\tminAvailableModulesOwned: false,\n \t\t\tavailableModulesToBeMerged: [],\n \t\t\tskippedItems: undefined,\n \t\t\tresultingAvailableModules: undefined,\n@@ -309,6 +313,208 @@ const visitModules = (\n \t\t});\n \t};\n \n+\tconst processConnectQueue = () => {\n+\t\t// Figure out new parents for chunk groups\n+\t\t// to get new available modules for these children\n+\t\tfor (const [chunkGroupInfo, targets] of queueConnect) {\n+\t\t\tconst minAvailableModules = chunkGroupInfo.minAvailableModules;\n+\n+\t\t\t// 1. Create a new Set of available modules at this point\n+\t\t\t// We want to be as lazy as possible. There are multiple ways doing this:\n+\t\t\t// Note that resultingAvailableModules is stored as \"(a) + (b)\" as it's a ModuleSetPlus\n+\t\t\t// - resultingAvailableModules = (modules of chunk) + (minAvailableModules + minAvailableModules.plus)\n+\t\t\t// - resultingAvailableModules = (minAvailableModules + modules of chunk) + (minAvailableModules.plus)\n+\t\t\t// We choose one depending on the size of minAvailableModules vs minAvailableModules.plus\n+\n+\t\t\tlet resultingAvailableModules;\n+\t\t\tif (minAvailableModules.size > minAvailableModules.plus.size) {\n+\t\t\t\t// resultingAvailableModules = (modules of chunk) + (minAvailableModules + minAvailableModules.plus)\n+\t\t\t\tresultingAvailableModules = /** @type {Set<Module> & {plus: Set<Module>}} */ (new Set());\n+\t\t\t\tfor (const module of minAvailableModules.plus)\n+\t\t\t\t\tminAvailableModules.add(module);\n+\t\t\t\tminAvailableModules.plus = EMPTY_SET;\n+\t\t\t\tresultingAvailableModules.plus = minAvailableModules;\n+\t\t\t\tchunkGroupInfo.minAvailableModulesOwned = false;\n+\t\t\t} else {\n+\t\t\t\t// resultingAvailableModules = (minAvailableModules + modules of chunk) + (minAvailableModules.plus)\n+\t\t\t\tresultingAvailableModules = /** @type {Set<Module> & {plus: Set<Module>}} */ (new Set(\n+\t\t\t\t\tminAvailableModules\n+\t\t\t\t));\n+\t\t\t\tresultingAvailableModules.plus = minAvailableModules.plus;\n+\t\t\t}\n+\n+\t\t\t// add the modules from the chunk group to the set\n+\t\t\tfor (const chunk of chunkGroupInfo.chunkGroup.chunks) {\n+\t\t\t\tfor (const m of chunkGraph.getChunkModulesIterable(chunk)) {\n+\t\t\t\t\tresultingAvailableModules.add(m);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tchunkGroupInfo.resultingAvailableModules = resultingAvailableModules;\n+\t\t\tif (chunkGroupInfo.children === undefined) {\n+\t\t\t\tchunkGroupInfo.children = targets;\n+\t\t\t} else {\n+\t\t\t\tfor (const target of targets) {\n+\t\t\t\t\tchunkGroupInfo.children.add(target);\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t// 2. Update chunk group info\n+\t\t\tfor (const target of targets) {\n+\t\t\t\ttarget.availableModulesToBeMerged.push(resultingAvailableModules);\n+\t\t\t\toutdatedChunkGroupInfo.add(target);\n+\t\t\t}\n+\t\t}\n+\t\tqueueConnect.clear();\n+\t};\n+\n+\tconst processOutdatedChunkGroupInfo = () => {\n+\t\t// Execute the merge\n+\t\tfor (const info of outdatedChunkGroupInfo) {\n+\t\t\tconst availableModulesToBeMerged = info.availableModulesToBeMerged;\n+\t\t\tlet cachedMinAvailableModules = info.minAvailableModules;\n+\n+\t\t\t// 1. Get minimal available modules\n+\t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n+\t\t\t// This step calculates the minimal available modules and skips traversal when\n+\t\t\t// the list didn't shrink.\n+\t\t\tif (availableModulesToBeMerged.length > 1) {\n+\t\t\t\tavailableModulesToBeMerged.sort(bySetSize);\n+\t\t\t}\n+\t\t\tlet changed = false;\n+\t\t\tmerge: for (const availableModules of availableModulesToBeMerged) {\n+\t\t\t\tif (cachedMinAvailableModules === undefined) {\n+\t\t\t\t\tcachedMinAvailableModules = availableModules;\n+\t\t\t\t\tinfo.minAvailableModules = cachedMinAvailableModules;\n+\t\t\t\t\tinfo.minAvailableModulesOwned = false;\n+\t\t\t\t\tchanged = true;\n+\t\t\t\t} else {\n+\t\t\t\t\tif (info.minAvailableModulesOwned) {\n+\t\t\t\t\t\t// We own it and can modify it\n+\t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n+\t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n+\t\t\t\t\t\t\t\tcachedMinAvailableModules.delete(m);\n+\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n+\t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n+\t\t\t\t\t\t\t\t// cachedMinAvailableModules need to be modified\n+\t\t\t\t\t\t\t\t// but we don't own it\n+\t\t\t\t\t\t\t\t// construct a new Set as intersection of cachedMinAvailableModules and availableModules\n+\t\t\t\t\t\t\t\tconst newSet = /** @type {ModuleSetPlus} */ (new Set());\n+\t\t\t\t\t\t\t\tnewSet.plus = EMPTY_SET;\n+\t\t\t\t\t\t\t\tconst iterator = cachedMinAvailableModules[Symbol.iterator]();\n+\t\t\t\t\t\t\t\t// fast forward add all modules until m\n+\t\t\t\t\t\t\t\t/** @type {IteratorResult<Module>} */\n+\t\t\t\t\t\t\t\tlet it;\n+\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\tif (module === m) break;\n+\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t// check the remaining modules before adding\n+\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\tavailableModules.has(module) ||\n+\t\t\t\t\t\t\t\t\t\tavailableModules.plus.has(module)\n+\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t// also check all modules in cachedMinAvailableModules.plus\n+\t\t\t\t\t\t\t\tfor (const module of cachedMinAvailableModules.plus) {\n+\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\tavailableModules.has(module) ||\n+\t\t\t\t\t\t\t\t\t\tavailableModules.plus.has(module)\n+\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcachedMinAvailableModules = newSet;\n+\t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n+\t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n+\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\tcontinue merge;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tfor (const m of cachedMinAvailableModules.plus) {\n+\t\t\t\t\t\t\tif (!availableModules.has(m) && !availableModules.plus.has(m)) {\n+\t\t\t\t\t\t\t\t// cachedMinAvailableModules need to be modified\n+\t\t\t\t\t\t\t\t// but we don't own it\n+\t\t\t\t\t\t\t\t// construct a new Set as intersection of cachedMinAvailableModules and availableModules\n+\t\t\t\t\t\t\t\t// we already know that all modules directly from cachedMinAvailableModules are in availableModules too\n+\t\t\t\t\t\t\t\tconst newSet = /** @type {ModuleSetPlus} */ (new Set(\n+\t\t\t\t\t\t\t\t\tcachedMinAvailableModules\n+\t\t\t\t\t\t\t\t));\n+\t\t\t\t\t\t\t\tnewSet.plus = EMPTY_SET;\n+\t\t\t\t\t\t\t\tconst iterator = cachedMinAvailableModules.plus[\n+\t\t\t\t\t\t\t\t\tSymbol.iterator\n+\t\t\t\t\t\t\t\t]();\n+\t\t\t\t\t\t\t\t// fast forward add all modules until m\n+\t\t\t\t\t\t\t\t/** @type {IteratorResult<Module>} */\n+\t\t\t\t\t\t\t\tlet it;\n+\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\tif (module === m) break;\n+\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t// check the remaining modules before adding\n+\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\tavailableModules.has(module) ||\n+\t\t\t\t\t\t\t\t\t\tavailableModules.plus.has(module)\n+\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcachedMinAvailableModules = newSet;\n+\t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n+\t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n+\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\tcontinue merge;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tavailableModulesToBeMerged.length = 0;\n+\t\t\tif (!changed) continue;\n+\n+\t\t\t// 2. Reconsider skipped items\n+\t\t\tif (info.skippedItems !== undefined) {\n+\t\t\t\tfor (const module of info.skippedItems) {\n+\t\t\t\t\tif (!cachedMinAvailableModules.has(module)) {\n+\t\t\t\t\t\tqueue.push({\n+\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n+\t\t\t\t\t\t\tblock: module,\n+\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\tchunk: info.chunkGroup.chunks[0],\n+\t\t\t\t\t\t\tchunkGroup: info.chunkGroup,\n+\t\t\t\t\t\t\tchunkGroupInfo: info\n+\t\t\t\t\t\t});\n+\t\t\t\t\t\tinfo.skippedItems.delete(module);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t// 3. Reconsider children chunk groups\n+\t\t\tif (info.children !== undefined) {\n+\t\t\t\tfor (const cgi of info.children) {\n+\t\t\t\t\tlet connectList = queueConnect.get(info);\n+\t\t\t\t\tif (connectList === undefined) {\n+\t\t\t\t\t\tconnectList = new Set();\n+\t\t\t\t\t\tqueueConnect.set(info, connectList);\n+\t\t\t\t\t}\n+\t\t\t\t\tconnectList.add(cgi);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\toutdatedChunkGroupInfo.clear();\n+\t};\n+\n \t// Iterative traversal of the Module graph\n \t// Recursive would be simpler to write but could result in Stack Overflows\n \twhile (queue.length) {\n@@ -327,7 +533,11 @@ const visitModules = (\n \t\t\t\t\t\t// already connected, skip it\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n-\t\t\t\t\tif (chunkGroupInfo.minAvailableModules.has(module)) {\n+\t\t\t\t\tconst minAvailableModules = chunkGroupInfo.minAvailableModules;\n+\t\t\t\t\tif (\n+\t\t\t\t\t\tminAvailableModules.has(module) ||\n+\t\t\t\t\t\tminAvailableModules.plus.has(module)\n+\t\t\t\t\t) {\n \t\t\t\t\t\t// already in parent chunks\n \t\t\t\t\t\t// skip it for now, but enqueue for rechecking when minAvailableModules shrinks\n \t\t\t\t\t\tif (chunkGroupInfo.skippedItems === undefined)\n@@ -443,134 +653,12 @@ const visitModules = (\n \n \t\twhile (queueConnect.size > 0) {\n \t\t\tlogger.time(\"visitModules: calculating available modules\");\n-\n-\t\t\t// Figure out new parents for chunk groups\n-\t\t\t// to get new available modules for these children\n-\t\t\tfor (const [chunkGroupInfo, targets] of queueConnect) {\n-\t\t\t\tlet minAvailableModules = chunkGroupInfo.minAvailableModules;\n-\n-\t\t\t\t// 1. Create a new Set of available modules at this point\n-\t\t\t\tconst resultingAvailableModules = new Set(minAvailableModules);\n-\t\t\t\tfor (const chunk of chunkGroupInfo.chunkGroup.chunks) {\n-\t\t\t\t\tfor (const m of chunkGraph.getChunkModulesIterable(chunk)) {\n-\t\t\t\t\t\tresultingAvailableModules.add(m);\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\tchunkGroupInfo.resultingAvailableModules = resultingAvailableModules;\n-\t\t\t\tif (chunkGroupInfo.children === undefined) {\n-\t\t\t\t\tchunkGroupInfo.children = targets;\n-\t\t\t\t} else {\n-\t\t\t\t\tfor (const target of targets) {\n-\t\t\t\t\t\tchunkGroupInfo.children.add(target);\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\t// 2. Update chunk group info\n-\t\t\t\tfor (const target of targets) {\n-\t\t\t\t\ttarget.availableModulesToBeMerged.push(resultingAvailableModules);\n-\t\t\t\t\toutdatedChunkGroupInfo.add(target);\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tqueueConnect.clear();\n+\t\t\tprocessConnectQueue();\n \t\t\tlogger.timeEnd(\"visitModules: calculating available modules\");\n \n \t\t\tif (outdatedChunkGroupInfo.size > 0) {\n \t\t\t\tlogger.time(\"visitModules: merging available modules\");\n-\t\t\t\t// Execute the merge\n-\t\t\t\tfor (const info of outdatedChunkGroupInfo) {\n-\t\t\t\t\tconst availableModulesToBeMerged = info.availableModulesToBeMerged;\n-\t\t\t\t\tlet cachedMinAvailableModules = info.minAvailableModules;\n-\n-\t\t\t\t\t// 1. Get minimal available modules\n-\t\t\t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n-\t\t\t\t\t// This step calculates the minimal available modules and skips traversal when\n-\t\t\t\t\t// the list didn't shrink.\n-\t\t\t\t\tif (availableModulesToBeMerged.length > 1) {\n-\t\t\t\t\t\tavailableModulesToBeMerged.sort(bySetSize);\n-\t\t\t\t\t}\n-\t\t\t\t\tlet changed = false;\n-\t\t\t\t\tfor (const availableModules of availableModulesToBeMerged) {\n-\t\t\t\t\t\tif (cachedMinAvailableModules === undefined) {\n-\t\t\t\t\t\t\tcachedMinAvailableModules = availableModules;\n-\t\t\t\t\t\t\tinfo.minAvailableModules = cachedMinAvailableModules;\n-\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = false;\n-\t\t\t\t\t\t\tchanged = true;\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tif (info.minAvailableModulesOwned) {\n-\t\t\t\t\t\t\t\t// We own it and can modify it\n-\t\t\t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n-\t\t\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n-\t\t\t\t\t\t\t\t\t\tcachedMinAvailableModules.delete(m);\n-\t\t\t\t\t\t\t\t\t\tchanged = true;\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tfor (const m of cachedMinAvailableModules) {\n-\t\t\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n-\t\t\t\t\t\t\t\t\t\t// cachedMinAvailableModules need to be modified\n-\t\t\t\t\t\t\t\t\t\t// but we don't own it\n-\t\t\t\t\t\t\t\t\t\t// construct a new Set as intersection of cachedMinAvailableModules and availableModules\n-\t\t\t\t\t\t\t\t\t\t/** @type {Set<Module>} */\n-\t\t\t\t\t\t\t\t\t\tconst newSet = new Set();\n-\t\t\t\t\t\t\t\t\t\tconst iterator = cachedMinAvailableModules[\n-\t\t\t\t\t\t\t\t\t\t\tSymbol.iterator\n-\t\t\t\t\t\t\t\t\t\t]();\n-\t\t\t\t\t\t\t\t\t\t/** @type {IteratorResult<Module>} */\n-\t\t\t\t\t\t\t\t\t\tlet it;\n-\t\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n-\t\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n-\t\t\t\t\t\t\t\t\t\t\tif (module === m) break;\n-\t\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n-\t\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n-\t\t\t\t\t\t\t\t\t\t\tif (availableModules.has(module)) {\n-\t\t\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n-\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\tcachedMinAvailableModules = newSet;\n-\t\t\t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n-\t\t\t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n-\t\t\t\t\t\t\t\t\t\tchanged = true;\n-\t\t\t\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tavailableModulesToBeMerged.length = 0;\n-\t\t\t\t\tif (!changed) continue;\n-\n-\t\t\t\t\t// 2. Reconsider skipped items\n-\t\t\t\t\tif (info.skippedItems !== undefined) {\n-\t\t\t\t\t\tfor (const module of info.skippedItems) {\n-\t\t\t\t\t\t\tif (!cachedMinAvailableModules.has(module)) {\n-\t\t\t\t\t\t\t\tqueue.push({\n-\t\t\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n-\t\t\t\t\t\t\t\t\tblock: module,\n-\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\tchunk: info.chunkGroup.chunks[0],\n-\t\t\t\t\t\t\t\t\tchunkGroup: info.chunkGroup,\n-\t\t\t\t\t\t\t\t\tchunkGroupInfo: info\n-\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\tinfo.skippedItems.delete(module);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t// 3. Reconsider children chunk groups\n-\t\t\t\t\tif (info.children !== undefined) {\n-\t\t\t\t\t\tfor (const cgi of info.children) {\n-\t\t\t\t\t\t\tlet connectList = queueConnect.get(info);\n-\t\t\t\t\t\t\tif (connectList === undefined) {\n-\t\t\t\t\t\t\t\tconnectList = new Set();\n-\t\t\t\t\t\t\t\tqueueConnect.set(info, connectList);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tconnectList.add(cgi);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\toutdatedChunkGroupInfo.clear();\n+\t\t\t\tprocessOutdatedChunkGroupInfo();\n \t\t\t\tlogger.timeEnd(\"visitModules: merging available modules\");\n \t\t\t}\n \t\t}\n@@ -601,20 +689,21 @@ const connectChunkGroups = (\n ) => {\n \tconst { chunkGraph } = compilation;\n \n-\t/** @type {Set<Module>} */\n+\t/** @type {ModuleSetPlus} */\n \tlet resultingAvailableModules;\n \n \t/**\n \t * Helper function to check if all modules of a chunk are available\n \t *\n \t * @param {ChunkGroup} chunkGroup the chunkGroup to scan\n-\t * @param {Set<Module>} availableModules the comparator set\n+\t * @param {ModuleSetPlus} availableModules the comparator set\n \t * @returns {boolean} return true if all modules of a chunk are available\n \t */\n \tconst areModulesAvailable = (chunkGroup, availableModules) => {\n \t\tfor (const chunk of chunkGroup.chunks) {\n \t\t\tfor (const module of chunkGraph.getChunkModulesIterable(chunk)) {\n-\t\t\t\tif (!availableModules.has(module)) return false;\n+\t\t\t\tif (!availableModules.has(module) && !availableModules.plus.has(module))\n+\t\t\t\t\treturn false;\n \t\t\t}\n \t\t}\n \t\treturn true;\n@@ -710,6 +799,7 @@ const buildChunkGraph = (compilation, inputChunkGroups) => {\n \n \t// PART ONE\n \n+\tlogger.time(\"visitModules\");\n \tvisitModules(\n \t\tlogger,\n \t\tcompilation,\n@@ -719,6 +809,7 @@ const buildChunkGraph = (compilation, inputChunkGroups) => {\n \t\tblocksWithNestedBlocks,\n \t\tallCreatedChunkGroups\n \t);\n+\tlogger.timeEnd(\"visitModules\");\n \n \t// PART TWO\n "
      },
      {
        "sha": "3f30cdf84e57a673f238f73b536e47aa1215372f",
        "filename": "lib/optimize/SplitChunksPlugin.js",
        "status": "modified",
        "additions": 42,
        "deletions": 27,
        "changes": 69,
        "blob_url": "https://github.com/webpack/webpack/blob/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/lib%2Foptimize%2FSplitChunksPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/lib%2Foptimize%2FSplitChunksPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSplitChunksPlugin.js?ref=9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b",
        "patch": "@@ -5,7 +5,6 @@\n \n \"use strict\";\n \n-const crypto = require(\"crypto\");\n const { STAGE_ADVANCED } = require(\"../OptimizationStages\");\n const WebpackError = require(\"../WebpackError\");\n const { requestToId } = require(\"../ids/IdHelpers\");\n@@ -15,6 +14,7 @@ const {\n \tcompareModulesByIdentifier,\n \tcompareIterables\n } = require(\"../util/comparators\");\n+const createHash = require(\"../util/createHash\");\n const deterministicGrouping = require(\"../util/deterministicGrouping\");\n const contextify = require(\"../util/identifier\").contextify;\n const MinMaxSizeWarning = require(\"./MinMaxSizeWarning\");\n@@ -23,6 +23,7 @@ const MinMaxSizeWarning = require(\"./MinMaxSizeWarning\");\n /** @typedef {import(\"../../declarations/WebpackOptions\").OptimizationSplitChunksGetCacheGroups} OptimizationSplitChunksGetCacheGroups */\n /** @typedef {import(\"../../declarations/WebpackOptions\").OptimizationSplitChunksOptions} OptimizationSplitChunksOptions */\n /** @typedef {import(\"../../declarations/WebpackOptions\").OptimizationSplitChunksSizes} OptimizationSplitChunksSizes */\n+/** @typedef {import(\"../../declarations/WebpackOptions\").OutputOptions} OutputOptions */\n /** @typedef {import(\"../Chunk\")} Chunk */\n /** @typedef {import(\"../ChunkGraph\")} ChunkGraph */\n /** @typedef {import(\"../Compilation\").AssetInfo} AssetInfo */\n@@ -145,23 +146,26 @@ const MinMaxSizeWarning = require(\"./MinMaxSizeWarning\");\n  * @property {Record<string, number>} sizes\n  * @property {Set<Chunk>} chunks\n  * @property {Set<Chunk>} reuseableChunks\n- * @property {Set<string>} chunksKeys\n+ * @property {Set<bigint>} chunksKeys\n  */\n \n const defaultGetName = /** @type {GetName} */ (() => {});\n \n const deterministicGroupingForModules = /** @type {function(DeterministicGroupingOptionsForModule): DeterministicGroupingGroupedItemsForModule[]} */ (deterministicGrouping);\n \n+/** @type {WeakMap<Module, string>} */\n+const getKeyCache = new WeakMap();\n+\n /**\n  * @param {string} name a filename to hash\n+ * @param {OutputOptions} outputOptions hash function used\n  * @returns {string} hashed filename\n  */\n-const hashFilename = name => {\n-\treturn crypto\n-\t\t.createHash(\"md4\")\n+const hashFilename = (name, outputOptions) => {\n+\tconst digest = /** @type {string} */ (createHash(outputOptions.hashFunction)\n \t\t.update(name)\n-\t\t.digest(\"hex\")\n-\t\t.slice(0, 8);\n+\t\t.digest(outputOptions.hashDigest));\n+\treturn digest.slice(0, 8);\n };\n \n /**\n@@ -227,13 +231,6 @@ const compareEntries = (a, b) => {\n \treturn compareModuleIterables(modulesA, modulesB);\n };\n \n-/**\n- * @param {number} a first number\n- * @param {number} b second number\n- * @returns {number} the difference\n- */\n-const compareNumbers = (a, b) => a - b;\n-\n const INITIAL_CHUNK_FILTER = chunk => chunk.canBeInitial();\n const ASYNC_CHUNK_FILTER = chunk => !chunk.canBeInitial();\n const ALL_CHUNK_FILTER = chunk => true;\n@@ -562,17 +559,27 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\tconst chunkGraph = compilation.chunkGraph;\n \t\t\t\t\tconst moduleGraph = compilation.moduleGraph;\n \t\t\t\t\t// Give each selected chunk an index (to create strings from chunks)\n+\t\t\t\t\t/** @type {Map<Chunk, bigint>} */\n \t\t\t\t\tconst indexMap = new Map();\n-\t\t\t\t\tlet index = 1;\n+\t\t\t\t\tconst ZERO = BigInt(\"0\");\n+\t\t\t\t\tconst ONE = BigInt(\"1\");\n+\t\t\t\t\tlet index = ONE;\n \t\t\t\t\tfor (const chunk of chunks) {\n-\t\t\t\t\t\tindexMap.set(chunk, index++);\n+\t\t\t\t\t\tindexMap.set(chunk, index);\n+\t\t\t\t\t\tindex = index << ONE;\n \t\t\t\t\t}\n+\t\t\t\t\t/**\n+\t\t\t\t\t * @param {Iterable<Chunk>} chunks list of chunks\n+\t\t\t\t\t * @returns {bigint} key of the chunks\n+\t\t\t\t\t */\n \t\t\t\t\tconst getKey = chunks => {\n-\t\t\t\t\t\treturn Array.from(chunks, c => indexMap.get(c))\n-\t\t\t\t\t\t\t.sort(compareNumbers)\n-\t\t\t\t\t\t\t.join();\n+\t\t\t\t\t\tlet key = ZERO;\n+\t\t\t\t\t\tfor (const c of chunks) {\n+\t\t\t\t\t\t\tkey = key | indexMap.get(c);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\treturn key;\n \t\t\t\t\t};\n-\t\t\t\t\t/** @type {Map<string, Set<Chunk>>} */\n+\t\t\t\t\t/** @type {Map<bigint, Set<Chunk>>} */\n \t\t\t\t\tconst chunkSetsInGraph = new Map();\n \t\t\t\t\tfor (const module of compilation.modules) {\n \t\t\t\t\t\tconst chunksKey = getKey(\n@@ -602,7 +609,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t}\n \n \t\t\t\t\t// Create a list of possible combinations\n-\t\t\t\t\t/** @type {Map<string, Set<Chunk>[]>} */\n+\t\t\t\t\t/** @type {Map<bigint, Set<Chunk>[]>} */\n \t\t\t\t\tconst combinationsCache = new Map();\n \n \t\t\t\t\tconst getCombinations = key => {\n@@ -626,7 +633,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t/**\n \t\t\t\t\t * @typedef {Object} SelectedChunksResult\n \t\t\t\t\t * @property {Chunk[]} chunks the list of chunks\n-\t\t\t\t\t * @property {string} key a key of the list\n+\t\t\t\t\t * @property {bigint} key a key of the list\n \t\t\t\t\t */\n \n \t\t\t\t\t/** @type {WeakMap<Set<Chunk>, WeakMap<ChunkFilterFunction, SelectedChunksResult>>} */\n@@ -673,7 +680,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t/**\n \t\t\t\t\t * @param {CacheGroup} cacheGroup the current cache group\n \t\t\t\t\t * @param {Chunk[]} selectedChunks chunks selected for this module\n-\t\t\t\t\t * @param {string} selectedChunksKey a key of selectedChunks\n+\t\t\t\t\t * @param {bigint} selectedChunksKey a key of selectedChunks\n \t\t\t\t\t * @param {Module} module the current module\n \t\t\t\t\t * @returns {void}\n \t\t\t\t\t */\n@@ -1175,6 +1182,8 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t/** @type {Set<string>} */\n \t\t\t\t\tconst incorrectMinMaxSizeSet = new Set();\n \n+\t\t\t\t\tconst { outputOptions } = compilation;\n+\n \t\t\t\t\t// Make sure that maxSize is fulfilled\n \t\t\t\t\tfor (const chunk of Array.from(compilation.chunks)) {\n \t\t\t\t\t\tconst chunkConfig = maxSizeQueueMap.get(chunk);\n@@ -1224,15 +1233,21 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t}),\n \t\t\t\t\t\t\titems: chunkGraph.getChunkModulesIterable(chunk),\n \t\t\t\t\t\t\tgetKey(module) {\n+\t\t\t\t\t\t\t\tconst cache = getKeyCache.get(module);\n+\t\t\t\t\t\t\t\tif (cache !== undefined) return cache;\n \t\t\t\t\t\t\t\tconst ident = cachedContextify(module.identifier());\n \t\t\t\t\t\t\t\tconst nameForCondition =\n \t\t\t\t\t\t\t\t\tmodule.nameForCondition && module.nameForCondition();\n \t\t\t\t\t\t\t\tconst name = nameForCondition\n \t\t\t\t\t\t\t\t\t? cachedContextify(nameForCondition)\n \t\t\t\t\t\t\t\t\t: ident.replace(/^.*!|\\?[^?!]*$/g, \"\");\n \t\t\t\t\t\t\t\tconst fullKey =\n-\t\t\t\t\t\t\t\t\tname + automaticNameDelimiter + hashFilename(ident);\n-\t\t\t\t\t\t\t\treturn requestToId(fullKey);\n+\t\t\t\t\t\t\t\t\tname +\n+\t\t\t\t\t\t\t\t\tautomaticNameDelimiter +\n+\t\t\t\t\t\t\t\t\thashFilename(ident, outputOptions);\n+\t\t\t\t\t\t\t\tconst key = requestToId(fullKey);\n+\t\t\t\t\t\t\t\tgetKeyCache.set(module, key);\n+\t\t\t\t\t\t\t\treturn key;\n \t\t\t\t\t\t\t},\n \t\t\t\t\t\t\tgetSize(module) {\n \t\t\t\t\t\t\t\tconst size = Object.create(null);\n@@ -1253,7 +1268,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\tfor (let i = 0; i < results.length; i++) {\n \t\t\t\t\t\t\tconst group = results[i];\n \t\t\t\t\t\t\tconst key = this.options.hidePathInfo\n-\t\t\t\t\t\t\t\t? hashFilename(group.key)\n+\t\t\t\t\t\t\t\t? hashFilename(group.key, outputOptions)\n \t\t\t\t\t\t\t\t: group.key;\n \t\t\t\t\t\t\tlet name = chunk.name\n \t\t\t\t\t\t\t\t? chunk.name + automaticNameDelimiter + key\n@@ -1262,7 +1277,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\tname =\n \t\t\t\t\t\t\t\t\tname.slice(0, 100) +\n \t\t\t\t\t\t\t\t\tautomaticNameDelimiter +\n-\t\t\t\t\t\t\t\t\thashFilename(name);\n+\t\t\t\t\t\t\t\t\thashFilename(name, outputOptions);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (i !== results.length - 1) {\n \t\t\t\t\t\t\t\tconst newPart = compilation.addChunk(name);"
      },
      {
        "sha": "20f526d287537b069b4cd8d7d0e14ae32ccdfddf",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b",
        "patch": "@@ -2145,6 +2145,10 @@\n           \"description\": \"add the hash of the compilation\",\n           \"type\": \"boolean\"\n         },\n+        \"ids\": {\n+          \"description\": \"add ids\",\n+          \"type\": \"boolean\"\n+        },\n         \"logging\": {\n           \"description\": \"add logging output\",\n           \"anyOf\": ["
      },
      {
        "sha": "74c13841a025afc6ae4a4e551fac50a91d926106",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 41,
        "deletions": 40,
        "changes": 81,
        "blob_url": "https://github.com/webpack/webpack/blob/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b",
        "patch": "@@ -1756,49 +1756,49 @@ exports[`StatsTestCases should print correct stats for optimize-chunks 1`] = `\n \"Hash: 7d84007dec272e753c2e\n Time: Xms\n Built at: 1970-04-20 12:42:42\n-            Asset       Size\n-            ab.js  153 bytes  [emitted]  [name: ab]\n-           abd.js  197 bytes  [emitted]  [name: abd]\n-      ac in ab.js  114 bytes  [emitted]  [name: ac in ab]\n-         chunk.js  158 bytes  [emitted]  [name: chunk]\n-          cir1.js  334 bytes  [emitted]  [name: cir1]\n-cir2 from cir1.js  378 bytes  [emitted]  [name: cir2 from cir1]\n-          cir2.js  334 bytes  [emitted]  [name: cir2]\n-          main.js   8.54 KiB  [emitted]  [name: main]\n+            Asset       Size        Chunks\n+            ab.js  153 bytes          {90}  [emitted]  [name: ab]\n+           abd.js  197 bytes   {90}, {374}  [emitted]  [name: abd]\n+      ac in ab.js  114 bytes         {753}  [emitted]  [name: ac in ab]\n+         chunk.js  158 bytes  {284}, {753}  [emitted]  [name: chunk]\n+          cir1.js  334 bytes         {592}  [emitted]  [name: cir1]\n+cir2 from cir1.js  378 bytes  {288}, {289}  [emitted]  [name: cir2 from cir1]\n+          cir2.js  334 bytes         {289}  [emitted]  [name: cir2]\n+          main.js   8.54 KiB         {179}  [emitted]  [name: main]\n Entrypoint main = main.js\n-chunk ab.js (ab) 2 bytes <{179}> >{753}< [rendered]\n-    > ./index.js 1:0-6:8\n- ./modules/a.js 1 bytes [built]\n- ./modules/b.js 1 bytes [built]\n-chunk main.js (main) 524 bytes (javascript) 4.3 KiB (runtime) >{90}< >{289}< >{374}< >{592}< [entry] [rendered]\n+chunk {90} ab.js (ab) 2 bytes <{179}> >{753}< [rendered]\n+    > [10] ./index.js 1:0-6:8\n+ [839] ./modules/a.js 1 bytes {90} {374} [built]\n+ [836] ./modules/b.js 1 bytes {90} {374} [built]\n+chunk {179} main.js (main) 524 bytes (javascript) 4.3 KiB (runtime) >{90}< >{289}< >{374}< >{592}< [entry] [rendered]\n     > ./index main\n- ./index.js 523 bytes [built]\n- ./modules/f.js 1 bytes [built]\n+  [10] ./index.js 523 bytes {179} [built]\n+ [544] ./modules/f.js 1 bytes {179} [built]\n      + 5 hidden chunk modules\n-chunk chunk.js (chunk) 2 bytes <{374}> <{753}> [rendered]\n-    > ./index.js 3:2-4:13\n-    > ./index.js 9:1-10:12\n- ./modules/c.js 1 bytes [built]\n- ./modules/d.js 1 bytes [built]\n-chunk cir2 from cir1.js (cir2 from cir1) 82 bytes <{592}> [rendered]\n-    > ./circular1.js 1:0-79\n- ./circular2.js 81 bytes [built]\n- ./modules/e.js 1 bytes [built]\n-chunk cir2.js (cir2) 81 bytes <{179}> >{592}< [rendered]\n-    > ./index.js 14:0-54\n- ./circular2.js 81 bytes [built]\n-chunk abd.js (abd) 3 bytes <{179}> >{284}< [rendered]\n-    > ./index.js 8:0-11:9\n- ./modules/a.js 1 bytes [built]\n- ./modules/b.js 1 bytes [built]\n- ./modules/d.js 1 bytes [built]\n-chunk cir1.js (cir1) 81 bytes <{179}> <{289}> >{288}< [rendered]\n-    > ./index.js 13:0-54\n-    > ./circular2.js 1:0-79\n- ./circular1.js 81 bytes [built]\n-chunk ac in ab.js (ac in ab) 1 bytes <{90}> >{284}< [rendered]\n-    > ./index.js 2:1-5:15\n- ./modules/c.js 1 bytes [built]\"\n+chunk {284} chunk.js (chunk) 2 bytes <{374}> <{753}> [rendered]\n+    > [10] ./index.js 3:2-4:13\n+    > [10] ./index.js 9:1-10:12\n+ [115] ./modules/c.js 1 bytes {284} {753} [built]\n+ [928] ./modules/d.js 1 bytes {284} {374} [built]\n+chunk {288} cir2 from cir1.js (cir2 from cir1) 82 bytes <{592}> [rendered]\n+    > [655] ./circular1.js 1:0-79\n+ [193] ./circular2.js 81 bytes {288} {289} [built]\n+ [798] ./modules/e.js 1 bytes {288} [built]\n+chunk {289} cir2.js (cir2) 81 bytes <{179}> >{592}< [rendered]\n+    > [10] ./index.js 14:0-54\n+ [193] ./circular2.js 81 bytes {288} {289} [built]\n+chunk {374} abd.js (abd) 3 bytes <{179}> >{284}< [rendered]\n+    > [10] ./index.js 8:0-11:9\n+ [839] ./modules/a.js 1 bytes {90} {374} [built]\n+ [836] ./modules/b.js 1 bytes {90} {374} [built]\n+ [928] ./modules/d.js 1 bytes {284} {374} [built]\n+chunk {592} cir1.js (cir1) 81 bytes <{179}> <{289}> >{288}< [rendered]\n+    > [10] ./index.js 13:0-54\n+    > [193] ./circular2.js 1:0-79\n+ [655] ./circular1.js 81 bytes {592} [built]\n+chunk {753} ac in ab.js (ac in ab) 1 bytes <{90}> >{284}< [rendered]\n+    > [10] ./index.js 2:1-5:15\n+ [115] ./modules/c.js 1 bytes {284} {753} [built]\"\n `;\n \n exports[`StatsTestCases should print correct stats for parse-error 1`] = `\n@@ -2472,6 +2472,7 @@ LOG from webpack.buildChunkGraph\n <t> visitModules: calculating available modules: Xms\n <t> visitModules: merging available modules: Xms\n <t> visitModules: visiting: Xms\n+<t> visitModules: Xms\n <t> connectChunkGroups: Xms\n <t> cleanup: Xms\n "
      },
      {
        "sha": "8c46b3ed48bb26b881a69eb82761af5b63bd81e6",
        "filename": "test/statsCases/optimize-chunks/webpack.config.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/test%2FstatsCases%2Foptimize-chunks%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b/test%2FstatsCases%2Foptimize-chunks%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Foptimize-chunks%2Fwebpack.config.js?ref=9cebcfd9fd3bd3f4e19a4259c32a9ca630166f4b",
        "patch": "@@ -2,6 +2,7 @@ module.exports = {\n \tmode: \"production\",\n \tentry: \"./index\",\n \tstats: {\n+\t\tids: true,\n \t\treasons: false,\n \t\tmodules: false,\n \t\tchunks: true,"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/11070",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/11070/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/11070/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/11070/events",
    "html_url": "https://github.com/webpack/webpack/pull/11070",
    "id": 642827329,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDM3NzQwOTcx",
    "number": 11070,
    "title": "Feature/split chunk improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-06-22T07:28:06Z",
    "updated_at": "2020-06-29T15:22:18Z",
    "closed_at": "2020-06-24T09:09:25Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/11070",
      "html_url": "https://github.com/webpack/webpack/pull/11070",
      "diff_url": "https://github.com/webpack/webpack/pull/11070.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/11070.patch",
      "merged_at": "2020-06-24T09:09:25Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* cache CacheGroup objects in SplitChunksPlugin\r\n* removed duplicate sort operation\r\n* renamed chunks with `maxSize` only when really splitted\r\n* fix #11026\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance, defaults, bugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* webpack 5 defaults are HTTP/2 focused.\r\n* defaults for `splitChunks.maxAsyncRequests` and `splitChunks.maxInitialRequests` has been increased to 30\r\n\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/11070/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/11070/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "f9e0445122a6d70e0648cc07d9a6918e5e5c02e2",
        "filename": "lib/config/defaults.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/lib%2Fconfig%2Fdefaults.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/lib%2Fconfig%2Fdefaults.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fconfig%2Fdefaults.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -563,8 +563,8 @@ const applyOptimizationDefaults = (\n \t\tD(splitChunks, \"minChunks\", 1);\n \t\tF(splitChunks, \"minSize\", () => (production ? 30000 : 10000));\n \t\tF(splitChunks, \"minRemainingSize\", () => (development ? 0 : undefined));\n-\t\tF(splitChunks, \"maxAsyncRequests\", () => (production ? 6 : Infinity));\n-\t\tF(splitChunks, \"maxInitialRequests\", () => (production ? 4 : Infinity));\n+\t\tF(splitChunks, \"maxAsyncRequests\", () => (production ? 30 : Infinity));\n+\t\tF(splitChunks, \"maxInitialRequests\", () => (production ? 30 : Infinity));\n \t\tD(splitChunks, \"automaticNameDelimiter\", \"-\");\n \t\tconst { cacheGroups } = splitChunks;\n \t\tF(cacheGroups, \"default\", () => ({"
      },
      {
        "sha": "8f7bcfa4cfc074f7164000efcb72c27998ed07c1",
        "filename": "lib/optimize/SplitChunksPlugin.js",
        "status": "modified",
        "additions": 132,
        "deletions": 100,
        "changes": 232,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/lib%2Foptimize%2FSplitChunksPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/lib%2Foptimize%2FSplitChunksPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSplitChunksPlugin.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -369,43 +369,52 @@ const normalizeCacheGroups = cacheGroups => {\n \t\treturn cacheGroups;\n \t}\n \tif (typeof cacheGroups === \"object\" && cacheGroups !== null) {\n-\t\t/**\n-\t\t * @param {Module} module the current module\n-\t\t * @param {CacheGroupsContext} context the current context\n-\t\t * @returns {CacheGroupSource[]} the matching cache groups\n-\t\t */\n-\t\tconst fn = (module, context) => {\n-\t\t\t/** @type {CacheGroupSource[]} */\n-\t\t\tlet results = [];\n-\t\t\tfor (const key of Object.keys(cacheGroups)) {\n-\t\t\t\tlet option = cacheGroups[key];\n-\t\t\t\tif (option === false) {\n-\t\t\t\t\tcontinue;\n-\t\t\t\t}\n-\t\t\t\tif (typeof option === \"string\" || option instanceof RegExp) {\n+\t\t/** @type {(function(Module, CacheGroupsContext, CacheGroupSource[]): void)[]} */\n+\t\tconst handlers = [];\n+\t\tfor (const key of Object.keys(cacheGroups)) {\n+\t\t\tconst option = cacheGroups[key];\n+\t\t\tif (option === false) {\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t\tif (typeof option === \"string\" || option instanceof RegExp) {\n+\t\t\t\tconst source = createCacheGroupSource({}, key);\n+\t\t\t\thandlers.push((module, context, results) => {\n \t\t\t\t\tif (checkTest(option, module, context)) {\n-\t\t\t\t\t\tresults.push(\n-\t\t\t\t\t\t\tcreateCacheGroupSource({\n-\t\t\t\t\t\t\t\tkey\n-\t\t\t\t\t\t\t})\n-\t\t\t\t\t\t);\n+\t\t\t\t\t\tresults.push(source);\n \t\t\t\t\t}\n-\t\t\t\t} else if (typeof option === \"function\") {\n+\t\t\t\t});\n+\t\t\t} else if (typeof option === \"function\") {\n+\t\t\t\thandlers.push((module, context, results) => {\n \t\t\t\t\tconst result = option(module);\n \t\t\t\t\tif (result) {\n \t\t\t\t\t\tconst groups = Array.isArray(result) ? result : [result];\n \t\t\t\t\t\tfor (const group of groups) {\n-\t\t\t\t\t\t\tresults.push(createCacheGroupSource({ key, ...group }));\n+\t\t\t\t\t\t\tresults.push(createCacheGroupSourceCached(group, key));\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t} else {\n+\t\t\t\t});\n+\t\t\t} else {\n+\t\t\t\tconst source = createCacheGroupSource(option, key);\n+\t\t\t\thandlers.push((module, context, results) => {\n \t\t\t\t\tif (\n \t\t\t\t\t\tcheckTest(option.test, module, context) &&\n \t\t\t\t\t\tcheckModuleType(option.type, module)\n \t\t\t\t\t) {\n-\t\t\t\t\t\tresults.push(createCacheGroupSource({ key, ...option }));\n+\t\t\t\t\t\tresults.push(source);\n \t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n+\t\t/**\n+\t\t * @param {Module} module the current module\n+\t\t * @param {CacheGroupsContext} context the current context\n+\t\t * @returns {CacheGroupSource[]} the matching cache groups\n+\t\t */\n+\t\tconst fn = (module, context) => {\n+\t\t\t/** @type {CacheGroupSource[]} */\n+\t\t\tlet results = [];\n+\t\t\tfor (const fn of handlers) {\n+\t\t\t\tfn(module, context, results);\n \t\t\t}\n \t\t\treturn results;\n \t\t};\n@@ -463,13 +472,35 @@ const checkModuleType = (test, module) => {\n  * @property {string} key\n  */\n \n+const cacheGroupSourceCache = new WeakMap();\n+\n+/**\n+ * @param {OptimizationSplitChunksCacheGroup} options the group options\n+ * @param {string} key key of cache group\n+ * @returns {CacheGroupSource} the normalized cached group\n+ */\n+const createCacheGroupSourceCached = (options, key) => {\n+\tlet cacheMap = cacheGroupSourceCache.get(options);\n+\tif (cacheMap !== undefined) {\n+\t\tconst cacheEntry = cacheMap.get(key);\n+\t\tif (cacheEntry !== undefined) return cacheEntry;\n+\t} else {\n+\t\tcacheMap = new Map();\n+\t\tcacheGroupSourceCache.set(options, cacheMap);\n+\t}\n+\tconst result = createCacheGroupSource(options, key);\n+\tcacheMap.set(key, result);\n+\treturn result;\n+};\n+\n /**\n- * @param {OptimizationSplitChunksCacheGroup&CacheGroupKey} options the group options\n+ * @param {OptimizationSplitChunksCacheGroup} options the group options\n+ * @param {string} key key of cache group\n  * @returns {CacheGroupSource} the normalized cached group\n  */\n-const createCacheGroupSource = options => {\n+const createCacheGroupSource = (options, key) => {\n \treturn {\n-\t\tkey: options.key,\n+\t\tkey,\n \t\tpriority: options.priority,\n \t\tgetName: normalizeName(options.name),\n \t\tchunksFilter: normalizeChunksFilter(options.chunks),\n@@ -530,6 +561,9 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\"~\"\n \t\t\t}\n \t\t};\n+\n+\t\t/** @type {WeakMap<CacheGroupSource, CacheGroup>} */\n+\t\tthis._cacheGroupCache = new WeakMap();\n \t}\n \n \t/**\n@@ -791,73 +825,76 @@ module.exports = class SplitChunksPlugin {\n \n \t\t\t\t\t\tfor (const cacheGroupSource of cacheGroups) {\n \t\t\t\t\t\t\t/** @type {CacheGroup} */\n-\t\t\t\t\t\t\tconst cacheGroup = {\n-\t\t\t\t\t\t\t\tkey: cacheGroupSource.key,\n-\t\t\t\t\t\t\t\tpriority: cacheGroupSource.priority || 0,\n-\t\t\t\t\t\t\t\tchunksFilter:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.chunksFilter || this.options.chunksFilter,\n-\t\t\t\t\t\t\t\tminSize: mergeSizes(\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.minSize,\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce ? undefined : this.options.minSize\n-\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\tminRemainingSize: mergeSizes(\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.minRemainingSize,\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t? undefined\n-\t\t\t\t\t\t\t\t\t\t: this.options.minRemainingSize\n-\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\tminSizeForMaxSize: mergeSizes(\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.minSize,\n-\t\t\t\t\t\t\t\t\tthis.options.minSize\n-\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\tmaxAsyncSize: mergeSizes(\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.maxAsyncSize,\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t? undefined\n-\t\t\t\t\t\t\t\t\t\t: this.options.maxAsyncSize\n-\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\tmaxInitialSize: mergeSizes(\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.maxInitialSize,\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t? undefined\n-\t\t\t\t\t\t\t\t\t\t: this.options.maxInitialSize\n-\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\tminChunks:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.minChunks !== undefined\n-\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.minChunks\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t? 1\n-\t\t\t\t\t\t\t\t\t\t: this.options.minChunks,\n-\t\t\t\t\t\t\t\tmaxAsyncRequests:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.maxAsyncRequests !== undefined\n-\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.maxAsyncRequests\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t? Infinity\n-\t\t\t\t\t\t\t\t\t\t: this.options.maxAsyncRequests,\n-\t\t\t\t\t\t\t\tmaxInitialRequests:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.maxInitialRequests !== undefined\n-\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.maxInitialRequests\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t? Infinity\n-\t\t\t\t\t\t\t\t\t\t: this.options.maxInitialRequests,\n-\t\t\t\t\t\t\t\tgetName:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.getName !== undefined\n-\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.getName\n-\t\t\t\t\t\t\t\t\t\t: this.options.getName,\n-\t\t\t\t\t\t\t\tfilename:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.filename !== undefined\n-\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.filename\n-\t\t\t\t\t\t\t\t\t\t: this.options.filename,\n-\t\t\t\t\t\t\t\tautomaticNameDelimiter:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.automaticNameDelimiter !== undefined\n-\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.automaticNameDelimiter\n-\t\t\t\t\t\t\t\t\t\t: this.options.automaticNameDelimiter,\n-\t\t\t\t\t\t\t\tidHint:\n-\t\t\t\t\t\t\t\t\tcacheGroupSource.idHint !== undefined\n-\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.idHint\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.key,\n-\t\t\t\t\t\t\t\treuseExistingChunk: cacheGroupSource.reuseExistingChunk\n-\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\tlet cacheGroup = this._cacheGroupCache.get(cacheGroupSource);\n+\t\t\t\t\t\t\tif (cacheGroup === undefined) {\n+\t\t\t\t\t\t\t\tcacheGroup = {\n+\t\t\t\t\t\t\t\t\tkey: cacheGroupSource.key,\n+\t\t\t\t\t\t\t\t\tpriority: cacheGroupSource.priority || 0,\n+\t\t\t\t\t\t\t\t\tchunksFilter:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.chunksFilter || this.options.chunksFilter,\n+\t\t\t\t\t\t\t\t\tminSize: mergeSizes(\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.minSize,\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce ? undefined : this.options.minSize\n+\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\tminRemainingSize: mergeSizes(\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.minRemainingSize,\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce\n+\t\t\t\t\t\t\t\t\t\t\t? undefined\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.minRemainingSize\n+\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\tminSizeForMaxSize: mergeSizes(\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.minSize,\n+\t\t\t\t\t\t\t\t\t\tthis.options.minSize\n+\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\tmaxAsyncSize: mergeSizes(\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.maxAsyncSize,\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce\n+\t\t\t\t\t\t\t\t\t\t\t? undefined\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.maxAsyncSize\n+\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\tmaxInitialSize: mergeSizes(\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.maxInitialSize,\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.enforce\n+\t\t\t\t\t\t\t\t\t\t\t? undefined\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.maxInitialSize\n+\t\t\t\t\t\t\t\t\t),\n+\t\t\t\t\t\t\t\t\tminChunks:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.minChunks !== undefined\n+\t\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.minChunks\n+\t\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n+\t\t\t\t\t\t\t\t\t\t\t? 1\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.minChunks,\n+\t\t\t\t\t\t\t\t\tmaxAsyncRequests:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.maxAsyncRequests !== undefined\n+\t\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.maxAsyncRequests\n+\t\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n+\t\t\t\t\t\t\t\t\t\t\t? Infinity\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.maxAsyncRequests,\n+\t\t\t\t\t\t\t\t\tmaxInitialRequests:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.maxInitialRequests !== undefined\n+\t\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.maxInitialRequests\n+\t\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n+\t\t\t\t\t\t\t\t\t\t\t? Infinity\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.maxInitialRequests,\n+\t\t\t\t\t\t\t\t\tgetName:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.getName !== undefined\n+\t\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.getName\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.getName,\n+\t\t\t\t\t\t\t\t\tfilename:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.filename !== undefined\n+\t\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.filename\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.filename,\n+\t\t\t\t\t\t\t\t\tautomaticNameDelimiter:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.automaticNameDelimiter !== undefined\n+\t\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.automaticNameDelimiter\n+\t\t\t\t\t\t\t\t\t\t\t: this.options.automaticNameDelimiter,\n+\t\t\t\t\t\t\t\t\tidHint:\n+\t\t\t\t\t\t\t\t\t\tcacheGroupSource.idHint !== undefined\n+\t\t\t\t\t\t\t\t\t\t\t? cacheGroupSource.idHint\n+\t\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.key,\n+\t\t\t\t\t\t\t\t\treuseExistingChunk: cacheGroupSource.reuseExistingChunk\n+\t\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t// For all combination of chunk selection\n \t\t\t\t\t\t\tfor (const chunkCombination of combs) {\n \t\t\t\t\t\t\t\t// Break if minimum number of chunks is not reached\n@@ -1259,14 +1296,9 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\treturn size;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t});\n-\t\t\t\t\t\tif (results.length === 0) {\n+\t\t\t\t\t\tif (results.length <= 1) {\n \t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tresults.sort((a, b) => {\n-\t\t\t\t\t\t\tif (a.key < b.key) return -1;\n-\t\t\t\t\t\t\tif (a.key > b.key) return 1;\n-\t\t\t\t\t\t\treturn 0;\n-\t\t\t\t\t\t});\n \t\t\t\t\t\tfor (let i = 0; i < results.length; i++) {\n \t\t\t\t\t\t\tconst group = results[i];\n \t\t\t\t\t\t\tconst key = this.options.hidePathInfo"
      },
      {
        "sha": "c6596f2966be28c3972e6304400e52f3b22fab3f",
        "filename": "lib/util/deterministicGrouping.js",
        "status": "modified",
        "additions": 28,
        "deletions": 13,
        "changes": 41,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/lib%2Futil%2FdeterministicGrouping.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/lib%2Futil%2FdeterministicGrouping.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FdeterministicGrouping.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -44,20 +44,30 @@ const similarity = (a, b) => {\n /**\n  * @param {string} a key\n  * @param {string} b key\n+ * @param {Set<string>} usedNames set of already used names\n  * @returns {string} the common part and a single char for the difference\n  */\n-const getName = (a, b) => {\n+const getName = (a, b, usedNames) => {\n \tconst l = Math.min(a.length, b.length);\n-\tlet r = \"\";\n-\tfor (let i = 0; i < l; i++) {\n-\t\tconst ca = a.charAt(i);\n-\t\tconst cb = b.charAt(i);\n-\t\tr += ca;\n-\t\tif (ca === cb) {\n-\t\t\tcontinue;\n+\tlet i = 0;\n+\twhile (i < l) {\n+\t\tif (a.charCodeAt(i) !== b.charCodeAt(i)) {\n+\t\t\ti++;\n+\t\t\tbreak;\n+\t\t}\n+\t\ti++;\n+\t}\n+\twhile (i < l) {\n+\t\tconst name = a.slice(0, i);\n+\t\tconst lowerName = name.toLowerCase();\n+\t\tif (!usedNames.has(lowerName)) {\n+\t\t\tusedNames.add(lowerName);\n+\t\t\treturn name;\n \t\t}\n-\t\treturn r;\n+\t\ti++;\n \t}\n+\t// names always contain a hash, so this is always unique\n+\t// we don't need to check usedNames nor add it\n \treturn a;\n };\n \n@@ -391,12 +401,17 @@ module.exports = ({ maxSize, minSize, items, getSize, getKey }) => {\n \t});\n \n \t// give every group a name\n+\tconst usedNames = new Set();\n \tfor (let i = 0; i < result.length; i++) {\n \t\tconst group = result[i];\n-\t\tconst first = group.nodes[0];\n-\t\tconst last = group.nodes[group.nodes.length - 1];\n-\t\tlet name = getName(first.key, last.key);\n-\t\tgroup.key = name;\n+\t\tif (group.nodes.length === 1) {\n+\t\t\tgroup.key = group.nodes[0].key;\n+\t\t} else {\n+\t\t\tconst first = group.nodes[0];\n+\t\t\tconst last = group.nodes[group.nodes.length - 1];\n+\t\t\tconst name = getName(first.key, last.key, usedNames);\n+\t\t\tgroup.key = name;\n+\t\t}\n \t}\n \n \t// return the results"
      },
      {
        "sha": "dfa89260e16181b1e30a967584776b2ee75da76f",
        "filename": "test/Defaults.unittest.js",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FDefaults.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FDefaults.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FDefaults.unittest.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -375,8 +375,8 @@ describe(\"Defaults\", () => {\n \t\t-       \"maxAsyncRequests\": Infinity,\n \t\t-       \"maxInitialRequests\": Infinity,\n \t\t+       \"hidePathInfo\": true,\n-\t\t+       \"maxAsyncRequests\": 6,\n-\t\t+       \"maxInitialRequests\": 4,\n+\t\t+       \"maxAsyncRequests\": 30,\n+\t\t+       \"maxInitialRequests\": 30,\n \t\t@@ ... @@\n \t\t-       \"minSize\": 10000,\n \t\t+       \"minSize\": 30000,\n@@ -424,8 +424,8 @@ describe(\"Defaults\", () => {\n \t\t-       \"maxAsyncRequests\": Infinity,\n \t\t-       \"maxInitialRequests\": Infinity,\n \t\t+       \"hidePathInfo\": true,\n-\t\t+       \"maxAsyncRequests\": 6,\n-\t\t+       \"maxInitialRequests\": 4,\n+\t\t+       \"maxAsyncRequests\": 30,\n+\t\t+       \"maxInitialRequests\": 30,\n \t\t@@ ... @@\n \t\t-       \"minSize\": 10000,\n \t\t+       \"minSize\": 30000,"
      },
      {
        "sha": "c762e657bf24ff860840ebb075a81ce5ef49cb4f",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 72,
        "deletions": 72,
        "changes": 144,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -314,9 +314,9 @@ Child vendors:\n          + 3 hidden dependent modules\n Child multiple-vendors:\n     Entrypoint main = multiple-vendors/main.js\n-    Entrypoint a = multiple-vendors/libs-x.js multiple-vendors/954.js multiple-vendors/767.js multiple-vendors/a.js\n-    Entrypoint b = multiple-vendors/libs-x.js multiple-vendors/954.js multiple-vendors/767.js multiple-vendors/b.js\n-    Entrypoint c = multiple-vendors/libs-x.js multiple-vendors/769.js multiple-vendors/767.js multiple-vendors/c.js\n+    Entrypoint a = multiple-vendors/libs-x.js multiple-vendors/954.js multiple-vendors/767.js multiple-vendors/async-a.js multiple-vendors/a.js\n+    Entrypoint b = multiple-vendors/libs-x.js multiple-vendors/954.js multiple-vendors/767.js multiple-vendors/568.js multiple-vendors/async-b.js multiple-vendors/b.js\n+    Entrypoint c = multiple-vendors/libs-x.js multiple-vendors/769.js multiple-vendors/767.js multiple-vendors/568.js multiple-vendors/async-c.js multiple-vendors/c.js\n     chunk multiple-vendors/libs-x.js (libs-x) (id hint: libs) 20 bytes [initial] [rendered] split chunk (cache group: libs) (name: libs-x)\n         > ./a ./index.js 1:0-47\n         > ./b ./index.js 2:0-47\n@@ -325,33 +325,33 @@ Child multiple-vendors:\n         > ./b b\n         > ./c c\n      ./node_modules/x.js 20 bytes [built]\n-    chunk multiple-vendors/b.js (b) 92 bytes (javascript) 4.45 KiB (runtime) [entry] [rendered]\n+    chunk multiple-vendors/b.js (b) 4.44 KiB [entry] [rendered]\n         > ./b b\n-     ./b.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n+        5 root modules\n     chunk multiple-vendors/async-g.js (async-g) 34 bytes [rendered]\n         > ./g ./a.js 6:0-47\n      ./g.js 34 bytes [built]\n     chunk multiple-vendors/main.js (main) 147 bytes (javascript) 5.45 KiB (runtime) [entry] [rendered]\n         > ./ main\n      ./index.js 147 bytes [built]\n          + 8 hidden root modules\n-    chunk multiple-vendors/async-b.js (async-b) 72 bytes [rendered]\n+    chunk multiple-vendors/async-b.js (async-b) 72 bytes [initial] [rendered] reused as split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n+        > ./b b\n      ./b.js 72 bytes [built]\n-    chunk multiple-vendors/async-c.js (async-c) 72 bytes [rendered]\n+    chunk multiple-vendors/async-c.js (async-c) 72 bytes [initial] [rendered] reused as split chunk (cache group: default)\n         > ./c ./index.js 3:0-47\n-     ./c.js 72 bytes [built]\n-    chunk multiple-vendors/c.js (c) 92 bytes (javascript) 4.45 KiB (runtime) [entry] [rendered]\n         > ./c c\n      ./c.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n-    chunk multiple-vendors/568.js 20 bytes [rendered] split chunk (cache group: default)\n+    chunk multiple-vendors/c.js (c) 4.44 KiB [entry] [rendered]\n+        > ./c c\n+        5 root modules\n+    chunk multiple-vendors/568.js 20 bytes [initial] [rendered] split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n         > ./c ./index.js 3:0-47\n         > ./g ./a.js 6:0-47\n+        > ./b b\n+        > ./c c\n      ./f.js 20 bytes [built]\n     chunk multiple-vendors/767.js 20 bytes [initial] [rendered] split chunk (cache group: default)\n         > ./a ./index.js 1:0-47\n@@ -365,12 +365,12 @@ Child multiple-vendors:\n         > ./c ./index.js 3:0-47\n         > ./c c\n      ./node_modules/z.js 20 bytes [built]\n-    chunk multiple-vendors/a.js (a) 156 bytes (javascript) 6.58 KiB (runtime) [entry] [rendered]\n+    chunk multiple-vendors/a.js (a) 6.58 KiB [entry] [rendered]\n         > ./a a\n-     ./a.js + 1 modules 156 bytes [built]\n-         + 8 hidden root modules\n-    chunk multiple-vendors/async-a.js (async-a) 156 bytes [rendered]\n+        8 root modules\n+    chunk multiple-vendors/async-a.js (async-a) 156 bytes [initial] [rendered] reused as split chunk (cache group: default)\n         > ./a ./index.js 1:0-47\n+        > ./a a\n      ./a.js + 1 modules 156 bytes [built]\n     chunk multiple-vendors/954.js (id hint: vendors) 20 bytes [initial] [rendered] split chunk (cache group: vendors)\n         > ./a ./index.js 1:0-47\n@@ -380,14 +380,12 @@ Child multiple-vendors:\n      ./node_modules/y.js 20 bytes [built]\n Child all:\n     Entrypoint main = all/main.js\n-    Entrypoint a = all/282.js all/954.js all/767.js all/a.js\n-    Entrypoint b = all/282.js all/954.js all/767.js all/b.js\n-    Entrypoint c = all/282.js all/769.js all/767.js all/c.js\n-    chunk all/b.js (b) 92 bytes (javascript) 4.45 KiB (runtime) [entry] [rendered]\n+    Entrypoint a = all/282.js all/954.js all/767.js all/async-a.js all/a.js\n+    Entrypoint b = all/282.js all/954.js all/767.js all/568.js all/async-b.js all/b.js\n+    Entrypoint c = all/282.js all/769.js all/767.js all/568.js all/async-c.js all/c.js\n+    chunk all/b.js (b) 4.44 KiB [entry] [rendered]\n         > ./b b\n-     ./b.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n+        5 root modules\n     chunk all/async-g.js (async-g) 34 bytes [rendered]\n         > ./g ./a.js 6:0-47\n      ./g.js 34 bytes [built]\n@@ -403,21 +401,23 @@ Child all:\n         > ./b b\n         > ./c c\n      ./node_modules/x.js 20 bytes [built]\n-    chunk all/async-b.js (async-b) 72 bytes [rendered]\n+    chunk all/async-b.js (async-b) 72 bytes [initial] [rendered] reused as split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n+        > ./b b\n      ./b.js 72 bytes [built]\n-    chunk all/async-c.js (async-c) 72 bytes [rendered]\n+    chunk all/async-c.js (async-c) 72 bytes [initial] [rendered] reused as split chunk (cache group: default)\n         > ./c ./index.js 3:0-47\n-     ./c.js 72 bytes [built]\n-    chunk all/c.js (c) 92 bytes (javascript) 4.45 KiB (runtime) [entry] [rendered]\n         > ./c c\n      ./c.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n-    chunk all/568.js 20 bytes [rendered] split chunk (cache group: default)\n+    chunk all/c.js (c) 4.44 KiB [entry] [rendered]\n+        > ./c c\n+        5 root modules\n+    chunk all/568.js 20 bytes [initial] [rendered] split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n         > ./c ./index.js 3:0-47\n         > ./g ./a.js 6:0-47\n+        > ./b b\n+        > ./c c\n      ./f.js 20 bytes [built]\n     chunk all/767.js 20 bytes [initial] [rendered] split chunk (cache group: default)\n         > ./a ./index.js 1:0-47\n@@ -431,12 +431,12 @@ Child all:\n         > ./c ./index.js 3:0-47\n         > ./c c\n      ./node_modules/z.js 20 bytes [built]\n-    chunk all/a.js (a) 156 bytes (javascript) 6.57 KiB (runtime) [entry] [rendered]\n+    chunk all/a.js (a) 6.57 KiB [entry] [rendered]\n         > ./a a\n-     ./a.js + 1 modules 156 bytes [built]\n-         + 8 hidden root modules\n-    chunk all/async-a.js (async-a) 156 bytes [rendered]\n+        8 root modules\n+    chunk all/async-a.js (async-a) 156 bytes [initial] [rendered] reused as split chunk (cache group: default)\n         > ./a ./index.js 1:0-47\n+        > ./a a\n      ./a.js + 1 modules 156 bytes [built]\n     chunk all/954.js (id hint: vendors) 20 bytes [initial] [rendered] split chunk (cache group: vendors)\n         > ./a ./index.js 1:0-47\n@@ -2908,14 +2908,12 @@ exports[`StatsTestCases should print correct stats for split-chunks 1`] = `\n      ./node_modules/y.js 20 bytes [built]\n Child all-chunks:\n     Entrypoint main = all-chunks/main.js\n-    Entrypoint a = all-chunks/282.js all-chunks/954.js all-chunks/767.js all-chunks/a.js\n-    Entrypoint b = all-chunks/282.js all-chunks/954.js all-chunks/767.js all-chunks/b.js\n-    Entrypoint c = all-chunks/282.js all-chunks/769.js all-chunks/767.js all-chunks/c.js\n-    chunk all-chunks/b.js (b) 92 bytes (javascript) 4.45 KiB (runtime) ={282}= ={767}= ={954}= [entry] [rendered]\n+    Entrypoint a = all-chunks/282.js all-chunks/954.js all-chunks/767.js all-chunks/async-a.js all-chunks/a.js\n+    Entrypoint b = all-chunks/282.js all-chunks/954.js all-chunks/767.js all-chunks/568.js all-chunks/async-b.js all-chunks/b.js\n+    Entrypoint c = all-chunks/282.js all-chunks/769.js all-chunks/767.js all-chunks/568.js all-chunks/async-c.js all-chunks/c.js\n+    chunk all-chunks/b.js (b) 4.44 KiB ={282}= ={334}= ={568}= ={767}= ={954}= [entry] [rendered]\n         > ./b b\n-     ./b.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n+        5 root modules\n     chunk all-chunks/async-g.js (async-g) 34 bytes <{282}> <{767}> <{786}> <{794}> <{954}> ={568}= [rendered]\n         > ./g ./a.js 6:0-47\n      ./g.js 34 bytes [built]\n@@ -2931,21 +2929,23 @@ Child all-chunks:\n         > ./b b\n         > ./c c\n      ./node_modules/x.js 20 bytes [built]\n-    chunk all-chunks/async-b.js (async-b) 72 bytes <{179}> ={282}= ={568}= ={767}= ={954}= [rendered]\n+    chunk all-chunks/async-b.js (async-b) 72 bytes <{179}> ={128}= ={282}= ={568}= ={767}= ={954}= [initial] [rendered] reused as split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n+        > ./b b\n      ./b.js 72 bytes [built]\n-    chunk all-chunks/async-c.js (async-c) 72 bytes <{179}> ={282}= ={568}= ={767}= ={769}= [rendered]\n+    chunk all-chunks/async-c.js (async-c) 72 bytes <{179}> ={282}= ={459}= ={568}= ={767}= ={769}= [initial] [rendered] reused as split chunk (cache group: default)\n         > ./c ./index.js 3:0-47\n-     ./c.js 72 bytes [built]\n-    chunk all-chunks/c.js (c) 92 bytes (javascript) 4.45 KiB (runtime) ={282}= ={767}= ={769}= [entry] [rendered]\n         > ./c c\n      ./c.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n-    chunk all-chunks/568.js 20 bytes <{179}> <{282}> <{767}> <{786}> <{794}> <{954}> ={137}= ={282}= ={334}= ={383}= ={767}= ={769}= ={954}= [rendered] split chunk (cache group: default)\n+    chunk all-chunks/c.js (c) 4.44 KiB ={282}= ={383}= ={568}= ={767}= ={769}= [entry] [rendered]\n+        > ./c c\n+        5 root modules\n+    chunk all-chunks/568.js 20 bytes <{179}> <{282}> <{767}> <{786}> <{794}> <{954}> ={128}= ={137}= ={282}= ={334}= ={383}= ={459}= ={767}= ={769}= ={954}= [initial] [rendered] split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n         > ./c ./index.js 3:0-47\n         > ./g ./a.js 6:0-47\n+        > ./b b\n+        > ./c c\n      ./f.js 20 bytes [built]\n     chunk all-chunks/767.js 20 bytes <{179}> ={128}= ={282}= ={334}= ={383}= ={459}= ={568}= ={769}= ={786}= ={794}= ={954}= >{137}< >{568}< [initial] [rendered] split chunk (cache group: default)\n         > ./a ./index.js 1:0-47\n@@ -2959,12 +2959,12 @@ Child all-chunks:\n         > ./c ./index.js 3:0-47\n         > ./c c\n      ./node_modules/z.js 20 bytes [built]\n-    chunk all-chunks/a.js (a) 156 bytes (javascript) 6.58 KiB (runtime) ={282}= ={767}= ={954}= >{137}< >{568}< [entry] [rendered]\n+    chunk all-chunks/a.js (a) 6.57 KiB ={282}= ={767}= ={794}= ={954}= >{137}< >{568}< [entry] [rendered]\n         > ./a a\n-     ./a.js + 1 modules 156 bytes [built]\n-         + 8 hidden root modules\n-    chunk all-chunks/async-a.js (async-a) 156 bytes <{179}> ={282}= ={767}= ={954}= >{137}< >{568}< [rendered]\n+        8 root modules\n+    chunk all-chunks/async-a.js (async-a) 156 bytes <{179}> ={282}= ={767}= ={786}= ={954}= >{137}< >{568}< [initial] [rendered] reused as split chunk (cache group: default)\n         > ./a ./index.js 1:0-47\n+        > ./a a\n      ./a.js + 1 modules 156 bytes [built]\n     chunk all-chunks/954.js (id hint: vendors) 20 bytes <{179}> ={128}= ={282}= ={334}= ={568}= ={767}= ={786}= ={794}= >{137}< >{568}< [initial] [rendered] split chunk (cache group: defaultVendors)\n         > ./a ./index.js 1:0-47\n@@ -3109,13 +3109,11 @@ Child name-too-long:\n Child custom-chunks-filter:\n     Entrypoint main = custom-chunks-filter/main.js\n     Entrypoint a = custom-chunks-filter/a.js\n-    Entrypoint b = custom-chunks-filter/282.js custom-chunks-filter/954.js custom-chunks-filter/568.js custom-chunks-filter/b.js\n-    Entrypoint c = custom-chunks-filter/282.js custom-chunks-filter/769.js custom-chunks-filter/568.js custom-chunks-filter/c.js\n-    chunk custom-chunks-filter/b.js (b) 92 bytes (javascript) 4.45 KiB (runtime) ={282}= ={568}= ={954}= [entry] [rendered]\n+    Entrypoint b = custom-chunks-filter/282.js custom-chunks-filter/954.js custom-chunks-filter/568.js custom-chunks-filter/767.js custom-chunks-filter/async-b.js custom-chunks-filter/b.js\n+    Entrypoint c = custom-chunks-filter/282.js custom-chunks-filter/769.js custom-chunks-filter/568.js custom-chunks-filter/767.js custom-chunks-filter/async-c.js custom-chunks-filter/c.js\n+    chunk custom-chunks-filter/b.js (b) 4.44 KiB ={282}= ={334}= ={568}= ={767}= ={954}= [entry] [rendered]\n         > ./b b\n-     ./b.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n+        5 root modules\n     chunk custom-chunks-filter/async-g.js (async-g) 34 bytes <{282}> <{767}> <{786}> <{794}> <{954}> ={568}= [rendered]\n         > ./g ./a.js 6:0-47\n      ./g.js 34 bytes [built]\n@@ -3130,28 +3128,30 @@ Child custom-chunks-filter:\n         > ./b b\n         > ./c c\n      ./node_modules/x.js 20 bytes [built]\n-    chunk custom-chunks-filter/async-b.js (async-b) 72 bytes <{179}> ={282}= ={568}= ={767}= ={954}= [rendered]\n+    chunk custom-chunks-filter/async-b.js (async-b) 72 bytes <{179}> ={128}= ={282}= ={568}= ={767}= ={954}= [initial] [rendered] reused as split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n+        > ./b b\n      ./b.js 72 bytes [built]\n-    chunk custom-chunks-filter/async-c.js (async-c) 72 bytes <{179}> ={282}= ={568}= ={767}= ={769}= [rendered]\n+    chunk custom-chunks-filter/async-c.js (async-c) 72 bytes <{179}> ={282}= ={459}= ={568}= ={767}= ={769}= [initial] [rendered] reused as split chunk (cache group: default)\n         > ./c ./index.js 3:0-47\n-     ./c.js 72 bytes [built]\n-    chunk custom-chunks-filter/c.js (c) 92 bytes (javascript) 4.45 KiB (runtime) ={282}= ={568}= ={769}= [entry] [rendered]\n         > ./c c\n      ./c.js 72 bytes [built]\n-         + 5 hidden root modules\n-         + 1 hidden dependent module\n+    chunk custom-chunks-filter/c.js (c) 4.44 KiB ={282}= ={383}= ={568}= ={767}= ={769}= [entry] [rendered]\n+        > ./c c\n+        5 root modules\n     chunk custom-chunks-filter/568.js 20 bytes <{179}> <{282}> <{767}> <{786}> <{794}> <{954}> ={128}= ={137}= ={282}= ={334}= ={383}= ={459}= ={767}= ={769}= ={954}= [initial] [rendered] split chunk (cache group: default)\n         > ./b ./index.js 2:0-47\n         > ./c ./index.js 3:0-47\n         > ./g ./a.js 6:0-47\n         > ./b b\n         > ./c c\n      ./f.js 20 bytes [built]\n-    chunk custom-chunks-filter/767.js 20 bytes <{179}> ={282}= ={334}= ={383}= ={568}= ={769}= ={794}= ={954}= >{137}< >{568}< [rendered] split chunk (cache group: default)\n+    chunk custom-chunks-filter/767.js 20 bytes <{179}> ={128}= ={282}= ={334}= ={383}= ={459}= ={568}= ={769}= ={794}= ={954}= >{137}< >{568}< [initial] [rendered] split chunk (cache group: default)\n         > ./a ./index.js 1:0-47\n         > ./b ./index.js 2:0-47\n         > ./c ./index.js 3:0-47\n+        > ./b b\n+        > ./c c\n      ./d.js 20 bytes [built]\n     chunk custom-chunks-filter/769.js (id hint: vendors) 20 bytes <{179}> ={282}= ={383}= ={459}= ={568}= ={767}= [initial] [rendered] split chunk (cache group: defaultVendors)\n         > ./c ./index.js 3:0-47\n@@ -3910,7 +3910,7 @@ WARNING in Terser Plugin: Dropping unused function someUnRemoteUsedFunction5 [we\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"Hash: a989f2065c294b849089\n+\"Hash: 56904f55562b21cfd300\n Time: X ms\n Built at: 1970-04-20 12:42:42\n                            Asset       Size\n@@ -3923,21 +3923,21 @@ Built at: 1970-04-20 12:42:42\n                    780.bundle.js  525 bytes  [emitted]\n                     99.bundle.js  220 bytes  [emitted]\n a0e9dd97d7ced35a5b2c.module.wasm  154 bytes  [emitted] [immutable]\n-                       bundle.js   11.9 KiB  [emitted]              [name: main-1df31ce3]\n+                       bundle.js   11.9 KiB  [emitted]              [name: main]\n d37b3336426771c2a6e2.module.wasm  531 bytes  [emitted] [immutable]\n ebd3f263522776d85971.module.wasm  156 bytes  [emitted] [immutable]\n Entrypoint main = bundle.js\n chunk 99.bundle.js 50 bytes (javascript) 531 bytes (webassembly) [rendered]\n  ./duff.wasm 50 bytes (javascript) 531 bytes (webassembly) [built]\n+chunk bundle.js (main) 586 bytes (javascript) 6.08 KiB (runtime) [entry] [rendered]\n+ ./index.js 586 bytes [built]\n+     + 9 hidden chunk modules\n chunk 230.bundle.js 50 bytes (javascript) 156 bytes (webassembly) [rendered]\n  ./Q_rsqrt.wasm 50 bytes (javascript) 156 bytes (webassembly) [built]\n chunk 325.bundle.js 1.54 KiB (javascript) 274 bytes (webassembly) [rendered]\n  ./popcnt.wasm 50 bytes (javascript) 120 bytes (webassembly) [built]\n  ./testFunction.wasm 50 bytes (javascript) 154 bytes (webassembly) [built]\n  ./tests.js 1.44 KiB [built]\n-chunk bundle.js (main-1df31ce3) 586 bytes (javascript) 6.08 KiB (runtime) [entry] [rendered]\n- ./index.js 586 bytes [built]\n-     + 9 hidden chunk modules\n chunk 526.bundle.js (id hint: vendors) 34 bytes [rendered] split chunk (cache group: defaultVendors)\n  ./node_modules/env.js 34 bytes [built]\n chunk 780.bundle.js 110 bytes (javascript) 444 bytes (webassembly) [rendered]"
      },
      {
        "sha": "e590c47c9735795228cfbcc1576a6126daf20eac",
        "filename": "test/configCases/split-chunks/chunk-filename-delimiter-default/b.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter-default%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter-default%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter-default%2Fb.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -1,3 +1,4 @@\n const c = require(\"./commons\");\n+require(\"./c\");\n \n module.exports = \"b\" + c;"
      },
      {
        "sha": "4bb3b122e5d79cd2fe1bbc31952b9e17fcce5779",
        "filename": "test/configCases/split-chunks/chunk-filename-delimiter-default/index.js",
        "status": "modified",
        "additions": 7,
        "deletions": 10,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter-default%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter-default%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter-default%2Findex.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -1,13 +1,10 @@\n-it(\"should run\", function() {\n-\tPromise.all(\n-\t\t[\n-\t\t\timport(/* webpackChunkName: \"a\" */ \"./a\"),\n-\t\t\timport(/* webpackChunkName: \"b\" */ \"./b\"),\n-\t\t\timport(/* webpackChunkName: \"c\" */ \"./c\")\n-\t\t]\n-\t);\n+it(\"should run\", function () {\n+\tPromise.all([\n+\t\timport(/* webpackChunkName: \"a\" */ \"./a\"),\n+\t\timport(/* webpackChunkName: \"b\" */ \"./b\")\n+\t]);\n \n \tconst files = require(\"fs\").readdirSync(__dirname);\n-\texpect(files).toContain('a-a_js-2a91f0ff.bundle.js');\n-\texpect(files).toContain('b-b_js-c441f481.bundle.js');\n+\texpect(files).toContain(\"a.bundle.js\");\n+\texpect(files).toContain(\"b-b_js-c441f481.bundle.js\");\n });"
      },
      {
        "sha": "141e9df534f7779845daf6a2ca3158a6a8328daa",
        "filename": "test/configCases/split-chunks/chunk-filename-delimiter/index.js",
        "status": "modified",
        "additions": 7,
        "deletions": 9,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fchunk-filename-delimiter%2Findex.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -1,12 +1,10 @@\n-it(\"should run\", function() {\n-\tPromise.all(\n-\t\t[\n-\t\t\timport(/* webpackChunkName: \"a\" */ \"./a\"),\n-\t\t\timport(/* webpackChunkName: \"b\" */ \"./b\")\n-\t\t]\n-\t);\n+it(\"should run\", function () {\n+\tPromise.all([\n+\t\timport(/* webpackChunkName: \"a\" */ \"./a\"),\n+\t\timport(/* webpackChunkName: \"b\" */ \"./b\")\n+\t]);\n \n \tconst files = require(\"fs\").readdirSync(__dirname);\n-\texpect(files).toContain('a---a_js---2a91f0ff.bundle.js');\n-\texpect(files).toContain('b---b_js---c441f481.bundle.js');\n+\texpect(files).toContain(\"a.bundle.js\");\n+\texpect(files).toContain(\"b---b_js---c441f481.bundle.js\");\n });"
      },
      {
        "sha": "e3866c0c13819f299160cb1899258c231c258845",
        "filename": "test/configCases/split-chunks/max-size-casing/chunk.js",
        "status": "added",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Fchunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Fchunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Fchunk.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1,9 @@\n+import a from \"./file-a1\";\n+import b from \"./file-b1\";\n+import A from \"./file-A2\";\n+import B from \"./file-B2\";\n+export default \"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\" +\n+\ta +\n+\tb +\n+\tA +\n+\tB;"
      },
      {
        "sha": "befaa887ea0f96505a4a6ff2ad0c0da8c34e92a5",
        "filename": "test/configCases/split-chunks/max-size-casing/file-A2.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-A2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-A2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-A2.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1 @@\n+export default \"A2222222222222222222222\";"
      },
      {
        "sha": "8f0106edcdab81897d0cd0681e7fdb1c6b5f5b24",
        "filename": "test/configCases/split-chunks/max-size-casing/file-B2.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-B2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-B2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-B2.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1 @@\n+export default \"B2222222222222222222222\";"
      },
      {
        "sha": "c0f08593055eff2ef247ef88fae89c9cdf33ccb7",
        "filename": "test/configCases/split-chunks/max-size-casing/file-a1.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-a1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-a1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-a1.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1 @@\n+export default \"a1111111111111111111111\";"
      },
      {
        "sha": "6627122b69d4bfdd4c525ae9e2ec5c4fe1ec03c9",
        "filename": "test/configCases/split-chunks/max-size-casing/file-b1.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-b1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-b1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ffile-b1.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1 @@\n+export default \"b1111111111111111111111\";"
      },
      {
        "sha": "03c38ce455d19bcd986bb402f9dcd3e2bfc19312",
        "filename": "test/configCases/split-chunks/max-size-casing/index.js",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Findex.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1,10 @@\n+it(\"should ignore case insenstive chars when generating maxSize filenames\", () =>\n+\timport(/* webpackChunkName: \"chunk\" */ \"./chunk\").then(\n+\t\t({ default: value }) => {\n+\t\t\texpect(value).toContain(\"a111\");\n+\t\t\texpect(value).toContain(\"b111\");\n+\t\t\texpect(value).toContain(\"A222\");\n+\t\t\texpect(value).toContain(\"B222\");\n+\t\t\texpect(value).toContain(\"cccc\");\n+\t\t}\n+\t));"
      },
      {
        "sha": "2e3be0636e9aa75db3205aeb9a495e160276824c",
        "filename": "test/configCases/split-chunks/max-size-casing/test.config.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ftest.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ftest.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Ftest.config.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1,5 @@\n+module.exports = {\n+\tfindBundle: function (i, options) {\n+\t\treturn [\"main.js\"];\n+\t}\n+};"
      },
      {
        "sha": "beebf157473a7424a28d490e3613b80faaab1543",
        "filename": "test/configCases/split-chunks/max-size-casing/webpack.config.js",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/26996b385ed16fbc598fd5e133156d6c45230014/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsplit-chunks%2Fmax-size-casing%2Fwebpack.config.js?ref=26996b385ed16fbc598fd5e133156d6c45230014",
        "patch": "@@ -0,0 +1,14 @@\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\toutput: {\n+\t\tfilename: \"[name].js\"\n+\t},\n+\toptimization: {\n+\t\tchunkIds: \"named\",\n+\t\tsplitChunks: {\n+\t\t\thidePathInfo: false,\n+\t\t\tminSize: 50,\n+\t\t\tmaxSize: 100\n+\t\t}\n+\t}\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/10318",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/10318/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/10318/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/10318/events",
    "html_url": "https://github.com/webpack/webpack/pull/10318",
    "id": 557428743,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5MDE5MzIy",
    "number": 10318,
    "title": "Performance and time logging",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-01-30T11:21:34Z",
    "updated_at": "2020-01-31T09:58:28Z",
    "closed_at": "2020-01-31T09:58:27Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/10318",
      "html_url": "https://github.com/webpack/webpack/pull/10318",
      "diff_url": "https://github.com/webpack/webpack/pull/10318.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/10318.patch",
      "merged_at": "2020-01-31T09:58:27Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance, logging\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/10318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/10318/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "10361b2d2119a07a1c10dcd62a8a0fffbe04e48d",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 63,
        "deletions": 6,
        "changes": 69,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -506,6 +506,8 @@ class Compilation {\n \t\tthis.compilerPath = compiler.compilerPath;\n \t\tthis.cache = compiler.cache;\n \n+\t\tthis.logger = this.getLogger(\"webpack.Compilation\");\n+\n \t\tconst options = compiler.options;\n \t\tthis.options = options;\n \t\tthis.outputOptions = options && options.output;\n@@ -1455,14 +1457,17 @@ class Compilation {\n \t}\n \n \tfinish(callback) {\n+\t\tthis.logger.time(\"finish modules\");\n \t\tconst { moduleGraph, modules } = this;\n \t\tfor (const module of modules) {\n \t\t\tmoduleGraph.finishModule(module);\n \t\t}\n \t\tthis.hooks.finishModules.callAsync(modules, err => {\n+\t\t\tthis.logger.timeEnd(\"finish modules\");\n \t\t\tif (err) return callback(err);\n \n \t\t\t// extract warnings and errors from modules\n+\t\t\tthis.logger.time(\"report dependency errors and warnings\");\n \t\t\tfor (const module of modules) {\n \t\t\t\tthis.reportDependencyErrorsAndWarnings(module, [module]);\n \t\t\t\tconst errors = module.getErrors();\n@@ -1493,6 +1498,7 @@ class Compilation {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\t\t\tthis.logger.timeEnd(\"report dependency errors and warnings\");\n \n \t\t\tcallback();\n \t\t});\n@@ -1525,11 +1531,14 @@ class Compilation {\n \n \t\tthis.hooks.seal.call();\n \n+\t\tthis.logger.time(\"optimize dependencies\");\n \t\twhile (this.hooks.optimizeDependencies.call(this.modules)) {\n \t\t\t/* empty */\n \t\t}\n \t\tthis.hooks.afterOptimizeDependencies.call(this.modules);\n+\t\tthis.logger.timeEnd(\"optimize dependencies\");\n \n+\t\tthis.logger.time(\"create chunks\");\n \t\tthis.hooks.beforeChunks.call();\n \t\tfor (const [name, dependencies] of this.entryDependencies) {\n \t\t\tconst chunk = this.addChunk(name);\n@@ -1557,7 +1566,9 @@ class Compilation {\n \t\t\t/** @type {Entrypoint[]} */ (this.chunkGroups.slice())\n \t\t);\n \t\tthis.hooks.afterChunks.call(this.chunks);\n+\t\tthis.logger.timeEnd(\"create chunks\");\n \n+\t\tthis.logger.time(\"optimize\");\n \t\tthis.hooks.optimize.call();\n \n \t\twhile (this.hooks.optimizeModules.call(this.modules)) {\n@@ -1613,45 +1624,61 @@ class Compilation {\n \t\t\t\t\t}\n \n \t\t\t\t\tthis.hooks.optimizeCodeGeneration.call(this.modules);\n+\t\t\t\t\tthis.logger.timeEnd(\"optimize\");\n \n+\t\t\t\t\tthis.logger.time(\"module hashing\");\n \t\t\t\t\tthis.hooks.beforeModuleHash.call();\n \t\t\t\t\tthis.createModuleHashes();\n \t\t\t\t\tthis.hooks.afterModuleHash.call();\n+\t\t\t\t\tthis.logger.timeEnd(\"module hashing\");\n \n+\t\t\t\t\tthis.logger.time(\"code generation\");\n \t\t\t\t\tthis.hooks.beforeCodeGeneration.call();\n \t\t\t\t\tthis.codeGenerationResults = this.codeGeneration();\n \t\t\t\t\tthis.hooks.afterCodeGeneration.call();\n+\t\t\t\t\tthis.logger.timeEnd(\"code generation\");\n \n+\t\t\t\t\tthis.logger.time(\"runtime requirements\");\n \t\t\t\t\tthis.hooks.beforeRuntimeRequirements.call();\n \t\t\t\t\tthis.processRuntimeRequirements(this.entrypoints.values());\n \t\t\t\t\tthis.hooks.afterRuntimeRequirements.call();\n+\t\t\t\t\tthis.logger.timeEnd(\"runtime requirements\");\n \n+\t\t\t\t\tthis.logger.time(\"hashing\");\n \t\t\t\t\tthis.hooks.beforeHash.call();\n \t\t\t\t\tthis.createHash();\n \t\t\t\t\tthis.hooks.afterHash.call();\n+\t\t\t\t\tthis.logger.timeEnd(\"hashing\");\n \n \t\t\t\t\tif (shouldRecord) {\n+\t\t\t\t\t\tthis.logger.time(\"record hash\");\n \t\t\t\t\t\tthis.hooks.recordHash.call(this.records);\n+\t\t\t\t\t\tthis.logger.timeEnd(\"record hash\");\n \t\t\t\t\t}\n \n+\t\t\t\t\tthis.logger.time(\"module assets\");\n \t\t\t\t\tthis.clearAssets();\n \n \t\t\t\t\tthis.hooks.beforeModuleAssets.call();\n \t\t\t\t\tthis.createModuleAssets();\n+\t\t\t\t\tthis.logger.timeEnd(\"module assets\");\n \n \t\t\t\t\tconst cont = () => {\n+\t\t\t\t\t\tthis.logger.time(\"additional assets\");\n \t\t\t\t\t\tthis.hooks.additionalChunkAssets.call(this.chunks);\n \t\t\t\t\t\tthis.summarizeDependencies();\n \t\t\t\t\t\tif (shouldRecord) {\n \t\t\t\t\t\t\tthis.hooks.record.call(this, this.records);\n \t\t\t\t\t\t}\n \n \t\t\t\t\t\tthis.hooks.additionalAssets.callAsync(err => {\n+\t\t\t\t\t\t\tthis.logger.timeEnd(\"additional assets\");\n \t\t\t\t\t\t\tif (err) {\n \t\t\t\t\t\t\t\treturn callback(\n \t\t\t\t\t\t\t\t\tmakeWebpackError(err, \"Compilation.hooks.additionalAssets\")\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tthis.logger.time(\"optimize assets\");\n \t\t\t\t\t\t\tthis.hooks.optimizeChunkAssets.callAsync(this.chunks, err => {\n \t\t\t\t\t\t\t\tif (err) {\n \t\t\t\t\t\t\t\t\treturn callback(\n@@ -1669,17 +1696,20 @@ class Compilation {\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\tthis.hooks.afterOptimizeAssets.call(this.assets);\n+\t\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"optimize assets\");\n \t\t\t\t\t\t\t\t\tif (this.hooks.needAdditionalSeal.call()) {\n \t\t\t\t\t\t\t\t\t\tthis.unseal();\n \t\t\t\t\t\t\t\t\t\treturn this.seal(callback);\n \t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tthis.logger.time(\"finish assets\");\n \t\t\t\t\t\t\t\t\tthis.hooks.finishAssets.callAsync(this.assets, err => {\n \t\t\t\t\t\t\t\t\t\tif (err) {\n \t\t\t\t\t\t\t\t\t\t\treturn callback(\n \t\t\t\t\t\t\t\t\t\t\t\tmakeWebpackError(err, \"Compilation.hooks.finishAssets\")\n \t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\tthis.hooks.afterFinishAssets.call(this.assets);\n+\t\t\t\t\t\t\t\t\t\tthis.logger.timeEnd(\"finish assets\");\n \t\t\t\t\t\t\t\t\t\tthis.cache.storeBuildDependencies(\n \t\t\t\t\t\t\t\t\t\t\tthis.buildDependencies,\n \t\t\t\t\t\t\t\t\t\t\terr => {\n@@ -1695,15 +1725,18 @@ class Compilation {\n \t\t\t\t\t\t});\n \t\t\t\t\t};\n \n+\t\t\t\t\tthis.logger.time(\"create chunk assets\");\n \t\t\t\t\tif (this.hooks.shouldGenerateChunkAssets.call() !== false) {\n \t\t\t\t\t\tthis.hooks.beforeChunkAssets.call();\n \t\t\t\t\t\tthis.createChunkAssets(err => {\n+\t\t\t\t\t\t\tthis.logger.timeEnd(\"create chunk assets\");\n \t\t\t\t\t\t\tif (err) {\n \t\t\t\t\t\t\t\treturn callback(err);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tcont();\n \t\t\t\t\t\t});\n \t\t\t\t\t} else {\n+\t\t\t\t\t\tthis.logger.timeEnd(\"create chunk assets\");\n \t\t\t\t\t\tcont();\n \t\t\t\t\t}\n \t\t\t\t}\n@@ -2147,6 +2180,7 @@ class Compilation {\n \t}\n \n \tcreateHash() {\n+\t\tthis.logger.time(\"hashing: initialize hash\");\n \t\tconst chunkGraph = this.chunkGraph;\n \t\tconst outputOptions = this.outputOptions;\n \t\tconst hashFunction = outputOptions.hashFunction;\n@@ -2157,16 +2191,30 @@ class Compilation {\n \t\t\thash.update(outputOptions.hashSalt);\n \t\t}\n \t\tthis.hooks.fullHash.call(hash);\n-\t\tfor (const child of this.children) {\n-\t\t\thash.update(child.hash);\n+\t\tthis.logger.timeEnd(\"hashing: initialize hash\");\n+\t\tif (this.children.length > 0) {\n+\t\t\tthis.logger.time(\"hashing: hash child compilations\");\n+\t\t\tfor (const child of this.children) {\n+\t\t\t\thash.update(child.hash);\n+\t\t\t}\n+\t\t\tthis.logger.timeEnd(\"hashing: hash child compilations\");\n \t\t}\n-\t\tfor (const warning of this.warnings) {\n-\t\t\thash.update(`${warning.message}`);\n+\t\tif (this.warnings.length > 0) {\n+\t\t\tthis.logger.time(\"hashing: hash warnings\");\n+\t\t\tfor (const warning of this.warnings) {\n+\t\t\t\thash.update(`${warning.message}`);\n+\t\t\t}\n+\t\t\tthis.logger.timeEnd(\"hashing: hash warnings\");\n \t\t}\n-\t\tfor (const error of this.errors) {\n-\t\t\thash.update(`${error.message}`);\n+\t\tif (this.errors.length > 0) {\n+\t\t\tthis.logger.time(\"hashing: hash errors\");\n+\t\t\tfor (const error of this.errors) {\n+\t\t\t\thash.update(`${error.message}`);\n+\t\t\t}\n+\t\t\tthis.logger.timeEnd(\"hashing: hash errors\");\n \t\t}\n \n+\t\tthis.logger.time(\"hashing: sort chunks\");\n \t\t// clone needed as sort below is inplace mutation\n \t\tconst chunks = Array.from(this.chunks);\n \t\t/**\n@@ -2181,9 +2229,11 @@ class Compilation {\n \t\t\tif (!aEntry && bEntry) return -1;\n \t\t\treturn byId(a, b);\n \t\t});\n+\t\tthis.logger.timeEnd(\"hashing: sort chunks\");\n \t\tfor (let i = 0; i < chunks.length; i++) {\n \t\t\tconst chunk = chunks[i];\n \t\t\t// Last minute module hash generation for modules that depend on chunk hashes\n+\t\t\tthis.logger.time(\"hashing: hash runtime modules\");\n \t\t\tfor (const module of chunkGraph.getChunkModulesIterable(chunk)) {\n \t\t\t\tif (!chunkGraph.getModuleHash(module)) {\n \t\t\t\t\tconst moduleHash = createHash(hashFunction);\n@@ -2198,7 +2248,9 @@ class Compilation {\n \t\t\t\t\t);\n \t\t\t\t}\n \t\t\t}\n+\t\t\tthis.logger.timeAggregate(\"hashing: hash runtime modules\");\n \t\t\tconst chunkHash = createHash(hashFunction);\n+\t\t\tthis.logger.time(\"hashing: hash chunks\");\n \t\t\ttry {\n \t\t\t\tif (outputOptions.hashSalt) {\n \t\t\t\t\tchunkHash.update(outputOptions.hashSalt);\n@@ -2216,9 +2268,14 @@ class Compilation {\n \t\t\t} catch (err) {\n \t\t\t\tthis.errors.push(new ChunkRenderError(chunk, \"\", err));\n \t\t\t}\n+\t\t\tthis.logger.timeAggregate(\"hashing: hash chunks\");\n \t\t}\n+\t\tthis.logger.timeAggregateEnd(\"hashing: hash runtime modules\");\n+\t\tthis.logger.timeAggregateEnd(\"hashing: hash chunks\");\n+\t\tthis.logger.time(\"hashing: hash digest\");\n \t\tthis.fullHash = /** @type {string} */ (hash.digest(hashDigest));\n \t\tthis.hash = this.fullHash.substr(0, hashDigestLength);\n+\t\tthis.logger.timeEnd(\"hashing: hash digest\");\n \t}\n \n \t/**"
      },
      {
        "sha": "bb2386a60475b3003183d2e0dcfcebfa37bcf2fd",
        "filename": "lib/FlagDependencyExportsPlugin.js",
        "status": "modified",
        "additions": 13,
        "deletions": 1,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FFlagDependencyExportsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FFlagDependencyExportsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyExportsPlugin.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -33,10 +33,15 @@ class FlagDependencyExportsPlugin {\n \t\t\t\tcompilation.hooks.finishModules.tapAsync(\n \t\t\t\t\t\"FlagDependencyExportsPlugin\",\n \t\t\t\t\t(modules, callback) => {\n+\t\t\t\t\t\tconst logger = compilation.getLogger(\n+\t\t\t\t\t\t\t\"webpack.FlagDependencyExportsPlugin\"\n+\t\t\t\t\t\t);\n+\n \t\t\t\t\t\t/** @type {Queue<Module>} */\n \t\t\t\t\t\tconst queue = new Queue();\n \n \t\t\t\t\t\t// Step 1: Try to restore cached provided export info from cache\n+\t\t\t\t\t\tlogger.time(\"restore cached provided exports\");\n \t\t\t\t\t\tasyncLib.each(\n \t\t\t\t\t\t\tmodules,\n \t\t\t\t\t\t\t(module, callback) => {\n@@ -69,6 +74,7 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t},\n \t\t\t\t\t\t\terr => {\n+\t\t\t\t\t\t\t\tlogger.timeEnd(\"restore cached provided exports\");\n \t\t\t\t\t\t\t\tif (err) return callback(err);\n \n \t\t\t\t\t\t\t\t/** @type {Set<Module>} */\n@@ -187,6 +193,7 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t};\n \n+\t\t\t\t\t\t\t\tlogger.time(\"figure out provided exports\");\n \t\t\t\t\t\t\t\twhile (queue.length > 0) {\n \t\t\t\t\t\t\t\t\tmodule = queue.dequeue();\n \n@@ -215,7 +222,9 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tlogger.timeEnd(\"figure out provided exports\");\n \n+\t\t\t\t\t\t\t\tlogger.time(\"store provided exports into cache\");\n \t\t\t\t\t\t\t\tasyncLib.each(\n \t\t\t\t\t\t\t\t\tmodulesToStore,\n \t\t\t\t\t\t\t\t\t(module, callback) => {\n@@ -235,7 +244,10 @@ class FlagDependencyExportsPlugin {\n \t\t\t\t\t\t\t\t\t\t\tcallback\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\t\t\tcallback\n+\t\t\t\t\t\t\t\t\terr => {\n+\t\t\t\t\t\t\t\t\t\tlogger.timeEnd(\"store provided exports into cache\");\n+\t\t\t\t\t\t\t\t\t\tcallback(err);\n+\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t);"
      },
      {
        "sha": "8a4f739191a117bcaa539c28b24f661a14f61960",
        "filename": "lib/FlagDependencyUsagePlugin.js",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FFlagDependencyUsagePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FFlagDependencyUsagePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyUsagePlugin.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -30,6 +30,10 @@ class FlagDependencyUsagePlugin {\n \t\t\t\t\tstage: STAGE_DEFAULT\n \t\t\t\t},\n \t\t\t\tmodules => {\n+\t\t\t\t\tconst logger = compilation.getLogger(\n+\t\t\t\t\t\t\"webpack.FlagDependencyUsagePlugin\"\n+\t\t\t\t\t);\n+\n \t\t\t\t\t/** @type {Map<ExportsInfo, Module>} */\n \t\t\t\t\tconst exportInfoToModuleMap = new Map();\n \n@@ -130,12 +134,15 @@ class FlagDependencyUsagePlugin {\n \t\t\t\t\t\tprocessModule(connection.module, referencedExports);\n \t\t\t\t\t};\n \n+\t\t\t\t\tlogger.time(\"initialize exports usage\");\n \t\t\t\t\tfor (const module of modules) {\n \t\t\t\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n \t\t\t\t\t\texportInfoToModuleMap.set(exportsInfo, module);\n \t\t\t\t\t\texportsInfo.setHasUseInfo();\n \t\t\t\t\t}\n+\t\t\t\t\tlogger.timeEnd(\"initialize exports usage\");\n \n+\t\t\t\t\tlogger.time(\"trace exports usage in graph\");\n \t\t\t\t\t/** @type {Queue<DependenciesBlock>} */\n \t\t\t\t\tconst queue = new Queue();\n \n@@ -153,6 +160,7 @@ class FlagDependencyUsagePlugin {\n \t\t\t\t\t\tconst depBlock = queue.dequeue();\n \t\t\t\t\t\tprocessDependenciesBlock(depBlock);\n \t\t\t\t\t}\n+\t\t\t\t\tlogger.timeEnd(\"trace exports usage in graph\");\n \t\t\t\t}\n \t\t\t);\n \t\t});"
      },
      {
        "sha": "12d2167189437b86af3e0f8a6f50a8e00aef7af9",
        "filename": "lib/ModuleGraphConnection.js",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FModuleGraphConnection.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2FModuleGraphConnection.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraphConnection.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -15,7 +15,7 @@ class ModuleGraphConnection {\n \t * @param {Module} module the referenced module\n \t * @param {string=} explanation some extra detail\n \t * @param {boolean=} weak the reference is weak\n-\t * @param {function(): boolean=} condition condition for the connection\n+\t * @param {function(ModuleGraphConnection): boolean=} condition condition for the connection\n \t */\n \tconstructor(\n \t\toriginModule,\n@@ -33,7 +33,7 @@ class ModuleGraphConnection {\n \t\tthis.weak = weak;\n \t\tthis.conditional = !!condition;\n \t\tthis._active = true;\n-\t\t/** @type {function(): boolean} */\n+\t\t/** @type {function(ModuleGraphConnection): boolean} */\n \t\tthis.condition = condition;\n \t\t/** @type {Set<string>} */\n \t\tthis.explanations = undefined;\n@@ -44,13 +44,13 @@ class ModuleGraphConnection {\n \t}\n \n \t/**\n-\t * @param {function(): boolean} condition condition for the connection\n+\t * @param {function(ModuleGraphConnection): boolean} condition condition for the connection\n \t * @returns {void}\n \t */\n \taddCondition(condition) {\n \t\tif (this.conditional) {\n \t\t\tconst old = this.condition;\n-\t\t\tthis.condition = () => old() && condition();\n+\t\t\tthis.condition = c => old(c) && condition(c);\n \t\t} else if (this._active) {\n \t\t\tthis.conditional = true;\n \t\t\tthis.condition = condition;\n@@ -75,7 +75,7 @@ class ModuleGraphConnection {\n \n \tget active() {\n \t\tif (!this.conditional) return this._active;\n-\t\treturn this.condition();\n+\t\treturn this.condition(this);\n \t}\n \n \tset active(value) {"
      },
      {
        "sha": "e9b977d9c6faa76e66702144d6ac1ba02042c250",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 22,
        "deletions": 2,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -441,7 +441,15 @@ class Pack {\n \t\t\t} else {\n \t\t\t\tconst idx = this.content.length;\n \t\t\t\tconst lazy = read();\n-\t\t\t\tthis.content.push(new PackContent(items, new Set(), lazy));\n+\t\t\t\tthis.content.push(\n+\t\t\t\t\tnew PackContent(\n+\t\t\t\t\t\titems,\n+\t\t\t\t\t\tnew Set(),\n+\t\t\t\t\t\tlazy,\n+\t\t\t\t\t\tlogger,\n+\t\t\t\t\t\t`${this.content.length}`\n+\t\t\t\t\t)\n+\t\t\t\t);\n \t\t\t\tfor (const identifier of items) {\n \t\t\t\t\tthis.itemInfo.get(identifier).location = idx;\n \t\t\t\t}\n@@ -458,29 +466,41 @@ class PackContent {\n \t * @param {Set<string>} items keys\n \t * @param {Set<string>} usedItems used keys\n \t * @param {Map<string, any> | function(): Promise<Map<string, any>>} dataOrFn sync or async content\n+\t * @param {Logger=} logger logger for logging\n+\t * @param {string=} lazyName name of dataOrFn for logging\n \t */\n-\tconstructor(items, usedItems, dataOrFn) {\n+\tconstructor(items, usedItems, dataOrFn, logger, lazyName) {\n \t\tthis.items = items;\n \t\t/** @type {function(): Map<string, any> | Promise<Map<string, any>>} */\n \t\tthis.lazy = typeof dataOrFn === \"function\" ? dataOrFn : undefined;\n \t\t/** @type {Map<string, any>} */\n \t\tthis.content = typeof dataOrFn === \"function\" ? undefined : dataOrFn;\n \t\tthis.outdated = false;\n \t\tthis.used = usedItems;\n+\t\tthis.logger = logger;\n+\t\tthis.lazyName = lazyName;\n \t}\n \n \tget(identifier) {\n \t\tthis.used.add(identifier);\n \t\tif (this.content) {\n \t\t\treturn this.content.get(identifier);\n \t\t}\n+\t\tconst { lazyName } = this;\n+\t\tif (lazyName) {\n+\t\t\t// only log once\n+\t\t\tthis.lazyName = undefined;\n+\t\t\tthis.logger.time(`restore cache content ${lazyName}`);\n+\t\t}\n \t\tconst value = this.lazy();\n \t\tif (value instanceof Promise) {\n \t\t\treturn value.then(data => {\n+\t\t\t\tif (lazyName) this.logger.timeEnd(`restore cache content ${lazyName}`);\n \t\t\t\tthis.content = data;\n \t\t\t\treturn data.get(identifier);\n \t\t\t});\n \t\t} else {\n+\t\t\tif (lazyName) this.logger.timeEnd(`restore cache content ${lazyName}`);\n \t\t\tthis.content = value;\n \t\t\treturn value.get(identifier);\n \t\t}"
      },
      {
        "sha": "d0eb4361237330300ef06abb8196d21e42292278",
        "filename": "lib/dependencies/HarmonyImportSideEffectDependency.js",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -23,6 +23,21 @@ class HarmonyImportSideEffectDependency extends HarmonyImportDependency {\n \tget type() {\n \t\treturn \"harmony side effect evaluation\";\n \t}\n+\n+\t/**\n+\t * @param {ModuleGraph} moduleGraph module graph\n+\t * @returns {function(): boolean} function to determine if the connection is active\n+\t */\n+\tgetCondition(moduleGraph) {\n+\t\treturn connection => {\n+\t\t\tconst refModule = connection.resolvedModule;\n+\t\t\treturn (\n+\t\t\t\t!refModule ||\n+\t\t\t\trefModule.factoryMeta === undefined ||\n+\t\t\t\t!refModule.factoryMeta.sideEffectFree\n+\t\t\t);\n+\t\t};\n+\t}\n }\n \n makeSerializable("
      },
      {
        "sha": "e096ddb3688b0f64fcc9a70497466c4a097f7ca9",
        "filename": "lib/logging/Logger.js",
        "status": "modified",
        "additions": 32,
        "deletions": 0,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Flogging%2FLogger.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Flogging%2FLogger.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Flogging%2FLogger.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -33,6 +33,7 @@ exports.LogType = LogType;\n \n const LOG_SYMBOL = Symbol(\"webpack logger raw log method\");\n const TIMERS_SYMBOL = Symbol(\"webpack logger times\");\n+const TIMERS_AGGREGATES_SYMBOL = Symbol(\"webpack logger aggregated times\");\n \n class WebpackLogger {\n \t/**\n@@ -125,6 +126,37 @@ class WebpackLogger {\n \t\tthis[TIMERS_SYMBOL].delete(label);\n \t\tthis[LOG_SYMBOL](LogType.time, [label, ...time]);\n \t}\n+\n+\ttimeAggregate(label) {\n+\t\tconst prev = this[TIMERS_SYMBOL] && this[TIMERS_SYMBOL].get(label);\n+\t\tif (!prev) {\n+\t\t\tthrow new Error(\n+\t\t\t\t`No such label '${label}' for WebpackLogger.timeAggregate()`\n+\t\t\t);\n+\t\t}\n+\t\tconst time = process.hrtime(prev);\n+\t\tthis[TIMERS_SYMBOL].delete(label);\n+\t\tthis[TIMERS_AGGREGATES_SYMBOL] =\n+\t\t\tthis[TIMERS_AGGREGATES_SYMBOL] || new Map();\n+\t\tconst current = this[TIMERS_AGGREGATES_SYMBOL].get(label);\n+\t\tif (current !== undefined) {\n+\t\t\tif (time[1] + current[1] > 1e9) {\n+\t\t\t\ttime[0] += current[0] + 1;\n+\t\t\t\ttime[1] = time[1] - 1e9 + current[1];\n+\t\t\t} else {\n+\t\t\t\ttime[0] += current[0];\n+\t\t\t\ttime[1] += current[1];\n+\t\t\t}\n+\t\t}\n+\t\tthis[TIMERS_AGGREGATES_SYMBOL].set(label, time);\n+\t}\n+\n+\ttimeAggregateEnd(label) {\n+\t\tif (this[TIMERS_AGGREGATES_SYMBOL] === undefined) return;\n+\t\tconst time = this[TIMERS_AGGREGATES_SYMBOL].get(label);\n+\t\tif (time === undefined) return;\n+\t\tthis[LOG_SYMBOL](LogType.time, [label, ...time]);\n+\t}\n }\n \n exports.Logger = WebpackLogger;"
      },
      {
        "sha": "b9b6a4a232e6ce1c63df7f0b9d72883db40226bb",
        "filename": "lib/optimize/InnerGraphPlugin.js",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Foptimize%2FInnerGraphPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Foptimize%2FInnerGraphPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FInnerGraphPlugin.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -101,6 +101,8 @@ class InnerGraphPlugin {\n \t\tcompiler.hooks.compilation.tap(\n \t\t\t\"InnerGraphPlugin\",\n \t\t\t(compilation, { normalModuleFactory }) => {\n+\t\t\t\tconst logger = compilation.getLogger(\"webpack.InnerGraphPlugin\");\n+\n \t\t\t\tcompilation.dependencyTemplates.set(\n \t\t\t\t\tPureExpressionDependency,\n \t\t\t\t\tnew PureExpressionDependency.Template()\n@@ -118,6 +120,7 @@ class InnerGraphPlugin {\n \t\t\t\t\tparser.hooks.finish.tap(\"InnerGraphPlugin\", () => {\n \t\t\t\t\t\tif (!InnerGraph.isEnabled(parser.state)) return;\n \n+\t\t\t\t\t\tlogger.time(\"infer dependency usage\");\n \t\t\t\t\t\tfor (const [dependency, usage] of InnerGraph.inferDependencyUsage(\n \t\t\t\t\t\t\tparser.state\n \t\t\t\t\t\t)) {\n@@ -134,6 +137,7 @@ class InnerGraphPlugin {\n \t\t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n+\t\t\t\t\t\tlogger.timeAggregate(\"infer dependency usage\");\n \t\t\t\t\t});\n \t\t\t\t\t/** @type {WeakMap<{}, TopLevelSymbol>} */\n \t\t\t\t\tconst statementWithTopLevelSymbol = new WeakMap();\n@@ -260,6 +264,10 @@ class InnerGraphPlugin {\n \t\t\t\tnormalModuleFactory.hooks.parser\n \t\t\t\t\t.for(\"javascript/esm\")\n \t\t\t\t\t.tap(\"InnerGraphPlugin\", handler);\n+\n+\t\t\t\tcompilation.hooks.finishModules.tap(\"InnerGraphPlugin\", () => {\n+\t\t\t\t\tlogger.timeAggregateEnd(\"infer dependency usage\");\n+\t\t\t\t});\n \t\t\t}\n \t\t);\n \t}"
      },
      {
        "sha": "6b76a8b00f376be95cad43d7a4137948e693f356",
        "filename": "lib/optimize/SideEffectsFlagPlugin.js",
        "status": "modified",
        "additions": 14,
        "deletions": 19,
        "changes": 33,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSideEffectsFlagPlugin.js?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -8,7 +8,6 @@\n const glob2regexp = require(\"glob-to-regexp\");\n const { STAGE_DEFAULT } = require(\"../OptimizationStages\");\n const HarmonyExportImportedSpecifierDependency = require(\"../dependencies/HarmonyExportImportedSpecifierDependency\");\n-const HarmonyImportSideEffectDependency = require(\"../dependencies/HarmonyImportSideEffectDependency\");\n const HarmonyImportSpecifierDependency = require(\"../dependencies/HarmonyImportSpecifierDependency\");\n \n /** @typedef {import(\"../Compiler\")} Compiler */\n@@ -99,17 +98,20 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\tstage: STAGE_DEFAULT\n \t\t\t\t},\n \t\t\t\tmodules => {\n+\t\t\t\t\tconst logger = compilation.getLogger(\"webpack.SideEffectsFlagPlugin\");\n+\n \t\t\t\t\t/** @type {Map<Module, Map<string, ExportInModule>>} */\n \t\t\t\t\tconst reexportMaps = new Map();\n \n \t\t\t\t\t// Capture reexports of sideEffectFree modules\n+\t\t\t\t\tlogger.time(\"capture reexports from modules\");\n \t\t\t\t\tfor (const module of modules) {\n-\t\t\t\t\t\tfor (const dep of module.dependencies) {\n-\t\t\t\t\t\t\tif (dep instanceof HarmonyExportImportedSpecifierDependency) {\n-\t\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\t\tmodule.factoryMeta !== undefined &&\n-\t\t\t\t\t\t\t\t\tmodule.factoryMeta.sideEffectFree\n-\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\tmodule.factoryMeta !== undefined &&\n+\t\t\t\t\t\t\tmodule.factoryMeta.sideEffectFree\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\tfor (const dep of module.dependencies) {\n+\t\t\t\t\t\t\t\tif (dep instanceof HarmonyExportImportedSpecifierDependency) {\n \t\t\t\t\t\t\t\t\tconst mode = dep.getMode(moduleGraph, true);\n \t\t\t\t\t\t\t\t\tif (mode.type === \"normal-reexport\") {\n \t\t\t\t\t\t\t\t\t\tlet map = reexportMaps.get(module);\n@@ -127,23 +129,13 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t} else if (dep instanceof HarmonyImportSideEffectDependency) {\n-\t\t\t\t\t\t\t\tconst connection = moduleGraph.getConnection(dep);\n-\t\t\t\t\t\t\t\tif (connection) {\n-\t\t\t\t\t\t\t\t\tconst refModule = connection.resolvedModule;\n-\t\t\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\t\t\trefModule &&\n-\t\t\t\t\t\t\t\t\t\trefModule.factoryMeta !== undefined &&\n-\t\t\t\t\t\t\t\t\t\trefModule.factoryMeta.sideEffectFree\n-\t\t\t\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\t\t\t\tconnection.active = false;\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n+\t\t\t\t\tlogger.timeEnd(\"capture reexports from modules\");\n \n \t\t\t\t\t// Flatten reexports\n+\t\t\t\t\tlogger.time(\"flatten reexports\");\n \t\t\t\t\tfor (const map of reexportMaps.values()) {\n \t\t\t\t\t\tfor (const pair of map) {\n \t\t\t\t\t\t\tlet mapping = pair[1];\n@@ -158,8 +150,10 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n+\t\t\t\t\tlogger.timeEnd(\"flatten reexports\");\n \n \t\t\t\t\t// Update imports along the reexports from sideEffectFree modules\n+\t\t\t\t\tlogger.time(\"update imports\");\n \t\t\t\t\tfor (const [module, map] of reexportMaps) {\n \t\t\t\t\t\tfor (const connection of moduleGraph.getIncomingConnections(\n \t\t\t\t\t\t\tmodule\n@@ -192,6 +186,7 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n+\t\t\t\t\tlogger.timeEnd(\"update imports\");\n \t\t\t\t}\n \t\t\t);\n \t\t});"
      },
      {
        "sha": "a9f69c9817663416a65ad931106e6b8e97fc5fb0",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 39,
        "deletions": 0,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/e96695a18aab1f720daff6078b1df1bbb5ce3674/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/e96695a18aab1f720daff6078b1df1bbb5ce3674/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=e96695a18aab1f720daff6078b1df1bbb5ce3674",
        "patch": "@@ -2426,6 +2426,45 @@ LOG from webpack.Compiler\n <t> done hook: Xms\n <t> beginIdle: Xms\n \n+LOG from webpack.FlagDependencyExportsPlugin\n+<t> restore cached provided exports: Xms\n+<t> figure out provided exports: Xms\n+<t> store provided exports into cache: Xms\n+\n+LOG from webpack.InnerGraphPlugin\n+<t> infer dependency usage: Xms\n+\n+LOG from webpack.Compilation\n+<t> finish modules: Xms\n+<t> report dependency errors and warnings: Xms\n+<t> optimize dependencies: Xms\n+<t> create chunks: Xms\n+<t> optimize: Xms\n+<t> module hashing: Xms\n+<t> code generation: Xms\n+<t> runtime requirements: Xms\n+<t> hashing: initialize hash: Xms\n+<t> hashing: sort chunks: Xms\n+<t> hashing: hash runtime modules: Xms\n+<t> hashing: hash chunks: Xms\n+<t> hashing: hash digest: Xms\n+<t> hashing: Xms\n+<t> record hash: Xms\n+<t> module assets: Xms\n+<t> create chunk assets: Xms\n+<t> additional assets: Xms\n+<t> optimize assets: Xms\n+<t> finish assets: Xms\n+\n+LOG from webpack.SideEffectsFlagPlugin\n+<t> capture reexports from modules: Xms\n+<t> flatten reexports: Xms\n+<t> update imports: Xms\n+\n+LOG from webpack.FlagDependencyUsagePlugin\n+<t> initialize exports usage: Xms\n+<t> trace exports usage in graph: Xms\n+\n LOG from webpack.buildChunkGraph\n <t> visitModules: prepare: Xms\n <t> visitModules: visiting: Xms"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9944",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9944/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9944/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9944/events",
    "html_url": "https://github.com/webpack/webpack/pull/9944",
    "id": 520051854,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzM4NzA3NDU2",
    "number": 9944,
    "title": "Performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-11-08T14:42:01Z",
    "updated_at": "2019-11-10T20:40:33Z",
    "closed_at": "2019-11-10T20:40:32Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9944",
      "html_url": "https://github.com/webpack/webpack/pull/9944",
      "diff_url": "https://github.com/webpack/webpack/pull/9944.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9944.patch",
      "merged_at": "2019-11-10T20:40:32Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n* hoist compiler.root\r\n* use 0 instead of NaN, to be able to use SMI\r\n* respect cacheWithContext in ResolverCachePlugin, default to false\r\n* fix resolve caching with different resolve options\r\n* Avoid recursion for nested plain objects\r\n* Make Pack optimization less noisy and don't invalidate file\r\n* print warning for large serialized strings\r\n* merge concurrent ResolverCache requests\r\n* automatically flag created snapshots as valid\r\n* add missing inTry case\r\n* avoid creating arrays in getConnections\r\n* allocate ModuleGraphConnections.explanations only when needed\r\n* omit unneeded process.nextTick\r\n* Make entryInChunks undefined if empty to save memory\r\n* Make runtimeInChunks undefined if empty to save memory\r\n* allocate warnings and errors arrays only when needed\r\n* allocate NormalModule._sourceSizes only when needed\r\n* allocate Module.factoryMeta only when needed\r\n* allocate outgoingConnections Set only when needed\r\n* remove return value of ChunkGraph.connectChunkAndModule\r\n* allocate presentationalDependencies array only when needed\r\n* fix error for Example test cases\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9944/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "36556306ba4147665f5015f89e08be86c7b4bfdc",
        "filename": "lib/Cache.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FCache.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FCache.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCache.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -34,7 +34,7 @@ const needCalls = (times, callback) => {\n \t\t\treturn callback(err);\n \t\t}\n \t\tif (err && times > 0) {\n-\t\t\ttimes = NaN;\n+\t\t\ttimes = 0;\n \t\t\treturn callback(err);\n \t\t}\n \t};"
      },
      {
        "sha": "265060c4e799ddd24c92581bbe902dd22076c76c",
        "filename": "lib/CaseSensitiveModulesWarning.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FCaseSensitiveModulesWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FCaseSensitiveModulesWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCaseSensitiveModulesWarning.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -36,9 +36,9 @@ const createModulesListMessage = (modules, moduleGraph) => {\n \treturn modules\n \t\t.map(m => {\n \t\t\tlet message = `* ${m.identifier()}`;\n-\t\t\tconst validReasons = moduleGraph\n-\t\t\t\t.getIncomingConnections(m)\n-\t\t\t\t.filter(reason => reason.originModule);\n+\t\t\tconst validReasons = Array.from(\n+\t\t\t\tmoduleGraph.getIncomingConnections(m)\n+\t\t\t).filter(reason => reason.originModule);\n \n \t\t\tif (validReasons.length > 0) {\n \t\t\t\tmessage += `\\n    Used by ${validReasons.length} module(s), i. e.`;"
      },
      {
        "sha": "5f372b8e3317b4c49e71da57b16867b922b5b8eb",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -132,10 +132,13 @@ class Chunk {\n \t * @returns {boolean} true, if the chunk could be added\n \t */\n \taddModule(module) {\n-\t\treturn ChunkGraph.getChunkGraphForChunk(\n+\t\tconst chunkGraph = ChunkGraph.getChunkGraphForChunk(\n \t\t\tthis,\n \t\t\t\"Chunk.addModule\"\n-\t\t).connectChunkAndModule(this, module);\n+\t\t);\n+\t\tif (chunkGraph.isModuleInChunk(module, this)) return false;\n+\t\tchunkGraph.connectChunkAndModule(this, module);\n+\t\treturn true;\n \t}\n \n \t/**"
      },
      {
        "sha": "44c35125b62741a06de5e46da490c4b034f7d1a3",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 50,
        "deletions": 28,
        "changes": 78,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -130,10 +130,10 @@ class ChunkGraphModule {\n \tconstructor() {\n \t\t/** @type {SortableSet<Chunk>} */\n \t\tthis.chunks = new SortableSet();\n-\t\t/** @type {Set<Chunk>} */\n-\t\tthis.entryInChunks = new Set();\n-\t\t/** @type {Set<Chunk>} */\n-\t\tthis.runtimeInChunks = new Set();\n+\t\t/** @type {Set<Chunk> | undefined} */\n+\t\tthis.entryInChunks = undefined;\n+\t\t/** @type {Set<Chunk> | undefined} */\n+\t\tthis.runtimeInChunks = undefined;\n \t\t/** @type {string} */\n \t\tthis.hash = undefined;\n \t\t/** @type {string} */\n@@ -256,16 +256,13 @@ class ChunkGraph {\n \t/**\n \t * @param {Chunk} chunk the new chunk\n \t * @param {Module} module the module\n-\t * @returns {boolean} true, if the chunk could be added. false if it was already added\n+\t * @returns {void}\n \t */\n \tconnectChunkAndModule(chunk, module) {\n \t\tconst cgm = this._getChunkGraphModule(module);\n \t\tconst cgc = this._getChunkGraphChunk(chunk);\n-\t\t// TODO refactor to remove return value\n-\t\tif (cgm.chunks.has(chunk) && cgc.modules.has(module)) return false;\n \t\tcgm.chunks.add(chunk);\n \t\tcgc.modules.add(module);\n-\t\treturn true;\n \t}\n \n \t/**\n@@ -335,29 +332,39 @@ class ChunkGraph {\n \t\t}\n \t\toldCgm.chunks.clear();\n \n-\t\tfor (const chunk of oldCgm.entryInChunks) {\n-\t\t\tconst cgc = this._getChunkGraphChunk(chunk);\n-\t\t\tconst old = cgc.entryModules.get(oldModule);\n-\t\t\tconst newEntryModules = new Map();\n-\t\t\tfor (const [m, cg] of cgc.entryModules) {\n-\t\t\t\tif (m === oldModule) {\n-\t\t\t\t\tnewEntryModules.set(newModule, old);\n-\t\t\t\t} else {\n-\t\t\t\t\tnewEntryModules.set(m, cg);\n+\t\tif (oldCgm.entryInChunks !== undefined) {\n+\t\t\tif (newCgm.entryInChunks === undefined) {\n+\t\t\t\tnewCgm.entryInChunks = new Set();\n+\t\t\t}\n+\t\t\tfor (const chunk of oldCgm.entryInChunks) {\n+\t\t\t\tconst cgc = this._getChunkGraphChunk(chunk);\n+\t\t\t\tconst old = cgc.entryModules.get(oldModule);\n+\t\t\t\tconst newEntryModules = new Map();\n+\t\t\t\tfor (const [m, cg] of cgc.entryModules) {\n+\t\t\t\t\tif (m === oldModule) {\n+\t\t\t\t\t\tnewEntryModules.set(newModule, old);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tnewEntryModules.set(m, cg);\n+\t\t\t\t\t}\n \t\t\t\t}\n+\t\t\t\tcgc.entryModules = newEntryModules;\n+\t\t\t\tnewCgm.entryInChunks.add(chunk);\n \t\t\t}\n-\t\t\tcgc.entryModules = newEntryModules;\n-\t\t\tnewCgm.entryInChunks.add(chunk);\n+\t\t\toldCgm.entryInChunks = undefined;\n \t\t}\n-\t\toldCgm.entryInChunks.clear();\n \n-\t\tfor (const chunk of oldCgm.runtimeInChunks) {\n-\t\t\tconst cgc = this._getChunkGraphChunk(chunk);\n-\t\t\tcgc.runtimeModules.delete(/** @type {RuntimeModule} */ (oldModule));\n-\t\t\tcgc.runtimeModules.add(/** @type {RuntimeModule} */ (newModule));\n-\t\t\tnewCgm.runtimeInChunks.add(chunk);\n+\t\tif (oldCgm.runtimeInChunks !== undefined) {\n+\t\t\tif (newCgm.runtimeInChunks === undefined) {\n+\t\t\t\tnewCgm.runtimeInChunks = new Set();\n+\t\t\t}\n+\t\t\tfor (const chunk of oldCgm.runtimeInChunks) {\n+\t\t\t\tconst cgc = this._getChunkGraphChunk(chunk);\n+\t\t\t\tcgc.runtimeModules.delete(/** @type {RuntimeModule} */ (oldModule));\n+\t\t\t\tcgc.runtimeModules.add(/** @type {RuntimeModule} */ (newModule));\n+\t\t\t\tnewCgm.runtimeInChunks.add(chunk);\n+\t\t\t}\n+\t\t\toldCgm.runtimeInChunks = undefined;\n \t\t}\n-\t\toldCgm.runtimeInChunks.clear();\n \t}\n \n \t/**\n@@ -388,7 +395,7 @@ class ChunkGraph {\n \t */\n \tisEntryModule(module) {\n \t\tconst cgm = this._getChunkGraphModule(module);\n-\t\treturn cgm.entryInChunks.size > 0;\n+\t\treturn cgm.entryInChunks !== undefined;\n \t}\n \n \t/**\n@@ -796,6 +803,9 @@ class ChunkGraph {\n \tconnectChunkAndEntryModule(chunk, module, chunkGroup) {\n \t\tconst cgm = this._getChunkGraphModule(module);\n \t\tconst cgc = this._getChunkGraphChunk(chunk);\n+\t\tif (cgm.entryInChunks === undefined) {\n+\t\t\tcgm.entryInChunks = new Set();\n+\t\t}\n \t\tcgm.entryInChunks.add(chunk);\n \t\tcgc.entryModules.set(module, chunkGroup);\n \t}\n@@ -808,6 +818,9 @@ class ChunkGraph {\n \tconnectChunkAndRuntimeModule(chunk, module) {\n \t\tconst cgm = this._getChunkGraphModule(module);\n \t\tconst cgc = this._getChunkGraphChunk(chunk);\n+\t\tif (cgm.runtimeInChunks === undefined) {\n+\t\t\tcgm.runtimeInChunks = new Set();\n+\t\t}\n \t\tcgm.runtimeInChunks.add(chunk);\n \t\tcgc.runtimeModules.add(module);\n \t}\n@@ -821,6 +834,9 @@ class ChunkGraph {\n \t\tconst cgm = this._getChunkGraphModule(module);\n \t\tconst cgc = this._getChunkGraphChunk(chunk);\n \t\tcgm.entryInChunks.delete(chunk);\n+\t\tif (cgm.entryInChunks.size === 0) {\n+\t\t\tcgm.entryInChunks = undefined;\n+\t\t}\n \t\tcgc.entryModules.delete(module);\n \t}\n \n@@ -833,6 +849,9 @@ class ChunkGraph {\n \t\tconst cgm = this._getChunkGraphModule(module);\n \t\tconst cgc = this._getChunkGraphChunk(chunk);\n \t\tcgm.runtimeInChunks.delete(chunk);\n+\t\tif (cgm.runtimeInChunks.size === 0) {\n+\t\t\tcgm.runtimeInChunks = undefined;\n+\t\t}\n \t\tcgc.runtimeModules.delete(module);\n \t}\n \n@@ -846,7 +865,7 @@ class ChunkGraph {\n \t\t\tconst cgc = this._getChunkGraphChunk(chunk);\n \t\t\tcgc.entryModules.delete(module);\n \t\t}\n-\t\tcgm.entryInChunks.clear();\n+\t\tcgm.entryInChunks = undefined;\n \t}\n \n \t/**\n@@ -858,6 +877,9 @@ class ChunkGraph {\n \t\tfor (const module of cgc.entryModules.keys()) {\n \t\t\tconst cgm = this._getChunkGraphModule(module);\n \t\t\tcgm.entryInChunks.delete(chunk);\n+\t\t\tif (cgm.entryInChunks.size === 0) {\n+\t\t\t\tcgm.entryInChunks = undefined;\n+\t\t\t}\n \t\t}\n \t\tcgc.entryModules.clear();\n \t}"
      },
      {
        "sha": "6c441536407a5a6e6a19ffb18d0459621d32646a",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 35,
        "deletions": 32,
        "changes": 67,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -1045,32 +1045,30 @@ class Compilation {\n \t\t\treturn;\n \t\t}\n \n-\t\tprocess.nextTick(() => {\n-\t\t\t// This is nested so we need to allow one additional task\n-\t\t\tthis.processDependenciesQueue.increaseParallelism();\n-\n-\t\t\tasyncLib.forEach(\n-\t\t\t\tsortedDependencies,\n-\t\t\t\t(item, callback) => {\n-\t\t\t\t\tthis.handleModuleCreation(item, err => {\n-\t\t\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n-\t\t\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n-\t\t\t\t\t\t// leaking the Compilation object.\n-\t\t\t\t\t\tif (err && this.bail) {\n-\t\t\t\t\t\t\t// eslint-disable-next-line no-self-assign\n-\t\t\t\t\t\t\terr.stack = err.stack;\n-\t\t\t\t\t\t\treturn callback(err);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tcallback();\n-\t\t\t\t\t});\n-\t\t\t\t},\n-\t\t\t\terr => {\n-\t\t\t\t\tthis.processDependenciesQueue.decreaseParallelism();\n+\t\t// This is nested so we need to allow one additional task\n+\t\tthis.processDependenciesQueue.increaseParallelism();\n \n-\t\t\t\t\treturn callback(err);\n-\t\t\t\t}\n-\t\t\t);\n-\t\t});\n+\t\tasyncLib.forEach(\n+\t\t\tsortedDependencies,\n+\t\t\t(item, callback) => {\n+\t\t\t\tthis.handleModuleCreation(item, err => {\n+\t\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n+\t\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n+\t\t\t\t\t// leaking the Compilation object.\n+\t\t\t\t\tif (err && this.bail) {\n+\t\t\t\t\t\t// eslint-disable-next-line no-self-assign\n+\t\t\t\t\t\terr.stack = err.stack;\n+\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t}\n+\t\t\t\t\tcallback();\n+\t\t\t\t});\n+\t\t\t},\n+\t\t\terr => {\n+\t\t\t\tthis.processDependenciesQueue.decreaseParallelism();\n+\n+\t\t\t\treturn callback(err);\n+\t\t\t}\n+\t\t);\n \t}\n \n \t/**\n@@ -1402,28 +1400,32 @@ class Compilation {\n \t\t\t// extract warnings and errors from modules\n \t\t\tfor (const module of modules) {\n \t\t\t\tthis.reportDependencyErrorsAndWarnings(module, [module]);\n-\t\t\t\tif (module.errors.length > 0) {\n+\t\t\t\tconst errors = module.getErrors();\n+\t\t\t\tif (errors !== undefined) {\n \t\t\t\t\tif (module.isOptional(this.moduleGraph)) {\n-\t\t\t\t\t\tfor (const error of module.errors) {\n+\t\t\t\t\t\tfor (const error of errors) {\n \t\t\t\t\t\t\tif (!error.module) {\n \t\t\t\t\t\t\t\terror.module = module;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tthis.warnings.push(error);\n \t\t\t\t\t\t}\n \t\t\t\t\t} else {\n-\t\t\t\t\t\tfor (const error of module.errors) {\n+\t\t\t\t\t\tfor (const error of errors) {\n \t\t\t\t\t\t\tif (!error.module) {\n \t\t\t\t\t\t\t\terror.module = module;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tthis.errors.push(error);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t\tfor (const warning of module.warnings) {\n-\t\t\t\t\tif (!warning.module) {\n-\t\t\t\t\t\twarning.module = module;\n+\t\t\t\tconst warnings = module.getWarnings();\n+\t\t\t\tif (warnings !== undefined) {\n+\t\t\t\t\tfor (const warning of warnings) {\n+\t\t\t\t\t\tif (!warning.module) {\n+\t\t\t\t\t\t\twarning.module = module;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tthis.warnings.push(warning);\n \t\t\t\t\t}\n-\t\t\t\t\tthis.warnings.push(warning);\n \t\t\t\t}\n \t\t\t}\n \n@@ -2392,6 +2394,7 @@ class Compilation {\n \t\t\t\t\t\t\t\tif (source !== sourceFromCache) {\n \t\t\t\t\t\t\t\t\tthis.cache.store(cacheName, usedHash, source, err => {\n \t\t\t\t\t\t\t\t\t\tif (err) return errorAndCallback(err);\n+\t\t\t\t\t\t\t\t\t\tinTry = false;\n \t\t\t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t} else {"
      },
      {
        "sha": "168bd73660170f55adcc1dc72c04cb5dc24cc144",
        "filename": "lib/DependenciesBlock.js",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependenciesBlock.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -55,6 +55,15 @@ class DependenciesBlock {\n \t\t}\n \t}\n \n+\t/**\n+\t * Removes all dependencies and blocks\n+\t * @returns {void}\n+\t */\n+\tclearDependenciesAndBlocks() {\n+\t\tthis.dependencies.length = 0;\n+\t\tthis.blocks.length = 0;\n+\t}\n+\n \t/**\n \t * @param {Hash} hash the hash used to track dependencies\n \t * @param {ChunkGraph} chunkGraph the chunk graph"
      },
      {
        "sha": "4962e2c2acc491198b826653fbd3d2d29583a70c",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -686,6 +686,7 @@ class FileSystemInfo {\n \t\t\t\t\tsnapshot.missingTimestamps = missingTimestamps;\n \t\t\t\tif (managedItemInfo.size !== 0)\n \t\t\t\t\tsnapshot.managedItemInfo = managedItemInfo;\n+\t\t\t\tthis._snapshotCache.set(snapshot, true);\n \t\t\t\tcallback(null, snapshot);\n \t\t\t}\n \t\t};\n@@ -948,6 +949,12 @@ class FileSystemInfo {\n \t\t\t\tsnapshot2.managedItemInfo\n \t\t\t);\n \t\t}\n+\t\tif (\n+\t\t\tthis._snapshotCache.get(snapshot1) === true &&\n+\t\t\tthis._snapshotCache.get(snapshot2) === true\n+\t\t) {\n+\t\t\tthis._snapshotCache.set(snapshot, true);\n+\t\t}\n \t\treturn snapshot;\n \t}\n "
      },
      {
        "sha": "45f3849222f69ed161050ff79c66b496ea80ec8f",
        "filename": "lib/FlagDependencyUsagePlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FFlagDependencyUsagePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FFlagDependencyUsagePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyUsagePlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -90,7 +90,11 @@ class FlagDependencyUsagePlugin {\n \t\t\t\t\t\t\t// for a module without side effects we stop tracking usage here when no export is used\n \t\t\t\t\t\t\t// This module won't be evaluated in this case\n \t\t\t\t\t\t\t// TODO webpack 6 remove this check\n-\t\t\t\t\t\t\tif (module.factoryMeta.sideEffectFree) return;\n+\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\tmodule.factoryMeta !== undefined &&\n+\t\t\t\t\t\t\t\tmodule.factoryMeta.sideEffectFree\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t\tif (exportsInfo.setUsedForSideEffectsOnly()) {\n \t\t\t\t\t\t\t\tqueue.enqueue(module);\n \t\t\t\t\t\t\t}"
      },
      {
        "sha": "2bdb2e9486ba8a09eb857d9a1a24ac866a72817a",
        "filename": "lib/LibManifestPlugin.js",
        "status": "modified",
        "additions": 17,
        "deletions": 3,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FLibManifestPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FLibManifestPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FLibManifestPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -19,6 +19,19 @@ const { dirname, mkdirp } = require(\"./util/fs\");\n  * @property {boolean | string[]} exports\n  */\n \n+/**\n+ * @template T\n+ * @param {Iterable<T>} iterable iterable\n+ * @param {function(T): boolean} filter predicate\n+ * @returns {boolean} true, if some items match the filter predicate\n+ */\n+const someInIterable = (iterable, filter) => {\n+\tfor (const item of iterable) {\n+\t\tif (filter(item)) return true;\n+\t}\n+\treturn false;\n+};\n+\n class LibManifestPlugin {\n \tconstructor(options) {\n \t\tthis.options = options;\n@@ -60,9 +73,10 @@ class LibManifestPlugin {\n \t\t\t\t\t\t\t\tmodule => {\n \t\t\t\t\t\t\t\t\tif (\n \t\t\t\t\t\t\t\t\t\tthis.options.entryOnly &&\n-\t\t\t\t\t\t\t\t\t\t!moduleGraph\n-\t\t\t\t\t\t\t\t\t\t\t.getIncomingConnections(module)\n-\t\t\t\t\t\t\t\t\t\t\t.some(c => c.dependency instanceof EntryDependency)\n+\t\t\t\t\t\t\t\t\t\t!someInIterable(\n+\t\t\t\t\t\t\t\t\t\t\tmoduleGraph.getIncomingConnections(module),\n+\t\t\t\t\t\t\t\t\t\t\tc => c.dependency instanceof EntryDependency\n+\t\t\t\t\t\t\t\t\t\t)\n \t\t\t\t\t\t\t\t\t) {\n \t\t\t\t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t\t\t\t}"
      },
      {
        "sha": "26fe150f2d0f3b4ea1aa7de67cb4f75401ccb17a",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 139,
        "deletions": 22,
        "changes": 161,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const util = require(\"util\");\n const AbstractMethodError = require(\"./AbstractMethodError\");\n const ChunkGraph = require(\"./ChunkGraph\");\n const DependenciesBlock = require(\"./DependenciesBlock\");\n@@ -104,20 +105,20 @@ class Module extends DependenciesBlock {\n \t\t// Info from Factory\n \t\t/** @type {TODO} */\n \t\tthis.resolveOptions = EMPTY_RESOLVE_OPTIONS;\n-\t\t/** @type {object} */\n-\t\tthis.factoryMeta = {};\n+\t\t/** @type {object | undefined} */\n+\t\tthis.factoryMeta = undefined;\n \n \t\t// Info from Build\n-\t\t/** @type {WebpackError[]} */\n-\t\tthis.warnings = [];\n-\t\t/** @type {WebpackError[]} */\n-\t\tthis.errors = [];\n+\t\t/** @type {WebpackError[] | undefined} */\n+\t\tthis._warnings = undefined;\n+\t\t/** @type {WebpackError[] | undefined} */\n+\t\tthis._errors = undefined;\n \t\t/** @type {BuildMeta} */\n \t\tthis.buildMeta = undefined;\n \t\t/** @type {object} */\n \t\tthis.buildInfo = undefined;\n-\t\t/** @type {Dependency[]} */\n-\t\tthis.presentationalDependencies = [];\n+\t\t/** @type {Dependency[] | undefined} */\n+\t\tthis.presentationalDependencies = undefined;\n \t}\n \n \t// TODO remove in webpack 6\n@@ -247,10 +248,13 @@ class Module extends DependenciesBlock {\n \t}\n \n \taddChunk(chunk) {\n-\t\treturn ChunkGraph.getChunkGraphForModule(\n+\t\tconst chunkGraph = ChunkGraph.getChunkGraphForModule(\n \t\t\tthis,\n \t\t\t\"Module.addChunk\"\n-\t\t).connectChunkAndModule(chunk, this);\n+\t\t);\n+\t\tif (chunkGraph.isModuleInChunk(this, chunk)) return false;\n+\t\tchunkGraph.connectChunkAndModule(chunk, this);\n+\t\treturn true;\n \t}\n \n \tremoveChunk(chunk) {\n@@ -331,19 +335,83 @@ class Module extends DependenciesBlock {\n \t * @returns {void}\n \t */\n \taddPresentationalDependency(presentationalDependency) {\n+\t\tif (this.presentationalDependencies === undefined) {\n+\t\t\tthis.presentationalDependencies = [];\n+\t\t}\n \t\tthis.presentationalDependencies.push(presentationalDependency);\n \t}\n \n+\t/**\n+\t * Removes all dependencies and blocks\n+\t * @returns {void}\n+\t */\n+\tclearDependenciesAndBlocks() {\n+\t\tif (this.presentationalDependencies !== undefined) {\n+\t\t\tthis.presentationalDependencies.length = 0;\n+\t\t}\n+\t\tsuper.clearDependenciesAndBlocks();\n+\t}\n+\n+\t/**\n+\t * @param {WebpackError} warning the warning\n+\t * @returns {void}\n+\t */\n+\taddWarning(warning) {\n+\t\tif (this._warnings === undefined) {\n+\t\t\tthis._warnings = [];\n+\t\t}\n+\t\tthis._warnings.push(warning);\n+\t}\n+\n+\t/**\n+\t * @returns {Iterable<WebpackError> | undefined} list of warnings if any\n+\t */\n+\tgetWarnings() {\n+\t\treturn this._warnings;\n+\t}\n+\n+\t/**\n+\t * @param {WebpackError} error the error\n+\t * @returns {void}\n+\t */\n+\taddError(error) {\n+\t\tif (this._errors === undefined) {\n+\t\t\tthis._errors = [];\n+\t\t}\n+\t\tthis._errors.push(error);\n+\t}\n+\n+\t/**\n+\t * @returns {Iterable<WebpackError> | undefined} list of errors if any\n+\t */\n+\tgetErrors() {\n+\t\treturn this._errors;\n+\t}\n+\n+\t/**\n+\t * removes all warnings and errors\n+\t * @returns {void}\n+\t */\n+\tclearWarningsAndErrors() {\n+\t\tif (this._warnings !== undefined) {\n+\t\t\tthis._warnings.length = 0;\n+\t\t}\n+\t\tif (this._errors !== undefined) {\n+\t\t\tthis._errors.length = 0;\n+\t\t}\n+\t}\n+\n \t/**\n \t * @param {ModuleGraph} moduleGraph the module graph\n \t * @returns {boolean} true, if the module is optional\n \t */\n \tisOptional(moduleGraph) {\n-\t\tconst connections = moduleGraph.getIncomingConnections(this);\n-\t\treturn (\n-\t\t\tconnections.length > 0 &&\n-\t\t\tconnections.every(r => r.dependency && r.dependency.optional && r.active)\n-\t\t);\n+\t\tlet hasConnections = false;\n+\t\tfor (const r of moduleGraph.getIncomingConnections(this)) {\n+\t\t\tif (!r.dependency || !r.dependency.optional || !r.active) return false;\n+\t\t\thasConnections = true;\n+\t\t}\n+\t\treturn hasConnections;\n \t}\n \n \t/**\n@@ -413,7 +481,10 @@ class Module extends DependenciesBlock {\n \t * @returns {boolean} true if at least one other module depends on this module\n \t */\n \thasReasons(moduleGraph) {\n-\t\treturn moduleGraph.getIncomingConnections(this).some(c => c.active);\n+\t\tfor (const c of moduleGraph.getIncomingConnections(this)) {\n+\t\t\tif (c.active) return true;\n+\t\t}\n+\t\treturn false;\n \t}\n \n \t/**\n@@ -494,8 +565,10 @@ class Module extends DependenciesBlock {\n \t\t\thash.update(exportInfo.used + \"\");\n \t\t\thash.update(exportInfo.usedName + \"\");\n \t\t}\n-\t\tfor (const dep of this.presentationalDependencies) {\n-\t\t\tdep.updateHash(hash, chunkGraph);\n+\t\tif (this.presentationalDependencies !== undefined) {\n+\t\t\tfor (const dep of this.presentationalDependencies) {\n+\t\t\t\tdep.updateHash(hash, chunkGraph);\n+\t\t\t}\n \t\t}\n \t\tsuper.updateHash(hash, chunkGraph);\n \t}\n@@ -669,8 +742,16 @@ class Module extends DependenciesBlock {\n \t\twrite(this.resolveOptions);\n \t\twrite(this.factoryMeta);\n \t\twrite(this.useSourceMap);\n-\t\twrite(this.warnings);\n-\t\twrite(this.errors);\n+\t\twrite(\n+\t\t\tthis._warnings !== undefined && this._warnings.length === 0\n+\t\t\t\t? undefined\n+\t\t\t\t: this._warnings\n+\t\t);\n+\t\twrite(\n+\t\t\tthis._errors !== undefined && this._errors.length === 0\n+\t\t\t\t? undefined\n+\t\t\t\t: this._errors\n+\t\t);\n \t\twrite(this.buildMeta);\n \t\twrite(this.buildInfo);\n \t\twrite(this.presentationalDependencies);\n@@ -684,8 +765,8 @@ class Module extends DependenciesBlock {\n \t\tthis.resolveOptions = read();\n \t\tthis.factoryMeta = read();\n \t\tthis.useSourceMap = read();\n-\t\tthis.warnings = read();\n-\t\tthis.errors = read();\n+\t\tthis._warnings = read();\n+\t\tthis._errors = read();\n \t\tthis.buildMeta = read();\n \t\tthis.buildInfo = read();\n \t\tthis.presentationalDependencies = read();\n@@ -713,6 +794,42 @@ Object.defineProperty(Module.prototype, \"isUsed\", {\n \t}\n });\n \n+// TODO remove in webpack 6\n+Object.defineProperty(Module.prototype, \"errors\", {\n+\tget: util.deprecate(\n+\t\t/**\n+\t\t * @this {Module}\n+\t\t * @returns {WebpackError[]} array\n+\t\t */\n+\t\tfunction() {\n+\t\t\tif (this._errors === undefined) {\n+\t\t\t\tthis._errors = [];\n+\t\t\t}\n+\t\t\treturn this._errors;\n+\t\t},\n+\t\t\"Module.errors was removed (use getErrors instead)\",\n+\t\t\"DEP_WEBPACK_MODULE_ERRORS\"\n+\t)\n+});\n+\n+// TODO remove in webpack 6\n+Object.defineProperty(Module.prototype, \"warnings\", {\n+\tget: util.deprecate(\n+\t\t/**\n+\t\t * @this {Module}\n+\t\t * @returns {WebpackError[]} array\n+\t\t */\n+\t\tfunction() {\n+\t\t\tif (this._warnings === undefined) {\n+\t\t\t\tthis._warnings = [];\n+\t\t\t}\n+\t\t\treturn this._warnings;\n+\t\t},\n+\t\t\"Module.warnings was removed (use getWarnings instead)\",\n+\t\t\"DEP_WEBPACK_MODULE_WARNINGS\"\n+\t)\n+});\n+\n // TODO remove in webpack 6\n Object.defineProperty(Module.prototype, \"used\", {\n \tget() {"
      },
      {
        "sha": "f2ed930784e4c3784528d91f7f329cce5657aeea",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 24,
        "deletions": 15,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -21,6 +21,8 @@ const SortableSet = require(\"./util/SortableSet\");\n  * @returns {string}\n  */\n \n+const EMPTY_ARRAY = [];\n+\n /** @typedef {0|1|2|3|4} UsageStateType */\n \n const UsageState = Object.freeze({\n@@ -646,8 +648,8 @@ class ModuleGraphModule {\n \tconstructor() {\n \t\t/** @type {Set<ModuleGraphConnection>} */\n \t\tthis.incomingConnections = new Set();\n-\t\t/** @type {Set<ModuleGraphConnection>} */\n-\t\tthis.outgoingConnections = new Set();\n+\t\t/** @type {Set<ModuleGraphConnection> | undefined} */\n+\t\tthis.outgoingConnections = undefined;\n \t\t/** @type {Module | null} */\n \t\tthis.issuer = undefined;\n \t\t/** @type {(string | OptimizationBailoutFunction)[]} */\n@@ -785,9 +787,11 @@ class ModuleGraph {\n \t\tmgd.connection = connection;\n \t\tconst connections = this._getModuleGraphModule(module).incomingConnections;\n \t\tconnections.add(connection);\n-\t\tconst originConnections = this._getModuleGraphModule(originModule)\n-\t\t\t.outgoingConnections;\n-\t\toriginConnections.add(connection);\n+\t\tconst mgm = this._getModuleGraphModule(originModule);\n+\t\tif (mgm.outgoingConnections === undefined) {\n+\t\t\tmgm.outgoingConnections = new Set();\n+\t\t}\n+\t\tmgm.outgoingConnections.add(connection);\n \t}\n \n \t/**\n@@ -880,12 +884,17 @@ class ModuleGraph {\n \t\tconst newMgm = this._getModuleGraphModule(newModule);\n \t\t// Outgoing connections\n \t\tconst oldConnections = oldMgm.outgoingConnections;\n-\t\tconst newConnections = newMgm.outgoingConnections;\n-\t\tfor (const connection of oldConnections) {\n-\t\t\tif (filterConnection(connection)) {\n-\t\t\t\tconnection.originModule = newModule;\n-\t\t\t\tnewConnections.add(connection);\n-\t\t\t\toldConnections.delete(connection);\n+\t\tif (oldConnections !== undefined) {\n+\t\t\tif (newMgm.outgoingConnections === undefined) {\n+\t\t\t\tnewMgm.outgoingConnections = new Set();\n+\t\t\t}\n+\t\t\tconst newConnections = newMgm.outgoingConnections;\n+\t\t\tfor (const connection of oldConnections) {\n+\t\t\t\tif (filterConnection(connection)) {\n+\t\t\t\t\tconnection.originModule = newModule;\n+\t\t\t\t\tnewConnections.add(connection);\n+\t\t\t\t\toldConnections.delete(connection);\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n \t\t// Incoming connections\n@@ -967,20 +976,20 @@ class ModuleGraph {\n \n \t/**\n \t * @param {Module} module the module\n-\t * @returns {ModuleGraphConnection[]} reasons why a module is included\n+\t * @returns {Iterable<ModuleGraphConnection>} reasons why a module is included\n \t */\n \tgetIncomingConnections(module) {\n \t\tconst connections = this._getModuleGraphModule(module).incomingConnections;\n-\t\treturn Array.from(connections);\n+\t\treturn connections;\n \t}\n \n \t/**\n \t * @param {Module} module the module\n-\t * @returns {ModuleGraphConnection[]} list of outgoing connections\n+\t * @returns {Iterable<ModuleGraphConnection>} list of outgoing connections\n \t */\n \tgetOutgoingConnections(module) {\n \t\tconst connections = this._getModuleGraphModule(module).outgoingConnections;\n-\t\treturn Array.from(connections);\n+\t\treturn connections === undefined ? EMPTY_ARRAY : connections;\n \t}\n \n \t/**"
      },
      {
        "sha": "97f0ba0e27a156932a11bfe495ed66f4b051976b",
        "filename": "lib/ModuleGraphConnection.js",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FModuleGraphConnection.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FModuleGraphConnection.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraphConnection.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -36,8 +36,9 @@ class ModuleGraphConnection {\n \t\t/** @type {function(): boolean} */\n \t\tthis.condition = condition;\n \t\t/** @type {Set<string>} */\n-\t\tthis.explanations = new Set();\n+\t\tthis.explanations = undefined;\n \t\tif (explanation) {\n+\t\t\tthis.explanations = new Set();\n \t\t\tthis.explanations.add(explanation);\n \t\t}\n \t}\n@@ -61,10 +62,14 @@ class ModuleGraphConnection {\n \t * @returns {void}\n \t */\n \taddExplanation(explanation) {\n+\t\tif (this.explanations === undefined) {\n+\t\t\tthis.explanations = new Set();\n+\t\t}\n \t\tthis.explanations.add(explanation);\n \t}\n \n \tget explanation() {\n+\t\tif (this.explanations === undefined) return \"\";\n \t\treturn Array.from(this.explanations).join(\" \");\n \t}\n "
      },
      {
        "sha": "75623fccd712692898b11523a21644cec1219a5d",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 14,
        "deletions": 13,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -156,8 +156,8 @@ class NormalModule extends Module {\n \t\tthis.error = null;\n \t\t/** @private @type {Source=} */\n \t\tthis._source = null;\n-\t\t/** @private @type {Map<string, number>} **/\n-\t\tthis._sourceSizes = new Map();\n+\t\t/** @private @type {Map<string, number> | undefined} **/\n+\t\tthis._sourceSizes = undefined;\n \t\t/** @private @type {string} */\n \t\tthis._cachedCodeGenerationHash = \"\";\n \t\t/** @private @type {CodeGenerationResult} */\n@@ -259,7 +259,7 @@ class NormalModule extends Module {\n \t\t\t\tif (!(warning instanceof Error)) {\n \t\t\t\t\twarning = new NonErrorEmittedError(warning);\n \t\t\t\t}\n-\t\t\t\tthis.warnings.push(\n+\t\t\t\tthis.addWarning(\n \t\t\t\t\tnew ModuleWarning(warning, {\n \t\t\t\t\t\tfrom: getCurrentLoaderName()\n \t\t\t\t\t})\n@@ -269,7 +269,7 @@ class NormalModule extends Module {\n \t\t\t\tif (!(error instanceof Error)) {\n \t\t\t\t\terror = new NonErrorEmittedError(error);\n \t\t\t\t}\n-\t\t\t\tthis.errors.push(\n+\t\t\t\tthis.addError(\n \t\t\t\t\tnew ModuleError(error, {\n \t\t\t\t\t\tfrom: getCurrentLoaderName()\n \t\t\t\t\t})\n@@ -424,7 +424,7 @@ class NormalModule extends Module {\n \t\t\t\tthis.binary ? asBuffer(source) : asString(source),\n \t\t\t\tsourceMap\n \t\t\t);\n-\t\t\tthis._sourceSizes.clear();\n+\t\t\tif (this._sourceSizes !== undefined) this._sourceSizes.clear();\n \t\t\tthis._ast =\n \t\t\t\ttypeof extraInfo === \"object\" &&\n \t\t\t\textraInfo !== null &&\n@@ -487,7 +487,7 @@ class NormalModule extends Module {\n \t\t// Restore build meta from successful build to keep importing state\n \t\tthis.buildMeta = { ...this._lastSuccessfulBuildMeta };\n \t\tthis.error = error;\n-\t\tthis.errors.push(error);\n+\t\tthis.addError(error);\n \t}\n \n \tapplyNoParseRule(rule, content) {\n@@ -553,14 +553,11 @@ class NormalModule extends Module {\n \tbuild(options, compilation, resolver, fs, callback) {\n \t\tthis._forceBuild = false;\n \t\tthis._source = null;\n-\t\tthis._sourceSizes.clear();\n+\t\tif (this._sourceSizes !== undefined) this._sourceSizes.clear();\n \t\tthis._ast = null;\n \t\tthis.error = null;\n-\t\tthis.errors.length = 0;\n-\t\tthis.warnings.length = 0;\n-\t\tthis.dependencies.length = 0;\n-\t\tthis.presentationalDependencies.length = 0;\n-\t\tthis.blocks.length = 0;\n+\t\tthis.clearWarningsAndErrors();\n+\t\tthis.clearDependenciesAndBlocks();\n \t\tthis.buildMeta = {};\n \t\tthis.buildInfo = {\n \t\t\tcacheable: false,\n@@ -759,11 +756,15 @@ class NormalModule extends Module {\n \t * @returns {number} the estimated size of the module (must be non-zero)\n \t */\n \tsize(type) {\n-\t\tconst cachedSize = this._sourceSizes.get(type);\n+\t\tconst cachedSize =\n+\t\t\tthis._sourceSizes === undefined ? undefined : this._sourceSizes.get(type);\n \t\tif (cachedSize !== undefined) {\n \t\t\treturn cachedSize;\n \t\t}\n \t\tconst size = Math.max(1, this.generator.getSize(this, type));\n+\t\tif (this._sourceSizes === undefined) {\n+\t\t\tthis._sourceSizes = new Map();\n+\t\t}\n \t\tthis._sourceSizes.set(type, size);\n \t\treturn size;\n \t}"
      },
      {
        "sha": "b492f226e09cc380ff2842bffc5c949609f577f7",
        "filename": "lib/ResolverFactory.js",
        "status": "modified",
        "additions": 7,
        "deletions": 3,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FResolverFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FResolverFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FResolverFactory.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -26,8 +26,10 @@ module.exports = class ResolverFactory {\n \t\t\tresolveOptions: new HookMap(\n \t\t\t\t() => new SyncWaterfallHook([\"resolveOptions\"])\n \t\t\t),\n-\t\t\t/** @type {HookMap<SyncHook<[Resolver, Object]>>} */\n-\t\t\tresolver: new HookMap(() => new SyncHook([\"resolver\", \"resolveOptions\"]))\n+\t\t\t/** @type {HookMap<SyncHook<[Resolver, Object, Object]>>} */\n+\t\t\tresolver: new HookMap(\n+\t\t\t\t() => new SyncHook([\"resolver\", \"resolveOptions\", \"userResolveOptions\"])\n+\t\t\t)\n \t\t});\n \t\t/** @type {Map<string, ResolverCache>} */\n \t\tthis.cache = new Map();\n@@ -85,7 +87,9 @@ module.exports = class ResolverFactory {\n \t\t\tchildCache.set(options, resolver);\n \t\t\treturn resolver;\n \t\t};\n-\t\tthis.hooks.resolver.for(type).call(resolver, resolveOptions);\n+\t\tthis.hooks.resolver\n+\t\t\t.for(type)\n+\t\t\t.call(resolver, resolveOptions, originalResolveOptions);\n \t\treturn resolver;\n \t}\n };"
      },
      {
        "sha": "0066d099db79b70053dc08f7e10aa066d1301f61",
        "filename": "lib/buildChunkGraph.js",
        "status": "modified",
        "additions": 6,
        "deletions": 5,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -303,17 +303,18 @@ const visitModules = (\n \n \t\t\tswitch (queueItem.action) {\n \t\t\t\tcase ADD_AND_ENTER_MODULE: {\n+\t\t\t\t\tif (chunkGraph.isModuleInChunk(module, chunk)) {\n+\t\t\t\t\t\t// already connected, skip it\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n \t\t\t\t\tif (minAvailableModules.has(module)) {\n \t\t\t\t\t\t// already in parent chunks\n \t\t\t\t\t\t// skip it for now, but enqueue for rechecking when minAvailableModules shrinks\n \t\t\t\t\t\tskippedItems.push(queueItem);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n-\t\t\t\t\t// We connect Module and Chunk when not already done\n-\t\t\t\t\tif (!chunkGraph.connectChunkAndModule(chunk, module)) {\n-\t\t\t\t\t\t// already connected, skip it\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n+\t\t\t\t\t// We connect Module and Chunk\n+\t\t\t\t\tchunkGraph.connectChunkAndModule(chunk, module);\n \t\t\t\t}\n \t\t\t\t// fallthrough\n \t\t\t\tcase ENTER_MODULE: {"
      },
      {
        "sha": "043a3d272342be40eca414dcd37ffa8684a2374b",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -196,8 +196,7 @@ class Pack {\n \t\t\tthis.lastSizes.set(identifier, size);\n \t\t\tif (currentlyInline) {\n \t\t\t\tif (size > MAX_INLINE_SIZE) {\n-\t\t\t\t\tthis.invalid = true;\n-\t\t\t\t\tthis.logger.log(\n+\t\t\t\t\tthis.logger.debug(\n \t\t\t\t\t\t`Moved ${identifier} from inline to lazy section for better performance (${(\n \t\t\t\t\t\t\tsize / 1048576\n \t\t\t\t\t\t).toFixed(1)} MiB).`\n@@ -206,8 +205,7 @@ class Pack {\n \t\t\t} else {\n \t\t\t\tif (size <= MAX_INLINE_SIZE) {\n \t\t\t\t\tthis.content.set(identifier, data);\n-\t\t\t\t\tthis.invalid = true;\n-\t\t\t\t\tthis.logger.log(\n+\t\t\t\t\tthis.logger.debug(\n \t\t\t\t\t\t`Moved ${identifier} from lazy to inline section for better performance.`\n \t\t\t\t\t);\n \t\t\t\t}"
      },
      {
        "sha": "bf3b7a873cc496e72454bdcf84e6c500593ae4d7",
        "filename": "lib/cache/ResolverCachePlugin.js",
        "status": "modified",
        "additions": 48,
        "deletions": 13,
        "changes": 61,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fcache%2FResolverCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fcache%2FResolverCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FResolverCachePlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -39,15 +39,17 @@ const addAllToSet = (set, otherSet) => {\n };\n \n /**\n- * @param {Object} request a request\n+ * @param {Object} object an object\n+ * @param {boolean} excludeContext if true, context is not included in string\n  * @returns {string} stringified version\n  */\n-const requestToString = request => {\n+const objectToString = (object, excludeContext) => {\n \tlet str = \"\";\n-\tfor (const key in request) {\n-\t\tconst value = request[key];\n+\tfor (const key in object) {\n+\t\tif (excludeContext && key === \"context\") continue;\n+\t\tconst value = object[key];\n \t\tif (typeof value === \"object\" && value !== null) {\n-\t\t\tstr += `/${key}={${requestToString(value)}}`;\n+\t\t\tstr += `/${key}=[${objectToString(value, false)}]`;\n \t\t} else {\n \t\t\tstr += `/${key}=${value}`;\n \t\t}\n@@ -67,6 +69,7 @@ class ResolverCachePlugin {\n \t\tlet realResolves = 0;\n \t\tlet cachedResolves = 0;\n \t\tlet cacheInvalidResolves = 0;\n+\t\tlet concurrentResolves = 0;\n \t\tcompiler.hooks.thisCompilation.tap(\"ResolverCachePlugin\", compilation => {\n \t\t\tfileSystemInfo = compilation.fileSystemInfo;\n \t\t\tcompilation.hooks.finishModules.tap(\"ResolverCachePlugin\", () => {\n@@ -75,11 +78,12 @@ class ResolverCachePlugin {\n \t\t\t\t\tlogger.debug(\n \t\t\t\t\t\t`${Math.round(\n \t\t\t\t\t\t\t(100 * realResolves) / (realResolves + cachedResolves)\n-\t\t\t\t\t\t)}% really resolved (${realResolves} real resolves, ${cachedResolves} cached, ${cacheInvalidResolves} cached but invalid)`\n+\t\t\t\t\t\t)}% really resolved (${realResolves} real resolves with ${cacheInvalidResolves} cached but invalid, ${cachedResolves} cached valid, ${concurrentResolves} concurrent)`\n \t\t\t\t\t);\n \t\t\t\t\trealResolves = 0;\n \t\t\t\t\tcachedResolves = 0;\n \t\t\t\t\tcacheInvalidResolves = 0;\n+\t\t\t\t\tconcurrentResolves = 0;\n \t\t\t\t}\n \t\t\t});\n \t\t});\n@@ -162,15 +166,23 @@ class ResolverCachePlugin {\n \t\t};\n \t\tcompiler.resolverFactory.hooks.resolver.intercept({\n \t\t\tfactory(type, hook) {\n+\t\t\t\t/** @type {Map<string, (function(Error=, Object=): void)[]>} */\n+\t\t\t\tconst activeRequests = new Map();\n \t\t\t\thook.tap(\n \t\t\t\t\t\"ResolverCachePlugin\",\n \t\t\t\t\t/**\n \t\t\t\t\t * @param {Resolver} resolver the resolver\n \t\t\t\t\t * @param {Object} options resolve options\n+\t\t\t\t\t * @param {Object} userOptions resolve options passed by the user\n \t\t\t\t\t * @returns {void}\n \t\t\t\t\t */\n-\t\t\t\t\t(resolver, options) => {\n+\t\t\t\t\t(resolver, options, userOptions) => {\n \t\t\t\t\t\tif (options.cache !== true) return;\n+\t\t\t\t\t\tconst optionsIdent = objectToString(userOptions, false);\n+\t\t\t\t\t\tconst cacheWithContext =\n+\t\t\t\t\t\t\toptions.cacheWithContext !== undefined\n+\t\t\t\t\t\t\t\t? options.cacheWithContext\n+\t\t\t\t\t\t\t\t: false;\n \t\t\t\t\t\tresolver.hooks.resolve.tapAsync(\n \t\t\t\t\t\t\t{\n \t\t\t\t\t\t\t\tname: \"ResolverCachePlugin\",\n@@ -180,16 +192,35 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\tif (request._ResolverCachePluginCacheMiss || !fileSystemInfo) {\n \t\t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tconst identifier = `/resolve/${type}${requestToString(\n-\t\t\t\t\t\t\t\t\trequest\n+\t\t\t\t\t\t\t\tconst identifier = `/resolve/${type}${optionsIdent}${objectToString(\n+\t\t\t\t\t\t\t\t\trequest,\n+\t\t\t\t\t\t\t\t\tcacheWithContext\n \t\t\t\t\t\t\t\t)}`;\n+\t\t\t\t\t\t\t\tconst activeRequest = activeRequests.get(identifier);\n+\t\t\t\t\t\t\t\tif (activeRequest) {\n+\t\t\t\t\t\t\t\t\tactiveRequest.push(callback);\n+\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tlet callbacks;\n+\t\t\t\t\t\t\t\tconst done = (err, result) => {\n+\t\t\t\t\t\t\t\t\tif (callbacks === undefined) {\n+\t\t\t\t\t\t\t\t\t\tcallback(err, result);\n+\t\t\t\t\t\t\t\t\t\tcallbacks = false;\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\tfor (const callback of callbacks) {\n+\t\t\t\t\t\t\t\t\t\t\tcallback(err, result);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\tactiveRequests.delete(identifier);\n+\t\t\t\t\t\t\t\t\t\tcallbacks = false;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t};\n \t\t\t\t\t\t\t\t/**\n \t\t\t\t\t\t\t\t * @param {Error=} err error if any\n \t\t\t\t\t\t\t\t * @param {CacheEntry=} cacheEntry cache entry\n \t\t\t\t\t\t\t\t * @returns {void}\n \t\t\t\t\t\t\t\t */\n \t\t\t\t\t\t\t\tconst processCacheResult = (err, cacheEntry) => {\n-\t\t\t\t\t\t\t\t\tif (err) return callback(err);\n+\t\t\t\t\t\t\t\t\tif (err) return done(err);\n \n \t\t\t\t\t\t\t\t\tif (cacheEntry) {\n \t\t\t\t\t\t\t\t\t\tfileSystemInfo.checkSnapshotValid(\n@@ -203,7 +234,7 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tresolver,\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tresolveContext,\n \t\t\t\t\t\t\t\t\t\t\t\t\t\trequest,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tcallback\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tdone\n \t\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t\t\tcachedResolves++;\n@@ -225,7 +256,7 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tcacheEntry.contextDependencies\n \t\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\tcallback(null, cacheEntry.result);\n+\t\t\t\t\t\t\t\t\t\t\t\tdone(null, cacheEntry.result);\n \t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t} else {\n@@ -235,11 +266,15 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\t\t\t\tresolver,\n \t\t\t\t\t\t\t\t\t\t\tresolveContext,\n \t\t\t\t\t\t\t\t\t\t\trequest,\n-\t\t\t\t\t\t\t\t\t\t\tcallback\n+\t\t\t\t\t\t\t\t\t\t\tdone\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t};\n \t\t\t\t\t\t\t\tcache.get(identifier, null, processCacheResult);\n+\t\t\t\t\t\t\t\tif (callbacks === undefined) {\n+\t\t\t\t\t\t\t\t\tcallbacks = [callback];\n+\t\t\t\t\t\t\t\t\tactiveRequests.set(identifier, callbacks);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t);\n \t\t\t\t\t}"
      },
      {
        "sha": "ec008951fa3811bf78d9158e1ac4b27a0ba1eab2",
        "filename": "lib/dependencies/AMDRequireDependenciesBlockParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -222,7 +222,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t\tconst dep = new UnsupportedDependency(\"unsupported\", expr.range);\n \t\t\t\t\told.addPresentationalDependency(dep);\n \t\t\t\t\tif (parser.state.module) {\n-\t\t\t\t\t\tparser.state.module.errors.push(\n+\t\t\t\t\t\tparser.state.module.addError(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t\"Cannot statically analyse 'require(…, …)' in line \" +\n \t\t\t\t\t\t\t\t\texpr.loc.start.line,"
      },
      {
        "sha": "2d150939e0d6a3018e7b79c950457f9337d599dd",
        "filename": "lib/dependencies/ImportParserPlugin.js",
        "status": "modified",
        "additions": 10,
        "deletions": 10,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FImportParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FImportParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportParserPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -42,7 +42,7 @@ class ImportParserPlugin {\n \t\t\tif (commentErrors) {\n \t\t\t\tfor (const e of commentErrors) {\n \t\t\t\t\tconst { comment } = e;\n-\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\tnew CommentCompilationWarning(\n \t\t\t\t\t\t\t`Compilation error while processing magic comment(-s): /*${comment.value}*/: ${e.message}`,\n \t\t\t\t\t\t\tcomment.loc\n@@ -54,7 +54,7 @@ class ImportParserPlugin {\n \t\t\tif (importOptions) {\n \t\t\t\tif (importOptions.webpackIgnore !== undefined) {\n \t\t\t\t\tif (typeof importOptions.webpackIgnore !== \"boolean\") {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t`\\`webpackIgnore\\` expected a boolean, but received: ${importOptions.webpackIgnore}.`,\n \t\t\t\t\t\t\t\texpr.loc\n@@ -69,7 +69,7 @@ class ImportParserPlugin {\n \t\t\t\t}\n \t\t\t\tif (importOptions.webpackChunkName !== undefined) {\n \t\t\t\t\tif (typeof importOptions.webpackChunkName !== \"string\") {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t`\\`webpackChunkName\\` expected a string, but received: ${importOptions.webpackChunkName}.`,\n \t\t\t\t\t\t\t\texpr.loc\n@@ -81,7 +81,7 @@ class ImportParserPlugin {\n \t\t\t\t}\n \t\t\t\tif (importOptions.webpackMode !== undefined) {\n \t\t\t\t\tif (typeof importOptions.webpackMode !== \"string\") {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t`\\`webpackMode\\` expected a string, but received: ${importOptions.webpackMode}.`,\n \t\t\t\t\t\t\t\texpr.loc\n@@ -97,7 +97,7 @@ class ImportParserPlugin {\n \t\t\t\t\t} else if (typeof importOptions.webpackPrefetch === \"number\") {\n \t\t\t\t\t\tgroupOptions.prefetchOrder = importOptions.webpackPrefetch;\n \t\t\t\t\t} else {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t`\\`webpackPrefetch\\` expected true or a number, but received: ${importOptions.webpackPrefetch}.`,\n \t\t\t\t\t\t\t\texpr.loc\n@@ -111,7 +111,7 @@ class ImportParserPlugin {\n \t\t\t\t\t} else if (typeof importOptions.webpackPreload === \"number\") {\n \t\t\t\t\t\tgroupOptions.preloadOrder = importOptions.webpackPreload;\n \t\t\t\t\t} else {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t`\\`webpackPreload\\` expected true or a number, but received: ${importOptions.webpackPreload}.`,\n \t\t\t\t\t\t\t\texpr.loc\n@@ -124,7 +124,7 @@ class ImportParserPlugin {\n \t\t\t\t\t\t!importOptions.webpackInclude ||\n \t\t\t\t\t\timportOptions.webpackInclude.constructor.name !== \"RegExp\"\n \t\t\t\t\t) {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t`\\`webpackInclude\\` expected a regular expression, but received: ${importOptions.webpackInclude}.`,\n \t\t\t\t\t\t\t\texpr.loc\n@@ -139,7 +139,7 @@ class ImportParserPlugin {\n \t\t\t\t\t\t!importOptions.webpackExclude ||\n \t\t\t\t\t\timportOptions.webpackExclude.constructor.name !== \"RegExp\"\n \t\t\t\t\t) {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\t`\\`webpackExclude\\` expected a regular expression, but received: ${importOptions.webpackExclude}.`,\n \t\t\t\t\t\t\t\texpr.loc\n@@ -153,7 +153,7 @@ class ImportParserPlugin {\n \n \t\t\tif (param.isString()) {\n \t\t\t\tif (mode !== \"lazy\" && mode !== \"eager\" && mode !== \"weak\") {\n-\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t`\\`webpackMode\\` expected 'lazy', 'eager' or 'weak', but received: ${mode}.`,\n \t\t\t\t\t\t\texpr.loc\n@@ -190,7 +190,7 @@ class ImportParserPlugin {\n \t\t\t\t\tmode !== \"eager\" &&\n \t\t\t\t\tmode !== \"weak\"\n \t\t\t\t) {\n-\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t`\\`webpackMode\\` expected 'lazy', 'lazy-once', 'eager' or 'weak', but received: ${mode}.`,\n \t\t\t\t\t\t\texpr.loc"
      },
      {
        "sha": "b33a8dfe2895f8f39258845b4af4d4f042059732",
        "filename": "lib/dependencies/RequireIncludeDependencyParserPlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FRequireIncludeDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FRequireIncludeDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireIncludeDependencyParserPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -27,7 +27,7 @@ module.exports = class RequireIncludeDependencyParserPlugin {\n \t\t\t\tif (!param.isString()) return;\n \n \t\t\t\tif (warn) {\n-\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\tnew RequireIncludeDeprecationWarning(expr.loc)\n \t\t\t\t\t);\n \t\t\t\t}\n@@ -41,7 +41,7 @@ module.exports = class RequireIncludeDependencyParserPlugin {\n \t\t\t.for(\"require.include\")\n \t\t\t.tap(\"RequireIncludePlugin\", expr => {\n \t\t\t\tif (warn) {\n-\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\tnew RequireIncludeDeprecationWarning(expr.loc)\n \t\t\t\t\t);\n \t\t\t\t}\n@@ -51,7 +51,7 @@ module.exports = class RequireIncludeDependencyParserPlugin {\n \t\t\t.for(\"require.include\")\n \t\t\t.tap(\"RequireIncludePlugin\", expr => {\n \t\t\t\tif (warn) {\n-\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\tnew RequireIncludeDeprecationWarning(expr.loc)\n \t\t\t\t\t);\n \t\t\t\t}"
      },
      {
        "sha": "1ba6135cb615c7bdb3326ace565bd971212d2b41",
        "filename": "lib/dependencies/SystemPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FSystemPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fdependencies%2FSystemPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FSystemPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -96,7 +96,7 @@ class SystemPlugin {\n \t\t\t\t\t});\n \n \t\t\t\t\tparser.hooks.call.for(\"System.import\").tap(\"SystemPlugin\", expr => {\n-\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\tparser.state.module.addWarning(\n \t\t\t\t\t\t\tnew SystemImportDeprecationWarning(expr.loc)\n \t\t\t\t\t\t);\n "
      },
      {
        "sha": "00f2910090dd1625ae666cf8438bda2e3fc635a9",
        "filename": "lib/ids/NamedModuleIdsPlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fids%2FNamedModuleIdsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fids%2FNamedModuleIdsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fids%2FNamedModuleIdsPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -27,6 +27,7 @@ class NamedModuleIdsPlugin {\n \t * @returns {void}\n \t */\n \tapply(compiler) {\n+\t\tconst { root } = compiler;\n \t\tcompiler.hooks.compilation.tap(\"NamedModuleIdsPlugin\", compilation => {\n \t\t\tcompilation.hooks.moduleIds.tap(\"NamedModuleIdsPlugin\", modules => {\n \t\t\t\tconst chunkGraph = compilation.chunkGraph;\n@@ -40,9 +41,8 @@ class NamedModuleIdsPlugin {\n \t\t\t\t\t\tif (chunkGraph.getNumberOfModuleChunks(module) === 0) return false;\n \t\t\t\t\t\treturn chunkGraph.getModuleId(module) === null;\n \t\t\t\t\t}),\n-\t\t\t\t\tm => getShortModuleName(m, context, compiler.root),\n-\t\t\t\t\t(m, shortName) =>\n-\t\t\t\t\t\tgetLongModuleName(shortName, m, context, compiler.root),\n+\t\t\t\t\tm => getShortModuleName(m, context, root),\n+\t\t\t\t\t(m, shortName) => getLongModuleName(shortName, m, context, root),\n \t\t\t\t\tcompareModulesByIdentifier,\n \t\t\t\t\tgetUsedModuleIds(compilation),\n \t\t\t\t\t(m, name) => chunkGraph.setModuleId(m, name)"
      },
      {
        "sha": "4394dd1f1293dd58e53861811c65ac56a8960104",
        "filename": "lib/ids/OccurrenceModuleIdsPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fids%2FOccurrenceModuleIdsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fids%2FOccurrenceModuleIdsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fids%2FOccurrenceModuleIdsPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -97,8 +97,7 @@ class OccurrenceModuleIdsPlugin {\n \t\t\t\tif (prioritiseInitial) {\n \t\t\t\t\tfor (const m of modulesInOccurrenceOrder) {\n \t\t\t\t\t\tconst result =\n-\t\t\t\t\t\t\tmoduleGraph\n-\t\t\t\t\t\t\t\t.getIncomingConnections(m)\n+\t\t\t\t\t\t\tArray.from(moduleGraph.getIncomingConnections(m))\n \t\t\t\t\t\t\t\t.filter(c => c.active)\n \t\t\t\t\t\t\t\t.reduce(countOccursInEntry, 0) +\n \t\t\t\t\t\t\tinitialChunkChunkMap.get(m) +\n@@ -109,8 +108,7 @@ class OccurrenceModuleIdsPlugin {\n \n \t\t\t\tfor (const m of modules) {\n \t\t\t\t\tconst result =\n-\t\t\t\t\t\tmoduleGraph\n-\t\t\t\t\t\t\t.getIncomingConnections(m)\n+\t\t\t\t\t\tArray.from(moduleGraph.getIncomingConnections(m))\n \t\t\t\t\t\t\t.filter(c => c.active)\n \t\t\t\t\t\t\t.reduce(countOccurs, 0) +\n \t\t\t\t\t\tchunkGraph.getNumberOfModuleChunks(m) +"
      },
      {
        "sha": "b5980a45ea47ff5e97c983b898cfb5f3a9349047",
        "filename": "lib/javascript/JavascriptGenerator.js",
        "status": "modified",
        "additions": 10,
        "deletions": 8,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fjavascript%2FJavascriptGenerator.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fjavascript%2FJavascriptGenerator.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptGenerator.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -88,14 +88,16 @@ class JavascriptGenerator extends Generator {\n \t\t\t);\n \t\t}\n \n-\t\tfor (const dependency of module.presentationalDependencies) {\n-\t\t\tthis.sourceDependency(\n-\t\t\t\tmodule,\n-\t\t\t\tdependency,\n-\t\t\t\tinitFragments,\n-\t\t\t\tsource,\n-\t\t\t\tgenerateContext\n-\t\t\t);\n+\t\tif (module.presentationalDependencies !== undefined) {\n+\t\t\tfor (const dependency of module.presentationalDependencies) {\n+\t\t\t\tthis.sourceDependency(\n+\t\t\t\t\tmodule,\n+\t\t\t\t\tdependency,\n+\t\t\t\t\tinitFragments,\n+\t\t\t\t\tsource,\n+\t\t\t\t\tgenerateContext\n+\t\t\t\t);\n+\t\t\t}\n \t\t}\n \n \t\tfor (const childBlock of module.blocks) {"
      },
      {
        "sha": "36950855c4377a85c4780120153e6977ebe708ca",
        "filename": "lib/javascript/JavascriptModulesPlugin.js",
        "status": "modified",
        "additions": 17,
        "deletions": 3,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptModulesPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -34,6 +34,19 @@ const JavascriptParser = require(\"./JavascriptParser\");\n /** @typedef {import(\"../RuntimeTemplate\")} RuntimeTemplate */\n /** @typedef {import(\"../util/Hash\")} Hash */\n \n+/**\n+ * @template T\n+ * @param {Iterable<T>} iterable iterable\n+ * @param {function(T): boolean} filter predicate\n+ * @returns {boolean} true, if some items match the filter predicate\n+ */\n+const someInIterable = (iterable, filter) => {\n+\tfor (const item of iterable) {\n+\t\tif (filter(item)) return true;\n+\t}\n+\treturn false;\n+};\n+\n /**\n  * @param {Chunk} chunk a chunk\n  * @param {ChunkGraph} chunkGraph the chunk graph\n@@ -729,9 +742,10 @@ class JavascriptModulesPlugin {\n \t\t\t\t)) {\n \t\t\t\t\tif (\n \t\t\t\t\t\tresult.allowInlineStartup &&\n-\t\t\t\t\t\tmoduleGraph\n-\t\t\t\t\t\t\t.getIncomingConnections(entryModule)\n-\t\t\t\t\t\t\t.some(c => c.originModule && c.active)\n+\t\t\t\t\t\tsomeInIterable(\n+\t\t\t\t\t\t\tmoduleGraph.getIncomingConnections(entryModule),\n+\t\t\t\t\t\t\tc => c.originModule && c.active\n+\t\t\t\t\t\t)\n \t\t\t\t\t) {\n \t\t\t\t\t\tbuf2.push(\n \t\t\t\t\t\t\t\"// This entry module is referenced by other modules so it can't be inlined\""
      },
      {
        "sha": "fc709072bde68072b4e2d92949b0e684386c19ec",
        "filename": "lib/javascript/JavascriptParserHelpers.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fjavascript%2FJavascriptParserHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fjavascript%2FJavascriptParserHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptParserHelpers.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -52,7 +52,7 @@ exports.expressionIsUnsupported = (parser, message) => {\n \t\tdep.loc = expr.loc;\n \t\tparser.state.module.addPresentationalDependency(dep);\n \t\tif (!parser.state.module) return;\n-\t\tparser.state.module.warnings.push(\n+\t\tparser.state.module.addWarning(\n \t\t\tnew UnsupportedFeatureWarning(message, expr.loc)\n \t\t);\n \t\treturn true;"
      },
      {
        "sha": "e6d45bcd0f15dd97c35c54a6a2750d7d5f5e71de",
        "filename": "lib/optimize/ConcatenatedModule.js",
        "status": "modified",
        "additions": 19,
        "deletions": 15,
        "changes": 34,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Foptimize%2FConcatenatedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Foptimize%2FConcatenatedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FConcatenatedModule.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -573,10 +573,7 @@ class ConcatenatedModule extends Module {\n \n \t\t// Graph\n \t\tthis.dependencies = [];\n-\t\tthis.presentationalDependencies = [];\n \n-\t\tthis.warnings = [];\n-\t\tthis.errors = [];\n \t\tthis._orderedConcatenationList = ConcatenatedModule._createConcatenationList(\n \t\t\trootModule,\n \t\t\tmodules,\n@@ -594,12 +591,14 @@ class ConcatenatedModule extends Module {\n \t\t\t\t)) {\n \t\t\t\t\tthis.dependencies.push(d);\n \t\t\t\t}\n-\t\t\t\tfor (const d of m.presentationalDependencies.filter(\n-\t\t\t\t\tdep =>\n-\t\t\t\t\t\t!(dep instanceof HarmonyImportDependency) ||\n-\t\t\t\t\t\t!modules.has(compilation.moduleGraph.getModule(dep))\n-\t\t\t\t)) {\n-\t\t\t\t\tthis.presentationalDependencies.push(d);\n+\t\t\t\tif (m.presentationalDependencies !== undefined) {\n+\t\t\t\t\tfor (const d of m.presentationalDependencies.filter(\n+\t\t\t\t\t\tdep =>\n+\t\t\t\t\t\t\t!(dep instanceof HarmonyImportDependency) ||\n+\t\t\t\t\t\t\t!modules.has(compilation.moduleGraph.getModule(dep))\n+\t\t\t\t\t)) {\n+\t\t\t\t\t\tthis.addPresentationalDependency(d);\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\t// populate file dependencies\n \t\t\t\tif (m.buildInfo.fileDependencies) {\n@@ -618,12 +617,18 @@ class ConcatenatedModule extends Module {\n \t\t\t\t\t);\n \t\t\t\t}\n \t\t\t\t// populate warnings\n-\t\t\t\tfor (const warning of m.warnings) {\n-\t\t\t\t\tthis.warnings.push(warning);\n+\t\t\t\tconst warnings = m.getWarnings();\n+\t\t\t\tif (warnings !== undefined) {\n+\t\t\t\t\tfor (const warning of warnings) {\n+\t\t\t\t\t\tthis.addWarning(warning);\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\t// populate errors\n-\t\t\t\tfor (const error of m.errors) {\n-\t\t\t\t\tthis.errors.push(error);\n+\t\t\t\tconst errors = m.getErrors();\n+\t\t\t\tif (errors !== undefined) {\n+\t\t\t\t\tfor (const error of errors) {\n+\t\t\t\t\t\tthis.addError(error);\n+\t\t\t\t\t}\n \t\t\t\t}\n \n \t\t\t\tif (m.buildInfo.assets) {\n@@ -738,8 +743,7 @@ class ConcatenatedModule extends Module {\n \t\t * @returns {(function(): Module)[]} imported modules in order\n \t\t */\n \t\tconst getConcatenatedImports = module => {\n-\t\t\tconst references = moduleGraph\n-\t\t\t\t.getOutgoingConnections(module)\n+\t\t\tconst references = Array.from(moduleGraph.getOutgoingConnections(module))\n \t\t\t\t.filter(connection => {\n \t\t\t\t\tif (!(connection.dependency instanceof HarmonyImportDependency))\n \t\t\t\t\t\treturn false;"
      },
      {
        "sha": "debbb44e5becc6626b5b5a1cf53647ff0641b1b5",
        "filename": "lib/optimize/ModuleConcatenationPlugin.js",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FModuleConcatenationPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -113,6 +113,7 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t\tif (\n \t\t\t\t\t\t\t\t!module.buildMeta ||\n \t\t\t\t\t\t\t\tmodule.buildMeta.exportsType !== \"namespace\" ||\n+\t\t\t\t\t\t\t\tmodule.presentationalDependencies === undefined ||\n \t\t\t\t\t\t\t\t!module.presentationalDependencies.some(\n \t\t\t\t\t\t\t\t\td => d instanceof HarmonyCompatibilityDependency\n \t\t\t\t\t\t\t\t)\n@@ -173,9 +174,9 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t\tconst incomingConnections = moduleGraph\n-\t\t\t\t\t\t\t\t.getIncomingConnections(module)\n-\t\t\t\t\t\t\t\t.filter(connection => connection.active);\n+\t\t\t\t\t\t\tconst incomingConnections = Array.from(\n+\t\t\t\t\t\t\t\tmoduleGraph.getIncomingConnections(module)\n+\t\t\t\t\t\t\t).filter(connection => connection.active);\n \n \t\t\t\t\t\t\t// Module must only be used by Harmony Imports\n \t\t\t\t\t\t\tconst nonHarmonyConnections = incomingConnections.filter("
      },
      {
        "sha": "d7b96aa3a6e834d5026ba001cd57877b1a3db886",
        "filename": "lib/optimize/SideEffectsFlagPlugin.js",
        "status": "modified",
        "additions": 18,
        "deletions": 3,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSideEffectsFlagPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -68,6 +68,9 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\t\tcache\n \t\t\t\t\t);\n \t\t\t\t\tif (!hasSideEffects) {\n+\t\t\t\t\t\tif (module.factoryMeta === undefined) {\n+\t\t\t\t\t\t\tmodule.factoryMeta = {};\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tmodule.factoryMeta.sideEffectFree = true;\n \t\t\t\t\t}\n \t\t\t\t}\n@@ -76,9 +79,14 @@ class SideEffectsFlagPlugin {\n \t\t\t});\n \t\t\tnmf.hooks.module.tap(\"SideEffectsFlagPlugin\", (module, data) => {\n \t\t\t\tif (data.settings.sideEffects === false) {\n+\t\t\t\t\tif (module.factoryMeta === undefined) {\n+\t\t\t\t\t\tmodule.factoryMeta = {};\n+\t\t\t\t\t}\n \t\t\t\t\tmodule.factoryMeta.sideEffectFree = true;\n \t\t\t\t} else if (data.settings.sideEffects === true) {\n-\t\t\t\t\tmodule.factoryMeta.sideEffectFree = false;\n+\t\t\t\t\tif (module.factoryMeta !== undefined) {\n+\t\t\t\t\t\tmodule.factoryMeta.sideEffectFree = false;\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\treturn module;\n \t\t\t});\n@@ -98,7 +106,10 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\tfor (const module of modules) {\n \t\t\t\t\t\tfor (const dep of module.dependencies) {\n \t\t\t\t\t\t\tif (dep instanceof HarmonyExportImportedSpecifierDependency) {\n-\t\t\t\t\t\t\t\tif (module.factoryMeta.sideEffectFree) {\n+\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\tmodule.factoryMeta !== undefined &&\n+\t\t\t\t\t\t\t\t\tmodule.factoryMeta.sideEffectFree\n+\t\t\t\t\t\t\t\t) {\n \t\t\t\t\t\t\t\t\tconst mode = dep.getMode(moduleGraph, true);\n \t\t\t\t\t\t\t\t\tif (mode.type === \"normal-reexport\") {\n \t\t\t\t\t\t\t\t\t\tlet map = reexportMaps.get(module);\n@@ -120,7 +131,11 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\t\t\t\tconst connection = moduleGraph.getConnection(dep);\n \t\t\t\t\t\t\t\tif (connection) {\n \t\t\t\t\t\t\t\t\tconst refModule = connection.resolvedModule;\n-\t\t\t\t\t\t\t\t\tif (refModule && refModule.factoryMeta.sideEffectFree) {\n+\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\trefModule &&\n+\t\t\t\t\t\t\t\t\t\trefModule.factoryMeta !== undefined &&\n+\t\t\t\t\t\t\t\t\t\trefModule.factoryMeta.sideEffectFree\n+\t\t\t\t\t\t\t\t\t) {\n \t\t\t\t\t\t\t\t\t\tconnection.active = false;\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}"
      },
      {
        "sha": "0ce5205cefba645457f8cfd1140c74742a7f3ec8",
        "filename": "lib/serialization/BinaryMiddleware.js",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fserialization%2FBinaryMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fserialization%2FBinaryMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FBinaryMiddleware.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -177,6 +177,16 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t\t\t\t\t}\n \t\t\t\t\tcurrentBuffer.write(thing, currentPosition);\n \t\t\t\t\tcurrentPosition += len;\n+\t\t\t\t\tif (len > 102400 && context.logger) {\n+\t\t\t\t\t\tcontext.logger.warn(\n+\t\t\t\t\t\t\t`Serializing big strings (${Math.round(\n+\t\t\t\t\t\t\t\tlen / 1024\n+\t\t\t\t\t\t\t)}kiB) impacts deserialization performance (consider Buffer instead): ${thing.slice(\n+\t\t\t\t\t\t\t\t0,\n+\t\t\t\t\t\t\t\t100\n+\t\t\t\t\t\t\t)}...\\n`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t\tcase \"number\": {"
      },
      {
        "sha": "302805ce3b4708c9e728612337414ccdef18efbc",
        "filename": "lib/serialization/PlainObjectSerializer.js",
        "status": "modified",
        "additions": 48,
        "deletions": 10,
        "changes": 58,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fserialization%2FPlainObjectSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fserialization%2FPlainObjectSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FPlainObjectSerializer.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -4,6 +4,28 @@\n \n \"use strict\";\n \n+const writeObject = (obj, write, values) => {\n+\tconst keys = Object.keys(obj);\n+\tfor (const key of keys) {\n+\t\tconst value = obj[key];\n+\t\tif (\n+\t\t\tvalue !== null &&\n+\t\t\ttypeof value === \"object\" &&\n+\t\t\tvalue.constructor &&\n+\t\t\tvalue.constructor === Object\n+\t\t) {\n+\t\t\t// nested object\n+\t\t\twrite(true);\n+\t\t\twrite(key);\n+\t\t\twriteObject(value, write, values);\n+\t\t\twrite(false);\n+\t\t} else {\n+\t\t\twrite(key);\n+\t\t\tvalues.push(value);\n+\t\t}\n+\t}\n+};\n+\n class PlainObjectSerializer {\n \tserialize(obj, { write }) {\n \t\tif (Array.isArray(obj)) {\n@@ -12,13 +34,11 @@ class PlainObjectSerializer {\n \t\t\t\twrite(item);\n \t\t\t}\n \t\t} else {\n-\t\t\tconst keys = Object.keys(obj);\n-\t\t\tfor (const key of keys) {\n-\t\t\t\twrite(key);\n-\t\t\t}\n+\t\t\tconst values = [];\n+\t\t\twriteObject(obj, write, values);\n \t\t\twrite(null);\n-\t\t\tfor (const key of keys) {\n-\t\t\t\twrite(obj[key]);\n+\t\t\tfor (const value of values) {\n+\t\t\t\twrite(value);\n \t\t\t}\n \t\t}\n \t}\n@@ -31,16 +51,34 @@ class PlainObjectSerializer {\n \t\t\t}\n \t\t\treturn array;\n \t\t} else {\n-\t\t\tconst obj = {};\n \t\t\tconst keys = [];\n+\t\t\tlet hasNested = key === true;\n \t\t\twhile (key !== null) {\n \t\t\t\tkeys.push(key);\n \t\t\t\tkey = read();\n+\t\t\t\tif (key === true) {\n+\t\t\t\t\thasNested = true;\n+\t\t\t\t}\n \t\t\t}\n-\t\t\tfor (const key of keys) {\n-\t\t\t\tobj[key] = read();\n+\t\t\tlet currentObj = {};\n+\t\t\tconst stack = hasNested && [];\n+\t\t\tfor (let i = 0; i < keys.length; i++) {\n+\t\t\t\tconst key = keys[i];\n+\t\t\t\tif (key === true) {\n+\t\t\t\t\t// enter nested object\n+\t\t\t\t\tconst objectKey = keys[++i];\n+\t\t\t\t\tconst newObj = {};\n+\t\t\t\t\tcurrentObj[objectKey] = newObj;\n+\t\t\t\t\tstack.push(currentObj);\n+\t\t\t\t\tcurrentObj = newObj;\n+\t\t\t\t} else if (key === false) {\n+\t\t\t\t\t// leave nested object\n+\t\t\t\t\tcurrentObj = stack.pop();\n+\t\t\t\t} else {\n+\t\t\t\t\tcurrentObj[key] = read();\n+\t\t\t\t}\n \t\t\t}\n-\t\t\treturn obj;\n+\t\t\treturn currentObj;\n \t\t}\n \t}\n }"
      },
      {
        "sha": "85285a917ad8ed883aa40cfb35961dcc007eb697",
        "filename": "lib/stats/DefaultStatsFactoryPlugin.js",
        "status": "modified",
        "additions": 24,
        "deletions": 6,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsFactoryPlugin.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -116,6 +116,18 @@ const uniqueOrderedArray = (items, selector, comparator) => {\n \treturn uniqueArray(items, selector).sort(comparator);\n };\n \n+/**\n+ * @template T\n+ * @param {Iterable<T>} iterable an iterable\n+ * @returns {number} count of items\n+ */\n+const countIterable = iterable => {\n+\tlet i = 0;\n+\t// eslint-disable-next-line no-unused-vars\n+\tfor (const _ of iterable) i++;\n+\treturn i;\n+};\n+\n /** @type {ExtractorsByOption<WebpackError | string>} */\n const EXTRACT_ERROR = {\n \t_: (object, error, context, { requestShortener }) => {\n@@ -576,6 +588,11 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t}\n \t\t\tpath.reverse();\n \t\t\tconst profile = moduleGraph.getProfile(module);\n+\t\t\tconst errors = module.getErrors();\n+\t\t\tconst errorsCount = errors !== undefined ? countIterable(errors) : 0;\n+\t\t\tconst warnings = module.getWarnings();\n+\t\t\tconst warningsCount =\n+\t\t\t\twarnings !== undefined ? countIterable(warnings) : 0;\n \t\t\tObject.assign(object, {\n \t\t\t\tidentifier: module.identifier(),\n \t\t\t\tname: module.readableIdentifier(requestShortener),\n@@ -596,9 +613,9 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t\tissuerName: issuer && issuer.readableIdentifier(requestShortener),\n \t\t\t\tissuerPath:\n \t\t\t\t\tissuer && factory.create(`${type}.issuerPath`, path, context),\n-\t\t\t\tfailed: module.errors ? module.errors.length > 0 : false,\n-\t\t\t\terrors: module.errors ? module.errors.length : 0,\n-\t\t\t\twarnings: module.warnings ? module.warnings.length : 0\n+\t\t\t\tfailed: errorsCount > 0,\n+\t\t\t\terrors: errorsCount,\n+\t\t\t\twarnings: warningsCount\n \t\t\t});\n \t\t\tif (profile) {\n \t\t\t\tobject.profile = factory.create(`${type}.profile`, profile, context);\n@@ -631,7 +648,7 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t} = context;\n \t\t\tobject.reasons = factory.create(\n \t\t\t\t`${type}.reasons`,\n-\t\t\t\tmoduleGraph.getIncomingConnections(module),\n+\t\t\t\tArray.from(moduleGraph.getIncomingConnections(module)),\n \t\t\t\tcontext\n \t\t\t);\n \t\t},\n@@ -889,8 +906,9 @@ const SIMPLE_EXTRACTORS = {\n \t\t\tobject.originName = origin.readableIdentifier(requestShortener);\n \t\t\tobject.moduleIdentifier = module.identifier();\n \t\t\tobject.moduleName = module.readableIdentifier(requestShortener);\n-\t\t\tconst dependencies = moduleGraph\n-\t\t\t\t.getIncomingConnections(module)\n+\t\t\tconst dependencies = Array.from(\n+\t\t\t\tmoduleGraph.getIncomingConnections(module)\n+\t\t\t)\n \t\t\t\t.filter(c => c.resolvedOriginModule === origin && c.dependency)\n \t\t\t\t.map(c => c.dependency);\n \t\t\tobject.dependencies = factory.create("
      },
      {
        "sha": "0aa44aa95b9e72406df16bf94807c897b2265902",
        "filename": "test/Examples.test.js",
        "status": "modified",
        "additions": 11,
        "deletions": 5,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/f2e1c043722f4e64867b01b4455f9ea686ebf562/test%2FExamples.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/f2e1c043722f4e64867b01b4455f9ea686ebf562/test%2FExamples.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FExamples.test.js?ref=f2e1c043722f4e64867b01b4455f9ea686ebf562",
        "patch": "@@ -41,11 +41,17 @@ describe(\"Examples\", () => {\n \t\t\t\t}\n \t\t\t\twebpack(options, (err, stats) => {\n \t\t\t\t\tif (err) return done(err);\n-\t\t\t\t\tstats = stats.toJson({\n-\t\t\t\t\t\terrorDetails: true\n-\t\t\t\t\t});\n-\t\t\t\t\tif (stats.errors.length > 0) {\n-\t\t\t\t\t\treturn done(new Error(stats.errors[0]));\n+\t\t\t\t\tif (stats.hasErrors()) {\n+\t\t\t\t\t\treturn done(\n+\t\t\t\t\t\t\tnew Error(\n+\t\t\t\t\t\t\t\tstats.toString({\n+\t\t\t\t\t\t\t\t\tall: false,\n+\t\t\t\t\t\t\t\t\terrors: true,\n+\t\t\t\t\t\t\t\t\terrorDetails: true,\n+\t\t\t\t\t\t\t\t\terrorStacks: true\n+\t\t\t\t\t\t\t\t})\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t);\n \t\t\t\t\t}\n \t\t\t\t\tdone();\n \t\t\t\t});"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9957",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9957/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9957/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9957/events",
    "html_url": "https://github.com/webpack/webpack/pull/9957",
    "id": 521470136,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzM5ODQyNTkz",
    "number": 9957,
    "title": "Performance and ProgressPlugin",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-11-12T10:43:03Z",
    "updated_at": "2019-11-12T12:17:43Z",
    "closed_at": "2019-11-12T12:17:42Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9957",
      "html_url": "https://github.com/webpack/webpack/pull/9957",
      "diff_url": "https://github.com/webpack/webpack/pull/9957.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9957.patch",
      "merged_at": "2019-11-12T12:17:42Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* fix bug causing ProgressPlugin to write to often to stderr\r\n* show queued dependencies in progress\r\n* replace process.nextTick with setImmediate in queue processing to keep event loop looping\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix, performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes, progress plugin shows different info now\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9957/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "ee0b0f07ed67febce767fac5e25a8837f1295b71",
        "filename": "declarations/plugins/ProgressPlugin.d.ts",
        "status": "modified",
        "additions": 9,
        "deletions": 1,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/8aafff66001e6cd5ac7b88188be973c2b0da7eac/declarations%2Fplugins%2FProgressPlugin.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/8aafff66001e6cd5ac7b88188be973c2b0da7eac/declarations%2Fplugins%2FProgressPlugin.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2Fplugins%2FProgressPlugin.d.ts?ref=8aafff66001e6cd5ac7b88188be973c2b0da7eac",
        "patch": "@@ -19,6 +19,14 @@ export interface ProgressPluginOptions {\n \t * Show active modules count and one active module in progress message\n \t */\n \tactiveModules?: boolean;\n+\t/**\n+\t * Show dependencies count in progress message\n+\t */\n+\tdependencies?: boolean;\n+\t/**\n+\t * Minimum dependencies count to start with. For better progress calculation. Default: 10000\n+\t */\n+\tdependenciesCount?: number;\n \t/**\n \t * Show entries count in progress message\n \t */\n@@ -32,7 +40,7 @@ export interface ProgressPluginOptions {\n \t */\n \tmodules?: boolean;\n \t/**\n-\t * Minimum modules count to start with. Only for mode=modules. Default: 500\n+\t * Minimum modules count to start with. For better progress calculation. Default: 5000\n \t */\n \tmodulesCount?: number;\n \t/**"
      },
      {
        "sha": "7d891ddfb8a121097110640c8679b9f08671076f",
        "filename": "lib/ProgressPlugin.js",
        "status": "modified",
        "additions": 58,
        "deletions": 17,
        "changes": 75,
        "blob_url": "https://github.com/webpack/webpack/blob/8aafff66001e6cd5ac7b88188be973c2b0da7eac/lib%2FProgressPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8aafff66001e6cd5ac7b88188be973c2b0da7eac/lib%2FProgressPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FProgressPlugin.js?ref=8aafff66001e6cd5ac7b88188be973c2b0da7eac",
        "patch": "@@ -14,6 +14,10 @@ const MultiCompiler = require(\"./MultiCompiler\");\n /** @typedef {import(\"../declarations/plugins/ProgressPlugin\").ProgressPluginArgument} ProgressPluginArgument */\n /** @typedef {import(\"../declarations/plugins/ProgressPlugin\").ProgressPluginOptions} ProgressPluginOptions */\n \n+const median3 = (a, b, c) => {\n+\treturn a + b + c - Math.max(a, b, c) - Math.min(a, b, c);\n+};\n+\n const createDefaultHandler = (profile, logger) => {\n \tlet lastState;\n \tlet lastStateTime;\n@@ -90,8 +94,10 @@ class ProgressPlugin {\n \t\tthis.profile = options.profile;\n \t\tthis.handler = options.handler;\n \t\tthis.modulesCount = options.modulesCount;\n+\t\tthis.dependenciesCount = options.dependenciesCount;\n \t\tthis.showEntries = options.entries;\n \t\tthis.showModules = options.modules;\n+\t\tthis.showDependencies = options.dependencies;\n \t\tthis.showActiveModules = options.activeModules;\n \t}\n \n@@ -140,16 +146,19 @@ class ProgressPlugin {\n \t * @returns {void}\n \t */\n \t_applyOnCompiler(compiler, handler) {\n-\t\tconst { modulesCount } = this;\n \t\tconst showEntries = this.showEntries;\n \t\tconst showModules = this.showModules;\n+\t\tconst showDependencies = this.showDependencies;\n \t\tconst showActiveModules = this.showActiveModules;\n \t\tlet lastActiveModule = \"\";\n-\t\tlet lastModulesCount = 0;\n+\t\tlet lastModulesCount = this.modulesCount;\n+\t\tlet lastDependenciesCount = this.dependenciesCount;\n \t\tlet lastEntriesCount = 0;\n-\t\tlet moduleCount = modulesCount;\n+\t\tlet modulesCount = 0;\n+\t\tlet dependenciesCount = 0;\n \t\tlet entriesCount = 1;\n \t\tlet doneModules = 0;\n+\t\tlet doneDependencies = 0;\n \t\tlet doneEntries = 0;\n \t\tconst activeModules = new Set();\n \t\tlet lastUpdate = 0;\n@@ -162,16 +171,24 @@ class ProgressPlugin {\n \t\t\t/** @type {string[]} */\n \t\t\tconst items = [];\n \t\t\tconst percentByModules =\n-\t\t\t\tdoneModules / Math.max(lastModulesCount, moduleCount);\n+\t\t\t\tdoneModules / Math.max(lastModulesCount, modulesCount);\n \t\t\tconst percentByEntries =\n \t\t\t\tdoneEntries / Math.max(lastEntriesCount, entriesCount);\n+\t\t\tconst percentByDependencies =\n+\t\t\t\tdoneDependencies / Math.max(lastDependenciesCount, dependenciesCount);\n \t\t\tconst percentage =\n-\t\t\t\t0.1 + Math.max(percentByModules, percentByEntries) * 0.6;\n+\t\t\t\t0.1 +\n+\t\t\t\tmedian3(percentByModules, percentByEntries, percentByDependencies) *\n+\t\t\t\t\t0.6;\n+\n \t\t\tif (showEntries) {\n \t\t\t\titems.push(`${doneEntries}/${entriesCount} entries`);\n \t\t\t}\n+\t\t\tif (showDependencies) {\n+\t\t\t\titems.push(`${doneDependencies}/${dependenciesCount} dependencies`);\n+\t\t\t}\n \t\t\tif (showModules) {\n-\t\t\t\titems.push(`${doneModules}/${moduleCount} modules`);\n+\t\t\t\titems.push(`${doneModules}/${modulesCount} modules`);\n \t\t\t}\n \t\t\tif (showActiveModules) {\n \t\t\t\titems.push(`${activeModules.size} active`);\n@@ -181,9 +198,19 @@ class ProgressPlugin {\n \t\t\tlastUpdate = Date.now();\n \t\t};\n \n-\t\tconst moduleAdd = module => {\n-\t\t\tmoduleCount++;\n-\t\t\tif (moduleCount % 100 === 0) updateThrottled();\n+\t\tconst factorizeAdd = () => {\n+\t\t\tdependenciesCount++;\n+\t\t\tif (dependenciesCount % 100 === 0) updateThrottled();\n+\t\t};\n+\n+\t\tconst factorizeDone = () => {\n+\t\t\tdoneDependencies++;\n+\t\t\tif (doneDependencies % 100 === 0) updateThrottled();\n+\t\t};\n+\n+\t\tconst moduleAdd = () => {\n+\t\t\tmodulesCount++;\n+\t\t\tif (modulesCount % 100 === 0) updateThrottled();\n \t\t};\n \n \t\tconst moduleBuild = module => {\n@@ -192,9 +219,9 @@ class ProgressPlugin {\n \t\t\t\tif (ident) {\n \t\t\t\t\tactiveModules.add(ident);\n \t\t\t\t\tlastActiveModule = ident;\n+\t\t\t\t\tupdate();\n \t\t\t\t}\n \t\t\t}\n-\t\t\tupdate();\n \t\t};\n \n \t\tconst entryAdd = (entry, name) => {\n@@ -228,17 +255,29 @@ class ProgressPlugin {\n \n \t\tcompiler.hooks.compilation.tap(\"ProgressPlugin\", compilation => {\n \t\t\tif (compilation.compiler.isChild()) return;\n-\t\t\tlastModulesCount = moduleCount;\n+\t\t\tlastModulesCount = modulesCount;\n \t\t\tlastEntriesCount = entriesCount;\n-\t\t\tmoduleCount = entriesCount = 0;\n-\t\t\tdoneModules = doneEntries = 0;\n+\t\t\tlastDependenciesCount = dependenciesCount;\n+\t\t\tmodulesCount = dependenciesCount = entriesCount = 0;\n+\t\t\tdoneModules = doneDependencies = doneEntries = 0;\n \t\t\thandler(0, \"compiling\");\n \n+\t\t\tcompilation.factorizeQueue.hooks.added.tap(\n+\t\t\t\t\"ProgressPlugin\",\n+\t\t\t\tfactorizeAdd\n+\t\t\t);\n+\t\t\tcompilation.factorizeQueue.hooks.result.tap(\n+\t\t\t\t\"ProgressPlugin\",\n+\t\t\t\tfactorizeDone\n+\t\t\t);\n+\n \t\t\tcompilation.addModuleQueue.hooks.added.tap(\"ProgressPlugin\", moduleAdd);\n+\t\t\tcompilation.processDependenciesQueue.hooks.result.tap(\n+\t\t\t\t\"ProgressPlugin\",\n+\t\t\t\tmoduleDone\n+\t\t\t);\n+\n \t\t\tcompilation.hooks.buildModule.tap(\"ProgressPlugin\", moduleBuild);\n-\t\t\tcompilation.hooks.failedModule.tap(\"ProgressPlugin\", moduleDone);\n-\t\t\tcompilation.hooks.succeedModule.tap(\"ProgressPlugin\", moduleDone);\n-\t\t\tcompilation.hooks.stillValidModule.tap(\"ProgressPlugin\", moduleDone);\n \n \t\t\tcompilation.hooks.addEntry.tap(\"ProgressPlugin\", entryAdd);\n \t\t\tcompilation.hooks.failedEntry.tap(\"ProgressPlugin\", entryDone);\n@@ -341,8 +380,10 @@ class ProgressPlugin {\n \n ProgressPlugin.defaultOptions = {\n \tprofile: false,\n-\tmodulesCount: 500,\n+\tmodulesCount: 5000,\n+\tdependenciesCount: 10000,\n \tmodules: true,\n+\tdependencies: true,\n \tactiveModules: false,\n \tentries: true\n };"
      },
      {
        "sha": "cd3f6e927933d0ac3857ff02e7132d1812c1e0e8",
        "filename": "lib/util/AsyncQueue.js",
        "status": "modified",
        "additions": 20,
        "deletions": 6,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/8aafff66001e6cd5ac7b88188be973c2b0da7eac/lib%2Futil%2FAsyncQueue.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8aafff66001e6cd5ac7b88188be973c2b0da7eac/lib%2Futil%2FAsyncQueue.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FAsyncQueue.js?ref=8aafff66001e6cd5ac7b88188be973c2b0da7eac",
        "patch": "@@ -11,6 +11,8 @@ const QUEUED_STATE = 0;\n const PROCESSING_STATE = 1;\n const DONE_STATE = 2;\n \n+let inHandleResult = 0;\n+\n /**\n  * @template T\n  * @callback Callback<T>\n@@ -111,13 +113,15 @@ class AsyncQueue {\n \t\t\tif (this._stopped) {\n \t\t\t\tthis.hooks.added.call(item);\n \t\t\t\tthis._activeTasks++;\n-\t\t\t\tthis._handleResult(newEntry, new Error(\"Queue was stopped\"));\n+\t\t\t\tprocess.nextTick(() =>\n+\t\t\t\t\tthis._handleResult(newEntry, new Error(\"Queue was stopped\"))\n+\t\t\t\t);\n \t\t\t} else {\n \t\t\t\tthis._entries.set(key, newEntry);\n \t\t\t\tthis._queued.push(newEntry);\n \t\t\t\tif (this._willEnsureProcessing === false) {\n \t\t\t\t\tthis._willEnsureProcessing = true;\n-\t\t\t\t\tprocess.nextTick(this._ensureProcessing);\n+\t\t\t\t\tsetImmediate(this._ensureProcessing);\n \t\t\t\t}\n \t\t\t\tthis.hooks.added.call(item);\n \t\t\t}\n@@ -161,7 +165,7 @@ class AsyncQueue {\n \t\tthis._parallelism++;\n \t\tif (this._willEnsureProcessing === false && this._queued.length > 0) {\n \t\t\tthis._willEnsureProcessing = true;\n-\t\t\tprocess.nextTick(this._ensureProcessing);\n+\t\t\tsetImmediate(this._ensureProcessing);\n \t\t}\n \t}\n \n@@ -260,17 +264,27 @@ class AsyncQueue {\n \n \t\t\tif (this._willEnsureProcessing === false && this._queued.length > 0) {\n \t\t\t\tthis._willEnsureProcessing = true;\n-\t\t\t\tprocess.nextTick(this._ensureProcessing);\n+\t\t\t\tsetImmediate(this._ensureProcessing);\n \t\t\t}\n \n-\t\t\tprocess.nextTick(() => {\n+\t\t\tif (inHandleResult++ > 3) {\n+\t\t\t\tprocess.nextTick(() => {\n+\t\t\t\t\tcallback(error, result);\n+\t\t\t\t\tif (callbacks !== undefined) {\n+\t\t\t\t\t\tfor (const callback of callbacks) {\n+\t\t\t\t\t\t\tcallback(error, result);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t} else {\n \t\t\t\tcallback(error, result);\n \t\t\t\tif (callbacks !== undefined) {\n \t\t\t\t\tfor (const callback of callbacks) {\n \t\t\t\t\t\tcallback(error, result);\n \t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t});\n+\t\t\t}\n+\t\t\tinHandleResult--;\n \t\t});\n \t}\n }"
      },
      {
        "sha": "778fb04b2e7ce92b25c2dff2df9b4bccc68f648a",
        "filename": "schemas/plugins/ProgressPlugin.json",
        "status": "modified",
        "additions": 9,
        "deletions": 1,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/8aafff66001e6cd5ac7b88188be973c2b0da7eac/schemas%2Fplugins%2FProgressPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/8aafff66001e6cd5ac7b88188be973c2b0da7eac/schemas%2Fplugins%2FProgressPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2FProgressPlugin.json?ref=8aafff66001e6cd5ac7b88188be973c2b0da7eac",
        "patch": "@@ -13,6 +13,14 @@\n           \"description\": \"Show active modules count and one active module in progress message\",\n           \"type\": \"boolean\"\n         },\n+        \"dependencies\": {\n+          \"description\": \"Show dependencies count in progress message\",\n+          \"type\": \"boolean\"\n+        },\n+        \"dependenciesCount\": {\n+          \"description\": \"Minimum dependencies count to start with. For better progress calculation. Default: 10000\",\n+          \"type\": \"number\"\n+        },\n         \"entries\": {\n           \"description\": \"Show entries count in progress message\",\n           \"type\": \"boolean\"\n@@ -30,7 +38,7 @@\n           \"type\": \"boolean\"\n         },\n         \"modulesCount\": {\n-          \"description\": \"Minimum modules count to start with. Only for mode=modules. Default: 500\",\n+          \"description\": \"Minimum modules count to start with. For better progress calculation. Default: 5000\",\n           \"type\": \"number\"\n         },\n         \"profile\": {"
      },
      {
        "sha": "14f12ae583c788a0e81e04f77cc0629c8a36fec1",
        "filename": "test/ProgressPlugin.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8aafff66001e6cd5ac7b88188be973c2b0da7eac/test%2FProgressPlugin.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8aafff66001e6cd5ac7b88188be973c2b0da7eac/test%2FProgressPlugin.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FProgressPlugin.test.js?ref=8aafff66001e6cd5ac7b88188be973c2b0da7eac",
        "patch": "@@ -41,7 +41,7 @@ describe(\"ProgressPlugin\", function() {\n \t\t\t\t\"trims each detail string equally\"\n \t\t\t);\n \t\t\texpect(logs).toContain(\n-\t\t\t\t\"10% ...ding ...ries ...ules ...tive\",\n+\t\t\t\t\"10% ...ding ...ries ...cies ...ules\",\n \t\t\t\t\"remove empty arguments and omit arguments when no space\"\n \t\t\t);\n \t\t\texpect(logs).toContain(\"92% after chunk asset optimization\");"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9928",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9928/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9928/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9928/events",
    "html_url": "https://github.com/webpack/webpack/pull/9928",
    "id": 517056451,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzM2MTk5MTE0",
    "number": 9928,
    "title": "Many small performance improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2019-11-04T10:15:39Z",
    "updated_at": "2019-11-04T20:30:18Z",
    "closed_at": "2019-11-04T20:30:14Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9928",
      "html_url": "https://github.com/webpack/webpack/pull/9928",
      "diff_url": "https://github.com/webpack/webpack/pull/9928.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9928.patch",
      "merged_at": "2019-11-04T20:30:14Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* add logging to FileSystemInfo to print out which file caused snapshot invalidation\r\n* use LazySet in ResolverCachePlugin\r\n* do not emit immutable files when this file already exists on disk\r\n* do not emit files if the same file with the same content already exists on disk\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\nOutputFileSystem also need `stat` and `readFile` to check for existing files\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* webpack may not write output files when file already exists on disk with the same content\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9928/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5fc44cedcf4dfbf11930aef8f2791cd7a2e8c49f",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -1180,6 +1180,10 @@ export interface OutputOptions {\n \t * Number of milliseconds before chunk request expires\n \t */\n \tchunkLoadTimeout?: number;\n+\t/**\n+\t * Check if to be emitted file already exists and have the same content before writing to output filesystem\n+\t */\n+\tcompareBeforeEmit?: boolean;\n \t/**\n \t * This option enables cross-origin loading of chunks.\n \t */"
      },
      {
        "sha": "61e6e6b72affbe09ea84802d4e0cfbb02d120973",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -481,7 +481,8 @@ class Compilation {\n \t\tthis.inputFileSystem = compiler.inputFileSystem;\n \t\tthis.fileSystemInfo = new FileSystemInfo(this.inputFileSystem, {\n \t\t\tmanagedPaths: compiler.managedPaths,\n-\t\t\timmutablePaths: compiler.immutablePaths\n+\t\t\timmutablePaths: compiler.immutablePaths,\n+\t\t\tlogger: this.getLogger(\"webpack.FileSystemInfo\")\n \t\t});\n \t\tif (compiler.fileTimestamps) {\n \t\t\tthis.fileSystemInfo.addFileTimestamps(compiler.fileTimestamps);\n@@ -619,6 +620,8 @@ class Compilation {\n \t\tthis._rebuildingModules = new Map();\n \t\t/** @type {Set<string>} */\n \t\tthis.emittedAssets = new Set();\n+\t\t/** @type {Set<string>} */\n+\t\tthis.comparedForEmitAssets = new Set();\n \t\t/** @type {LazySet<string>} */\n \t\tthis.fileDependencies = new LazySet();\n \t\t/** @type {LazySet<string>} */"
      },
      {
        "sha": "2c9d4b43e481d1ea46878390d1b5a040be647382",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 132,
        "deletions": 49,
        "changes": 181,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -413,7 +413,7 @@ class Compiler {\n \t\t\tasyncLib.forEachLimit(\n \t\t\t\tcompilation.getAssets(),\n \t\t\t\t15,\n-\t\t\t\t({ name: file, source }, callback) => {\n+\t\t\t\t({ name: file, source, info }, callback) => {\n \t\t\t\t\tlet targetFile = file;\n \t\t\t\t\tconst queryStringIdx = targetFile.indexOf(\"?\");\n \t\t\t\t\tif (queryStringIdx >= 0) {\n@@ -443,6 +443,120 @@ class Compiler {\n \t\t\t\t\t\t\tthis._assetEmittingSourceCache.set(source, cacheEntry);\n \t\t\t\t\t\t}\n \n+\t\t\t\t\t\t/**\n+\t\t\t\t\t\t * get the binary (Buffer) content from the Source\n+\t\t\t\t\t\t * @returns {Buffer} content for the source\n+\t\t\t\t\t\t */\n+\t\t\t\t\t\tconst getContent = () => {\n+\t\t\t\t\t\t\tif (typeof source.buffer === \"function\") {\n+\t\t\t\t\t\t\t\treturn source.buffer();\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tconst bufferOrString = source.source();\n+\t\t\t\t\t\t\t\tif (Buffer.isBuffer(bufferOrString)) {\n+\t\t\t\t\t\t\t\t\treturn bufferOrString;\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\treturn Buffer.from(bufferOrString, \"utf8\");\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\tconst alreadyWritten = () => {\n+\t\t\t\t\t\t\t// cache the information that the Source has been already been written to that location\n+\t\t\t\t\t\t\tif (targetFileGeneration === undefined) {\n+\t\t\t\t\t\t\t\tconst newGeneration = 1;\n+\t\t\t\t\t\t\t\tthis._assetEmittingWrittenFiles.set(targetPath, newGeneration);\n+\t\t\t\t\t\t\t\tcacheEntry.writtenTo.set(targetPath, newGeneration);\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tcacheEntry.writtenTo.set(targetPath, targetFileGeneration);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\t/**\n+\t\t\t\t\t\t * Write the file to output file system\n+\t\t\t\t\t\t * @param {Buffer} content content to be written\n+\t\t\t\t\t\t * @returns {void}\n+\t\t\t\t\t\t */\n+\t\t\t\t\t\tconst doWrite = content => {\n+\t\t\t\t\t\t\tthis.outputFileSystem.writeFile(targetPath, content, err => {\n+\t\t\t\t\t\t\t\tif (err) return callback(err);\n+\n+\t\t\t\t\t\t\t\t// information marker that the asset has been emitted\n+\t\t\t\t\t\t\t\tcompilation.emittedAssets.add(file);\n+\n+\t\t\t\t\t\t\t\t// cache the information that the Source has been written to that location\n+\t\t\t\t\t\t\t\tconst newGeneration =\n+\t\t\t\t\t\t\t\t\ttargetFileGeneration === undefined\n+\t\t\t\t\t\t\t\t\t\t? 1\n+\t\t\t\t\t\t\t\t\t\t: targetFileGeneration + 1;\n+\t\t\t\t\t\t\t\tcacheEntry.writtenTo.set(targetPath, newGeneration);\n+\t\t\t\t\t\t\t\tthis._assetEmittingWrittenFiles.set(targetPath, newGeneration);\n+\t\t\t\t\t\t\t\tthis.hooks.assetEmitted.callAsync(\n+\t\t\t\t\t\t\t\t\tfile,\n+\t\t\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\t\t\tcontent,\n+\t\t\t\t\t\t\t\t\t\tsource,\n+\t\t\t\t\t\t\t\t\t\toutputPath,\n+\t\t\t\t\t\t\t\t\t\tcompilation,\n+\t\t\t\t\t\t\t\t\t\ttargetPath\n+\t\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\t\tcallback\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\tconst updateWithReplacementSource = size => {\n+\t\t\t\t\t\t\t// Create a replacement resource which only allows to ask for size\n+\t\t\t\t\t\t\t// This allows to GC all memory allocated by the Source\n+\t\t\t\t\t\t\t// (expect when the Source is stored in any other cache)\n+\t\t\t\t\t\t\tif (!cacheEntry.sizeOnlySource) {\n+\t\t\t\t\t\t\t\tcacheEntry.sizeOnlySource = new SizeOnlySource(size);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tcompilation.updateAsset(file, cacheEntry.sizeOnlySource, {\n+\t\t\t\t\t\t\t\tsize\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\tconst processExistingFile = stats => {\n+\t\t\t\t\t\t\t// skip emitting if it's already there and an immutable file\n+\t\t\t\t\t\t\tif (info.immutable) {\n+\t\t\t\t\t\t\t\tupdateWithReplacementSource(stats.size);\n+\t\t\t\t\t\t\t\treturn alreadyWritten();\n+\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\tconst content = getContent();\n+\n+\t\t\t\t\t\t\tupdateWithReplacementSource(content.length);\n+\n+\t\t\t\t\t\t\t// if it exists and content on disk matches content\n+\t\t\t\t\t\t\t// skip writing the same content again\n+\t\t\t\t\t\t\t// (to keep mtime and don't trigger watchers)\n+\t\t\t\t\t\t\t// for a fast negative match file size is compared first\n+\t\t\t\t\t\t\tif (content.length === stats.size) {\n+\t\t\t\t\t\t\t\tcompilation.comparedForEmitAssets.add(file);\n+\t\t\t\t\t\t\t\treturn this.outputFileSystem.readFile(\n+\t\t\t\t\t\t\t\t\ttargetPath,\n+\t\t\t\t\t\t\t\t\t(err, existingContent) => {\n+\t\t\t\t\t\t\t\t\t\tif (err || !content.equals(existingContent)) {\n+\t\t\t\t\t\t\t\t\t\t\treturn doWrite(content);\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\treturn alreadyWritten();\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\treturn doWrite(content);\n+\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\tconst processMissingFile = () => {\n+\t\t\t\t\t\t\tconst content = getContent();\n+\n+\t\t\t\t\t\t\tupdateWithReplacementSource(content.length);\n+\n+\t\t\t\t\t\t\treturn doWrite(content);\n+\t\t\t\t\t\t};\n+\n \t\t\t\t\t\t// if the target file has already been written\n \t\t\t\t\t\tif (targetFileGeneration !== undefined) {\n \t\t\t\t\t\t\t// check if the Source has been written to this target file\n@@ -458,59 +572,28 @@ class Compiler {\n \n \t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n \n-\t\t\t\t\t\t// TODO webpack 5: if info.immutable check if file already exists in output\n-\t\t\t\t\t\t// skip emitting if it's already there\n-\n-\t\t\t\t\t\t// get the binary (Buffer) content from the Source\n-\t\t\t\t\t\t/** @type {Buffer} */\n-\t\t\t\t\t\tlet content;\n-\t\t\t\t\t\tif (typeof source.buffer === \"function\") {\n-\t\t\t\t\t\t\tcontent = source.buffer();\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tconst bufferOrString = source.source();\n-\t\t\t\t\t\t\tif (Buffer.isBuffer(bufferOrString)) {\n-\t\t\t\t\t\t\t\tcontent = bufferOrString;\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tcontent = Buffer.from(bufferOrString, \"utf8\");\n+\t\t\t\t\t\t\tif (!info.immutable) {\n+\t\t\t\t\t\t\t\t// We wrote to this file before which has very likly a different content\n+\t\t\t\t\t\t\t\t// skip comparing and assume content is different for performance\n+\t\t\t\t\t\t\t\t// This case happens often during watch mode.\n+\t\t\t\t\t\t\t\treturn processMissingFile();\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \n-\t\t\t\t\t\t// Create a replacement resource which only allows to ask for size\n-\t\t\t\t\t\t// This allows to GC all memory allocated by the Source\n-\t\t\t\t\t\t// (expect when the Source is stored in any other cache)\n-\t\t\t\t\t\tcacheEntry.sizeOnlySource = new SizeOnlySource(content.length);\n-\t\t\t\t\t\tcompilation.updateAsset(file, cacheEntry.sizeOnlySource, {\n-\t\t\t\t\t\t\tsize: content.length\n-\t\t\t\t\t\t});\n-\n-\t\t\t\t\t\t// Write the file to output file system\n-\t\t\t\t\t\tthis.outputFileSystem.writeFile(targetPath, content, err => {\n-\t\t\t\t\t\t\tif (err) return callback(err);\n+\t\t\t\t\t\tif (this.options.output.compareBeforeEmit) {\n+\t\t\t\t\t\t\tthis.outputFileSystem.stat(targetPath, (err, stats) => {\n+\t\t\t\t\t\t\t\tconst exists = !err && stats.isFile();\n \n-\t\t\t\t\t\t\t// information marker that the asset has been emitted\n-\t\t\t\t\t\t\tcompilation.emittedAssets.add(file);\n-\n-\t\t\t\t\t\t\t// cache the information that the Source has been written to that location\n-\t\t\t\t\t\t\tconst newGeneration =\n-\t\t\t\t\t\t\t\ttargetFileGeneration === undefined\n-\t\t\t\t\t\t\t\t\t? 1\n-\t\t\t\t\t\t\t\t\t: targetFileGeneration + 1;\n-\t\t\t\t\t\t\tcacheEntry.writtenTo.set(targetPath, newGeneration);\n-\t\t\t\t\t\t\tthis._assetEmittingWrittenFiles.set(targetPath, newGeneration);\n-\t\t\t\t\t\t\tthis.hooks.assetEmitted.callAsync(\n-\t\t\t\t\t\t\t\tfile,\n-\t\t\t\t\t\t\t\t{\n-\t\t\t\t\t\t\t\t\tcontent,\n-\t\t\t\t\t\t\t\t\tsource,\n-\t\t\t\t\t\t\t\t\toutputPath,\n-\t\t\t\t\t\t\t\t\tcompilation,\n-\t\t\t\t\t\t\t\t\ttargetPath\n-\t\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\t\tcallback\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\tif (exists) {\n+\t\t\t\t\t\t\t\t\tprocessExistingFile(stats);\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tprocessMissingFile();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tprocessMissingFile();\n+\t\t\t\t\t\t}\n \t\t\t\t\t};\n \n \t\t\t\t\tif (targetFile.match(/\\/|\\\\/)) {"
      },
      {
        "sha": "d54dd9a21e8fe2d425f56638231a2442b4fc29b3",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 126,
        "deletions": 29,
        "changes": 155,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -12,6 +12,7 @@ const createHash = require(\"./util/createHash\");\n const { join, dirname, relative } = require(\"./util/fs\");\n \n /** @typedef {import(\"./WebpackError\")} WebpackError */\n+/** @typedef {import(\"./logging/Logger\").Logger} Logger */\n /** @typedef {import(\"./util/fs\").InputFileSystem} InputFileSystem */\n \n const resolveContext = resolve.create({\n@@ -174,9 +175,13 @@ class FileSystemInfo {\n \t * @param {Object} options options\n \t * @param {Iterable<string>=} options.managedPaths paths that are only managed by a package manager\n \t * @param {Iterable<string>=} options.immutablePaths paths that are immutable\n+\t * @param {Logger=} options.logger logger used to log invalid snapshots\n \t */\n-\tconstructor(fs, { managedPaths = [], immutablePaths = [] } = {}) {\n+\tconstructor(fs, { managedPaths = [], immutablePaths = [], logger } = {}) {\n \t\tthis.fs = fs;\n+\t\tthis.logger = logger;\n+\t\tthis._remainingLogs = logger ? 40 : 0;\n+\t\tthis._loggedPaths = logger ? new Set() : undefined;\n \t\t/** @type {WeakMap<Snapshot, boolean | (function(WebpackError=, boolean=): void)[]>} */\n \t\tthis._snapshotCache = new WeakMap();\n \t\t/** @type {Map<string, FileSystemInfoEntry | null>} */\n@@ -224,6 +229,17 @@ class FileSystemInfo {\n \t\t);\n \t}\n \n+\t_log(path, reason) {\n+\t\tif (this._loggedPaths.has(path)) return;\n+\t\tthis._loggedPaths.add(path);\n+\t\tthis.logger.debug(`${path} invalidated because ${reason}`);\n+\t\tif (--this._remainingLogs === 0) {\n+\t\t\tthis.logger.debug(\n+\t\t\t\t\"Logging limit has been reached and no futher logging will be emitted by FileSystemInfo\"\n+\t\t\t);\n+\t\t}\n+\t}\n+\n \t/**\n \t * @param {Map<string, FileSystemInfoEntry | null>} map timestamps\n \t * @returns {void}\n@@ -906,8 +922,7 @@ class FileSystemInfo {\n \t\t\t}\n \t\t\treturn;\n \t\t}\n-\t\tconst callbacks = [callback];\n-\t\tthis._snapshotCache.set(snapshot, callbacks);\n+\t\tlet callbacks;\n \t\tconst {\n \t\t\tstartTime,\n \t\t\tfileTimestamps,\n@@ -921,56 +936,110 @@ class FileSystemInfo {\n \t\tconst jobDone = () => {\n \t\t\tif (--jobs === 0) {\n \t\t\t\tthis._snapshotCache.set(snapshot, true);\n-\t\t\t\tfor (const callback of callbacks) callback(null, true);\n+\t\t\t\tcallback(null, true);\n \t\t\t}\n \t\t};\n \t\tconst invalid = () => {\n \t\t\tif (jobs > 0) {\n-\t\t\t\tjobs = NaN;\n+\t\t\t\t// large negative number instead of NaN or something else to keep jobs to stay a SMI (v8)\n+\t\t\t\tjobs = -100000000;\n \t\t\t\tthis._snapshotCache.set(snapshot, false);\n-\t\t\t\tfor (const callback of callbacks) callback(null, false);\n+\t\t\t\tcallback(null, false);\n+\t\t\t}\n+\t\t};\n+\t\tconst invalidWithError = (path, err) => {\n+\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\tthis._log(path, `error occured: ${err}`);\n \t\t\t}\n+\t\t\tinvalid();\n \t\t};\n-\t\tconst checkHash = (current, snap) => {\n+\t\t/**\n+\t\t * @param {string} path file path\n+\t\t * @param {string} current current hash\n+\t\t * @param {string} snap snapshot hash\n+\t\t * @returns {boolean} true, if ok\n+\t\t */\n+\t\tconst checkHash = (path, current, snap) => {\n \t\t\tif (snap === \"error\") {\n \t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n \t\t\t\t// we can't compare further data and assume it's invalid\n+\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tthis._log(path, `there was an error during snapshotting`);\n+\t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n-\t\t\treturn current === snap;\n+\t\t\tif (current !== snap) {\n+\t\t\t\t// If hash differ it's invalid\n+\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tthis._log(path, `hashes differ (${current} != ${snap})`);\n+\t\t\t\t}\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\treturn true;\n \t\t};\n \t\t/**\n+\t\t * @param {string} path file path\n \t\t * @param {FileSystemInfoEntry} current current entry\n \t\t * @param {FileSystemInfoEntry | \"error\"} snap entry from snapshot\n \t\t * @returns {boolean} true, if ok\n \t\t */\n-\t\tconst checkExistance = (current, snap) => {\n+\t\tconst checkExistance = (path, current, snap) => {\n \t\t\tif (snap === \"error\") {\n \t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n \t\t\t\t// we can't compare further data and assume it's invalid\n+\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tthis._log(path, `there was an error during snapshotting`);\n+\t\t\t\t}\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\tif (!current !== !snap) {\n+\t\t\t\t// If existance of item differs\n+\t\t\t\t// it's invalid\n+\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tthis._log(\n+\t\t\t\t\t\tpath,\n+\t\t\t\t\t\tcurrent ? \"it didn't exist before\" : \"it does no longer exist\"\n+\t\t\t\t\t);\n+\t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n-\t\t\treturn !current === !snap;\n+\t\t\treturn true;\n \t\t};\n \t\t/**\n+\t\t * @param {string} path file path\n \t\t * @param {FileSystemInfoEntry} current current entry\n \t\t * @param {FileSystemInfoEntry | \"error\"} snap entry from snapshot\n \t\t * @returns {boolean} true, if ok\n \t\t */\n-\t\tconst checkFile = (current, snap) => {\n+\t\tconst checkFile = (path, current, snap) => {\n \t\t\tif (snap === \"error\") {\n \t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n \t\t\t\t// we can't compare further data and assume it's invalid\n+\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tthis._log(path, `there was an error during snapshotting`);\n+\t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n \t\t\tif (current && current.safeTime > startTime) {\n \t\t\t\t// If a change happened after starting reading the item\n \t\t\t\t// this may no longer be valid\n+\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tthis._log(\n+\t\t\t\t\t\tpath,\n+\t\t\t\t\t\t`it may have changed (${current.safeTime}) after the start time of the snapshot (${startTime})`\n+\t\t\t\t\t);\n+\t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n \t\t\tif (!current !== !snap) {\n \t\t\t\t// If existance of item differs\n \t\t\t\t// it's invalid\n+\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\tthis._log(\n+\t\t\t\t\t\tpath,\n+\t\t\t\t\t\tcurrent ? \"it didn't exist before\" : \"it does no longer exist\"\n+\t\t\t\t\t);\n+\t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n \t\t\tif (current) {\n@@ -981,6 +1050,12 @@ class FileSystemInfo {\n \t\t\t\t) {\n \t\t\t\t\t// If we have a timestamp (it was a file or symlink) and it differs from current timestamp\n \t\t\t\t\t// it's invalid\n+\t\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\t\tthis._log(\n+\t\t\t\t\t\t\tpath,\n+\t\t\t\t\t\t\t`timestamps differ (${current.timestamp} != ${snap.timestamp})`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n \t\t\t\t\treturn false;\n \t\t\t\t}\n \t\t\t\tif (\n@@ -989,6 +1064,12 @@ class FileSystemInfo {\n \t\t\t\t) {\n \t\t\t\t\t// If we have a timestampHash (it was a directory) and it differs from current timestampHash\n \t\t\t\t\t// it's invalid\n+\t\t\t\t\tif (this._remainingLogs > 0) {\n+\t\t\t\t\t\tthis._log(\n+\t\t\t\t\t\t\tpath,\n+\t\t\t\t\t\t\t`timestamps hashes differ (${current.timestampHash} != ${snap.timestampHash})`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n \t\t\t\t\treturn false;\n \t\t\t\t}\n \t\t\t}\n@@ -998,14 +1079,15 @@ class FileSystemInfo {\n \t\t\tfor (const [path, ts] of fileTimestamps) {\n \t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (!checkFile(cache, ts)) {\n+\t\t\t\t\tif (!checkFile(path, cache, ts)) {\n \t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalid();\n-\t\t\t\t\t\tif (!checkFile(entry, ts)) {\n+\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\tif (!checkFile(path, entry, ts)) {\n \t\t\t\t\t\t\tinvalid();\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tjobDone();\n@@ -1018,14 +1100,15 @@ class FileSystemInfo {\n \t\t\tfor (const [path, hash] of fileHashes) {\n \t\t\t\tconst cache = this._fileHashes.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (!checkHash(cache, hash)) {\n+\t\t\t\t\tif (!checkHash(path, cache, hash)) {\n \t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.fileHashQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalid();\n-\t\t\t\t\t\tif (!checkHash(entry, hash)) {\n+\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\tif (!checkHash(path, entry, hash)) {\n \t\t\t\t\t\t\tinvalid();\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tjobDone();\n@@ -1038,14 +1121,15 @@ class FileSystemInfo {\n \t\t\tfor (const [path, ts] of contextTimestamps) {\n \t\t\t\tconst cache = this._contextTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (!checkFile(cache, ts)) {\n+\t\t\t\t\tif (!checkFile(path, cache, ts)) {\n \t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.contextTimestampQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalid();\n-\t\t\t\t\t\tif (!checkFile(entry, ts)) {\n+\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\tif (!checkFile(path, entry, ts)) {\n \t\t\t\t\t\t\tinvalid();\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tjobDone();\n@@ -1058,14 +1142,15 @@ class FileSystemInfo {\n \t\t\tfor (const [path, hash] of contextHashes) {\n \t\t\t\tconst cache = this._contextHashes.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (!checkHash(cache, hash)) {\n+\t\t\t\t\tif (!checkHash(path, cache, hash)) {\n \t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.contextHashQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalid();\n-\t\t\t\t\t\tif (!checkHash(entry, hash)) {\n+\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\tif (!checkHash(path, entry, hash)) {\n \t\t\t\t\t\t\tinvalid();\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tjobDone();\n@@ -1078,14 +1163,15 @@ class FileSystemInfo {\n \t\t\tfor (const [path, ts] of missingTimestamps) {\n \t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (!checkExistance(cache, ts)) {\n+\t\t\t\t\tif (!checkExistance(path, cache, ts)) {\n \t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalid();\n-\t\t\t\t\t\tif (!checkExistance(entry, ts)) {\n+\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\tif (!checkExistance(path, entry, ts)) {\n \t\t\t\t\t\t\tinvalid();\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tjobDone();\n@@ -1098,14 +1184,15 @@ class FileSystemInfo {\n \t\t\tfor (const [path, info] of managedItemInfo) {\n \t\t\t\tconst cache = this._managedItems.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (!checkHash(cache, info)) {\n+\t\t\t\t\tif (!checkHash(path, cache, info)) {\n \t\t\t\t\t\tinvalid();\n+\t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.managedItemQueue.add(path, (err, entry) => {\n-\t\t\t\t\t\tif (err) return invalid();\n-\t\t\t\t\t\tif (!checkHash(entry, info)) {\n+\t\t\t\t\t\tif (err) return invalidWithError(path, err);\n+\t\t\t\t\t\tif (!checkHash(path, entry, info)) {\n \t\t\t\t\t\t\tinvalid();\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tjobDone();\n@@ -1115,6 +1202,16 @@ class FileSystemInfo {\n \t\t\t}\n \t\t}\n \t\tjobDone();\n+\n+\t\t// if there was an async action\n+\t\t// try to join multiple concurrent request for this snapshot\n+\t\tif (jobs > 0) {\n+\t\t\tcallbacks = [callback];\n+\t\t\tcallback = (err, result) => {\n+\t\t\t\tfor (const callback of callbacks) callback(err, result);\n+\t\t\t};\n+\t\t\tthis._snapshotCache.set(snapshot, callbacks);\n+\t\t}\n \t}\n \n \t_readFileTimestamp(path, callback) {"
      },
      {
        "sha": "f559314f666efa51f17dfe878d62e4865013a515",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -232,6 +232,7 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\tthis.set(\"output.webassemblyModuleFilename\", \"[hash].module.wasm\");\n \t\tthis.set(\"output.library\", \"\");\n \t\tthis.set(\"output.publicPath\", \"\");\n+\t\tthis.set(\"output.compareBeforeEmit\", true);\n \t\tthis.set(\"output.hotUpdateFunction\", \"make\", options => {\n \t\t\treturn Template.toIdentifier(\n \t\t\t\t\"webpackHotUpdate\" + Template.toIdentifier(options.output.library)"
      },
      {
        "sha": "274ab1c0b924ffaaef7584a4c80161ba4b28cb2b",
        "filename": "lib/cache/ResolverCachePlugin.js",
        "status": "modified",
        "additions": 21,
        "deletions": 23,
        "changes": 44,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fcache%2FResolverCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fcache%2FResolverCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FResolverCachePlugin.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -5,6 +5,8 @@\n \n \"use strict\";\n \n+const LazySet = require(\"../util/LazySet\");\n+\n /** @typedef {import(\"enhanced-resolve/lib/Resolver\")} Resolver */\n /** @typedef {import(\"../Compiler\")} Compiler */\n /** @typedef {import(\"../FileSystemInfo\")} FileSystemInfo */\n@@ -14,16 +16,16 @@\n /**\n  * @typedef {Object} CacheEntry\n  * @property {Object} result\n- * @property {Set<string>} fileDependencies\n- * @property {Set<string>} contextDependencies\n- * @property {Set<string>} missingDependencies\n+ * @property {LazySet<string>} fileDependencies\n+ * @property {LazySet<string>} contextDependencies\n+ * @property {LazySet<string>} missingDependencies\n  * @property {Snapshot} snapshot\n  */\n \n /**\n  * @template T\n  * @param {Set<T> | LazySet<T>} set set to add items to\n- * @param {Set<T>} otherSet set to add items from\n+ * @param {Set<T> | LazySet<T>} otherSet set to add items from\n  * @returns {void}\n  */\n const addAllToSet = (set, otherSet) => {\n@@ -68,15 +70,17 @@ class ResolverCachePlugin {\n \t\tcompiler.hooks.thisCompilation.tap(\"ResolverCachePlugin\", compilation => {\n \t\t\tfileSystemInfo = compilation.fileSystemInfo;\n \t\t\tcompilation.hooks.finishModules.tap(\"ResolverCachePlugin\", () => {\n-\t\t\t\tconst logger = compilation.getLogger(\"webpack.ResolverCachePlugin\");\n-\t\t\t\tlogger.debug(\n-\t\t\t\t\t`${Math.round(\n-\t\t\t\t\t\t(100 * realResolves) / (realResolves + cachedResolves)\n-\t\t\t\t\t)}% really resolved (${realResolves} real resolves, ${cachedResolves} cached, ${cacheInvalidResolves} cached but invalid)`\n-\t\t\t\t);\n-\t\t\t\trealResolves = 0;\n-\t\t\t\tcachedResolves = 0;\n-\t\t\t\tcacheInvalidResolves = 0;\n+\t\t\t\tif (realResolves + cachedResolves > 0) {\n+\t\t\t\t\tconst logger = compilation.getLogger(\"webpack.ResolverCachePlugin\");\n+\t\t\t\t\tlogger.debug(\n+\t\t\t\t\t\t`${Math.round(\n+\t\t\t\t\t\t\t(100 * realResolves) / (realResolves + cachedResolves)\n+\t\t\t\t\t\t)}% really resolved (${realResolves} real resolves, ${cachedResolves} cached, ${cacheInvalidResolves} cached but invalid)`\n+\t\t\t\t\t);\n+\t\t\t\t\trealResolves = 0;\n+\t\t\t\t\tcachedResolves = 0;\n+\t\t\t\t\tcacheInvalidResolves = 0;\n+\t\t\t\t}\n \t\t\t});\n \t\t});\n \t\t/**\n@@ -104,15 +108,13 @@ class ResolverCachePlugin {\n \t\t\tconst newResolveContext = {\n \t\t\t\t...resolveContext,\n \t\t\t\tstack: new Set(),\n-\t\t\t\tmissingDependencies: new Set(),\n-\t\t\t\tfileDependencies: new Set(),\n-\t\t\t\tcontextDependencies: new Set()\n+\t\t\t\tmissingDependencies: new LazySet(),\n+\t\t\t\tfileDependencies: new LazySet(),\n+\t\t\t\tcontextDependencies: new LazySet()\n \t\t\t};\n \t\t\tconst propagate = key => {\n \t\t\t\tif (resolveContext[key]) {\n-\t\t\t\t\tfor (const dep of newResolveContext[key]) {\n-\t\t\t\t\t\tresolveContext[key].add(dep);\n-\t\t\t\t\t}\n+\t\t\t\t\taddAllToSet(resolveContext[key], newResolveContext[key]);\n \t\t\t\t}\n \t\t\t};\n \t\t\tconst resolveTime = Date.now();\n@@ -129,10 +131,6 @@ class ResolverCachePlugin {\n \t\t\t\t\tconst fileDependencies = newResolveContext.fileDependencies;\n \t\t\t\t\tconst contextDependencies = newResolveContext.contextDependencies;\n \t\t\t\t\tconst missingDependencies = newResolveContext.missingDependencies;\n-\t\t\t\t\t// TODO remove this when enhanced-resolve supports fileDependencies\n-\t\t\t\t\tif (result && result.path) {\n-\t\t\t\t\t\tfileDependencies.add(result.path);\n-\t\t\t\t\t}\n \t\t\t\t\tfileSystemInfo.createSnapshot(\n \t\t\t\t\t\tresolveTime,\n \t\t\t\t\t\tfileDependencies,"
      },
      {
        "sha": "58a5601be7d975e0254aeb8f6763257c8985031d",
        "filename": "lib/serialization/BinaryMiddleware.js",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fserialization%2FBinaryMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fserialization%2FBinaryMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FBinaryMiddleware.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -10,6 +10,8 @@ const SerializerMiddleware = require(\"./SerializerMiddleware\");\n /** @typedef {import(\"./types\").BufferSerializableType} BufferSerializableType */\n /** @typedef {import(\"./types\").PrimitiveSerializableType} PrimitiveSerializableType */\n \n+const SERIALIZED_INFO = Symbol(\"serialized info\");\n+\n /*\n Format:\n \n@@ -86,6 +88,8 @@ const identifyNumber = n => {\n  */\n class BinaryMiddleware extends SerializerMiddleware {\n \t_handleFunctionSerialization(fn, context) {\n+\t\tconst serializedInfo = fn[SERIALIZED_INFO];\n+\t\tif (serializedInfo) return serializedInfo;\n \t\treturn memorize(() => {\n \t\t\tconst r = fn();\n \t\t\tif (r instanceof Promise)\n@@ -96,12 +100,14 @@ class BinaryMiddleware extends SerializerMiddleware {\n \t}\n \n \t_handleFunctionDeserialization(fn, context) {\n-\t\treturn memorize(() => {\n+\t\tconst result = memorize(() => {\n \t\t\tconst r = fn();\n \t\t\tif (r instanceof Promise)\n \t\t\t\treturn r.then(data => this.deserialize(data, context));\n \t\t\treturn this.deserialize(r, context);\n \t\t});\n+\t\tresult[SERIALIZED_INFO] = fn;\n+\t\treturn result;\n \t}\n \n \t/**"
      },
      {
        "sha": "a37238ffa842ade41842f8d298e9acf7a4053ac7",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "modified",
        "additions": 41,
        "deletions": 13,
        "changes": 54,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -18,6 +18,8 @@ const SetObjectSerializer = require(\"./SetObjectSerializer\");\n \n /** @typedef {new (...params: any[]) => any} Constructor */\n \n+const SERIALIZED_INFO = Symbol(\"serialized info\");\n+\n /*\n \n Format:\n@@ -224,6 +226,8 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t}\n \n \t_handleFunctionSerialization(fn, context) {\n+\t\tconst serializedInfo = fn[SERIALIZED_INFO];\n+\t\tif (serializedInfo) return serializedInfo;\n \t\treturn memorize(() => {\n \t\t\tconst r = fn();\n \n@@ -235,14 +239,16 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t}\n \n \t_handleFunctionDeserialization(fn, context) {\n-\t\treturn memorize(() => {\n+\t\tconst result = memorize(() => {\n \t\t\tconst r = fn();\n \n \t\t\tif (r instanceof Promise)\n \t\t\t\treturn r.then(data => this.deserialize(data, context)[0]);\n \n \t\t\treturn this.deserialize(r, context)[0];\n \t\t});\n+\t\tresult[SERIALIZED_INFO] = fn;\n+\t\treturn result;\n \t}\n \n \t/**\n@@ -452,22 +458,44 @@ class ObjectMiddleware extends SerializerMiddleware {\n \n \t\t\t\t\t\tobjectTypeLookup.set(currentPosTypeLookup++, serializer);\n \t\t\t\t\t}\n-\t\t\t\t\tconst item = serializer.deserialize(ctx);\n-\t\t\t\t\tconst end1 = read();\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\tconst item = serializer.deserialize(ctx);\n+\t\t\t\t\t\tconst end1 = read();\n \n-\t\t\t\t\tif (end1 !== ESCAPE) {\n-\t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tconst end2 = read();\n+\t\t\t\t\t\tif (end1 !== ESCAPE) {\n+\t\t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\tif (end2 !== ESCAPE_END_OBJECT) {\n-\t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n-\t\t\t\t\t}\n+\t\t\t\t\t\tconst end2 = read();\n \n-\t\t\t\t\taddReferenceable(item);\n+\t\t\t\t\t\tif (end2 !== ESCAPE_END_OBJECT) {\n+\t\t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\treturn item;\n+\t\t\t\t\t\taddReferenceable(item);\n+\n+\t\t\t\t\t\treturn item;\n+\t\t\t\t\t} catch (err) {\n+\t\t\t\t\t\t// As this is only for error handling, we omit creating a Map for\n+\t\t\t\t\t\t// faster access to this information, as this would affect performance\n+\t\t\t\t\t\t// in the good case\n+\t\t\t\t\t\tlet serializerEntry;\n+\t\t\t\t\t\tfor (const entry of serializers) {\n+\t\t\t\t\t\t\tif (entry[1].serializer === serializer) {\n+\t\t\t\t\t\t\t\tserializerEntry = entry;\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tconst name = !serializerEntry\n+\t\t\t\t\t\t\t? \"unknown\"\n+\t\t\t\t\t\t\t: !serializerEntry[1].request\n+\t\t\t\t\t\t\t? serializerEntry[0].name\n+\t\t\t\t\t\t\t: serializerEntry[1].name\n+\t\t\t\t\t\t\t? `${serializerEntry[1].request} ${serializerEntry[1].name}`\n+\t\t\t\t\t\t\t: serializerEntry[1].request;\n+\t\t\t\t\t\terr.message += `\\n(during deserialization of ${name})`;\n+\t\t\t\t\t\tthrow err;\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else if (typeof item === \"string\") {\n \t\t\t\tif (item !== \"\") {"
      },
      {
        "sha": "b741f85a5e986028f04c5fffb92c251cf24193d5",
        "filename": "lib/stats/DefaultStatsFactoryPlugin.js",
        "status": "modified",
        "additions": 9,
        "deletions": 1,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsFactoryPlugin.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -488,6 +488,9 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t\tcompareIds\n \t\t\t);\n \t\t\tobject.emitted = compilation.emittedAssets.has(asset.name);\n+\t\t\tobject.comparedForEmit = compilation.comparedForEmitAssets.has(\n+\t\t\t\tasset.name\n+\t\t\t);\n \t\t\tobject.info = asset.info;\n \t\t},\n \t\tids: (\n@@ -939,7 +942,12 @@ const FILTER = {\n \t\t\tif (excluded) return false;\n \t\t},\n \t\t\"!cachedAssets\": (asset, { compilation }) => {\n-\t\t\tif (!compilation.emittedAssets.has(asset.name)) return false;\n+\t\t\tif (\n+\t\t\t\t!compilation.emittedAssets.has(asset.name) &&\n+\t\t\t\t!compilation.comparedForEmitAssets.has(asset.name)\n+\t\t\t) {\n+\t\t\t\treturn false;\n+\t\t\t}\n \t\t}\n \t},\n \t\"compilation.modules\": ({"
      },
      {
        "sha": "7f7aa415ef4c395acc9762117dea1c374b541ed8",
        "filename": "lib/stats/DefaultStatsPrinterPlugin.js",
        "status": "modified",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsPrinterPlugin.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -155,6 +155,8 @@ const SIMPLE_PRINTERS = {\n \t) => ((isOverSizeLimit ? yellow(formatSize(size)) : formatSize(size))),\n \t\"asset.emitted\": (emitted, { green, formatFlag }) =>\n \t\temitted ? green(formatFlag(\"emitted\")) : undefined,\n+\t\"asset.comparedForEmit\": (comparedForEmit, { yellow, formatFlag }) =>\n+\t\tcomparedForEmit ? yellow(formatFlag(\"compared for emit\")) : undefined,\n \t\"asset.isOverSizeLimit\": (isOverSizeLimit, { yellow, formatFlag }) =>\n \t\tisOverSizeLimit ? yellow(formatFlag(\"big\")) : undefined,\n \n@@ -548,6 +550,7 @@ const PREFERED_ORDERS = {\n \t\t\"chunks\",\n \t\t\"auxiliaryChunks\",\n \t\t\"emitted\",\n+\t\t\"comparedForEmit\",\n \t\t\"info\",\n \t\t\"isOverSizeLimit\",\n \t\t\"chunkNames\",\n@@ -1133,7 +1136,11 @@ class DefaultStatsPrinterPlugin {\n \t\t\t\t\t\t\t\t[elementsMap.chunks, elementsMap.auxiliaryChunks]\n \t\t\t\t\t\t\t\t\t.filter(Boolean)\n \t\t\t\t\t\t\t\t\t.join(\" \"),\n-\t\t\t\t\t\t\t\t[elementsMap.emitted, elementsMap.info]\n+\t\t\t\t\t\t\t\t[\n+\t\t\t\t\t\t\t\t\telementsMap.emitted,\n+\t\t\t\t\t\t\t\t\telementsMap.comparedForEmit,\n+\t\t\t\t\t\t\t\t\telementsMap.info\n+\t\t\t\t\t\t\t\t]\n \t\t\t\t\t\t\t\t\t.filter(Boolean)\n \t\t\t\t\t\t\t\t\t.join(\" \"),\n \t\t\t\t\t\t\t\telementsMap.isOverSizeLimit || \"\","
      },
      {
        "sha": "c3ef22a927946053ec5bbaab17420045fb4530ce",
        "filename": "lib/util/LazySet.js",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Futil%2FLazySet.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Futil%2FLazySet.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FLazySet.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -5,6 +5,8 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"./makeSerializable.js\");\n+\n /**\n  * @template T\n  * @param {Set<T>} targetSet set where items should be added\n@@ -174,6 +176,17 @@ class LazySet {\n \tget [Symbol.toStringTag]() {\n \t\treturn \"LazySet\";\n \t}\n+\n+\tserialize({ write }) {\n+\t\tif (this._needMerge) this._merge();\n+\t\twrite(this._set);\n+\t}\n+\n+\tstatic deserialize({ read }) {\n+\t\treturn new LazySet(read());\n+\t}\n }\n \n+makeSerializable(LazySet, \"webpack/lib/util/LazySet\");\n+\n module.exports = LazySet;"
      },
      {
        "sha": "ca616412b874187f36803980fc7ebbe4a693f5c6",
        "filename": "lib/util/fs.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Futil%2Ffs.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Futil%2Ffs.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Ffs.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -17,6 +17,8 @@ const path = require(\"path\");\n  * @typedef {Object} OutputFileSystem\n  * @property {function(string, Buffer|string, Callback): void} writeFile\n  * @property {function(string, Callback): void} mkdir\n+ * @property {function(string, StatsCallback): void} stat\n+ * @property {function(string, BufferCallback): void} readFile\n  * @property {(function(string, string): string)=} join\n  * @property {(function(string, string): string)=} relative\n  * @property {(function(string): string)=} dirname"
      },
      {
        "sha": "a677c3c306b6145f23d43f1dad6e90983e6563dc",
        "filename": "lib/util/internalSerializables.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Futil%2FinternalSerializables.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/lib%2Futil%2FinternalSerializables.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FinternalSerializables.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -129,6 +129,7 @@ module.exports = {\n \tNormalModule: () => require(\"../NormalModule\"),\n \tRawModule: () => require(\"../RawModule\"),\n \tUnsupportedFeatureWarning: () => require(\"../UnsupportedFeatureWarning\"),\n+\t\"util/LazySet\": () => require(\"../util/LazySet\"),\n \tWebpackError: () => require(\"../WebpackError\"),\n \n \t\"util/registerExternalSerializer\": () => {"
      },
      {
        "sha": "e8d0506cd120dcc846182ef569def63a626e86d9",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -1123,6 +1123,10 @@\n           \"description\": \"Number of milliseconds before chunk request expires\",\n           \"type\": \"number\"\n         },\n+        \"compareBeforeEmit\": {\n+          \"description\": \"Check if to be emitted file already exists and have the same content before writing to output filesystem\",\n+          \"type\": \"boolean\"\n+        },\n         \"crossOriginLoading\": {\n           \"description\": \"This option enables cross-origin loading of chunks.\",\n           \"enum\": [false, \"anonymous\", \"use-credentials\"]"
      },
      {
        "sha": "9c3df9488595bdc17913bba891ed8107ad3687cc",
        "filename": "test/Compiler-caching.test.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FCompiler-caching.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FCompiler-caching.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FCompiler-caching.test.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -40,6 +40,9 @@ describe(\"Compiler (caching)\", () => {\n \t\t\t\tlogs.writeFile.push(name, content);\n \t\t\t\tfiles[name] = content.toString(\"utf-8\");\n \t\t\t\tcallback();\n+\t\t\t},\n+\t\t\tstat(path, callback) {\n+\t\t\t\tcallback(new Error(\"ENOENT\"));\n \t\t\t}\n \t\t};\n \t\tc.hooks.compilation.tap("
      },
      {
        "sha": "28e848bab53443b476f6b3df980c01c4f77ab3c0",
        "filename": "test/Compiler.test.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FCompiler.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FCompiler.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FCompiler.test.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -39,6 +39,9 @@ describe(\"Compiler\", () => {\n \t\t\t\tlogs.writeFile.push(name, content);\n \t\t\t\tfiles[name] = content.toString(\"utf-8\");\n \t\t\t\tcallback();\n+\t\t\t},\n+\t\t\tstat(path, callback) {\n+\t\t\t\tcallback(new Error(\"ENOENT\"));\n \t\t\t}\n \t\t};\n \t\tc.hooks.compilation.tap("
      },
      {
        "sha": "7a3a1442a46a1348de0105c96abcbf12ce7d3d5b",
        "filename": "test/Errors.test.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FErrors.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FErrors.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FErrors.test.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -85,6 +85,9 @@ const defaults = {\n \t\t},\n \t\twriteFile(file, content, callback) {\n \t\t\tcallback();\n+\t\t},\n+\t\tstat(file, callback) {\n+\t\t\tcallback(new Error(\"ENOENT\"));\n \t\t}\n \t}\n };"
      },
      {
        "sha": "7c0a6c425200e930f1a02c85ab48ebdca0687973",
        "filename": "test/Stats.test.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FStats.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FStats.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStats.test.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -184,6 +184,7 @@ describe(\"Stats\", () => {\n \t\t\t      \"chunkNames\": Array [\n \t\t\t        \"chunkB\",\n \t\t\t      ],\n+\t\t\t      \"comparedForEmit\": false,\n \t\t\t      \"emitted\": true,\n \t\t\t      \"info\": Object {\n \t\t\t        \"size\": 111,\n@@ -198,6 +199,7 @@ describe(\"Stats\", () => {\n \t\t\t      \"chunkNames\": Array [\n \t\t\t        \"entryA\",\n \t\t\t      ],\n+\t\t\t      \"comparedForEmit\": false,\n \t\t\t      \"emitted\": true,\n \t\t\t      \"info\": Object {\n \t\t\t        \"size\": 198,\n@@ -212,6 +214,7 @@ describe(\"Stats\", () => {\n \t\t\t      \"chunkNames\": Array [\n \t\t\t        \"entryB\",\n \t\t\t      ],\n+\t\t\t      \"comparedForEmit\": false,\n \t\t\t      \"emitted\": true,\n \t\t\t      \"info\": Object {\n \t\t\t        \"size\": 2085,"
      },
      {
        "sha": "b811171d717f140de1028eff5da26787f3e92ac0",
        "filename": "test/StatsTestCases.test.js",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FStatsTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FStatsTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStatsTestCases.test.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -2,6 +2,8 @@\n \n const path = require(\"path\");\n const fs = require(\"graceful-fs\");\n+const mkdirp = require(\"mkdirp\");\n+const rimraf = require(\"rimraf\");\n const captureStdio = require(\"./helpers/captureStdio\");\n \n let webpack;\n@@ -46,6 +48,9 @@ describe(\"StatsTestCases\", () => {\n \ttests.forEach(testName => {\n \t\tit(\"should print correct stats for \" + testName, done => {\n \t\t\tjest.setTimeout(30000);\n+\t\t\tconst outputDirectory = path.join(outputBase, testName);\n+\t\t\trimraf.sync(outputDirectory);\n+\t\t\tmkdirp.sync(outputDirectory);\n \t\t\tlet options = {\n \t\t\t\tmode: \"development\",\n \t\t\t\tentry: \"./index\",\n@@ -59,8 +64,7 @@ describe(\"StatsTestCases\", () => {\n \t\t\t(Array.isArray(options) ? options : [options]).forEach(options => {\n \t\t\t\tif (!options.context) options.context = path.join(base, testName);\n \t\t\t\tif (!options.output) options.output = options.output || {};\n-\t\t\t\tif (!options.output.path)\n-\t\t\t\t\toptions.output.path = path.join(outputBase, testName);\n+\t\t\t\tif (!options.output.path) options.output.path = outputDirectory;\n \t\t\t\tif (!options.plugins) options.plugins = [];\n \t\t\t\tif (!options.optimization) options.optimization = {};\n \t\t\t\tif (options.optimization.minimize === undefined)"
      },
      {
        "sha": "3d8dd3b0d63fa490be71b300a3f07a782e743c5b",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 73,
        "deletions": 73,
        "changes": 146,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -1,61 +1,61 @@\n // Jest Snapshot v1, https://goo.gl/fbAQLP\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n-\"Hash: d89b2fa88cb132dd2f3ed89b2fa88cb132dd2f3e\n+\"Hash: 21902312560238912c7e45ec1b9983d1c74bd8c5\n Child fitting:\n-    Hash: d89b2fa88cb132dd2f3e\n+    Hash: 21902312560238912c7e\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n-                      Asset      Size\n-    35bda92cf5ea05aff412.js  1.91 KiB  [emitted] [immutable]\n-    3e4894c38178f8515f2a.js  1.91 KiB  [emitted] [immutable]\n-    9fbc06f33314445dd40e.js    13 KiB  [emitted] [immutable]\n-    dc9eb8f6a8dc6829a3ce.js  1.08 KiB  [emitted] [immutable]\n-    Entrypoint main = 35bda92cf5ea05aff412.js 3e4894c38178f8515f2a.js 9fbc06f33314445dd40e.js\n-    chunk 9fbc06f33314445dd40e.js 1.87 KiB (javascript) 6.5 KiB (runtime) [entry] [rendered]\n+                              Asset      Size\n+    fitting-07302ed1a3c05122e3f9.js    13 KiB  [emitted] [immutable]\n+    fitting-35bda92cf5ea05aff412.js  1.91 KiB  [emitted] [immutable]\n+    fitting-3e4894c38178f8515f2a.js  1.91 KiB  [emitted] [immutable]\n+    fitting-dc9eb8f6a8dc6829a3ce.js  1.08 KiB  [emitted] [immutable]\n+    Entrypoint main = fitting-35bda92cf5ea05aff412.js fitting-3e4894c38178f8515f2a.js fitting-07302ed1a3c05122e3f9.js\n+    chunk fitting-07302ed1a3c05122e3f9.js 1.87 KiB (javascript) 6.51 KiB (runtime) [entry] [rendered]\n         > ./index main\n      ./e.js 899 bytes [built]\n      ./f.js 900 bytes [built]\n      ./index.js 111 bytes [built]\n          + 7 hidden chunk modules\n-    chunk 3e4894c38178f8515f2a.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk fitting-3e4894c38178f8515f2a.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./c.js 899 bytes [built]\n      ./d.js 899 bytes [built]\n-    chunk 35bda92cf5ea05aff412.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk fitting-35bda92cf5ea05aff412.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./a.js 899 bytes [built]\n      ./b.js 899 bytes [built]\n-    chunk dc9eb8f6a8dc6829a3ce.js 916 bytes [rendered]\n+    chunk fitting-dc9eb8f6a8dc6829a3ce.js 916 bytes [rendered]\n         > ./g ./index.js 7:0-13\n      ./g.js 916 bytes [built]\n Child content-change:\n-    Hash: d89b2fa88cb132dd2f3e\n+    Hash: 45ec1b9983d1c74bd8c5\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n-                      Asset      Size\n-    35bda92cf5ea05aff412.js  1.91 KiB  [emitted] [immutable]\n-    3e4894c38178f8515f2a.js  1.91 KiB  [emitted] [immutable]\n-    9fbc06f33314445dd40e.js    13 KiB  [emitted] [immutable]\n-    dc9eb8f6a8dc6829a3ce.js  1.08 KiB  [emitted] [immutable]\n-    Entrypoint main = 35bda92cf5ea05aff412.js 3e4894c38178f8515f2a.js 9fbc06f33314445dd40e.js\n-    chunk 9fbc06f33314445dd40e.js 1.87 KiB (javascript) 6.5 KiB (runtime) [entry] [rendered]\n+                                     Asset      Size\n+    content-change-35bda92cf5ea05aff412.js  1.91 KiB  [emitted] [immutable]\n+    content-change-3e4894c38178f8515f2a.js  1.91 KiB  [emitted] [immutable]\n+    content-change-d60032b193fdb4bf4c38.js    13 KiB  [emitted] [immutable]\n+    content-change-dc9eb8f6a8dc6829a3ce.js  1.08 KiB  [emitted] [immutable]\n+    Entrypoint main = content-change-35bda92cf5ea05aff412.js content-change-3e4894c38178f8515f2a.js content-change-d60032b193fdb4bf4c38.js\n+    chunk content-change-d60032b193fdb4bf4c38.js 1.87 KiB (javascript) 6.51 KiB (runtime) [entry] [rendered]\n         > ./index main\n      ./e.js 899 bytes [built]\n      ./f.js 900 bytes [built]\n      ./index.js 111 bytes [built]\n          + 7 hidden chunk modules\n-    chunk 3e4894c38178f8515f2a.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk content-change-3e4894c38178f8515f2a.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./c.js 899 bytes [built]\n      ./d.js 899 bytes [built]\n-    chunk 35bda92cf5ea05aff412.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk content-change-35bda92cf5ea05aff412.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      ./a.js 899 bytes [built]\n      ./b.js 899 bytes [built]\n-    chunk dc9eb8f6a8dc6829a3ce.js 916 bytes [rendered]\n+    chunk content-change-dc9eb8f6a8dc6829a3ce.js 916 bytes [rendered]\n         > ./g ./index.js 7:0-13\n      ./g.js 916 bytes [built]\"\n `;\n@@ -758,9 +758,9 @@ Child undefined:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle0.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle0.js\n \n     WARNING in Terser Plugin: Dropping unused function someRemoteUnUsedFunction1 [./a.js:3,0]\n \n@@ -788,51 +788,51 @@ Child Terser:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle1.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle1.js\n Child /Terser/:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle2.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle2.js\n Child warnings => true:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle3.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle3.js\n Child [Terser]:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle4.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle4.js\n Child [/Terser/]:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle5.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle5.js\n Child [warnings => true]:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle6.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle6.js\n Child should not filter:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle7.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle7.js\n \n     WARNING in Terser Plugin: Dropping unused function someRemoteUnUsedFunction1 [./a.js:3,0]\n \n@@ -860,9 +860,9 @@ Child /should not filter/:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle8.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle8.js\n \n     WARNING in Terser Plugin: Dropping unused function someRemoteUnUsedFunction1 [./a.js:3,0]\n \n@@ -890,9 +890,9 @@ Child warnings => false:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+         Asset        Size\n+    bundle9.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle9.js\n \n     WARNING in Terser Plugin: Dropping unused function someRemoteUnUsedFunction1 [./a.js:3,0]\n \n@@ -920,9 +920,9 @@ Child [should not filter]:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+          Asset        Size\n+    bundle10.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle10.js\n \n     WARNING in Terser Plugin: Dropping unused function someRemoteUnUsedFunction1 [./a.js:3,0]\n \n@@ -950,9 +950,9 @@ Child [/should not filter/]:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+          Asset        Size\n+    bundle11.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle11.js\n \n     WARNING in Terser Plugin: Dropping unused function someRemoteUnUsedFunction1 [./a.js:3,0]\n \n@@ -980,9 +980,9 @@ Child [warnings => false]:\n     Hash: e865ee1cdbd25d5b868d\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n-        Asset        Size\n-    bundle.js  1010 bytes  [emitted]  [name: main]\n-    Entrypoint main = bundle.js\n+          Asset        Size\n+    bundle12.js  1010 bytes  [emitted]  [name: main]\n+    Entrypoint main = bundle12.js\n \n     WARNING in Terser Plugin: Dropping unused function someRemoteUnUsedFunction1 [./a.js:3,0]\n \n@@ -2427,23 +2427,23 @@ Entrypoint e2 = runtime~e2.js e2.js\"\n \n exports[`StatsTestCases should print correct stats for runtime-chunk-integration 1`] = `\n \"Child base:\n-         Asset       Size\n-        505.js   1.22 KiB  [emitted]\n-      main1.js  556 bytes  [emitted]  [name: main1]\n-    runtime.js   9.74 KiB  [emitted]  [name: runtime]\n-    Entrypoint main1 = runtime.js main1.js\n+                 Asset       Size\n+        without-505.js   1.22 KiB  [emitted]\n+      without-main1.js  556 bytes  [emitted]  [name: main1]\n+    without-runtime.js   9.75 KiB  [emitted]  [name: runtime]\n+    Entrypoint main1 = without-runtime.js without-main1.js\n     ./main1.js 66 bytes [built]\n     ./b.js 20 bytes [built]\n     ./c.js 20 bytes [built]\n     ./d.js 20 bytes [built]\n         + 6 hidden modules\n Child manifest is named entry:\n-          Asset       Size\n-         505.js   1.22 KiB  [emitted]\n-       main1.js  556 bytes  [emitted]  [name: main1]\n-    manifest.js   9.87 KiB  [emitted]  [name: manifest]\n-    Entrypoint main1 = manifest.js main1.js\n-    Entrypoint manifest = manifest.js\n+               Asset       Size\n+         with-505.js   1.22 KiB  [emitted]\n+       with-main1.js  556 bytes  [emitted]  [name: main1]\n+    with-manifest.js   9.88 KiB  [emitted]  [name: manifest]\n+    Entrypoint main1 = with-manifest.js with-main1.js\n+    Entrypoint manifest = with-manifest.js\n     ./main1.js 66 bytes [built]\n     ./f.js 20 bytes [built]\n     ./b.js 20 bytes [built]"
      },
      {
        "sha": "1b66d966f9fde4f01efcff282a6cb75a4e390fa0",
        "filename": "test/statsCases/aggressive-splitting-entry/webpack.config.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FstatsCases%2Faggressive-splitting-entry%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FstatsCases%2Faggressive-splitting-entry%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Faggressive-splitting-entry%2Fwebpack.config.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -5,8 +5,8 @@ module.exports = [\"fitting\", \"content-change\"].map(type => ({\n \tcache: true, // AggressiveSplittingPlugin rebuilds multiple times, we need to cache the assets\n \tentry: \"./index\",\n \toutput: {\n-\t\tfilename: \"[chunkhash].js\",\n-\t\tchunkFilename: \"[chunkhash].js\"\n+\t\tfilename: `${type}-[chunkhash].js`,\n+\t\tchunkFilename: `${type}-[chunkhash].js`\n \t},\n \tplugins: [\n \t\tnew webpack.optimize.AggressiveSplittingPlugin({"
      },
      {
        "sha": "38e273ce9507bb4e0c221aee732fdcf40e280425",
        "filename": "test/statsCases/filter-warnings/webpack.config.js",
        "status": "modified",
        "additions": 6,
        "deletions": 5,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FstatsCases%2Ffilter-warnings%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FstatsCases%2Ffilter-warnings%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Ffilter-warnings%2Fwebpack.config.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -2,9 +2,6 @@ const TerserPlugin = require(\"terser-webpack-plugin\");\n const baseConfig = {\n \tmode: \"production\",\n \tentry: \"./index\",\n-\toutput: {\n-\t\tfilename: \"bundle.js\"\n-\t},\n \toptimization: {\n \t\tminimize: true,\n \t\tminimizer: [\n@@ -46,8 +43,12 @@ module.exports = [\n \t[\"should not filter\"],\n \t[/should not filter/],\n \t[warnings => false]\n-].map(filter => ({\n+].map((filter, idx) => ({\n \t...baseConfig,\n \tname: Array.isArray(filter) ? `[${filter}]` : `${filter}`,\n-\tstats: { ...baseConfig.stats, warningsFilter: filter }\n+\toutput: { filename: `bundle${idx}.js` },\n+\tstats: {\n+\t\t...baseConfig.stats,\n+\t\twarningsFilter: filter\n+\t}\n }));"
      },
      {
        "sha": "407623d01dd8e522196c3d78589511a73d71d872",
        "filename": "test/statsCases/runtime-chunk-integration/webpack.config.js",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FstatsCases%2Fruntime-chunk-integration%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/5261758bed7cc1d187ce7f29413cbd2d90f80481/test%2FstatsCases%2Fruntime-chunk-integration%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fruntime-chunk-integration%2Fwebpack.config.js?ref=5261758bed7cc1d187ce7f29413cbd2d90f80481",
        "patch": "@@ -3,9 +3,6 @@ const { MinChunkSizePlugin } = require(\"../../../\").optimize;\n const baseConfig = {\n \tmode: \"production\",\n \ttarget: \"web\",\n-\toutput: {\n-\t\tfilename: \"[name].js\"\n-\t},\n \tstats: {\n \t\thash: false,\n \t\ttimings: false,\n@@ -20,6 +17,9 @@ const baseConfig = {\n \n const withoutNamedEntry = {\n \t...baseConfig,\n+\toutput: {\n+\t\tfilename: \"without-[name].js\"\n+\t},\n \tname: \"base\",\n \tentry: {\n \t\tmain1: \"./main1\"\n@@ -31,6 +31,9 @@ const withoutNamedEntry = {\n \n const withNamedEntry = {\n \t...baseConfig,\n+\toutput: {\n+\t\tfilename: \"with-[name].js\"\n+\t},\n \tname: \"manifest is named entry\",\n \tentry: {\n \t\tmain1: \"./main1\","
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9913",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9913/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9913/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9913/events",
    "html_url": "https://github.com/webpack/webpack/pull/9913",
    "id": 514440597,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzM0MDU4Mjk5",
    "number": 9913,
    "title": "Refactoring for performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-10-30T06:59:16Z",
    "updated_at": "2019-10-30T09:08:14Z",
    "closed_at": "2019-10-30T09:08:14Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9913",
      "html_url": "https://github.com/webpack/webpack/pull/9913",
      "diff_url": "https://github.com/webpack/webpack/pull/9913.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9913.patch",
      "merged_at": "2019-10-30T09:08:13Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* avoid walking dependencies and dependencies blocks, instead walk the connections in the module graph\r\n* avoid calling `getDependencyReference`, instead split method into parts and use them on demand\r\n  * enabled/disabled -> connections in ModuleGraph can be conditional\r\n    * It's also great because it's visible in the stats\r\n  * `getModule` -> `ModuleGraphConnection.module`\r\n  * `importedNames` -> `getReferencedExports()`\r\n  * `weak` -> `Dependency.weak`\r\n  * `order` -> `HarmonyImportDependency.sourceOrder`\r\n* differ between normal dependencies and cheaper presentational dependencies which are only used for templating and ignored otherwise\r\n* make RequireIncludeDeprecationWarning serialize-able\r\n* call `isOptional` only when there are errors\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nrefactor, performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9913/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "48274e271abc0f729f9905afc128cca99753c36e",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 10,
        "deletions": 7,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -239,13 +239,16 @@ class ChunkGraph {\n \t\tconst { moduleGraph } = this;\n \t\treturn Array.from(\n \t\t\tfindGraphRoots(set, module => {\n-\t\t\t\treturn moduleGraph\n-\t\t\t\t\t.getOutgoingConnections(module)\n-\t\t\t\t\t.reduce((arr, connection) => {\n-\t\t\t\t\t\tconst module = connection.module;\n-\t\t\t\t\t\tif (module) arr.push(module);\n-\t\t\t\t\t\treturn arr;\n-\t\t\t\t\t}, []);\n+\t\t\t\tconst set = new Set();\n+\t\t\t\tfor (const connection of moduleGraph.getOutgoingConnections(module)) {\n+\t\t\t\t\tif (!connection.module) continue;\n+\t\t\t\t\tif (connection.conditional) {\n+\t\t\t\t\t\tif (set.has(connection.module)) continue;\n+\t\t\t\t\t\tif (!connection.active) continue;\n+\t\t\t\t\t}\n+\t\t\t\t\tset.add(connection.module);\n+\t\t\t\t}\n+\t\t\t\treturn set;\n \t\t\t})\n \t\t).sort(compareModulesByIdentifier);\n \t}"
      },
      {
        "sha": "cc168c7fc86228dcc27ba03c2f0014a7d6d846f0",
        "filename": "lib/CommonJsStuffPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FCommonJsStuffPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FCommonJsStuffPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCommonJsStuffPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -126,7 +126,7 @@ class CommonJsStuffPlugin {\n \t\t\t\t\t\t\t\t\t\tRuntimeGlobals.module\n \t\t\t\t\t\t\t\t\t]);\n \t\t\t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\t\t\tmodule.addDependency(dep);\n+\t\t\t\t\t\t\t\t\tmodule.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\treturn toConstantDependency(\n@@ -167,7 +167,7 @@ class CommonJsStuffPlugin {\n \t\t\t\t\t\t\t\t\t: RuntimeGlobals.nodeModuleDecorator\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\tparser.state.module.addDependency(dep);\n+\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t});\n \t\t\t\t};"
      },
      {
        "sha": "86ab92b56eaacfc3c550c6f4acae560950d95793",
        "filename": "lib/CompatibilityPlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FCompatibilityPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FCompatibilityPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompatibilityPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -46,7 +46,7 @@ class CompatibilityPlugin {\n \t\t\t\t\t\t\t\tif (second.asBool() !== true) return;\n \t\t\t\t\t\t\t\tconst dep = new ConstDependency(\"require\", expr.callee.range);\n \t\t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\t\tif (parser.state.current.dependencies.length > 1) {\n+\t\t\t\t\t\t\t\tif (parser.state.current.dependencies.length > 0) {\n \t\t\t\t\t\t\t\t\tconst last =\n \t\t\t\t\t\t\t\t\t\tparser.state.current.dependencies[\n \t\t\t\t\t\t\t\t\t\t\tparser.state.current.dependencies.length - 1\n@@ -60,7 +60,7 @@ class CompatibilityPlugin {\n \t\t\t\t\t\t\t\t\t)\n \t\t\t\t\t\t\t\t\t\tparser.state.current.dependencies.pop();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t\t});\n \t\t\t\t\t});\n@@ -81,7 +81,7 @@ class CompatibilityPlugin {\n \t\t\t\t\t\t\t}__`;\n \t\t\t\t\t\t\tconst dep = new ConstDependency(newName, statement.id.range);\n \t\t\t\t\t\t\tdep.loc = statement.id.loc;\n-\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\tparser.tagVariable(\n \t\t\t\t\t\t\t\tstatement.id.name,\n \t\t\t\t\t\t\t\tnestedWebpackRequireTag,\n@@ -96,7 +96,7 @@ class CompatibilityPlugin {\n \t\t\t\t\t\t\tconst newName = `__nested_webpack_require_${pattern.range[0]}__`;\n \t\t\t\t\t\t\tconst dep = new ConstDependency(newName, pattern.range);\n \t\t\t\t\t\t\tdep.loc = pattern.loc;\n-\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\tparser.tagVariable(\n \t\t\t\t\t\t\t\tpattern.name,\n \t\t\t\t\t\t\t\tnestedWebpackRequireTag,\n@@ -110,7 +110,7 @@ class CompatibilityPlugin {\n \t\t\t\t\t\t\tconst newName = parser.currentTagData;\n \t\t\t\t\t\t\tconst dep = new ConstDependency(newName, expr.range);\n \t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t});\n \t\t\t\t};"
      },
      {
        "sha": "d12a89cfe4438e085e1aa6d1f712c67885d237d6",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 23,
        "deletions": 20,
        "changes": 43,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -73,7 +73,6 @@ const { arrayToSetDeprecation } = require(\"./util/deprecation\");\n /** @typedef {import(\"./Template\").RenderManifestEntry} RenderManifestEntry */\n /** @typedef {import(\"./Template\").RenderManifestOptions} RenderManifestOptions */\n /** @typedef {import(\"./WebpackError\")} WebpackError */\n-/** @typedef {import(\"./dependencies/DependencyReference\")} DependencyReference */\n /** @typedef {import(\"./dependencies/DllEntryDependency\")} DllEntryDependency */\n /** @typedef {import(\"./dependencies/EntryDependency\")} EntryDependency */\n /** @typedef {import(\"./stats/StatsFactory\")} StatsFactory */\n@@ -271,9 +270,9 @@ class Compilation {\n \t\t\t/** @type {SyncHook<[Dependency, string, Module]>} */\n \t\t\tsucceedEntry: new SyncHook([\"entry\", \"name\", \"module\"]),\n \n-\t\t\t/** @type {SyncWaterfallHook<[DependencyReference, Dependency]>} */\n-\t\t\tdependencyReference: new SyncWaterfallHook([\n-\t\t\t\t\"dependencyReference\",\n+\t\t\t/** @type {SyncWaterfallHook<[string[][], Dependency]>} */\n+\t\t\tdependencyReferencedExports: new SyncWaterfallHook([\n+\t\t\t\t\"referencedExports\",\n \t\t\t\t\"dependency\"\n \t\t\t]),\n \n@@ -1342,19 +1341,21 @@ class Compilation {\n \t\t\t// extract warnings and errors from modules\n \t\t\tfor (const module of modules) {\n \t\t\t\tthis.reportDependencyErrorsAndWarnings(module, [module]);\n-\t\t\t\tif (module.isOptional(this.moduleGraph)) {\n-\t\t\t\t\tfor (const error of module.errors) {\n-\t\t\t\t\t\tif (!error.module) {\n-\t\t\t\t\t\t\terror.module = module;\n+\t\t\t\tif (module.errors.length > 0) {\n+\t\t\t\t\tif (module.isOptional(this.moduleGraph)) {\n+\t\t\t\t\t\tfor (const error of module.errors) {\n+\t\t\t\t\t\t\tif (!error.module) {\n+\t\t\t\t\t\t\t\terror.module = module;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tthis.warnings.push(error);\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tthis.warnings.push(error);\n-\t\t\t\t\t}\n-\t\t\t\t} else {\n-\t\t\t\t\tfor (const error of module.errors) {\n-\t\t\t\t\t\tif (!error.module) {\n-\t\t\t\t\t\t\terror.module = module;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tfor (const error of module.errors) {\n+\t\t\t\t\t\t\tif (!error.module) {\n+\t\t\t\t\t\t\t\terror.module = module;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tthis.errors.push(error);\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tthis.errors.push(error);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tfor (const warning of module.warnings) {\n@@ -1845,12 +1846,14 @@ class Compilation {\n \n \t/**\n \t * @param {Dependency} dependency the dependency\n-\t * @returns {DependencyReference} a reference for the dependency\n+\t * @returns {string[][]} referenced exports\n \t */\n-\tgetDependencyReference(dependency) {\n-\t\tconst ref = dependency.getReference(this.moduleGraph);\n-\t\tif (!ref) return null;\n-\t\treturn this.hooks.dependencyReference.call(ref, dependency);\n+\tgetDependencyReferencedExports(dependency) {\n+\t\tconst referencedExports = dependency.getReferencedExports(this.moduleGraph);\n+\t\treturn this.hooks.dependencyReferencedExports.call(\n+\t\t\treferencedExports,\n+\t\t\tdependency\n+\t\t);\n \t}\n \n \t/**"
      },
      {
        "sha": "ce0d167d49d5d781c19b13a0a55c0790e6ae638f",
        "filename": "lib/ConstPlugin.js",
        "status": "modified",
        "additions": 7,
        "deletions": 7,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FConstPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FConstPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FConstPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -137,7 +137,7 @@ class ConstPlugin {\n \t\t\t\t\t\t\tif (statement.test.type !== \"Literal\") {\n \t\t\t\t\t\t\t\tconst dep = new ConstDependency(`${bool}`, param.range);\n \t\t\t\t\t\t\t\tdep.loc = statement.loc;\n-\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tconst branchToRemove = bool\n \t\t\t\t\t\t\t\t? statement.alternate\n@@ -193,7 +193,7 @@ class ConstPlugin {\n \t\t\t\t\t\t\t\t\tbranchToRemove.range\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tdep.loc = branchToRemove.loc;\n-\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\treturn bool;\n \t\t\t\t\t\t}\n@@ -207,7 +207,7 @@ class ConstPlugin {\n \t\t\t\t\t\t\t\tif (expression.test.type !== \"Literal\") {\n \t\t\t\t\t\t\t\t\tconst dep = new ConstDependency(` ${bool}`, param.range);\n \t\t\t\t\t\t\t\t\tdep.loc = expression.loc;\n-\t\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t// Expressions do not hoist.\n \t\t\t\t\t\t\t\t// It is safe to remove the dead branch.\n@@ -228,7 +228,7 @@ class ConstPlugin {\n \t\t\t\t\t\t\t\t\tbranchToRemove.range\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tdep.loc = branchToRemove.loc;\n-\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t\treturn bool;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n@@ -301,7 +301,7 @@ class ConstPlugin {\n \t\t\t\t\t\t\t\t\t\t//\n \t\t\t\t\t\t\t\t\t\tconst dep = new ConstDependency(` ${bool}`, param.range);\n \t\t\t\t\t\t\t\t\t\tdep.loc = expression.loc;\n-\t\t\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t\tparser.walkExpression(expression.left);\n \t\t\t\t\t\t\t\t\t}\n@@ -311,7 +311,7 @@ class ConstPlugin {\n \t\t\t\t\t\t\t\t\t\t\texpression.right.range\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\tdep.loc = expression.loc;\n-\t\t\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\treturn keepRight;\n \t\t\t\t\t\t\t\t}\n@@ -336,7 +336,7 @@ class ConstPlugin {\n \t\t\t\t\t\t\t\t\"__resourceQuery\"\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t});\n \t\t\t\t};"
      },
      {
        "sha": "d0be665792a123538ec0c798dbfbabb7e44caca4",
        "filename": "lib/DependenciesBlock.js",
        "status": "modified",
        "additions": 3,
        "deletions": 21,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependenciesBlock.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -61,30 +61,12 @@ class DependenciesBlock {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, chunkGraph) {\n-\t\tfor (const dep of this.dependencies) dep.updateHash(hash, chunkGraph);\n-\t\tfor (const block of this.blocks) block.updateHash(hash, chunkGraph);\n-\t}\n-\n-\t/**\n-\t * @param {DependencyFilterFunction} filter filter function for dependencies, gets passed all dependency ties from current instance\n-\t * @returns {boolean} returns boolean for filter\n-\t */\n-\thasDependencies(filter) {\n-\t\tif (filter) {\n-\t\t\tfor (const dep of this.dependencies) {\n-\t\t\t\tif (filter(dep)) return true;\n-\t\t\t}\n-\t\t} else {\n-\t\t\tif (this.dependencies.length > 0) {\n-\t\t\t\treturn true;\n-\t\t\t}\n+\t\tfor (const dep of this.dependencies) {\n+\t\t\tdep.updateHash(hash, chunkGraph);\n \t\t}\n-\n \t\tfor (const block of this.blocks) {\n-\t\t\tif (block.hasDependencies(filter)) return true;\n+\t\t\tblock.updateHash(hash, chunkGraph);\n \t\t}\n-\n-\t\treturn false;\n \t}\n \n \tserialize({ write }) {"
      },
      {
        "sha": "c05a7d19a1230205a71cded2cfb86ef4d295dea3",
        "filename": "lib/Dependency.js",
        "status": "modified",
        "additions": 27,
        "deletions": 10,
        "changes": 37,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -5,8 +5,6 @@\n \n \"use strict\";\n \n-const DependencyReference = require(\"./dependencies/DependencyReference\");\n-\n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./ChunkGraph\")} ChunkGraph */\n /** @typedef {import(\"./DependencyTemplates\")} DependencyTemplates */\n@@ -50,8 +48,10 @@ const DependencyReference = require(\"./dependencies/DependencyReference\");\n \n class Dependency {\n \tconstructor() {\n+\t\t// TODO check if this can be moved into ModuleDependency\n \t\t/** @type {boolean} */\n \t\tthis.weak = false;\n+\t\t// TODO check if this can be moved into ModuleDependency\n \t\t/** @type {boolean} */\n \t\tthis.optional = false;\n \t\t/** @type {DependencyLocation} */\n@@ -72,22 +72,35 @@ class Dependency {\n \t\treturn null;\n \t}\n \n-\t// TODO check if this can be moved into ModuleDependency\n \t/**\n+\t * @deprecated\n \t * Returns the referenced module and export\n \t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n+\t * @returns {never} throws error\n \t */\n \tgetReference(moduleGraph) {\n-\t\tconst module = moduleGraph.getModule(this);\n-\t\tif (!module) return null;\n-\t\treturn new DependencyReference(\n-\t\t\t() => moduleGraph.getModule(this),\n-\t\t\tDependencyReference.NS_OBJECT_IMPORTED,\n-\t\t\tthis.weak\n+\t\tthrow new Error(\n+\t\t\t\"Dependency.getReference was removed in favor of Dependency.getReferencedExports, ModuleGraph.getModule and ModuleGraph.getConnection().active\"\n \t\t);\n \t}\n \n+\t/**\n+\t * Returns list of exports referenced by this dependency\n+\t * @param {ModuleGraph} moduleGraph module graph\n+\t * @returns {string[][]} referenced exports\n+\t */\n+\tgetReferencedExports(moduleGraph) {\n+\t\treturn Dependency.NS_OBJECT_REFERENCED;\n+\t}\n+\n+\t/**\n+\t * @param {ModuleGraph} moduleGraph module graph\n+\t * @returns {function(): boolean} function to determine if the connection is active\n+\t */\n+\tgetCondition(moduleGraph) {\n+\t\treturn null;\n+\t}\n+\n \t/**\n \t * Returns the exported names\n \t * @param {ModuleGraph} moduleGraph module graph\n@@ -149,6 +162,10 @@ class Dependency {\n \t}\n }\n \n+Dependency.NO_EXPORTS_REFERENCED = [];\n+Dependency.NS_OBJECT_REFERENCED = [[]];\n+Dependency.DEFAULT_EXPORT_REFERENCED = [[\"default\"]];\n+\n Object.defineProperty(Dependency.prototype, \"module\", {\n \t/**\n \t * @deprecated"
      },
      {
        "sha": "128d665471cfe2943b87c4ed85ef69ccedaca000",
        "filename": "lib/ExportsInfoApiPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FExportsInfoApiPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FExportsInfoApiPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FExportsInfoApiPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -49,7 +49,7 @@ class ExportsInfoApiPlugin {\n \t\t\t\t\t\t.tap(\"ExportsInfoApiPlugin\", expr => {\n \t\t\t\t\t\t\tconst dep = new ConstDependency(\"true\", expr.range);\n \t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\tparser.state.module.addDependency(dep);\n+\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t});\n \t\t\t\t};"
      },
      {
        "sha": "524f666cdfd35888048ccaa6efad98a97c698c64",
        "filename": "lib/FlagDependencyUsagePlugin.js",
        "status": "modified",
        "additions": 10,
        "deletions": 7,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FFlagDependencyUsagePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FFlagDependencyUsagePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyUsagePlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -5,9 +5,9 @@\n \n \"use strict\";\n \n+const { NO_EXPORTS_REFERENCED } = require(\"./Dependency\");\n const { UsageState } = require(\"./ModuleGraph\");\n const { STAGE_DEFAULT } = require(\"./OptimizationStages\");\n-const { NO_IMPORTED_NAMES } = require(\"./dependencies/DependencyReference\");\n const Queue = require(\"./util/Queue\");\n \n /** @typedef {import(\"./Compiler\")} Compiler */\n@@ -122,12 +122,15 @@ class FlagDependencyUsagePlugin {\n \t\t\t\t\t * @returns {void}\n \t\t\t\t\t */\n \t\t\t\t\tconst processDependency = dep => {\n-\t\t\t\t\t\tconst reference = compilation.getDependencyReference(dep);\n-\t\t\t\t\t\tif (!reference) return;\n-\t\t\t\t\t\tconst referenceModule = reference.module;\n-\t\t\t\t\t\tconst importedNames = reference.importedNames;\n+\t\t\t\t\t\tconst connection = moduleGraph.getConnection(dep);\n+\t\t\t\t\t\tif (!connection || !connection.module || !connection.active) {\n+\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tconst referencedExports = compilation.getDependencyReferencedExports(\n+\t\t\t\t\t\t\tdep\n+\t\t\t\t\t\t);\n \n-\t\t\t\t\t\tprocessModule(referenceModule, importedNames);\n+\t\t\t\t\t\tprocessModule(connection.module, referencedExports);\n \t\t\t\t\t};\n \n \t\t\t\t\tfor (const module of modules) {\n@@ -143,7 +146,7 @@ class FlagDependencyUsagePlugin {\n \t\t\t\t\t\tfor (const dep of deps) {\n \t\t\t\t\t\t\tconst module = moduleGraph.getModule(dep);\n \t\t\t\t\t\t\tif (module) {\n-\t\t\t\t\t\t\t\tprocessModule(module, NO_IMPORTED_NAMES);\n+\t\t\t\t\t\t\t\tprocessModule(module, NO_EXPORTS_REFERENCED);\n \t\t\t\t\t\t\t\tqueue.enqueue(module);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}"
      },
      {
        "sha": "62e92b7dbb4045ce7a8f621293dc97a7fef2e7bc",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 19,
        "deletions": 2,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -116,6 +116,8 @@ class Module extends DependenciesBlock {\n \t\tthis.buildMeta = undefined;\n \t\t/** @type {object} */\n \t\tthis.buildInfo = undefined;\n+\t\t/** @type {Dependency[]} */\n+\t\tthis.presentationalDependencies = [];\n \t}\n \n \t// TODO remove in webpack 6\n@@ -323,6 +325,15 @@ class Module extends DependenciesBlock {\n \t\treturn (this.buildInfo && this.buildInfo.moduleArgument) || \"module\";\n \t}\n \n+\t/**\n+\t * @param {Dependency} presentationalDependency dependency being tied to module.\n+\t * This is a Dependency without edge in the module graph. It's only for presentation.\n+\t * @returns {void}\n+\t */\n+\taddPresentationalDependency(presentationalDependency) {\n+\t\tthis.presentationalDependencies.push(presentationalDependency);\n+\t}\n+\n \t/**\n \t * @param {ModuleGraph} moduleGraph the module graph\n \t * @returns {boolean} true, if the module is optional\n@@ -331,7 +342,7 @@ class Module extends DependenciesBlock {\n \t\tconst connections = moduleGraph.getIncomingConnections(this);\n \t\treturn (\n \t\t\tconnections.length > 0 &&\n-\t\t\tconnections.every(r => r.dependency && r.dependency.optional)\n+\t\t\tconnections.every(r => r.dependency && r.dependency.optional && r.active)\n \t\t);\n \t}\n \n@@ -384,6 +395,7 @@ class Module extends DependenciesBlock {\n \thasReasonForChunk(chunk, moduleGraph, chunkGraph) {\n \t\t// check for each reason if we need the chunk\n \t\tfor (const connection of moduleGraph.getIncomingConnections(this)) {\n+\t\t\tif (!connection.active) continue;\n \t\t\tconst fromModule = connection.originModule;\n \t\t\tfor (const originChunk of chunkGraph.getModuleChunksIterable(\n \t\t\t\tfromModule\n@@ -401,7 +413,7 @@ class Module extends DependenciesBlock {\n \t * @returns {boolean} true if at least one other module depends on this module\n \t */\n \thasReasons(moduleGraph) {\n-\t\treturn moduleGraph.getIncomingConnections(this).length > 0;\n+\t\treturn moduleGraph.getIncomingConnections(this).some(c => c.active);\n \t}\n \n \t/**\n@@ -482,6 +494,9 @@ class Module extends DependenciesBlock {\n \t\t\thash.update(exportInfo.used + \"\");\n \t\t\thash.update(exportInfo.usedName + \"\");\n \t\t}\n+\t\tfor (const dep of this.presentationalDependencies) {\n+\t\t\tdep.updateHash(hash, chunkGraph);\n+\t\t}\n \t\tsuper.updateHash(hash, chunkGraph);\n \t}\n \n@@ -658,6 +673,7 @@ class Module extends DependenciesBlock {\n \t\twrite(this.errors);\n \t\twrite(this.buildMeta);\n \t\twrite(this.buildInfo);\n+\t\twrite(this.presentationalDependencies);\n \t\tsuper.serialize(context);\n \t}\n \n@@ -672,6 +688,7 @@ class Module extends DependenciesBlock {\n \t\tthis.errors = read();\n \t\tthis.buildMeta = read();\n \t\tthis.buildInfo = read();\n+\t\tthis.presentationalDependencies = read();\n \t\tsuper.deserialize(context);\n \t}\n }"
      },
      {
        "sha": "33729eea838952f00c2b9ca720d12c48bf35a08b",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 19,
        "deletions": 2,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -710,13 +710,16 @@ class ModuleGraph {\n \t * @param {Module} originModule the referencing module\n \t * @param {Dependency} dependency the referencing dependency\n \t * @param {Module} module the referenced module\n-\t * @returns {void}}\n+\t * @returns {void}\n \t */\n \tsetResolvedModule(originModule, dependency, module) {\n \t\tconst connection = new ModuleGraphConnection(\n \t\t\toriginModule,\n \t\t\tdependency,\n-\t\t\tmodule\n+\t\t\tmodule,\n+\t\t\tundefined,\n+\t\t\tdependency.weak,\n+\t\t\tdependency.getCondition(this)\n \t\t);\n \t\tconst mgd = this._getModuleGraphDependency(dependency);\n \t\tmgd.connection = connection;\n@@ -742,6 +745,20 @@ class ModuleGraph {\n \t\tnewMgm.incomingConnections.add(connection);\n \t}\n \n+\t/**\n+\t * @param {Dependency} dependency the referencing dependency\n+\t * @returns {void}\n+\t */\n+\tremoveConnection(dependency) {\n+\t\tconst mgd = this._getModuleGraphDependency(dependency);\n+\t\tconst { connection } = mgd;\n+\t\tconst targetMgm = this._getModuleGraphModule(connection.module);\n+\t\ttargetMgm.incomingConnections.delete(connection);\n+\t\tconst originMgm = this._getModuleGraphModule(connection.originModule);\n+\t\toriginMgm.outgoingConnections.delete(connection);\n+\t\tmgd.connection = undefined;\n+\t}\n+\n \t/**\n \t * @param {Dependency} dependency the referencing dependency\n \t * @param {string} explanation an explanation"
      },
      {
        "sha": "15f34d85225a8fe75f6a292ca62debd19ca03883",
        "filename": "lib/ModuleGraphConnection.js",
        "status": "modified",
        "additions": 39,
        "deletions": 1,
        "changes": 40,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FModuleGraphConnection.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FModuleGraphConnection.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraphConnection.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -14,20 +14,48 @@ class ModuleGraphConnection {\n \t * @param {Dependency=} dependency the referencing dependency\n \t * @param {Module} module the referenced module\n \t * @param {string=} explanation some extra detail\n+\t * @param {boolean=} weak the reference is weak\n+\t * @param {function(): boolean=} condition condition for the connection\n \t */\n-\tconstructor(originModule, dependency, module, explanation) {\n+\tconstructor(\n+\t\toriginModule,\n+\t\tdependency,\n+\t\tmodule,\n+\t\texplanation,\n+\t\tweak = false,\n+\t\tcondition = undefined\n+\t) {\n \t\tthis.originModule = originModule;\n \t\tthis.resolvedOriginModule = originModule;\n \t\tthis.dependency = dependency;\n \t\tthis.resolvedModule = module;\n \t\tthis.module = module;\n+\t\tthis.weak = weak;\n+\t\tthis.conditional = !!condition;\n+\t\tthis._active = true;\n+\t\t/** @type {function(): boolean} */\n+\t\tthis.condition = condition;\n \t\t/** @type {Set<string>} */\n \t\tthis.explanations = new Set();\n \t\tif (explanation) {\n \t\t\tthis.explanations.add(explanation);\n \t\t}\n \t}\n \n+\t/**\n+\t * @param {function(): boolean} condition condition for the connection\n+\t * @returns {void}\n+\t */\n+\taddCondition(condition) {\n+\t\tif (this.conditional) {\n+\t\t\tconst old = this.condition;\n+\t\t\tthis.condition = () => old() && condition();\n+\t\t} else if (this._active) {\n+\t\t\tthis.conditional = true;\n+\t\t\tthis.condition = condition;\n+\t\t}\n+\t}\n+\n \t/**\n \t * @param {string} explanation the explanation to add\n \t * @returns {void}\n@@ -39,6 +67,16 @@ class ModuleGraphConnection {\n \tget explanation() {\n \t\treturn Array.from(this.explanations).join(\" \");\n \t}\n+\n+\tget active() {\n+\t\tif (!this.conditional) return this._active;\n+\t\treturn this.condition();\n+\t}\n+\n+\tset active(value) {\n+\t\tthis.conditional = false;\n+\t\tthis._active = value;\n+\t}\n }\n \n module.exports = ModuleGraphConnection;"
      },
      {
        "sha": "d2c8e0db4de66350cfb72841edc44d03ccdc2e4f",
        "filename": "lib/NodeStuffPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FNodeStuffPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FNodeStuffPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNodeStuffPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -51,7 +51,7 @@ class NodeStuffPlugin {\n \t\t\t\t\t\t\t\t\texpressionName\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t\t});\n \t\t\t\t\t};"
      },
      {
        "sha": "d08cfd8381f584df2e828afd94813d1d5a563dc4",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -559,6 +559,7 @@ class NormalModule extends Module {\n \t\tthis.errors.length = 0;\n \t\tthis.warnings.length = 0;\n \t\tthis.dependencies.length = 0;\n+\t\tthis.presentationalDependencies.length = 0;\n \t\tthis.blocks.length = 0;\n \t\tthis.buildMeta = {};\n \t\tthis.buildInfo = {"
      },
      {
        "sha": "1f3fe2863acac01f5050d8d2855e304c4b999699",
        "filename": "lib/UseStrictPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FUseStrictPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FUseStrictPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FUseStrictPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -32,7 +32,7 @@ class UseStrictPlugin {\n \t\t\t\t\t\t\t// @see https://github.com/webpack/webpack/issues/1970\n \t\t\t\t\t\t\tconst dep = new ConstDependency(\"\", firstNode.range);\n \t\t\t\t\t\t\tdep.loc = firstNode.loc;\n-\t\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\tparser.state.module.buildInfo.strict = true;\n \t\t\t\t\t\t}\n \t\t\t\t\t});"
      },
      {
        "sha": "4bc199cf0ca48ab38044f239a9696abab3482d53",
        "filename": "lib/async-modules/InferAsyncModulesPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fasync-modules%2FInferAsyncModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fasync-modules%2FInferAsyncModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fasync-modules%2FInferAsyncModulesPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -39,7 +39,7 @@ class InferAsyncModulesPlugin {\n \t\t\t\t\t\tconst connections = moduleGraph.getIncomingConnections(module);\n \t\t\t\t\t\tfor (const connection of connections) {\n \t\t\t\t\t\t\tconst dep = connection.dependency;\n-\t\t\t\t\t\t\tif (dep instanceof HarmonyImportDependency) {\n+\t\t\t\t\t\t\tif (dep instanceof HarmonyImportDependency && connection.active) {\n \t\t\t\t\t\t\t\tif (\n \t\t\t\t\t\t\t\t\tthis.errorOnMissingAwait &&\n \t\t\t\t\t\t\t\t\tdep instanceof HarmonyImportSideEffectDependency &&"
      },
      {
        "sha": "9da67baa9afd88b4bf2888778506a5bbfbf200fb",
        "filename": "lib/buildChunkGraph.js",
        "status": "modified",
        "additions": 86,
        "deletions": 94,
        "changes": 180,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -56,79 +56,69 @@ const bySetSize = (a, b) => {\n };\n \n /**\n- * Extracts simplified info from the modules and their dependencies\n+ * Extracts block to modules mapping from all modules\n  * @param {Compilation} compilation the compilation\n- * @returns {Map<DependenciesBlock, { modules: Iterable<Module>, blocks: AsyncDependenciesBlock[]}>} the mapping block to modules and inner blocks\n+ * @returns {Map<DependenciesBlock, Iterable<Module>>} the mapping block to modules\n  */\n-const extraceBlockInfoMap = compilation => {\n-\t/** @type {Map<DependenciesBlock, { modules: Iterable<Module>, blocks: AsyncDependenciesBlock[]}>} */\n-\tconst blockInfoMap = new Map();\n+const extraceBlockModulesMap = compilation => {\n+\tconst { moduleGraph } = compilation;\n \n-\t/**\n-\t * @param {Dependency} d dependency to iterate over\n-\t * @returns {void}\n-\t */\n-\tconst iteratorDependency = d => {\n-\t\t// We skip Dependencies without Reference\n-\t\tconst ref = compilation.getDependencyReference(d);\n-\t\tif (!ref) {\n-\t\t\treturn;\n-\t\t}\n-\t\t// We skip Dependencies without Module pointer\n-\t\tconst refModule = ref.module;\n-\t\tif (!refModule) {\n-\t\t\treturn;\n-\t\t}\n-\t\t// We skip weak Dependencies\n-\t\tif (ref.weak) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tblockInfoModules.add(refModule);\n-\t};\n+\t/** @type {Map<DependenciesBlock, Iterable<Module>>} */\n+\tconst blockModulesMap = new Map();\n \n-\t/**\n-\t * @param {AsyncDependenciesBlock} b blocks to prepare\n-\t * @returns {void}\n-\t */\n-\tconst iteratorBlockPrepare = b => {\n-\t\tblockInfoBlocks.push(b);\n-\t\tblockQueue.push(b);\n-\t};\n-\n-\t/** @type {DependenciesBlock} */\n-\tlet block;\n-\t/** @type {DependenciesBlock[]} */\n-\tlet blockQueue;\n-\t/** @type {Set<Module>} */\n-\tlet blockInfoModules;\n-\t/** @type {AsyncDependenciesBlock[]} */\n-\tlet blockInfoBlocks;\n+\tconst blockQueue = new Set();\n \n \tfor (const module of compilation.modules) {\n-\t\tblockQueue = [module];\n-\t\twhile (blockQueue.length > 0) {\n-\t\t\tblock = blockQueue.pop();\n-\t\t\tblockInfoModules = new Set();\n-\t\t\tblockInfoBlocks = [];\n-\n-\t\t\tif (block.dependencies) {\n-\t\t\t\tfor (const dep of block.dependencies) iteratorDependency(dep);\n+\t\t/** @type {WeakMap<Dependency, Module>} */\n+\t\tlet moduleMap;\n+\n+\t\tfor (const connection of moduleGraph.getOutgoingConnections(module)) {\n+\t\t\tconst d = connection.dependency;\n+\t\t\t// We skip connections without dependency\n+\t\t\tif (!d) continue;\n+\t\t\tconst m = connection.module;\n+\t\t\t// We skip connections without Module pointer\n+\t\t\tif (!m) continue;\n+\t\t\t// We skip weak connections\n+\t\t\tif (connection.weak) continue;\n+\t\t\t// We skip inactive connections\n+\t\t\tif (!connection.active) continue;\n+\t\t\t// Store Dependency to Module mapping in local map\n+\t\t\t// to allow to access it faster compared to\n+\t\t\t// moduleGraph.getConnection()\n+\t\t\tif (moduleMap === undefined) {\n+\t\t\t\tmoduleMap = new WeakMap();\n \t\t\t}\n+\t\t\tmoduleMap.set(connection.dependency, m);\n+\t\t}\n \n-\t\t\tif (block.blocks) {\n-\t\t\t\tfor (const b of block.blocks) iteratorBlockPrepare(b);\n+\t\tblockQueue.clear();\n+\t\tblockQueue.add(module);\n+\t\tfor (const block of blockQueue) {\n+\t\t\tlet modules;\n+\n+\t\t\tif (moduleMap !== undefined && block.dependencies) {\n+\t\t\t\tfor (const dep of block.dependencies) {\n+\t\t\t\t\tconst module = moduleMap.get(dep);\n+\t\t\t\t\tif (module !== undefined) {\n+\t\t\t\t\t\tif (modules === undefined) {\n+\t\t\t\t\t\t\tmodules = new Set();\n+\t\t\t\t\t\t\tblockModulesMap.set(block, modules);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tmodules.add(module);\n+\t\t\t\t\t}\n+\t\t\t\t}\n \t\t\t}\n \n-\t\t\tconst blockInfo = {\n-\t\t\t\tmodules: blockInfoModules,\n-\t\t\t\tblocks: blockInfoBlocks\n-\t\t\t};\n-\t\t\tblockInfoMap.set(block, blockInfo);\n+\t\t\tif (block.blocks) {\n+\t\t\t\tfor (const b of block.blocks) {\n+\t\t\t\t\tblockQueue.add(b);\n+\t\t\t\t}\n+\t\t\t}\n \t\t}\n \t}\n \n-\treturn blockInfoMap;\n+\treturn blockModulesMap;\n };\n \n /**\n@@ -153,7 +143,7 @@ const visitModules = (\n \tconst { moduleGraph, chunkGraph, namedChunkGroups } = compilation;\n \n \tlogger.time(\"visitModules: prepare\");\n-\tconst blockInfoMap = extraceBlockInfoMap(compilation);\n+\tconst blockModulesMap = extraceBlockModulesMap(compilation);\n \n \tlet nextChunkGroupIndex = 0;\n \n@@ -355,50 +345,52 @@ const visitModules = (\n \t\t\t\t// fallthrough\n \t\t\t\tcase PROCESS_BLOCK: {\n \t\t\t\t\t// get prepared block info\n-\t\t\t\t\tconst blockInfo = blockInfoMap.get(block);\n-\n-\t\t\t\t\t// Buffer items because order need to be reverse to get indicies correct\n-\t\t\t\t\tconst skipBuffer = [];\n-\t\t\t\t\tconst queueBuffer = [];\n-\t\t\t\t\t// Traverse all referenced modules\n-\t\t\t\t\tfor (const refModule of blockInfo.modules) {\n-\t\t\t\t\t\tif (chunkGraph.isModuleInChunk(refModule, chunk)) {\n-\t\t\t\t\t\t\t// skip early if already connected\n-\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tif (minAvailableModules.has(refModule)) {\n-\t\t\t\t\t\t\t// already in parent chunks, skip it for now\n-\t\t\t\t\t\t\tskipBuffer.push({\n+\t\t\t\t\tconst blockModules = blockModulesMap.get(block);\n+\n+\t\t\t\t\tif (blockModules !== undefined) {\n+\t\t\t\t\t\t// Buffer items because order need to be reverse to get indicies correct\n+\t\t\t\t\t\tconst skipBuffer = [];\n+\t\t\t\t\t\tconst queueBuffer = [];\n+\t\t\t\t\t\t// Traverse all referenced modules\n+\t\t\t\t\t\tfor (const refModule of blockModules) {\n+\t\t\t\t\t\t\tif (chunkGraph.isModuleInChunk(refModule, chunk)) {\n+\t\t\t\t\t\t\t\t// skip early if already connected\n+\t\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tif (minAvailableModules.has(refModule)) {\n+\t\t\t\t\t\t\t\t// already in parent chunks, skip it for now\n+\t\t\t\t\t\t\t\tskipBuffer.push({\n+\t\t\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n+\t\t\t\t\t\t\t\t\tblock: refModule,\n+\t\t\t\t\t\t\t\t\tmodule: refModule,\n+\t\t\t\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\t\t\t\tchunkGroup\n+\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t// enqueue the add and enter to enter in the correct order\n+\t\t\t\t\t\t\t// this is relevant with circular dependencies\n+\t\t\t\t\t\t\tqueueBuffer.push({\n \t\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n \t\t\t\t\t\t\t\tblock: refModule,\n \t\t\t\t\t\t\t\tmodule: refModule,\n \t\t\t\t\t\t\t\tchunk,\n \t\t\t\t\t\t\t\tchunkGroup\n \t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t}\n-\t\t\t\t\t\t// enqueue the add and enter to enter in the correct order\n-\t\t\t\t\t\t// this is relevant with circular dependencies\n-\t\t\t\t\t\tqueueBuffer.push({\n-\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n-\t\t\t\t\t\t\tblock: refModule,\n-\t\t\t\t\t\t\tmodule: refModule,\n-\t\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\tchunkGroup\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t\t// Add buffered items in reversed order\n-\t\t\t\t\tfor (let i = skipBuffer.length - 1; i >= 0; i--) {\n-\t\t\t\t\t\tskippedItems.push(skipBuffer[i]);\n-\t\t\t\t\t}\n-\t\t\t\t\tfor (let i = queueBuffer.length - 1; i >= 0; i--) {\n-\t\t\t\t\t\tqueue.push(queueBuffer[i]);\n+\t\t\t\t\t\t// Add buffered items in reversed order\n+\t\t\t\t\t\tfor (let i = skipBuffer.length - 1; i >= 0; i--) {\n+\t\t\t\t\t\t\tskippedItems.push(skipBuffer[i]);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tfor (let i = queueBuffer.length - 1; i >= 0; i--) {\n+\t\t\t\t\t\t\tqueue.push(queueBuffer[i]);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \n \t\t\t\t\t// Traverse all Blocks\n-\t\t\t\t\tfor (const block of blockInfo.blocks) iteratorBlock(block);\n+\t\t\t\t\tfor (const b of block.blocks) iteratorBlock(b);\n \n-\t\t\t\t\tif (blockInfo.blocks.length > 0 && module !== block) {\n+\t\t\t\t\tif (block.blocks.length > 0 && module !== block) {\n \t\t\t\t\t\tblocksWithNestedBlocks.add(block);\n \t\t\t\t\t}\n \t\t\t\t\tbreak;"
      },
      {
        "sha": "a5bdb46558aff7e28dab494c4e4f815ef73ea0ad",
        "filename": "lib/dependencies/AMDDefineDependencyParserPlugin.js",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -80,7 +80,7 @@ class AMDDefineDependencyParserPlugin {\n \t\t\t\t\tlocalModule.flagUsed();\n \t\t\t\t\tdep = new LocalModuleDependency(localModule, undefined, false);\n \t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t} else {\n \t\t\t\t\tdep = this.newRequireItemDependency(request);\n \t\t\t\t\tdep.loc = expr.loc;\n@@ -92,7 +92,7 @@ class AMDDefineDependencyParserPlugin {\n \t\t\tconst dep = this.newRequireArrayDependency(deps, param.range);\n \t\t\tdep.loc = expr.loc;\n \t\t\tdep.optional = !!parser.scope.inTry;\n-\t\t\tparser.state.current.addDependency(dep);\n+\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\treturn true;\n \t\t}\n \t}\n@@ -126,10 +126,12 @@ class AMDDefineDependencyParserPlugin {\n \t\t\t\tdep = new LocalModuleDependency(localModule, param.range, false);\n \t\t\t} else {\n \t\t\t\tdep = this.newRequireItemDependency(param.string, param.range);\n+\t\t\t\tdep.optional = !!parser.scope.inTry;\n+\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\treturn true;\n \t\t\t}\n \t\t\tdep.loc = expr.loc;\n-\t\t\tdep.optional = !!parser.scope.inTry;\n-\t\t\tparser.state.current.addDependency(dep);\n+\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\treturn true;\n \t\t}\n \t}\n@@ -311,7 +313,7 @@ class AMDDefineDependencyParserPlugin {\n \t\tif (namedModule) {\n \t\t\tdep.localModule = addLocalModule(parser.state, namedModule);\n \t\t}\n-\t\tparser.state.current.addDependency(dep);\n+\t\tparser.state.module.addPresentationalDependency(dep);\n \t\treturn true;\n \t}\n "
      },
      {
        "sha": "4d6952b429703833529ae34b2b51da6dd6b01ba5",
        "filename": "lib/dependencies/AMDPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -168,7 +168,7 @@ class AMDPlugin {\n \t\t\t\t\t\t\t[RuntimeGlobals.amdDefine]\n \t\t\t\t\t\t);\n \t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\treturn true;\n \t\t\t\t\t});\n \t\t\t\t\tparser.hooks.typeof\n@@ -188,7 +188,7 @@ class AMDPlugin {\n \t\t\t\t\t\t\t[RuntimeGlobals.amdDefine]\n \t\t\t\t\t\t);\n \t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\treturn false;\n \t\t\t\t\t});\n \t\t\t\t\tparser.hooks.typeof"
      },
      {
        "sha": "dd1ac833cbd80279abae407712eb11c74b33ba43",
        "filename": "lib/dependencies/AMDRequireArrayDependency.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDRequireArrayDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDRequireArrayDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireArrayDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -5,14 +5,15 @@\n \n \"use strict\";\n \n-const Dependency = require(\"../Dependency\");\n const DependencyTemplate = require(\"../DependencyTemplate\");\n const makeSerializable = require(\"../util/makeSerializable\");\n+const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n+/** @typedef {import(\"../Dependency\")} Dependency */\n /** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n \n-class AMDRequireArrayDependency extends Dependency {\n+class AMDRequireArrayDependency extends NullDependency {\n \tconstructor(depsArray, range) {\n \t\tsuper();\n "
      },
      {
        "sha": "5e6ccac7dcd3fca53b8bf55bedefa62fd90883c5",
        "filename": "lib/dependencies/AMDRequireDependenciesBlockParserPlugin.js",
        "status": "modified",
        "additions": 8,
        "deletions": 5,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -80,7 +80,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t\tlocalModule.flagUsed();\n \t\t\t\t\tdep = new LocalModuleDependency(localModule, undefined, false);\n \t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t} else {\n \t\t\t\t\tdep = this.newRequireItemDependency(request);\n \t\t\t\t\tdep.loc = expr.loc;\n@@ -92,7 +92,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\tconst dep = this.newRequireArrayDependency(deps, param.range);\n \t\t\tdep.loc = expr.loc;\n \t\t\tdep.optional = !!parser.scope.inTry;\n-\t\t\tparser.state.current.addDependency(dep);\n+\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\treturn true;\n \t\t}\n \t}\n@@ -128,10 +128,13 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\tdep = new LocalModuleDependency(localModule, param.range, false);\n \t\t\t} else {\n \t\t\t\tdep = this.newRequireItemDependency(param.string, param.range);\n+\t\t\t\tdep.loc = expr.loc;\n+\t\t\t\tdep.optional = !!parser.scope.inTry;\n+\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\treturn true;\n \t\t\t}\n \t\t\tdep.loc = expr.loc;\n-\t\t\tdep.optional = !!parser.scope.inTry;\n-\t\t\tparser.state.current.addDependency(dep);\n+\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\treturn true;\n \t\t}\n \t}\n@@ -217,7 +220,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t});\n \t\t\t\tif (!result) {\n \t\t\t\t\tconst dep = new UnsupportedDependency(\"unsupported\", expr.range);\n-\t\t\t\t\told.addDependency(dep);\n+\t\t\t\t\told.addPresentationalDependency(dep);\n \t\t\t\t\tif (parser.state.module) {\n \t\t\t\t\t\tparser.state.module.errors.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning("
      },
      {
        "sha": "543165d29d7452e4b876478e38f3c0f0d4634988",
        "filename": "lib/dependencies/CommonJsPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FCommonJsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FCommonJsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCommonJsPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -121,7 +121,7 @@ class CommonJsPlugin {\n \t\t\t\t\t\t// to not leak to global \"require\", we need to define a local require here.\n \t\t\t\t\t\tconst dep = new ConstDependency(\"var require;\", 0);\n \t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\treturn true;\n \t\t\t\t\t});\n \t\t\t\t\tparser.hooks.canRename\n@@ -131,7 +131,7 @@ class CommonJsPlugin {\n \t\t\t\t\t\t// To avoid \"not defined\" error, replace the value with undefined\n \t\t\t\t\t\tconst dep = new ConstDependency(\"undefined\", expr.range);\n \t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\treturn false;\n \t\t\t\t\t});\n \t\t\t\t\tparser.hooks.typeof"
      },
      {
        "sha": "cb94089b53a14bb114bbba6802c08d52fbb43f28",
        "filename": "lib/dependencies/CommonJsRequireDependencyParserPlugin.js",
        "status": "modified",
        "additions": 6,
        "deletions": 9,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FCommonJsRequireDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FCommonJsRequireDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCommonJsRequireDependencyParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -85,19 +85,16 @@ class CommonJsRequireDependencyParserPlugin {\n \t\t\tconst param = parser.evaluateExpression(expr.arguments[0]);\n \t\t\tif (param.isConditional()) {\n \t\t\t\tlet isExpression = false;\n-\t\t\t\tconst prevLength = parser.state.current.dependencies.length;\n-\t\t\t\tconst dep = new RequireHeaderDependency(expr.callee.range);\n-\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\tparser.state.current.addDependency(dep);\n \t\t\t\tfor (const p of param.options) {\n \t\t\t\t\tconst result = processItem(expr, p);\n \t\t\t\t\tif (result === undefined) {\n \t\t\t\t\t\tisExpression = true;\n \t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t\tif (isExpression) {\n-\t\t\t\t\tparser.state.current.dependencies.length = prevLength;\n-\t\t\t\t} else {\n+\t\t\t\tif (!isExpression) {\n+\t\t\t\t\tconst dep = new RequireHeaderDependency(expr.callee.range);\n+\t\t\t\t\tdep.loc = expr.loc;\n+\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\treturn true;\n \t\t\t\t}\n \t\t\t}\n@@ -108,7 +105,7 @@ class CommonJsRequireDependencyParserPlugin {\n \t\t\t\tlocalModule.flagUsed();\n \t\t\t\tconst dep = new LocalModuleDependency(localModule, expr.range, callNew);\n \t\t\t\tdep.loc = expr.loc;\n-\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\treturn true;\n \t\t\t} else {\n \t\t\t\tconst result = processItem(expr, param);\n@@ -117,7 +114,7 @@ class CommonJsRequireDependencyParserPlugin {\n \t\t\t\t} else {\n \t\t\t\t\tconst dep = new RequireHeaderDependency(expr.callee.range);\n \t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t}\n \t\t\t\treturn true;\n \t\t\t}"
      },
      {
        "sha": "c89574a7ef4be2e4cd7b2c982dbf799726d03012",
        "filename": "lib/dependencies/DependencyReference.js",
        "status": "removed",
        "additions": 0,
        "deletions": 72,
        "changes": 72,
        "blob_url": "https://github.com/webpack/webpack/blob/11fcdb6edfa83b2ab52b606ee32ce0e7bcac0da0/lib%2Fdependencies%2FDependencyReference.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11fcdb6edfa83b2ab52b606ee32ce0e7bcac0da0/lib%2Fdependencies%2FDependencyReference.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FDependencyReference.js?ref=11fcdb6edfa83b2ab52b606ee32ce0e7bcac0da0",
        "patch": "@@ -1,72 +0,0 @@\n-/*\n-\tMIT License http://www.opensource.org/licenses/mit-license.php\n-\tAuthor Florent Cailhol @ooflorent\n-*/\n-\n-\"use strict\";\n-\n-/** @typedef {import(\"../Module\")} Module */\n-/** @typedef {() => Module} ModuleCallback */\n-/** @typedef {string[]} StringArray */\n-\n-class DependencyReference {\n-\t// module must be dynamic, you must pass a function returning a module\n-\t// The point is that the `module` in Dependency could be replaced i. e. because of Scope Hoisting\n-\t/**\n-\t *\n-\t * @param {ModuleCallback} moduleCallback a callback to get the referenced module\n-\t * @param {StringArray[]} importedNames imported named from the module\n-\t * @param {boolean=} weak if this is a weak reference\n-\t * @param {number} order the order information or NaN if don't care\n-\t */\n-\tconstructor(moduleCallback, importedNames, weak = false, order = NaN) {\n-\t\tthis.moduleCallback = moduleCallback;\n-\t\t// true: full object\n-\t\t// false: only sideeffects/no export\n-\t\t// array of strings: the exports with this names\n-\t\tthis.importedNames = importedNames;\n-\t\tthis.weak = !!weak;\n-\t\tthis.order = order;\n-\t}\n-\n-\t/**\n-\t * @param {DependencyReference[]} array an array (will be modified)\n-\t * @returns {DependencyReference[]} the array again\n-\t */\n-\tstatic sort(array) {\n-\t\t/** @type {WeakMap<DependencyReference, number>} */\n-\t\tconst originalOrder = new WeakMap();\n-\t\tlet i = 0;\n-\t\tfor (const ref of array) {\n-\t\t\toriginalOrder.set(ref, i++);\n-\t\t}\n-\t\treturn array.sort((a, b) => {\n-\t\t\tconst aOrder = a.order;\n-\t\t\tconst bOrder = b.order;\n-\t\t\tif (isNaN(aOrder)) {\n-\t\t\t\tif (!isNaN(bOrder)) {\n-\t\t\t\t\treturn 1;\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tif (isNaN(bOrder)) {\n-\t\t\t\t\treturn -1;\n-\t\t\t\t}\n-\t\t\t\tif (aOrder !== bOrder) {\n-\t\t\t\t\treturn aOrder - bOrder;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tconst aOrg = originalOrder.get(a);\n-\t\t\tconst bOrg = originalOrder.get(b);\n-\t\t\treturn aOrg - bOrg;\n-\t\t});\n-\t}\n-\n-\tget module() {\n-\t\treturn this.moduleCallback();\n-\t}\n-}\n-\n-DependencyReference.NO_IMPORTED_NAMES = [];\n-DependencyReference.NS_OBJECT_IMPORTED = [[]];\n-\n-module.exports = DependencyReference;"
      },
      {
        "sha": "3d5c745fb971b7c64903441f3864a4409a0496b4",
        "filename": "lib/dependencies/HarmonyAcceptImportDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 12,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyAcceptImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyAcceptImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyAcceptImportDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -21,18 +21,6 @@ class HarmonyAcceptImportDependency extends HarmonyImportDependency {\n \tget type() {\n \t\treturn \"harmony accept\";\n \t}\n-\n-\tserialize(context) {\n-\t\tconst { write } = context;\n-\t\twrite(this.weak);\n-\t\tsuper.serialize(context);\n-\t}\n-\n-\tdeserialize(context) {\n-\t\tconst { read } = context;\n-\t\tthis.weak = read();\n-\t\tsuper.deserialize(context);\n-\t}\n }\n \n makeSerializable("
      },
      {
        "sha": "941b66420484abe794bd54b31d4004319f182ef6",
        "filename": "lib/dependencies/HarmonyDetectionParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyDetectionParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyDetectionParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyDetectionParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -47,7 +47,7 @@ module.exports = class HarmonyDetectionParserPlugin {\n \t\t\t\t\t},\n \t\t\t\t\tindex: -3\n \t\t\t\t};\n-\t\t\t\tmodule.addDependency(compatDep);\n+\t\t\t\tmodule.addPresentationalDependency(compatDep);\n \t\t\t\tparser.state.harmonyModule = true;\n \t\t\t\tparser.scope.isStrict = true;\n \t\t\t\tmodule.buildMeta.exportsType = \"namespace\";"
      },
      {
        "sha": "955b856ab3f4716b9b45ca238d7c0289eb632e80",
        "filename": "lib/dependencies/HarmonyExportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -33,7 +33,7 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\t);\n \t\t\t\tdep.loc = Object.create(statement.loc);\n \t\t\t\tdep.loc.index = -1;\n-\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\treturn true;\n \t\t\t}\n \t\t);\n@@ -45,7 +45,7 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\t\tconst clearDep = new ConstDependency(\"\", statement.range);\n \t\t\t\tclearDep.loc = Object.create(statement.loc);\n \t\t\t\tclearDep.loc.index = -1;\n-\t\t\t\tparser.state.current.addDependency(clearDep);\n+\t\t\t\tparser.state.module.addPresentationalDependency(clearDep);\n \t\t\t\tconst sideEffectDep = new HarmonyImportSideEffectDependency(\n \t\t\t\t\tsource,\n \t\t\t\t\tparser.state.lastHarmonyImportOrder"
      },
      {
        "sha": "150813ec7e9e3ee17b2932284b6ee4ff5911be96",
        "filename": "lib/dependencies/HarmonyExportImportedSpecifierDependency.js",
        "status": "modified",
        "additions": 30,
        "deletions": 49,
        "changes": 79,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -5,14 +5,14 @@\n \n \"use strict\";\n \n+const Dependency = require(\"../Dependency\");\n const InitFragment = require(\"../InitFragment\");\n const { UsageState } = require(\"../ModuleGraph\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n const Template = require(\"../Template\");\n const { intersect } = require(\"../util/SetHelpers\");\n const makeSerializable = require(\"../util/makeSerializable\");\n const propertyAccess = require(\"../util/propertyAccess\");\n-const DependencyReference = require(\"./DependencyReference\");\n const HarmonyExportInitFragment = require(\"./HarmonyExportInitFragment\");\n const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n \n@@ -55,8 +55,6 @@ class ExportMode {\n \t\tthis.ignored = null;\n \t\t/** @type {Set<string>|null} */\n \t\tthis.checked = null;\n-\t\t/** @type {null | function(): Module} */\n-\t\tthis.getModule = null;\n \t\t/** @type {string|null} */\n \t\tthis.userRequest = null;\n \t}\n@@ -177,14 +175,12 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t);\n \n \t\t\t\tmode.name = name;\n-\t\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n \n \t\t\t\treturn mode;\n \t\t\t} else if (importedModule.buildMeta.exportsType === \"named\") {\n \t\t\t\tconst mode = new ExportMode(\"reexport-named-default\");\n \n \t\t\t\tmode.name = name;\n-\t\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n \n \t\t\t\treturn mode;\n \t\t\t}\n@@ -227,8 +223,6 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t}\n \t\t\t}\n \n-\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n-\n \t\t\treturn mode;\n \t\t}\n \n@@ -254,8 +248,6 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\tconst mode = new ExportMode(\"dynamic-reexport\");\n \t\t\tmode.ignored = ignoredExports;\n \n-\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n-\n \t\t\treturn mode;\n \t\t}\n \n@@ -303,8 +295,6 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tif (merged.size === 0) {\n \t\t\tconst mode = new ExportMode(\"empty-star\");\n \n-\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n-\n \t\t\treturn mode;\n \t\t}\n \n@@ -316,39 +306,45 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \n \t\tconst mode = new ExportMode(\"normal-reexport\");\n \n-\t\tmode.getModule = () => moduleGraph.getModule(this);\n \t\tmode.map = map;\n \t\tmode.checked = checked;\n \n \t\treturn mode;\n \t}\n \n \t/**\n-\t * Returns the referenced module and export\n \t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n+\t * @returns {function(): boolean} function to determine if the connection is active\n \t */\n-\tgetReference(moduleGraph) {\n+\tgetCondition(moduleGraph) {\n+\t\treturn () => {\n+\t\t\tconst mode = this.getMode(moduleGraph);\n+\n+\t\t\treturn mode.type !== \"unused\" && mode.type !== \"empty-star\";\n+\t\t};\n+\t}\n+\n+\t/**\n+\t * Returns list of exports referenced by this dependency\n+\t * @param {ModuleGraph} moduleGraph module graph\n+\t * @returns {string[][]} referenced exports\n+\t */\n+\tgetReferencedExports(moduleGraph) {\n \t\tconst mode = this.getMode(moduleGraph, false);\n \n \t\tswitch (mode.type) {\n \t\t\tcase \"missing\":\n \t\t\tcase \"unused\":\n \t\t\tcase \"empty-star\":\n-\t\t\t\treturn null;\n+\t\t\t\treturn Dependency.NO_EXPORTS_REFERENCED;\n \n \t\t\tcase \"reexport-non-harmony-default\":\n \t\t\tcase \"reexport-named-default\":\n-\t\t\t\treturn new DependencyReference(\n-\t\t\t\t\tmode.getModule,\n-\t\t\t\t\t[[\"default\"]],\n-\t\t\t\t\tfalse,\n-\t\t\t\t\tthis.sourceOrder\n-\t\t\t\t);\n+\t\t\t\treturn Dependency.DEFAULT_EXPORT_REFERENCED;\n \n \t\t\tcase \"reexport-partial-namespace-object\": {\n \t\t\t\t/** @type {string[][]} */\n-\t\t\t\tconst importedNames = [];\n+\t\t\t\tconst referencedExports = [];\n \t\t\t\tconst processExportsInfo = (prefix, exportsInfo) => {\n \t\t\t\t\tfor (const exportInfo of exportsInfo.orderedExports) {\n \t\t\t\t\t\tif (\n@@ -361,38 +357,23 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\t\t\t\texportInfo.exportsInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t} else if (exportInfo.used !== UsageState.Unused) {\n-\t\t\t\t\t\t\timportedNames.push(prefix.concat(exportInfo.name));\n+\t\t\t\t\t\t\treferencedExports.push(prefix.concat(exportInfo.name));\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tprocessExportsInfo([], mode.partialNamespaceExportsInfo);\n-\t\t\t\treturn new DependencyReference(\n-\t\t\t\t\tmode.getModule,\n-\t\t\t\t\timportedNames,\n-\t\t\t\t\tfalse,\n-\t\t\t\t\tthis.sourceOrder\n-\t\t\t\t);\n+\t\t\t\treturn referencedExports;\n \t\t\t}\n \n \t\t\tcase \"reexport-namespace-object\":\n \t\t\tcase \"reexport-non-harmony-default-strict\":\n \t\t\tcase \"reexport-fake-namespace-object\":\n \t\t\tcase \"reexport-non-harmony-undefined\":\n \t\t\tcase \"dynamic-reexport\":\n-\t\t\t\treturn new DependencyReference(\n-\t\t\t\t\tmode.getModule,\n-\t\t\t\t\tDependencyReference.NS_OBJECT_IMPORTED,\n-\t\t\t\t\tfalse,\n-\t\t\t\t\tthis.sourceOrder\n-\t\t\t\t);\n+\t\t\t\treturn Dependency.NS_OBJECT_REFERENCED;\n \n \t\t\tcase \"normal-reexport\":\n-\t\t\t\treturn new DependencyReference(\n-\t\t\t\t\tmode.getModule,\n-\t\t\t\t\tArray.from(mode.map.values()),\n-\t\t\t\t\tfalse,\n-\t\t\t\t\tthis.sourceOrder\n-\t\t\t\t);\n+\t\t\t\treturn Array.from(mode.map.values());\n \n \t\t\tdefault:\n \t\t\t\tthrow new Error(`Unknown mode ${mode.type}`);\n@@ -443,21 +424,21 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\treturn {\n \t\t\t\t\texports: true,\n \t\t\t\t\t// TODO: consider passing `ignored` from `dynamic-reexport`\n-\t\t\t\t\tdependencies: [mode.getModule()]\n+\t\t\t\t\tdependencies: [moduleGraph.getModule(this)]\n \t\t\t\t};\n \t\t\tcase \"empty-star\":\n \t\t\t\treturn {\n \t\t\t\t\texports: [],\n-\t\t\t\t\tdependencies: [mode.getModule()]\n+\t\t\t\t\tdependencies: [moduleGraph.getModule(this)]\n \t\t\t\t};\n \t\t\tcase \"normal-reexport\":\n \t\t\t\treturn {\n \t\t\t\t\texports: Array.from(mode.map.keys()).map(name => ({\n \t\t\t\t\t\tname,\n-\t\t\t\t\t\tfrom: mode.getModule(),\n+\t\t\t\t\t\tfrom: moduleGraph.getModule(this),\n \t\t\t\t\t\texport: mode.map.get(name)\n \t\t\t\t\t})),\n-\t\t\t\t\tdependencies: [mode.getModule()]\n+\t\t\t\t\tdependencies: [moduleGraph.getModule(this)]\n \t\t\t\t};\n \t\t\tcase \"reexport-fake-namespace-object\":\n \t\t\tcase \"reexport-non-harmony-default\":\n@@ -466,19 +447,19 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\tcase \"reexport-named-default\":\n \t\t\t\treturn {\n \t\t\t\t\texports: [mode.name],\n-\t\t\t\t\tdependencies: [mode.getModule()]\n+\t\t\t\t\tdependencies: [moduleGraph.getModule(this)]\n \t\t\t\t};\n \t\t\tcase \"reexport-namespace-object\":\n \t\t\tcase \"reexport-partial-namespace-object\":\n \t\t\t\treturn {\n \t\t\t\t\texports: [\n \t\t\t\t\t\t{\n \t\t\t\t\t\t\tname: mode.name,\n-\t\t\t\t\t\t\tfrom: mode.getModule(),\n+\t\t\t\t\t\t\tfrom: moduleGraph.getModule(this),\n \t\t\t\t\t\t\texport: null\n \t\t\t\t\t\t}\n \t\t\t\t\t],\n-\t\t\t\t\tdependencies: [mode.getModule()]\n+\t\t\t\t\tdependencies: [moduleGraph.getModule(this)]\n \t\t\t\t};\n \t\t\tdefault:\n \t\t\t\tthrow new Error(`Unknown mode ${mode.type}`);"
      },
      {
        "sha": "ad62db4c4ce827c3ddce3f393dfc40d885c89cf7",
        "filename": "lib/dependencies/HarmonyImportDependency.js",
        "status": "modified",
        "additions": 9,
        "deletions": 12,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -5,11 +5,11 @@\n \n \"use strict\";\n \n+const Dependency = require(\"../Dependency\");\n const HarmonyLinkingError = require(\"../HarmonyLinkingError\");\n const InitFragment = require(\"../InitFragment\");\n const Template = require(\"../Template\");\n const AwaitDependenciesInitFragment = require(\"../async-modules/AwaitDependenciesInitFragment\");\n-const DependencyReference = require(\"./DependencyReference\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -36,18 +36,12 @@ class HarmonyImportDependency extends ModuleDependency {\n \t}\n \n \t/**\n-\t * Returns the referenced module and export\n+\t * Returns list of exports referenced by this dependency\n \t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n+\t * @returns {string[][]} referenced exports\n \t */\n-\tgetReference(moduleGraph) {\n-\t\tif (!moduleGraph.getModule(this)) return null;\n-\t\treturn new DependencyReference(\n-\t\t\t() => moduleGraph.getModule(this),\n-\t\t\tDependencyReference.NO_IMPORTED_NAMES,\n-\t\t\tthis.weak,\n-\t\t\tthis.sourceOrder\n-\t\t);\n+\tgetReferencedExports(moduleGraph) {\n+\t\treturn Dependency.NO_EXPORTS_REFERENCED;\n \t}\n \n \t/**\n@@ -206,7 +200,10 @@ HarmonyImportDependency.Template = class HarmonyImportDependencyTemplate extends\n \t\tconst dep = /** @type {HarmonyImportDependency} */ (dependency);\n \t\tconst { module, moduleGraph } = templateContext;\n \n-\t\tconst referencedModule = moduleGraph.getModule(dep);\n+\t\tconst connection = moduleGraph.getConnection(dep);\n+\t\tif (connection && !connection.active) return;\n+\n+\t\tconst referencedModule = connection && connection.module;\n \t\tconst moduleKey = referencedModule\n \t\t\t? referencedModule.identifier()\n \t\t\t: dep.request;"
      },
      {
        "sha": "532ffbf0341e03c563004d8a4dd2a5c39de8e8a4",
        "filename": "lib/dependencies/HarmonyImportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -43,7 +43,7 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\t(parser.state.lastHarmonyImportOrder || 0) + 1;\n \t\t\t\tconst clearDep = new ConstDependency(\"\", statement.range);\n \t\t\t\tclearDep.loc = statement.loc;\n-\t\t\t\tparser.state.module.addDependency(clearDep);\n+\t\t\t\tparser.state.module.addPresentationalDependency(clearDep);\n \t\t\t\tconst sideEffectDep = new HarmonyImportSideEffectDependency(\n \t\t\t\t\tsource,\n \t\t\t\t\tparser.state.lastHarmonyImportOrder"
      },
      {
        "sha": "09b0e8ece3d5ebecc314096c19f0ab4c799fe7d2",
        "filename": "lib/dependencies/HarmonyImportSideEffectDependency.js",
        "status": "modified",
        "additions": 1,
        "deletions": 32,
        "changes": 33,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -14,28 +14,12 @@ const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n /** @typedef {import(\"../InitFragment\")} InitFragment */\n /** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n /** @typedef {import(\"../util/Hash\")} Hash */\n-/** @typedef {import(\"./DependencyReference\")} DependencyReference */\n \n class HarmonyImportSideEffectDependency extends HarmonyImportDependency {\n \tconstructor(request, sourceOrder) {\n \t\tsuper(request, sourceOrder);\n \t}\n \n-\t/**\n-\t * Returns the referenced module and export\n-\t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n-\t */\n-\tgetReference(moduleGraph) {\n-\t\tconst module = moduleGraph.getModule(this);\n-\n-\t\tif (module && module.factoryMeta.sideEffectFree) {\n-\t\t\treturn null;\n-\t\t}\n-\n-\t\treturn super.getReference(moduleGraph);\n-\t}\n-\n \tget type() {\n \t\treturn \"harmony side effect evaluation\";\n \t}\n@@ -46,21 +30,6 @@ makeSerializable(\n \t\"webpack/lib/dependencies/HarmonyImportSideEffectDependency\"\n );\n \n-HarmonyImportSideEffectDependency.Template = class HarmonyImportSideEffectDependencyTemplate extends HarmonyImportDependency.Template {\n-\t/**\n-\t * @param {Dependency} dependency the dependency for which the template should be applied\n-\t * @param {ReplaceSource} source the current replace source which can be modified\n-\t * @param {DependencyTemplateContext} templateContext the context object\n-\t * @returns {void}\n-\t */\n-\tapply(dependency, source, templateContext) {\n-\t\tconst dep = /** @type {HarmonyImportSideEffectDependency} */ (dependency);\n-\t\tconst { moduleGraph } = templateContext;\n-\t\tconst module = moduleGraph.getModule(dep);\n-\t\tif (!module || !module.factoryMeta.sideEffectFree) {\n-\t\t\tsuper.apply(dependency, source, templateContext);\n-\t\t}\n-\t}\n-};\n+HarmonyImportSideEffectDependency.Template = HarmonyImportDependency.Template;\n \n module.exports = HarmonyImportSideEffectDependency;"
      },
      {
        "sha": "c6dc973775529dbaa83d56959466613d248d10ba",
        "filename": "lib/dependencies/HarmonyImportSpecifierDependency.js",
        "status": "modified",
        "additions": 15,
        "deletions": 14,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -7,7 +7,6 @@\n \n const { UsageState } = require(\"../ModuleGraph\");\n const makeSerializable = require(\"../util/makeSerializable\");\n-const DependencyReference = require(\"./DependencyReference\");\n const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -73,6 +72,14 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\tmoduleGraph.getMeta(this)[idsSymbol] = ids;\n \t}\n \n+\t/**\n+\t * @param {ModuleGraph} moduleGraph module graph\n+\t * @returns {function(): boolean} function to determine if the connection is active\n+\t */\n+\tgetCondition(moduleGraph) {\n+\t\treturn () => this.checkUsedByExports(moduleGraph);\n+\t}\n+\n \tcheckUsedByExports(moduleGraph) {\n \t\tif (this.usedByExports === false) return false;\n \t\tif (this.usedByExports !== true && this.usedByExports !== undefined) {\n@@ -89,21 +96,13 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t}\n \n \t/**\n-\t * Returns the referenced module and export\n+\t * Returns list of exports referenced by this dependency\n \t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n+\t * @returns {string[][]} referenced exports\n \t */\n-\tgetReference(moduleGraph) {\n-\t\tif (!this.checkUsedByExports(moduleGraph)) return null;\n-\t\tconst module = moduleGraph.getModule(this);\n-\t\tif (!module) return null;\n+\tgetReferencedExports(moduleGraph) {\n \t\tconst ids = this.getIds(moduleGraph);\n-\t\treturn new DependencyReference(\n-\t\t\t() => moduleGraph.getModule(this),\n-\t\t\t[this.namespaceObjectAsContext ? ids.slice(0, -1) : ids],\n-\t\t\tfalse,\n-\t\t\tthis.sourceOrder\n-\t\t);\n+\t\treturn [this.namespaceObjectAsContext ? ids.slice(0, -1) : ids];\n \t}\n \n \t/**\n@@ -224,10 +223,12 @@ HarmonyImportSpecifierDependency.Template = class HarmonyImportSpecifierDependen\n \tapply(dependency, source, templateContext) {\n \t\tconst dep = /** @type {HarmonyImportSpecifierDependency} */ (dependency);\n \t\tconst { moduleGraph } = templateContext;\n+\t\tconst connection = moduleGraph.getConnection(dep);\n \t\t// Skip rendering depending when dependency is conditional\n-\t\tif (!dep.checkUsedByExports(moduleGraph)) return null;\n+\t\tif (connection && !connection.active) return;\n \n \t\tsuper.apply(dependency, source, templateContext);\n+\n \t\tconst { runtimeTemplate, module, runtimeRequirements } = templateContext;\n \t\tconst ids = dep.getIds(moduleGraph);\n \t\tconst exportExpr = runtimeTemplate.exportFromImport({"
      },
      {
        "sha": "1ecc3f7ceed4ef71cfe2e13129b3781c21d28e57",
        "filename": "lib/dependencies/HarmonyTopLevelThisParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyTopLevelThisParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FHarmonyTopLevelThisParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyTopLevelThisParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -18,7 +18,7 @@ class HarmonyTopLevelThisParserPlugin {\n \t\t\t\tif (isHarmony) {\n \t\t\t\t\tconst dep = new ConstDependency(\"undefined\", node.range, null);\n \t\t\t\t\tdep.loc = node.loc;\n-\t\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t}\n \t\t\t});\n \t}"
      },
      {
        "sha": "151ee839e65245b6ea65023baa051523bc2453f7",
        "filename": "lib/dependencies/ImportWeakDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 6,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FImportWeakDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FImportWeakDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportWeakDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -26,19 +26,13 @@ class ImportWeakDependency extends ModuleDependency {\n \n \tserialize(context) {\n \t\tconst { write } = context;\n-\n \t\twrite(this.range);\n-\t\twrite(this.weak);\n-\n \t\tsuper.serialize(context);\n \t}\n \n \tdeserialize(context) {\n \t\tconst { read } = context;\n-\n \t\tthis.range = read();\n-\t\tthis.weak = read();\n-\n \t\tsuper.deserialize(context);\n \t}\n }"
      },
      {
        "sha": "c4f0e21f73fcd348d91d5cc36cd9f402f5409626",
        "filename": "lib/dependencies/ModuleHotAcceptDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FModuleHotAcceptDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FModuleHotAcceptDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleHotAcceptDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -23,14 +23,12 @@ class ModuleHotAcceptDependency extends ModuleDependency {\n \tserialize(context) {\n \t\tconst { write } = context;\n \t\twrite(this.range);\n-\t\twrite(this.weak);\n \t\tsuper.serialize(context);\n \t}\n \n \tdeserialize(context) {\n \t\tconst { read } = context;\n \t\tthis.range = read();\n-\t\tthis.weak = read();\n \t\tsuper.deserialize(context);\n \t}\n }"
      },
      {
        "sha": "694f2824cfb1452c44029947f10aedd852b5242a",
        "filename": "lib/dependencies/ModuleHotDeclineDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 6,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FModuleHotDeclineDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FModuleHotDeclineDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleHotDeclineDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -23,19 +23,13 @@ class ModuleHotDeclineDependency extends ModuleDependency {\n \n \tserialize(context) {\n \t\tconst { write } = context;\n-\n \t\twrite(this.range);\n-\t\twrite(this.weak);\n-\n \t\tsuper.serialize(context);\n \t}\n \n \tdeserialize(context) {\n \t\tconst { read } = context;\n-\n \t\tthis.range = read();\n-\t\tthis.weak = read();\n-\n \t\tsuper.deserialize(context);\n \t}\n }"
      },
      {
        "sha": "1f6502631c398433472461c6917c63adb2eb9443",
        "filename": "lib/dependencies/NullDependency.js",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FNullDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FNullDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FNullDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -28,12 +28,12 @@ class NullDependency extends Dependency {\n \t */\n \tupdateHash(hash, chunkGraph) {}\n \n-\tserialize(context) {\n-\t\t// do nothing\n+\tserialize({ write }) {\n+\t\twrite(this.loc);\n \t}\n \n-\tdeserialize(context) {\n-\t\t// do nothing\n+\tdeserialize({ read }) {\n+\t\tthis.loc = read();\n \t}\n }\n "
      },
      {
        "sha": "66a11a84d39c31e0dd401763f7cbd9b0b3f30f62",
        "filename": "lib/dependencies/RequireIncludeDependency.js",
        "status": "modified",
        "additions": 5,
        "deletions": 11,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FRequireIncludeDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FRequireIncludeDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireIncludeDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -5,9 +5,9 @@\n \n \"use strict\";\n \n+const Dependency = require(\"../Dependency\");\n const Template = require(\"../Template\");\n const makeSerializable = require(\"../util/makeSerializable\");\n-const DependencyReference = require(\"./DependencyReference\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -23,19 +23,13 @@ class RequireIncludeDependency extends ModuleDependency {\n \t}\n \n \t/**\n-\t * Returns the referenced module and export\n+\t * Returns list of exports referenced by this dependency\n \t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n+\t * @returns {string[][]} referenced exports\n \t */\n-\tgetReference(moduleGraph) {\n-\t\tconst module = moduleGraph.getModule(this);\n-\t\tif (!module) return null;\n+\tgetReferencedExports(moduleGraph) {\n \t\t// This doesn't use any export\n-\t\treturn new DependencyReference(\n-\t\t\t() => moduleGraph.getModule(this),\n-\t\t\tDependencyReference.NO_IMPORTED_NAMES,\n-\t\t\tfalse\n-\t\t);\n+\t\treturn Dependency.NO_EXPORTS_REFERENCED;\n \t}\n \n \tget type() {"
      },
      {
        "sha": "77f03c639cfa8d2b3b8a402aceb04c30c510b853",
        "filename": "lib/dependencies/RequireIncludeDependencyParserPlugin.js",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FRequireIncludeDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FRequireIncludeDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireIncludeDependencyParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -10,6 +10,7 @@ const {\n \tevaluateToString,\n \ttoConstantDependency\n } = require(\"../javascript/JavascriptParserHelpers\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const RequireIncludeDependency = require(\"./RequireIncludeDependency\");\n \n module.exports = class RequireIncludeDependencyParserPlugin {\n@@ -70,3 +71,9 @@ class RequireIncludeDeprecationWarning extends WebpackError {\n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n }\n+\n+makeSerializable(\n+\tRequireIncludeDeprecationWarning,\n+\t\"webpack/lib/dependencies/RequireIncludeDependencyParserPlugin\",\n+\t\"RequireIncludeDeprecationWarning\"\n+);"
      },
      {
        "sha": "5fce979ac511d933c0ee2b6090c953ce675f5e83",
        "filename": "lib/dependencies/RequireResolveDependencyParserPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FRequireResolveDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FRequireResolveDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireResolveDependencyParserPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -30,7 +30,7 @@ class RequireResolveDependencyParserPlugin {\n \t\t\t\t}\n \t\t\t\tconst dep = new RequireResolveHeaderDependency(expr.callee.range);\n \t\t\t\tdep.loc = expr.loc;\n-\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\treturn true;\n \t\t\t} else {\n \t\t\t\tconst result = processItem(expr, param, weak);\n@@ -39,7 +39,7 @@ class RequireResolveDependencyParserPlugin {\n \t\t\t\t}\n \t\t\t\tconst dep = new RequireResolveHeaderDependency(expr.callee.range);\n \t\t\t\tdep.loc = expr.loc;\n-\t\t\t\tparser.state.current.addDependency(dep);\n+\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\treturn true;\n \t\t\t}\n \t\t};"
      },
      {
        "sha": "3731fec9dc0cad964319b3ae7906ce21978c887e",
        "filename": "lib/dependencies/SystemPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FSystemPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FSystemPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FSystemPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -91,7 +91,7 @@ class SystemPlugin {\n \t\t\t\t\t\t\tRuntimeGlobals.system\n \t\t\t\t\t\t]);\n \t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\tparser.state.module.addDependency(dep);\n+\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\treturn true;\n \t\t\t\t\t});\n "
      },
      {
        "sha": "e65858e5adb8b765708eb320d307a9ad8205af42",
        "filename": "lib/dependencies/WebAssemblyExportImportedDependency.js",
        "status": "modified",
        "additions": 4,
        "deletions": 13,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FWebAssemblyExportImportedDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FWebAssemblyExportImportedDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FWebAssemblyExportImportedDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -6,7 +6,6 @@\n \"use strict\";\n \n const makeSerializable = require(\"../util/makeSerializable\");\n-const DependencyReference = require(\"./DependencyReference\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n@@ -23,20 +22,12 @@ class WebAssemblyExportImportedDependency extends ModuleDependency {\n \t}\n \n \t/**\n-\t * Returns the referenced module and export\n+\t * Returns list of exports referenced by this dependency\n \t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n+\t * @returns {string[][]} referenced exports\n \t */\n-\tgetReference(moduleGraph) {\n-\t\tconst module = moduleGraph.getModule(this);\n-\n-\t\tif (!module) return null;\n-\n-\t\treturn new DependencyReference(\n-\t\t\t() => moduleGraph.getModule(this),\n-\t\t\t[[this.name]],\n-\t\t\tfalse\n-\t\t);\n+\tgetReferencedExports(moduleGraph) {\n+\t\treturn [[this.name]];\n \t}\n \n \tget type() {"
      },
      {
        "sha": "c62f701d5495e2576beeb2cc983d2a99e005c167",
        "filename": "lib/dependencies/WebAssemblyImportDependency.js",
        "status": "modified",
        "additions": 4,
        "deletions": 13,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FWebAssemblyImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fdependencies%2FWebAssemblyImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FWebAssemblyImportDependency.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -7,7 +7,6 @@\n \n const makeSerializable = require(\"../util/makeSerializable\");\n const UnsupportedWebAssemblyFeatureError = require(\"../wasm/UnsupportedWebAssemblyFeatureError\");\n-const DependencyReference = require(\"./DependencyReference\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"@webassemblyjs/ast\").ModuleImportDescription} ModuleImportDescription */\n@@ -32,20 +31,12 @@ class WebAssemblyImportDependency extends ModuleDependency {\n \t}\n \n \t/**\n-\t * Returns the referenced module and export\n+\t * Returns list of exports referenced by this dependency\n \t * @param {ModuleGraph} moduleGraph module graph\n-\t * @returns {DependencyReference} reference\n+\t * @returns {string[][]} referenced exports\n \t */\n-\tgetReference(moduleGraph) {\n-\t\tconst module = moduleGraph.getModule(this);\n-\n-\t\tif (!module) return null;\n-\n-\t\treturn new DependencyReference(\n-\t\t\t() => moduleGraph.getModule(this),\n-\t\t\t[[this.name]],\n-\t\t\tfalse\n-\t\t);\n+\tgetReferencedExports(moduleGraph) {\n+\t\treturn [[this.name]];\n \t}\n \n \t/**"
      },
      {
        "sha": "d39493dd6ea463f052e62dd8f2c0bdb26a530caf",
        "filename": "lib/ids/OccurrenceModuleIdsPlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fids%2FOccurrenceModuleIdsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fids%2FOccurrenceModuleIdsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fids%2FOccurrenceModuleIdsPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -99,6 +99,7 @@ class OccurrenceModuleIdsPlugin {\n \t\t\t\t\t\tconst result =\n \t\t\t\t\t\t\tmoduleGraph\n \t\t\t\t\t\t\t\t.getIncomingConnections(m)\n+\t\t\t\t\t\t\t\t.filter(c => c.active)\n \t\t\t\t\t\t\t\t.reduce(countOccursInEntry, 0) +\n \t\t\t\t\t\t\tinitialChunkChunkMap.get(m) +\n \t\t\t\t\t\t\tentryCountMap.get(m);\n@@ -108,7 +109,10 @@ class OccurrenceModuleIdsPlugin {\n \n \t\t\t\tfor (const m of modules) {\n \t\t\t\t\tconst result =\n-\t\t\t\t\t\tmoduleGraph.getIncomingConnections(m).reduce(countOccurs, 0) +\n+\t\t\t\t\t\tmoduleGraph\n+\t\t\t\t\t\t\t.getIncomingConnections(m)\n+\t\t\t\t\t\t\t.filter(c => c.active)\n+\t\t\t\t\t\t\t.reduce(countOccurs, 0) +\n \t\t\t\t\t\tchunkGraph.getNumberOfModuleChunks(m) +\n \t\t\t\t\t\tentryCountMap.get(m);\n \t\t\t\t\toccursInAllChunksMap.set(m, result);"
      },
      {
        "sha": "0ff39d3a0a075c37950092a29e4864ee5b1955bf",
        "filename": "lib/index.js",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Findex.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -92,10 +92,6 @@ exportPlugins((module.exports.cache = {}), {\n \tMemoryCachePlugin: () => require(\"./cache/MemoryCachePlugin\")\n });\n \n-exportPlugins((module.exports.dependencies = {}), {\n-\tDependencyReference: () => require(\"./dependencies/DependencyReference\")\n-});\n-\n exportPlugins((module.exports.ids = {}), {\n \tChunkModuleIdRangePlugin: () => require(\"./ids/ChunkModuleIdRangePlugin\"),\n \tNaturalModuleIdsPlugin: () => require(\"./ids/NaturalModuleIdsPlugin\"),"
      },
      {
        "sha": "570d9a17c47476e1fcfd6b2be84ee548142499f3",
        "filename": "lib/javascript/JavascriptGenerator.js",
        "status": "modified",
        "additions": 40,
        "deletions": 1,
        "changes": 41,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fjavascript%2FJavascriptGenerator.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fjavascript%2FJavascriptGenerator.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptGenerator.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -85,7 +85,7 @@ class JavascriptGenerator extends Generator {\n \t\tconst source = new ReplaceSource(originalSource);\n \t\tconst initFragments = [];\n \n-\t\tthis.sourceBlock(module, module, initFragments, source, generateContext);\n+\t\tthis.sourceModule(module, initFragments, source, generateContext);\n \n \t\tif (initFragments.length > 0) {\n \t\t\t// Sort fragments by position. If 2 fragments have the same position,\n@@ -130,6 +130,45 @@ class JavascriptGenerator extends Generator {\n \t\t}\n \t}\n \n+\t/**\n+\t * @param {Module} module the module to generate\n+\t * @param {InitFragment[]} initFragments mutable list of init fragments\n+\t * @param {ReplaceSource} source the current replace source which can be modified\n+\t * @param {GenerateContext} generateContext the generateContext\n+\t * @returns {void}\n+\t */\n+\tsourceModule(module, initFragments, source, generateContext) {\n+\t\tfor (const dependency of module.dependencies) {\n+\t\t\tthis.sourceDependency(\n+\t\t\t\tmodule,\n+\t\t\t\tdependency,\n+\t\t\t\tinitFragments,\n+\t\t\t\tsource,\n+\t\t\t\tgenerateContext\n+\t\t\t);\n+\t\t}\n+\n+\t\tfor (const dependency of module.presentationalDependencies) {\n+\t\t\tthis.sourceDependency(\n+\t\t\t\tmodule,\n+\t\t\t\tdependency,\n+\t\t\t\tinitFragments,\n+\t\t\t\tsource,\n+\t\t\t\tgenerateContext\n+\t\t\t);\n+\t\t}\n+\n+\t\tfor (const childBlock of module.blocks) {\n+\t\t\tthis.sourceBlock(\n+\t\t\t\tmodule,\n+\t\t\t\tchildBlock,\n+\t\t\t\tinitFragments,\n+\t\t\t\tsource,\n+\t\t\t\tgenerateContext\n+\t\t\t);\n+\t\t}\n+\t}\n+\n \t/**\n \t * @param {Module} module the module to generate\n \t * @param {DependenciesBlock} block the dependencies block which will be processed"
      },
      {
        "sha": "b880476afc73bcccdbed13f9f24761169091259f",
        "filename": "lib/javascript/JavascriptModulesPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fjavascript%2FJavascriptModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptModulesPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -731,7 +731,7 @@ class JavascriptModulesPlugin {\n \t\t\t\t\t\tresult.allowInlineStartup &&\n \t\t\t\t\t\tmoduleGraph\n \t\t\t\t\t\t\t.getIncomingConnections(entryModule)\n-\t\t\t\t\t\t\t.some(c => c.originModule)\n+\t\t\t\t\t\t\t.some(c => c.originModule && c.active)\n \t\t\t\t\t) {\n \t\t\t\t\t\tbuf2.push(\n \t\t\t\t\t\t\t\"// This entry module is referenced by other modules so it can't be inlined\""
      },
      {
        "sha": "08dc43c659d7a786f5565039a56878765a2133b9",
        "filename": "lib/javascript/JavascriptParserHelpers.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fjavascript%2FJavascriptParserHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fjavascript%2FJavascriptParserHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fjavascript%2FJavascriptParserHelpers.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -13,7 +13,7 @@ exports.toConstantDependency = (parser, value, runtimeRequirements) => {\n \treturn function constDependency(expr) {\n \t\tconst dep = new ConstDependency(value, expr.range, runtimeRequirements);\n \t\tdep.loc = expr.loc;\n-\t\tparser.state.current.addDependency(dep);\n+\t\tparser.state.module.addPresentationalDependency(dep);\n \t\treturn true;\n \t};\n };\n@@ -50,7 +50,7 @@ exports.expressionIsUnsupported = (parser, message) => {\n \treturn function unsupportedExpression(expr) {\n \t\tconst dep = new ConstDependency(\"(void 0)\", expr.range, null);\n \t\tdep.loc = expr.loc;\n-\t\tparser.state.current.addDependency(dep);\n+\t\tparser.state.module.addPresentationalDependency(dep);\n \t\tif (!parser.state.module) return;\n \t\tparser.state.module.warnings.push(\n \t\t\tnew UnsupportedFeatureWarning(message, expr.loc)"
      },
      {
        "sha": "bdbdd6daef0455b8b5d21900c1e889db751fa3d3",
        "filename": "lib/node/NodeSourcePlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fnode%2FNodeSourcePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fnode%2FNodeSourcePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fnode%2FNodeSourcePlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -51,7 +51,7 @@ module.exports = class NodeSourcePlugin {\n \t\t\t\t\t\t\t\t\t[RuntimeGlobals.global]\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tdep.loc = expr.loc;\n-\t\t\t\t\t\t\t\tparser.state.module.addDependency(dep);\n+\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n \t\t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t};"
      },
      {
        "sha": "0d47227bd7e85ad79315a106751cf237051e2ddc",
        "filename": "lib/optimize/ConcatenatedModule.js",
        "status": "modified",
        "additions": 47,
        "deletions": 8,
        "changes": 55,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FConcatenatedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FConcatenatedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FConcatenatedModule.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -16,7 +16,6 @@ const Module = require(\"../Module\");\n const { UsageState } = require(\"../ModuleGraph\");\n const RuntimeGlobals = require(\"../RuntimeGlobals\");\n const Template = require(\"../Template\");\n-const DependencyReference = require(\"../dependencies/DependencyReference\");\n const HarmonyCompatibilityDependency = require(\"../dependencies/HarmonyCompatibilityDependency\");\n const HarmonyExportExpressionDependency = require(\"../dependencies/HarmonyExportExpressionDependency\");\n const HarmonyExportImportedSpecifierDependency = require(\"../dependencies/HarmonyExportImportedSpecifierDependency\");\n@@ -27,6 +26,7 @@ const HarmonyImportSideEffectDependency = require(\"../dependencies/HarmonyImport\n const HarmonyImportSpecifierDependency = require(\"../dependencies/HarmonyImportSpecifierDependency\");\n const JavascriptParser = require(\"../javascript/JavascriptParser\");\n const LazySet = require(\"../util/LazySet\");\n+const { concatComparators, keepOriginalOrder } = require(\"../util/comparators\");\n const createHash = require(\"../util/createHash\");\n const contextify = require(\"../util/identifier\").contextify;\n const propertyAccess = require(\"../util/propertyAccess\");\n@@ -120,6 +120,24 @@ const RESERVED_NAMES = [\n \t.join(\",\")\n \t.split(\",\");\n \n+const bySourceOrder = (a, b) => {\n+\tconst aOrder = a.sourceOrder;\n+\tconst bOrder = b.sourceOrder;\n+\tif (isNaN(aOrder)) {\n+\t\tif (!isNaN(bOrder)) {\n+\t\t\treturn 1;\n+\t\t}\n+\t} else {\n+\t\tif (isNaN(bOrder)) {\n+\t\t\treturn -1;\n+\t\t}\n+\t\tif (aOrder !== bOrder) {\n+\t\t\treturn aOrder < bOrder ? -1 : 1;\n+\t\t}\n+\t}\n+\treturn 0;\n+};\n+\n const arrayEquals = (a, b) => {\n \tif (a.length !== b.length) return false;\n \tfor (let i = 0; i < a.length; i++) {\n@@ -559,6 +577,7 @@ class ConcatenatedModule extends Module {\n \n \t\t// Graph\n \t\tthis.dependencies = [];\n+\t\tthis.presentationalDependencies = [];\n \n \t\tthis.warnings = [];\n \t\tthis.errors = [];\n@@ -579,6 +598,13 @@ class ConcatenatedModule extends Module {\n \t\t\t\t)) {\n \t\t\t\t\tthis.dependencies.push(d);\n \t\t\t\t}\n+\t\t\t\tfor (const d of m.presentationalDependencies.filter(\n+\t\t\t\t\tdep =>\n+\t\t\t\t\t\t!(dep instanceof HarmonyImportDependency) ||\n+\t\t\t\t\t\t!modules.has(compilation.moduleGraph.getModule(dep))\n+\t\t\t\t)) {\n+\t\t\t\t\tthis.presentationalDependencies.push(d);\n+\t\t\t\t}\n \t\t\t\t// populate file dependencies\n \t\t\t\tif (m.buildInfo.fileDependencies) {\n \t\t\t\t\tthis.buildInfo.fileDependencies.addAll(m.buildInfo.fileDependencies);\n@@ -706,6 +732,8 @@ class ConcatenatedModule extends Module {\n \t * @returns {ConcatenationEntry[]} concatenation list\n \t */\n \tstatic _createConcatenationList(rootModule, modulesSet, compilation) {\n+\t\tconst { moduleGraph } = compilation;\n+\n \t\tconst list = [];\n \t\tconst set = new Set();\n \n@@ -714,13 +742,24 @@ class ConcatenatedModule extends Module {\n \t\t * @returns {(function(): Module)[]} imported modules in order\n \t\t */\n \t\tconst getConcatenatedImports = module => {\n-\t\t\tconst references = module.dependencies\n-\t\t\t\t.filter(dep => dep instanceof HarmonyImportDependency)\n-\t\t\t\t.map(dep => compilation.getDependencyReference(dep))\n-\t\t\t\t.filter(ref => ref !== null);\n-\t\t\tDependencyReference.sort(references);\n-\t\t\treturn references.map(ref => {\n-\t\t\t\treturn () => ref.module;\n+\t\t\tconst references = moduleGraph\n+\t\t\t\t.getOutgoingConnections(module)\n+\t\t\t\t.filter(connection => {\n+\t\t\t\t\tif (!(connection.dependency instanceof HarmonyImportDependency))\n+\t\t\t\t\t\treturn false;\n+\t\t\t\t\treturn connection && connection.module && connection.active;\n+\t\t\t\t})\n+\t\t\t\t.map(connection => ({\n+\t\t\t\t\tconnection,\n+\t\t\t\t\tsourceOrder:\n+\t\t\t\t\t\t/** @type {HarmonyImportDependency} */ (connection.dependency)\n+\t\t\t\t\t\t\t.sourceOrder\n+\t\t\t\t}));\n+\t\t\treferences.sort(\n+\t\t\t\tconcatComparators(bySourceOrder, keepOriginalOrder(references))\n+\t\t\t);\n+\t\t\treturn references.map(({ connection }) => {\n+\t\t\t\treturn () => connection.module;\n \t\t\t});\n \t\t};\n "
      },
      {
        "sha": "820da459df31409c23fc6965ebc77f2623b8853b",
        "filename": "lib/optimize/InnerGraphPlugin.js",
        "status": "modified",
        "additions": 7,
        "deletions": 2,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FInnerGraphPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FInnerGraphPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FInnerGraphPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -298,10 +298,15 @@ class InnerGraphPlugin {\n \t\t\t\t};\n \t\t\t\tnormalModuleFactory.hooks.parser\n \t\t\t\t\t.for(\"javascript/auto\")\n-\t\t\t\t\t.tap(\"HarmonyModulesPlugin\", handler);\n+\t\t\t\t\t.tap(\"InnerGraphPlugin\", handler);\n \t\t\t\tnormalModuleFactory.hooks.parser\n \t\t\t\t\t.for(\"javascript/esm\")\n-\t\t\t\t\t.tap(\"HarmonyModulesPlugin\", handler);\n+\t\t\t\t\t.tap(\"InnerGraphPlugin\", handler);\n+\n+\t\t\t\tcompilation.hooks.optimizeDependencies.tap(\n+\t\t\t\t\t\"InnerGraphPlugin\",\n+\t\t\t\t\tmodules => {}\n+\t\t\t\t);\n \t\t\t}\n \t\t);\n \t}"
      },
      {
        "sha": "a273e0ed4c132d84bcd3486fd4becf6e93b324a3",
        "filename": "lib/optimize/ModuleConcatenationPlugin.js",
        "status": "modified",
        "additions": 22,
        "deletions": 32,
        "changes": 54,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FModuleConcatenationPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -113,7 +113,7 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t\tif (\n \t\t\t\t\t\t\t\t!module.buildMeta ||\n \t\t\t\t\t\t\t\tmodule.buildMeta.exportsType !== \"namespace\" ||\n-\t\t\t\t\t\t\t\t!module.dependencies.some(\n+\t\t\t\t\t\t\t\t!module.presentationalDependencies.some(\n \t\t\t\t\t\t\t\t\td => d instanceof HarmonyCompatibilityDependency\n \t\t\t\t\t\t\t\t)\n \t\t\t\t\t\t\t) {\n@@ -175,12 +175,7 @@ class ModuleConcatenationPlugin {\n \n \t\t\t\t\t\t\tconst incomingConnections = moduleGraph\n \t\t\t\t\t\t\t\t.getIncomingConnections(module)\n-\t\t\t\t\t\t\t\t.filter(connection => {\n-\t\t\t\t\t\t\t\t\treturn (\n-\t\t\t\t\t\t\t\t\t\t!connection.originModule ||\n-\t\t\t\t\t\t\t\t\t\tconnection.originModule.isModuleUsed(moduleGraph)\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t.filter(connection => connection.active);\n \n \t\t\t\t\t\t\t// Module must only be used by Harmony Imports\n \t\t\t\t\t\t\tconst nonHarmonyConnections = incomingConnections.filter(\n@@ -381,30 +376,25 @@ class ModuleConcatenationPlugin {\n \t */\n \t_getImports(compilation, module) {\n \t\tconst moduleGraph = compilation.moduleGraph;\n-\t\treturn new Set(\n-\t\t\tmodule.dependencies\n-\n-\t\t\t\t// Get reference info only for harmony Dependencies\n-\t\t\t\t.map(dep => {\n-\t\t\t\t\tif (!(dep instanceof HarmonyImportDependency)) return null;\n-\t\t\t\t\tif (!compilation) return dep.getReference(moduleGraph);\n-\t\t\t\t\treturn compilation.getDependencyReference(dep);\n-\t\t\t\t})\n-\n-\t\t\t\t// Reference is valid and has a module\n-\t\t\t\t// Dependencies are simple enough to concat them\n-\t\t\t\t.filter(\n-\t\t\t\t\tref =>\n-\t\t\t\t\t\tref &&\n-\t\t\t\t\t\tref.module &&\n-\t\t\t\t\t\t((Array.isArray(ref.importedNames) &&\n-\t\t\t\t\t\t\tref.importedNames.every(i => i.length > 0)) ||\n-\t\t\t\t\t\t\tArray.isArray(moduleGraph.getProvidedExports(ref.module)))\n-\t\t\t\t)\n-\n-\t\t\t\t// Take the imported module\n-\t\t\t\t.map(ref => ref.module)\n-\t\t);\n+\t\tconst set = new Set();\n+\t\tfor (const dep of module.dependencies) {\n+\t\t\t// Get reference info only for harmony Dependencies\n+\t\t\tif (!(dep instanceof HarmonyImportDependency)) continue;\n+\n+\t\t\tconst connection = moduleGraph.getConnection(dep);\n+\t\t\t// Reference is valid and has a module\n+\t\t\tif (!connection || !connection.module || !connection.active) continue;\n+\n+\t\t\tconst importedNames = compilation.getDependencyReferencedExports(dep);\n+\n+\t\t\tif (\n+\t\t\t\timportedNames.every(i => i.length > 0) ||\n+\t\t\t\tArray.isArray(moduleGraph.getProvidedExports(module))\n+\t\t\t) {\n+\t\t\t\tset.add(connection.module);\n+\t\t\t}\n+\t\t}\n+\t\treturn set;\n \t}\n \n \t/**\n@@ -443,7 +433,7 @@ class ModuleConcatenationPlugin {\n \t\t// Every module which depends on the added module must be in the configuration too.\n \t\tfor (const connection of moduleGraph.getIncomingConnections(module)) {\n \t\t\t// Modules that are not used can be ignored\n-\t\t\tif (!connection.originModule.isModuleUsed(moduleGraph)) continue;\n+\t\t\tif (!connection.active) continue;\n \n \t\t\tconst problem = this._tryToAdd(\n \t\t\t\tcompilation,"
      },
      {
        "sha": "43e94a29fa88ab4422deffdf8767a20d735f4176",
        "filename": "lib/optimize/SideEffectsFlagPlugin.js",
        "status": "modified",
        "additions": 12,
        "deletions": 4,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSideEffectsFlagPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -8,6 +8,7 @@\n const glob2regexp = require(\"glob-to-regexp\");\n const { STAGE_DEFAULT } = require(\"../OptimizationStages\");\n const HarmonyExportImportedSpecifierDependency = require(\"../dependencies/HarmonyExportImportedSpecifierDependency\");\n+const HarmonyImportSideEffectDependency = require(\"../dependencies/HarmonyImportSideEffectDependency\");\n const HarmonyImportSpecifierDependency = require(\"../dependencies/HarmonyImportSpecifierDependency\");\n \n /** @typedef {import(\"../Compiler\")} Compiler */\n@@ -105,15 +106,24 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\t\t\t\t\t\t\treexportMaps.set(module, (map = new Map()));\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\tfor (const [key, ids] of mode.map) {\n+\t\t\t\t\t\t\t\t\t\t\t// TODO Support reexporting namespace object\n \t\t\t\t\t\t\t\t\t\t\tif (ids.length > 0 && !mode.checked.has(key)) {\n \t\t\t\t\t\t\t\t\t\t\t\tmap.set(key, {\n-\t\t\t\t\t\t\t\t\t\t\t\t\tmodule: mode.getModule(),\n+\t\t\t\t\t\t\t\t\t\t\t\t\tmodule: moduleGraph.getModule(dep),\n \t\t\t\t\t\t\t\t\t\t\t\t\texportName: ids[0]\n \t\t\t\t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} else if (dep instanceof HarmonyImportSideEffectDependency) {\n+\t\t\t\t\t\t\t\tconst connection = moduleGraph.getConnection(dep);\n+\t\t\t\t\t\t\t\tif (connection) {\n+\t\t\t\t\t\t\t\t\tconst refModule = connection.resolvedModule;\n+\t\t\t\t\t\t\t\t\tif (refModule && refModule.factoryMeta.sideEffectFree) {\n+\t\t\t\t\t\t\t\t\t\tconnection.active = false;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n@@ -135,9 +145,7 @@ class SideEffectsFlagPlugin {\n \t\t\t\t\t}\n \n \t\t\t\t\t// Update imports along the reexports from sideEffectFree modules\n-\t\t\t\t\tfor (const pair of reexportMaps) {\n-\t\t\t\t\t\tconst module = pair[0];\n-\t\t\t\t\t\tconst map = pair[1];\n+\t\t\t\t\tfor (const [module, map] of reexportMaps) {\n \t\t\t\t\t\tfor (const connection of moduleGraph.getIncomingConnections(\n \t\t\t\t\t\t\tmodule\n \t\t\t\t\t\t)) {"
      },
      {
        "sha": "9fdaf7e8813c78f0004d1d52815f4d3ab5b2fb00",
        "filename": "lib/stats/DefaultStatsFactoryPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsFactoryPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -739,6 +739,7 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t\t\t? reason.resolvedOriginModule.readableIdentifier(requestShortener)\n \t\t\t\t\t: null,\n \t\t\t\ttype: reason.dependency ? reason.dependency.type : null,\n+\t\t\t\tactive: reason.active,\n \t\t\t\texplanation: reason.explanation,\n \t\t\t\tuserRequest:\n \t\t\t\t\tdepAsAny && \"userRequest\" in depAsAny ? depAsAny.userRequest : null"
      },
      {
        "sha": "339837278a144e7265f161e736b9dac02dff0887",
        "filename": "lib/stats/DefaultStatsPrinterPlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsPrinterPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -273,6 +273,8 @@ const SIMPLE_PRINTERS = {\n \t\"moduleReason.module\": (module, { magenta }) => magenta(module),\n \t\"moduleReason.loc\": loc => loc,\n \t\"moduleReason.explanation\": (explanation, { cyan }) => cyan(explanation),\n+\t\"moduleReason.active\": (active, { formatFlag }) =>\n+\t\tactive ? undefined : formatFlag(\"inactive\"),\n \t\"moduleReason.resolvedModule\": (module, { magenta }) => magenta(module),\n \n \t\"module.profile.total\": (value, { formatTime }) => formatTime(value),\n@@ -594,6 +596,7 @@ const PREFERED_ORDERS = {\n \t\t\"modules\"\n \t],\n \tmoduleReason: [\n+\t\t\"active\",\n \t\t\"type\",\n \t\t\"userRequest\",\n \t\t\"moduleId\","
      },
      {
        "sha": "9e95443777c07cee65cba5c7ea912187fe1ca962",
        "filename": "lib/util/internalSerializables.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Futil%2FinternalSerializables.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Futil%2FinternalSerializables.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FinternalSerializables.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -101,6 +101,8 @@ module.exports = {\n \t\trequire(\"../dependencies/RequireHeaderDependency\"),\n \t\"dependencies/RequireIncludeDependency\": () =>\n \t\trequire(\"../dependencies/RequireIncludeDependency\"),\n+\t\"dependencies/RequireIncludeDependencyParserPlugin\": () =>\n+\t\trequire(\"../dependencies/RequireIncludeDependencyParserPlugin\"),\n \t\"dependencies/RequireResolveContextDependency\": () =>\n \t\trequire(\"../dependencies/RequireResolveContextDependency\"),\n \t\"dependencies/RequireResolveDependency\": () =>"
      },
      {
        "sha": "43a3523a2c8bcbbfceaa2a0a8b857afaeb8897a5",
        "filename": "lib/wasm/WasmFinalizeExportsPlugin.js",
        "status": "modified",
        "additions": 25,
        "deletions": 30,
        "changes": 55,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fwasm%2FWasmFinalizeExportsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/lib%2Fwasm%2FWasmFinalizeExportsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fwasm%2FWasmFinalizeExportsPlugin.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -33,42 +33,37 @@ class WasmFinalizeExportsPlugin {\n \t\t\t\t\t\t\tfor (const connection of compilation.moduleGraph.getIncomingConnections(\n \t\t\t\t\t\t\t\tmodule\n \t\t\t\t\t\t\t)) {\n-\t\t\t\t\t\t\t\t// 2. is referenced by a non-WebAssembly module\n+\t\t\t\t\t\t\t\t// 2. is active and referenced by a non-WebAssembly module\n \t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\tconnection.active &&\n \t\t\t\t\t\t\t\t\tconnection.originModule.type.startsWith(\"webassembly\") ===\n-\t\t\t\t\t\t\t\t\tfalse\n+\t\t\t\t\t\t\t\t\t\tfalse\n \t\t\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\t\t\tconst ref = compilation.getDependencyReference(\n+\t\t\t\t\t\t\t\t\tconst referencedExports = compilation.getDependencyReferencedExports(\n \t\t\t\t\t\t\t\t\t\tconnection.dependency\n \t\t\t\t\t\t\t\t\t);\n \n-\t\t\t\t\t\t\t\t\tif (!ref) continue;\n-\n-\t\t\t\t\t\t\t\t\tconst importedNames = ref.importedNames;\n-\n-\t\t\t\t\t\t\t\t\tif (Array.isArray(importedNames)) {\n-\t\t\t\t\t\t\t\t\t\timportedNames.forEach(names => {\n-\t\t\t\t\t\t\t\t\t\t\tif (names.length === 0) return;\n-\t\t\t\t\t\t\t\t\t\t\tconst name = names[0];\n-\t\t\t\t\t\t\t\t\t\t\t// 3. and uses a func with an incompatible JS signature\n-\t\t\t\t\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n-\t\t\t\t\t\t\t\t\t\t\t\t\tjsIncompatibleExports,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tname\n-\t\t\t\t\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\t\t\t\t\t\t// 4. error\n-\t\t\t\t\t\t\t\t\t\t\t\t/** @type {TODO} */\n-\t\t\t\t\t\t\t\t\t\t\t\tconst error = new UnsupportedWebAssemblyFeatureError(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t`Export \"${name}\" with ${jsIncompatibleExports[name]} can only be used for direct wasm to wasm dependencies\\n` +\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t`It's used from ${connection.originModule.readableIdentifier(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcompilation.requestShortener\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t)} at ${formatLocation(connection.dependency.loc)}.`\n-\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\terror.module = module;\n-\t\t\t\t\t\t\t\t\t\t\t\tcompilation.errors.push(error);\n-\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\tfor (const names of referencedExports) {\n+\t\t\t\t\t\t\t\t\t\tif (names.length === 0) continue;\n+\t\t\t\t\t\t\t\t\t\tconst name = names[0];\n+\t\t\t\t\t\t\t\t\t\t// 3. and uses a func with an incompatible JS signature\n+\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n+\t\t\t\t\t\t\t\t\t\t\t\tjsIncompatibleExports,\n+\t\t\t\t\t\t\t\t\t\t\t\tname\n+\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\t\t\t\t// 4. error\n+\t\t\t\t\t\t\t\t\t\t\t/** @type {TODO} */\n+\t\t\t\t\t\t\t\t\t\t\tconst error = new UnsupportedWebAssemblyFeatureError(\n+\t\t\t\t\t\t\t\t\t\t\t\t`Export \"${name}\" with ${jsIncompatibleExports[name]} can only be used for direct wasm to wasm dependencies\\n` +\n+\t\t\t\t\t\t\t\t\t\t\t\t\t`It's used from ${connection.originModule.readableIdentifier(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tcompilation.requestShortener\n+\t\t\t\t\t\t\t\t\t\t\t\t\t)} at ${formatLocation(connection.dependency.loc)}.`\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t\terror.module = module;\n+\t\t\t\t\t\t\t\t\t\t\tcompilation.errors.push(error);\n+\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}"
      },
      {
        "sha": "3e95e99aace1d92a4448c6eccc7d0d9fff71b4e3",
        "filename": "test/NormalModule.unittest.js",
        "status": "modified",
        "additions": 0,
        "deletions": 11,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FNormalModule.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FNormalModule.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FNormalModule.unittest.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -1,7 +1,6 @@\n \"use strict\";\n \n const NormalModule = require(\"../lib/NormalModule\");\n-const NullDependency = require(\"../lib/dependencies/NullDependency\");\n const SourceMapSource = require(\"webpack-sources\").SourceMapSource;\n const OriginalSource = require(\"webpack-sources\").OriginalSource;\n const RawSource = require(\"webpack-sources\").RawSource;\n@@ -180,16 +179,6 @@ describe(\"NormalModule\", () => {\n \t\t});\n \t});\n \n-\tdescribe(\"#hasDependencies\", () => {\n-\t\tit(\"returns true if has dependencies\", () => {\n-\t\t\tnormalModule.addDependency(new NullDependency());\n-\t\t\texpect(normalModule.hasDependencies()).toBe(true);\n-\t\t});\n-\t\tit(\"returns false if has dependencies\", () => {\n-\t\t\texpect(normalModule.hasDependencies()).toBe(false);\n-\t\t});\n-\t});\n-\n \tdescribe(\"#applyNoParseRule\", () => {\n \t\tlet rule;\n \t\tlet content;"
      },
      {
        "sha": "f573d89a646d3ff74575a0dd6748c24afab70275",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 51,
        "deletions": 51,
        "changes": 102,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -131,7 +131,7 @@ chunk 6e33027b71300dfeba9c.js 899 bytes [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for asset 1`] = `\n-\"Hash: c4ecc4ac09c06c7d509b\n+\"Hash: dadbda930e31fde61024\n Time: Xms\n Built at: 1970-04-20 12:42:42\n                    Asset       Size\n@@ -447,7 +447,7 @@ Child all:\n `;\n \n exports[`StatsTestCases should print correct stats for chunk-module-id-range 1`] = `\n-\"Hash: a800a9ba396856feaf95\n+\"Hash: e10aafeb076eef8f2bd1\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -515,7 +515,7 @@ chunk 996.bundle.js 22 bytes <{179}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for chunks-development 1`] = `\n-\"Hash: d20813bc827ce6429e48\n+\"Hash: 2a11303e167e5005439e\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -635,26 +635,26 @@ Entrypoint entry-1 = vendor-1.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"Hash: 0322711dda6b150ea64813be0c2c5ac4f1ee233a\n+\"Hash: 11c5088030cef384e47e64484202182c974f95ad\n Child\n-    Hash: 0322711dda6b150ea648\n+    Hash: 11c5088030cef384e47e\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                              Asset       Size\n-       app.b82161e9590d9f4a5710.js   5.81 KiB  [emitted] [immutable]  [name: app]\n+       app.d6fd64d04ea003e46dd3.js   5.81 KiB  [emitted] [immutable]  [name: app]\n     vendor.4101ce64a32446c20561.js  615 bytes  [emitted] [immutable]  [name: vendor] [id hint: vendor]\n-    Entrypoint app = vendor.4101ce64a32446c20561.js app.b82161e9590d9f4a5710.js\n+    Entrypoint app = vendor.4101ce64a32446c20561.js app.d6fd64d04ea003e46dd3.js\n     ./entry-1.js + 2 modules 190 bytes [built]\n     ./constants.js 87 bytes [built]\n         + 2 hidden modules\n Child\n-    Hash: 13be0c2c5ac4f1ee233a\n+    Hash: 64484202182c974f95ad\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                              Asset       Size\n-       app.58ab2273685a00b61215.js   5.82 KiB  [emitted] [immutable]  [name: app]\n+       app.627c1e16b9b5fb645153.js   5.82 KiB  [emitted] [immutable]  [name: app]\n     vendor.4101ce64a32446c20561.js  615 bytes  [emitted] [immutable]  [name: vendor] [id hint: vendor]\n-    Entrypoint app = vendor.4101ce64a32446c20561.js app.58ab2273685a00b61215.js\n+    Entrypoint app = vendor.4101ce64a32446c20561.js app.627c1e16b9b5fb645153.js\n     ./entry-2.js + 2 modules 197 bytes [built]\n     ./constants.js 87 bytes [built]\n         + 2 hidden modules\"\n@@ -678,25 +678,25 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for define-plugin 1`] = `\n-\"Hash: b25ebe7b7b295232a01a9a8d6feecff6652bf00eff7e4a0e0f4379e59b2f\n+\"Hash: 2ecfff95a59c6f113f4caba827c90e84dff35788e10eff264a44ee9769ee\n Child\n-    Hash: b25ebe7b7b295232a01a\n+    Hash: 2ecfff95a59c6f113f4c\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n       Asset      Size\n     main.js  1.33 KiB  [emitted]  [name: main]\n     Entrypoint main = main.js\n     ./index.js 24 bytes [built]\n Child\n-    Hash: 9a8d6feecff6652bf00e\n+    Hash: aba827c90e84dff35788\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n       Asset      Size\n     main.js  1.33 KiB  [emitted]  [name: main]\n     Entrypoint main = main.js\n     ./index.js 24 bytes [built]\n Child\n-    Hash: ff7e4a0e0f4379e59b2f\n+    Hash: e10eff264a44ee9769ee\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n       Asset      Size\n@@ -729,7 +729,7 @@ Unexpected end of JSON input while parsing near ''\n `;\n \n exports[`StatsTestCases should print correct stats for exclude-with-loader 1`] = `\n-\"Hash: 573a41a01a055998604c\n+\"Hash: 044cc6bde1cac542bb22\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset      Size\n@@ -1379,7 +1379,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n-\"Hash: 800a7c66f127dad910e9\n+\"Hash: 76c6284536c6eaf93eee\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset       Size\n@@ -1530,7 +1530,7 @@ If you don't want to include a polyfill, you can use an empty module like this:\n `;\n \n exports[`StatsTestCases should print correct stats for module-reasons 1`] = `\n-\"Hash: bb6f434427ef3617b391\n+\"Hash: b6469c24aa4c7dbb128f\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset      Size\n@@ -2463,7 +2463,7 @@ Entrypoint e2 = runtime.js e2.js\"\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-bailouts 1`] = `\n-\"Hash: 2850abf0834f38d62af2\n+\"Hash: afd1db97faf25e43672d\n Time: Xms\n Built at: 1970-04-20 12:42:42\n Entrypoint index = index.js\n@@ -2493,9 +2493,9 @@ external \\\\\"external\\\\\" 42 bytes [built]\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-multi 1`] = `\n-\"Hash: 95f50af5185d282dcfbaf2c6d907d9d0df616dd7\n+\"Hash: 36ff61b79bdd38770761a5ce538ce4ef736da453\n Child\n-    Hash: 95f50af5185d282dcfba\n+    Hash: 36ff61b79bdd38770761\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     Entrypoint first = vendor.js first.js\n@@ -2513,7 +2513,7 @@ Child\n     ./common_lazy_shared.js 25 bytes [built]\n         + 10 hidden modules\n Child\n-    Hash: f2c6d907d9d0df616dd7\n+    Hash: a5ce538ce4ef736da453\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     Entrypoint first = vendor.js first.js\n@@ -2540,18 +2540,18 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-issue-7428 1`] = `\n-\"Hash: ee17dcba81fb391501b7\n+\"Hash: 7b858d960ed70c9bad20\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset       Size\n    1.js  642 bytes  [emitted]\n-main.js   10.1 KiB  [emitted]  [name: main]\n+main.js   9.86 KiB  [emitted]  [name: main]\n Entrypoint main = main.js\n ./main.js + 1 modules 231 bytes [built]\n     [no exports used]\n-    harmony side effect evaluation ./CompB ./components/src/CompAB/index.js 2:0-43\n-    harmony export imported specifier ./CompB ./components/src/CompAB/index.js 2:0-43\n-    harmony export imported specifier ./CompAB ./components/src/index.js 1:0-40 (skipped side-effect-free modules)\n+    [inactive] harmony side effect evaluation ./CompB ./components/src/CompAB/index.js 2:0-43\n+    [inactive] harmony export imported specifier ./CompB ./components/src/CompAB/index.js 2:0-43\n+    [inactive] harmony export imported specifier ./CompAB ./components/src/index.js 1:0-40 (skipped side-effect-free modules)\n     entry ./main.js main\n     | ./components/src/CompAB/CompB.js 77 bytes [built]\n     |     [only some exports used: default]\n@@ -2560,67 +2560,67 @@ Entrypoint main = main.js\n     |     [no exports used]\n ./components/src/CompAB/CompA.js 89 bytes [built]\n     [only some exports used: default]\n-    harmony side effect evaluation ./CompA ./components/src/CompAB/index.js 1:0-43\n-    harmony export imported specifier ./CompA ./components/src/CompAB/index.js 1:0-43\n-    harmony export imported specifier ./CompAB ./components/src/index.js 1:0-40 (skipped side-effect-free modules)\n+    [inactive] harmony side effect evaluation ./CompA ./components/src/CompAB/index.js 1:0-43\n+    [inactive] harmony export imported specifier ./CompA ./components/src/CompAB/index.js 1:0-43\n+    [inactive] harmony export imported specifier ./CompAB ./components/src/index.js 1:0-40 (skipped side-effect-free modules)\n     harmony import specifier ./components ./foo.js 3:20-25 (skipped side-effect-free modules)\n     harmony import specifier ./components ./main.js + 1 modules ./main.js 3:15-20 (skipped side-effect-free modules)\n ./foo.js 101 bytes [built]\n     import() ./foo ./main.js + 1 modules ./main.js 6:0-15\n ./components/src/index.js 84 bytes [orphan] [built]\n     [module unused]\n-    harmony side effect evaluation ./components ./foo.js 1:0-37\n-    harmony side effect evaluation ./components ./main.js + 1 modules ./main.js 1:0-44\n+    [inactive] harmony side effect evaluation ./components ./foo.js 1:0-37\n+    [inactive] harmony side effect evaluation ./components ./main.js + 1 modules ./main.js 1:0-44\n ./components/src/CompAB/utils.js 97 bytes [built]\n-    harmony side effect evaluation ./utils ./components/src/CompAB/CompA.js 1:0-35\n+    [inactive] harmony side effect evaluation ./utils ./components/src/CompAB/CompA.js 1:0-35\n     harmony import specifier ./utils ./components/src/CompAB/CompA.js 5:5-12\n-    harmony side effect evaluation ./utils ./main.js + 1 modules ./components/src/CompAB/CompB.js 1:0-30\n+    [inactive] harmony side effect evaluation ./utils ./main.js + 1 modules ./components/src/CompAB/CompB.js 1:0-30\n     harmony import specifier ./utils ./main.js + 1 modules ./components/src/CompAB/CompB.js 5:2-5\n ./components/src/CompAB/index.js 87 bytes [orphan] [built]\n     [module unused]\n-    harmony side effect evaluation ./CompAB ./components/src/index.js 1:0-40\n+    [inactive] harmony side effect evaluation ./CompAB ./components/src/index.js 1:0-40\n ./components/src/CompC/CompC.js 33 bytes [orphan] [built]\n     [module unused]\n-    harmony side effect evaluation ./CompC ./components/src/CompC/index.js 1:0-34\n-    harmony export imported specifier ./CompC ./components/src/CompC/index.js 1:0-34\n-    harmony export imported specifier ./CompC ./components/src/index.js 2:0-43 (skipped side-effect-free modules)\n+    [inactive] harmony side effect evaluation ./CompC ./components/src/CompC/index.js 1:0-34\n+    [inactive] harmony export imported specifier ./CompC ./components/src/CompC/index.js 1:0-34\n+    [inactive] harmony export imported specifier ./CompC ./components/src/index.js 2:0-43 (skipped side-effect-free modules)\n ./components/src/CompC/index.js 34 bytes [orphan] [built]\n     [module unused]\n-    harmony side effect evaluation ./CompC ./components/src/index.js 2:0-43\n+    [inactive] harmony side effect evaluation ./CompC ./components/src/index.js 2:0-43\n     + 6 hidden modules\"\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-simple-unused 1`] = `\n-\"Hash: 97eddf49297c8cbcd004\n+\"Hash: 74ca09d69d62c4bfb288\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset       Size\n-main.js  664 bytes  [emitted]  [name: main]\n+main.js  322 bytes  [emitted]  [name: main]\n Entrypoint main = main.js\n ./index.js + 2 modules 158 bytes [built]\n     [no exports used]\n-    harmony side effect evaluation ./c ./node_modules/pmodule/b.js 5:0-24\n-    harmony export imported specifier ./c ./node_modules/pmodule/b.js 5:0-24\n+    [inactive] harmony side effect evaluation ./c ./node_modules/pmodule/b.js 5:0-24\n+    [inactive] harmony export imported specifier ./c ./node_modules/pmodule/b.js 5:0-24\n     entry ./index main\n     | ./node_modules/pmodule/index.js 75 bytes [built]\n     |     [only some exports used: default]\n-    |     harmony side effect evaluation pmodule ./index.js 1:0-33\n+    |     [inactive] harmony side effect evaluation pmodule ./index.js 1:0-33\n     |     harmony import specifier pmodule ./index.js 3:12-15\n     | ./node_modules/pmodule/c.js 28 bytes [built]\n     |     [only some exports used: z]\n     |     harmony import specifier pmodule ./index.js 3:17-18 (skipped side-effect-free modules)\n-    |     harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30 (skipped side-effect-free modules)\n+    |     [inactive] harmony export imported specifier ./b ./node_modules/pmodule/index.js 2:0-30 (skipped side-effect-free modules)\n     | ./index.js 55 bytes [built]\n     |     [no exports used]\n ./node_modules/pmodule/a.js 60 bytes [orphan] [built]\n     [module unused]\n-    harmony side effect evaluation ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n-    harmony export imported specifier ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n+    [inactive] harmony side effect evaluation ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n+    [inactive] harmony export imported specifier ./a ./index.js + 2 modules ./node_modules/pmodule/index.js 1:0-20\n ./node_modules/pmodule/b.js 69 bytes [orphan] [built]\n     [module unused]\n-    harmony side effect evaluation ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n-    harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n-    harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\"\n+    [inactive] harmony side effect evaluation ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\n+    [inactive] harmony export imported specifier ./b ./index.js + 2 modules ./node_modules/pmodule/index.js 2:0-30\"\n `;\n \n exports[`StatsTestCases should print correct stats for simple 1`] = `\n@@ -3624,7 +3624,7 @@ chunk default/async-a.js (async-a) 134 bytes <{179}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n-\"Hash: 555c0be8eff50e0d063c\n+\"Hash: 2332981f69bd5553a2d4\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset      Size\n@@ -3691,7 +3691,7 @@ WARNING in Terser Plugin: Dropping unused function someUnRemoteUsedFunction5 [./\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"Hash: 2c3fdc9668c0d61e8c09\n+\"Hash: 86e17ac033d009dc7bfc\n Time: Xms\n Built at: 1970-04-20 12:42:42\n                            Asset       Size"
      },
      {
        "sha": "448c0f787b86ad2dad8c448726d43f5b4c0bdc59",
        "filename": "test/checkArrayExpectation.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FcheckArrayExpectation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FcheckArrayExpectation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FcheckArrayExpectation.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -26,7 +26,8 @@ const explain = object => {\n \t\t\t\tvalue = JSON.stringify(value);\n \t\t\t}\n \t\t\tlet msg = `${key} = ${value}`;\n-\t\t\tif (key !== \"stack\" && msg.length > 100) msg = msg.slice(0, 97) + \"...\";\n+\t\t\tif (key !== \"stack\" && key !== \"details\" && msg.length > 100)\n+\t\t\t\tmsg = msg.slice(0, 97) + \"...\";\n \t\t\treturn msg;\n \t\t})\n \t\t.join(\"; \");"
      },
      {
        "sha": "b187abdd117e6e97a386f1cfbfb27caa011badf3",
        "filename": "test/configCases/deep-scope-analysis/remove-export-scope-hoisting/webpack.config.js",
        "status": "modified",
        "additions": 20,
        "deletions": 23,
        "changes": 43,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FconfigCases%2Fdeep-scope-analysis%2Fremove-export-scope-hoisting%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FconfigCases%2Fdeep-scope-analysis%2Fremove-export-scope-hoisting%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fdeep-scope-analysis%2Fremove-export-scope-hoisting%2Fwebpack.config.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -1,4 +1,3 @@\n-const { DependencyReference } = require(\"../../../../\").dependencies;\n /** @typedef {import(\"../../../../lib/Compilation\")} Compilation */\n \n module.exports = {\n@@ -15,29 +14,27 @@ module.exports = {\n \t\t\t\t * @returns {void}\n \t\t\t\t */\n \t\t\t\tcompilation => {\n-\t\t\t\t\tcompilation.hooks.dependencyReference.tap(\"Test\", (ref, dep) => {\n-\t\t\t\t\t\tconst module = compilation.moduleGraph.getParentModule(dep);\n-\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\tmodule.identifier().endsWith(\"module.js\") &&\n-\t\t\t\t\t\t\tref.module &&\n-\t\t\t\t\t\t\tref.module.identifier().endsWith(\"reference.js\") &&\n-\t\t\t\t\t\t\tArray.isArray(ref.importedNames) &&\n-\t\t\t\t\t\t\tref.importedNames.some(\n-\t\t\t\t\t\t\t\tnames => names.length === 1 && names[0] === \"unused\"\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\tconst newExports = ref.importedNames.filter(\n-\t\t\t\t\t\t\t\tnames => names.length !== 1 || names[0] !== \"unused\"\n-\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\treturn new DependencyReference(\n-\t\t\t\t\t\t\t\t() => ref.module,\n-\t\t\t\t\t\t\t\tnewExports,\n-\t\t\t\t\t\t\t\tref.weak,\n-\t\t\t\t\t\t\t\tref.order\n-\t\t\t\t\t\t\t);\n+\t\t\t\t\tcompilation.hooks.dependencyReferencedExports.tap(\n+\t\t\t\t\t\t\"Test\",\n+\t\t\t\t\t\t(referencedExports, dep) => {\n+\t\t\t\t\t\t\tconst module = compilation.moduleGraph.getParentModule(dep);\n+\t\t\t\t\t\t\tif (!module.identifier().endsWith(\"module.js\"))\n+\t\t\t\t\t\t\t\treturn referencedExports;\n+\t\t\t\t\t\t\tconst refModule = compilation.moduleGraph.getModule(dep);\n+\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\trefModule &&\n+\t\t\t\t\t\t\t\trefModule.identifier().endsWith(\"reference.js\") &&\n+\t\t\t\t\t\t\t\treferencedExports.some(\n+\t\t\t\t\t\t\t\t\tnames => names.length === 1 && names[0] === \"unused\"\n+\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\treturn referencedExports.filter(\n+\t\t\t\t\t\t\t\t\tnames => names.length !== 1 || names[0] !== \"unused\"\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn referencedExports;\n \t\t\t\t\t\t}\n-\t\t\t\t\t\treturn ref;\n-\t\t\t\t\t});\n+\t\t\t\t\t);\n \t\t\t\t}\n \t\t\t);\n \t\t}"
      },
      {
        "sha": "4ecb3a2e2f23ddce758d5c4c82ae7ea9dd7239e7",
        "filename": "test/configCases/deep-scope-analysis/remove-export/webpack.config.js",
        "status": "modified",
        "additions": 20,
        "deletions": 24,
        "changes": 44,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FconfigCases%2Fdeep-scope-analysis%2Fremove-export%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/test%2FconfigCases%2Fdeep-scope-analysis%2Fremove-export%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fdeep-scope-analysis%2Fremove-export%2Fwebpack.config.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -1,5 +1,3 @@\n-const { DependencyReference } = require(\"../../../../\").dependencies;\n-\n /** @typedef {import(\"../../../../lib/Compilation\")} Compilation */\n \n module.exports = {\n@@ -10,29 +8,27 @@ module.exports = {\n \tplugins: [\n \t\tfunction() {\n \t\t\tthis.hooks.compilation.tap(\"Test\", compilation => {\n-\t\t\t\tcompilation.hooks.dependencyReference.tap(\"Test\", (ref, dep) => {\n-\t\t\t\t\tconst module = compilation.moduleGraph.getParentModule(dep);\n-\t\t\t\t\tif (\n-\t\t\t\t\t\tmodule.identifier().endsWith(\"module.js\") &&\n-\t\t\t\t\t\tref.module &&\n-\t\t\t\t\t\tref.module.identifier().endsWith(\"reference.js\") &&\n-\t\t\t\t\t\tArray.isArray(ref.importedNames) &&\n-\t\t\t\t\t\tref.importedNames.some(\n-\t\t\t\t\t\t\tnames => names.length === 1 && names[0] === \"unused\"\n-\t\t\t\t\t\t)\n-\t\t\t\t\t) {\n-\t\t\t\t\t\tconst newExports = ref.importedNames.filter(\n-\t\t\t\t\t\t\tnames => names.length !== 1 || names[0] !== \"unused\"\n-\t\t\t\t\t\t);\n-\t\t\t\t\t\treturn new DependencyReference(\n-\t\t\t\t\t\t\t() => ref.module,\n-\t\t\t\t\t\t\tnewExports,\n-\t\t\t\t\t\t\tref.weak,\n-\t\t\t\t\t\t\tref.order\n-\t\t\t\t\t\t);\n+\t\t\t\tcompilation.hooks.dependencyReferencedExports.tap(\n+\t\t\t\t\t\"Test\",\n+\t\t\t\t\t(referencedExports, dep) => {\n+\t\t\t\t\t\tconst module = compilation.moduleGraph.getParentModule(dep);\n+\t\t\t\t\t\tif (!module.identifier().endsWith(\"module.js\"))\n+\t\t\t\t\t\t\treturn referencedExports;\n+\t\t\t\t\t\tconst refModule = compilation.moduleGraph.getModule(dep);\n+\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\trefModule &&\n+\t\t\t\t\t\t\trefModule.identifier().endsWith(\"reference.js\") &&\n+\t\t\t\t\t\t\treferencedExports.some(\n+\t\t\t\t\t\t\t\tnames => names.length === 1 && names[0] === \"unused\"\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\treturn referencedExports.filter(\n+\t\t\t\t\t\t\t\tnames => names.length !== 1 || names[0] !== \"unused\"\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\treturn referencedExports;\n \t\t\t\t\t}\n-\t\t\t\t\treturn ref;\n-\t\t\t\t});\n+\t\t\t\t);\n \t\t\t});\n \t\t}\n \t]"
      },
      {
        "sha": "16ea6f68fd25f20e981fd9e5edcdd59ea83709e2",
        "filename": "tooling/format-file-header.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/4479b6c660d69f9ec72d742df944f41b580b9e39/tooling%2Fformat-file-header.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4479b6c660d69f9ec72d742df944f41b580b9e39/tooling%2Fformat-file-header.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/tooling%2Fformat-file-header.js?ref=4479b6c660d69f9ec72d742df944f41b580b9e39",
        "patch": "@@ -180,11 +180,11 @@ for (const filePath of allFiles) {\n \t}\n \n \tconst matches = content.match(\n-\t\t/makeSerializable\\(\\s*[^,]+,\\s*\"webpack\\/lib\\/[^\"]+\"\\s*(?:,[^,]+)\\)/g\n+\t\t/makeSerializable\\(\\s*[^,]+,\\s*\"webpack\\/lib\\/[^\"]+\"\\s*(?:,[^)]+)?\\)/g\n \t);\n \tif (matches) {\n \t\tfor (const match of matches) {\n-\t\t\tconst str = /makeSerializable\\(\\s*[^,]+,\\s*\"webpack\\/lib\\/([^\"]+)\"\\s*(?:,[^,]+)\\)/.exec(\n+\t\t\tconst str = /makeSerializable\\(\\s*[^,]+,\\s*\"webpack\\/lib\\/([^\"]+)\"/.exec(\n \t\t\t\tmatch\n \t\t\t)[1];\n \t\t\tallSerializables.add(str);\n@@ -198,7 +198,7 @@ for (const filePath of allFiles) {\n \t\tpath.resolve(__dirname, \"../lib/util/internalSerializables.js\")\n \t);\n \tfor (const serializable of allSerializables) {\n-\t\tif (!content.includes(`../${serializable}`)) {\n+\t\tif (!content.includes(`\"../${serializable}\"`)) {\n \t\t\tconsole.log(\n \t\t\t\t`lib/util/internalSerializables.js: must include static require to ../${serializable}`\n \t\t\t);"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/10134",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/10134/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/10134/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/10134/events",
    "html_url": "https://github.com/webpack/webpack/pull/10134",
    "id": 538996772,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzU0MDQ2NTc1",
    "number": 10134,
    "title": "chore(deps): bump terser-webpack-plugin from 2.2.1 to 2.3.1",
    "user": {
      "login": "dependabot-preview[bot]",
      "id": 27856297,
      "node_id": "MDM6Qm90Mjc4NTYyOTc=",
      "avatar_url": "https://avatars.githubusercontent.com/in/2141?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dependabot-preview%5Bbot%5D",
      "html_url": "https://github.com/apps/dependabot-preview",
      "followers_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dependabot-preview%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 1220497063,
        "node_id": "MDU6TGFiZWwxMjIwNDk3MDYz",
        "url": "https://api.github.com/repos/webpack/webpack/labels/dependencies",
        "name": "dependencies",
        "color": "0025ff",
        "default": false,
        "description": "Pull requests that update a dependency file"
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2019-12-17T11:07:52Z",
    "updated_at": "2019-12-17T15:13:33Z",
    "closed_at": "2019-12-17T15:13:32Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/10134",
      "html_url": "https://github.com/webpack/webpack/pull/10134",
      "diff_url": "https://github.com/webpack/webpack/pull/10134.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/10134.patch",
      "merged_at": "2019-12-17T15:13:32Z"
    },
    "body": "Bumps [terser-webpack-plugin](https://github.com/webpack-contrib/terser-webpack-plugin) from 2.2.1 to 2.3.1.\n<details>\n<summary>Release notes</summary>\n\n*Sourced from [terser-webpack-plugin's releases](https://github.com/webpack-contrib/terser-webpack-plugin/releases).*\n\n> ## v2.3.1\n> ### [2.3.1](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.3.0...v2.3.1) (2019-12-17)\r\n> \r\n> \r\n> ### Bug Fixes\r\n> \r\n> * performance ([#200](https://github-redirect.dependabot.com/webpack-contrib/terser-webpack-plugin/issues/200)) ([d2acd75](https://github.com/webpack-contrib/terser-webpack-plugin/commit/d2acd75f4b630af38d2c272f800e755fe395b2dd))\r\n> \n> ## v2.3.0\n> ## [2.3.0](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.2.3...v2.3.0) (2019-12-12)\r\n> \r\n> \r\n> ### Features\r\n> \r\n> * support webpack@5 cache ([3649b3d](https://github.com/webpack-contrib/terser-webpack-plugin/commit/3649b3d0bf697288661676b47b33ae88226eb6f5))\r\n> \n> ## v2.2.3\n> ### [2.2.3](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.2.2...v2.2.3) (2019-12-11)\r\n> \r\n> ### SECURITY\r\n> \r\n> * update `serialize-javascript` to `2.1.2` version.\n> \n> ## v2.2.2\n> ### [2.2.2](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.2.1...v2.2.2) (2019-12-06)\r\n> \r\n> \r\n> ### SECURITY\r\n> \r\n> * update `serialize-javascript` to `2.1.1` version.\n</details>\n<details>\n<summary>Changelog</summary>\n\n*Sourced from [terser-webpack-plugin's changelog](https://github.com/webpack-contrib/terser-webpack-plugin/blob/master/CHANGELOG.md).*\n\n> ### [2.3.1](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.3.0...v2.3.1) (2019-12-17)\n> \n> \n> ### Bug Fixes\n> \n> * performance ([#200](https://github-redirect.dependabot.com/webpack-contrib/terser-webpack-plugin/issues/200)) ([d2acd75](https://github.com/webpack-contrib/terser-webpack-plugin/commit/d2acd75f4b630af38d2c272f800e755fe395b2dd))\n> \n> ## [2.3.0](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.2.3...v2.3.0) (2019-12-12)\n> \n> \n> ### Features\n> \n> * support webpack@5 cache ([3649b3d](https://github.com/webpack-contrib/terser-webpack-plugin/commit/3649b3d0bf697288661676b47b33ae88226eb6f5))\n> \n> ### [2.2.3](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.2.2...v2.2.3) (2019-12-11)\n> \n> ### SECURITY\n> \n> * update `serialize-javascript` to `2.1.2` version.\n> \n> ### [2.2.2](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.2.1...v2.2.2) (2019-12-06)\n> \n> \n> ### SECURITY\n> \n> * update `serialize-javascript` to `2.1.1` version.\n</details>\n<details>\n<summary>Commits</summary>\n\n- [`0e2da43`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/0e2da43f7bce3716bd6418b7f484d959e2f97172) chore(release): 2.3.1\n- [`d2acd75`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/d2acd75f4b630af38d2c272f800e755fe395b2dd) fix: performance ([#200](https://github-redirect.dependabot.com/webpack-contrib/terser-webpack-plugin/issues/200))\n- [`0bc8435`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/0bc8435bc06e6ac32c81f0800200c2eea37e3ee2) chore(release): 2.3.0\n- [`3649b3d`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/3649b3d0bf697288661676b47b33ae88226eb6f5) feat: support webpack@5 cache\n- [`9f8c812`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/9f8c8122dd1c919882d62d2efdb1efc2339df72c) chore(release): 2.1.2\n- [`47361d6`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/47361d67380730423759c99907c79769820ba016) test: split tests for webpack 5 ([#195](https://github-redirect.dependabot.com/webpack-contrib/terser-webpack-plugin/issues/195))\n- [`b33ff1a`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/b33ff1a006c4d65ac1be237137a09ead9043a8ca) chore(release): 2.2.2\n- [`1e12a84`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/1e12a84450e6a66faeb1f55cc43932f0794cb2a8) test: refactor ([#192](https://github-redirect.dependabot.com/webpack-contrib/terser-webpack-plugin/issues/192))\n- [`3c80be8`](https://github.com/webpack-contrib/terser-webpack-plugin/commit/3c80be827a33b96d55f0776f151adaacb1a9bc42) chore(deps): update ([#191](https://github-redirect.dependabot.com/webpack-contrib/terser-webpack-plugin/issues/191))\n- See full diff in [compare view](https://github.com/webpack-contrib/terser-webpack-plugin/compare/v2.2.1...v2.3.1)\n</details>\n<br />\n\n[![Dependabot compatibility score](https://api.dependabot.com/badges/compatibility_score?dependency-name=terser-webpack-plugin&package-manager=npm_and_yarn&previous-version=2.2.1&new-version=2.3.1)](https://dependabot.com/compatibility-score.html?dependency-name=terser-webpack-plugin&package-manager=npm_and_yarn&previous-version=2.2.1&new-version=2.3.1)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n- `@dependabot badge me` will comment on this PR with code to add a \"Dependabot enabled\" badge to your readme\n\nAdditionally, you can set the following in your Dependabot [dashboard](https://app.dependabot.com):\n- Update frequency (including time of day and day of week)\n- Pull request limits (per update run and/or open at any time)\n- Automerge options (never/patch/minor, and dev/runtime dependencies)\n- Out-of-range updates (receive only lockfile updates, if desired)\n- Security updates (receive only security updates, if desired)\n\n\n\n</details>",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/10134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/10134/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "5d7af3c5d641bd9538e0a1403b86d275d89007e9",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 15,
        "deletions": 15,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/cc500384f69d23114153ff5707d8d5f97ee5d18d/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/cc500384f69d23114153ff5707d8d5f97ee5d18d/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=cc500384f69d23114153ff5707d8d5f97ee5d18d",
        "patch": "@@ -811,9 +811,9 @@ external \\\\\"test\\\\\" 42 bytes [built]\"\n `;\n \n exports[`StatsTestCases should print correct stats for filter-warnings 1`] = `\n-\"Hash: 9c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed33269c6e8f427e9f60ed3326\n+\"Hash: c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9c7acc7e9d00613f9def9\n Child undefined:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n@@ -843,49 +843,49 @@ Child undefined:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child Terser:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n     bundle1.js  556 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle1.js\n Child /Terser/:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n     bundle2.js  556 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle2.js\n Child warnings => true:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n     bundle3.js  556 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle3.js\n Child [Terser]:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n     bundle4.js  556 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle4.js\n Child [/Terser/]:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n     bundle5.js  556 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle5.js\n Child [warnings => true]:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n     bundle6.js  556 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle6.js\n Child should not filter:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n@@ -915,7 +915,7 @@ Child should not filter:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child /should not filter/:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n@@ -945,7 +945,7 @@ Child /should not filter/:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child warnings => false:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset       Size\n@@ -975,7 +975,7 @@ Child warnings => false:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [should not filter]:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n           Asset       Size\n@@ -1005,7 +1005,7 @@ Child [should not filter]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [/should not filter/]:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n           Asset       Size\n@@ -1035,7 +1035,7 @@ Child [/should not filter/]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [warnings => false]:\n-    Hash: 9c6e8f427e9f60ed3326\n+    Hash: c7acc7e9d00613f9def9\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n           Asset       Size\n@@ -3753,7 +3753,7 @@ require.include() is deprecated and will be removed soon.\n `;\n \n exports[`StatsTestCases should print correct stats for warnings-terser 1`] = `\n-\"Hash: dcfa5b734e4c3a1e9e77\n+\"Hash: 65ad992aa3bdc02fd512\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset       Size"
      },
      {
        "sha": "7e86f3c9a3d202cade290fb8acad95828c6da9e4",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 20,
        "deletions": 20,
        "changes": 40,
        "blob_url": "https://github.com/webpack/webpack/blob/cc500384f69d23114153ff5707d8d5f97ee5d18d/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/cc500384f69d23114153ff5707d8d5f97ee5d18d/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=cc500384f69d23114153ff5707d8d5f97ee5d18d",
        "patch": "@@ -2326,10 +2326,10 @@ find-cache-dir@^2.0.0:\n     make-dir \"^2.0.0\"\n     pkg-dir \"^3.0.0\"\n \n-find-cache-dir@^3.0.0:\n-  version \"3.0.0\"\n-  resolved \"https://registry.yarnpkg.com/find-cache-dir/-/find-cache-dir-3.0.0.tgz#cd4b7dd97b7185b7e17dbfe2d6e4115ee3eeb8fc\"\n-  integrity sha512-t7ulV1fmbxh5G9l/492O1p5+EBbr3uwpt6odhFTMc+nWyhmbloe+ja9BZ8pIBtqFWhOmCWVjx+pTW4zDkFoclw==\n+find-cache-dir@^3.2.0:\n+  version \"3.2.0\"\n+  resolved \"https://registry.yarnpkg.com/find-cache-dir/-/find-cache-dir-3.2.0.tgz#e7fe44c1abc1299f516146e563108fd1006c1874\"\n+  integrity sha512-1JKclkYYsf1q9WIJKLZa9S9muC+08RIjzAlLrK4QcYLJMS6mk9yombQ9qf+zJ7H9LS800k0s44L4sDq9VYzqyg==\n   dependencies:\n     commondir \"^1.0.1\"\n     make-dir \"^3.0.0\"\n@@ -5535,7 +5535,7 @@ schema-utils@^1.0.0:\n     ajv-errors \"^1.0.0\"\n     ajv-keywords \"^3.1.0\"\n \n-schema-utils@^2.0.1, schema-utils@^2.5.0, schema-utils@^2.6.0:\n+schema-utils@^2.0.1, schema-utils@^2.5.0, schema-utils@^2.6.0, schema-utils@^2.6.1:\n   version \"2.6.1\"\n   resolved \"https://registry.yarnpkg.com/schema-utils/-/schema-utils-2.6.1.tgz#eb78f0b945c7bcfa2082b3565e8db3548011dc4f\"\n   integrity sha512-0WXHDs1VDJyo+Zqs9TKLKyD/h7yDpHUhEFsM2CzkICFdoX1av+GBq/J2xRTFfsQO5kBfhZzANf2VcIm84jqDbg==\n@@ -5570,10 +5570,10 @@ semver@^6.0.0, semver@^6.1.0, semver@^6.1.2, semver@^6.2.0:\n   resolved \"https://registry.yarnpkg.com/semver/-/semver-6.3.0.tgz#ee0a64c8af5e8ceea67687b133761e1becbd1d3d\"\n   integrity sha512-b39TBaTSfV6yBrapU89p5fKekE2m/NwnDocOVruQFS1/veMgdzuPcnOM34M6CwxW8jH/lxEa5rBoDeUwu5HHTw==\n \n-serialize-javascript@^2.1.0:\n-  version \"2.1.1\"\n-  resolved \"https://registry.yarnpkg.com/serialize-javascript/-/serialize-javascript-2.1.1.tgz#952907a04a3e3a75af7f73d92d15e233862048b2\"\n-  integrity sha512-MPLPRpD4FNqWq9tTIjYG5LesFouDhdyH0EPY3gVK4DRD5+g4aDqdNSzLIwceulo3Yj+PL1bPh6laE5+H6LTcrQ==\n+serialize-javascript@^2.1.2:\n+  version \"2.1.2\"\n+  resolved \"https://registry.yarnpkg.com/serialize-javascript/-/serialize-javascript-2.1.2.tgz#ecec53b0e0317bdc95ef76ab7074b7384785fa61\"\n+  integrity sha512-rs9OggEUF0V4jUSecXazOYsLfu7OGK2qIn3c7IPBiffz32XniEp/TX9Xmc9LQfK2nQ2QKHvZ2oygKUGU0lG4jQ==\n \n set-blocking@^2.0.0, set-blocking@~2.0.0:\n   version \"2.0.0\"\n@@ -6057,23 +6057,23 @@ temp-write@^4.0.0:\n     uuid \"^3.3.2\"\n \n terser-webpack-plugin@^2.2.1:\n-  version \"2.2.1\"\n-  resolved \"https://registry.yarnpkg.com/terser-webpack-plugin/-/terser-webpack-plugin-2.2.1.tgz#5569e6c7d8be79e5e43d6da23acc3b6ba77d22bd\"\n-  integrity sha512-jwdauV5Al7zopR6OAYvIIRcxXCSvLjZjr7uZE8l2tIWb/ryrGN48sJftqGf5k9z09tWhajx53ldp0XPI080YnA==\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/terser-webpack-plugin/-/terser-webpack-plugin-2.3.1.tgz#6a63c27debc15b25ffd2588562ee2eeabdcab923\"\n+  integrity sha512-dNxivOXmDgZqrGxOttBH6B4xaxT4zNC+Xd+2K8jwGDMK5q2CZI+KZMA1AAnSRT+BTRvuzKsDx+fpxzPAmAMVcA==\n   dependencies:\n     cacache \"^13.0.1\"\n-    find-cache-dir \"^3.0.0\"\n+    find-cache-dir \"^3.2.0\"\n     jest-worker \"^24.9.0\"\n-    schema-utils \"^2.5.0\"\n-    serialize-javascript \"^2.1.0\"\n+    schema-utils \"^2.6.1\"\n+    serialize-javascript \"^2.1.2\"\n     source-map \"^0.6.1\"\n-    terser \"^4.3.9\"\n+    terser \"^4.4.3\"\n     webpack-sources \"^1.4.3\"\n \n-terser@^4.3.9:\n-  version \"4.3.9\"\n-  resolved \"https://registry.yarnpkg.com/terser/-/terser-4.3.9.tgz#e4be37f80553d02645668727777687dad26bbca8\"\n-  integrity sha512-NFGMpHjlzmyOtPL+fDw3G7+6Ueh/sz4mkaUYa4lJCxOPTNzd0Uj0aZJOmsDYoSQyfuVoWDMSWTPU3huyOm2zdA==\n+terser@^4.4.3:\n+  version \"4.4.3\"\n+  resolved \"https://registry.yarnpkg.com/terser/-/terser-4.4.3.tgz#401abc52b88869cf904412503b1eb7da093ae2f0\"\n+  integrity sha512-0ikKraVtRDKGzHrzkCv5rUNDzqlhmhowOBqC0XqUHFpW+vJ45+20/IFBcebwKfiS2Z9fJin6Eo+F1zLZsxi8RA==\n   dependencies:\n     commander \"^2.20.0\"\n     source-map \"~0.6.1\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9478",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9478/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9478/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9478/events",
    "html_url": "https://github.com/webpack/webpack/pull/9478",
    "id": 473331877,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzAxNTE5MjA5",
    "number": 9478,
    "title": "improve chunk graph generation performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2019-07-26T12:22:24Z",
    "updated_at": "2019-07-26T14:12:12Z",
    "closed_at": "2019-07-26T14:12:07Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9478",
      "html_url": "https://github.com/webpack/webpack/pull/9478",
      "diff_url": "https://github.com/webpack/webpack/pull/9478.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9478.patch",
      "merged_at": "2019-07-26T14:12:07Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\npicked from master branch\r\n\r\ndiff from master PR:\r\n* improved logging output\r\n* disable old available modules optimization by default\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n`optimization.removeAvailableModules` is now false by default in all modes\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9478/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "6fe172bd2b10330e15b66dfd6e38bc39f98ede80",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 4,
        "deletions": 488,
        "changes": 492,
        "blob_url": "https://github.com/webpack/webpack/blob/b46dc65b88ab615ae255e1a6d177543712400d95/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b46dc65b88ab615ae255e1a6d177543712400d95/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=b46dc65b88ab615ae255e1a6d177543712400d95",
        "patch": "@@ -15,7 +15,6 @@ const {\n } = require(\"tapable\");\n const util = require(\"util\");\n const { CachedSource } = require(\"webpack-sources\");\n-const AsyncDependencyToInitialChunkError = require(\"./AsyncDependencyToInitialChunkError\");\n const Chunk = require(\"./Chunk\");\n const ChunkGraph = require(\"./ChunkGraph\");\n const ChunkGroup = require(\"./ChunkGroup\");\n@@ -25,10 +24,7 @@ const DependencyTemplates = require(\"./DependencyTemplates\");\n const Entrypoint = require(\"./Entrypoint\");\n const ErrorHelpers = require(\"./ErrorHelpers\");\n const FileSystemInfo = require(\"./FileSystemInfo\");\n-const {\n-\tconnectChunkGroupAndChunk,\n-\tconnectChunkGroupParentAndChild\n-} = require(\"./GraphHelpers\");\n+const { connectChunkGroupAndChunk } = require(\"./GraphHelpers\");\n const { makeWebpackError } = require(\"./HookWebpackError\");\n const MainTemplate = require(\"./MainTemplate\");\n const ModuleDependencyError = require(\"./ModuleDependencyError\");\n@@ -42,11 +38,11 @@ const RuntimeGlobals = require(\"./RuntimeGlobals\");\n const RuntimeTemplate = require(\"./RuntimeTemplate\");\n const Stats = require(\"./Stats\");\n const WebpackError = require(\"./WebpackError\");\n+const buildChunkGraph = require(\"./buildChunkGraph\");\n const { Logger, LogType } = require(\"./logging/Logger\");\n const StatsFactory = require(\"./stats/StatsFactory\");\n const StatsPrinter = require(\"./stats/StatsPrinter\");\n const AsyncQueue = require(\"./util/AsyncQueue\");\n-const Queue = require(\"./util/Queue\");\n const {\n \tcompareLocations,\n \tconcatComparators,\n@@ -193,16 +189,6 @@ const byNameOrHash = concatComparators(\n \t)\n );\n \n-/**\n- * @template T\n- * @param {Set<T>} a first set\n- * @param {Set<T>} b second set\n- * @returns {number} cmp\n- */\n-const bySetSize = (a, b) => {\n-\treturn a.size - b.size;\n-};\n-\n /**\n  * @template T\n  * @param {Set<T>} set set to add items to\n@@ -1336,7 +1322,8 @@ class Compilation {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tthis.processDependenciesBlocksForChunkGroups(\n+\t\tbuildChunkGraph(\n+\t\t\tthis,\n \t\t\t/** @type {Entrypoint[]} */ (this.chunkGroups.slice())\n \t\t);\n \t\tthis.hooks.afterChunks.call(this.chunks);\n@@ -1745,477 +1732,6 @@ class Compilation {\n \t\treturn this.hooks.dependencyReference.call(ref, dependency);\n \t}\n \n-\t/**\n-\t * This method creates the Chunk graph from the Module graph\n-\t * @private\n-\t * @param {Entrypoint[]} inputChunkGroups chunk groups which are processed\n-\t * @returns {void}\n-\t */\n-\tprocessDependenciesBlocksForChunkGroups(inputChunkGroups) {\n-\t\t// Process is splitting into two parts:\n-\t\t// Part one traverse the module graph and builds a very basic chunks graph\n-\t\t//   in chunkDependencies.\n-\t\t// Part two traverse every possible way through the basic chunk graph and\n-\t\t//   tracks the available modules. While traversing it connects chunks with\n-\t\t//   eachother and Blocks with Chunks. It stops traversing when all modules\n-\t\t//   for a chunk are already available. So it doesn't connect unneeded chunks.\n-\n-\t\tconst moduleGraph = this.moduleGraph;\n-\n-\t\t/** @typedef {{block: AsyncDependenciesBlock, chunkGroup: ChunkGroup, couldBeFiltered: boolean}} ChunkGroupDep */\n-\n-\t\t/** @type {Map<ChunkGroup, ChunkGroupDep[]>} */\n-\t\tconst chunkDependencies = new Map();\n-\t\t/** @type {Set<ChunkGroup>} */\n-\t\tconst allCreatedChunkGroups = new Set();\n-\n-\t\t// PREPARE\n-\t\t/** @type {Map<DependenciesBlock, { modules: Module[], blocks: AsyncDependenciesBlock[]}>} */\n-\t\tconst blockInfoMap = new Map();\n-\n-\t\t/**\n-\t\t * @param {Dependency} d dependency to iterate over\n-\t\t * @returns {void}\n-\t\t */\n-\t\tconst iteratorDependency = d => {\n-\t\t\t// We skip Dependencies without Reference\n-\t\t\tconst ref = this.getDependencyReference(d);\n-\t\t\tif (!ref) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\t// We skip Dependencies without Module pointer\n-\t\t\tconst refModule = ref.module;\n-\t\t\tif (!refModule) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\t// We skip weak Dependencies\n-\t\t\tif (ref.weak) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\tblockInfoModules.add(refModule);\n-\t\t};\n-\n-\t\t/**\n-\t\t * @param {AsyncDependenciesBlock} b blocks to prepare\n-\t\t * @returns {void}\n-\t\t */\n-\t\tconst iteratorBlockPrepare = b => {\n-\t\t\tblockInfoBlocks.push(b);\n-\t\t\tblockQueue.push(b);\n-\t\t};\n-\n-\t\t/** @type {DependenciesBlock} */\n-\t\tlet block;\n-\t\t/** @type {DependenciesBlock[]} */\n-\t\tlet blockQueue;\n-\t\t/** @type {Set<Module>} */\n-\t\tlet blockInfoModules;\n-\t\t/** @type {AsyncDependenciesBlock[]} */\n-\t\tlet blockInfoBlocks;\n-\n-\t\tfor (const module of this.modules) {\n-\t\t\tblockQueue = [module];\n-\t\t\twhile (blockQueue.length > 0) {\n-\t\t\t\tblock = blockQueue.pop();\n-\t\t\t\tblockInfoModules = new Set();\n-\t\t\t\tblockInfoBlocks = [];\n-\n-\t\t\t\tif (block.dependencies) {\n-\t\t\t\t\tfor (const dep of block.dependencies) iteratorDependency(dep);\n-\t\t\t\t}\n-\n-\t\t\t\tif (block.blocks) {\n-\t\t\t\t\tfor (const b of block.blocks) iteratorBlockPrepare(b);\n-\t\t\t\t}\n-\n-\t\t\t\tconst blockInfo = {\n-\t\t\t\t\tmodules: Array.from(blockInfoModules),\n-\t\t\t\t\tblocks: blockInfoBlocks\n-\t\t\t\t};\n-\t\t\t\tblockInfoMap.set(block, blockInfo);\n-\t\t\t}\n-\t\t}\n-\n-\t\tconst chunkGraph = this.chunkGraph;\n-\n-\t\t// PART ONE\n-\n-\t\t/** @type {Map<ChunkGroup, { preOrderIndex: number, postOrderIndex: number }>} */\n-\t\tconst chunkGroupCounters = new Map();\n-\t\tfor (const chunkGroup of inputChunkGroups) {\n-\t\t\tchunkGroupCounters.set(chunkGroup, {\n-\t\t\t\tpreOrderIndex: 0,\n-\t\t\t\tpostOrderIndex: 0\n-\t\t\t});\n-\t\t}\n-\n-\t\tlet nextFreeModulePreOrderIndex = 0;\n-\t\tlet nextFreeModulePostOrderIndex = 0;\n-\n-\t\t/** @type {Map<DependenciesBlock, ChunkGroup>} */\n-\t\tconst blockChunkGroups = new Map();\n-\n-\t\t/** @type {Set<DependenciesBlock>} */\n-\t\tconst blocksWithNestedBlocks = new Set();\n-\n-\t\tconst ADD_AND_ENTER_MODULE = 0;\n-\t\tconst ENTER_MODULE = 1;\n-\t\tconst PROCESS_BLOCK = 2;\n-\t\tconst LEAVE_MODULE = 3;\n-\n-\t\t/**\n-\t\t * @typedef {Object} QueueItem\n-\t\t * @property {number} action\n-\t\t * @property {DependenciesBlock} block\n-\t\t * @property {Module} module\n-\t\t * @property {Chunk} chunk\n-\t\t * @property {ChunkGroup} chunkGroup\n-\t\t */\n-\n-\t\t/**\n-\t\t * @param {QueueItem[]} queue the queue array (will be mutated)\n-\t\t * @param {ChunkGroup} chunkGroup chunk group\n-\t\t * @returns {QueueItem[]} the queue array again\n-\t\t */\n-\t\tconst reduceChunkGroupToQueueItem = (queue, chunkGroup) => {\n-\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\tfor (const module of chunkGraph.getChunkEntryModulesIterable(chunk)) {\n-\t\t\t\t\tqueue.push({\n-\t\t\t\t\t\taction: ENTER_MODULE,\n-\t\t\t\t\t\tblock: module,\n-\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\tchunkGroup\n-\t\t\t\t\t});\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn queue;\n-\t\t};\n-\n-\t\t// Start with the provided modules/chunks\n-\t\t/** @type {QueueItem[]} */\n-\t\tlet queue = inputChunkGroups\n-\t\t\t.reduce(reduceChunkGroupToQueueItem, [])\n-\t\t\t.reverse();\n-\t\t/** @type {QueueItem[]} */\n-\t\tlet queueDelayed = [];\n-\n-\t\t/** @type {Module} */\n-\t\tlet module;\n-\t\t/** @type {Chunk} */\n-\t\tlet chunk;\n-\t\t/** @type {ChunkGroup} */\n-\t\tlet chunkGroup;\n-\n-\t\t// For each async Block in graph\n-\t\t/**\n-\t\t * @param {AsyncDependenciesBlock} b iterating over each Async DepBlock\n-\t\t * @returns {void}\n-\t\t */\n-\t\tconst iteratorBlock = b => {\n-\t\t\t// 1. We create a chunk for this Block\n-\t\t\t// but only once (blockChunkGroups map)\n-\t\t\tlet c = blockChunkGroups.get(b);\n-\t\t\tif (c === undefined) {\n-\t\t\t\tc = this.namedChunkGroups.get(b.chunkName);\n-\t\t\t\tif (c && c.isInitial()) {\n-\t\t\t\t\tthis.errors.push(\n-\t\t\t\t\t\tnew AsyncDependencyToInitialChunkError(b.chunkName, module, b.loc)\n-\t\t\t\t\t);\n-\t\t\t\t\tc = chunkGroup;\n-\t\t\t\t} else {\n-\t\t\t\t\tc = this.addChunkInGroup(\n-\t\t\t\t\t\tb.groupOptions || b.chunkName,\n-\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\tb.loc,\n-\t\t\t\t\t\tb.request\n-\t\t\t\t\t);\n-\t\t\t\t\tchunkGroupCounters.set(c, { preOrderIndex: 0, postOrderIndex: 0 });\n-\t\t\t\t\tblockChunkGroups.set(b, c);\n-\t\t\t\t\tallCreatedChunkGroups.add(c);\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tc.addOptions(b.groupOptions);\n-\t\t\t\tc.addOrigin(module, b.loc, b.request);\n-\t\t\t}\n-\n-\t\t\t// 2. We store the Block+Chunk mapping as dependency for the chunk\n-\t\t\tlet deps = chunkDependencies.get(chunkGroup);\n-\t\t\tif (!deps) chunkDependencies.set(chunkGroup, (deps = []));\n-\t\t\tdeps.push({\n-\t\t\t\tblock: b,\n-\t\t\t\tchunkGroup: c,\n-\t\t\t\tcouldBeFiltered: true\n-\t\t\t});\n-\n-\t\t\t// 3. We enqueue the DependenciesBlock for traversal\n-\t\t\tqueueDelayed.push({\n-\t\t\t\taction: PROCESS_BLOCK,\n-\t\t\t\tblock: b,\n-\t\t\t\tmodule: module,\n-\t\t\t\tchunk: c.chunks[0],\n-\t\t\t\tchunkGroup: c\n-\t\t\t});\n-\t\t};\n-\n-\t\t// Iterative traversal of the Module graph\n-\t\t// Recursive would be simpler to write but could result in Stack Overflows\n-\t\twhile (queue.length) {\n-\t\t\twhile (queue.length) {\n-\t\t\t\tconst queueItem = queue.pop();\n-\t\t\t\tmodule = queueItem.module;\n-\t\t\t\tblock = queueItem.block;\n-\t\t\t\tchunk = queueItem.chunk;\n-\t\t\t\tchunkGroup = queueItem.chunkGroup;\n-\n-\t\t\t\tswitch (queueItem.action) {\n-\t\t\t\t\tcase ADD_AND_ENTER_MODULE: {\n-\t\t\t\t\t\t// We connect Module and Chunk when not already done\n-\t\t\t\t\t\tif (!chunkGraph.connectChunkAndModule(chunk, module)) {\n-\t\t\t\t\t\t\t// already connected, skip it\n-\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\t// fallthrough\n-\t\t\t\t\tcase ENTER_MODULE: {\n-\t\t\t\t\t\tif (chunkGroup !== undefined) {\n-\t\t\t\t\t\t\tconst index = chunkGroup.getModulePreOrderIndex(module);\n-\t\t\t\t\t\t\tif (index === undefined) {\n-\t\t\t\t\t\t\t\tchunkGroup.setModulePreOrderIndex(\n-\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).preOrderIndex++\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\tmoduleGraph.setPreOrderIndexIfUnset(\n-\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\tnextFreeModulePreOrderIndex\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\tnextFreeModulePreOrderIndex++;\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tqueue.push({\n-\t\t\t\t\t\t\taction: LEAVE_MODULE,\n-\t\t\t\t\t\t\tblock,\n-\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\tchunkGroup\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t\t// fallthrough\n-\t\t\t\t\tcase PROCESS_BLOCK: {\n-\t\t\t\t\t\t// get prepared block info\n-\t\t\t\t\t\tconst blockInfo = blockInfoMap.get(block);\n-\n-\t\t\t\t\t\t// Traverse all referenced modules\n-\t\t\t\t\t\tfor (let i = blockInfo.modules.length - 1; i >= 0; i--) {\n-\t\t\t\t\t\t\tconst refModule = blockInfo.modules[i];\n-\t\t\t\t\t\t\tif (chunkGraph.isModuleInChunk(refModule, chunk)) {\n-\t\t\t\t\t\t\t\t// skip early if already connected\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t// enqueue the add and enter to enter in the correct order\n-\t\t\t\t\t\t\t// this is relevant with circular dependencies\n-\t\t\t\t\t\t\tqueue.push({\n-\t\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n-\t\t\t\t\t\t\t\tblock: refModule,\n-\t\t\t\t\t\t\t\tmodule: refModule,\n-\t\t\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\t\tchunkGroup\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t// Traverse all Blocks\n-\t\t\t\t\t\tfor (const block of blockInfo.blocks) iteratorBlock(block);\n-\n-\t\t\t\t\t\tif (blockInfo.blocks.length > 0 && module !== block) {\n-\t\t\t\t\t\t\tblocksWithNestedBlocks.add(block);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n-\t\t\t\t\tcase LEAVE_MODULE: {\n-\t\t\t\t\t\tif (chunkGroup !== undefined) {\n-\t\t\t\t\t\t\tconst index = chunkGroup.getModulePostOrderIndex(module);\n-\t\t\t\t\t\t\tif (index === undefined) {\n-\t\t\t\t\t\t\t\tchunkGroup.setModulePostOrderIndex(\n-\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).postOrderIndex++\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\tmoduleGraph.setPostOrderIndexIfUnset(\n-\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\tnextFreeModulePostOrderIndex\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t) {\n-\t\t\t\t\t\t\tnextFreeModulePostOrderIndex++;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tconst tempQueue = queue;\n-\t\t\tqueue = queueDelayed.reverse();\n-\t\t\tqueueDelayed = tempQueue;\n-\t\t}\n-\n-\t\t// PART TWO\n-\t\t/** @type {Set<Module>} */\n-\t\tlet newAvailableModules;\n-\n-\t\t/**\n-\t\t * @typedef {Object} ChunkGroupInfo\n-\t\t * @property {Set<Module>} minAvailableModules current minimal set of modules available at this point\n-\t\t * @property {Set<Module>[]} availableModulesToBeMerged enqueued updates to the minimal set of available modules\n-\t\t */\n-\n-\t\t/** @type {Map<ChunkGroup, ChunkGroupInfo>} */\n-\t\tconst chunkGroupInfoMap = new Map();\n-\n-\t\t/** @type {Queue<ChunkGroup>} */\n-\t\tconst queue2 = new Queue(inputChunkGroups);\n-\n-\t\tfor (const chunkGroup of inputChunkGroups) {\n-\t\t\tchunkGroupInfoMap.set(chunkGroup, {\n-\t\t\t\tminAvailableModules: undefined,\n-\t\t\t\tavailableModulesToBeMerged: [new Set()]\n-\t\t\t});\n-\t\t}\n-\n-\t\t/**\n-\t\t * Helper function to check if all modules of a chunk are available\n-\t\t *\n-\t\t * @param {ChunkGroup} chunkGroup the chunkGroup to scan\n-\t\t * @param {Set<Module>} availableModules the comparitor set\n-\t\t * @returns {boolean} return true if all modules of a chunk are available\n-\t\t */\n-\t\tconst areModulesAvailable = (chunkGroup, availableModules) => {\n-\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\tfor (const module of chunkGraph.getChunkModulesIterable(chunk)) {\n-\t\t\t\t\tif (!availableModules.has(module)) return false;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn true;\n-\t\t};\n-\n-\t\t// For each edge in the basic chunk graph\n-\t\t/**\n-\t\t * @param {ChunkGroupDep} dep the dependency used for filtering\n-\t\t * @returns {boolean} used to filter \"edges\" (aka Dependencies) that were pointing\n-\t\t * to modules that are already available. Also filters circular dependencies in the chunks graph\n-\t\t */\n-\t\tconst filterFn = dep => {\n-\t\t\tconst depChunkGroup = dep.chunkGroup;\n-\t\t\tif (!dep.couldBeFiltered) return true;\n-\t\t\tif (blocksWithNestedBlocks.has(dep.block)) return true;\n-\t\t\tif (areModulesAvailable(depChunkGroup, newAvailableModules)) {\n-\t\t\t\treturn false; // break all modules are already available\n-\t\t\t}\n-\t\t\tdep.couldBeFiltered = false;\n-\t\t\treturn true;\n-\t\t};\n-\n-\t\t// Iterative traversing of the basic chunk graph\n-\t\twhile (queue2.length) {\n-\t\t\tchunkGroup = queue2.dequeue();\n-\t\t\tconst info = chunkGroupInfoMap.get(chunkGroup);\n-\t\t\tconst availableModulesToBeMerged = info.availableModulesToBeMerged;\n-\t\t\tlet minAvailableModules = info.minAvailableModules;\n-\n-\t\t\t// 1. Get minimal available modules\n-\t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n-\t\t\t// This step calculates the minimal available modules and skips traversal when\n-\t\t\t// the list didn't shrink.\n-\t\t\tavailableModulesToBeMerged.sort(bySetSize);\n-\t\t\tlet changed = false;\n-\t\t\tfor (const availableModules of availableModulesToBeMerged) {\n-\t\t\t\tif (minAvailableModules === undefined) {\n-\t\t\t\t\tminAvailableModules = new Set(availableModules);\n-\t\t\t\t\tinfo.minAvailableModules = minAvailableModules;\n-\t\t\t\t\tchanged = true;\n-\t\t\t\t} else {\n-\t\t\t\t\tfor (const m of minAvailableModules) {\n-\t\t\t\t\t\tif (!availableModules.has(m)) {\n-\t\t\t\t\t\t\tminAvailableModules.delete(m);\n-\t\t\t\t\t\t\tchanged = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tavailableModulesToBeMerged.length = 0;\n-\t\t\tif (!changed) continue;\n-\n-\t\t\t// 2. Get the edges at this point of the graph\n-\t\t\tconst deps = chunkDependencies.get(chunkGroup);\n-\t\t\tif (!deps) continue;\n-\t\t\tif (deps.length === 0) continue;\n-\n-\t\t\t// 3. Create a new Set of available modules at this points\n-\t\t\tnewAvailableModules = new Set(minAvailableModules);\n-\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\tfor (const m of chunkGraph.getChunkModulesIterable(chunk)) {\n-\t\t\t\t\tnewAvailableModules.add(m);\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t// 4. Foreach remaining edge\n-\t\t\tconst nextChunkGroups = new Set();\n-\t\t\tfor (let i = 0; i < deps.length; i++) {\n-\t\t\t\tconst dep = deps[i];\n-\n-\t\t\t\t// Filter inline, rather than creating a new array from `.filter()`\n-\t\t\t\tif (!filterFn(dep)) {\n-\t\t\t\t\tcontinue;\n-\t\t\t\t}\n-\t\t\t\tconst depChunkGroup = dep.chunkGroup;\n-\t\t\t\tconst depBlock = dep.block;\n-\n-\t\t\t\t// 5. Connect block with chunk\n-\t\t\t\tchunkGraph.connectBlockAndChunkGroup(depBlock, depChunkGroup);\n-\n-\t\t\t\t// 6. Connect chunk with parent\n-\t\t\t\tconnectChunkGroupParentAndChild(chunkGroup, depChunkGroup);\n-\n-\t\t\t\tnextChunkGroups.add(depChunkGroup);\n-\t\t\t}\n-\n-\t\t\t// 7. Enqueue further traversal\n-\t\t\tfor (const nextChunkGroup of nextChunkGroups) {\n-\t\t\t\tlet nextInfo = chunkGroupInfoMap.get(nextChunkGroup);\n-\t\t\t\tif (nextInfo === undefined) {\n-\t\t\t\t\tnextInfo = {\n-\t\t\t\t\t\tminAvailableModules: undefined,\n-\t\t\t\t\t\tavailableModulesToBeMerged: []\n-\t\t\t\t\t};\n-\t\t\t\t\tchunkGroupInfoMap.set(nextChunkGroup, nextInfo);\n-\t\t\t\t}\n-\t\t\t\tnextInfo.availableModulesToBeMerged.push(newAvailableModules);\n-\n-\t\t\t\t// As queue deduplicates enqueued items this makes sure that a ChunkGroup\n-\t\t\t\t// is not enqueued twice\n-\t\t\t\tqueue2.enqueue(nextChunkGroup);\n-\t\t\t}\n-\t\t}\n-\n-\t\t// Remove all unconnected chunk groups\n-\t\tfor (const chunkGroup of allCreatedChunkGroups) {\n-\t\t\tif (chunkGroup.getNumberOfParents() === 0) {\n-\t\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\t\tthis.chunks.delete(chunk);\n-\t\t\t\t\tchunkGraph.disconnectChunk(chunk);\n-\t\t\t\t}\n-\t\t\t\tchunkGraph.disconnectChunkGroup(chunkGroup);\n-\t\t\t\tchunkGroup.remove();\n-\t\t\t}\n-\t\t}\n-\t}\n-\n \t/**\n \t *\n \t * @param {Module} module module relationship for removal"
      },
      {
        "sha": "30153281a5215b3283492fa28f59fe1e8c938036",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/b46dc65b88ab615ae255e1a6d177543712400d95/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b46dc65b88ab615ae255e1a6d177543712400d95/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=b46dc65b88ab615ae255e1a6d177543712400d95",
        "patch": "@@ -288,7 +288,7 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\t);\n \n \t\tthis.set(\"optimization\", \"call\", value => ({ ...value }));\n-\t\tthis.set(\"optimization.removeAvailableModules\", true);\n+\t\tthis.set(\"optimization.removeAvailableModules\", false);\n \t\tthis.set(\"optimization.removeEmptyChunks\", true);\n \t\tthis.set(\"optimization.mergeDuplicateChunks\", true);\n \t\tthis.set(\"optimization.flagIncludedChunks\", \"make\", options =>"
      },
      {
        "sha": "af85f2aaa1440650b5752f1e453b6bd743df674d",
        "filename": "lib/buildChunkGraph.js",
        "status": "added",
        "additions": 702,
        "deletions": 0,
        "changes": 702,
        "blob_url": "https://github.com/webpack/webpack/blob/b46dc65b88ab615ae255e1a6d177543712400d95/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b46dc65b88ab615ae255e1a6d177543712400d95/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=b46dc65b88ab615ae255e1a6d177543712400d95",
        "patch": "@@ -0,0 +1,702 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const AsyncDependencyToInitialChunkError = require(\"./AsyncDependencyToInitialChunkError\");\n+const { connectChunkGroupParentAndChild } = require(\"./GraphHelpers\");\n+\n+/** @typedef {import(\"./AsyncDependenciesBlock\")} AsyncDependenciesBlock */\n+/** @typedef {import(\"./Chunk\")} Chunk */\n+/** @typedef {import(\"./ChunkGroup\")} ChunkGroup */\n+/** @typedef {import(\"./Compilation\")} Compilation */\n+/** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n+/** @typedef {import(\"./Dependency\")} Dependency */\n+/** @typedef {import(\"./Entrypoint\")} Entrypoint */\n+/** @typedef {import(\"./Module\")} Module */\n+/** @typedef {import(\"./ModuleGraph\")} ModuleGraph */\n+/** @typedef {import(\"./logging/Logger\").Logger} Logger */\n+\n+/**\n+ * @typedef {Object} QueueItem\n+ * @property {number} action\n+ * @property {DependenciesBlock} block\n+ * @property {Module} module\n+ * @property {Chunk} chunk\n+ * @property {ChunkGroup} chunkGroup\n+ */\n+\n+/**\n+ * @typedef {Object} ChunkGroupInfo\n+ * @property {Set<Module>} minAvailableModules current minimal set of modules available at this point\n+ * @property {boolean} minAvailableModulesOwned true, if minAvailableModules is owned and can be modified\n+ * @property {Set<Module>[]} availableModulesToBeMerged enqueued updates to the minimal set of available modules\n+ * @property {QueueItem[]} skippedItems queue items that were skipped because module is already available in parent chunks (need to reconsider when minAvailableModules is shrinking)\n+ * @property {Set<Module>} resultingAvailableModules set of modules available including modules from this chunk group\n+ */\n+\n+/**\n+ * @typedef {Object} ChunkGroupDep\n+ * @property {AsyncDependenciesBlock} block referencing block\n+ * @property {ChunkGroup} chunkGroup referenced chunk group\n+ */\n+\n+/**\n+ * @template T\n+ * @param {Set<T>} a first set\n+ * @param {Set<T>} b second set\n+ * @returns {number} cmp\n+ */\n+const bySetSize = (a, b) => {\n+\treturn b.size - a.size;\n+};\n+\n+/**\n+ * Extracts simplified info from the modules and their dependencies\n+ * @param {Compilation} compilation the compilation\n+ * @returns {Map<DependenciesBlock, { modules: Iterable<Module>, blocks: AsyncDependenciesBlock[]}>} the mapping block to modules and inner blocks\n+ */\n+const extraceBlockInfoMap = compilation => {\n+\t/** @type {Map<DependenciesBlock, { modules: Iterable<Module>, blocks: AsyncDependenciesBlock[]}>} */\n+\tconst blockInfoMap = new Map();\n+\n+\t/**\n+\t * @param {Dependency} d dependency to iterate over\n+\t * @returns {void}\n+\t */\n+\tconst iteratorDependency = d => {\n+\t\t// We skip Dependencies without Reference\n+\t\tconst ref = compilation.getDependencyReference(d);\n+\t\tif (!ref) {\n+\t\t\treturn;\n+\t\t}\n+\t\t// We skip Dependencies without Module pointer\n+\t\tconst refModule = ref.module;\n+\t\tif (!refModule) {\n+\t\t\treturn;\n+\t\t}\n+\t\t// We skip weak Dependencies\n+\t\tif (ref.weak) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tblockInfoModules.add(refModule);\n+\t};\n+\n+\t/**\n+\t * @param {AsyncDependenciesBlock} b blocks to prepare\n+\t * @returns {void}\n+\t */\n+\tconst iteratorBlockPrepare = b => {\n+\t\tblockInfoBlocks.push(b);\n+\t\tblockQueue.push(b);\n+\t};\n+\n+\t/** @type {DependenciesBlock} */\n+\tlet block;\n+\t/** @type {DependenciesBlock[]} */\n+\tlet blockQueue;\n+\t/** @type {Set<Module>} */\n+\tlet blockInfoModules;\n+\t/** @type {AsyncDependenciesBlock[]} */\n+\tlet blockInfoBlocks;\n+\n+\tfor (const module of compilation.modules) {\n+\t\tblockQueue = [module];\n+\t\twhile (blockQueue.length > 0) {\n+\t\t\tblock = blockQueue.pop();\n+\t\t\tblockInfoModules = new Set();\n+\t\t\tblockInfoBlocks = [];\n+\n+\t\t\tif (block.dependencies) {\n+\t\t\t\tfor (const dep of block.dependencies) iteratorDependency(dep);\n+\t\t\t}\n+\n+\t\t\tif (block.blocks) {\n+\t\t\t\tfor (const b of block.blocks) iteratorBlockPrepare(b);\n+\t\t\t}\n+\n+\t\t\tconst blockInfo = {\n+\t\t\t\tmodules: blockInfoModules,\n+\t\t\t\tblocks: blockInfoBlocks\n+\t\t\t};\n+\t\t\tblockInfoMap.set(block, blockInfo);\n+\t\t}\n+\t}\n+\n+\treturn blockInfoMap;\n+};\n+\n+/**\n+ *\n+ * @param {Logger} logger a logger\n+ * @param {Compilation} compilation the compilation\n+ * @param {Entrypoint[]} inputChunkGroups input groups\n+ * @param {Map<ChunkGroup, ChunkGroupInfo>} chunkGroupInfoMap mapping from chunk group to available modules\n+ * @param {Map<ChunkGroup, ChunkGroupDep[]>} chunkDependencies dependencies for chunk groups\n+ * @param {Set<DependenciesBlock>} blocksWithNestedBlocks flag for blocks that have nested blocks\n+ * @param {Set<ChunkGroup>} allCreatedChunkGroups filled with all chunk groups that are created here\n+ */\n+const visitModules = (\n+\tlogger,\n+\tcompilation,\n+\tinputChunkGroups,\n+\tchunkGroupInfoMap,\n+\tchunkDependencies,\n+\tblocksWithNestedBlocks,\n+\tallCreatedChunkGroups\n+) => {\n+\tconst { moduleGraph, chunkGraph, namedChunkGroups } = compilation;\n+\n+\tlogger.time(\"visitModules: prepare\");\n+\tconst blockInfoMap = extraceBlockInfoMap(compilation);\n+\n+\t/** @type {Map<ChunkGroup, { preOrderIndex: number, postOrderIndex: number }>} */\n+\tconst chunkGroupCounters = new Map();\n+\tfor (const chunkGroup of inputChunkGroups) {\n+\t\tchunkGroupCounters.set(chunkGroup, {\n+\t\t\tpreOrderIndex: 0,\n+\t\t\tpostOrderIndex: 0\n+\t\t});\n+\t}\n+\n+\tlet nextFreeModulePreOrderIndex = 0;\n+\tlet nextFreeModulePostOrderIndex = 0;\n+\n+\t/** @type {Map<DependenciesBlock, ChunkGroup>} */\n+\tconst blockChunkGroups = new Map();\n+\n+\tconst ADD_AND_ENTER_MODULE = 0;\n+\tconst ENTER_MODULE = 1;\n+\tconst PROCESS_BLOCK = 2;\n+\tconst LEAVE_MODULE = 3;\n+\n+\t/**\n+\t * @param {QueueItem[]} queue the queue array (will be mutated)\n+\t * @param {ChunkGroup} chunkGroup chunk group\n+\t * @returns {QueueItem[]} the queue array again\n+\t */\n+\tconst reduceChunkGroupToQueueItem = (queue, chunkGroup) => {\n+\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\tfor (const module of chunkGraph.getChunkEntryModulesIterable(chunk)) {\n+\t\t\t\tqueue.push({\n+\t\t\t\t\taction: ENTER_MODULE,\n+\t\t\t\t\tblock: module,\n+\t\t\t\t\tmodule,\n+\t\t\t\t\tchunk,\n+\t\t\t\t\tchunkGroup\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n+\t\tchunkGroupInfoMap.set(chunkGroup, {\n+\t\t\tminAvailableModules: new Set(),\n+\t\t\tminAvailableModulesOwned: true,\n+\t\t\tavailableModulesToBeMerged: [],\n+\t\t\tskippedItems: [],\n+\t\t\tresultingAvailableModules: undefined\n+\t\t});\n+\t\treturn queue;\n+\t};\n+\n+\t// Start with the provided modules/chunks\n+\t/** @type {QueueItem[]} */\n+\tlet queue = inputChunkGroups\n+\t\t.reduce(reduceChunkGroupToQueueItem, [])\n+\t\t.reverse();\n+\t/** @type {Map<ChunkGroup, Set<ChunkGroup>>} */\n+\tconst queueConnect = new Map();\n+\t/** @type {Set<ChunkGroupInfo>} */\n+\tconst outdatedChunkGroupInfo = new Set();\n+\t/** @type {QueueItem[]} */\n+\tlet queueDelayed = [];\n+\n+\tlogger.timeEnd(\"visitModules: prepare\");\n+\n+\t/** @type {Module} */\n+\tlet module;\n+\t/** @type {Chunk} */\n+\tlet chunk;\n+\t/** @type {ChunkGroup} */\n+\tlet chunkGroup;\n+\t/** @type {DependenciesBlock} */\n+\tlet block;\n+\t/** @type {Set<Module>} */\n+\tlet minAvailableModules;\n+\t/** @type {QueueItem[]} */\n+\tlet skippedItems;\n+\n+\t// For each async Block in graph\n+\t/**\n+\t * @param {AsyncDependenciesBlock} b iterating over each Async DepBlock\n+\t * @returns {void}\n+\t */\n+\tconst iteratorBlock = b => {\n+\t\t// 1. We create a chunk for this Block\n+\t\t// but only once (blockChunkGroups map)\n+\t\tlet c = blockChunkGroups.get(b);\n+\t\tif (c === undefined) {\n+\t\t\tc = namedChunkGroups.get(b.chunkName);\n+\t\t\tif (c && c.isInitial()) {\n+\t\t\t\tcompilation.errors.push(\n+\t\t\t\t\tnew AsyncDependencyToInitialChunkError(b.chunkName, module, b.loc)\n+\t\t\t\t);\n+\t\t\t\tc = chunkGroup;\n+\t\t\t} else {\n+\t\t\t\tc = compilation.addChunkInGroup(\n+\t\t\t\t\tb.groupOptions || b.chunkName,\n+\t\t\t\t\tmodule,\n+\t\t\t\t\tb.loc,\n+\t\t\t\t\tb.request\n+\t\t\t\t);\n+\t\t\t\tchunkGroupCounters.set(c, { preOrderIndex: 0, postOrderIndex: 0 });\n+\t\t\t\tblockChunkGroups.set(b, c);\n+\t\t\t\tallCreatedChunkGroups.add(c);\n+\t\t\t}\n+\t\t} else {\n+\t\t\tc.addOptions(b.groupOptions);\n+\t\t\tc.addOrigin(module, b.loc, b.request);\n+\t\t}\n+\n+\t\t// 2. We store the Block+Chunk mapping as dependency for the chunk\n+\t\tlet deps = chunkDependencies.get(chunkGroup);\n+\t\tif (!deps) chunkDependencies.set(chunkGroup, (deps = []));\n+\t\tdeps.push({\n+\t\t\tblock: b,\n+\t\t\tchunkGroup: c\n+\t\t});\n+\n+\t\t// 3. We create/update the chunk group info\n+\t\tlet connectList = queueConnect.get(chunkGroup);\n+\t\tif (connectList === undefined) {\n+\t\t\tconnectList = new Set();\n+\t\t\tqueueConnect.set(chunkGroup, connectList);\n+\t\t}\n+\t\tconnectList.add(c);\n+\n+\t\t// 4. We enqueue the DependenciesBlock for traversal\n+\t\tqueueDelayed.push({\n+\t\t\taction: PROCESS_BLOCK,\n+\t\t\tblock: b,\n+\t\t\tmodule: module,\n+\t\t\tchunk: c.chunks[0],\n+\t\t\tchunkGroup: c\n+\t\t});\n+\t};\n+\n+\t// Iterative traversal of the Module graph\n+\t// Recursive would be simpler to write but could result in Stack Overflows\n+\twhile (queue.length) {\n+\t\tlogger.time(\"visitModules: visiting\");\n+\t\twhile (queue.length) {\n+\t\t\tconst queueItem = queue.pop();\n+\t\t\tmodule = queueItem.module;\n+\t\t\tblock = queueItem.block;\n+\t\t\tchunk = queueItem.chunk;\n+\t\t\tif (chunkGroup !== queueItem.chunkGroup) {\n+\t\t\t\tchunkGroup = queueItem.chunkGroup;\n+\t\t\t\tconst chunkGroupInfo = chunkGroupInfoMap.get(chunkGroup);\n+\t\t\t\tminAvailableModules = chunkGroupInfo.minAvailableModules;\n+\t\t\t\tskippedItems = chunkGroupInfo.skippedItems;\n+\t\t\t}\n+\n+\t\t\tswitch (queueItem.action) {\n+\t\t\t\tcase ADD_AND_ENTER_MODULE: {\n+\t\t\t\t\tif (minAvailableModules.has(module)) {\n+\t\t\t\t\t\t// already in parent chunks\n+\t\t\t\t\t\t// skip it for now, but enqueue for rechecking when minAvailableModules shrinks\n+\t\t\t\t\t\tskippedItems.push(queueItem);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t\t// We connect Module and Chunk when not already done\n+\t\t\t\t\tif (!chunkGraph.connectChunkAndModule(chunk, module)) {\n+\t\t\t\t\t\t// already connected, skip it\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\t// fallthrough\n+\t\t\t\tcase ENTER_MODULE: {\n+\t\t\t\t\tif (chunkGroup !== undefined) {\n+\t\t\t\t\t\tconst index = chunkGroup.getModulePreOrderIndex(module);\n+\t\t\t\t\t\tif (index === undefined) {\n+\t\t\t\t\t\t\tchunkGroup.setModulePreOrderIndex(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).preOrderIndex++\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif (\n+\t\t\t\t\t\tmoduleGraph.setPreOrderIndexIfUnset(\n+\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\tnextFreeModulePreOrderIndex\n+\t\t\t\t\t\t)\n+\t\t\t\t\t) {\n+\t\t\t\t\t\tnextFreeModulePreOrderIndex++;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tqueue.push({\n+\t\t\t\t\t\taction: LEAVE_MODULE,\n+\t\t\t\t\t\tblock,\n+\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\tchunkGroup\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\t// fallthrough\n+\t\t\t\tcase PROCESS_BLOCK: {\n+\t\t\t\t\t// get prepared block info\n+\t\t\t\t\tconst blockInfo = blockInfoMap.get(block);\n+\n+\t\t\t\t\t// Buffer items because order need to be reverse to get indicies correct\n+\t\t\t\t\tconst skipBuffer = [];\n+\t\t\t\t\tconst queueBuffer = [];\n+\t\t\t\t\t// Traverse all referenced modules\n+\t\t\t\t\tfor (const refModule of blockInfo.modules) {\n+\t\t\t\t\t\tif (chunkGraph.isModuleInChunk(refModule, chunk)) {\n+\t\t\t\t\t\t\t// skip early if already connected\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (minAvailableModules.has(refModule)) {\n+\t\t\t\t\t\t\t// already in parent chunks, skip it for now\n+\t\t\t\t\t\t\tskipBuffer.push({\n+\t\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n+\t\t\t\t\t\t\t\tblock: refModule,\n+\t\t\t\t\t\t\t\tmodule: refModule,\n+\t\t\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\t\t\tchunkGroup\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t// enqueue the add and enter to enter in the correct order\n+\t\t\t\t\t\t// this is relevant with circular dependencies\n+\t\t\t\t\t\tqueueBuffer.push({\n+\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n+\t\t\t\t\t\t\tblock: refModule,\n+\t\t\t\t\t\t\tmodule: refModule,\n+\t\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\t\tchunkGroup\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n+\t\t\t\t\t// Add buffered items in reversed order\n+\t\t\t\t\tfor (let i = skipBuffer.length - 1; i >= 0; i--) {\n+\t\t\t\t\t\tskippedItems.push(skipBuffer[i]);\n+\t\t\t\t\t}\n+\t\t\t\t\tfor (let i = queueBuffer.length - 1; i >= 0; i--) {\n+\t\t\t\t\t\tqueue.push(queueBuffer[i]);\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t// Traverse all Blocks\n+\t\t\t\t\tfor (const block of blockInfo.blocks) iteratorBlock(block);\n+\n+\t\t\t\t\tif (blockInfo.blocks.length > 0 && module !== block) {\n+\t\t\t\t\t\tblocksWithNestedBlocks.add(block);\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tcase LEAVE_MODULE: {\n+\t\t\t\t\tif (chunkGroup !== undefined) {\n+\t\t\t\t\t\tconst index = chunkGroup.getModulePostOrderIndex(module);\n+\t\t\t\t\t\tif (index === undefined) {\n+\t\t\t\t\t\t\tchunkGroup.setModulePostOrderIndex(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).postOrderIndex++\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif (\n+\t\t\t\t\t\tmoduleGraph.setPostOrderIndexIfUnset(\n+\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\tnextFreeModulePostOrderIndex\n+\t\t\t\t\t\t)\n+\t\t\t\t\t) {\n+\t\t\t\t\t\tnextFreeModulePostOrderIndex++;\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tlogger.timeEnd(\"visitModules: visiting\");\n+\n+\t\tif (queueConnect.size > 0) {\n+\t\t\tlogger.time(\"visitModules: calculating available modules\");\n+\n+\t\t\t// Figure out new parents for chunk groups\n+\t\t\t// to get new available modules for these children\n+\t\t\tfor (const [chunkGroup, targets] of queueConnect) {\n+\t\t\t\tconst info = chunkGroupInfoMap.get(chunkGroup);\n+\t\t\t\tlet minAvailableModules = info.minAvailableModules;\n+\n+\t\t\t\t// 1. Create a new Set of available modules at this points\n+\t\t\t\tconst resultingAvailableModules = new Set(minAvailableModules);\n+\t\t\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\t\t\tfor (const m of chunkGraph.getChunkModulesIterable(chunk)) {\n+\t\t\t\t\t\tresultingAvailableModules.add(m);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tinfo.resultingAvailableModules = resultingAvailableModules;\n+\n+\t\t\t\t// 2. Update chunk group info\n+\t\t\t\tfor (const target of targets) {\n+\t\t\t\t\tlet chunkGroupInfo = chunkGroupInfoMap.get(target);\n+\t\t\t\t\tif (chunkGroupInfo === undefined) {\n+\t\t\t\t\t\tchunkGroupInfo = {\n+\t\t\t\t\t\t\tminAvailableModules: undefined,\n+\t\t\t\t\t\t\tminAvailableModulesOwned: undefined,\n+\t\t\t\t\t\t\tavailableModulesToBeMerged: [],\n+\t\t\t\t\t\t\tskippedItems: [],\n+\t\t\t\t\t\t\tresultingAvailableModules: undefined\n+\t\t\t\t\t\t};\n+\t\t\t\t\t\tchunkGroupInfoMap.set(target, chunkGroupInfo);\n+\t\t\t\t\t}\n+\t\t\t\t\tchunkGroupInfo.availableModulesToBeMerged.push(\n+\t\t\t\t\t\tresultingAvailableModules\n+\t\t\t\t\t);\n+\t\t\t\t\toutdatedChunkGroupInfo.add(chunkGroupInfo);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tqueueConnect.clear();\n+\t\t\tlogger.timeEnd(\"visitModules: calculating available modules\");\n+\n+\t\t\tif (outdatedChunkGroupInfo.size > 0) {\n+\t\t\t\tlogger.time(\"visitModules: merging available modules\");\n+\t\t\t\t// Execute the merge\n+\t\t\t\tfor (const info of outdatedChunkGroupInfo) {\n+\t\t\t\t\tconst availableModulesToBeMerged = info.availableModulesToBeMerged;\n+\t\t\t\t\tlet minAvailableModules = info.minAvailableModules;\n+\n+\t\t\t\t\t// 1. Get minimal available modules\n+\t\t\t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n+\t\t\t\t\t// This step calculates the minimal available modules and skips traversal when\n+\t\t\t\t\t// the list didn't shrink.\n+\t\t\t\t\tif (availableModulesToBeMerged.length > 1) {\n+\t\t\t\t\t\tavailableModulesToBeMerged.sort(bySetSize);\n+\t\t\t\t\t}\n+\t\t\t\t\tlet changed = false;\n+\t\t\t\t\tfor (const availableModules of availableModulesToBeMerged) {\n+\t\t\t\t\t\tif (minAvailableModules === undefined) {\n+\t\t\t\t\t\t\tminAvailableModules = availableModules;\n+\t\t\t\t\t\t\tinfo.minAvailableModules = minAvailableModules;\n+\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = false;\n+\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tif (info.minAvailableModulesOwned) {\n+\t\t\t\t\t\t\t\t// We own it and can modify it\n+\t\t\t\t\t\t\t\tfor (const m of minAvailableModules) {\n+\t\t\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n+\t\t\t\t\t\t\t\t\t\tminAvailableModules.delete(m);\n+\t\t\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tfor (const m of minAvailableModules) {\n+\t\t\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n+\t\t\t\t\t\t\t\t\t\t// minAvailableModules need to be modified\n+\t\t\t\t\t\t\t\t\t\t// but we don't own it\n+\t\t\t\t\t\t\t\t\t\t// construct a new Set as intersection of minAvailableModules and availableModules\n+\t\t\t\t\t\t\t\t\t\t/** @type {Set<Module>} */\n+\t\t\t\t\t\t\t\t\t\tconst newSet = new Set();\n+\t\t\t\t\t\t\t\t\t\tconst iterator = minAvailableModules[Symbol.iterator]();\n+\t\t\t\t\t\t\t\t\t\t/** @type {IteratorResult<Module>} */\n+\t\t\t\t\t\t\t\t\t\tlet it;\n+\t\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\t\t\tif (module === m) break;\n+\t\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\t\t\tif (availableModules.has(module)) {\n+\t\t\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\tminAvailableModules = newSet;\n+\t\t\t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n+\t\t\t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n+\t\t\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tavailableModulesToBeMerged.length = 0;\n+\t\t\t\t\tif (!changed) continue;\n+\n+\t\t\t\t\t// 2. Reconsider skipped items\n+\t\t\t\t\tfor (const queueItem of info.skippedItems) {\n+\t\t\t\t\t\tqueue.push(queueItem);\n+\t\t\t\t\t}\n+\t\t\t\t\tinfo.skippedItems.length = 0;\n+\t\t\t\t}\n+\t\t\t\toutdatedChunkGroupInfo.clear();\n+\t\t\t\tlogger.timeEnd(\"visitModules: merging available modules\");\n+\t\t\t}\n+\t\t}\n+\n+\t\t// Run queueDelayed when all items of the queue are processed\n+\t\t// This is important to get the global indicing correct\n+\t\t// Async blocks should be processed after all sync blocks are processed\n+\t\tif (queue.length === 0) {\n+\t\t\tconst tempQueue = queue;\n+\t\t\tqueue = queueDelayed.reverse();\n+\t\t\tqueueDelayed = tempQueue;\n+\t\t}\n+\t}\n+};\n+\n+/**\n+ *\n+ * @param {Compilation} compilation the compilation\n+ * @param {Set<DependenciesBlock>} blocksWithNestedBlocks flag for blocks that have nested blocks\n+ * @param {Map<ChunkGroup, ChunkGroupDep[]>} chunkDependencies dependencies for chunk groups\n+ * @param {Map<ChunkGroup, ChunkGroupInfo>} chunkGroupInfoMap mapping from chunk group to available modules\n+ */\n+const connectChunkGroups = (\n+\tcompilation,\n+\tblocksWithNestedBlocks,\n+\tchunkDependencies,\n+\tchunkGroupInfoMap\n+) => {\n+\tconst { chunkGraph } = compilation;\n+\n+\t/** @type {Set<Module>} */\n+\tlet resultingAvailableModules;\n+\n+\t/**\n+\t * Helper function to check if all modules of a chunk are available\n+\t *\n+\t * @param {ChunkGroup} chunkGroup the chunkGroup to scan\n+\t * @param {Set<Module>} availableModules the comparitor set\n+\t * @returns {boolean} return true if all modules of a chunk are available\n+\t */\n+\tconst areModulesAvailable = (chunkGroup, availableModules) => {\n+\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\tfor (const module of chunkGraph.getChunkModulesIterable(chunk)) {\n+\t\t\t\tif (!availableModules.has(module)) return false;\n+\t\t\t}\n+\t\t}\n+\t\treturn true;\n+\t};\n+\n+\t// For each edge in the basic chunk graph\n+\t/**\n+\t * @param {ChunkGroupDep} dep the dependency used for filtering\n+\t * @returns {boolean} used to filter \"edges\" (aka Dependencies) that were pointing\n+\t * to modules that are already available. Also filters circular dependencies in the chunks graph\n+\t */\n+\tconst filterFn = dep => {\n+\t\tconst depChunkGroup = dep.chunkGroup;\n+\t\t// TODO is this needed?\n+\t\tif (blocksWithNestedBlocks.has(dep.block)) return true;\n+\t\tif (areModulesAvailable(depChunkGroup, resultingAvailableModules)) {\n+\t\t\treturn false; // break all modules are already available\n+\t\t}\n+\t\treturn true;\n+\t};\n+\n+\t// For all deps, check if chunk groups need to be connected\n+\tfor (const [chunkGroup, deps] of chunkDependencies) {\n+\t\tif (deps.length === 0) continue;\n+\n+\t\t// 1. Get info from chunk group info map\n+\t\tconst info = chunkGroupInfoMap.get(chunkGroup);\n+\t\tresultingAvailableModules = info.resultingAvailableModules;\n+\n+\t\t// 2. Foreach edge\n+\t\tfor (let i = 0; i < deps.length; i++) {\n+\t\t\tconst dep = deps[i];\n+\n+\t\t\t// Filter inline, rather than creating a new array from `.filter()`\n+\t\t\t// TODO check if inlining filterFn makes sense here\n+\t\t\tif (!filterFn(dep)) {\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t\tconst depChunkGroup = dep.chunkGroup;\n+\t\t\tconst depBlock = dep.block;\n+\n+\t\t\t// 5. Connect block with chunk\n+\t\t\tchunkGraph.connectBlockAndChunkGroup(depBlock, depChunkGroup);\n+\n+\t\t\t// 6. Connect chunk with parent\n+\t\t\tconnectChunkGroupParentAndChild(chunkGroup, depChunkGroup);\n+\t\t}\n+\t}\n+};\n+\n+/**\n+ * Remove all unconnected chunk groups\n+ * @param {Compilation} compilation the compilation\n+ * @param {Iterable<ChunkGroup>} allCreatedChunkGroups all chunk groups that where created before\n+ */\n+const cleanupUnconnectedGroups = (compilation, allCreatedChunkGroups) => {\n+\tconst { chunkGraph } = compilation;\n+\n+\tfor (const chunkGroup of allCreatedChunkGroups) {\n+\t\tif (chunkGroup.getNumberOfParents() === 0) {\n+\t\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\t\tcompilation.chunks.delete(chunk);\n+\t\t\t\tchunkGraph.disconnectChunk(chunk);\n+\t\t\t}\n+\t\t\tchunkGraph.disconnectChunkGroup(chunkGroup);\n+\t\t\tchunkGroup.remove();\n+\t\t}\n+\t}\n+};\n+\n+/**\n+ * This method creates the Chunk graph from the Module graph\n+ * @param {Compilation} compilation the compilation\n+ * @param {Entrypoint[]} inputChunkGroups chunk groups which are processed\n+ * @returns {void}\n+ */\n+const buildChunkGraph = (compilation, inputChunkGroups) => {\n+\tconst logger = compilation.getLogger(\"webpack.buildChunkGraph\");\n+\n+\t// SHARED STATE\n+\n+\t/** @type {Map<ChunkGroup, ChunkGroupDep[]>} */\n+\tconst chunkDependencies = new Map();\n+\n+\t/** @type {Set<ChunkGroup>} */\n+\tconst allCreatedChunkGroups = new Set();\n+\n+\t/** @type {Map<ChunkGroup, ChunkGroupInfo>} */\n+\tconst chunkGroupInfoMap = new Map();\n+\n+\t/** @type {Set<DependenciesBlock>} */\n+\tconst blocksWithNestedBlocks = new Set();\n+\n+\t// PART ONE\n+\n+\tvisitModules(\n+\t\tlogger,\n+\t\tcompilation,\n+\t\tinputChunkGroups,\n+\t\tchunkGroupInfoMap,\n+\t\tchunkDependencies,\n+\t\tblocksWithNestedBlocks,\n+\t\tallCreatedChunkGroups\n+\t);\n+\n+\t// PART TWO\n+\n+\tlogger.time(\"connectChunkGroups\");\n+\tconnectChunkGroups(\n+\t\tcompilation,\n+\t\tblocksWithNestedBlocks,\n+\t\tchunkDependencies,\n+\t\tchunkGroupInfoMap\n+\t);\n+\tlogger.timeEnd(\"connectChunkGroups\");\n+\n+\t// Cleaup work\n+\n+\tlogger.time(\"cleanup\");\n+\tcleanupUnconnectedGroups(compilation, allCreatedChunkGroups);\n+\tlogger.timeEnd(\"cleanup\");\n+};\n+\n+module.exports = buildChunkGraph;"
      },
      {
        "sha": "baa8886ccf517295bdd140a2ab51287023c7416b",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/b46dc65b88ab615ae255e1a6d177543712400d95/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/b46dc65b88ab615ae255e1a6d177543712400d95/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=b46dc65b88ab615ae255e1a6d177543712400d95",
        "patch": "@@ -2324,6 +2324,18 @@ LOG from webpack.Compiler\n <t> done hook: Xms\n <t> beginIdle: Xms\n \n+LOG from webpack.buildChunkGraph\n+<t> visitModules: prepare: Xms\n+<t> visitModules: visiting: Xms\n+<t> visitModules: calculating available modules: Xms\n+<t> visitModules: merging available modules: Xms\n+<t> visitModules: visiting: Xms\n+<t> visitModules: calculating available modules: Xms\n+<t> visitModules: merging available modules: Xms\n+<t> visitModules: visiting: Xms\n+<t> connectChunkGroups: Xms\n+<t> cleanup: Xms\n+\n LOG from webpack.SplitChunksPlugin\n <t> prepare: Xms\n <t> modules: Xms"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9474",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9474/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9474/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9474/events",
    "html_url": "https://github.com/webpack/webpack/pull/9474",
    "id": 473324114,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzAxNTEyODA3",
    "number": 9474,
    "title": "Fix low hanging webpack 5 performance issues",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-07-26T12:00:46Z",
    "updated_at": "2019-07-26T12:20:09Z",
    "closed_at": "2019-07-26T12:20:07Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9474",
      "html_url": "https://github.com/webpack/webpack/pull/9474",
      "diff_url": "https://github.com/webpack/webpack/pull/9474.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9474.patch",
      "merged_at": "2019-07-26T12:20:07Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\ndefault for `cache.idleTimeout` is now 60s\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9474/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "0ceb3d368af3797afddaac8786907f0ded96a1f7",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -10,7 +10,7 @@ const Entrypoint = require(\"./Entrypoint\");\n const { intersect } = require(\"./util/SetHelpers\");\n const SortableSet = require(\"./util/SortableSet\");\n const { compareModulesByIdOrIdentifier } = require(\"./util/comparators\");\n-const { arrayToSetDeprecation } = require(\"./util/deprecation\");\n+const { createArrayToSetDeprecationSet } = require(\"./util/deprecation\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./ChunkGraph\").ChunkFilterPredicate} ChunkFilterPredicate */\n@@ -24,6 +24,8 @@ const { arrayToSetDeprecation } = require(\"./util/deprecation\");\n /** @typedef {import(\"./ModuleGraph\")} ModuleGraph */\n /** @typedef {import(\"./util/Hash\")} Hash */\n \n+const ChunkFilesSet = createArrayToSetDeprecationSet(\"chunk.files\");\n+\n /**\n  *  @typedef {Object} WithId an object who has an id property *\n  *  @property {string | number} id the id of the object\n@@ -76,8 +78,7 @@ class Chunk {\n \t\t/** @private @type {SortableSet<ChunkGroup>} */\n \t\tthis._groups = new SortableSet(undefined, sortChunkGroupById);\n \t\t/** @type {Set<string>} */\n-\t\tthis.files = new Set();\n-\t\tarrayToSetDeprecation(this.files, \"Chunk.files\");\n+\t\tthis.files = new ChunkFilesSet();\n \t\t/** @type {Set<string>} */\n \t\tthis.auxiliaryFiles = new Set();\n \t\t/** @type {boolean} */"
      },
      {
        "sha": "26ab738d1d2a9d6edc9de520e1bc1f4faae20f20",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 43,
        "deletions": 30,
        "changes": 73,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -832,23 +832,42 @@ class Compilation {\n \n \t\tlet currentBlock = module;\n \n+\t\tlet factoryCacheKey;\n+\t\tlet factoryCacheValue;\n+\t\tlet listCacheKey;\n+\t\tlet listCacheValue;\n+\n \t\tconst processDependency = dep => {\n \t\t\tthis.moduleGraph.setParents(dep, currentBlock, module);\n \t\t\tconst resourceIdent = dep.getResourceIdentifier();\n \t\t\tif (resourceIdent) {\n-\t\t\t\tconst factory = this.dependencyFactories.get(dep.constructor);\n-\t\t\t\tif (factory === undefined) {\n-\t\t\t\t\tthrow new Error(\n-\t\t\t\t\t\t`No module factory available for dependency type: ${dep.constructor.name}`\n-\t\t\t\t\t);\n-\t\t\t\t}\n-\t\t\t\tlet innerMap = dependencies.get(factory);\n-\t\t\t\tif (innerMap === undefined) {\n-\t\t\t\t\tdependencies.set(factory, (innerMap = new Map()));\n+\t\t\t\tconst constructor = dep.constructor;\n+\t\t\t\tlet innerMap;\n+\t\t\t\tif (factoryCacheKey === constructor) {\n+\t\t\t\t\tinnerMap = factoryCacheValue;\n+\t\t\t\t\tif (listCacheKey === resourceIdent) {\n+\t\t\t\t\t\tlistCacheValue.push(dep);\n+\t\t\t\t\t\treturn;\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\tconst factory = this.dependencyFactories.get(dep.constructor);\n+\t\t\t\t\tif (factory === undefined) {\n+\t\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t\t`No module factory available for dependency type: ${dep.constructor.name}`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t\tinnerMap = dependencies.get(factory);\n+\t\t\t\t\tif (innerMap === undefined) {\n+\t\t\t\t\t\tdependencies.set(factory, (innerMap = new Map()));\n+\t\t\t\t\t}\n+\t\t\t\t\tfactoryCacheKey = constructor;\n+\t\t\t\t\tfactoryCacheValue = innerMap;\n \t\t\t\t}\n \t\t\t\tlet list = innerMap.get(resourceIdent);\n \t\t\t\tif (list === undefined) innerMap.set(resourceIdent, (list = []));\n \t\t\t\tlist.push(dep);\n+\t\t\t\tlistCacheKey = resourceIdent;\n+\t\t\t\tlistCacheValue = list;\n \t\t\t}\n \t\t};\n \n@@ -870,11 +889,12 @@ class Compilation {\n \n \t\tconst sortedDependencies = [];\n \n-\t\tfor (const pair1 of dependencies) {\n-\t\t\tfor (const pair2 of pair1[1]) {\n+\t\tfor (const [factory, innerMap] of dependencies) {\n+\t\t\tfor (const dependencies of innerMap.values()) {\n \t\t\t\tsortedDependencies.push({\n-\t\t\t\t\tfactory: pair1[0],\n-\t\t\t\t\tdependencies: pair2[1]\n+\t\t\t\t\tfactory,\n+\t\t\t\t\tdependencies,\n+\t\t\t\t\toriginModule: module\n \t\t\t\t});\n \t\t\t}\n \t\t}\n@@ -891,24 +911,17 @@ class Compilation {\n \t\t\tasyncLib.forEach(\n \t\t\t\tsortedDependencies,\n \t\t\t\t(item, callback) => {\n-\t\t\t\t\tthis.handleModuleCreation(\n-\t\t\t\t\t\t{\n-\t\t\t\t\t\t\tfactory: item.factory,\n-\t\t\t\t\t\t\tdependencies: item.dependencies,\n-\t\t\t\t\t\t\toriginModule: module\n-\t\t\t\t\t\t},\n-\t\t\t\t\t\terr => {\n-\t\t\t\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n-\t\t\t\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n-\t\t\t\t\t\t\t// leaking the Compilation object.\n-\t\t\t\t\t\t\tif (err && this.bail) {\n-\t\t\t\t\t\t\t\t// eslint-disable-next-line no-self-assign\n-\t\t\t\t\t\t\t\terr.stack = err.stack;\n-\t\t\t\t\t\t\t\treturn callback(err);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\tthis.handleModuleCreation(item, err => {\n+\t\t\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n+\t\t\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n+\t\t\t\t\t\t// leaking the Compilation object.\n+\t\t\t\t\t\tif (err && this.bail) {\n+\t\t\t\t\t\t\t// eslint-disable-next-line no-self-assign\n+\t\t\t\t\t\t\terr.stack = err.stack;\n+\t\t\t\t\t\t\treturn callback(err);\n \t\t\t\t\t\t}\n-\t\t\t\t\t);\n+\t\t\t\t\t\tcallback();\n+\t\t\t\t\t});\n \t\t\t\t},\n \t\t\t\terr => {\n \t\t\t\t\tthis.processDependenciesQueue.decreaseParallelism();"
      },
      {
        "sha": "a56e0f36e04fd3bac8871c7fb6dec6739c6aa117",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -588,7 +588,9 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\t\t\t\tversion: cacheOptions.version,\n \t\t\t\t\t\t\t\t\thashAlgorithm: cacheOptions.hashAlgorithm,\n \t\t\t\t\t\t\t\t\tloglevel: cacheOptions.loglevel\n-\t\t\t\t\t\t\t\t})\n+\t\t\t\t\t\t\t\t}),\n+\t\t\t\t\t\t\t\tcacheOptions.idleTimeout,\n+\t\t\t\t\t\t\t\tcacheOptions.idleTimeoutForInitialStore\n \t\t\t\t\t\t\t).apply(compiler);\n \t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t}\n@@ -601,7 +603,9 @@ class WebpackOptionsApply extends OptionsApply {\n \t\t\t\t\t\t\t\t\tcacheLocation: cacheOptions.cacheLocation,\n \t\t\t\t\t\t\t\t\tversion: cacheOptions.version,\n \t\t\t\t\t\t\t\t\tloglevel: cacheOptions.loglevel\n-\t\t\t\t\t\t\t\t})\n+\t\t\t\t\t\t\t\t}),\n+\t\t\t\t\t\t\t\tcacheOptions.idleTimeout,\n+\t\t\t\t\t\t\t\tcacheOptions.idleTimeoutForInitialStore\n \t\t\t\t\t\t\t).apply(compiler);\n \t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t}"
      },
      {
        "sha": "615a3cffae5d840809b7dc8f2b3558dd484cc272",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -84,7 +84,7 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\t\t\t\tvalue.store = \"pack\";\n \t\t\t\t}\n \t\t\t\tif (value.idleTimeout === undefined) {\n-\t\t\t\t\tvalue.idleTimeout = 10000;\n+\t\t\t\t\tvalue.idleTimeout = 60000;\n \t\t\t\t}\n \t\t\t\tif (value.idleTimeoutForInitialStore === undefined) {\n \t\t\t\t\tvalue.idleTimeoutForInitialStore = 0;"
      },
      {
        "sha": "515fef9145abbe52798aebf333ee71abc8934a00",
        "filename": "lib/cache/IdleFileCachePlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/lib%2Fcache%2FIdleFileCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/lib%2Fcache%2FIdleFileCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FIdleFileCachePlugin.js?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -10,6 +10,11 @@ const Cache = require(\"../Cache\");\n /** @typedef {import(\"../Compiler\")} Compiler */\n \n class IdleFileCachePlugin {\n+\t/**\n+\t * @param {TODO} strategy cache strategy\n+\t * @param {number} idleTimeout timeout\n+\t * @param {number} idleTimeoutForInitialStore initial timeout\n+\t */\n \tconstructor(strategy, idleTimeout, idleTimeoutForInitialStore) {\n \t\tthis.strategy = strategy;\n \t\tthis.idleTimeout = idleTimeout;"
      },
      {
        "sha": "c201ad3595d508f8df0dda5e1449787fc4fa67ce",
        "filename": "lib/dependencies/HarmonyImportSpecifierDependency.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -151,7 +151,7 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\thash.update(ids.join());\n \t\tif (importedModule) {\n \t\t\tconst exportsInfo = moduleGraph.getExportsInfo(importedModule);\n-\t\t\thash.update(JSON.stringify(exportsInfo.getUsedName(ids)));\n+\t\t\thash.update(`${exportsInfo.getUsedName(ids)}`);\n \t\t\thash.update(\n \t\t\t\t(!importedModule.buildMeta || importedModule.buildMeta.exportsType) + \"\"\n \t\t\t);"
      },
      {
        "sha": "d53785c8ee8f5786821be3cd3f0c66f202c28076",
        "filename": "lib/util/deprecation.js",
        "status": "modified",
        "additions": 21,
        "deletions": 8,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/lib%2Futil%2Fdeprecation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/lib%2Futil%2Fdeprecation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Fdeprecation.js?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -103,19 +103,26 @@ exports.arrayToSetDeprecation = (set, name) => {\n \t\t\t);\n \t\t};\n \t}\n-\tconst createIndexGetter = index => () => {\n-\t\tdIndexer();\n-\t\tlet i = 0;\n-\t\tfor (const item of set) {\n-\t\t\tif (i++ === index) return item;\n-\t\t}\n-\t\treturn undefined;\n+\tconst createIndexGetter = index => {\n+\t\t/**\n+\t\t * @this {Set} a Set\n+\t\t * @returns {any} the value at this location\n+\t\t */\n+\t\tconst fn = function() {\n+\t\t\tdIndexer();\n+\t\t\tlet i = 0;\n+\t\t\tfor (const item of this) {\n+\t\t\t\tif (i++ === index) return item;\n+\t\t\t}\n+\t\t\treturn undefined;\n+\t\t};\n+\t\treturn fn;\n \t};\n \tlet indexerDefined = 0;\n \tObject.defineProperty(set, \"length\", {\n \t\tget() {\n \t\t\tdLength();\n-\t\t\tconst length = set.size;\n+\t\t\tconst length = this.size;\n \t\t\tfor (indexerDefined; indexerDefined < length; indexerDefined++) {\n \t\t\t\tObject.defineProperty(set, indexerDefined, {\n \t\t\t\t\tget: createIndexGetter(indexerDefined),\n@@ -136,3 +143,9 @@ exports.arrayToSetDeprecation = (set, name) => {\n \t});\n \tset[Symbol.isConcatSpreadable] = true;\n };\n+\n+exports.createArrayToSetDeprecationSet = name => {\n+\tclass SetDeprecatedArray extends Set {}\n+\texports.arrayToSetDeprecation(SetDeprecatedArray.prototype, name);\n+\treturn SetDeprecatedArray;\n+};"
      },
      {
        "sha": "c542ae2b7c1ab6b72d8bd581b68382e04be03a3c",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 12,
        "deletions": 12,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/a7128eebe7e72859af878c61a1600b26239d02df/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/a7128eebe7e72859af878c61a1600b26239d02df/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=a7128eebe7e72859af878c61a1600b26239d02df",
        "patch": "@@ -635,26 +635,26 @@ Entrypoint entry-1 = vendor-1.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"Hash: 693ccb8a292f7fba2b93ace0a26da1e6e490ac32\n+\"Hash: a8ea24656188002e975ebf2c3a14a9c21ce738e4\n Child\n-    Hash: 693ccb8a292f7fba2b93\n+    Hash: a8ea24656188002e975e\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                              Asset       Size  Chunks             Chunk Names\n-       app.fadc4a6a89f7a11c1f53.js   6.69 KiB   {143}  [emitted]  app\n+       app.dbb8d8669912e08c5eaf.js   6.69 KiB   {143}  [emitted]  app\n     vendor.44602d2bdfb280718742.js  616 bytes   {736}  [emitted]  vendor\n-    Entrypoint app = vendor.44602d2bdfb280718742.js app.fadc4a6a89f7a11c1f53.js\n+    Entrypoint app = vendor.44602d2bdfb280718742.js app.dbb8d8669912e08c5eaf.js\n     [117] ./entry-1.js + 2 modules 190 bytes {143} [built]\n     [381] ./constants.js 87 bytes {736} [built]\n         + 4 hidden modules\n Child\n-    Hash: ace0a26da1e6e490ac32\n+    Hash: bf2c3a14a9c21ce738e4\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                              Asset       Size  Chunks             Chunk Names\n-       app.8a243650f3a4dfeedf18.js    6.7 KiB   {143}  [emitted]  app\n+       app.478be2e4b188b35f9c8f.js    6.7 KiB   {143}  [emitted]  app\n     vendor.44602d2bdfb280718742.js  616 bytes   {736}  [emitted]  vendor\n-    Entrypoint app = vendor.44602d2bdfb280718742.js app.8a243650f3a4dfeedf18.js\n+    Entrypoint app = vendor.44602d2bdfb280718742.js app.478be2e4b188b35f9c8f.js\n     [381] ./constants.js 87 bytes {736} [built]\n     [655] ./entry-2.js + 2 modules 197 bytes {143} [built]\n         + 4 hidden modules\"\n@@ -2403,7 +2403,7 @@ Entrypoint e2 = runtime.js e2.js\"\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-bailouts 1`] = `\n-\"Hash: 431d5bd2cde98e3731dc\n+\"Hash: 051b6e7f72031465aa3c\n Time: Xms\n Built at: 1970-04-20 12:42:42\n Entrypoint index = index.js\n@@ -2480,7 +2480,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-issue-7428 1`] = `\n-\"Hash: 67981b7ea2a7d38af27d\n+\"Hash: 1deaea5b5f65fe2b197f\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset       Size  Chunks             Chunk Names\n@@ -2529,7 +2529,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-simple-unused 1`] = `\n-\"Hash: 7b9f1a4e46dff7ae7fb8\n+\"Hash: 35dd93bef98f6bb5d66f\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset      Size  Chunks             Chunk Names\n@@ -3561,7 +3561,7 @@ chunk {794} default/async-a.js (async-a) 134 bytes <{179}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n-\"Hash: df97d78a93b8d5887842\n+\"Hash: c92893fb658c0dd80f8d\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset     Size  Chunks             Chunk Names\n@@ -3622,7 +3622,7 @@ WARNING in Terser Plugin: Dropping unused function someUnRemoteUsedFunction5 [./\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"Hash: 45a1a031c66064a66e82\n+\"Hash: 9fe2c03d640e80a10bd4\n Time: Xms\n Built at: 1970-04-20 12:42:42\n                            Asset       Size   Chunks             Chunk Names"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9472",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9472/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9472/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9472/events",
    "html_url": "https://github.com/webpack/webpack/pull/9472",
    "id": 473197221,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzAxNDExMzQx",
    "number": 9472,
    "title": "Optimize performance of chunk graph generation",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-07-26T06:22:08Z",
    "updated_at": "2019-07-26T07:22:14Z",
    "closed_at": "2019-07-26T07:22:11Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9472",
      "html_url": "https://github.com/webpack/webpack/pull/9472",
      "diff_url": "https://github.com/webpack/webpack/pull/9472.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9472.patch",
      "merged_at": "2019-07-26T07:22:11Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nThis refactoring adds available modules tracking to the chunk graph generation. This allows to skip a lot of modules in async chunks when modules are already used in all parents. This improves performance when many chunks are used.\r\n\r\nRelated issues:\r\n\r\n#9460\r\n#8644\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nrefactoring, performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n`optimization.removeAvailableModules` is no longer recommended, as a similar optimization is included in the chunk graph building. It might still make sense when chunks are merged i. e. with the `splitChunks` and a constant `name`.\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9472/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "16e28a62a7666903c692a89ae16752e43d902bb9",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=81017d583a2e9a54dd3337e3558923179de694d2",
        "patch": "@@ -355,7 +355,11 @@ class Chunk {\n \t\treturn this._modules.getFromUnorderedCache(getModulesIdent);\n \t}\n \n-\tremove() {\n+\t/**\n+\t * @param {string=} reason reason why chunk is removed\n+\t * @returns {void}\n+\t */\n+\tremove(reason) {\n \t\t// cleanup modules\n \t\t// Array.from is used here to create a clone, because removeChunk modifies this._modules\n \t\tfor (const module of Array.from(this._modules)) {"
      },
      {
        "sha": "336d21a0478773f296ad3d2f6a9f3e6289941f7d",
        "filename": "lib/ChunkGroup.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FChunkGroup.js",
        "raw_url": "https://github.com/webpack/webpack/raw/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FChunkGroup.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGroup.js?ref=81017d583a2e9a54dd3337e3558923179de694d2",
        "patch": "@@ -345,7 +345,7 @@ class ChunkGroup {\n \t}\n \n \t/**\n-\t * @param {ModuleReason} reason reason for removing ChunkGroup\n+\t * @param {string=} reason reason for removing ChunkGroup\n \t * @returns {void}\n \t */\n \tremove(reason) {"
      },
      {
        "sha": "2ae5090276b1ac2100550ba8e2b1653537f94db0",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 5,
        "deletions": 467,
        "changes": 472,
        "blob_url": "https://github.com/webpack/webpack/blob/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=81017d583a2e9a54dd3337e3558923179de694d2",
        "patch": "@@ -27,17 +27,16 @@ const HotUpdateChunkTemplate = require(\"./HotUpdateChunkTemplate\");\n const ModuleTemplate = require(\"./ModuleTemplate\");\n const RuntimeTemplate = require(\"./RuntimeTemplate\");\n const ChunkRenderError = require(\"./ChunkRenderError\");\n-const AsyncDependencyToInitialChunkError = require(\"./AsyncDependencyToInitialChunkError\");\n const Stats = require(\"./Stats\");\n const Semaphore = require(\"./util/Semaphore\");\n const createHash = require(\"./util/createHash\");\n-const Queue = require(\"./util/Queue\");\n const SortableSet = require(\"./util/SortableSet\");\n const GraphHelpers = require(\"./GraphHelpers\");\n const ModuleDependency = require(\"./dependencies/ModuleDependency\");\n const compareLocations = require(\"./compareLocations\");\n const { Logger, LogType } = require(\"./logging/Logger\");\n const ErrorHelpers = require(\"./ErrorHelpers\");\n+const buildChunkGraph = require(\"./buildChunkGraph\");\n \n /** @typedef {import(\"./Module\")} Module */\n /** @typedef {import(\"./Compiler\")} Compiler */\n@@ -165,16 +164,6 @@ const byNameOrHash = (a, b) => {\n \treturn 0;\n };\n \n-/**\n- * @template T\n- * @param {Set<T>} a first set\n- * @param {Set<T>} b second set\n- * @returns {number} cmp\n- */\n-const bySetSize = (a, b) => {\n-\treturn a.size - b.size;\n-};\n-\n /**\n  * @param {DependenciesBlockVariable[]} variables DepBlock Variables to iterate over\n  * @param {DepBlockVarDependenciesCallback} fn callback to apply on iterated elements\n@@ -1295,7 +1284,10 @@ class Compilation extends Tapable {\n \n \t\t\tthis.assignDepth(module);\n \t\t}\n-\t\tthis.processDependenciesBlocksForChunkGroups(this.chunkGroups.slice());\n+\t\tbuildChunkGraph(\n+\t\t\tthis,\n+\t\t\t/** @type {Entrypoint[]} */ (this.chunkGroups.slice())\n+\t\t);\n \t\tthis.sortModules(this.modules);\n \t\tthis.hooks.afterChunks.call(this.chunks);\n \n@@ -1583,460 +1575,6 @@ class Compilation extends Tapable {\n \t\treturn this.hooks.dependencyReference.call(ref, dependency, module);\n \t}\n \n-\t/**\n-\t * This method creates the Chunk graph from the Module graph\n-\t * @private\n-\t * @param {TODO[]} inputChunkGroups chunk groups which are processed\n-\t * @returns {void}\n-\t */\n-\tprocessDependenciesBlocksForChunkGroups(inputChunkGroups) {\n-\t\t// Process is splitting into two parts:\n-\t\t// Part one traverse the module graph and builds a very basic chunks graph\n-\t\t//   in chunkDependencies.\n-\t\t// Part two traverse every possible way through the basic chunk graph and\n-\t\t//   tracks the available modules. While traversing it connects chunks with\n-\t\t//   eachother and Blocks with Chunks. It stops traversing when all modules\n-\t\t//   for a chunk are already available. So it doesn't connect unneeded chunks.\n-\n-\t\t/** @type {Map<ChunkGroup, {block: AsyncDependenciesBlock, chunkGroup: ChunkGroup, couldBeFiltered: boolean}[]>} */\n-\t\tconst chunkDependencies = new Map();\n-\t\tconst allCreatedChunkGroups = new Set();\n-\n-\t\t// PREPARE\n-\t\t/** @type {Map<DependenciesBlock, { modules: Module[], blocks: AsyncDependenciesBlock[]}>} */\n-\t\tconst blockInfoMap = new Map();\n-\n-\t\t/**\n-\t\t * @param {Dependency} d dependency to iterate over\n-\t\t * @returns {void}\n-\t\t */\n-\t\tconst iteratorDependency = d => {\n-\t\t\t// We skip Dependencies without Reference\n-\t\t\tconst ref = this.getDependencyReference(currentModule, d);\n-\t\t\tif (!ref) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\t// We skip Dependencies without Module pointer\n-\t\t\tconst refModule = ref.module;\n-\t\t\tif (!refModule) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\t// We skip weak Dependencies\n-\t\t\tif (ref.weak) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\tblockInfoModules.add(refModule);\n-\t\t};\n-\n-\t\t/**\n-\t\t * @param {AsyncDependenciesBlock} b blocks to prepare\n-\t\t * @returns {void}\n-\t\t */\n-\t\tconst iteratorBlockPrepare = b => {\n-\t\t\tblockInfoBlocks.push(b);\n-\t\t\tblockQueue.push(b);\n-\t\t};\n-\n-\t\t/** @type {Module} */\n-\t\tlet currentModule;\n-\t\t/** @type {DependenciesBlock} */\n-\t\tlet block;\n-\t\t/** @type {DependenciesBlock[]} */\n-\t\tlet blockQueue;\n-\t\t/** @type {Set<Module>} */\n-\t\tlet blockInfoModules;\n-\t\t/** @type {AsyncDependenciesBlock[]} */\n-\t\tlet blockInfoBlocks;\n-\n-\t\tfor (const module of this.modules) {\n-\t\t\tblockQueue = [module];\n-\t\t\tcurrentModule = module;\n-\t\t\twhile (blockQueue.length > 0) {\n-\t\t\t\tblock = blockQueue.pop();\n-\t\t\t\tblockInfoModules = new Set();\n-\t\t\t\tblockInfoBlocks = [];\n-\n-\t\t\t\tif (block.variables) {\n-\t\t\t\t\titerationBlockVariable(block.variables, iteratorDependency);\n-\t\t\t\t}\n-\n-\t\t\t\tif (block.dependencies) {\n-\t\t\t\t\titerationOfArrayCallback(block.dependencies, iteratorDependency);\n-\t\t\t\t}\n-\n-\t\t\t\tif (block.blocks) {\n-\t\t\t\t\titerationOfArrayCallback(block.blocks, iteratorBlockPrepare);\n-\t\t\t\t}\n-\n-\t\t\t\tconst blockInfo = {\n-\t\t\t\t\tmodules: Array.from(blockInfoModules),\n-\t\t\t\t\tblocks: blockInfoBlocks\n-\t\t\t\t};\n-\t\t\t\tblockInfoMap.set(block, blockInfo);\n-\t\t\t}\n-\t\t}\n-\n-\t\t// PART ONE\n-\n-\t\t/** @type {Map<ChunkGroup, { index: number, index2: number }>} */\n-\t\tconst chunkGroupCounters = new Map();\n-\t\tfor (const chunkGroup of inputChunkGroups) {\n-\t\t\tchunkGroupCounters.set(chunkGroup, { index: 0, index2: 0 });\n-\t\t}\n-\n-\t\tlet nextFreeModuleIndex = 0;\n-\t\tlet nextFreeModuleIndex2 = 0;\n-\n-\t\t/** @type {Map<DependenciesBlock, ChunkGroup>} */\n-\t\tconst blockChunkGroups = new Map();\n-\n-\t\t/** @type {Set<DependenciesBlock>} */\n-\t\tconst blocksWithNestedBlocks = new Set();\n-\n-\t\tconst ADD_AND_ENTER_MODULE = 0;\n-\t\tconst ENTER_MODULE = 1;\n-\t\tconst PROCESS_BLOCK = 2;\n-\t\tconst LEAVE_MODULE = 3;\n-\n-\t\t/**\n-\t\t * @typedef {Object} QueueItem\n-\t\t * @property {number} action\n-\t\t * @property {DependenciesBlock} block\n-\t\t * @property {Module} module\n-\t\t * @property {Chunk} chunk\n-\t\t * @property {ChunkGroup} chunkGroup\n-\t\t */\n-\n-\t\t/**\n-\t\t * @param {ChunkGroup} chunkGroup chunk group\n-\t\t * @returns {QueueItem} queue item\n-\t\t */\n-\t\tconst chunkGroupToQueueItem = chunkGroup => ({\n-\t\t\taction: ENTER_MODULE,\n-\t\t\tblock: chunkGroup.chunks[0].entryModule,\n-\t\t\tmodule: chunkGroup.chunks[0].entryModule,\n-\t\t\tchunk: chunkGroup.chunks[0],\n-\t\t\tchunkGroup\n-\t\t});\n-\n-\t\t// Start with the provided modules/chunks\n-\t\t/** @type {QueueItem[]} */\n-\t\tlet queue = inputChunkGroups.map(chunkGroupToQueueItem).reverse();\n-\t\t/** @type {QueueItem[]} */\n-\t\tlet queueDelayed = [];\n-\n-\t\t/** @type {Module} */\n-\t\tlet module;\n-\t\t/** @type {Chunk} */\n-\t\tlet chunk;\n-\t\t/** @type {ChunkGroup} */\n-\t\tlet chunkGroup;\n-\n-\t\t// For each async Block in graph\n-\t\t/**\n-\t\t * @param {AsyncDependenciesBlock} b iterating over each Async DepBlock\n-\t\t * @returns {void}\n-\t\t */\n-\t\tconst iteratorBlock = b => {\n-\t\t\t// 1. We create a chunk for this Block\n-\t\t\t// but only once (blockChunkGroups map)\n-\t\t\tlet c = blockChunkGroups.get(b);\n-\t\t\tif (c === undefined) {\n-\t\t\t\tc = this.namedChunkGroups.get(b.chunkName);\n-\t\t\t\tif (c && c.isInitial()) {\n-\t\t\t\t\tthis.errors.push(\n-\t\t\t\t\t\tnew AsyncDependencyToInitialChunkError(b.chunkName, module, b.loc)\n-\t\t\t\t\t);\n-\t\t\t\t\tc = chunkGroup;\n-\t\t\t\t} else {\n-\t\t\t\t\tc = this.addChunkInGroup(\n-\t\t\t\t\t\tb.groupOptions || b.chunkName,\n-\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\tb.loc,\n-\t\t\t\t\t\tb.request\n-\t\t\t\t\t);\n-\t\t\t\t\tchunkGroupCounters.set(c, { index: 0, index2: 0 });\n-\t\t\t\t\tblockChunkGroups.set(b, c);\n-\t\t\t\t\tallCreatedChunkGroups.add(c);\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\t// TODO webpack 5 remove addOptions check\n-\t\t\t\tif (c.addOptions) c.addOptions(b.groupOptions);\n-\t\t\t\tc.addOrigin(module, b.loc, b.request);\n-\t\t\t}\n-\n-\t\t\t// 2. We store the Block+Chunk mapping as dependency for the chunk\n-\t\t\tlet deps = chunkDependencies.get(chunkGroup);\n-\t\t\tif (!deps) chunkDependencies.set(chunkGroup, (deps = []));\n-\t\t\tdeps.push({\n-\t\t\t\tblock: b,\n-\t\t\t\tchunkGroup: c,\n-\t\t\t\tcouldBeFiltered: true\n-\t\t\t});\n-\n-\t\t\t// 3. We enqueue the DependenciesBlock for traversal\n-\t\t\tqueueDelayed.push({\n-\t\t\t\taction: PROCESS_BLOCK,\n-\t\t\t\tblock: b,\n-\t\t\t\tmodule: module,\n-\t\t\t\tchunk: c.chunks[0],\n-\t\t\t\tchunkGroup: c\n-\t\t\t});\n-\t\t};\n-\n-\t\t// Iterative traversal of the Module graph\n-\t\t// Recursive would be simpler to write but could result in Stack Overflows\n-\t\twhile (queue.length) {\n-\t\t\twhile (queue.length) {\n-\t\t\t\tconst queueItem = queue.pop();\n-\t\t\t\tmodule = queueItem.module;\n-\t\t\t\tblock = queueItem.block;\n-\t\t\t\tchunk = queueItem.chunk;\n-\t\t\t\tchunkGroup = queueItem.chunkGroup;\n-\n-\t\t\t\tswitch (queueItem.action) {\n-\t\t\t\t\tcase ADD_AND_ENTER_MODULE: {\n-\t\t\t\t\t\t// We connect Module and Chunk when not already done\n-\t\t\t\t\t\tif (chunk.addModule(module)) {\n-\t\t\t\t\t\t\tmodule.addChunk(chunk);\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t// already connected, skip it\n-\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\t// fallthrough\n-\t\t\t\t\tcase ENTER_MODULE: {\n-\t\t\t\t\t\tif (chunkGroup !== undefined) {\n-\t\t\t\t\t\t\tconst index = chunkGroup.getModuleIndex(module);\n-\t\t\t\t\t\t\tif (index === undefined) {\n-\t\t\t\t\t\t\t\tchunkGroup.setModuleIndex(\n-\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).index++\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tif (module.index === null) {\n-\t\t\t\t\t\t\tmodule.index = nextFreeModuleIndex++;\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tqueue.push({\n-\t\t\t\t\t\t\taction: LEAVE_MODULE,\n-\t\t\t\t\t\t\tblock,\n-\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\tchunkGroup\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t\t// fallthrough\n-\t\t\t\t\tcase PROCESS_BLOCK: {\n-\t\t\t\t\t\t// get prepared block info\n-\t\t\t\t\t\tconst blockInfo = blockInfoMap.get(block);\n-\n-\t\t\t\t\t\t// Traverse all referenced modules\n-\t\t\t\t\t\tfor (let i = blockInfo.modules.length - 1; i >= 0; i--) {\n-\t\t\t\t\t\t\tconst refModule = blockInfo.modules[i];\n-\t\t\t\t\t\t\tif (chunk.containsModule(refModule)) {\n-\t\t\t\t\t\t\t\t// skip early if already connected\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t// enqueue the add and enter to enter in the correct order\n-\t\t\t\t\t\t\t// this is relevant with circular dependencies\n-\t\t\t\t\t\t\tqueue.push({\n-\t\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n-\t\t\t\t\t\t\t\tblock: refModule,\n-\t\t\t\t\t\t\t\tmodule: refModule,\n-\t\t\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\t\tchunkGroup\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t// Traverse all Blocks\n-\t\t\t\t\t\titerationOfArrayCallback(blockInfo.blocks, iteratorBlock);\n-\n-\t\t\t\t\t\tif (blockInfo.blocks.length > 0 && module !== block) {\n-\t\t\t\t\t\t\tblocksWithNestedBlocks.add(block);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n-\t\t\t\t\tcase LEAVE_MODULE: {\n-\t\t\t\t\t\tif (chunkGroup !== undefined) {\n-\t\t\t\t\t\t\tconst index = chunkGroup.getModuleIndex2(module);\n-\t\t\t\t\t\t\tif (index === undefined) {\n-\t\t\t\t\t\t\t\tchunkGroup.setModuleIndex2(\n-\t\t\t\t\t\t\t\t\tmodule,\n-\t\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).index2++\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tif (module.index2 === null) {\n-\t\t\t\t\t\t\tmodule.index2 = nextFreeModuleIndex2++;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tconst tempQueue = queue;\n-\t\t\tqueue = queueDelayed.reverse();\n-\t\t\tqueueDelayed = tempQueue;\n-\t\t}\n-\n-\t\t// PART TWO\n-\t\t/** @type {Set<Module>} */\n-\t\tlet newAvailableModules;\n-\n-\t\t/**\n-\t\t * @typedef {Object} ChunkGroupInfo\n-\t\t * @property {Set<Module>} minAvailableModules current minimal set of modules available at this point\n-\t\t * @property {Set<Module>[]} availableModulesToBeMerged enqueued updates to the minimal set of available modules\n-\t\t */\n-\n-\t\t/** @type {Map<ChunkGroup, ChunkGroupInfo>} */\n-\t\tconst chunkGroupInfoMap = new Map();\n-\n-\t\t/** @type {Queue<ChunkGroup>} */\n-\t\tconst queue2 = new Queue(inputChunkGroups);\n-\n-\t\tfor (const chunkGroup of inputChunkGroups) {\n-\t\t\tchunkGroupInfoMap.set(chunkGroup, {\n-\t\t\t\tminAvailableModules: undefined,\n-\t\t\t\tavailableModulesToBeMerged: [new Set()]\n-\t\t\t});\n-\t\t}\n-\n-\t\t/**\n-\t\t * Helper function to check if all modules of a chunk are available\n-\t\t *\n-\t\t * @param {ChunkGroup} chunkGroup the chunkGroup to scan\n-\t\t * @param {Set<Module>} availableModules the comparitor set\n-\t\t * @returns {boolean} return true if all modules of a chunk are available\n-\t\t */\n-\t\tconst areModulesAvailable = (chunkGroup, availableModules) => {\n-\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\tfor (const module of chunk.modulesIterable) {\n-\t\t\t\t\tif (!availableModules.has(module)) return false;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn true;\n-\t\t};\n-\n-\t\t// For each edge in the basic chunk graph\n-\t\t/**\n-\t\t * @param {TODO} dep the dependency used for filtering\n-\t\t * @returns {boolean} used to filter \"edges\" (aka Dependencies) that were pointing\n-\t\t * to modules that are already available. Also filters circular dependencies in the chunks graph\n-\t\t */\n-\t\tconst filterFn = dep => {\n-\t\t\tconst depChunkGroup = dep.chunkGroup;\n-\t\t\tif (!dep.couldBeFiltered) return true;\n-\t\t\tif (blocksWithNestedBlocks.has(dep.block)) return true;\n-\t\t\tif (areModulesAvailable(depChunkGroup, newAvailableModules)) {\n-\t\t\t\treturn false; // break all modules are already available\n-\t\t\t}\n-\t\t\tdep.couldBeFiltered = false;\n-\t\t\treturn true;\n-\t\t};\n-\n-\t\t// Iterative traversing of the basic chunk graph\n-\t\twhile (queue2.length) {\n-\t\t\tchunkGroup = queue2.dequeue();\n-\t\t\tconst info = chunkGroupInfoMap.get(chunkGroup);\n-\t\t\tconst availableModulesToBeMerged = info.availableModulesToBeMerged;\n-\t\t\tlet minAvailableModules = info.minAvailableModules;\n-\n-\t\t\t// 1. Get minimal available modules\n-\t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n-\t\t\t// This step calculates the minimal available modules and skips traversal when\n-\t\t\t// the list didn't shrink.\n-\t\t\tavailableModulesToBeMerged.sort(bySetSize);\n-\t\t\tlet changed = false;\n-\t\t\tfor (const availableModules of availableModulesToBeMerged) {\n-\t\t\t\tif (minAvailableModules === undefined) {\n-\t\t\t\t\tminAvailableModules = new Set(availableModules);\n-\t\t\t\t\tinfo.minAvailableModules = minAvailableModules;\n-\t\t\t\t\tchanged = true;\n-\t\t\t\t} else {\n-\t\t\t\t\tfor (const m of minAvailableModules) {\n-\t\t\t\t\t\tif (!availableModules.has(m)) {\n-\t\t\t\t\t\t\tminAvailableModules.delete(m);\n-\t\t\t\t\t\t\tchanged = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tavailableModulesToBeMerged.length = 0;\n-\t\t\tif (!changed) continue;\n-\n-\t\t\t// 2. Get the edges at this point of the graph\n-\t\t\tconst deps = chunkDependencies.get(chunkGroup);\n-\t\t\tif (!deps) continue;\n-\t\t\tif (deps.length === 0) continue;\n-\n-\t\t\t// 3. Create a new Set of available modules at this points\n-\t\t\tnewAvailableModules = new Set(minAvailableModules);\n-\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\tfor (const m of chunk.modulesIterable) {\n-\t\t\t\t\tnewAvailableModules.add(m);\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t// 4. Foreach remaining edge\n-\t\t\tconst nextChunkGroups = new Set();\n-\t\t\tfor (let i = 0; i < deps.length; i++) {\n-\t\t\t\tconst dep = deps[i];\n-\n-\t\t\t\t// Filter inline, rather than creating a new array from `.filter()`\n-\t\t\t\tif (!filterFn(dep)) {\n-\t\t\t\t\tcontinue;\n-\t\t\t\t}\n-\t\t\t\tconst depChunkGroup = dep.chunkGroup;\n-\t\t\t\tconst depBlock = dep.block;\n-\n-\t\t\t\t// 5. Connect block with chunk\n-\t\t\t\tGraphHelpers.connectDependenciesBlockAndChunkGroup(\n-\t\t\t\t\tdepBlock,\n-\t\t\t\t\tdepChunkGroup\n-\t\t\t\t);\n-\n-\t\t\t\t// 6. Connect chunk with parent\n-\t\t\t\tGraphHelpers.connectChunkGroupParentAndChild(chunkGroup, depChunkGroup);\n-\n-\t\t\t\tnextChunkGroups.add(depChunkGroup);\n-\t\t\t}\n-\n-\t\t\t// 7. Enqueue further traversal\n-\t\t\tfor (const nextChunkGroup of nextChunkGroups) {\n-\t\t\t\tlet nextInfo = chunkGroupInfoMap.get(nextChunkGroup);\n-\t\t\t\tif (nextInfo === undefined) {\n-\t\t\t\t\tnextInfo = {\n-\t\t\t\t\t\tminAvailableModules: undefined,\n-\t\t\t\t\t\tavailableModulesToBeMerged: []\n-\t\t\t\t\t};\n-\t\t\t\t\tchunkGroupInfoMap.set(nextChunkGroup, nextInfo);\n-\t\t\t\t}\n-\t\t\t\tnextInfo.availableModulesToBeMerged.push(newAvailableModules);\n-\n-\t\t\t\t// As queue deduplicates enqueued items this makes sure that a ChunkGroup\n-\t\t\t\t// is not enqueued twice\n-\t\t\t\tqueue2.enqueue(nextChunkGroup);\n-\t\t\t}\n-\t\t}\n-\n-\t\t// Remove all unconnected chunk groups\n-\t\tfor (const chunkGroup of allCreatedChunkGroups) {\n-\t\t\tif (chunkGroup.getNumberOfParents() === 0) {\n-\t\t\t\tfor (const chunk of chunkGroup.chunks) {\n-\t\t\t\t\tconst idx = this.chunks.indexOf(chunk);\n-\t\t\t\t\tif (idx >= 0) this.chunks.splice(idx, 1);\n-\t\t\t\t\tchunk.remove(\"unconnected\");\n-\t\t\t\t}\n-\t\t\t\tchunkGroup.remove(\"unconnected\");\n-\t\t\t}\n-\t\t}\n-\t}\n-\n \t/**\n \t *\n \t * @param {Module} module module relationship for removal"
      },
      {
        "sha": "bef5565f62d067019ad0e1afa39f1f6c5cf86894",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=81017d583a2e9a54dd3337e3558923179de694d2",
        "patch": "@@ -196,7 +196,12 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\t);\n \n \t\tthis.set(\"optimization\", \"call\", value => Object.assign({}, value));\n-\t\tthis.set(\"optimization.removeAvailableModules\", true);\n+\t\t// TODO webpack 5: Disable by default in a modes\n+\t\tthis.set(\n+\t\t\t\"optimization.removeAvailableModules\",\n+\t\t\t\"make\",\n+\t\t\toptions => options.mode !== \"development\"\n+\t\t);\n \t\tthis.set(\"optimization.removeEmptyChunks\", true);\n \t\tthis.set(\"optimization.mergeDuplicateChunks\", true);\n \t\tthis.set(\"optimization.flagIncludedChunks\", \"make\", options =>"
      },
      {
        "sha": "bbd6128733e9daed4e0b4ebe3a1cbb459f0d6758",
        "filename": "lib/buildChunkGraph.js",
        "status": "added",
        "additions": 689,
        "deletions": 0,
        "changes": 689,
        "blob_url": "https://github.com/webpack/webpack/blob/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FbuildChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/81017d583a2e9a54dd3337e3558923179de694d2/lib%2FbuildChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FbuildChunkGraph.js?ref=81017d583a2e9a54dd3337e3558923179de694d2",
        "patch": "@@ -0,0 +1,689 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const AsyncDependencyToInitialChunkError = require(\"./AsyncDependencyToInitialChunkError\");\n+const GraphHelpers = require(\"./GraphHelpers\");\n+\n+/** @typedef {import(\"./AsyncDependenciesBlock\")} AsyncDependenciesBlock */\n+/** @typedef {import(\"./Chunk\")} Chunk */\n+/** @typedef {import(\"./ChunkGroup\")} ChunkGroup */\n+/** @typedef {import(\"./Compilation\")} Compilation */\n+/** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n+/** @typedef {import(\"./Dependency\")} Dependency */\n+/** @typedef {import(\"./Entrypoint\")} Entrypoint */\n+/** @typedef {import(\"./Module\")} Module */\n+\n+/**\n+ * @typedef {Object} QueueItem\n+ * @property {number} action\n+ * @property {DependenciesBlock} block\n+ * @property {Module} module\n+ * @property {Chunk} chunk\n+ * @property {ChunkGroup} chunkGroup\n+ */\n+\n+/**\n+ * @typedef {Object} ChunkGroupInfo\n+ * @property {Set<Module>} minAvailableModules current minimal set of modules available at this point\n+ * @property {boolean} minAvailableModulesOwned true, if minAvailableModules is owned and can be modified\n+ * @property {Set<Module>[]} availableModulesToBeMerged enqueued updates to the minimal set of available modules\n+ * @property {QueueItem[]} skippedItems queue items that were skipped because module is already available in parent chunks (need to reconsider when minAvailableModules is shrinking)\n+ * @property {Set<Module>} resultingAvailableModules set of modules available including modules from this chunk group\n+ */\n+\n+/**\n+ * @typedef {Object} ChunkGroupDep\n+ * @property {AsyncDependenciesBlock} block referencing block\n+ * @property {ChunkGroup} chunkGroup referenced chunk group\n+ */\n+\n+/**\n+ * @template T\n+ * @param {Set<T>} a first set\n+ * @param {Set<T>} b second set\n+ * @returns {number} cmp\n+ */\n+const bySetSize = (a, b) => {\n+\treturn b.size - a.size;\n+};\n+\n+/**\n+ * Extracts simplified info from the modules and their dependencies\n+ * @param {Compilation} compilation the compilation\n+ * @returns {Map<DependenciesBlock, { modules: Iterable<Module>, blocks: AsyncDependenciesBlock[]}>} the mapping block to modules and inner blocks\n+ */\n+const extraceBlockInfoMap = compilation => {\n+\t/** @type {Map<DependenciesBlock, { modules: Iterable<Module>, blocks: AsyncDependenciesBlock[]}>} */\n+\tconst blockInfoMap = new Map();\n+\n+\t/**\n+\t * @param {Dependency} d dependency to iterate over\n+\t * @returns {void}\n+\t */\n+\tconst iteratorDependency = d => {\n+\t\t// We skip Dependencies without Reference\n+\t\tconst ref = compilation.getDependencyReference(currentModule, d);\n+\t\tif (!ref) {\n+\t\t\treturn;\n+\t\t}\n+\t\t// We skip Dependencies without Module pointer\n+\t\tconst refModule = ref.module;\n+\t\tif (!refModule) {\n+\t\t\treturn;\n+\t\t}\n+\t\t// We skip weak Dependencies\n+\t\tif (ref.weak) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tblockInfoModules.add(refModule);\n+\t};\n+\n+\t/**\n+\t * @param {AsyncDependenciesBlock} b blocks to prepare\n+\t * @returns {void}\n+\t */\n+\tconst iteratorBlockPrepare = b => {\n+\t\tblockInfoBlocks.push(b);\n+\t\tblockQueue.push(b);\n+\t};\n+\n+\t/** @type {Module} */\n+\tlet currentModule;\n+\t/** @type {DependenciesBlock} */\n+\tlet block;\n+\t/** @type {DependenciesBlock[]} */\n+\tlet blockQueue;\n+\t/** @type {Set<Module>} */\n+\tlet blockInfoModules;\n+\t/** @type {AsyncDependenciesBlock[]} */\n+\tlet blockInfoBlocks;\n+\n+\tfor (const module of compilation.modules) {\n+\t\tblockQueue = [module];\n+\t\tcurrentModule = module;\n+\t\twhile (blockQueue.length > 0) {\n+\t\t\tblock = blockQueue.pop();\n+\t\t\tblockInfoModules = new Set();\n+\t\t\tblockInfoBlocks = [];\n+\n+\t\t\tif (block.variables) {\n+\t\t\t\tfor (const variable of block.variables) {\n+\t\t\t\t\tfor (const dep of variable.dependencies) iteratorDependency(dep);\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tif (block.dependencies) {\n+\t\t\t\tfor (const dep of block.dependencies) iteratorDependency(dep);\n+\t\t\t}\n+\n+\t\t\tif (block.blocks) {\n+\t\t\t\tfor (const b of block.blocks) iteratorBlockPrepare(b);\n+\t\t\t}\n+\n+\t\t\tconst blockInfo = {\n+\t\t\t\tmodules: blockInfoModules,\n+\t\t\t\tblocks: blockInfoBlocks\n+\t\t\t};\n+\t\t\tblockInfoMap.set(block, blockInfo);\n+\t\t}\n+\t}\n+\n+\treturn blockInfoMap;\n+};\n+\n+/**\n+ *\n+ * @param {Compilation} compilation the compilation\n+ * @param {Entrypoint[]} inputChunkGroups input groups\n+ * @param {Map<ChunkGroup, ChunkGroupInfo>} chunkGroupInfoMap mapping from chunk group to available modules\n+ * @param {Map<ChunkGroup, ChunkGroupDep[]>} chunkDependencies dependencies for chunk groups\n+ * @param {Set<DependenciesBlock>} blocksWithNestedBlocks flag for blocks that have nested blocks\n+ * @param {Set<ChunkGroup>} allCreatedChunkGroups filled with all chunk groups that are created here\n+ */\n+const visitModules = (\n+\tcompilation,\n+\tinputChunkGroups,\n+\tchunkGroupInfoMap,\n+\tchunkDependencies,\n+\tblocksWithNestedBlocks,\n+\tallCreatedChunkGroups\n+) => {\n+\tconst logger = compilation.getLogger(\"webpack.buildChunkGraph.visitModules\");\n+\tconst { namedChunkGroups } = compilation;\n+\n+\tlogger.time(\"prepare\");\n+\tconst blockInfoMap = extraceBlockInfoMap(compilation);\n+\n+\t/** @type {Map<ChunkGroup, { index: number, index2: number }>} */\n+\tconst chunkGroupCounters = new Map();\n+\tfor (const chunkGroup of inputChunkGroups) {\n+\t\tchunkGroupCounters.set(chunkGroup, {\n+\t\t\tindex: 0,\n+\t\t\tindex2: 0\n+\t\t});\n+\t}\n+\n+\tlet nextFreeModuleIndex = 0;\n+\tlet nextFreeModuleIndex2 = 0;\n+\n+\t/** @type {Map<DependenciesBlock, ChunkGroup>} */\n+\tconst blockChunkGroups = new Map();\n+\n+\tconst ADD_AND_ENTER_MODULE = 0;\n+\tconst ENTER_MODULE = 1;\n+\tconst PROCESS_BLOCK = 2;\n+\tconst LEAVE_MODULE = 3;\n+\n+\t/**\n+\t * @param {QueueItem[]} queue the queue array (will be mutated)\n+\t * @param {ChunkGroup} chunkGroup chunk group\n+\t * @returns {QueueItem[]} the queue array again\n+\t */\n+\tconst reduceChunkGroupToQueueItem = (queue, chunkGroup) => {\n+\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\tconst module = chunk.entryModule;\n+\t\t\tqueue.push({\n+\t\t\t\taction: ENTER_MODULE,\n+\t\t\t\tblock: module,\n+\t\t\t\tmodule,\n+\t\t\t\tchunk,\n+\t\t\t\tchunkGroup\n+\t\t\t});\n+\t\t}\n+\t\tchunkGroupInfoMap.set(chunkGroup, {\n+\t\t\tminAvailableModules: new Set(),\n+\t\t\tminAvailableModulesOwned: true,\n+\t\t\tavailableModulesToBeMerged: [],\n+\t\t\tskippedItems: [],\n+\t\t\tresultingAvailableModules: undefined\n+\t\t});\n+\t\treturn queue;\n+\t};\n+\n+\t// Start with the provided modules/chunks\n+\t/** @type {QueueItem[]} */\n+\tlet queue = inputChunkGroups\n+\t\t.reduce(reduceChunkGroupToQueueItem, [])\n+\t\t.reverse();\n+\t/** @type {Map<ChunkGroup, Set<ChunkGroup>>} */\n+\tconst queueConnect = new Map();\n+\t/** @type {Set<ChunkGroupInfo>} */\n+\tconst outdatedChunkGroupInfo = new Set();\n+\t/** @type {QueueItem[]} */\n+\tlet queueDelayed = [];\n+\n+\tlogger.timeEnd(\"prepare\");\n+\n+\t/** @type {Module} */\n+\tlet module;\n+\t/** @type {Chunk} */\n+\tlet chunk;\n+\t/** @type {ChunkGroup} */\n+\tlet chunkGroup;\n+\t/** @type {DependenciesBlock} */\n+\tlet block;\n+\t/** @type {Set<Module>} */\n+\tlet minAvailableModules;\n+\t/** @type {QueueItem[]} */\n+\tlet skippedItems;\n+\n+\t// For each async Block in graph\n+\t/**\n+\t * @param {AsyncDependenciesBlock} b iterating over each Async DepBlock\n+\t * @returns {void}\n+\t */\n+\tconst iteratorBlock = b => {\n+\t\t// 1. We create a chunk for this Block\n+\t\t// but only once (blockChunkGroups map)\n+\t\tlet c = blockChunkGroups.get(b);\n+\t\tif (c === undefined) {\n+\t\t\tc = namedChunkGroups.get(b.chunkName);\n+\t\t\tif (c && c.isInitial()) {\n+\t\t\t\tcompilation.errors.push(\n+\t\t\t\t\tnew AsyncDependencyToInitialChunkError(b.chunkName, module, b.loc)\n+\t\t\t\t);\n+\t\t\t\tc = chunkGroup;\n+\t\t\t} else {\n+\t\t\t\tc = compilation.addChunkInGroup(\n+\t\t\t\t\tb.groupOptions || b.chunkName,\n+\t\t\t\t\tmodule,\n+\t\t\t\t\tb.loc,\n+\t\t\t\t\tb.request\n+\t\t\t\t);\n+\t\t\t\tchunkGroupCounters.set(c, { index: 0, index2: 0 });\n+\t\t\t\tblockChunkGroups.set(b, c);\n+\t\t\t\tallCreatedChunkGroups.add(c);\n+\t\t\t}\n+\t\t} else {\n+\t\t\t// TODO webpack 5 remove addOptions check\n+\t\t\tif (c.addOptions) c.addOptions(b.groupOptions);\n+\t\t\tc.addOrigin(module, b.loc, b.request);\n+\t\t}\n+\n+\t\t// 2. We store the Block+Chunk mapping as dependency for the chunk\n+\t\tlet deps = chunkDependencies.get(chunkGroup);\n+\t\tif (!deps) chunkDependencies.set(chunkGroup, (deps = []));\n+\t\tdeps.push({\n+\t\t\tblock: b,\n+\t\t\tchunkGroup: c\n+\t\t});\n+\n+\t\t// 3. We create/update the chunk group info\n+\t\tlet connectList = queueConnect.get(chunkGroup);\n+\t\tif (connectList === undefined) {\n+\t\t\tconnectList = new Set();\n+\t\t\tqueueConnect.set(chunkGroup, connectList);\n+\t\t}\n+\t\tconnectList.add(c);\n+\n+\t\t// 4. We enqueue the DependenciesBlock for traversal\n+\t\tqueueDelayed.push({\n+\t\t\taction: PROCESS_BLOCK,\n+\t\t\tblock: b,\n+\t\t\tmodule: module,\n+\t\t\tchunk: c.chunks[0],\n+\t\t\tchunkGroup: c\n+\t\t});\n+\t};\n+\n+\t// Iterative traversal of the Module graph\n+\t// Recursive would be simpler to write but could result in Stack Overflows\n+\twhile (queue.length) {\n+\t\tlogger.time(\"visiting\");\n+\t\twhile (queue.length) {\n+\t\t\tconst queueItem = queue.pop();\n+\t\t\tmodule = queueItem.module;\n+\t\t\tblock = queueItem.block;\n+\t\t\tchunk = queueItem.chunk;\n+\t\t\tif (chunkGroup !== queueItem.chunkGroup) {\n+\t\t\t\tchunkGroup = queueItem.chunkGroup;\n+\t\t\t\tconst chunkGroupInfo = chunkGroupInfoMap.get(chunkGroup);\n+\t\t\t\tminAvailableModules = chunkGroupInfo.minAvailableModules;\n+\t\t\t\tskippedItems = chunkGroupInfo.skippedItems;\n+\t\t\t}\n+\n+\t\t\tswitch (queueItem.action) {\n+\t\t\t\tcase ADD_AND_ENTER_MODULE: {\n+\t\t\t\t\tif (minAvailableModules.has(module)) {\n+\t\t\t\t\t\t// already in parent chunks\n+\t\t\t\t\t\t// skip it for now, but enqueue for rechecking when minAvailableModules shrinks\n+\t\t\t\t\t\tskippedItems.push(queueItem);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t\t// We connect Module and Chunk when not already done\n+\t\t\t\t\tif (chunk.addModule(module)) {\n+\t\t\t\t\t\tmodule.addChunk(chunk);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\t// already connected, skip it\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\t// fallthrough\n+\t\t\t\tcase ENTER_MODULE: {\n+\t\t\t\t\tif (chunkGroup !== undefined) {\n+\t\t\t\t\t\tconst index = chunkGroup.getModuleIndex(module);\n+\t\t\t\t\t\tif (index === undefined) {\n+\t\t\t\t\t\t\tchunkGroup.setModuleIndex(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).index++\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif (module.index === null) {\n+\t\t\t\t\t\tmodule.index = nextFreeModuleIndex++;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tqueue.push({\n+\t\t\t\t\t\taction: LEAVE_MODULE,\n+\t\t\t\t\t\tblock,\n+\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\tchunkGroup\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\t// fallthrough\n+\t\t\t\tcase PROCESS_BLOCK: {\n+\t\t\t\t\t// get prepared block info\n+\t\t\t\t\tconst blockInfo = blockInfoMap.get(block);\n+\n+\t\t\t\t\t// Buffer items because order need to be reverse to get indicies correct\n+\t\t\t\t\tconst skipBuffer = [];\n+\t\t\t\t\tconst queueBuffer = [];\n+\t\t\t\t\t// Traverse all referenced modules\n+\t\t\t\t\tfor (const refModule of blockInfo.modules) {\n+\t\t\t\t\t\tif (chunk.containsModule(refModule)) {\n+\t\t\t\t\t\t\t// skip early if already connected\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (minAvailableModules.has(refModule)) {\n+\t\t\t\t\t\t\t// already in parent chunks, skip it for now\n+\t\t\t\t\t\t\tskipBuffer.push({\n+\t\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n+\t\t\t\t\t\t\t\tblock: refModule,\n+\t\t\t\t\t\t\t\tmodule: refModule,\n+\t\t\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\t\t\tchunkGroup\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t// enqueue the add and enter to enter in the correct order\n+\t\t\t\t\t\t// this is relevant with circular dependencies\n+\t\t\t\t\t\tqueueBuffer.push({\n+\t\t\t\t\t\t\taction: ADD_AND_ENTER_MODULE,\n+\t\t\t\t\t\t\tblock: refModule,\n+\t\t\t\t\t\t\tmodule: refModule,\n+\t\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\t\tchunkGroup\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n+\t\t\t\t\t// Add buffered items in reversed order\n+\t\t\t\t\tfor (let i = skipBuffer.length - 1; i >= 0; i--) {\n+\t\t\t\t\t\tskippedItems.push(skipBuffer[i]);\n+\t\t\t\t\t}\n+\t\t\t\t\tfor (let i = queueBuffer.length - 1; i >= 0; i--) {\n+\t\t\t\t\t\tqueue.push(queueBuffer[i]);\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t// Traverse all Blocks\n+\t\t\t\t\tfor (const block of blockInfo.blocks) iteratorBlock(block);\n+\n+\t\t\t\t\tif (blockInfo.blocks.length > 0 && module !== block) {\n+\t\t\t\t\t\tblocksWithNestedBlocks.add(block);\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tcase LEAVE_MODULE: {\n+\t\t\t\t\tif (chunkGroup !== undefined) {\n+\t\t\t\t\t\tconst index = chunkGroup.getModuleIndex2(module);\n+\t\t\t\t\t\tif (index === undefined) {\n+\t\t\t\t\t\t\tchunkGroup.setModuleIndex2(\n+\t\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\t\tchunkGroupCounters.get(chunkGroup).index2++\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif (module.index2 === null) {\n+\t\t\t\t\t\tmodule.index2 = nextFreeModuleIndex2++;\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tlogger.timeEnd(\"visiting\");\n+\n+\t\tif (queueConnect.size > 0) {\n+\t\t\tlogger.time(\"calculating available modules\");\n+\n+\t\t\t// Figure out new parents for chunk groups\n+\t\t\t// to get new available modules for these children\n+\t\t\tfor (const [chunkGroup, targets] of queueConnect) {\n+\t\t\t\tconst info = chunkGroupInfoMap.get(chunkGroup);\n+\t\t\t\tlet minAvailableModules = info.minAvailableModules;\n+\n+\t\t\t\t// 1. Create a new Set of available modules at this points\n+\t\t\t\tconst resultingAvailableModules = new Set(minAvailableModules);\n+\t\t\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\t\t\tfor (const m of chunk.modulesIterable) {\n+\t\t\t\t\t\tresultingAvailableModules.add(m);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tinfo.resultingAvailableModules = resultingAvailableModules;\n+\n+\t\t\t\t// 2. Update chunk group info\n+\t\t\t\tfor (const target of targets) {\n+\t\t\t\t\tlet chunkGroupInfo = chunkGroupInfoMap.get(target);\n+\t\t\t\t\tif (chunkGroupInfo === undefined) {\n+\t\t\t\t\t\tchunkGroupInfo = {\n+\t\t\t\t\t\t\tminAvailableModules: undefined,\n+\t\t\t\t\t\t\tminAvailableModulesOwned: undefined,\n+\t\t\t\t\t\t\tavailableModulesToBeMerged: [],\n+\t\t\t\t\t\t\tskippedItems: [],\n+\t\t\t\t\t\t\tresultingAvailableModules: undefined\n+\t\t\t\t\t\t};\n+\t\t\t\t\t\tchunkGroupInfoMap.set(target, chunkGroupInfo);\n+\t\t\t\t\t}\n+\t\t\t\t\tchunkGroupInfo.availableModulesToBeMerged.push(\n+\t\t\t\t\t\tresultingAvailableModules\n+\t\t\t\t\t);\n+\t\t\t\t\toutdatedChunkGroupInfo.add(chunkGroupInfo);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tqueueConnect.clear();\n+\t\t\tlogger.timeEnd(\"calculating available modules\");\n+\n+\t\t\tif (outdatedChunkGroupInfo.size > 0) {\n+\t\t\t\tlogger.time(\"merging available modules\");\n+\t\t\t\t// Execute the merge\n+\t\t\t\tfor (const info of outdatedChunkGroupInfo) {\n+\t\t\t\t\tconst availableModulesToBeMerged = info.availableModulesToBeMerged;\n+\t\t\t\t\tlet minAvailableModules = info.minAvailableModules;\n+\n+\t\t\t\t\t// 1. Get minimal available modules\n+\t\t\t\t\t// It doesn't make sense to traverse a chunk again with more available modules.\n+\t\t\t\t\t// This step calculates the minimal available modules and skips traversal when\n+\t\t\t\t\t// the list didn't shrink.\n+\t\t\t\t\tif (availableModulesToBeMerged.length > 1) {\n+\t\t\t\t\t\tavailableModulesToBeMerged.sort(bySetSize);\n+\t\t\t\t\t}\n+\t\t\t\t\tlet changed = false;\n+\t\t\t\t\tfor (const availableModules of availableModulesToBeMerged) {\n+\t\t\t\t\t\tif (minAvailableModules === undefined) {\n+\t\t\t\t\t\t\tminAvailableModules = availableModules;\n+\t\t\t\t\t\t\tinfo.minAvailableModules = minAvailableModules;\n+\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = false;\n+\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tif (info.minAvailableModulesOwned) {\n+\t\t\t\t\t\t\t\t// We own it and can modify it\n+\t\t\t\t\t\t\t\tfor (const m of minAvailableModules) {\n+\t\t\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n+\t\t\t\t\t\t\t\t\t\tminAvailableModules.delete(m);\n+\t\t\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tfor (const m of minAvailableModules) {\n+\t\t\t\t\t\t\t\t\tif (!availableModules.has(m)) {\n+\t\t\t\t\t\t\t\t\t\t// minAvailableModules need to be modified\n+\t\t\t\t\t\t\t\t\t\t// but we don't own it\n+\t\t\t\t\t\t\t\t\t\t// construct a new Set as intersection of minAvailableModules and availableModules\n+\t\t\t\t\t\t\t\t\t\t/** @type {Set<Module>} */\n+\t\t\t\t\t\t\t\t\t\tconst newSet = new Set();\n+\t\t\t\t\t\t\t\t\t\tconst iterator = minAvailableModules[Symbol.iterator]();\n+\t\t\t\t\t\t\t\t\t\t/** @type {IteratorResult<Module>} */\n+\t\t\t\t\t\t\t\t\t\tlet it;\n+\t\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\t\t\tif (module === m) break;\n+\t\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\twhile (!(it = iterator.next()).done) {\n+\t\t\t\t\t\t\t\t\t\t\tconst module = it.value;\n+\t\t\t\t\t\t\t\t\t\t\tif (availableModules.has(module)) {\n+\t\t\t\t\t\t\t\t\t\t\t\tnewSet.add(module);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\tminAvailableModules = newSet;\n+\t\t\t\t\t\t\t\t\t\tinfo.minAvailableModulesOwned = true;\n+\t\t\t\t\t\t\t\t\t\tinfo.minAvailableModules = newSet;\n+\t\t\t\t\t\t\t\t\t\tchanged = true;\n+\t\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tavailableModulesToBeMerged.length = 0;\n+\t\t\t\t\tif (!changed) continue;\n+\n+\t\t\t\t\t// 2. Reconsider skipped items\n+\t\t\t\t\tfor (const queueItem of info.skippedItems) {\n+\t\t\t\t\t\tqueue.push(queueItem);\n+\t\t\t\t\t}\n+\t\t\t\t\tinfo.skippedItems.length = 0;\n+\t\t\t\t}\n+\t\t\t\toutdatedChunkGroupInfo.clear();\n+\t\t\t\tlogger.timeEnd(\"merging available modules\");\n+\t\t\t}\n+\t\t}\n+\n+\t\t// Run queueDelayed when all items of the queue are processed\n+\t\t// This is important to get the global indicing correct\n+\t\t// Async blocks should be processed after all sync blocks are processed\n+\t\tif (queue.length === 0) {\n+\t\t\tconst tempQueue = queue;\n+\t\t\tqueue = queueDelayed.reverse();\n+\t\t\tqueueDelayed = tempQueue;\n+\t\t}\n+\t}\n+};\n+\n+/**\n+ *\n+ * @param {Set<DependenciesBlock>} blocksWithNestedBlocks flag for blocks that have nested blocks\n+ * @param {Map<ChunkGroup, ChunkGroupDep[]>} chunkDependencies dependencies for chunk groups\n+ * @param {Map<ChunkGroup, ChunkGroupInfo>} chunkGroupInfoMap mapping from chunk group to available modules\n+ */\n+const connectChunkGroups = (\n+\tblocksWithNestedBlocks,\n+\tchunkDependencies,\n+\tchunkGroupInfoMap\n+) => {\n+\t/** @type {Set<Module>} */\n+\tlet resultingAvailableModules;\n+\n+\t/**\n+\t * Helper function to check if all modules of a chunk are available\n+\t *\n+\t * @param {ChunkGroup} chunkGroup the chunkGroup to scan\n+\t * @param {Set<Module>} availableModules the comparitor set\n+\t * @returns {boolean} return true if all modules of a chunk are available\n+\t */\n+\tconst areModulesAvailable = (chunkGroup, availableModules) => {\n+\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\tfor (const module of chunk.modulesIterable) {\n+\t\t\t\tif (!availableModules.has(module)) return false;\n+\t\t\t}\n+\t\t}\n+\t\treturn true;\n+\t};\n+\n+\t// For each edge in the basic chunk graph\n+\t/**\n+\t * @param {ChunkGroupDep} dep the dependency used for filtering\n+\t * @returns {boolean} used to filter \"edges\" (aka Dependencies) that were pointing\n+\t * to modules that are already available. Also filters circular dependencies in the chunks graph\n+\t */\n+\tconst filterFn = dep => {\n+\t\tconst depChunkGroup = dep.chunkGroup;\n+\t\t// TODO is this needed?\n+\t\tif (blocksWithNestedBlocks.has(dep.block)) return true;\n+\t\tif (areModulesAvailable(depChunkGroup, resultingAvailableModules)) {\n+\t\t\treturn false; // break all modules are already available\n+\t\t}\n+\t\treturn true;\n+\t};\n+\n+\t// For all deps, check if chunk groups need to be connected\n+\tfor (const [chunkGroup, deps] of chunkDependencies) {\n+\t\tif (deps.length === 0) continue;\n+\n+\t\t// 1. Get info from chunk group info map\n+\t\tconst info = chunkGroupInfoMap.get(chunkGroup);\n+\t\tresultingAvailableModules = info.resultingAvailableModules;\n+\n+\t\t// 2. Foreach edge\n+\t\tfor (let i = 0; i < deps.length; i++) {\n+\t\t\tconst dep = deps[i];\n+\n+\t\t\t// Filter inline, rather than creating a new array from `.filter()`\n+\t\t\t// TODO check if inlining filterFn makes sense here\n+\t\t\tif (!filterFn(dep)) {\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t\tconst depChunkGroup = dep.chunkGroup;\n+\t\t\tconst depBlock = dep.block;\n+\n+\t\t\t// 5. Connect block with chunk\n+\t\t\tGraphHelpers.connectDependenciesBlockAndChunkGroup(\n+\t\t\t\tdepBlock,\n+\t\t\t\tdepChunkGroup\n+\t\t\t);\n+\n+\t\t\t// 6. Connect chunk with parent\n+\t\t\tGraphHelpers.connectChunkGroupParentAndChild(chunkGroup, depChunkGroup);\n+\t\t}\n+\t}\n+};\n+\n+/**\n+ * Remove all unconnected chunk groups\n+ * @param {Compilation} compilation the compilation\n+ * @param {Iterable<ChunkGroup>} allCreatedChunkGroups all chunk groups that where created before\n+ */\n+const cleanupUnconnectedGroups = (compilation, allCreatedChunkGroups) => {\n+\tfor (const chunkGroup of allCreatedChunkGroups) {\n+\t\tif (chunkGroup.getNumberOfParents() === 0) {\n+\t\t\tfor (const chunk of chunkGroup.chunks) {\n+\t\t\t\tconst idx = compilation.chunks.indexOf(chunk);\n+\t\t\t\tif (idx >= 0) compilation.chunks.splice(idx, 1);\n+\t\t\t\tchunk.remove(\"unconnected\");\n+\t\t\t}\n+\t\t\tchunkGroup.remove(\"unconnected\");\n+\t\t}\n+\t}\n+};\n+\n+/**\n+ * This method creates the Chunk graph from the Module graph\n+ * @param {Compilation} compilation the compilation\n+ * @param {Entrypoint[]} inputChunkGroups chunk groups which are processed\n+ * @returns {void}\n+ */\n+const buildChunkGraph = (compilation, inputChunkGroups) => {\n+\t// SHARED STATE\n+\n+\t/** @type {Map<ChunkGroup, ChunkGroupDep[]>} */\n+\tconst chunkDependencies = new Map();\n+\n+\t/** @type {Set<ChunkGroup>} */\n+\tconst allCreatedChunkGroups = new Set();\n+\n+\t/** @type {Map<ChunkGroup, ChunkGroupInfo>} */\n+\tconst chunkGroupInfoMap = new Map();\n+\n+\t/** @type {Set<DependenciesBlock>} */\n+\tconst blocksWithNestedBlocks = new Set();\n+\n+\t// PART ONE\n+\n+\tvisitModules(\n+\t\tcompilation,\n+\t\tinputChunkGroups,\n+\t\tchunkGroupInfoMap,\n+\t\tchunkDependencies,\n+\t\tblocksWithNestedBlocks,\n+\t\tallCreatedChunkGroups\n+\t);\n+\n+\t// PART TWO\n+\n+\tconnectChunkGroups(\n+\t\tblocksWithNestedBlocks,\n+\t\tchunkDependencies,\n+\t\tchunkGroupInfoMap\n+\t);\n+\n+\t// Cleaup work\n+\n+\tcleanupUnconnectedGroups(compilation, allCreatedChunkGroups);\n+};\n+\n+module.exports = buildChunkGraph;"
      },
      {
        "sha": "1fa6a3199baa2dfa38c27db3f82da31dde43afdb",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/81017d583a2e9a54dd3337e3558923179de694d2/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/81017d583a2e9a54dd3337e3558923179de694d2/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=81017d583a2e9a54dd3337e3558923179de694d2",
        "patch": "@@ -2132,7 +2132,17 @@ Group\n   Log\n   Collaped group\n     Log inside collapsed group\n-+ 1 hidden lines\"\n++ 1 hidden lines\n+\n+LOG from webpack.buildChunkGraph.visitModules\n+<t> prepare: Xms\n+<t> visiting: Xms\n+<t> calculating available modules: Xms\n+<t> merging available modules: Xms\n+<t> visiting: Xms\n+<t> calculating available modules: Xms\n+<t> merging available modules: Xms\n+<t> visiting: Xms\"\n `;\n \n exports[`StatsTestCases should print correct stats for resolve-plugin-context 1`] = `"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9972",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9972/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9972/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9972/events",
    "html_url": "https://github.com/webpack/webpack/pull/9972",
    "id": 522992044,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzQxMDgzOTYy",
    "number": 9972,
    "title": "Bugfixes from beta feedback",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-11-14T17:09:34Z",
    "updated_at": "2019-11-14T21:57:01Z",
    "closed_at": "2019-11-14T21:06:14Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9972",
      "html_url": "https://github.com/webpack/webpack/pull/9972",
      "diff_url": "https://github.com/webpack/webpack/pull/9972.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9972.patch",
      "merged_at": "2019-11-14T21:06:14Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* fixes non-deterministic order of entry modules in hashing\r\n* fixed snapshotting of directories\r\n* improve snapshot size of missingDependencies\r\n* fix logging of FileSystemInfo for multiple different invalidation reasons\r\n* include runtime modules in chunk hash\r\n* move restored data for provided exports in new class\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix, performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9972/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9972/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "b95ba882d6964b80da0404f7ac9f50e617641c61",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=e9f8e63593c79a0cbc76ce880a2d7c585565421f",
        "patch": "@@ -476,7 +476,7 @@ class Chunk {\n \t\t)) {\n \t\t\thash.update(chunkGraph.getModuleHash(m));\n \t\t}\n-\t\tconst entryModules = chunkGraph.getChunkEntryModulesWithChunkGroupIterable(\n+\t\tconst entryModules = chunkGraph.getOrderedChunkEntryModulesWithChunkGroup(\n \t\t\tthis\n \t\t);\n \t\tfor (const [m, chunkGroup] of entryModules) {"
      },
      {
        "sha": "ffc599bd420a085f2e0a5ec60a19e7ca5945fb13",
        "filename": "lib/ChunkGraph.js",
        "status": "modified",
        "additions": 20,
        "deletions": 2,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FChunkGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FChunkGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGraph.js?ref=e9f8e63593c79a0cbc76ce880a2d7c585565421f",
        "patch": "@@ -962,8 +962,15 @@ class ChunkGraph {\n \t\tconst array = Array.from(cgc.runtimeModules);\n \t\tarray.sort(\n \t\t\tconcatComparators(\n-\t\t\t\tcompareSelect(r => r.stage, compareIds),\n-\t\t\t\tcompareSelect(r => this.getModuleId(r), compareIds)\n+\t\t\t\tcompareSelect(\n+\t\t\t\t\t/**\n+\t\t\t\t\t * @param {RuntimeModule} r runtime module\n+\t\t\t\t\t * @returns {number=} stage\n+\t\t\t\t\t */\n+\t\t\t\t\tr => r.stage,\n+\t\t\t\t\tcompareIds\n+\t\t\t\t),\n+\t\t\t\tcompareModulesByIdentifier\n \t\t\t)\n \t\t);\n \t\treturn array;\n@@ -980,6 +987,17 @@ class ChunkGraph {\n \t\treturn cgc.entryModules;\n \t}\n \n+\t/**\n+\t * @param {Chunk} chunk the chunk\n+\t * @returns {EntryModuleWithChunkGroup[]} array of modules (ordered)\n+\t */\n+\tgetOrderedChunkEntryModulesWithChunkGroup(chunk) {\n+\t\tconst cgc = this._getChunkGraphChunk(chunk);\n+\t\tconst array = Array.from(cgc.entryModules);\n+\t\tarray.sort(compareSelect(p => p[0], compareModulesByIdentifier));\n+\t\treturn array;\n+\t}\n+\n \t/**\n \t * @param {AsyncDependenciesBlock} depBlock the async block\n \t * @returns {ChunkGroup} the chunk group"
      },
      {
        "sha": "daca10817a224cd38519010993d3883342cc853f",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 59,
        "deletions": 34,
        "changes": 93,
        "blob_url": "https://github.com/webpack/webpack/blob/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=e9f8e63593c79a0cbc76ce880a2d7c585565421f",
        "patch": "@@ -50,7 +50,7 @@ const INVALID = Symbol(\"invalid\");\n  * @property {Map<string, string | \"error\">=} fileHashes\n  * @property {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">=} contextTimestamps\n  * @property {Map<string, string | \"error\">=} contextHashes\n- * @property {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">=} missingTimestamps\n+ * @property {Map<string, boolean | \"ignore\" | \"error\">=} missingExistance\n  * @property {Map<string, string | \"error\">=} managedItemInfo\n  */\n \n@@ -178,6 +178,15 @@ const getManagedItem = (managedPath, path) => {\n \treturn path.slice(0, i);\n };\n \n+/**\n+ * @param {FileSystemInfoEntry | \"ignore\"} entry file system info entry\n+ * @returns {boolean | \"ignore\"} existance flag\n+ */\n+const toExistance = entry => {\n+\tif (entry === \"ignore\") return entry;\n+\treturn Boolean(entry);\n+};\n+\n /**\n  * Used to access information about the filesystem in a cached way\n  */\n@@ -246,10 +255,11 @@ class FileSystemInfo {\n \t\t);\n \t}\n \n-\t_log(path, reason) {\n-\t\tif (this._loggedPaths.has(path)) return;\n-\t\tthis._loggedPaths.add(path);\n-\t\tthis.logger.debug(`${path} invalidated because ${reason}`);\n+\t_log(path, reason, ...args) {\n+\t\tconst key = path + reason;\n+\t\tif (this._loggedPaths.has(key)) return;\n+\t\tthis._loggedPaths.add(key);\n+\t\tthis.logger.debug(`${path} invalidated because ${reason}`, ...args);\n \t\tif (--this._remainingLogs === 0) {\n \t\t\tthis.logger.debug(\n \t\t\t\t\"Logging limit has been reached and no futher logging will be emitted by FileSystemInfo\"\n@@ -656,6 +666,7 @@ class FileSystemInfo {\n \t * @param {Iterable<string>} directories all directories\n \t * @param {Iterable<string>} missing all missing files or directories\n \t * @param {Object} options options object (for future extensions)\n+\t * @param {boolean=} options.hash should use hash to snapshot\n \t * @param {function(WebpackError=, Snapshot=): void} callback callback function\n \t * @returns {void}\n \t */\n@@ -668,8 +679,8 @@ class FileSystemInfo {\n \t\tconst contextTimestamps = new Map();\n \t\t/** @type {Map<string, string | \"error\">} */\n \t\tconst contextHashes = new Map();\n-\t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">} */\n-\t\tconst missingTimestamps = new Map();\n+\t\t/** @type {Map<string, boolean | \"ignore\" | \"error\">} */\n+\t\tconst missingExistance = new Map();\n \t\t/** @type {Map<string, string | \"error\">} */\n \t\tconst managedItemInfo = new Map();\n \n@@ -685,8 +696,8 @@ class FileSystemInfo {\n \t\t\t\tif (contextTimestamps.size !== 0)\n \t\t\t\t\tsnapshot.contextTimestamps = contextTimestamps;\n \t\t\t\tif (contextHashes.size !== 0) snapshot.contextHashes = contextHashes;\n-\t\t\t\tif (missingTimestamps.size !== 0)\n-\t\t\t\t\tsnapshot.missingTimestamps = missingTimestamps;\n+\t\t\t\tif (missingExistance.size !== 0)\n+\t\t\t\t\tsnapshot.missingExistance = missingExistance;\n \t\t\t\tif (managedItemInfo.size !== 0)\n \t\t\t\t\tsnapshot.managedItemInfo = managedItemInfo;\n \t\t\t\tthis._snapshotCache.set(snapshot, true);\n@@ -861,7 +872,7 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tmissingTimestamps.set(path, cache);\n+\t\t\t\t\tmissingExistance.set(path, toExistance(cache));\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n@@ -871,9 +882,9 @@ class FileSystemInfo {\n \t\t\t\t\t\t\t\t\t`Error snapshotting missing timestamp of ${path}: ${err}`\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tmissingTimestamps.set(path, \"error\");\n+\t\t\t\t\t\t\tmissingExistance.set(path, \"error\");\n \t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tmissingTimestamps.set(path, entry);\n+\t\t\t\t\t\t\tmissingExistance.set(path, toExistance(entry));\n \t\t\t\t\t\t}\n \t\t\t\t\t\tjobDone();\n \t\t\t\t\t});\n@@ -940,10 +951,10 @@ class FileSystemInfo {\n \t\t\t\tsnapshot2.contextHashes\n \t\t\t);\n \t\t}\n-\t\tif (snapshot1.missingTimestamps || snapshot2.missingTimestamps) {\n-\t\t\tsnapshot.missingTimestamps = mergeMaps(\n-\t\t\t\tsnapshot1.missingTimestamps,\n-\t\t\t\tsnapshot2.missingTimestamps\n+\t\tif (snapshot1.missingExistance || snapshot2.missingExistance) {\n+\t\t\tsnapshot.missingExistance = mergeMaps(\n+\t\t\t\tsnapshot1.missingExistance,\n+\t\t\t\tsnapshot2.missingExistance\n \t\t\t);\n \t\t}\n \t\tif (snapshot1.managedItemInfo || snapshot2.managedItemInfo) {\n@@ -983,7 +994,7 @@ class FileSystemInfo {\n \t\t\tfileHashes,\n \t\t\tcontextTimestamps,\n \t\t\tcontextHashes,\n-\t\t\tmissingTimestamps,\n+\t\t\tmissingExistance,\n \t\t\tmanagedItemInfo\n \t\t} = snapshot;\n \t\tlet jobs = 1;\n@@ -1003,7 +1014,7 @@ class FileSystemInfo {\n \t\t};\n \t\tconst invalidWithError = (path, err) => {\n \t\t\tif (this._remainingLogs > 0) {\n-\t\t\t\tthis._log(path, `error occured: ${err}`);\n+\t\t\t\tthis._log(path, `error occured: %s`, err);\n \t\t\t}\n \t\t\tinvalid();\n \t\t};\n@@ -1025,16 +1036,16 @@ class FileSystemInfo {\n \t\t\tif (current !== snap) {\n \t\t\t\t// If hash differ it's invalid\n \t\t\t\tif (this._remainingLogs > 0) {\n-\t\t\t\t\tthis._log(path, `hashes differ (${current} != ${snap})`);\n+\t\t\t\t\tthis._log(path, `hashes differ (%s != %s)`, current, snap);\n \t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n \t\t\treturn true;\n \t\t};\n \t\t/**\n \t\t * @param {string} path file path\n-\t\t * @param {FileSystemInfoEntry | \"ignore\"} current current entry\n-\t\t * @param {FileSystemInfoEntry | \"ignore\" | \"error\"} snap entry from snapshot\n+\t\t * @param {boolean | \"ignore\"} current current entry\n+\t\t * @param {boolean | \"ignore\" | \"error\"} snap entry from snapshot\n \t\t * @returns {boolean} true, if ok\n \t\t */\n \t\tconst checkExistance = (path, current, snap) => {\n@@ -1087,7 +1098,9 @@ class FileSystemInfo {\n \t\t\t\tif (this._remainingLogs > 0) {\n \t\t\t\t\tthis._log(\n \t\t\t\t\t\tpath,\n-\t\t\t\t\t\t`it may have changed (${current.safeTime}) after the start time of the snapshot (${startTime})`\n+\t\t\t\t\t\t`it may have changed (%d) after the start time of the snapshot (%d)`,\n+\t\t\t\t\t\tcurrent.safeTime,\n+\t\t\t\t\t\tstartTime\n \t\t\t\t\t);\n \t\t\t\t}\n \t\t\t\treturn false;\n@@ -1114,7 +1127,9 @@ class FileSystemInfo {\n \t\t\t\t\tif (this._remainingLogs > 0) {\n \t\t\t\t\t\tthis._log(\n \t\t\t\t\t\t\tpath,\n-\t\t\t\t\t\t\t`timestamps differ (${current.timestamp} != ${snap.timestamp})`\n+\t\t\t\t\t\t\t`timestamps differ (%d != %d)`,\n+\t\t\t\t\t\t\tcurrent.timestamp,\n+\t\t\t\t\t\t\tsnap.timestamp\n \t\t\t\t\t\t);\n \t\t\t\t\t}\n \t\t\t\t\treturn false;\n@@ -1128,7 +1143,9 @@ class FileSystemInfo {\n \t\t\t\t\tif (this._remainingLogs > 0) {\n \t\t\t\t\t\tthis._log(\n \t\t\t\t\t\t\tpath,\n-\t\t\t\t\t\t\t`timestamps hashes differ (${current.timestampHash} != ${snap.timestampHash})`\n+\t\t\t\t\t\t\t`timestamps hashes differ (%s != %s)`,\n+\t\t\t\t\t\t\tcurrent.timestampHash,\n+\t\t\t\t\t\t\tsnap.timestampHash\n \t\t\t\t\t\t);\n \t\t\t\t\t}\n \t\t\t\t\treturn false;\n@@ -1220,19 +1237,19 @@ class FileSystemInfo {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif (missingTimestamps) {\n-\t\t\tfor (const [path, ts] of missingTimestamps) {\n+\t\tif (missingExistance) {\n+\t\t\tfor (const [path, existance] of missingExistance) {\n \t\t\t\tconst cache = this._fileTimestamps.get(path);\n \t\t\t\tif (cache !== undefined) {\n-\t\t\t\t\tif (!checkExistance(path, cache, ts)) {\n+\t\t\t\t\tif (!checkExistance(path, toExistance(cache), existance)) {\n \t\t\t\t\t\tinvalid();\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n \t\t\t\t\t\tif (err) return invalidWithError(path, err);\n-\t\t\t\t\t\tif (!checkExistance(path, entry, ts)) {\n+\t\t\t\t\t\tif (!checkExistance(path, toExistance(entry), existance)) {\n \t\t\t\t\t\t\tinvalid();\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tjobDone();\n@@ -1285,14 +1302,22 @@ class FileSystemInfo {\n \t\t\t\treturn callback(err);\n \t\t\t}\n \n-\t\t\tconst mtime = +stat.mtime;\n+\t\t\tlet ts;\n+\t\t\tif (stat.isDirectory()) {\n+\t\t\t\tts = {\n+\t\t\t\t\tsafeTime: 0,\n+\t\t\t\t\ttimestamp: undefined\n+\t\t\t\t};\n+\t\t\t} else {\n+\t\t\t\tconst mtime = +stat.mtime;\n \n-\t\t\tif (mtime) applyMtime(mtime);\n+\t\t\t\tif (mtime) applyMtime(mtime);\n \n-\t\t\tconst ts = {\n-\t\t\t\tsafeTime: mtime ? mtime + FS_ACCURACY : Infinity,\n-\t\t\t\ttimestamp: stat.isDirectory() ? undefined : mtime\n-\t\t\t};\n+\t\t\t\tts = {\n+\t\t\t\t\tsafeTime: mtime ? mtime + FS_ACCURACY : Infinity,\n+\t\t\t\t\ttimestamp: mtime\n+\t\t\t\t};\n+\t\t\t}\n \n \t\t\tthis._fileTimestamps.set(path, ts);\n "
      },
      {
        "sha": "3e46d0a8e2bb62f214313a4260ae5dd7a26a63b3",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 26,
        "deletions": 2,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=e9f8e63593c79a0cbc76ce880a2d7c585565421f",
        "patch": "@@ -8,6 +8,7 @@\n const util = require(\"util\");\n const ModuleGraphConnection = require(\"./ModuleGraphConnection\");\n const SortableSet = require(\"./util/SortableSet\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"./DependenciesBlock\")} DependenciesBlock */\n /** @typedef {import(\"./Dependency\")} Dependency */\n@@ -33,6 +34,29 @@ const UsageState = Object.freeze({\n \tUsed: /** @type {4} */ (4)\n });\n \n+class RestoreProvidedData {\n+\tconstructor(exports, otherProvided, otherCanMangleProvide) {\n+\t\tthis.exports = exports;\n+\t\tthis.otherProvided = otherProvided;\n+\t\tthis.otherCanMangleProvide = otherCanMangleProvide;\n+\t}\n+\n+\tserialize({ write }) {\n+\t\twrite(this.exports);\n+\t\twrite(this.otherProvided), write(this.otherCanMangleProvide);\n+\t}\n+\n+\tstatic deserialize({ read }) {\n+\t\treturn new RestoreProvidedData(read(), read(), read());\n+\t}\n+}\n+\n+makeSerializable(\n+\tRestoreProvidedData,\n+\t\"webpack/lib/ModuleGraph\",\n+\t\"RestoreProvidedData\"\n+);\n+\n class ExportsInfo {\n \tconstructor() {\n \t\t/** @type {Map<string, ExportInfo>} */\n@@ -469,11 +493,11 @@ class ExportsInfo {\n \t\t\t\t});\n \t\t\t}\n \t\t}\n-\t\treturn {\n+\t\treturn new RestoreProvidedData(\n \t\t\texports,\n \t\t\totherProvided,\n \t\t\totherCanMangleProvide\n-\t\t};\n+\t\t);\n \t}\n \n \trestoreProvided({ otherProvided, otherCanMangleProvide, exports }) {"
      },
      {
        "sha": "97a066d5fc002b391396b4dfc8c78106703b5e6b",
        "filename": "lib/RuntimePlugin.js",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FRuntimePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2FRuntimePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRuntimePlugin.js?ref=e9f8e63593c79a0cbc76ce880a2d7c585565421f",
        "patch": "@@ -7,6 +7,7 @@\n \n const RuntimeGlobals = require(\"./RuntimeGlobals\");\n const RuntimeRequirementsDependency = require(\"./dependencies/RuntimeRequirementsDependency\");\n+const JavascriptModulesPlugin = require(\"./javascript/JavascriptModulesPlugin\");\n const CompatGetDefaultExportRuntimeModule = require(\"./runtime/CompatGetDefaultExportRuntimeModule\");\n const CompatRuntimePlugin = require(\"./runtime/CompatRuntimePlugin\");\n const CreateFakeNamespaceObjectRuntimeModule = require(\"./runtime/CreateFakeNamespaceObjectRuntimeModule\");\n@@ -232,6 +233,14 @@ class RuntimePlugin {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t);\n+\t\t\tJavascriptModulesPlugin.getCompilationHooks(compilation).chunkHash.tap(\n+\t\t\t\t\"RuntimePlugin\",\n+\t\t\t\t(chunk, hash, { chunkGraph }) => {\n+\t\t\t\t\tfor (const m of chunkGraph.getChunkRuntimeModulesInOrder(chunk)) {\n+\t\t\t\t\t\thash.update(chunkGraph.getModuleHash(m));\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t);\n \t\t});\n \t}\n }"
      },
      {
        "sha": "f01e4fd5e86ed0f30a3c90e332e18c2b346b88cd",
        "filename": "lib/util/internalSerializables.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2Futil%2FinternalSerializables.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e9f8e63593c79a0cbc76ce880a2d7c585565421f/lib%2Futil%2FinternalSerializables.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FinternalSerializables.js?ref=e9f8e63593c79a0cbc76ce880a2d7c585565421f",
        "patch": "@@ -126,6 +126,7 @@ module.exports = {\n \tModule: () => require(\"../Module\"),\n \tModuleBuildError: () => require(\"../ModuleBuildError\"),\n \tModuleError: () => require(\"../ModuleError\"),\n+\tModuleGraph: () => require(\"../ModuleGraph\"),\n \tModuleParseError: () => require(\"../ModuleParseError\"),\n \tModuleWarning: () => require(\"../ModuleWarning\"),\n \tNormalModule: () => require(\"../NormalModule\"),"
      },
      {
        "sha": "4c1181c605fa2c95e9c3d46bdbc1134714004087",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 89,
        "deletions": 89,
        "changes": 178,
        "blob_url": "https://github.com/webpack/webpack/blob/e9f8e63593c79a0cbc76ce880a2d7c585565421f/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/e9f8e63593c79a0cbc76ce880a2d7c585565421f/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=e9f8e63593c79a0cbc76ce880a2d7c585565421f",
        "patch": "@@ -1,19 +1,19 @@\n // Jest Snapshot v1, https://goo.gl/fbAQLP\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n-\"Hash: 94225d3904092415ca11693cd80218c9f62b7be2\n+\"Hash: fcad093fca05fdcf9752e43314981289fe6ebb3f\n Child fitting:\n-    Hash: 94225d3904092415ca11\n+    Hash: fcad093fca05fdcf9752\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n                               Asset      Size\n     fitting-1e85d2c6a3bb53369456.js  1.91 KiB  [emitted] [immutable]\n+    fitting-2a9daaa415de9850f1f7.js  12.9 KiB  [emitted] [immutable]\n     fitting-32fa512a201604f3e8b7.js  1.08 KiB  [emitted] [immutable]\n-    fitting-5ab1afbe44d5bdb325ca.js  12.9 KiB  [emitted] [immutable]\n     fitting-64ea4fa3fe9d8c4817d8.js  1.91 KiB  [emitted] [immutable]\n-    Entrypoint main = fitting-1e85d2c6a3bb53369456.js fitting-64ea4fa3fe9d8c4817d8.js fitting-5ab1afbe44d5bdb325ca.js\n-    chunk fitting-5ab1afbe44d5bdb325ca.js 1.87 KiB (javascript) 6.47 KiB (runtime) [entry] [rendered]\n+    Entrypoint main = fitting-1e85d2c6a3bb53369456.js fitting-64ea4fa3fe9d8c4817d8.js fitting-2a9daaa415de9850f1f7.js\n+    chunk fitting-2a9daaa415de9850f1f7.js 1.87 KiB (javascript) 6.47 KiB (runtime) [entry] [rendered]\n         > ./index main\n      ./e.js 899 bytes [built]\n      ./f.js 900 bytes [built]\n@@ -31,17 +31,17 @@ Child fitting:\n         > ./g ./index.js 7:0-13\n      ./g.js 916 bytes [built]\n Child content-change:\n-    Hash: 693cd80218c9f62b7be2\n+    Hash: e43314981289fe6ebb3f\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n                                      Asset      Size\n     content-change-1e85d2c6a3bb53369456.js  1.91 KiB  [emitted] [immutable]\n     content-change-32fa512a201604f3e8b7.js  1.08 KiB  [emitted] [immutable]\n     content-change-64ea4fa3fe9d8c4817d8.js  1.91 KiB  [emitted] [immutable]\n-    content-change-815a77cbd3d2458d7159.js  12.9 KiB  [emitted] [immutable]\n-    Entrypoint main = content-change-1e85d2c6a3bb53369456.js content-change-64ea4fa3fe9d8c4817d8.js content-change-815a77cbd3d2458d7159.js\n-    chunk content-change-815a77cbd3d2458d7159.js 1.87 KiB (javascript) 6.48 KiB (runtime) [entry] [rendered]\n+    content-change-d2f4adaffaa59f60285a.js  12.9 KiB  [emitted] [immutable]\n+    Entrypoint main = content-change-1e85d2c6a3bb53369456.js content-change-64ea4fa3fe9d8c4817d8.js content-change-d2f4adaffaa59f60285a.js\n+    chunk content-change-d2f4adaffaa59f60285a.js 1.87 KiB (javascript) 6.48 KiB (runtime) [entry] [rendered]\n         > ./index main\n      ./e.js 899 bytes [built]\n      ./f.js 900 bytes [built]\n@@ -61,7 +61,7 @@ Child content-change:\n `;\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n-\"Hash: c9e9ac4d8cf9e6e6532f\n+\"Hash: 9f7aab050ded0bbf1402\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -70,20 +70,20 @@ PublicPath: (none)\n 21fd8e73389271e24957.js    1.91 KiB  [emitted] [immutable]\n 64ea4fa3fe9d8c4817d8.js    1.91 KiB  [emitted] [immutable]\n 6a2a05a9feb43a535129.js    1.91 KiB  [emitted] [immutable]\n+831ca3ab1d7c1dda3bc6.js    9.24 KiB  [emitted] [immutable]  [name: main]\n ae7ced4135ed4f2282f6.js    1.91 KiB  [emitted] [immutable]\n b4a95c5544295741de67.js  1010 bytes  [emitted] [immutable]\n b63bab94d02c84e0f081.js    1.91 KiB  [emitted] [immutable]\n-d682f7ff3774726f9677.js    9.24 KiB  [emitted] [immutable]  [name: main]\n db9a189ff52c97050941.js    1.91 KiB  [emitted] [immutable]\n de61daf57f7861bbb2f6.js    1.91 KiB  [emitted] [immutable]\n f80243284f4ab491b78e.js    1.91 KiB  [emitted] [immutable]\n fb5a5560e641649a6ed8.js  1010 bytes  [emitted] [immutable]\n-Entrypoint main = d682f7ff3774726f9677.js\n+Entrypoint main = 831ca3ab1d7c1dda3bc6.js\n chunk 64ea4fa3fe9d8c4817d8.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./c ./d ./e ./index.js 3:0-30\n  ./c.js 899 bytes [built]\n  ./d.js 899 bytes [built]\n-chunk d682f7ff3774726f9677.js (main) 248 bytes (javascript) 4.53 KiB (runtime) [entry] [rendered]\n+chunk 831ca3ab1d7c1dda3bc6.js (main) 248 bytes (javascript) 4.53 KiB (runtime) [entry] [rendered]\n     > ./index main\n  ./index.js 248 bytes [built]\n      + 4 hidden chunk modules\n@@ -131,7 +131,7 @@ chunk b4a95c5544295741de67.js 899 bytes [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for asset 1`] = `\n-\"Hash: 06dc46befd8ad4dc3301\n+\"Hash: b52cbf090dc450f1a713\n Time: Xms\n Built at: 1970-04-20 12:42:42\n                    Asset       Size\n@@ -447,7 +447,7 @@ Child all:\n `;\n \n exports[`StatsTestCases should print correct stats for chunk-module-id-range 1`] = `\n-\"Hash: ddd96b211021662f3b02\n+\"Hash: 004ccd2a26cdfec7bbd5\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -475,7 +475,7 @@ chunk main1.js (main1) 136 bytes (javascript) 632 bytes (runtime) [entry] [rende\n `;\n \n exports[`StatsTestCases should print correct stats for chunks 1`] = `\n-\"Hash: 17085bce386471050d25\n+\"Hash: d84b0166770e8e413794\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -515,7 +515,7 @@ chunk 996.bundle.js 22 bytes <{179}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for chunks-development 1`] = `\n-\"Hash: 71bf820f6e12448bbc9f\n+\"Hash: 354c02d8df65b5d711fc\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -599,7 +599,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32>main.js</CLR>\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-0 1`] = `\n-\"Hash: 511f142c738fd0d19018\n+\"Hash: 146f41a048eac4e3460b\n Time: Xms\n Built at: 1970-04-20 12:42:42\n      Asset       Size\n@@ -617,7 +617,7 @@ Entrypoint entry-1 = 429.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-Infinity 1`] = `\n-\"Hash: 919ca07bbd9eb1116376\n+\"Hash: de1693890e4211841dce\n Time: Xms\n Built at: 1970-04-20 12:42:42\n       Asset       Size\n@@ -635,26 +635,26 @@ Entrypoint entry-1 = vendor-1.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"Hash: b320c82ca8433ac165d2f4a559a64f114515a60f\n+\"Hash: fb493bbf819aa0277a27de9a180f2da5454780b1\n Child\n-    Hash: b320c82ca8433ac165d2\n+    Hash: fb493bbf819aa0277a27\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                                Asset       Size\n-       app.3db29a2c7f451bd762c6-1.js   5.81 KiB  [emitted] [immutable]  [name: app]\n+       app.1147bb1cde3dd41269e4-1.js   5.81 KiB  [emitted] [immutable]  [name: app]\n     vendor.6b4bbfa3863de7632c2b-1.js  615 bytes  [emitted] [immutable]  [name: vendor] [id hint: vendor]\n-    Entrypoint app = vendor.6b4bbfa3863de7632c2b-1.js app.3db29a2c7f451bd762c6-1.js\n+    Entrypoint app = vendor.6b4bbfa3863de7632c2b-1.js app.1147bb1cde3dd41269e4-1.js\n     ./entry-1.js + 2 modules 190 bytes [built]\n     ./constants.js 87 bytes [built]\n         + 2 hidden modules\n Child\n-    Hash: f4a559a64f114515a60f\n+    Hash: de9a180f2da5454780b1\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                                Asset       Size\n-       app.7fc48118fecc17ab70b1-2.js   5.82 KiB  [emitted] [immutable]  [name: app]\n+       app.10fa3cd6ae475f4c6e5c-2.js   5.82 KiB  [emitted] [immutable]  [name: app]\n     vendor.6b4bbfa3863de7632c2b-2.js  615 bytes  [emitted] [immutable]  [name: vendor] [id hint: vendor]\n-    Entrypoint app = vendor.6b4bbfa3863de7632c2b-2.js app.7fc48118fecc17ab70b1-2.js\n+    Entrypoint app = vendor.6b4bbfa3863de7632c2b-2.js app.10fa3cd6ae475f4c6e5c-2.js\n     ./entry-2.js + 2 modules 197 bytes [built]\n     ./constants.js 87 bytes [built]\n         + 2 hidden modules\"\n@@ -678,52 +678,52 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for context-independence 1`] = `\n-\"Hash: f0a5d5cff1e7dc51f1b5f0a5d5cff1e7dc51f1b58137b373770a806fc1238137b373770a806fc123\n+\"Hash: d224cadf61a4617b73d5d224cadf61a4617b73d5f30e485867079a7ad027f30e485867079a7ad027\n Child\n-    Hash: f0a5d5cff1e7dc51f1b5\n+    Hash: d224cadf61a4617b73d5\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                                Asset       Size\n          703-31a50198ea37e1d30825.js  438 bytes  [emitted] [immutable]\n      703-31a50198ea37e1d30825.js.map  343 bytes  [emitted] [dev]\n-        main-003e2365c4b86a56ba62.js   8.03 KiB  [emitted] [immutable]  [name: main]\n-    main-003e2365c4b86a56ba62.js.map   7.12 KiB  [emitted] [dev]        [name: (main)]\n-    Entrypoint main = main-003e2365c4b86a56ba62.js (main-003e2365c4b86a56ba62.js.map)\n+        main-f94c4a4e5ad089468096.js   8.03 KiB  [emitted] [immutable]  [name: main]\n+    main-f94c4a4e5ad089468096.js.map   7.12 KiB  [emitted] [dev]        [name: (main)]\n+    Entrypoint main = main-f94c4a4e5ad089468096.js (main-f94c4a4e5ad089468096.js.map)\n     ./a/index.js 40 bytes [built]\n     ./a/chunk.js + 1 modules 66 bytes [built]\n         + 5 hidden modules\n Child\n-    Hash: f0a5d5cff1e7dc51f1b5\n+    Hash: d224cadf61a4617b73d5\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                                Asset       Size\n          703-31a50198ea37e1d30825.js  438 bytes  [emitted] [immutable]\n      703-31a50198ea37e1d30825.js.map  343 bytes  [emitted] [dev]\n-        main-003e2365c4b86a56ba62.js   8.03 KiB  [emitted] [immutable]  [name: main]\n-    main-003e2365c4b86a56ba62.js.map   7.12 KiB  [emitted] [dev]        [name: (main)]\n-    Entrypoint main = main-003e2365c4b86a56ba62.js (main-003e2365c4b86a56ba62.js.map)\n+        main-f94c4a4e5ad089468096.js   8.03 KiB  [emitted] [immutable]  [name: main]\n+    main-f94c4a4e5ad089468096.js.map   7.12 KiB  [emitted] [dev]        [name: (main)]\n+    Entrypoint main = main-f94c4a4e5ad089468096.js (main-f94c4a4e5ad089468096.js.map)\n     ./b/index.js 40 bytes [built]\n     ./b/chunk.js + 1 modules 66 bytes [built]\n         + 5 hidden modules\n Child\n-    Hash: 8137b373770a806fc123\n+    Hash: f30e485867079a7ad027\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                            Asset       Size\n      703-71c02d17a0d4fdf148ec.js  962 bytes  [emitted] [immutable]\n-    main-bed2a060280592353bb1.js   8.37 KiB  [emitted] [immutable]  [name: main]\n-    Entrypoint main = main-bed2a060280592353bb1.js\n+    main-7145276cf3aaae458872.js   8.37 KiB  [emitted] [immutable]  [name: main]\n+    Entrypoint main = main-7145276cf3aaae458872.js\n     ./a/index.js 40 bytes [built]\n     ./a/chunk.js + 1 modules 66 bytes [built]\n         + 5 hidden modules\n Child\n-    Hash: 8137b373770a806fc123\n+    Hash: f30e485867079a7ad027\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                            Asset       Size\n      703-71c02d17a0d4fdf148ec.js  962 bytes  [emitted] [immutable]\n-    main-bed2a060280592353bb1.js   8.37 KiB  [emitted] [immutable]  [name: main]\n-    Entrypoint main = main-bed2a060280592353bb1.js\n+    main-7145276cf3aaae458872.js   8.37 KiB  [emitted] [immutable]  [name: main]\n+    Entrypoint main = main-7145276cf3aaae458872.js\n     ./b/index.js 40 bytes [built]\n     ./b/chunk.js + 1 modules 66 bytes [built]\n         + 5 hidden modules\"\n@@ -781,7 +781,7 @@ Unexpected end of JSON input while parsing near ''\n `;\n \n exports[`StatsTestCases should print correct stats for exclude-with-loader 1`] = `\n-\"Hash: 2e702d35513411402a14\n+\"Hash: 6a760613e2615026d387\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset      Size\n@@ -805,9 +805,9 @@ external \\\\\"test\\\\\" 42 bytes [built]\"\n `;\n \n exports[`StatsTestCases should print correct stats for filter-warnings 1`] = `\n-\"Hash: 34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c34a9d31561c9c3b8aa7c\n+\"Hash: 2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff2e946c1b63d5a742a8ff\n Child undefined:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n@@ -837,49 +837,49 @@ Child undefined:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child Terser:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n     bundle1.js  1010 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle1.js\n Child /Terser/:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n     bundle2.js  1010 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle2.js\n Child warnings => true:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n     bundle3.js  1010 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle3.js\n Child [Terser]:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n     bundle4.js  1010 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle4.js\n Child [/Terser/]:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n     bundle5.js  1010 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle5.js\n Child [warnings => true]:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n     bundle6.js  1010 bytes  [emitted]  [name: main]\n     Entrypoint main = bundle6.js\n Child should not filter:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n@@ -909,7 +909,7 @@ Child should not filter:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child /should not filter/:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n@@ -939,7 +939,7 @@ Child /should not filter/:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child warnings => false:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset        Size\n@@ -969,7 +969,7 @@ Child warnings => false:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [should not filter]:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n           Asset        Size\n@@ -999,7 +999,7 @@ Child [should not filter]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [/should not filter/]:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n           Asset        Size\n@@ -1029,7 +1029,7 @@ Child [/should not filter/]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [webpack://./index.js:12,0]\n \n Child [warnings => false]:\n-    Hash: 34a9d31561c9c3b8aa7c\n+    Hash: 2e946c1b63d5a742a8ff\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n           Asset        Size\n@@ -1156,11 +1156,11 @@ chunk trees.js (trees) 71 bytes [rendered]\n exports[`StatsTestCases should print correct stats for immutable 1`] = `\n \"                  Asset       Size\n 1b847d037d2872a4c68b.js  346 bytes  [emitted] [immutable]\n-c16118cabef6e76a8986.js    9.8 KiB  [emitted] [immutable]  [name: main]\"\n+99c16c4af44c16e93796.js    9.8 KiB  [emitted] [immutable]  [name: main]\"\n `;\n \n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n-\"Hash: 287b67273539d3e2d187\n+\"Hash: a4781a78f362402f4df3\n Time: Xms\n Built at: 1970-04-20 12:42:42\n    Asset       Size\n@@ -1178,7 +1178,7 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for import-weak 1`] = `\n-\"Hash: ce57d48b557ee0533421\n+\"Hash: 2de11bcb194cf8fecd10\n Time: Xms\n Built at: 1970-04-20 12:42:42\n    Asset       Size\n@@ -1215,52 +1215,52 @@ Compilation error while processing magic comment(-s): /* webpackPrefetch: nope *\n `;\n \n exports[`StatsTestCases should print correct stats for issue-7577 1`] = `\n-\"Hash: 01b98075280dae6ddaa62275e86111c01124c51ddfac932ba539c714e725\n+\"Hash: 9a8ebd77376ca4e971467d0bce3c2657b89596d726d124d51179b769d853\n Child\n-    Hash: 01b98075280dae6ddaa6\n+    Hash: 9a8ebd77376ca4e97146\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                                      Asset       Size\n         a-all-a_js-a0ca01d3da48ab4385f6.js  144 bytes  [emitted] [immutable]  [id hint: all]\n             a-main-fa06855251b873131c2c.js  115 bytes  [emitted] [immutable]  [name: main]\n-    a-runtime~main-31329a243011ab4a51ef.js   4.76 KiB  [emitted] [immutable]  [name: runtime~main]\n-    Entrypoint main = a-runtime~main-31329a243011ab4a51ef.js a-all-a_js-a0ca01d3da48ab4385f6.js a-main-fa06855251b873131c2c.js\n+    a-runtime~main-246c0390086c2335301b.js   4.76 KiB  [emitted] [immutable]  [name: runtime~main]\n+    Entrypoint main = a-runtime~main-246c0390086c2335301b.js a-all-a_js-a0ca01d3da48ab4385f6.js a-main-fa06855251b873131c2c.js\n     ./a.js 18 bytes [built]\n         + 1 hidden module\n Child\n-    Hash: 2275e86111c01124c51d\n+    Hash: 7d0bce3c2657b89596d7\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                                                        Asset       Size\n                           b-all-b_js-3219344d13cc334d7831.js  479 bytes  [emitted] [immutable]  [id hint: all]\n                               b-main-6da637b8d22f213c8475.js  148 bytes  [emitted] [immutable]  [name: main]\n-                      b-runtime~main-027dd1cd780bcdb0c1c0.js   5.76 KiB  [emitted] [immutable]  [name: runtime~main]\n+                      b-runtime~main-26eb148ab52ff25ff9bb.js   5.76 KiB  [emitted] [immutable]  [name: runtime~main]\n     b-vendors-node_modules_vendor_js-a51f8ed2c8dc9ce97afd.js  189 bytes  [emitted] [immutable]  [id hint: vendors]\n-    Entrypoint main = b-runtime~main-027dd1cd780bcdb0c1c0.js b-vendors-node_modules_vendor_js-a51f8ed2c8dc9ce97afd.js b-all-b_js-3219344d13cc334d7831.js b-main-6da637b8d22f213c8475.js\n+    Entrypoint main = b-runtime~main-26eb148ab52ff25ff9bb.js b-vendors-node_modules_vendor_js-a51f8ed2c8dc9ce97afd.js b-all-b_js-3219344d13cc334d7831.js b-main-6da637b8d22f213c8475.js\n     ./b.js 17 bytes [built]\n     ./node_modules/vendor.js 23 bytes [built]\n         + 3 hidden modules\n Child\n-    Hash: dfac932ba539c714e725\n+    Hash: 26d124d51179b769d853\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n                                                        Asset       Size\n                           c-all-b_js-3219344d13cc334d7831.js  506 bytes  [emitted] [immutable]  [id hint: all]\n                           c-all-c_js-6756694a5d280748f5a3.js  382 bytes  [emitted] [immutable]  [id hint: all]\n                               c-main-476756bfcb471445cf2c.js  164 bytes  [emitted] [immutable]  [name: main]\n-                      c-runtime~main-6dda541ce1ad1b4a0843.js   11.3 KiB  [emitted] [immutable]  [name: runtime~main]\n+                      c-runtime~main-17d831e3a178122f7097.js   11.3 KiB  [emitted] [immutable]  [name: runtime~main]\n     c-vendors-node_modules_vendor_js-a51f8ed2c8dc9ce97afd.js  189 bytes  [emitted] [immutable]  [id hint: vendors]\n-    Entrypoint main = c-runtime~main-6dda541ce1ad1b4a0843.js c-all-c_js-6756694a5d280748f5a3.js c-main-476756bfcb471445cf2c.js (prefetch: c-vendors-node_modules_vendor_js-a51f8ed2c8dc9ce97afd.js c-all-b_js-3219344d13cc334d7831.js)\n+    Entrypoint main = c-runtime~main-17d831e3a178122f7097.js c-all-c_js-6756694a5d280748f5a3.js c-main-476756bfcb471445cf2c.js (prefetch: c-vendors-node_modules_vendor_js-a51f8ed2c8dc9ce97afd.js c-all-b_js-3219344d13cc334d7831.js)\n     ./c.js 61 bytes [built]\n     ./b.js 17 bytes [built]\n     ./node_modules/vendor.js 23 bytes [built]\n         + 7 hidden modules\"\n `;\n \n exports[`StatsTestCases should print correct stats for limit-chunk-count-plugin 1`] = `\n-\"Hash: c6ae0cfd57bab29f4673b42b7532a17addfc03b0c2a63480397799668a7f99bbfebe295e60d362cd\n+\"Hash: 0760a97c3867a4cb73a356a2f3e0393055c647b4740146ba33c792f0e978f970baea1892082d6c6c\n Child 1 chunks:\n-    Hash: c6ae0cfd57bab29f4673\n+    Hash: 0760a97c3867a4cb73a3\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n          Asset      Size\n@@ -1275,7 +1275,7 @@ Child 1 chunks:\n      ./index.js 101 bytes [built]\n          + 3 hidden chunk modules\n Child 2 chunks:\n-    Hash: b42b7532a17addfc03b0\n+    Hash: 56a2f3e0393055c647b4\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n              Asset       Size\n@@ -1292,7 +1292,7 @@ Child 2 chunks:\n      ./d.js 22 bytes [built]\n      ./e.js 22 bytes [built]\n Child 3 chunks:\n-    Hash: c2a63480397799668a7f\n+    Hash: 740146ba33c792f0e978\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n              Asset       Size\n@@ -1311,7 +1311,7 @@ Child 3 chunks:\n      ./d.js 22 bytes [built]\n      ./e.js 22 bytes [built]\n Child 4 chunks:\n-    Hash: 99bbfebe295e60d362cd\n+    Hash: f970baea1892082d6c6c\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n              Asset       Size\n@@ -1431,7 +1431,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n-\"Hash: 95962953d41f479d84c9\n+\"Hash: 511e53bdffb5731cb7f8\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset       Size\n@@ -1703,7 +1703,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin 1`] = `\n-\"Hash: 865839a650fa70c9ebe4\n+\"Hash: afccf40163f9367995f9\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset       Size\n@@ -1718,7 +1718,7 @@ Entrypoint entry = vendor.js entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin-async 1`] = `\n-\"Hash: 24ee860ea1495a695a41\n+\"Hash: 56fb1261f49a8b4f7e76\n Time: Xms\n Built at: 1970-04-20 12:42:42\n           Asset       Size\n@@ -1747,7 +1747,7 @@ You can also set it to 'none' to disable any default behavior. Learn more: https\n `;\n \n exports[`StatsTestCases should print correct stats for optimize-chunks 1`] = `\n-\"Hash: c3f48bfec88edb86157a\n+\"Hash: 6034010df0329256fb56\n Time: Xms\n Built at: 1970-04-20 12:42:42\n             Asset       Size\n@@ -2110,7 +2110,7 @@ exports[`StatsTestCases should print correct stats for preset-detailed 1`] = `\n   <+> [LogTestPlugin] Collaped group\n       [LogTestPlugin] Log\n     [LogTestPlugin] End\n-Hash: 8fcaf32bde510cead4d1\n+Hash: 3748a7fa81a17c722236\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -2227,7 +2227,7 @@ exports[`StatsTestCases should print correct stats for preset-normal 1`] = `\n \"<e> [LogTestPlugin] Error\n <w> [LogTestPlugin] Warning\n <i> [LogTestPlugin] Info\n-Hash: 8fcaf32bde510cead4d1\n+Hash: 3748a7fa81a17c722236\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset       Size\n@@ -2328,7 +2328,7 @@ exports[`StatsTestCases should print correct stats for preset-verbose 1`] = `\n           [LogTestPlugin] Inner inner message\n       [LogTestPlugin] Log\n     [LogTestPlugin] End\n-Hash: 8fcaf32bde510cead4d1\n+Hash: 3748a7fa81a17c722236\n Time: Xms\n Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n@@ -2515,7 +2515,7 @@ Entrypoint e2 = runtime.js e2.js\"\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-bailouts 1`] = `\n-\"Hash: c4e4f1486a80343e3836\n+\"Hash: d7a0f9fd554860ceac39\n Time: Xms\n Built at: 1970-04-20 12:42:42\n Entrypoint index = index.js\n@@ -2545,9 +2545,9 @@ external \\\\\"external\\\\\" 42 bytes [built]\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-multi 1`] = `\n-\"Hash: 638527e4b089cb0f1ae0bf34fef60dab4d361350\n+\"Hash: 8f97fa868a60532083a64be341a68fa68b6969a2\n Child\n-    Hash: 638527e4b089cb0f1ae0\n+    Hash: 8f97fa868a60532083a6\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     Entrypoint first = a-vendor.js a-first.js\n@@ -2565,7 +2565,7 @@ Child\n     ./common_lazy_shared.js 25 bytes [built]\n         + 10 hidden modules\n Child\n-    Hash: bf34fef60dab4d361350\n+    Hash: 4be341a68fa68b6969a2\n     Time: Xms\n     Built at: 1970-04-20 12:42:42\n     Entrypoint first = b-vendor.js b-first.js\n@@ -2592,7 +2592,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-issue-7428 1`] = `\n-\"Hash: 0b3374c4080347c68ab7\n+\"Hash: 3a66377e0a1ce3e7a401\n Time: Xms\n Built at: 1970-04-20 12:42:42\n   Asset       Size\n@@ -3676,7 +3676,7 @@ chunk default/async-a.js (async-a) 134 bytes <{179}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n-\"Hash: a02d3a72b2c635f4305e\n+\"Hash: 0924253adfe530343bb4\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset      Size\n@@ -3719,7 +3719,7 @@ require.include() is deprecated and will be removed soon.\n `;\n \n exports[`StatsTestCases should print correct stats for warnings-terser 1`] = `\n-\"Hash: 8b70be992f05263d5bc3\n+\"Hash: fd5c5b8a9bb97e3968a4\n Time: Xms\n Built at: 1970-04-20 12:42:42\n     Asset        Size\n@@ -3743,7 +3743,7 @@ WARNING in Terser Plugin: Dropping unused function someUnRemoteUsedFunction5 [we\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"Hash: 5f1ba3484a86a9ad0cac\n+\"Hash: 7aa29a3dc984dbd67223\n Time: Xms\n Built at: 1970-04-20 12:42:42\n                            Asset       Size"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9414",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9414/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9414/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9414/events",
    "html_url": "https://github.com/webpack/webpack/pull/9414",
    "id": 468111018,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk3NjA2ODI3",
    "number": 9414,
    "title": "improve performance of date time formating",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2019-07-15T12:54:25Z",
    "updated_at": "2019-07-16T15:44:52Z",
    "closed_at": "2019-07-16T15:42:40Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9414",
      "html_url": "https://github.com/webpack/webpack/pull/9414",
      "diff_url": "https://github.com/webpack/webpack/pull/9414.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9414.patch",
      "merged_at": "2019-07-16T15:42:40Z"
    },
    "body": "improve tests for timings\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nsee https://twitter.com/srl295/status/1149775046329737220\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\na really small one, printing of time differs a little bit\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9414/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9414/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "0b920d2c834a739f2e13206178fc35b9daa17d14",
        "filename": "lib/stats/DefaultStatsPrinterPlugin.js",
        "status": "modified",
        "additions": 11,
        "deletions": 6,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/2912c1b5299af772b38b75ea163694367bf970d0/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2912c1b5299af772b38b75ea163694367bf970d0/lib%2Fstats%2FDefaultStatsPrinterPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsPrinterPlugin.js?ref=2912c1b5299af772b38b75ea163694367bf970d0",
        "patch": "@@ -43,6 +43,12 @@ const printSizes = (sizes, { formatSize }) => {\n \t}\n };\n \n+/**\n+ * @param {number} n a number\n+ * @returns {string} number as two digit string, leading 0\n+ */\n+const twoDigit = n => (n > 10 ? `${n}` : `0${n}`);\n+\n const isValidId = id => {\n \treturn typeof id === \"number\" || id;\n };\n@@ -57,12 +63,11 @@ const SIMPLE_PRINTERS = {\n \t\t\t: undefined,\n \t\"compilation.time\": (time, { bold }) => `Time: ${bold(time)}ms`,\n \t\"compilation.builtAt\": (builtAt, { bold }) => {\n-\t\tconst builtAtDate = new Date(builtAt);\n-\t\treturn `Built at: ${builtAtDate.toLocaleDateString(undefined, {\n-\t\t\tday: \"2-digit\",\n-\t\t\tmonth: \"2-digit\",\n-\t\t\tyear: \"numeric\"\n-\t\t})} ${bold(builtAtDate.toLocaleTimeString())}`;\n+\t\tconst d = new Date(builtAt);\n+\t\tconst x = twoDigit;\n+\t\tconst date = `${d.getFullYear()}-${x(d.getMonth() + 1)}-${x(d.getDate())}`;\n+\t\tconst time = `${x(d.getHours())}:${x(d.getMinutes())}:${x(d.getSeconds())}`;\n+\t\treturn `Built at: ${date} ${bold(time)}`;\n \t},\n \t\"compilation.env\": (env, { bold }) =>\n \t\tenv"
      },
      {
        "sha": "3b14d413364bd2af6549b85457aa5ff6628723b4",
        "filename": "test/StatsTestCases.test.js",
        "status": "modified",
        "additions": 9,
        "deletions": 10,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/2912c1b5299af772b38b75ea163694367bf970d0/test%2FStatsTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2912c1b5299af772b38b75ea163694367bf970d0/test%2FStatsTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStatsTestCases.test.js?ref=2912c1b5299af772b38b75ea163694367bf970d0",
        "patch": "@@ -116,27 +116,26 @@ describe(\"StatsTestCases\", () => {\n \t\t\t\tif (Array.isArray(options) && !toStringOptions.children) {\n \t\t\t\t\ttoStringOptions.children = options.map(o => o.stats);\n \t\t\t\t}\n+\t\t\t\t// mock timestamps\n+\t\t\t\tfor (const s of [].concat(stats.stats || stats)) {\n+\t\t\t\t\texpect(s.startTime).toBeGreaterThan(0);\n+\t\t\t\t\texpect(s.endTime).toBeGreaterThan(0);\n+\t\t\t\t\ts.endTime = new Date(\"04/20/1970, 12:42:42 PM\").getTime();\n+\t\t\t\t\ts.startTime = s.endTime - 1234;\n+\t\t\t\t}\n \t\t\t\tlet actual = stats.toString(toStringOptions);\n \t\t\t\texpect(typeof actual).toBe(\"string\");\n \t\t\t\tif (!hasColorSetting) {\n \t\t\t\t\tactual = actual\n \t\t\t\t\t\t.replace(/\\u001b\\[[0-9;]*m/g, \"\")\n-\t\t\t\t\t\t.replace(/[0-9]+(\\s?ms)/g, \"X$1\")\n-\t\t\t\t\t\t.replace(\n-\t\t\t\t\t\t\t/^(\\s*Built at:) (.*)$/gm,\n-\t\t\t\t\t\t\t\"$1 Thu Jan 01 1970 00:00:00 GMT\"\n-\t\t\t\t\t\t);\n+\t\t\t\t\t\t.replace(/[0-9]+(\\s?ms)/g, \"X$1\");\n \t\t\t\t} else {\n \t\t\t\t\tactual = actual\n \t\t\t\t\t\t.replace(/\\u001b\\[1m\\u001b\\[([0-9;]*)m/g, \"<CLR=$1,BOLD>\")\n \t\t\t\t\t\t.replace(/\\u001b\\[1m/g, \"<CLR=BOLD>\")\n \t\t\t\t\t\t.replace(/\\u001b\\[39m\\u001b\\[22m/g, \"</CLR>\")\n \t\t\t\t\t\t.replace(/\\u001b\\[([0-9;]*)m/g, \"<CLR=$1>\")\n-\t\t\t\t\t\t.replace(/[0-9]+(<\\/CLR>)?(\\s?ms)/g, \"X$1$2\")\n-\t\t\t\t\t\t.replace(\n-\t\t\t\t\t\t\t/^(\\s*Built at:) (.*)$/gm,\n-\t\t\t\t\t\t\t\"$1 Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\"\n-\t\t\t\t\t\t);\n+\t\t\t\t\t\t.replace(/[0-9]+(<\\/CLR>)?(\\s?ms)/g, \"X$1$2\");\n \t\t\t\t}\n \t\t\t\tconst testPath = path.join(base, testName);\n \t\t\t\tconst testPathPattern = testPath.replace("
      },
      {
        "sha": "0a2af0e8a52f12812cdb25216949d80f9ff99d26",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 83,
        "deletions": 83,
        "changes": 166,
        "blob_url": "https://github.com/webpack/webpack/blob/2912c1b5299af772b38b75ea163694367bf970d0/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/2912c1b5299af772b38b75ea163694367bf970d0/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=2912c1b5299af772b38b75ea163694367bf970d0",
        "patch": "@@ -5,7 +5,7 @@ exports[`StatsTestCases should print correct stats for aggressive-splitting-entr\n Child fitting:\n     Hash: de949c9d9484ba4c4d9c\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n                       Asset      Size  Chunks             Chunk Names\n     501a16e2f184bd3b8ea5.js  1.07 KiB   {785}  [emitted]\n@@ -33,7 +33,7 @@ Child fitting:\n Child content-change:\n     Hash: de949c9d9484ba4c4d9c\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n     PublicPath: (none)\n                       Asset      Size  Chunks             Chunk Names\n     501a16e2f184bd3b8ea5.js  1.07 KiB   {785}  [emitted]\n@@ -63,7 +63,7 @@ Child content-change:\n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n \"Hash: 1e4c9837ccb1a4c4032d\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n                   Asset        Size        Chunks             Chunk Names\n 035ce1d102419ee4897b.js  1020 bytes         {701}  [emitted]\n@@ -432,7 +432,7 @@ Child all:\n exports[`StatsTestCases should print correct stats for chunk-module-id-range 1`] = `\n \"Hash: 9100d03e78dfafc13e43\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n    Asset      Size  Chunks             Chunk Names\n main1.js  3.28 KiB     {1}  [emitted]  main1\n@@ -460,7 +460,7 @@ chunk {1} main1.js (main1) 136 bytes (javascript) 279 bytes (runtime) [entry] [r\n exports[`StatsTestCases should print correct stats for chunks 1`] = `\n \"Hash: 48f3c2931714a9877313\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n         Asset       Size  Chunks             Chunk Names\n 460.bundle.js  311 bytes   {460}  [emitted]\n@@ -500,7 +500,7 @@ chunk {996} 996.bundle.js 22 bytes <{179}> [rendered]\n exports[`StatsTestCases should print correct stats for chunks-development 1`] = `\n \"Hash: c7b0c651342b76d06f43\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n               Asset       Size       Chunks             Chunk Names\n      b_js.bundle.js  364 bytes       {b_js}  [emitted]\n@@ -554,7 +554,7 @@ chunk {786} 786.bundle.js (a) 49 bytes <{179}> <{459}> >{459}< [rendered]\n exports[`StatsTestCases should print correct stats for color-disabled 1`] = `\n \"Hash: a035b8d43e7113865ae3\n Time: Xms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 12:42:42\n   Asset      Size  Chunks             Chunk Names\n main.js  1.32 KiB   {179}  [emitted]  main\n Entrypoint main = main.js\n@@ -564,7 +564,7 @@ Entrypoint main = main.js\n exports[`StatsTestCases should print correct stats for color-enabled 1`] = `\n \"Hash: <CLR=BOLD>a035b8d43e7113865ae3</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>      <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>             <CLR=BOLD>Chunk Names</CLR>\n <CLR=32,BOLD>main.js</CLR>  1.32 KiB   {<CLR=33,BOLD>179</CLR>}  <CLR=32,BOLD>[emitted]</CLR>  main\n Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n@@ -574,7 +574,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n exports[`StatsTestCases should print correct stats for color-enabled-custom 1`] = `\n \"Hash: <CLR=BOLD>a035b8d43e7113865ae3</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>      <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>             <CLR=BOLD>Chunk Names</CLR>\n <CLR=32>main.js</CLR>  1.32 KiB   {<CLR=33>179</CLR>}  <CLR=32>[emitted]</CLR>  main\n Entrypoint <CLR=BOLD>main</CLR> = <CLR=32>main.js</CLR>\n@@ -584,7 +584,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32>main.js</CLR>\n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-0 1`] = `\n \"Hash: 29240facb9af560469c8\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n      Asset       Size  Chunks             Chunk Names\n     429.js  293 bytes   {429}  [emitted]\n entry-1.js   5.17 KiB   {472}  [emitted]  entry-1\n@@ -602,7 +602,7 @@ Entrypoint entry-1 = 429.js entry-1.js\n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-Infinity 1`] = `\n \"Hash: 45c887c4d62aa5573b76\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n       Asset       Size  Chunks             Chunk Names\n  entry-1.js   5.17 KiB   {472}  [emitted]  entry-1\n vendor-1.js  293 bytes   {844}  [emitted]  vendor-1\n@@ -622,7 +622,7 @@ exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980\n Child\n     Hash: 43517dc29e8fb2f03404\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                              Asset       Size  Chunks             Chunk Names\n        app.fadc4a6a89f7a11c1f53.js   6.69 KiB   {143}  [emitted]  app\n     vendor.44602d2bdfb280718742.js  616 bytes   {736}  [emitted]  vendor\n@@ -633,7 +633,7 @@ Child\n Child\n     Hash: 6e46d5a8921f72e08658\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                              Asset       Size  Chunks             Chunk Names\n        app.8a243650f3a4dfeedf18.js    6.7 KiB   {143}  [emitted]  app\n     vendor.44602d2bdfb280718742.js  616 bytes   {736}  [emitted]  vendor\n@@ -666,23 +666,23 @@ exports[`StatsTestCases should print correct stats for define-plugin 1`] = `\n Child\n     Hash: 60e12e96e397536b4bb4\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n       Asset      Size  Chunks             Chunk Names\n     main.js  1.35 KiB   {179}  [emitted]  main\n     Entrypoint main = main.js\n     [10] ./index.js 24 bytes {179} [built]\n Child\n     Hash: dbd95708ab7db93c7012\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n       Asset      Size  Chunks             Chunk Names\n     main.js  1.35 KiB   {179}  [emitted]  main\n     Entrypoint main = main.js\n     [10] ./index.js 24 bytes {179} [built]\n Child\n     Hash: aec84d8d980d98492108\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n       Asset      Size  Chunks             Chunk Names\n     main.js  1.35 KiB   {179}  [emitted]  main\n     Entrypoint main = main.js\n@@ -692,7 +692,7 @@ Child\n exports[`StatsTestCases should print correct stats for dll-reference-plugin-issue-7624 1`] = `\n \"Hash: efbc2649e4babdb77381\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset      Size  Chunks             Chunk Names\n bundle.js  1.35 KiB   {179}  [emitted]  main\n Entrypoint main = bundle.js\n@@ -702,7 +702,7 @@ Entrypoint main = bundle.js\n exports[`StatsTestCases should print correct stats for dll-reference-plugin-issue-7624-error 1`] = `\n \"Hash: 0ca4cb03fada667d2df8\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset      Size  Chunks  Chunk Names\n bundle.js  1.35 KiB   {179}  main\n Entrypoint main = bundle.js\n@@ -716,7 +716,7 @@ Unexpected end of JSON input while parsing near ''\n exports[`StatsTestCases should print correct stats for exclude-with-loader 1`] = `\n \"Hash: ddcab28e86267faaf289\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset      Size  Chunks             Chunk Names\n bundle.js  2.11 KiB   {179}  [emitted]  main\n  + 1 hidden asset\n@@ -729,7 +729,7 @@ Entrypoint main = bundle.js\n exports[`StatsTestCases should print correct stats for external 1`] = `\n \"Hash: 1384521d464d1e414597\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset      Size  Chunks             Chunk Names\n main.js  1.48 KiB   {179}  [emitted]  main\n Entrypoint main = main.js\n@@ -742,7 +742,7 @@ exports[`StatsTestCases should print correct stats for filter-warnings 1`] = `\n Child undefined:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -772,49 +772,49 @@ Child undefined:\n Child Terser:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n Child /Terser/:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n Child warnings => true:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n Child [Terser]:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n Child [/Terser/]:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n Child [warnings => true]:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n Child should not filter:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -844,7 +844,7 @@ Child should not filter:\n Child /should not filter/:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -874,7 +874,7 @@ Child /should not filter/:\n Child warnings => false:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -904,7 +904,7 @@ Child warnings => false:\n Child [should not filter]:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -934,7 +934,7 @@ Child [should not filter]:\n Child [/should not filter/]:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -964,7 +964,7 @@ Child [/should not filter/]:\n Child [warnings => false]:\n     Hash: b0ea0f870bca684112f8\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -1089,7 +1089,7 @@ chunk {trees} trees.js (trees) 71 bytes [rendered]\n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n \"Hash: 647ae626bf6eb0d68896\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n    Asset       Size  Chunks             Chunk Names\n   398.js  320 bytes   {398}  [emitted]\n   544.js  320 bytes   {544}  [emitted]\n@@ -1107,7 +1107,7 @@ Entrypoint entry = entry.js\n exports[`StatsTestCases should print correct stats for import-weak 1`] = `\n \"Hash: 94627bb4b8c9def4b4a3\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n    Asset       Size  Chunks             Chunk Names\n   836.js  147 bytes   {836}  [emitted]\n entry.js   9.75 KiB   {497}  [emitted]  entry\n@@ -1118,7 +1118,7 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for import-with-invalid-options-comments 1`] = `\n-\"Built at: Thu Jan 01 1970 00:00:00 GMT\n+\"Built at: 1970-04-20 12:42:42\n  [10] ./index.js 50 bytes {179} [built]\n  [52] ./chunk.js 401 bytes {284} [built] [3 warnings]\n [285] ./chunk-a.js 27 bytes {285} [built]\n@@ -1146,7 +1146,7 @@ exports[`StatsTestCases should print correct stats for issue-7577 1`] = `\n Child\n     Hash: ee71e92c425768e31996\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                                      Asset       Size          Chunks             Chunk Names\n         a-all-a_js-5ed868390c43e7086a86.js  149 bytes      {all-a_js}  [emitted]\n             a-main-5b1dc11fec11f25eaf1b.js  115 bytes          {main}  [emitted]  main\n@@ -1157,7 +1157,7 @@ Child\n Child\n     Hash: f7d4f5f5ea4a4e51f90c\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                                                        Asset       Size                            Chunks             Chunk Names\n                           b-all-b_js-89c3127ba563ffa436dc.js  502 bytes                        {all-b_js}  [emitted]\n                               b-main-f043bf83e8ebac493a99.js  148 bytes                            {main}  [emitted]  main\n@@ -1170,7 +1170,7 @@ Child\n Child\n     Hash: 20baa71cf13e3ee9f58d\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                                                        Asset       Size                            Chunks             Chunk Names\n                           c-all-b_js-89c3127ba563ffa436dc.js  502 bytes                        {all-b_js}  [emitted]\n                           c-all-c_js-936472833753792cc303.js  369 bytes                        {all-c_js}  [emitted]\n@@ -1189,7 +1189,7 @@ exports[`StatsTestCases should print correct stats for limit-chunk-count-plugin\n Child 1 chunks:\n     Hash: 750fed6497e61cba45be\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  4.32 KiB   {179}  [emitted]  main\n     Entrypoint main = bundle.js\n@@ -1204,7 +1204,7 @@ Child 1 chunks:\n Child 2 chunks:\n     Hash: a521668daa9bc73cff9e\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n             Asset       Size  Chunks             Chunk Names\n     459.bundle.js  673 bytes   {459}  [emitted]  c\n         bundle.js   9.59 KiB   {179}  [emitted]  main\n@@ -1221,7 +1221,7 @@ Child 2 chunks:\n Child 3 chunks:\n     Hash: 7412b78028c74e60f2ef\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n             Asset       Size  Chunks             Chunk Names\n     459.bundle.js  527 bytes   {459}  [emitted]  c\n     524.bundle.js  220 bytes   {524}  [emitted]\n@@ -1240,7 +1240,7 @@ Child 3 chunks:\n Child 4 chunks:\n     Hash: 1c1357d555bededaa2ad\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n             Asset       Size  Chunks             Chunk Names\n     394.bundle.js  220 bytes   {394}  [emitted]\n     459.bundle.js  381 bytes   {459}  [emitted]  c\n@@ -1263,7 +1263,7 @@ Child 4 chunks:\n exports[`StatsTestCases should print correct stats for max-modules 1`] = `\n \"Hash: 6dedb691d9bbeb45d245\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset     Size  Chunks             Chunk Names\n main.js  5.2 KiB   {179}  [emitted]  main\n Entrypoint main = main.js\n@@ -1293,7 +1293,7 @@ Entrypoint main = main.js\n exports[`StatsTestCases should print correct stats for max-modules-default 1`] = `\n \"Hash: 6dedb691d9bbeb45d245\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset     Size  Chunks             Chunk Names\n main.js  5.2 KiB   {179}  [emitted]  main\n Entrypoint main = main.js\n@@ -1318,7 +1318,7 @@ Entrypoint main = main.js\n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n \"Hash: 7f53bd765857c39e8e47\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n Entrypoint main = main.js\n chunk {48} 48.js 68 bytes [rendered]\n   [48] ./node_modules/a/index.js 17 bytes {48} [built]\n@@ -1455,7 +1455,7 @@ If you don't want to include a polyfill, you can use an empty module like this:\n exports[`StatsTestCases should print correct stats for module-reasons 1`] = `\n \"Hash: 1929067a72bea5516d56\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset      Size  Chunks             Chunk Names\n main.js  2.75 KiB   {179}  [emitted]  main\n Entrypoint main = main.js\n@@ -1469,7 +1469,7 @@ Entrypoint main = main.js\n \n exports[`StatsTestCases should print correct stats for module-trace-disabled-in-error 1`] = `\n \"Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset     Size  Chunks  Chunk Names\n main.js  2.1 KiB   {179}  main\n Entrypoint main = main.js\n@@ -1494,7 +1494,7 @@ You may need an appropriate loader to handle this file type, currently no loader\n \n exports[`StatsTestCases should print correct stats for module-trace-enabled-in-error 1`] = `\n \"Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset     Size  Chunks  Chunk Names\n main.js  2.1 KiB   {179}  main\n Entrypoint main = main.js\n@@ -1579,7 +1579,7 @@ Child\n exports[`StatsTestCases should print correct stats for named-chunks-plugin 1`] = `\n \"Hash: ddd8cdb4bb7958c0f3e5\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset       Size    Chunks             Chunk Names\n  entry.js   5.03 KiB   {entry}  [emitted]  entry\n vendor.js  251 bytes  {vendor}  [emitted]  vendor\n@@ -1594,7 +1594,7 @@ Entrypoint entry = vendor.js entry.js\n exports[`StatsTestCases should print correct stats for named-chunks-plugin-async 1`] = `\n \"Hash: 1a5c8a67f4efa36169a8\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n           Asset       Size          Chunks             Chunk Names\n        entry.js   9.46 KiB         {entry}  [emitted]  entry\n modules_a_js.js  312 bytes  {modules_a_js}  [emitted]\n@@ -1609,7 +1609,7 @@ Entrypoint entry = entry.js\n exports[`StatsTestCases should print correct stats for no-emit-on-errors-plugin-with-child-error 1`] = `\n \"Hash: 181c7c6a6c7397755ac2\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset      Size  Chunks  Chunk Names\n bundle.js  1.32 KiB   {179}  main\n  child.js  1.32 KiB\n@@ -1622,7 +1622,7 @@ You can also set it to 'none' to disable any default behavior. Learn more: https\n \n Child child:\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n        Asset      Size  Chunks  Chunk Names\n     child.js  1.32 KiB   {396}  child\n     Entrypoint child = child.js\n@@ -1635,7 +1635,7 @@ Child child:\n exports[`StatsTestCases should print correct stats for optimize-chunks 1`] = `\n \"Hash: 76af1230c05d7555e704\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n             Asset       Size        Chunks             Chunk Names\n             ab.js  163 bytes          {90}  [emitted]  ab\n            abd.js  212 bytes   {90}, {374}  [emitted]  abd\n@@ -1707,7 +1707,7 @@ exports[`StatsTestCases should print correct stats for performance-different-mod\n Child\n     Hash: 0cb4271345c92fd98d1b\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                  Asset     Size  Chunks                    Chunk Names\n     warning.pro-web.js  294 KiB   {179}  [emitted]  [big]  main\n     Entrypoint main [big] = warning.pro-web.js\n@@ -1730,7 +1730,7 @@ Child\n Child\n     Hash: e42be68e259295a826a1\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                        Asset     Size  Chunks                    Chunk Names\n     warning.pro-webworker.js  294 KiB   {179}  [emitted]  [big]  main\n     Entrypoint main [big] = warning.pro-webworker.js\n@@ -1753,39 +1753,39 @@ Child\n Child\n     Hash: d9b55caeaa3e524fc739\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                      Asset     Size  Chunks             Chunk Names\n     no-warning.pro-node.js  294 KiB   {179}  [emitted]  main\n     Entrypoint main = no-warning.pro-node.js\n     [10] ./index.js 293 KiB {179} [built]\n Child\n     Hash: 879b07ceb07a638bd069\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                     Asset      Size  Chunks             Chunk Names\n     no-warning.dev-web.js  1.72 MiB  {main}  [emitted]  main\n     Entrypoint main = no-warning.dev-web.js\n     [./index.js] 293 KiB {main} [built]\n Child\n     Hash: e3e03b4627579e38db36\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                      Asset      Size  Chunks             Chunk Names\n     no-warning.dev-node.js  1.72 MiB  {main}  [emitted]  main\n     Entrypoint main = no-warning.dev-node.js\n     [./index.js] 293 KiB {main} [built]\n Child\n     Hash: 879b07ceb07a638bd069\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                                    Asset      Size  Chunks                    Chunk Names\n     no-warning.dev-web-with-limit-set.js  1.72 MiB  {main}  [emitted]  [big]  main\n     Entrypoint main [big] = no-warning.dev-web-with-limit-set.js\n     [./index.js] 293 KiB {main} [built]\n Child\n     Hash: d9b55caeaa3e524fc739\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n                                  Asset     Size  Chunks                    Chunk Names\n     warning.pro-node-with-hints-set.js  294 KiB   {179}  [emitted]  [big]  main\n     Entrypoint main [big] = warning.pro-node-with-hints-set.js\n@@ -1809,7 +1809,7 @@ Child\n \n exports[`StatsTestCases should print correct stats for performance-disabled 1`] = `\n \"Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>             <CLR=BOLD>Chunk Names</CLR>\n  <CLR=32,BOLD>460.js</CLR>  311 bytes   {<CLR=33,BOLD>460</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n  <CLR=32,BOLD>524.js</CLR>  220 bytes   {<CLR=33,BOLD>524</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n@@ -1827,7 +1827,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n \n exports[`StatsTestCases should print correct stats for performance-error 1`] = `\n \"Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>                    <CLR=BOLD>Chunk Names</CLR>\n  <CLR=32,BOLD>460.js</CLR>  311 bytes   {<CLR=33,BOLD>460</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n  <CLR=32,BOLD>524.js</CLR>  220 bytes   {<CLR=33,BOLD>524</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n@@ -1857,7 +1857,7 @@ Entrypoints:\n \n exports[`StatsTestCases should print correct stats for performance-no-async-chunks-shown 1`] = `\n \"Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>      <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>                    <CLR=BOLD>Chunk Names</CLR>\n <CLR=33,BOLD>main.js</CLR>   <CLR=33,BOLD>295 KiB</CLR>   {<CLR=33,BOLD>179</CLR>}  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n  <CLR=32,BOLD>sec.js</CLR>  1.66 KiB   {<CLR=33,BOLD>295</CLR>}  <CLR=32,BOLD>[emitted]</CLR>         sec\n@@ -1889,7 +1889,7 @@ For more info visit https://webpack.js.org/guides/code-splitting/</CLR>\n \n exports[`StatsTestCases should print correct stats for performance-no-hints 1`] = `\n \"Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>                    <CLR=BOLD>Chunk Names</CLR>\n  <CLR=32,BOLD>460.js</CLR>  311 bytes   {<CLR=33,BOLD>460</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n  <CLR=32,BOLD>524.js</CLR>  220 bytes   {<CLR=33,BOLD>524</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n@@ -1907,7 +1907,7 @@ Entrypoint <CLR=BOLD>main</CLR> <CLR=33,BOLD>[big]</CLR> = <CLR=32,BOLD>main.js<\n \n exports[`StatsTestCases should print correct stats for performance-oversize-limit-error 1`] = `\n \"Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>     <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>                    <CLR=BOLD>Chunk Names</CLR>\n <CLR=33,BOLD>main.js</CLR>  <CLR=33,BOLD>294 KiB</CLR>   {<CLR=33,BOLD>179</CLR>}  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n  <CLR=33,BOLD>sec.js</CLR>  <CLR=33,BOLD>294 KiB</CLR>   {<CLR=33,BOLD>295</CLR>}  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  sec\n@@ -1992,7 +1992,7 @@ chunk {851} preloaded.js (preloaded) 226 bytes (preload: {641} {746}) [rendered]\n exports[`StatsTestCases should print correct stats for preset-detailed 1`] = `\n \"Hash: e144b5c692f359fe416b\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n   Asset       Size  Chunks             Chunk Names\n  460.js  311 bytes   {460}  [emitted]\n@@ -2065,7 +2065,7 @@ exports[`StatsTestCases should print correct stats for preset-none-error 1`] = `\n exports[`StatsTestCases should print correct stats for preset-normal 1`] = `\n \"Hash: e144b5c692f359fe416b\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset       Size  Chunks             Chunk Names\n  460.js  311 bytes   {460}  [emitted]\n  524.js  220 bytes   {524}  [emitted]\n@@ -2083,7 +2083,7 @@ Entrypoint main = main.js\n \n exports[`StatsTestCases should print correct stats for preset-normal-performance 1`] = `\n \"Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n   <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>                    <CLR=BOLD>Chunk Names</CLR>\n  <CLR=32,BOLD>460.js</CLR>  311 bytes   {<CLR=33,BOLD>460</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n  <CLR=32,BOLD>524.js</CLR>  220 bytes   {<CLR=33,BOLD>524</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n@@ -2113,7 +2113,7 @@ Entrypoints:\n \n exports[`StatsTestCases should print correct stats for preset-normal-performance-ensure-filter-sourcemaps 1`] = `\n \"Time: <CLR=BOLD>X</CLR>ms\n-Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n+Built at: 1970-04-20 <CLR=BOLD>12:42:42</CLR>\n       <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>                    <CLR=BOLD>Chunk Names</CLR>\n      <CLR=32,BOLD>460.js</CLR>  343 bytes   {<CLR=33,BOLD>460</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n  <CLR=32,BOLD>460.js.map</CLR>  212 bytes   {<CLR=33,BOLD>460</CLR>}  <CLR=32,BOLD>[emitted]</CLR>\n@@ -2148,7 +2148,7 @@ Entrypoints:\n exports[`StatsTestCases should print correct stats for preset-verbose 1`] = `\n \"Hash: e144b5c692f359fe416b\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n   Asset       Size  Chunks             Chunk Names\n  460.js  311 bytes   {460}  [emitted]\n@@ -2205,7 +2205,7 @@ chunk {996} 996.js 22 bytes <{179}> [rendered]\n exports[`StatsTestCases should print correct stats for resolve-plugin-context 1`] = `\n \"Hash: 85e11a6602a88ff9ce38\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset      Size  Chunks             Chunk Names\n bundle.js  1.77 KiB   {179}  [emitted]  main\n Entrypoint main = bundle.js\n@@ -2219,7 +2219,7 @@ Entrypoint main = bundle.js\n exports[`StatsTestCases should print correct stats for reverse-sort-modules 1`] = `\n \"Hash: 6dedb691d9bbeb45d245\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset     Size  Chunks             Chunk Names\n main.js  5.2 KiB   {179}  [emitted]  main\n Entrypoint main = main.js\n@@ -2291,7 +2291,7 @@ Entrypoint e2 = runtime.js e2.js\"\n exports[`StatsTestCases should print correct stats for scope-hoisting-bailouts 1`] = `\n \"Hash: 1d9ddee6d747795b5c8b\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n Entrypoint index = index.js\n Entrypoint entry = entry.js\n  [10] ./index.js 150 bytes {826} [built]\n@@ -2323,7 +2323,7 @@ exports[`StatsTestCases should print correct stats for scope-hoisting-multi 1`]\n Child\n     Hash: 6aedb7431098670b8480\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n     Entrypoint first = vendor.js first.js\n     Entrypoint second = vendor.js second.js\n       [1] ./lazy_second.js 55 bytes {199} [built]\n@@ -2341,7 +2341,7 @@ Child\n Child\n     Hash: d69784d6d58815dc5161\n     Time: Xms\n-    Built at: Thu Jan 01 1970 00:00:00 GMT\n+    Built at: 1970-04-20 12:42:42\n     Entrypoint first = vendor.js first.js\n     Entrypoint second = vendor.js second.js\n       [1] ./lazy_second.js 55 bytes {199} [built]\n@@ -2368,7 +2368,7 @@ Child\n exports[`StatsTestCases should print correct stats for side-effects-issue-7428 1`] = `\n \"Hash: a9799fc9d42f147ee886\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset       Size  Chunks             Chunk Names\n    1.js  478 bytes     {1}  [emitted]\n main.js   10.2 KiB     {0}  [emitted]  main\n@@ -2417,7 +2417,7 @@ Entrypoint main = main.js\n exports[`StatsTestCases should print correct stats for side-effects-simple-unused 1`] = `\n \"Hash: 8552e7b59b452ccb1138\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n   Asset      Size  Chunks             Chunk Names\n main.js  2.75 KiB   {179}  [emitted]  main\n Entrypoint main = main.js\n@@ -2449,7 +2449,7 @@ Entrypoint main = main.js\n exports[`StatsTestCases should print correct stats for simple 1`] = `\n \"Hash: d2f113be882957f6df67\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset      Size  Chunks             Chunk Names\n bundle.js  1.55 KiB  {main}  [emitted]  main\n Entrypoint main = bundle.js\n@@ -2459,7 +2459,7 @@ Entrypoint main = bundle.js\n exports[`StatsTestCases should print correct stats for simple-more-info 1`] = `\n \"Hash: a035b8d43e7113865ae3\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n PublicPath: (none)\n     Asset      Size  Chunks             Chunk Names\n bundle.js  1.32 KiB   {179}  [emitted]  main\n@@ -3449,7 +3449,7 @@ chunk {794} default/async-a.js (async-a) 134 bytes <{179}> [rendered]\n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n \"Hash: de7fafb0f5388d3c7fbe\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset     Size  Chunks             Chunk Names\n bundle.js  7.6 KiB   {179}  [emitted]  main\n Entrypoint main = bundle.js\n@@ -3487,7 +3487,7 @@ Entrypoint main = bundle.js\n exports[`StatsTestCases should print correct stats for warnings-terser 1`] = `\n \"Hash: c47fdd999f1a10b40d83\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n     Asset      Size  Chunks             Chunk Names\n bundle.js  1.32 KiB   {179}  [emitted]  main\n Entrypoint main = bundle.js\n@@ -3510,7 +3510,7 @@ WARNING in Terser Plugin: Dropping unused function someUnRemoteUsedFunction5 [./\n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n \"Hash: 8c3293703d1d55ebe60f\n Time: Xms\n-Built at: Thu Jan 01 1970 00:00:00 GMT\n+Built at: 1970-04-20 12:42:42\n                            Asset       Size  Chunks             Chunk Names\n 1d55f77c08cd19684f13.module.wasm  154 bytes   {325}  [emitted]\n 200c03abdc3f4ae1e15c.module.wasm  290 bytes   {780}  [emitted]"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9933",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9933/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9933/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9933/events",
    "html_url": "https://github.com/webpack/webpack/pull/9933",
    "id": 517857808,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzM2ODQ2OTU5",
    "number": 9933,
    "title": "fix problem with snapshotting managed items",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-11-05T15:50:11Z",
    "updated_at": "2019-11-06T00:06:29Z",
    "closed_at": "2019-11-06T00:06:28Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9933",
      "html_url": "https://github.com/webpack/webpack/pull/9933",
      "diff_url": "https://github.com/webpack/webpack/pull/9933.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9933.patch",
      "merged_at": "2019-11-06T00:06:28Z"
    },
    "body": "* fix problem with snapshotting managed items\r\n* add support for child loggers\r\n* add logging for snapshot errors\r\n* improve FileSystemInfo logging\r\n* improve managed item reading performance\r\n* upgrade enhanced-resolve for readdir purge fix\r\n* fix WatchIgnorePlugin\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9933/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "3898d2e9d52e905e110762f883c66d8091ccac52",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 97,
        "deletions": 42,
        "changes": 139,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -692,57 +692,112 @@ class Compilation {\n \t\t}\n \t\t/** @type {LogEntry[] | undefined} */\n \t\tlet logEntries;\n-\t\treturn new Logger((type, args) => {\n-\t\t\tif (typeof name === \"function\") {\n-\t\t\t\tname = name();\n-\t\t\t\tif (!name) {\n-\t\t\t\t\tthrow new TypeError(\n-\t\t\t\t\t\t\"Compilation.getLogger(name) called with a function not returning a name\"\n-\t\t\t\t\t);\n+\t\treturn new Logger(\n+\t\t\t(type, args) => {\n+\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\tname = name();\n+\t\t\t\t\tif (!name) {\n+\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\"Compilation.getLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t}\n-\t\t\tlet trace;\n-\t\t\tswitch (type) {\n-\t\t\t\tcase LogType.warn:\n-\t\t\t\tcase LogType.error:\n-\t\t\t\tcase LogType.trace:\n-\t\t\t\t\ttrace = ErrorHelpers.cutOffLoaderExecution(new Error(\"Trace\").stack)\n-\t\t\t\t\t\t.split(\"\\n\")\n-\t\t\t\t\t\t.slice(3);\n-\t\t\t\t\tbreak;\n-\t\t\t}\n-\t\t\t/** @type {LogEntry} */\n-\t\t\tconst logEntry = {\n-\t\t\t\ttime: Date.now(),\n-\t\t\t\ttype,\n-\t\t\t\targs,\n-\t\t\t\ttrace\n-\t\t\t};\n-\t\t\tif (this.hooks.log.call(name, logEntry) === undefined) {\n-\t\t\t\tif (logEntry.type === LogType.profileEnd) {\n-\t\t\t\t\t// eslint-disable-next-line node/no-unsupported-features/node-builtins\n-\t\t\t\t\tif (typeof console.profileEnd === \"function\") {\n+\t\t\t\tlet trace;\n+\t\t\t\tswitch (type) {\n+\t\t\t\t\tcase LogType.warn:\n+\t\t\t\t\tcase LogType.error:\n+\t\t\t\t\tcase LogType.trace:\n+\t\t\t\t\t\ttrace = ErrorHelpers.cutOffLoaderExecution(new Error(\"Trace\").stack)\n+\t\t\t\t\t\t\t.split(\"\\n\")\n+\t\t\t\t\t\t\t.slice(3);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\t/** @type {LogEntry} */\n+\t\t\t\tconst logEntry = {\n+\t\t\t\t\ttime: Date.now(),\n+\t\t\t\t\ttype,\n+\t\t\t\t\targs,\n+\t\t\t\t\ttrace\n+\t\t\t\t};\n+\t\t\t\tif (this.hooks.log.call(name, logEntry) === undefined) {\n+\t\t\t\t\tif (logEntry.type === LogType.profileEnd) {\n \t\t\t\t\t\t// eslint-disable-next-line node/no-unsupported-features/node-builtins\n-\t\t\t\t\t\tconsole.profileEnd(`[${name}] ${logEntry.args[0]}`);\n+\t\t\t\t\t\tif (typeof console.profileEnd === \"function\") {\n+\t\t\t\t\t\t\t// eslint-disable-next-line node/no-unsupported-features/node-builtins\n+\t\t\t\t\t\t\tconsole.profileEnd(`[${name}] ${logEntry.args[0]}`);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\tif (logEntries === undefined) {\n-\t\t\t\t\tlogEntries = this.logging.get(name);\n \t\t\t\t\tif (logEntries === undefined) {\n-\t\t\t\t\t\tlogEntries = [];\n-\t\t\t\t\t\tthis.logging.set(name, logEntries);\n+\t\t\t\t\t\tlogEntries = this.logging.get(name);\n+\t\t\t\t\t\tif (logEntries === undefined) {\n+\t\t\t\t\t\t\tlogEntries = [];\n+\t\t\t\t\t\t\tthis.logging.set(name, logEntries);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\tlogEntries.push(logEntry);\n-\t\t\t\tif (logEntry.type === LogType.profile) {\n-\t\t\t\t\t// eslint-disable-next-line node/no-unsupported-features/node-builtins\n-\t\t\t\t\tif (typeof console.profile === \"function\") {\n+\t\t\t\t\tlogEntries.push(logEntry);\n+\t\t\t\t\tif (logEntry.type === LogType.profile) {\n \t\t\t\t\t\t// eslint-disable-next-line node/no-unsupported-features/node-builtins\n-\t\t\t\t\t\tconsole.profile(`[${name}] ${logEntry.args[0]}`);\n+\t\t\t\t\t\tif (typeof console.profile === \"function\") {\n+\t\t\t\t\t\t\t// eslint-disable-next-line node/no-unsupported-features/node-builtins\n+\t\t\t\t\t\t\tconsole.profile(`[${name}] ${logEntry.args[0]}`);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t},\n+\t\t\tchildName => {\n+\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\treturn this.getLogger(() => {\n+\t\t\t\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\t\t\t\tname = name();\n+\t\t\t\t\t\t\t\tif (!name) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Compilation.getLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\t\t\tchildName = childName();\n+\t\t\t\t\t\t\t\tif (!childName) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Logger.getChildLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn `${name}/${childName}`;\n+\t\t\t\t\t\t});\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\treturn this.getLogger(() => {\n+\t\t\t\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\t\t\t\tname = name();\n+\t\t\t\t\t\t\t\tif (!name) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Compilation.getLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn `${name}/${childName}`;\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\treturn this.getLogger(() => {\n+\t\t\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\t\t\tchildName = childName();\n+\t\t\t\t\t\t\t\tif (!childName) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Logger.getChildLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn `${name}/${childName}`;\n+\t\t\t\t\t\t});\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\treturn this.getLogger(`${name}/${childName}`);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n-\t\t});\n+\t\t);\n \t}\n \n \t/**"
      },
      {
        "sha": "d2f44af329d310ae0c0352e76ac519f425011279",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 67,
        "deletions": 12,
        "changes": 79,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -232,21 +232,76 @@ class Compiler {\n \t\t\t\t\"Compiler.getInfrastructureLogger(name) called without a name\"\n \t\t\t);\n \t\t}\n-\t\treturn new Logger((type, args) => {\n-\t\t\tif (typeof name === \"function\") {\n-\t\t\t\tname = name();\n-\t\t\t\tif (!name) {\n-\t\t\t\t\tthrow new TypeError(\n-\t\t\t\t\t\t\"Compiler.getInfrastructureLogger(name) called with a function not returning a name\"\n-\t\t\t\t\t);\n+\t\treturn new Logger(\n+\t\t\t(type, args) => {\n+\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\tname = name();\n+\t\t\t\t\tif (!name) {\n+\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\"Compiler.getInfrastructureLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t}\n-\t\t\tif (this.hooks.infrastructureLog.call(name, type, args) === undefined) {\n-\t\t\t\tif (this.infrastructureLogger !== undefined) {\n-\t\t\t\t\tthis.infrastructureLogger(name, type, args);\n+\t\t\t\tif (this.hooks.infrastructureLog.call(name, type, args) === undefined) {\n+\t\t\t\t\tif (this.infrastructureLogger !== undefined) {\n+\t\t\t\t\t\tthis.infrastructureLogger(name, type, args);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t},\n+\t\t\tchildName => {\n+\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\treturn this.getInfrastructureLogger(() => {\n+\t\t\t\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\t\t\t\tname = name();\n+\t\t\t\t\t\t\t\tif (!name) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Compiler.getInfrastructureLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\t\t\tchildName = childName();\n+\t\t\t\t\t\t\t\tif (!childName) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Logger.getChildLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn `${name}/${childName}`;\n+\t\t\t\t\t\t});\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\treturn this.getInfrastructureLogger(() => {\n+\t\t\t\t\t\t\tif (typeof name === \"function\") {\n+\t\t\t\t\t\t\t\tname = name();\n+\t\t\t\t\t\t\t\tif (!name) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Compiler.getInfrastructureLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn `${name}/${childName}`;\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\treturn this.getInfrastructureLogger(() => {\n+\t\t\t\t\t\t\tif (typeof childName === \"function\") {\n+\t\t\t\t\t\t\t\tchildName = childName();\n+\t\t\t\t\t\t\t\tif (!childName) {\n+\t\t\t\t\t\t\t\t\tthrow new TypeError(\n+\t\t\t\t\t\t\t\t\t\t\"Logger.getChildLogger(name) called with a function not returning a name\"\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn `${name}/${childName}`;\n+\t\t\t\t\t\t});\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\treturn this.getInfrastructureLogger(`${name}/${childName}`);\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n-\t\t});\n+\t\t);\n \t}\n \n \t/**"
      },
      {
        "sha": "5697ae4a0f452eec5009474bf8c63514007587e0",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 131,
        "deletions": 39,
        "changes": 170,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -21,6 +21,8 @@ const resolveContext = resolve.create({\n \n let FS_ACCURACY = 2000;\n \n+const EMPTY_SET = new Set();\n+\n const RBDT_RESOLVE = 0;\n const RBDT_RESOLVE_DIRECTORY = 1;\n const RBDT_RESOLVE_FILE = 2;\n@@ -41,11 +43,11 @@ const INVALID = Symbol(\"invalid\");\n /**\n  * @typedef {Object} Snapshot\n  * @property {number=} startTime\n- * @property {Map<string, FileSystemInfoEntry | \"error\">=} fileTimestamps\n+ * @property {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">=} fileTimestamps\n  * @property {Map<string, string | \"error\">=} fileHashes\n- * @property {Map<string, FileSystemInfoEntry | \"error\">=} contextTimestamps\n+ * @property {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">=} contextTimestamps\n  * @property {Map<string, string | \"error\">=} contextHashes\n- * @property {Map<string, FileSystemInfoEntry | \"error\">=} missingTimestamps\n+ * @property {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">=} missingTimestamps\n  * @property {Map<string, string | \"error\">=} managedItemInfo\n  */\n \n@@ -143,6 +145,7 @@ const getManagedItem = (managedPath, path) => {\n \tif (slashes !== 0) return null;\n \t// if (path.slice(i + 1, i + 13) === \"node_modules\")\n \tif (\n+\t\tpath.length >= i + 13 &&\n \t\tpath.charCodeAt(i + 1) === 110 &&\n \t\tpath.charCodeAt(i + 2) === 111 &&\n \t\tpath.charCodeAt(i + 3) === 100 &&\n@@ -156,6 +159,12 @@ const getManagedItem = (managedPath, path) => {\n \t\tpath.charCodeAt(i + 11) === 101 &&\n \t\tpath.charCodeAt(i + 12) === 115\n \t) {\n+\t\t// if this is the end of the path\n+\t\tif (path.length === i + 13) {\n+\t\t\t// return the node_modules directory\n+\t\t\t// it's special\n+\t\t\treturn path;\n+\t\t}\n \t\tconst c = path.charCodeAt(i + 13);\n \t\t// if next symbol is slash or backslash\n \t\tif (c === 47 || c === 92) {\n@@ -184,11 +193,11 @@ class FileSystemInfo {\n \t\tthis._loggedPaths = logger ? new Set() : undefined;\n \t\t/** @type {WeakMap<Snapshot, boolean | (function(WebpackError=, boolean=): void)[]>} */\n \t\tthis._snapshotCache = new WeakMap();\n-\t\t/** @type {Map<string, FileSystemInfoEntry | null>} */\n+\t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | null>} */\n \t\tthis._fileTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tthis._fileHashes = new Map();\n-\t\t/** @type {Map<string, FileSystemInfoEntry | null>} */\n+\t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | null>} */\n \t\tthis._contextTimestamps = new Map();\n \t\t/** @type {Map<string, string>} */\n \t\tthis._contextHashes = new Map();\n@@ -219,6 +228,11 @@ class FileSystemInfo {\n \t\t\tparallelism: 10,\n \t\t\tprocessor: this._getManagedItemInfo.bind(this)\n \t\t});\n+\t\tthis.managedItemDirectoryQueue = new AsyncQueue({\n+\t\t\tname: \"managed item directory info\",\n+\t\t\tparallelism: 10,\n+\t\t\tprocessor: this._getManagedItemDirectoryInfo.bind(this)\n+\t\t});\n \t\tthis.managedPaths = Array.from(managedPaths);\n \t\tthis.managedPathsWithSlash = this.managedPaths.map(p =>\n \t\t\tjoin(fs, p, \"_\").slice(0, -1)\n@@ -241,7 +255,7 @@ class FileSystemInfo {\n \t}\n \n \t/**\n-\t * @param {Map<string, FileSystemInfoEntry | null>} map timestamps\n+\t * @param {Map<string, FileSystemInfoEntry | \"ignore\" | null>} map timestamps\n \t * @returns {void}\n \t */\n \taddFileTimestamps(map) {\n@@ -251,7 +265,7 @@ class FileSystemInfo {\n \t}\n \n \t/**\n-\t * @param {Map<string, FileSystemInfoEntry | null>} map timestamps\n+\t * @param {Map<string, FileSystemInfoEntry | \"ignore\" | null>} map timestamps\n \t * @returns {void}\n \t */\n \taddContextTimestamps(map) {\n@@ -262,7 +276,7 @@ class FileSystemInfo {\n \n \t/**\n \t * @param {string} path file path\n-\t * @param {function(WebpackError=, FileSystemInfoEntry=): void} callback callback function\n+\t * @param {function(WebpackError=, (FileSystemInfoEntry | \"ignore\")=): void} callback callback function\n \t * @returns {void}\n \t */\n \tgetFileTimestamp(path, callback) {\n@@ -273,7 +287,7 @@ class FileSystemInfo {\n \n \t/**\n \t * @param {string} path context path\n-\t * @param {function(WebpackError=, FileSystemInfoEntry=): void} callback callback function\n+\t * @param {function(WebpackError=, (FileSystemInfoEntry | \"ignore\")=): void} callback callback function\n \t * @returns {void}\n \t */\n \tgetContextTimestamp(path, callback) {\n@@ -643,15 +657,15 @@ class FileSystemInfo {\n \t * @returns {void}\n \t */\n \tcreateSnapshot(startTime, files, directories, missing, options, callback) {\n-\t\t/** @type {Map<string, FileSystemInfoEntry | \"error\">} */\n+\t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">} */\n \t\tconst fileTimestamps = new Map();\n \t\t/** @type {Map<string, string | \"error\">} */\n \t\tconst fileHashes = new Map();\n-\t\t/** @type {Map<string, FileSystemInfoEntry | \"error\">} */\n+\t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">} */\n \t\tconst contextTimestamps = new Map();\n \t\t/** @type {Map<string, string | \"error\">} */\n \t\tconst contextHashes = new Map();\n-\t\t/** @type {Map<string, FileSystemInfoEntry | \"error\">} */\n+\t\t/** @type {Map<string, FileSystemInfoEntry | \"ignore\" | \"error\">} */\n \t\tconst missingTimestamps = new Map();\n \t\t/** @type {Map<string, string | \"error\">} */\n \t\tconst managedItemInfo = new Map();\n@@ -699,6 +713,11 @@ class FileSystemInfo {\n \t\t\t\t\t\tjobs++;\n \t\t\t\t\t\tthis.fileHashQueue.add(path, (err, entry) => {\n \t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t`Error snapshotting file hash of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tfileHashes.set(path, \"error\");\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\tfileHashes.set(path, entry);\n@@ -730,6 +749,11 @@ class FileSystemInfo {\n \t\t\t\t\t\tjobs++;\n \t\t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n \t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t`Error snapshotting file timestamp of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tfileTimestamps.set(path, \"error\");\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\tfileTimestamps.set(path, entry);\n@@ -764,6 +788,11 @@ class FileSystemInfo {\n \t\t\t\t\t\tjobs++;\n \t\t\t\t\t\tthis.contextHashQueue.add(path, (err, entry) => {\n \t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t`Error snapshotting context hash of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tcontextHashes.set(path, \"error\");\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\tcontextHashes.set(path, entry);\n@@ -795,6 +824,11 @@ class FileSystemInfo {\n \t\t\t\t\t\tjobs++;\n \t\t\t\t\t\tthis.contextTimestampQueue.add(path, (err, entry) => {\n \t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t\t`Error snapshotting context timestamp of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tcontextTimestamps.set(path, \"error\");\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\tcontextTimestamps.set(path, entry);\n@@ -828,6 +862,11 @@ class FileSystemInfo {\n \t\t\t\t\tjobs++;\n \t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n \t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t\t`Error snapshotting missing timestamp of ${path}: ${err}`\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tmissingTimestamps.set(path, \"error\");\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tmissingTimestamps.set(path, entry);\n@@ -840,11 +879,16 @@ class FileSystemInfo {\n \t\tfor (const path of managedItems) {\n \t\t\tconst cache = this._managedItems.get(path);\n \t\t\tif (cache !== undefined) {\n-\t\t\t\tmanagedItemInfo.set(path, cache || \"error\");\n+\t\t\t\tmanagedItemInfo.set(path, cache);\n \t\t\t} else {\n \t\t\t\tjobs++;\n \t\t\t\tthis.managedItemQueue.add(path, (err, entry) => {\n-\t\t\t\t\tif (err || !entry) {\n+\t\t\t\t\tif (err) {\n+\t\t\t\t\t\tif (this.logger) {\n+\t\t\t\t\t\t\tthis.logger.debug(\n+\t\t\t\t\t\t\t\t`Error snapshotting managed item ${path}: ${err}`\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tmanagedItemInfo.set(path, \"error\");\n \t\t\t\t\t} else {\n \t\t\t\t\t\tmanagedItemInfo.set(path, entry);\n@@ -964,7 +1008,7 @@ class FileSystemInfo {\n \t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n \t\t\t\t// we can't compare further data and assume it's invalid\n \t\t\t\tif (this._remainingLogs > 0) {\n-\t\t\t\t\tthis._log(path, `there was an error during snapshotting`);\n+\t\t\t\t\tthis._log(path, `there was an error during snapshotting hash`);\n \t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n@@ -979,19 +1023,21 @@ class FileSystemInfo {\n \t\t};\n \t\t/**\n \t\t * @param {string} path file path\n-\t\t * @param {FileSystemInfoEntry} current current entry\n-\t\t * @param {FileSystemInfoEntry | \"error\"} snap entry from snapshot\n+\t\t * @param {FileSystemInfoEntry | \"ignore\"} current current entry\n+\t\t * @param {FileSystemInfoEntry | \"ignore\" | \"error\"} snap entry from snapshot\n \t\t * @returns {boolean} true, if ok\n \t\t */\n \t\tconst checkExistance = (path, current, snap) => {\n \t\t\tif (snap === \"error\") {\n \t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n \t\t\t\t// we can't compare further data and assume it's invalid\n \t\t\t\tif (this._remainingLogs > 0) {\n-\t\t\t\t\tthis._log(path, `there was an error during snapshotting`);\n+\t\t\t\t\tthis._log(path, `there was an error during snapshotting existance`);\n \t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n+\t\t\tif (current === \"ignore\") return true;\n+\t\t\tif (snap === \"ignore\") return true;\n \t\t\tif (!current !== !snap) {\n \t\t\t\t// If existance of item differs\n \t\t\t\t// it's invalid\n@@ -1007,19 +1053,24 @@ class FileSystemInfo {\n \t\t};\n \t\t/**\n \t\t * @param {string} path file path\n-\t\t * @param {FileSystemInfoEntry} current current entry\n-\t\t * @param {FileSystemInfoEntry | \"error\"} snap entry from snapshot\n+\t\t * @param {FileSystemInfoEntry | \"ignore\"} current current entry\n+\t\t * @param {FileSystemInfoEntry | \"ignore\" | \"error\"} snap entry from snapshot\n \t\t * @returns {boolean} true, if ok\n \t\t */\n \t\tconst checkFile = (path, current, snap) => {\n \t\t\tif (snap === \"error\") {\n \t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n \t\t\t\t// we can't compare further data and assume it's invalid\n \t\t\t\tif (this._remainingLogs > 0) {\n-\t\t\t\t\tthis._log(path, `there was an error during snapshotting`);\n+\t\t\t\t\tthis._log(\n+\t\t\t\t\t\tpath,\n+\t\t\t\t\t\t`there was an error during snapshotting file timestamp`\n+\t\t\t\t\t);\n \t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n+\t\t\tif (current === \"ignore\") return true;\n+\t\t\tif (snap === \"ignore\") return true;\n \t\t\tif (current && current.safeTime > startTime) {\n \t\t\t\t// If a change happened after starting reading the item\n \t\t\t\t// this may no longer be valid\n@@ -1292,7 +1343,7 @@ class FileSystemInfo {\n \t\t\t\t\t\t\t\tconst managedItem = getManagedItem(managedPath, child);\n \t\t\t\t\t\t\t\tif (managedItem) {\n \t\t\t\t\t\t\t\t\t// construct timestampHash from managed info\n-\t\t\t\t\t\t\t\t\treturn this.managedItemQueue.add(child, (err, info) => {\n+\t\t\t\t\t\t\t\t\treturn this.managedItemQueue.add(managedItem, (err, info) => {\n \t\t\t\t\t\t\t\t\t\tif (err) return callback(err);\n \t\t\t\t\t\t\t\t\t\treturn callback(null, {\n \t\t\t\t\t\t\t\t\t\t\tsafeTime: 0,\n@@ -1386,7 +1437,7 @@ class FileSystemInfo {\n \t\t\t\t\t\t\t\tconst managedItem = getManagedItem(managedPath, child);\n \t\t\t\t\t\t\t\tif (managedItem) {\n \t\t\t\t\t\t\t\t\t// construct hash from managed info\n-\t\t\t\t\t\t\t\t\treturn this.managedItemQueue.add(child, (err, info) => {\n+\t\t\t\t\t\t\t\t\treturn this.managedItemQueue.add(managedItem, (err, info) => {\n \t\t\t\t\t\t\t\t\t\tif (err) return callback(err);\n \t\t\t\t\t\t\t\t\t\tcallback(null, info || \"\");\n \t\t\t\t\t\t\t\t\t});\n@@ -1427,41 +1478,82 @@ class FileSystemInfo {\n \t\t});\n \t}\n \n-\t_getManagedItemInfo(path, callback) {\n-\t\tconst packageJsonPath = join(this.fs, path, \"package.json\");\n-\t\tthis.fs.readFile(packageJsonPath, (err, content) => {\n+\t_getManagedItemDirectoryInfo(path, callback) {\n+\t\tthis.fs.readdir(path, (err, elements) => {\n \t\t\tif (err) {\n \t\t\t\tif (err.code === \"ENOENT\" || err.code === \"ENOTDIR\") {\n-\t\t\t\t\t// no package.json or path is not a directory\n-\t\t\t\t\tthis._managedItems.set(path, null);\n-\t\t\t\t\treturn callback(null, null);\n+\t\t\t\t\treturn callback(null, EMPTY_SET);\n \t\t\t\t}\n \t\t\t\treturn callback(err);\n \t\t\t}\n-\t\t\tlet data;\n-\t\t\ttry {\n-\t\t\t\tdata = JSON.parse(content.toString(\"utf-8\"));\n-\t\t\t} catch (e) {\n-\t\t\t\treturn callback(e);\n+\t\t\tconst set = new Set(\n+\t\t\t\telements.map(element => join(this.fs, path, element))\n+\t\t\t);\n+\t\t\tcallback(null, set);\n+\t\t});\n+\t}\n+\n+\t_getManagedItemInfo(path, callback) {\n+\t\tconst dir = dirname(this.fs, path);\n+\t\tthis.managedItemDirectoryQueue.add(dir, (err, elements) => {\n+\t\t\tif (err) {\n+\t\t\t\treturn callback(err);\n+\t\t\t}\n+\t\t\tif (!elements.has(path)) {\n+\t\t\t\t// file or directory doesn't exist\n+\t\t\t\tthis._managedItems.set(path, \"missing\");\n+\t\t\t\treturn callback(null, \"missing\");\n+\t\t\t}\n+\t\t\t// something exists\n+\t\t\t// it may be a file or directory\n+\t\t\tif (\n+\t\t\t\tpath.endsWith(\"node_modules\") &&\n+\t\t\t\t(path.endsWith(\"/node_modules\") || path.endsWith(\"\\\\node_modules\"))\n+\t\t\t) {\n+\t\t\t\t// we are only interested in existance of this special directory\n+\t\t\t\tthis._managedItems.set(path, \"exists\");\n+\t\t\t\treturn callback(null, \"exists\");\n \t\t\t}\n-\t\t\tconst info = `${data.name || \"\"}@${data.version || \"\"}`;\n-\t\t\tthis._managedItems.set(path, info);\n-\t\t\tcallback(null, info);\n+\n+\t\t\t// we assume it's a directory, as files shouldn't occur in managed paths\n+\t\t\tconst packageJsonPath = join(this.fs, path, \"package.json\");\n+\t\t\tthis.fs.readFile(packageJsonPath, (err, content) => {\n+\t\t\t\tif (err) {\n+\t\t\t\t\tif (err.code === \"ENOENT\" || err.code === \"ENOTDIR\") {\n+\t\t\t\t\t\t// no package.json or path is not a directory\n+\t\t\t\t\t\tthis.logger.warn(\n+\t\t\t\t\t\t\t`Managed item ${path} isn't a directory or doesn't contain a package.json`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tthis._managedItems.set(path, \"error\");\n+\t\t\t\t\t\treturn callback(null, \"error\");\n+\t\t\t\t\t}\n+\t\t\t\t\treturn callback(err);\n+\t\t\t\t}\n+\t\t\t\tlet data;\n+\t\t\t\ttry {\n+\t\t\t\t\tdata = JSON.parse(content.toString(\"utf-8\"));\n+\t\t\t\t} catch (e) {\n+\t\t\t\t\treturn callback(e);\n+\t\t\t\t}\n+\t\t\t\tconst info = `${data.name || \"\"}@${data.version || \"\"}`;\n+\t\t\t\tthis._managedItems.set(path, info);\n+\t\t\t\tcallback(null, info);\n+\t\t\t});\n \t\t});\n \t}\n \n \tgetDeprecatedFileTimestamps() {\n \t\tconst map = new Map();\n \t\tfor (const [path, info] of this._fileTimestamps) {\n-\t\t\tif (info) map.set(path, info.safeTime);\n+\t\t\tif (info) map.set(path, typeof info === \"object\" ? info.safeTime : null);\n \t\t}\n \t\treturn map;\n \t}\n \n \tgetDeprecatedContextTimestamps() {\n \t\tconst map = new Map();\n \t\tfor (const [path, info] of this._contextTimestamps) {\n-\t\t\tif (info) map.set(path, info.safeTime);\n+\t\t\tif (info) map.set(path, typeof info === \"object\" ? info.safeTime : null);\n \t\t}\n \t\treturn map;\n \t}"
      },
      {
        "sha": "d808bdd3e350728dc5eeb6ce27fca1707fe40ff3",
        "filename": "lib/WatchIgnorePlugin.js",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FWatchIgnorePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2FWatchIgnorePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWatchIgnorePlugin.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -11,6 +11,8 @@ const schema = require(\"../schemas/plugins/WatchIgnorePlugin.json\");\n /** @typedef {import(\"../declarations/plugins/WatchIgnorePlugin\").WatchIgnorePluginOptions} WatchIgnorePluginOptions */\n /** @typedef {import(\"./Compiler\")} Compiler */\n \n+const IGNORE_TIME_ENTRY = \"ignore\";\n+\n class IgnoringWatchFileSystem {\n \tconstructor(wfs, paths) {\n \t\tthis.wfs = wfs;\n@@ -37,11 +39,11 @@ class IgnoringWatchFileSystem {\n \t\t\t(err, fileTimestamps, dirTimestamps, removedFiles) => {\n \t\t\t\tif (err) return callback(err);\n \t\t\t\tfor (const path of ignoredFiles) {\n-\t\t\t\t\tfileTimestamps.set(path, 1);\n+\t\t\t\t\tfileTimestamps.set(path, IGNORE_TIME_ENTRY);\n \t\t\t\t}\n \n \t\t\t\tfor (const path of ignoredDirs) {\n-\t\t\t\t\tdirTimestamps.set(path, 1);\n+\t\t\t\t\tdirTimestamps.set(path, IGNORE_TIME_ENTRY);\n \t\t\t\t}\n \n \t\t\t\tcallback(err, fileTimestamps, dirTimestamps, removedFiles);\n@@ -55,14 +57,14 @@ class IgnoringWatchFileSystem {\n \t\t\tgetContextInfoEntries: () => {\n \t\t\t\tconst dirTimestamps = watcher.getContextInfoEntries();\n \t\t\t\tfor (const path of ignoredDirs) {\n-\t\t\t\t\tdirTimestamps.set(path, 1);\n+\t\t\t\t\tdirTimestamps.set(path, IGNORE_TIME_ENTRY);\n \t\t\t\t}\n \t\t\t\treturn dirTimestamps;\n \t\t\t},\n \t\t\tgetFileTimeInfoEntries: () => {\n \t\t\t\tconst fileTimestamps = watcher.getFileTimeInfoEntries();\n \t\t\t\tfor (const path of ignoredFiles) {\n-\t\t\t\t\tfileTimestamps.set(path, 1);\n+\t\t\t\t\tfileTimestamps.set(path, IGNORE_TIME_ENTRY);\n \t\t\t\t}\n \t\t\t\treturn fileTimestamps;\n \t\t\t}"
      },
      {
        "sha": "979a746bc77c269840136499d762e48e9d69eaa9",
        "filename": "lib/cache/PackFileCacheStrategy.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2Fcache%2FPackFileCacheStrategy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2Fcache%2FPackFileCacheStrategy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FPackFileCacheStrategy.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -288,7 +288,8 @@ class PackFileCacheStrategy {\n \t\tthis.fileSerializer = createFileSerializer(fs);\n \t\tthis.fileSystemInfo = new FileSystemInfo(fs, {\n \t\t\tmanagedPaths,\n-\t\t\timmutablePaths\n+\t\t\timmutablePaths,\n+\t\t\tlogger: logger.getChildLogger(\"webpack.FileSystemInfo\")\n \t\t});\n \t\tthis.context = context;\n \t\tthis.cacheLocation = cacheLocation;"
      },
      {
        "sha": "a63db818e72cda3511d3f094b2cba349991cd81c",
        "filename": "lib/logging/Logger.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2Flogging%2FLogger.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2Flogging%2FLogger.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Flogging%2FLogger.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -40,9 +40,11 @@ const TIMERS_SYMBOL = Symbol(\"webpack logger times\");\n class WebpackLogger {\n \t/**\n \t * @param {function(LogTypeEnum, any[]=): void} log log function\n+\t * @param {function(string | function(): string): WebpackLogger} getChildLogger function to create child logger\n \t */\n-\tconstructor(log) {\n+\tconstructor(log, getChildLogger) {\n \t\tthis[LOG_SYMBOL] = log;\n+\t\tthis.getChildLogger = getChildLogger;\n \t}\n \n \terror(...args) {"
      },
      {
        "sha": "26422f27b19049bc9ccb9f4bfeb004c7cdbdd709",
        "filename": "lib/logging/runtime.js",
        "status": "modified",
        "additions": 8,
        "deletions": 5,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2Flogging%2Fruntime.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/lib%2Flogging%2Fruntime.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Flogging%2Fruntime.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -22,11 +22,14 @@ let currentDefaultLogger = createConsoleLogger(currentDefaultLoggerOptions);\n  * @returns {Logger} a logger\n  */\n exports.getLogger = name => {\n-\treturn new Logger((type, args) => {\n-\t\tif (exports.hooks.log.call(name, type, args) === undefined) {\n-\t\t\tcurrentDefaultLogger(name, type, args);\n-\t\t}\n-\t});\n+\treturn new Logger(\n+\t\t(type, args) => {\n+\t\t\tif (exports.hooks.log.call(name, type, args) === undefined) {\n+\t\t\t\tcurrentDefaultLogger(name, type, args);\n+\t\t\t}\n+\t\t},\n+\t\tchildName => exports.getLogger(`${name}/${childName}`)\n+\t);\n };\n \n /**"
      },
      {
        "sha": "a63bf310d84b0fd2d1f7ca8e989993c5f1fb2e09",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -11,7 +11,7 @@\n     \"@webassemblyjs/wasm-parser\": \"1.8.5\",\n     \"acorn\": \"^7.0.0\",\n     \"chrome-trace-event\": \"^1.0.2\",\n-    \"enhanced-resolve\": \"5.0.0-beta.3\",\n+    \"enhanced-resolve\": \"5.0.0-beta.4\",\n     \"eslint-scope\": \"^5.0.0\",\n     \"events\": \"^3.0.0\",\n     \"glob-to-regexp\": \"^0.4.1\","
      },
      {
        "sha": "51ac0ba0d3604b009b75fe11bcf7dbe1cf6b2ff0",
        "filename": "test/TestCasesCachePack.test.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FTestCasesCachePack.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FTestCasesCachePack.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCasesCachePack.test.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -6,7 +6,6 @@ describe(\"TestCases\", () => {\n \t\tname: \"cache pack\",\n \t\tcache: {\n \t\t\ttype: \"filesystem\",\n-\t\t\tstore: \"pack\",\n \t\t\tmanagedPaths: [path.resolve(__dirname, \"../node_modules\")]\n \t\t},\n \t\toptimization: {"
      },
      {
        "sha": "9831ef98785a1362e40595f325a39de5890f82ca",
        "filename": "test/WatchTestCases.test.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FWatchTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FWatchTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FWatchTestCases.test.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -24,6 +24,8 @@ function copyDiff(src, dest, initial) {\n \t\t\tvar content = fs.readFileSync(srcFile);\n \t\t\tif (/^DELETE\\s*$/.test(content.toString(\"utf-8\"))) {\n \t\t\t\tfs.unlinkSync(destFile);\n+\t\t\t} else if (/^DELETE_DIRECTORY\\s*$/.test(content.toString(\"utf-8\"))) {\n+\t\t\t\trimraf.sync(destFile);\n \t\t\t} else {\n \t\t\t\tfs.writeFileSync(destFile, content);\n \t\t\t\tif (initial) {"
      },
      {
        "sha": "6f34d922c67f92d0ccfedcb9bea5d1d7feb97232",
        "filename": "test/watchCases/cache/managedPath/0/index.js",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,6 @@\n+import { foo, bar } from \"foo\";\n+\n+it(\"should have the correct values\", () => {\n+\texpect(foo).toBe(\"foo\");\n+\texpect(bar).toBe(\"bar\");\n+});"
      },
      {
        "sha": "c399d5689608b128a9410f7f245570c9f99507f3",
        "filename": "test/watchCases/cache/managedPath/0/node_modules/bar/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Fbar%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Fbar%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Fbar%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1 @@\n+export const bar = \"bar\";"
      },
      {
        "sha": "08d910e73dc2e624aa985c927b30ffe15e94ebf3",
        "filename": "test/watchCases/cache/managedPath/0/node_modules/bar/package.json",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Fbar%2Fpackage.json",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Fbar%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Fbar%2Fpackage.json?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"name\": \"bar\",\n+  \"version\": \"0\"\n+}"
      },
      {
        "sha": "ab4dd19f62372079e95c70067d491d50e3ff7713",
        "filename": "test/watchCases/cache/managedPath/0/node_modules/foo/index.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Ffoo%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Ffoo%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Ffoo%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,2 @@\n+export const foo = \"foo\";\n+export { bar } from \"bar\";"
      },
      {
        "sha": "badf996f50c5b7a5b22b65ea4fc5cd9c278d9417",
        "filename": "test/watchCases/cache/managedPath/0/node_modules/foo/package.json",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Ffoo%2Fpackage.json",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Ffoo%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F0%2Fnode_modules%2Ffoo%2Fpackage.json?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"name\": \"foo\",\n+  \"version\": \"0\"\n+}"
      },
      {
        "sha": "0fb697da07bbd9fb9ec6da57e6c0e619817a3a19",
        "filename": "test/watchCases/cache/managedPath/1/index.js",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,6 @@\n+import { foo, bar } from \"foo\";\n+\n+it(\"should invalidate resolving if inner node_modules appears\", () => {\n+\texpect(foo).toBe(\"foo\");\n+\texpect(bar).toBe(\"inner-bar\");\n+});"
      },
      {
        "sha": "2ff8107b56a4c0f6b5384468b161ad375ca8610f",
        "filename": "test/watchCases/cache/managedPath/1/node_modules/foo/node_modules/bar/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1 @@\n+export const bar = \"inner-bar\";"
      },
      {
        "sha": "e933892c51f86ecaaac308b275c31962deddc399",
        "filename": "test/watchCases/cache/managedPath/1/node_modules/foo/node_modules/bar/package.json",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Fpackage.json",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F1%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Fpackage.json?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"name\": \"bar\",\n+  \"version\": \"1\"\n+}"
      },
      {
        "sha": "7720db7958b6ad5b7fbfff9359e1739682277948",
        "filename": "test/watchCases/cache/managedPath/2/index.js",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F2%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F2%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F2%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,6 @@\n+import { foo, bar } from \"foo\";\n+\n+it(\"should not invalidate managed item if package version stays equal\", () => {\n+\texpect(foo).toBe(\"foo\");\n+\texpect(bar).toBe(\"inner-bar\");\n+});"
      },
      {
        "sha": "cefb29dfac8f26dc51204a1d6d7dac1489df3124",
        "filename": "test/watchCases/cache/managedPath/2/node_modules/foo/node_modules/bar/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F2%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F2%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F2%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1 @@\n+export const bar = \"undetected-bar\";"
      },
      {
        "sha": "297d6411f095eed435287a407ad1435a930dcab8",
        "filename": "test/watchCases/cache/managedPath/3/index.js",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F3%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F3%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F3%2Findex.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,6 @@\n+import { foo, bar } from \"foo\";\n+\n+it(\"should invalidate when directory gets deleted\", () => {\n+\texpect(foo).toBe(\"foo\");\n+\texpect(bar).toBe(\"bar\");\n+});"
      },
      {
        "sha": "4ac595696b989738bae3dd0385e0c56a841651a5",
        "filename": "test/watchCases/cache/managedPath/3/node_modules/foo/node_modules/bar",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F3%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2F3%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2F3%2Fnode_modules%2Ffoo%2Fnode_modules%2Fbar?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1 @@\n+DELETE_DIRECTORY"
      },
      {
        "sha": "124df21529f5cb2b9ee4eea612c0fa3eb3376b0d",
        "filename": "test/watchCases/cache/managedPath/webpack.config.js",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/test%2FwatchCases%2Fcache%2FmanagedPath%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FwatchCases%2Fcache%2FmanagedPath%2Fwebpack.config.js?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -0,0 +1,17 @@\n+const path = require(\"path\");\n+\n+module.exports = {\n+\tmode: \"development\",\n+\tcache: {\n+\t\ttype: \"memory\",\n+\t\tmanagedPaths: [\n+\t\t\tpath.resolve(\n+\t\t\t\t__dirname,\n+\t\t\t\t\"../../../js/watch-src/cache/managedPath/node_modules\"\n+\t\t\t)\n+\t\t]\n+\t},\n+\tmodule: {\n+\t\tunsafeCache: false\n+\t}\n+};"
      },
      {
        "sha": "53c4b9436be88b564bba7155a01fcd51ecfa61fa",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/65915d55aa1add9617f6885d3f421f5bd29a4b65/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/65915d55aa1add9617f6885d3f421f5bd29a4b65/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=65915d55aa1add9617f6885d3f421f5bd29a4b65",
        "patch": "@@ -1767,10 +1767,10 @@ end-of-stream@^1.1.0:\n   dependencies:\n     once \"^1.4.0\"\n \n-enhanced-resolve@5.0.0-beta.3:\n-  version \"5.0.0-beta.3\"\n-  resolved \"https://registry.yarnpkg.com/enhanced-resolve/-/enhanced-resolve-5.0.0-beta.3.tgz#1f5b24d223db90a2e86235c365e337fcbf28a68b\"\n-  integrity sha512-SMjrP/h0qau9mj6L+dY0I350vTnHUDNm3hjV2QRzqhfaa6UYAkDoLfuRWPqAErKDejveFPyGLiQx1A8a5uR5hQ==\n+enhanced-resolve@5.0.0-beta.4:\n+  version \"5.0.0-beta.4\"\n+  resolved \"https://registry.yarnpkg.com/enhanced-resolve/-/enhanced-resolve-5.0.0-beta.4.tgz#a14a799c098c2c43ec2cd0b718b14a2eadec7301\"\n+  integrity sha512-5/C1ZLbPbiFKM9WnF2LKvwresdLoKb0Py6r9XAt9gojZ6wnJb1ay2OzLY+T0DX5KSrimvTufAGISysArUlRpdQ==\n   dependencies:\n     graceful-fs \"^4.2.0\"\n     tapable \"^2.0.0-beta.8\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/9796",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/9796/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/9796/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/9796/events",
    "html_url": "https://github.com/webpack/webpack/pull/9796",
    "id": 505488513,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzI2OTEyMDcx",
    "number": 9796,
    "title": "Feat improve ecma version option",
    "user": {
      "login": "alexander-akait",
      "id": 4567934,
      "node_id": "MDQ6VXNlcjQ1Njc5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4567934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexander-akait",
      "html_url": "https://github.com/alexander-akait",
      "followers_url": "https://api.github.com/users/alexander-akait/followers",
      "following_url": "https://api.github.com/users/alexander-akait/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexander-akait/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexander-akait/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexander-akait/subscriptions",
      "organizations_url": "https://api.github.com/users/alexander-akait/orgs",
      "repos_url": "https://api.github.com/users/alexander-akait/repos",
      "events_url": "https://api.github.com/users/alexander-akait/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexander-akait/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2019-10-10T20:18:08Z",
    "updated_at": "2019-10-10T22:09:53Z",
    "closed_at": "2019-10-10T22:09:46Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/9796",
      "html_url": "https://github.com/webpack/webpack/pull/9796",
      "diff_url": "https://github.com/webpack/webpack/pull/9796.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/9796.patch",
      "merged_at": "2019-10-10T22:09:46Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\n\r\nfeature\r\n\r\nImprovements:\r\n- Allow set `5`-`11` values for `output.ecmaVersion` (better DX, many other tools, like eslint, use the same logic)\r\n- Allow set `2009`-`2020` values for `output.ecmaVersion` (better DX, many other tools, like eslint, use the same logic)\r\n- Always normalize `output.ecmaVersion` - Why? This is very important for those who write plugins because you can set `output.ecmaVersion: 2019` or `output.ecmaVersion: 10` and it will require write own normalize logic, it is often very uncomfortable. We have a similar problem with `devtool` - you can setup words (`cheap`, `inline`, etc) in any order and this forces you to write additional logic, which negatively affects on performance and code look ugly.\r\n- Also number notation (for example `5`/`6`/etc) is easy to understand\r\n\r\n**Did you add tests for your changes?**\r\n\r\nyes\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nShould be no, one note\r\n\r\nIt will be a breaking change if developer using `output.ecmaVersion` in plugin and wait year notation\r\nAlso maximum yarn notation is `2020`.\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\n- `ecmaVersion` can be `5` - `11`\r\n- `ecmaVersion` can be `2009` - `2020`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/9796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/9796/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "44fb86283d1f722eb30b31c1db60b7f48d8979bb",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -1199,7 +1199,7 @@ export interface OutputOptions {\n \t/**\n \t * The maximum EcmaScript version of the webpack generated code (doesn't include input source code from modules).\n \t */\n-\tecmaVersion?: 5 | number;\n+\tecmaVersion?: number | 2009;\n \t/**\n \t * Specifies the name of each output file on disk. You must **not** specify an absolute path here! The `output.path` option determines the location on disk the files are written to, filename is used solely for naming the individual files.\n \t */"
      },
      {
        "sha": "a7fbd8b2c4e34dbd8e1fa104dd54fdcbd2a0495c",
        "filename": "lib/RuntimeTemplate.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/lib%2FRuntimeTemplate.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/lib%2FRuntimeTemplate.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRuntimeTemplate.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -40,15 +40,15 @@ class RuntimeTemplate {\n \t}\n \n \tsupportsConst() {\n-\t\treturn this.outputOptions.ecmaVersion >= 2015;\n+\t\treturn this.outputOptions.ecmaVersion >= 6;\n \t}\n \n \tsupportsArrowFunction() {\n-\t\treturn this.outputOptions.ecmaVersion >= 2015;\n+\t\treturn this.outputOptions.ecmaVersion >= 6;\n \t}\n \n \tsupportsForOf() {\n-\t\treturn this.outputOptions.ecmaVersion >= 2015;\n+\t\treturn this.outputOptions.ecmaVersion >= 6;\n \t}\n \n \treturningFunction(returnValue, args = \"\") {"
      },
      {
        "sha": "c6348fa711151b079a1e893af3ea8140bcc93196",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 9,
        "deletions": 5,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -9,6 +9,7 @@ const path = require(\"path\");\n const pkgDir = require(\"pkg-dir\");\n const OptionsDefaulter = require(\"./OptionsDefaulter\");\n const Template = require(\"./Template\");\n+const normalizeEcmaVersion = require(\"./util/normalizeEcmaVersion\");\n \n const NODE_MODULES_REGEXP = /[\\\\/]node_modules[\\\\/]/i;\n \n@@ -206,7 +207,13 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\t\toptions => options.experiments.outputModule\n \t\t);\n \t\tthis.set(\"output.iife\", \"make\", options => !options.output.module);\n-\t\tthis.set(\"output.ecmaVersion\", 2015);\n+\t\tthis.set(\"output.ecmaVersion\", \"call\", value => {\n+\t\t\tif (value) {\n+\t\t\t\treturn normalizeEcmaVersion(value);\n+\t\t\t}\n+\n+\t\t\treturn 6;\n+\t\t});\n \t\tthis.set(\"output.chunkFilename\", \"make\", options => {\n \t\t\tconst filename = options.output.filename;\n \t\t\tif (typeof filename !== \"function\") {\n@@ -446,10 +453,7 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\t\t\t\t\t\t\toptions.plugins.some(p => p instanceof SourceMapDevToolPlugin)),\n \t\t\t\t\t\tterserOptions: {\n \t\t\t\t\t\t\tmodule: options.output.module,\n-\t\t\t\t\t\t\tecma:\n-\t\t\t\t\t\t\t\toptions.output.ecmaVersion > 2000\n-\t\t\t\t\t\t\t\t\t? options.output.ecmaVersion - 2009\n-\t\t\t\t\t\t\t\t\t: options.output.ecmaVersion\n+\t\t\t\t\t\t\tecma: options.output.ecmaVersion\n \t\t\t\t\t\t}\n \t\t\t\t\t}).apply(compiler);\n \t\t\t\t}"
      },
      {
        "sha": "e1a9ed9856ad91634ea352b49ae8c303c49a8f53",
        "filename": "lib/util/normalizeEcmaVersion.js",
        "status": "added",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/lib%2Futil%2FnormalizeEcmaVersion.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/lib%2Futil%2FnormalizeEcmaVersion.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FnormalizeEcmaVersion.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1,25 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+/**\n+ * Normalize ECMAScript version\n+ * @param {number} ecmaVersion ECMAScript version\n+ * @returns {number} normalized ECMAScript version\n+ */\n+module.exports = ecmaVersion => {\n+\tlet version = ecmaVersion;\n+\n+\tif (version === 2009) {\n+\t\treturn 5;\n+\t}\n+\n+\tif (version >= 2015) {\n+\t\tversion -= 2009;\n+\t}\n+\n+\treturn version;\n+};"
      },
      {
        "sha": "dc5fbd580a2bfa003dcf4b39c04e9e61d50ba2f4",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 8,
        "deletions": 2,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -1159,11 +1159,17 @@\n           \"description\": \"The maximum EcmaScript version of the webpack generated code (doesn't include input source code from modules).\",\n           \"anyOf\": [\n             {\n-              \"enum\": [5]\n+              \"type\": \"number\",\n+              \"minimum\": 5,\n+              \"maximum\": 11\n+            },\n+            {\n+              \"enum\": [2009]\n             },\n             {\n               \"type\": \"number\",\n-              \"minimum\": 2015\n+              \"minimum\": 2015,\n+              \"maximum\": 2020\n             }\n           ]\n         },"
      },
      {
        "sha": "014ad2b9a749f75dc6d52d669fc5c7c8c26ef4ea",
        "filename": "test/Schemas.lint.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FSchemas.lint.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FSchemas.lint.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FSchemas.lint.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -45,6 +45,7 @@ describe(\"Schemas\", () => {\n \t\t\t\t\t\"enum\",\n \t\t\t\t\t\"minLength\",\n \t\t\t\t\t\"minimum\",\n+\t\t\t\t\t\"maximum\",\n \t\t\t\t\t\"required\",\n \t\t\t\t\t\"uniqueItems\",\n \t\t\t\t\t\"minItems\","
      },
      {
        "sha": "ea20996c5565f7d910cb3b33582bd57e41daeb89",
        "filename": "test/Validation.test.js",
        "status": "modified",
        "additions": 68,
        "deletions": 0,
        "changes": 68,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FValidation.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FValidation.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FValidation.test.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -479,4 +479,72 @@ describe(\"Validation\", () => {\n \t\t\t   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry?, experiments?, externals?, infrastructureLogging?, loader?, mode?, module?, name?, node?, optimization?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, serve?, stats?, target?, watch?, watchOptions? }\"\n \t\t`)\n \t);\n+\n+\tcreateTestCase(\n+\t\t\"ecmaVersion\",\n+\t\t{\n+\t\t\toutput: { ecmaVersion: 2008 }\n+\t\t},\n+\t\tmsg =>\n+\t\t\texpect(msg).toMatchInlineSnapshot(`\n+\t\t\t\"Invalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema.\n+\t\t\t - configuration.output.ecmaVersion should be one of these:\n+\t\t\t   number (should be >= 5, should be <= 11) | 2009 | number (should be >= 2015, should be <= 2020)\n+\t\t\t   -> The maximum EcmaScript version of the webpack generated code (doesn't include input source code from modules).\n+\t\t\t   Details:\n+\t\t\t    * configuration.output.ecmaVersion should be <= 11.\n+\t\t\t    * configuration.output.ecmaVersion should be >= 2015.\"\n+\t\t`)\n+\t);\n+\n+\tcreateTestCase(\n+\t\t\"ecmaVersion\",\n+\t\t{\n+\t\t\toutput: { ecmaVersion: 20008 }\n+\t\t},\n+\t\tmsg =>\n+\t\t\texpect(msg).toMatchInlineSnapshot(`\n+\t\t\t\"Invalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema.\n+\t\t\t - configuration.output.ecmaVersion should be one of these:\n+\t\t\t   number (should be >= 5, should be <= 11) | 2009 | number (should be >= 2015, should be <= 2020)\n+\t\t\t   -> The maximum EcmaScript version of the webpack generated code (doesn't include input source code from modules).\n+\t\t\t   Details:\n+\t\t\t    * configuration.output.ecmaVersion should be <= 11.\n+\t\t\t    * configuration.output.ecmaVersion should be <= 2020.\"\n+\t\t`)\n+\t);\n+\n+\tcreateTestCase(\n+\t\t\"ecmaVersion\",\n+\t\t{\n+\t\t\toutput: { ecmaVersion: 4 }\n+\t\t},\n+\t\tmsg =>\n+\t\t\texpect(msg).toMatchInlineSnapshot(`\n+\t\t\t\"Invalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema.\n+\t\t\t - configuration.output.ecmaVersion should be one of these:\n+\t\t\t   number (should be >= 5, should be <= 11) | 2009 | number (should be >= 2015, should be <= 2020)\n+\t\t\t   -> The maximum EcmaScript version of the webpack generated code (doesn't include input source code from modules).\n+\t\t\t   Details:\n+\t\t\t    * configuration.output.ecmaVersion should be >= 5.\n+\t\t\t    * configuration.output.ecmaVersion should be >= 2015.\"\n+\t\t`)\n+\t);\n+\n+\tcreateTestCase(\n+\t\t\"ecmaVersion\",\n+\t\t{\n+\t\t\toutput: { ecmaVersion: 40 }\n+\t\t},\n+\t\tmsg =>\n+\t\t\texpect(msg).toMatchInlineSnapshot(`\n+\t\t\t\"Invalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema.\n+\t\t\t - configuration.output.ecmaVersion should be one of these:\n+\t\t\t   number (should be >= 5, should be <= 11) | 2009 | number (should be >= 2015, should be <= 2020)\n+\t\t\t   -> The maximum EcmaScript version of the webpack generated code (doesn't include input source code from modules).\n+\t\t\t   Details:\n+\t\t\t    * configuration.output.ecmaVersion should be <= 11.\n+\t\t\t    * configuration.output.ecmaVersion should be >= 2015.\"\n+\t\t`)\n+\t);\n });"
      },
      {
        "sha": "bbd9de4153f6ddfd9155c73a85f9fea954810a4b",
        "filename": "test/configCases/ecmaVersion/2009/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2009%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2009%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F2009%2Findex.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1 @@\n+it(\"should compile and run the test\", function() {});"
      },
      {
        "sha": "e06a4890c1c86c260db769372321737be79b438a",
        "filename": "test/configCases/ecmaVersion/2009/webpack.config.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2009%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2009%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F2009%2Fwebpack.config.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1,5 @@\n+module.exports = {\n+\toutput: {\n+\t\tecmaVersion: 2009\n+\t}\n+};"
      },
      {
        "sha": "bbd9de4153f6ddfd9155c73a85f9fea954810a4b",
        "filename": "test/configCases/ecmaVersion/2015/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2015%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2015%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F2015%2Findex.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1 @@\n+it(\"should compile and run the test\", function() {});"
      },
      {
        "sha": "63ea4672ed3f43ea5aabfc700d6c9c073a0ab542",
        "filename": "test/configCases/ecmaVersion/2015/webpack.config.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2015%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F2015%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F2015%2Fwebpack.config.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1,5 @@\n+module.exports = {\n+\toutput: {\n+\t\tecmaVersion: 2015\n+\t}\n+};"
      },
      {
        "sha": "bbd9de4153f6ddfd9155c73a85f9fea954810a4b",
        "filename": "test/configCases/ecmaVersion/5/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F5%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F5%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F5%2Findex.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1 @@\n+it(\"should compile and run the test\", function() {});"
      },
      {
        "sha": "2eeb5a078a17e9c7bae0459043068ccd12447650",
        "filename": "test/configCases/ecmaVersion/5/webpack.config.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F5%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F5%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F5%2Fwebpack.config.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1,5 @@\n+module.exports = {\n+\toutput: {\n+\t\tecmaVersion: 5\n+\t}\n+};"
      },
      {
        "sha": "bbd9de4153f6ddfd9155c73a85f9fea954810a4b",
        "filename": "test/configCases/ecmaVersion/6/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F6%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F6%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F6%2Findex.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1 @@\n+it(\"should compile and run the test\", function() {});"
      },
      {
        "sha": "537a8594e0c53b15eff71985a1a4034d4fa850bf",
        "filename": "test/configCases/ecmaVersion/6/webpack.config.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F6%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8764f147946b646d3e154d34f41d56331bf57cb6/test%2FconfigCases%2FecmaVersion%2F6%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2FecmaVersion%2F6%2Fwebpack.config.js?ref=8764f147946b646d3e154d34f41d56331bf57cb6",
        "patch": "@@ -0,0 +1,5 @@\n+module.exports = {\n+\toutput: {\n+\t\tecmaVersion: 6\n+\t}\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8529",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8529/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8529/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8529/events",
    "html_url": "https://github.com/webpack/webpack/pull/8529",
    "id": 393097612,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjQwMjExMzgw",
    "number": 8529,
    "title": "Performance/caching",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-12-20T15:35:52Z",
    "updated_at": "2018-12-20T19:24:06Z",
    "closed_at": "2018-12-20T19:23:31Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8529",
      "html_url": "https://github.com/webpack/webpack/pull/8529",
      "diff_url": "https://github.com/webpack/webpack/pull/8529.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8529.patch",
      "merged_at": "2018-12-20T19:23:31Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance improvement\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes, FileCachePlugin.purgeMemoryCache is no longer static.\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8529/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "932ddd7ea01167af5fe1939e26cc2a13f76e7c01",
        "filename": "lib/cache/FileCachePlugin.js",
        "status": "modified",
        "additions": 24,
        "deletions": 33,
        "changes": 57,
        "blob_url": "https://github.com/webpack/webpack/blob/e36dec26d18c1320ed61342fb46c59cb83e38b49/lib%2Fcache%2FFileCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e36dec26d18c1320ed61342fb46c59cb83e38b49/lib%2Fcache%2FFileCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FFileCachePlugin.js?ref=e36dec26d18c1320ed61342fb46c59cb83e38b49",
        "patch": "@@ -94,19 +94,17 @@ const memorize = fn => {\n \t};\n };\n \n-const memoryCache = new Map();\n-\n class FileCachePlugin {\n \t/**\n \t * @param {FileCacheOptions} options options\n \t */\n \tconstructor(options) {\n \t\tthis.options = options;\n-\t\tthis.directMemoryCache = new Map();\n+\t\tthis.memoryCache = new Map();\n \t}\n \n-\tstatic purgeMemoryCache() {\n-\t\tmemoryCache.clear();\n+\tpurgeMemoryCache() {\n+\t\tthis.memoryCache.clear();\n \t}\n \n \t/**\n@@ -178,21 +176,20 @@ class FileCachePlugin {\n \t\t\t\t\tetag,\n \t\t\t\t\tversion\n \t\t\t\t};\n-\t\t\t\tconst relativeFilename = toHash(identifier) + \".data\";\n-\t\t\t\tconst filename = path.join(cacheDirectory, relativeFilename);\n-\t\t\t\tthis.directMemoryCache.set(identifier, entry);\n-\t\t\t\tmemoryCache.set(filename, entry);\n+\t\t\t\tthis.memoryCache.set(identifier, entry);\n \t\t\t\tconst promiseFactory =\n \t\t\t\t\tstore === \"pack\"\n \t\t\t\t\t\t? () =>\n \t\t\t\t\t\t\t\tpackPromise.then(pack => {\n \t\t\t\t\t\t\t\t\tif (log >= 2) {\n \t\t\t\t\t\t\t\t\t\tconsole.warn(`Cached ${identifier} to pack.`);\n \t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\tpack.set(relativeFilename, entry);\n+\t\t\t\t\t\t\t\t\tpack.set(identifier, entry);\n \t\t\t\t\t\t\t\t})\n-\t\t\t\t\t\t: () =>\n-\t\t\t\t\t\t\t\tserializer\n+\t\t\t\t\t\t: () => {\n+\t\t\t\t\t\t\t\tconst relativeFilename = toHash(identifier) + \".data\";\n+\t\t\t\t\t\t\t\tconst filename = path.join(cacheDirectory, relativeFilename);\n+\t\t\t\t\t\t\t\treturn serializer\n \t\t\t\t\t\t\t\t\t.serializeToFile(entry, filename)\n \t\t\t\t\t\t\t\t\t.then(() => {\n \t\t\t\t\t\t\t\t\t\tif (log >= 2) {\n@@ -208,22 +205,23 @@ class FileCachePlugin {\n \t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t  };\n \t\t\t\tif (store === \"instant\" || store === \"pack\") {\n \t\t\t\t\treturn promiseFactory();\n \t\t\t\t} else if (store === \"idle\") {\n-\t\t\t\t\tpendingPromiseFactories.set(filename, promiseFactory);\n+\t\t\t\t\tpendingPromiseFactories.set(identifier, promiseFactory);\n \t\t\t\t\treturn Promise.resolve();\n \t\t\t\t} else if (store === \"background\") {\n \t\t\t\t\tconst promise = promiseFactory();\n-\t\t\t\t\tpendingPromiseFactories.set(filename, () => promise);\n+\t\t\t\t\tpendingPromiseFactories.set(identifier, () => promise);\n \t\t\t\t\treturn Promise.resolve();\n \t\t\t\t}\n \t\t\t}\n \t\t);\n \t\tcompiler.cache.hooks.get.tapPromise(\n \t\t\t\"FileCachePlugin\",\n \t\t\t(identifier, etag) => {\n-\t\t\t\tconst directMemory = this.directMemoryCache.get(identifier);\n+\t\t\t\tconst directMemory = this.memoryCache.get(identifier);\n \t\t\t\tif (directMemory !== undefined) {\n \t\t\t\t\treturn Promise.resolve(\n \t\t\t\t\t\tdirectMemory.etag !== etag\n@@ -233,30 +231,23 @@ class FileCachePlugin {\n \t\t\t\t\t\t\t\t: directMemory.data\n \t\t\t\t\t);\n \t\t\t\t}\n-\t\t\t\tconst relativeFilename = toHash(identifier) + \".data\";\n-\t\t\t\tconst filename = path.join(cacheDirectory, relativeFilename);\n-\t\t\t\tconst logMessage = store === \"pack\" ? \"pack\" : filename;\n-\t\t\t\tconst memory = memoryCache.get(filename);\n-\t\t\t\tif (memory !== undefined) {\n-\t\t\t\t\treturn Promise.resolve(\n-\t\t\t\t\t\tmemory.etag !== etag || memory.version !== version\n-\t\t\t\t\t\t\t? undefined\n-\t\t\t\t\t\t\t: typeof memory.data === \"function\"\n-\t\t\t\t\t\t\t\t? memory.data()\n-\t\t\t\t\t\t\t\t: memory.data\n-\t\t\t\t\t);\n+\t\t\t\tlet logMessage;\n+\t\t\t\tlet cacheEntryPromise;\n+\t\t\t\tif (store === \"pack\") {\n+\t\t\t\t\tlogMessage = \"pack\";\n+\t\t\t\t\tcacheEntryPromise = packPromise.then(pack => pack.get(identifier));\n+\t\t\t\t} else {\n+\t\t\t\t\tconst relativeFilename = toHash(identifier) + \".data\";\n+\t\t\t\t\tconst filename = path.join(cacheDirectory, relativeFilename);\n+\t\t\t\t\tlogMessage = filename;\n+\t\t\t\t\tcacheEntryPromise = serializer.deserializeFromFile(filename);\n \t\t\t\t}\n-\t\t\t\tconst cacheEntryPromise =\n-\t\t\t\t\tstore === \"pack\"\n-\t\t\t\t\t\t? packPromise.then(pack => pack.get(relativeFilename))\n-\t\t\t\t\t\t: serializer.deserializeFromFile(filename);\n \t\t\t\treturn cacheEntryPromise.then(\n \t\t\t\t\tcacheEntry => {\n \t\t\t\t\t\tif (cacheEntry === undefined) return;\n \t\t\t\t\t\tif (typeof cacheEntry.data === \"function\")\n \t\t\t\t\t\t\tcacheEntry.data = memorize(cacheEntry.data);\n-\t\t\t\t\t\tthis.directMemoryCache.set(identifier, cacheEntry);\n-\t\t\t\t\t\tmemoryCache.set(filename, cacheEntry);\n+\t\t\t\t\t\tthis.memoryCache.set(identifier, cacheEntry);\n \t\t\t\t\t\tif (cacheEntry === undefined) return;\n \t\t\t\t\t\tif (cacheEntry.identifier !== identifier) {\n \t\t\t\t\t\t\tif (log >= 3) {"
      },
      {
        "sha": "e9b3c7aa119da774935e51628ba73467bbef9b8f",
        "filename": "lib/util/createHash.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/e36dec26d18c1320ed61342fb46c59cb83e38b49/lib%2Futil%2FcreateHash.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e36dec26d18c1320ed61342fb46c59cb83e38b49/lib%2Futil%2FcreateHash.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FcreateHash.js?ref=e36dec26d18c1320ed61342fb46c59cb83e38b49",
        "patch": "@@ -75,6 +75,8 @@ class DebugHash {\n \t}\n }\n \n+let crypto = undefined;\n+\n /**\n  * Creates a hash by name or function\n  * @param {string | HashConstructor} algorithm the algorithm name or a constructor creating a hash\n@@ -89,6 +91,7 @@ module.exports = algorithm => {\n \t\tcase \"debug\":\n \t\t\treturn new DebugHash();\n \t\tdefault:\n-\t\t\treturn new BulkUpdateDecorator(require(\"crypto\").createHash(algorithm));\n+\t\t\tif (crypto === undefined) crypto = require(\"crypto\");\n+\t\t\treturn new BulkUpdateDecorator(crypto.createHash(algorithm));\n \t}\n };"
      },
      {
        "sha": "f1e32e6d6406ede6fa2963c11adc80c091d54af7",
        "filename": "test/TestCases.template.js",
        "status": "modified",
        "additions": 88,
        "deletions": 90,
        "changes": 178,
        "blob_url": "https://github.com/webpack/webpack/blob/e36dec26d18c1320ed61342fb46c59cb83e38b49/test%2FTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e36dec26d18c1320ed61342fb46c59cb83e38b49/test%2FTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCases.template.js?ref=e36dec26d18c1320ed61342fb46c59cb83e38b49",
        "patch": "@@ -10,7 +10,6 @@ const TerserPlugin = require(\"terser-webpack-plugin\");\n const checkArrayExpectation = require(\"./checkArrayExpectation\");\n const createLazyTestEnv = require(\"./helpers/createLazyTestEnv\");\n \n-const FileCachePlugin = require(\"../lib/cache/FileCachePlugin\");\n const webpack = require(\"..\");\n \n const terserForTesting = new TerserPlugin({\n@@ -128,13 +127,7 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\t\"main\"\n \t\t\t\t\t\t\t\t\t],\n \t\t\t\t\t\t\t\t\taliasFields: [\"browser\"],\n-\t\t\t\t\t\t\t\t\textensions: [\n-\t\t\t\t\t\t\t\t\t\t\".mjs\",\n-\t\t\t\t\t\t\t\t\t\t\".webpack.js\",\n-\t\t\t\t\t\t\t\t\t\t\".web.js\",\n-\t\t\t\t\t\t\t\t\t\t\".js\",\n-\t\t\t\t\t\t\t\t\t\t\".json\"\n-\t\t\t\t\t\t\t\t\t]\n+\t\t\t\t\t\t\t\t\textensions: [\".mjs\", \".webpack.js\", \".web.js\", \".js\", \".json\"]\n \t\t\t\t\t\t\t\t},\n \t\t\t\t\t\t\t\tresolveLoader: {\n \t\t\t\t\t\t\t\t\tmodules: [\n@@ -185,24 +178,10 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t})\n \t\t\t\t\t\t\t};\n \t\t\t\t\t\t\tbeforeAll(done => {\n-\t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n \t\t\t\t\t\t\t\trimraf(cacheDirectory, done);\n \t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\tafterAll(() => {\n-\t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n-\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\tif (config.cache) {\n \t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill disk cache`, done => {\n-\t\t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n-\t\t\t\t\t\t\t\t\tconst compiler = webpack(options, err => {\n-\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n-\t\t\t\t\t\t\t\t\t\tcompiler.close(() => {\n-\t\t\t\t\t\t\t\t\t\t\tdone();\n-\t\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill memory cache`, done => {\n-\t\t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n \t\t\t\t\t\t\t\t\tconst compiler = webpack(options, err => {\n \t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n \t\t\t\t\t\t\t\t\t\tcompiler.close(() => {\n@@ -214,83 +193,102 @@ const describeCases = config => {\n \t\t\t\t\t\t\tit(\n \t\t\t\t\t\t\t\ttestName + \" should compile\",\n \t\t\t\t\t\t\t\tdone => {\n-\t\t\t\t\t\t\t\t\tconst compiler = webpack(options, (err, stats) => {\n-\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n-\t\t\t\t\t\t\t\t\t\tconst statOptions = {\n-\t\t\t\t\t\t\t\t\t\t\tpreset: \"verbose\",\n-\t\t\t\t\t\t\t\t\t\t\tcolors: false\n-\t\t\t\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t\t\t\t\tmkdirp.sync(outputDirectory);\n-\t\t\t\t\t\t\t\t\t\tfs.writeFileSync(\n-\t\t\t\t\t\t\t\t\t\t\tpath.join(outputDirectory, \"stats.txt\"),\n-\t\t\t\t\t\t\t\t\t\t\tstats.toString(statOptions),\n-\t\t\t\t\t\t\t\t\t\t\t\"utf-8\"\n-\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\tconst jsonStats = stats.toJson({\n-\t\t\t\t\t\t\t\t\t\t\terrorDetails: true\n-\t\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\t\t\t\tcheckArrayExpectation(\n-\t\t\t\t\t\t\t\t\t\t\t\ttestDirectory,\n-\t\t\t\t\t\t\t\t\t\t\t\tjsonStats,\n-\t\t\t\t\t\t\t\t\t\t\t\t\"error\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"Error\",\n-\t\t\t\t\t\t\t\t\t\t\t\tdone\n-\t\t\t\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t\t\t\t\treturn;\n-\t\t\t\t\t\t\t\t\t\tif (\n-\t\t\t\t\t\t\t\t\t\t\tcheckArrayExpectation(\n-\t\t\t\t\t\t\t\t\t\t\t\ttestDirectory,\n-\t\t\t\t\t\t\t\t\t\t\t\tjsonStats,\n-\t\t\t\t\t\t\t\t\t\t\t\t\"warning\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\"Warning\",\n-\t\t\t\t\t\t\t\t\t\t\t\tdone\n-\t\t\t\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t\t\t\t\treturn;\n-\n-\t\t\t\t\t\t\t\t\t\tfunction _require(module) {\n-\t\t\t\t\t\t\t\t\t\t\tif (module.substr(0, 2) === \"./\") {\n-\t\t\t\t\t\t\t\t\t\t\t\tconst p = path.join(outputDirectory, module);\n-\t\t\t\t\t\t\t\t\t\t\t\tconst fn = vm.runInThisContext(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, it, expect) {\" +\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"global.expect = expect;\" +\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t'function nsObj(m) { Object.defineProperty(m, Symbol.toStringTag, { value: \"Module\" }); return m; }' +\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tfs.readFileSync(p, \"utf-8\") +\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\\n})\",\n-\t\t\t\t\t\t\t\t\t\t\t\t\tp\n-\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\tconst m = {\n-\t\t\t\t\t\t\t\t\t\t\t\t\texports: {},\n-\t\t\t\t\t\t\t\t\t\t\t\t\twebpackTestSuiteModule: true\n+\t\t\t\t\t\t\t\t\tconst compiler = webpack(options);\n+\t\t\t\t\t\t\t\t\tconst run = () => {\n+\t\t\t\t\t\t\t\t\t\tcompiler.run((err, stats) => {\n+\t\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\t\tcompiler.close(err => {\n+\t\t\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\t\t\tconst statOptions = {\n+\t\t\t\t\t\t\t\t\t\t\t\t\tpreset: \"verbose\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\tcolors: false\n \t\t\t\t\t\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t\t\t\t\t\t\tfn.call(\n-\t\t\t\t\t\t\t\t\t\t\t\t\tm.exports,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t_require,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tm,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tm.exports,\n-\t\t\t\t\t\t\t\t\t\t\t\t\toutputDirectory,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t_it,\n-\t\t\t\t\t\t\t\t\t\t\t\t\texpect\n+\t\t\t\t\t\t\t\t\t\t\t\tmkdirp.sync(outputDirectory);\n+\t\t\t\t\t\t\t\t\t\t\t\tfs.writeFileSync(\n+\t\t\t\t\t\t\t\t\t\t\t\t\tpath.join(outputDirectory, \"stats.txt\"),\n+\t\t\t\t\t\t\t\t\t\t\t\t\tstats.toString(statOptions),\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"utf-8\"\n \t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\treturn m.exports;\n-\t\t\t\t\t\t\t\t\t\t\t} else return require(module);\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t_require.webpackTestSuiteRequire = true;\n-\t\t\t\t\t\t\t\t\t\t_require(\"./bundle.js\");\n-\t\t\t\t\t\t\t\t\t\tif (getNumberOfTests() === 0)\n-\t\t\t\t\t\t\t\t\t\t\treturn done(new Error(\"No tests exported by test case\"));\n+\t\t\t\t\t\t\t\t\t\t\t\tconst jsonStats = stats.toJson({\n+\t\t\t\t\t\t\t\t\t\t\t\t\terrorDetails: true\n+\t\t\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\t\t\tcheckArrayExpectation(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\ttestDirectory,\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tjsonStats,\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"error\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Error\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tdone\n+\t\t\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t\t\t\t\tcheckArrayExpectation(\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\ttestDirectory,\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tjsonStats,\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"warning\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Warning\",\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tdone\n+\t\t\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n \n-\t\t\t\t\t\t\t\t\t\tcompiler.close(err => {\n+\t\t\t\t\t\t\t\t\t\t\t\tPromise.resolve().then(done);\n+\t\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\t\t\tif (config.cache) {\n+\t\t\t\t\t\t\t\t\t\t// pre-compile to fill memory cache\n+\t\t\t\t\t\t\t\t\t\tcompiler.run(err => {\n \t\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n-\t\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t\t\trun();\n \t\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\trun();\n+\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t},\n \t\t\t\t\t\t\t\t60000\n \t\t\t\t\t\t\t);\n \n+\t\t\t\t\t\t\tit(\n+\t\t\t\t\t\t\t\ttestName + \" should load the compiled tests\",\n+\t\t\t\t\t\t\t\tdone => {\n+\t\t\t\t\t\t\t\t\tfunction _require(module) {\n+\t\t\t\t\t\t\t\t\t\tif (module.substr(0, 2) === \"./\") {\n+\t\t\t\t\t\t\t\t\t\t\tconst p = path.join(outputDirectory, module);\n+\t\t\t\t\t\t\t\t\t\t\tconst fn = vm.runInThisContext(\n+\t\t\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, it, expect) {\" +\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"global.expect = expect;\" +\n+\t\t\t\t\t\t\t\t\t\t\t\t\t'function nsObj(m) { Object.defineProperty(m, Symbol.toStringTag, { value: \"Module\" }); return m; }' +\n+\t\t\t\t\t\t\t\t\t\t\t\t\tfs.readFileSync(p, \"utf-8\") +\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\"\\n})\",\n+\t\t\t\t\t\t\t\t\t\t\t\tp\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t\tconst m = {\n+\t\t\t\t\t\t\t\t\t\t\t\texports: {},\n+\t\t\t\t\t\t\t\t\t\t\t\twebpackTestSuiteModule: true\n+\t\t\t\t\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\t\t\t\t\tfn.call(\n+\t\t\t\t\t\t\t\t\t\t\t\tm.exports,\n+\t\t\t\t\t\t\t\t\t\t\t\t_require,\n+\t\t\t\t\t\t\t\t\t\t\t\tm,\n+\t\t\t\t\t\t\t\t\t\t\t\tm.exports,\n+\t\t\t\t\t\t\t\t\t\t\t\toutputDirectory,\n+\t\t\t\t\t\t\t\t\t\t\t\t_it,\n+\t\t\t\t\t\t\t\t\t\t\t\texpect\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t\treturn m.exports;\n+\t\t\t\t\t\t\t\t\t\t} else return require(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t_require.webpackTestSuiteRequire = true;\n+\t\t\t\t\t\t\t\t\t_require(\"./bundle.js\");\n+\t\t\t\t\t\t\t\t\tif (getNumberOfTests() === 0)\n+\t\t\t\t\t\t\t\t\t\treturn done(new Error(\"No tests exported by test case\"));\n+\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\t10000\n+\t\t\t\t\t\t\t);\n+\n \t\t\t\t\t\t\tconst { it: _it, getNumberOfTests } = createLazyTestEnv(\n \t\t\t\t\t\t\t\tjasmine.getEnv(),\n \t\t\t\t\t\t\t\t10000"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8601",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8601/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8601/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8601/events",
    "html_url": "https://github.com/webpack/webpack/pull/8601",
    "id": 396907485,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjQyOTc1ODQ3",
    "number": 8601,
    "title": "Performance fixes for next branch, watchpack update",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2019-01-08T13:30:22Z",
    "updated_at": "2019-01-09T14:19:53Z",
    "closed_at": "2019-01-09T14:19:50Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8601",
      "html_url": "https://github.com/webpack/webpack/pull/8601",
      "diff_url": "https://github.com/webpack/webpack/pull/8601.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8601.patch",
      "merged_at": "2019-01-09T14:19:50Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\nupdated watchpack. It now passes more info to webpack i. e. for missing files/directories.\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nrefactoring, deps\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* Removed `compilationParams.compilationDependencies`\r\n* Plugins can add dependencies to the compilation by adding to `compilation.file/context/missingDependencies`\r\n* Changed hooks in `NormalModuleFactory` from waterfall to bailing, changed and renamed hooks that return waterfall functions\r\n* Changed WatchFileSystem interface\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8601/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "b44f3f8e33f5b898b931a500890421f5cdca2898",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 75,
        "deletions": 61,
        "changes": 136,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -62,6 +62,7 @@ const { arrayToSetDeprecation } = require(\"./util/deprecation\");\n /** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n /** @typedef {import(\"./DependencyTemplate\")} DependencyTemplate */\n /** @typedef {import(\"./Module\")} Module */\n+/** @typedef {import(\"./ModuleFactory\")} ModuleFactory */\n /** @typedef {import(\"./RuntimeModule\")} RuntimeModule */\n /** @typedef {import(\"./Template\").RenderManifestEntry} RenderManifestEntry */\n /** @typedef {import(\"./WebpackError\")} WebpackError */\n@@ -99,25 +100,6 @@ const { arrayToSetDeprecation } = require(\"./util/deprecation\");\n /** @typedef {new (...args: any[]) => Dependency} DepConstructor */\n /** @typedef {Record<string, Source>} CompilationAssets */\n \n-/**\n- * @typedef {Object} ModuleFactoryCreateDataContextInfo\n- * @property {string} issuer\n- * @property {string} compiler\n- */\n-\n-/**\n- * @typedef {Object} ModuleFactoryCreateData\n- * @property {ModuleFactoryCreateDataContextInfo} contextInfo\n- * @property {any=} resolveOptions\n- * @property {string} context\n- * @property {Dependency[]} dependencies\n- */\n-\n-/**\n- * @typedef {Object} ModuleFactory\n- * @property {(data: ModuleFactoryCreateData, callback: ModuleCallback) => any} create\n- */\n-\n /**\n  * @typedef {Object} AvailableModulesChunkGroupMapping\n  * @property {ChunkGroup} chunkGroup\n@@ -552,8 +534,6 @@ class Compilation {\n \t\tthis.usedChunkIds = null;\n \t\t/** @type {Set<number>} */\n \t\tthis.usedModuleIds = null;\n-\t\t/** @type {Set<string>=} */\n-\t\tthis.compilationDependencies = undefined;\n \t\t/** @type {boolean} */\n \t\tthis.needAdditionalPass = false;\n \t\t/** @type {WeakSet<Module>} */\n@@ -562,6 +542,12 @@ class Compilation {\n \t\tthis._rebuildingModules = new Map();\n \t\t/** @type {WeakSet<Source>} */\n \t\tthis.emittedAssets = new WeakSet();\n+\t\t/** @type {SortableSet<string>} */\n+\t\tthis.fileDependencies = new SortableSet();\n+\t\t/** @type {SortableSet<string>} */\n+\t\tthis.contextDependencies = new SortableSet();\n+\t\t/** @type {SortableSet<string>} */\n+\t\tthis.missingDependencies = new SortableSet();\n \t}\n \n \tgetStats() {\n@@ -822,37 +808,44 @@ class Compilation {\n \t\t\t}\n \t\t}\n \n-\t\t// This is nested so we need to allow one additional task\n-\t\tthis.processDependenciesQueue.increaseParallelism();\n+\t\tif (sortedDependencies.length === 0) {\n+\t\t\tcallback();\n+\t\t\treturn;\n+\t\t}\n \n-\t\tasyncLib.forEach(\n-\t\t\tsortedDependencies,\n-\t\t\t(item, callback) => {\n-\t\t\t\tthis.handleModuleCreation(\n-\t\t\t\t\t{\n-\t\t\t\t\t\tfactory: item.factory,\n-\t\t\t\t\t\tdependencies: item.dependencies,\n-\t\t\t\t\t\toriginModule: module\n-\t\t\t\t\t},\n-\t\t\t\t\terr => {\n-\t\t\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n-\t\t\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n-\t\t\t\t\t\t// leaking the Compilation object.\n-\t\t\t\t\t\tif (err && this.bail) {\n-\t\t\t\t\t\t\t// eslint-disable-next-line no-self-assign\n-\t\t\t\t\t\t\terr.stack = err.stack;\n-\t\t\t\t\t\t\treturn callback(err);\n+\t\tprocess.nextTick(() => {\n+\t\t\t// This is nested so we need to allow one additional task\n+\t\t\tthis.processDependenciesQueue.increaseParallelism();\n+\n+\t\t\tasyncLib.forEach(\n+\t\t\t\tsortedDependencies,\n+\t\t\t\t(item, callback) => {\n+\t\t\t\t\tthis.handleModuleCreation(\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tfactory: item.factory,\n+\t\t\t\t\t\t\tdependencies: item.dependencies,\n+\t\t\t\t\t\t\toriginModule: module\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\terr => {\n+\t\t\t\t\t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n+\t\t\t\t\t\t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n+\t\t\t\t\t\t\t// leaking the Compilation object.\n+\t\t\t\t\t\t\tif (err && this.bail) {\n+\t\t\t\t\t\t\t\t// eslint-disable-next-line no-self-assign\n+\t\t\t\t\t\t\t\terr.stack = err.stack;\n+\t\t\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tcallback();\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tcallback();\n-\t\t\t\t\t}\n-\t\t\t\t);\n-\t\t\t},\n-\t\t\terr => {\n-\t\t\t\tthis.processDependenciesQueue.decreaseParallelism();\n+\t\t\t\t\t);\n+\t\t\t\t},\n+\t\t\t\terr => {\n+\t\t\t\t\tthis.processDependenciesQueue.decreaseParallelism();\n \n-\t\t\t\treturn callback(err);\n-\t\t\t}\n-\t\t);\n+\t\t\t\t\treturn callback(err);\n+\t\t\t\t}\n+\t\t\t);\n+\t\t});\n \t}\n \n \t/**\n@@ -999,7 +992,23 @@ class Compilation {\n \t\t\t\t\t\t: this.compiler.context,\n \t\t\t\tdependencies: dependencies\n \t\t\t},\n-\t\t\t(err, newModule) => {\n+\t\t\t(err, result) => {\n+\t\t\t\tif (result) {\n+\t\t\t\t\tconst {\n+\t\t\t\t\t\tfileDependencies,\n+\t\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\t\tmissingDependencies\n+\t\t\t\t\t} = result;\n+\t\t\t\t\tif (fileDependencies) {\n+\t\t\t\t\t\taddAllToSet(this.fileDependencies, fileDependencies);\n+\t\t\t\t\t}\n+\t\t\t\t\tif (contextDependencies) {\n+\t\t\t\t\t\taddAllToSet(this.contextDependencies, contextDependencies);\n+\t\t\t\t\t}\n+\t\t\t\t\tif (missingDependencies) {\n+\t\t\t\t\t\taddAllToSet(this.missingDependencies, missingDependencies);\n+\t\t\t\t\t}\n+\t\t\t\t}\n \t\t\t\tif (err) {\n \t\t\t\t\tconst notFoundError = new ModuleNotFoundError(\n \t\t\t\t\t\toriginModule,\n@@ -1008,6 +1017,10 @@ class Compilation {\n \t\t\t\t\t);\n \t\t\t\t\treturn callback(notFoundError);\n \t\t\t\t}\n+\t\t\t\tif (!result) {\n+\t\t\t\t\treturn callback();\n+\t\t\t\t}\n+\t\t\t\tconst newModule = result.module;\n \t\t\t\tif (!newModule) {\n \t\t\t\t\treturn callback();\n \t\t\t\t}\n@@ -2190,10 +2203,6 @@ class Compilation {\n \t}\n \n \tsummarizeDependencies() {\n-\t\tthis.fileDependencies = new SortableSet(this.compilationDependencies);\n-\t\tthis.contextDependencies = new SortableSet();\n-\t\tthis.missingDependencies = new SortableSet();\n-\n \t\tfor (\n \t\t\tlet indexChildren = 0;\n \t\t\tindexChildren < this.children.length;\n@@ -2207,16 +2216,20 @@ class Compilation {\n \t\t}\n \n \t\tfor (const module of this.modules) {\n-\t\t\tif (module.buildInfo.fileDependencies) {\n-\t\t\t\taddAllToSet(this.fileDependencies, module.buildInfo.fileDependencies);\n+\t\t\tconst fileDependencies = module.buildInfo.fileDependencies;\n+\t\t\tconst contextDependencies = module.buildInfo.contextDependencies;\n+\t\t\tconst missingDependencies = module.buildInfo.missingDependencies;\n+\t\t\tif (fileDependencies) {\n+\t\t\t\taddAllToSet(this.fileDependencies, fileDependencies);\n \t\t\t}\n-\t\t\tif (module.buildInfo.contextDependencies) {\n-\t\t\t\taddAllToSet(\n-\t\t\t\t\tthis.contextDependencies,\n-\t\t\t\t\tmodule.buildInfo.contextDependencies\n-\t\t\t\t);\n+\t\t\tif (contextDependencies) {\n+\t\t\t\taddAllToSet(this.contextDependencies, contextDependencies);\n+\t\t\t}\n+\t\t\tif (missingDependencies) {\n+\t\t\t\taddAllToSet(this.missingDependencies, missingDependencies);\n \t\t\t}\n \t\t}\n+\n \t\tfor (const error of this.errors) {\n \t\t\tif (\n \t\t\t\ttypeof error.missing === \"object\" &&\n@@ -2226,6 +2239,7 @@ class Compilation {\n \t\t\t\taddAllToSet(this.missingDependencies, error.missing);\n \t\t\t}\n \t\t}\n+\n \t\tthis.fileDependencies.sort();\n \t\tthis.contextDependencies.sort();\n \t\tthis.missingDependencies.sort();"
      },
      {
        "sha": "10d11e28612730d7a75dc7913cbb316dc60eeec8",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 36,
        "deletions": 35,
        "changes": 71,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -40,7 +40,6 @@ const { makePathsRelative } = require(\"./util/identifier\");\n  * @typedef {Object} CompilationParams\n  * @property {NormalModuleFactory} normalModuleFactory\n  * @property {ContextModuleFactory} contextModuleFactory\n- * @property {Set<string>} compilationDependencies\n  */\n \n /**\n@@ -139,9 +138,9 @@ class Compiler {\n \t\tthis.records = {};\n \t\t/** @type {Set<string>} */\n \t\tthis.removedFiles = new Set();\n-\t\t/** @type {Map<string, FileSystemInfoEntry>} */\n+\t\t/** @type {Map<string, FileSystemInfoEntry | null>} */\n \t\tthis.fileTimestamps = new Map();\n-\t\t/** @type {Map<string, FileSystemInfoEntry>} */\n+\t\t/** @type {Map<string, FileSystemInfoEntry | null>} */\n \t\tthis.contextTimestamps = new Map();\n \t\t/** @type {ResolverFactory} */\n \t\tthis.resolverFactory = new ResolverFactory();\n@@ -213,35 +212,37 @@ class Compiler {\n \t\t\t\treturn;\n \t\t\t}\n \n-\t\t\tthis.emitAssets(compilation, err => {\n-\t\t\t\tif (err) return finalCallback(err);\n-\n-\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n-\t\t\t\t\tcompilation.needAdditionalPass = true;\n+\t\t\tprocess.nextTick(() => {\n+\t\t\t\tthis.emitAssets(compilation, err => {\n+\t\t\t\t\tif (err) return finalCallback(err);\n \n-\t\t\t\t\tconst stats = new Stats(compilation);\n-\t\t\t\t\tstats.startTime = startTime;\n-\t\t\t\t\tstats.endTime = Date.now();\n-\t\t\t\t\tthis.hooks.done.callAsync(stats, err => {\n-\t\t\t\t\t\tif (err) return finalCallback(err);\n+\t\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n+\t\t\t\t\t\tcompilation.needAdditionalPass = true;\n \n-\t\t\t\t\t\tthis.hooks.additionalPass.callAsync(err => {\n+\t\t\t\t\t\tconst stats = new Stats(compilation);\n+\t\t\t\t\t\tstats.startTime = startTime;\n+\t\t\t\t\t\tstats.endTime = Date.now();\n+\t\t\t\t\t\tthis.hooks.done.callAsync(stats, err => {\n \t\t\t\t\t\t\tif (err) return finalCallback(err);\n-\t\t\t\t\t\t\tthis.compile(onCompiled);\n-\t\t\t\t\t\t});\n-\t\t\t\t\t});\n-\t\t\t\t\treturn;\n-\t\t\t\t}\n \n-\t\t\t\tthis.emitRecords(err => {\n-\t\t\t\t\tif (err) return finalCallback(err);\n+\t\t\t\t\t\t\tthis.hooks.additionalPass.callAsync(err => {\n+\t\t\t\t\t\t\t\tif (err) return finalCallback(err);\n+\t\t\t\t\t\t\t\tthis.compile(onCompiled);\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t});\n+\t\t\t\t\t\treturn;\n+\t\t\t\t\t}\n \n-\t\t\t\t\tconst stats = new Stats(compilation);\n-\t\t\t\t\tstats.startTime = startTime;\n-\t\t\t\t\tstats.endTime = Date.now();\n-\t\t\t\t\tthis.hooks.done.callAsync(stats, err => {\n+\t\t\t\t\tthis.emitRecords(err => {\n \t\t\t\t\t\tif (err) return finalCallback(err);\n-\t\t\t\t\t\treturn finalCallback(null, stats);\n+\n+\t\t\t\t\t\tconst stats = new Stats(compilation);\n+\t\t\t\t\t\tstats.startTime = startTime;\n+\t\t\t\t\t\tstats.endTime = Date.now();\n+\t\t\t\t\t\tthis.hooks.done.callAsync(stats, err => {\n+\t\t\t\t\t\t\tif (err) return finalCallback(err);\n+\t\t\t\t\t\t\treturn finalCallback(null, stats);\n+\t\t\t\t\t\t});\n \t\t\t\t\t});\n \t\t\t\t});\n \t\t\t});\n@@ -522,7 +523,6 @@ class Compiler {\n \t\tconst compilation = this.createCompilation();\n \t\tcompilation.name = this.name;\n \t\tcompilation.records = this.records;\n-\t\tcompilation.compilationDependencies = params.compilationDependencies;\n \t\tthis.hooks.thisCompilation.call(compilation, params);\n \t\tthis.hooks.compilation.call(compilation, params);\n \t\treturn compilation;\n@@ -547,8 +547,7 @@ class Compiler {\n \tnewCompilationParams() {\n \t\tconst params = {\n \t\t\tnormalModuleFactory: this.createNormalModuleFactory(),\n-\t\t\tcontextModuleFactory: this.createContextModuleFactory(),\n-\t\t\tcompilationDependencies: new Set()\n+\t\t\tcontextModuleFactory: this.createContextModuleFactory()\n \t\t};\n \t\treturn params;\n \t}\n@@ -569,16 +568,18 @@ class Compiler {\n \t\t\tthis.hooks.make.callAsync(compilation, err => {\n \t\t\t\tif (err) return callback(err);\n \n-\t\t\t\tcompilation.finish(err => {\n-\t\t\t\t\tif (err) return callback(err);\n-\n-\t\t\t\t\tcompilation.seal(err => {\n+\t\t\t\tprocess.nextTick(() => {\n+\t\t\t\t\tcompilation.finish(err => {\n \t\t\t\t\t\tif (err) return callback(err);\n \n-\t\t\t\t\t\tthis.hooks.afterCompile.callAsync(compilation, err => {\n+\t\t\t\t\t\tcompilation.seal(err => {\n \t\t\t\t\t\t\tif (err) return callback(err);\n \n-\t\t\t\t\t\t\treturn callback(null, compilation);\n+\t\t\t\t\t\t\tthis.hooks.afterCompile.callAsync(compilation, err => {\n+\t\t\t\t\t\t\t\tif (err) return callback(err);\n+\n+\t\t\t\t\t\t\t\treturn callback(null, compilation);\n+\t\t\t\t\t\t\t});\n \t\t\t\t\t\t});\n \t\t\t\t\t});\n \t\t\t\t});"
      },
      {
        "sha": "e0a2846a42d810cabb13d46d991e0147be2e1fde",
        "filename": "lib/ContextModuleFactory.js",
        "status": "modified",
        "additions": 25,
        "deletions": 7,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FContextModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FContextModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModuleFactory.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -10,14 +10,19 @@ const path = require(\"path\");\n \n const { AsyncSeriesWaterfallHook, SyncWaterfallHook } = require(\"tapable\");\n const ContextModule = require(\"./ContextModule\");\n+const ModuleFactory = require(\"./ModuleFactory\");\n const ContextElementDependency = require(\"./dependencies/ContextElementDependency\");\n \n /** @typedef {import(\"./Module\")} Module */\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryCreateData} ModuleFactoryCreateData */\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n+/** @typedef {import(\"./dependencies/ContextDependency\")} ContextDependency */\n \n const EMPTY_RESOLVE_OPTIONS = {};\n \n-module.exports = class ContextModuleFactory {\n+module.exports = class ContextModuleFactory extends ModuleFactory {\n \tconstructor(resolverFactory) {\n+\t\tsuper();\n \t\tthis.hooks = Object.freeze({\n \t\t\t/** @type {AsyncSeriesWaterfallHook<TODO>} */\n \t\t\tbeforeResolve: new AsyncSeriesWaterfallHook([\"data\"]),\n@@ -31,17 +36,28 @@ module.exports = class ContextModuleFactory {\n \t\tthis.resolverFactory = resolverFactory;\n \t}\n \n+\t/**\n+\t * @param {ModuleFactoryCreateData} data data object\n+\t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n+\t * @returns {void}\n+\t */\n \tcreate(data, callback) {\n \t\tconst context = data.context;\n \t\tconst dependencies = data.dependencies;\n \t\tconst resolveOptions = data.resolveOptions;\n-\t\tconst dependency = dependencies[0];\n+\t\tconst dependency = /** @type {ContextDependency} */ (dependencies[0]);\n+\t\tconst fileDependencies = new Set();\n+\t\tconst missingDependencies = new Set();\n+\t\tconst contextDependencies = new Set();\n \t\tthis.hooks.beforeResolve.callAsync(\n \t\t\tObject.assign(\n \t\t\t\t{\n \t\t\t\t\tcontext: context,\n \t\t\t\t\tdependencies: dependencies,\n-\t\t\t\t\tresolveOptions\n+\t\t\t\t\tresolveOptions,\n+\t\t\t\t\tfileDependencies,\n+\t\t\t\t\tmissingDependencies,\n+\t\t\t\t\tcontextDependencies\n \t\t\t\t},\n \t\t\t\tdependency.options\n \t\t\t),\n@@ -147,10 +163,12 @@ module.exports = class ContextModuleFactory {\n \t\t\t\t\t\t\t\t// Ignored\n \t\t\t\t\t\t\t\tif (!result) return callback();\n \n-\t\t\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\t\t\tnull,\n-\t\t\t\t\t\t\t\t\tnew ContextModule(result.resolveDependencies, result)\n-\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\treturn callback(null, {\n+\t\t\t\t\t\t\t\t\tmodule: new ContextModule(result.resolveDependencies, result),\n+\t\t\t\t\t\t\t\t\tfileDependencies,\n+\t\t\t\t\t\t\t\t\tmissingDependencies,\n+\t\t\t\t\t\t\t\t\tcontextDependencies\n+\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t);\n \t\t\t\t\t}"
      },
      {
        "sha": "b82932defafc22cefb3bbdc628d7a5ff7f235042",
        "filename": "lib/DefinePlugin.js",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDefinePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDefinePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDefinePlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -27,11 +27,14 @@ class RuntimeValue {\n \t}\n \n \texec(parser) {\n+\t\tconst buildInfo = parser.state.module.buildInfo;\n \t\tif (this.fileDependencies === true) {\n-\t\t\tparser.state.module.buildInfo.cacheable = false;\n+\t\t\tbuildInfo.cacheable = false;\n \t\t} else {\n \t\t\tfor (const fileDependency of this.fileDependencies) {\n-\t\t\t\tparser.state.module.buildInfo.fileDependencies.add(fileDependency);\n+\t\t\t\tbuildInfo.fileDependencies.add(fileDependency);\n+\t\t\t\tif (!buildInfo.snapshot.fileTimestamps.has(fileDependency))\n+\t\t\t\t\tbuildInfo.snapshot.fileTimestamps.set(fileDependency, {});\n \t\t\t}\n \t\t}\n "
      },
      {
        "sha": "6701c11962534bfadaa4e0a4a477799d31b634f2",
        "filename": "lib/DelegatedModuleFactoryPlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDelegatedModuleFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDelegatedModuleFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDelegatedModuleFactoryPlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -28,9 +28,9 @@ class DelegatedModuleFactoryPlugin {\n \tapply(normalModuleFactory) {\n \t\tconst scope = this.options.scope;\n \t\tif (scope) {\n-\t\t\tnormalModuleFactory.hooks.factory.tap(\n+\t\t\tnormalModuleFactory.hooks.factorize.tapAsync(\n \t\t\t\t\"DelegatedModuleFactoryPlugin\",\n-\t\t\t\tfactory => (data, callback) => {\n+\t\t\t\t(data, callback) => {\n \t\t\t\t\tconst dependency = data.dependencies[0];\n \t\t\t\t\tconst request = dependency.request;\n \t\t\t\t\tif (request && request.indexOf(scope + \"/\") === 0) {\n@@ -67,7 +67,7 @@ class DelegatedModuleFactoryPlugin {\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\treturn factory(data, callback);\n+\t\t\t\t\treturn callback();\n \t\t\t\t}\n \t\t\t);\n \t\t} else {"
      },
      {
        "sha": "dc59d517a8a2febd221bcb62dd1db21f6596da1d",
        "filename": "lib/DllModuleFactory.js",
        "status": "modified",
        "additions": 20,
        "deletions": 6,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDllModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDllModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDllModuleFactory.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -6,17 +6,31 @@\n \"use strict\";\n \n const DllModule = require(\"./DllModule\");\n+const ModuleFactory = require(\"./ModuleFactory\");\n \n-class DllModuleFactory {\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryCreateData} ModuleFactoryCreateData */\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n+/** @typedef {import(\"./dependencies/DllEntryDependency\")} DllEntryDependency */\n+\n+class DllModuleFactory extends ModuleFactory {\n \tconstructor() {\n+\t\tsuper();\n \t\tthis.hooks = Object.freeze({});\n \t}\n+\t/**\n+\t * @param {ModuleFactoryCreateData} data data object\n+\t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n+\t * @returns {void}\n+\t */\n \tcreate(data, callback) {\n-\t\tconst dependency = data.dependencies[0];\n-\t\tcallback(\n-\t\t\tnull,\n-\t\t\tnew DllModule(data.context, dependency.dependencies, dependency.name)\n-\t\t);\n+\t\tconst dependency = /** @type {DllEntryDependency} */ (data.dependencies[0]);\n+\t\tcallback(null, {\n+\t\t\tmodule: new DllModule(\n+\t\t\t\tdata.context,\n+\t\t\t\tdependency.dependencies,\n+\t\t\t\tdependency.name\n+\t\t\t)\n+\t\t});\n \t}\n }\n "
      },
      {
        "sha": "cb920e8ca7caed816919fa0dcb833dad79d2fada",
        "filename": "lib/DllReferencePlugin.js",
        "status": "modified",
        "additions": 17,
        "deletions": 15,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDllReferencePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FDllReferencePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDllReferencePlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -27,6 +27,8 @@ class DllReferencePlugin {\n \tconstructor(options) {\n \t\tvalidateOptions(schema, options, \"Dll Reference Plugin\");\n \t\tthis.options = options;\n+\t\t/** @type {WeakMap<Object, {path: string, data: DllReferencePluginOptionsManifest?, error: Error?}>} */\n+\t\tthis._compilationData = new WeakMap();\n \t}\n \n \tapply(compiler) {\n@@ -50,15 +52,17 @@ class DllReferencePlugin {\n \t\t\t\tif (\"manifest\" in this.options) {\n \t\t\t\t\tconst manifest = this.options.manifest;\n \t\t\t\t\tif (typeof manifest === \"string\") {\n-\t\t\t\t\t\tparams.compilationDependencies.add(manifest);\n \t\t\t\t\t\tcompiler.inputFileSystem.readFile(manifest, (err, result) => {\n \t\t\t\t\t\t\tif (err) return callback(err);\n+\t\t\t\t\t\t\tconst data = {\n+\t\t\t\t\t\t\t\tpath: manifest,\n+\t\t\t\t\t\t\t\tdata: undefined,\n+\t\t\t\t\t\t\t\terror: undefined\n+\t\t\t\t\t\t\t};\n \t\t\t\t\t\t\t// Catch errors parsing the manifest so that blank\n \t\t\t\t\t\t\t// or malformed manifest files don't kill the process.\n \t\t\t\t\t\t\ttry {\n-\t\t\t\t\t\t\t\tparams[\"dll reference \" + manifest] = parseJson(\n-\t\t\t\t\t\t\t\t\tresult.toString(\"utf-8\")\n-\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\tdata.data = parseJson(result.toString(\"utf-8\"));\n \t\t\t\t\t\t\t} catch (e) {\n \t\t\t\t\t\t\t\t// Store the error in the params so that it can\n \t\t\t\t\t\t\t\t// be added as a compilation error later on.\n@@ -67,10 +71,9 @@ class DllReferencePlugin {\n \t\t\t\t\t\t\t\t\tmanifest,\n \t\t\t\t\t\t\t\t\tcompiler.root\n \t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\tparams[\n-\t\t\t\t\t\t\t\t\t\"dll reference parse error \" + manifest\n-\t\t\t\t\t\t\t\t] = new DllManifestError(manifestPath, e.message);\n+\t\t\t\t\t\t\t\tdata.error = new DllManifestError(manifestPath, e.message);\n \t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tthis._compilationData.set(params, data);\n \t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t});\n \t\t\t\t\t\treturn;\n@@ -89,16 +92,14 @@ class DllReferencePlugin {\n \t\t\t\tlet manifestParameter = this.options.manifest;\n \t\t\t\tlet manifest;\n \t\t\t\tif (typeof manifestParameter === \"string\") {\n+\t\t\t\t\tconst data = this._compilationData.get(params);\n \t\t\t\t\t// If there was an error parsing the manifest\n \t\t\t\t\t// file, exit now because the error will be added\n \t\t\t\t\t// as a compilation error in the \"compilation\" hook.\n-\t\t\t\t\tif (params[\"dll reference parse error \" + manifestParameter]) {\n+\t\t\t\t\tif (data.error) {\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n-\t\t\t\t\tmanifest =\n-\t\t\t\t\t\t/** @type {DllReferencePluginOptionsManifest} */ (params[\n-\t\t\t\t\t\t\t\"dll reference \" + manifestParameter\n-\t\t\t\t\t\t]);\n+\t\t\t\t\tmanifest = data.data;\n \t\t\t\t} else {\n \t\t\t\t\tmanifest = manifestParameter;\n \t\t\t\t}\n@@ -131,12 +132,13 @@ class DllReferencePlugin {\n \t\t\t\tif (\"manifest\" in this.options) {\n \t\t\t\t\tlet manifest = this.options.manifest;\n \t\t\t\t\tif (typeof manifest === \"string\") {\n+\t\t\t\t\t\tconst data = this._compilationData.get(params);\n \t\t\t\t\t\t// If there was an error parsing the manifest file, add the\n \t\t\t\t\t\t// error as a compilation error to make the compilation fail.\n-\t\t\t\t\t\tlet e = params[\"dll reference parse error \" + manifest];\n-\t\t\t\t\t\tif (e) {\n-\t\t\t\t\t\t\tcompilation.errors.push(e);\n+\t\t\t\t\t\tif (data.error) {\n+\t\t\t\t\t\t\tcompilation.errors.push(data.error);\n \t\t\t\t\t\t}\n+\t\t\t\t\t\tcompilation.fileDependencies.add(manifest);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}"
      },
      {
        "sha": "bd21245a80311d99c8047e1310c7cb83540f196d",
        "filename": "lib/ExternalModuleFactoryPlugin.js",
        "status": "modified",
        "additions": 4,
        "deletions": 8,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FExternalModuleFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FExternalModuleFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FExternalModuleFactoryPlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -15,9 +15,9 @@ class ExternalModuleFactoryPlugin {\n \n \tapply(normalModuleFactory) {\n \t\tconst globalType = this.type;\n-\t\tnormalModuleFactory.hooks.factory.tap(\n+\t\tnormalModuleFactory.hooks.factorize.tapAsync(\n \t\t\t\"ExternalModuleFactoryPlugin\",\n-\t\t\tfactory => (data, callback) => {\n+\t\t\t(data, callback) => {\n \t\t\t\tconst context = data.context;\n \t\t\t\tconst dependency = data.dependencies[0];\n \n@@ -30,7 +30,7 @@ class ExternalModuleFactoryPlugin {\n \t\t\t\tconst handleExternal = (value, type, callback) => {\n \t\t\t\t\tif (value === false) {\n \t\t\t\t\t\t// Not externals, fallback to original factory\n-\t\t\t\t\t\treturn factory(data, callback);\n+\t\t\t\t\t\treturn callback();\n \t\t\t\t\t}\n \t\t\t\t\t/** @type {string} */\n \t\t\t\t\tlet externalConfig;\n@@ -126,11 +126,7 @@ class ExternalModuleFactoryPlugin {\n \t\t\t\t\tcallback();\n \t\t\t\t};\n \n-\t\t\t\thandleExternals(this.externals, (err, module) => {\n-\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\tif (!module) return handleExternal(false, undefined, callback);\n-\t\t\t\t\treturn callback(null, module);\n-\t\t\t\t});\n+\t\t\t\thandleExternals(this.externals, callback);\n \t\t\t}\n \t\t);\n \t}"
      },
      {
        "sha": "a8de5676f3e783f6293f33f66db86c3d6a5414a8",
        "filename": "lib/FileSystemInfo.js",
        "status": "modified",
        "additions": 168,
        "deletions": 6,
        "changes": 174,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FFileSystemInfo.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FFileSystemInfo.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFileSystemInfo.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -26,7 +26,9 @@ const applyMtime = mtime => {\n class FileSystemInfo {\n \tconstructor(fs) {\n \t\tthis.fs = fs;\n+\t\t/** @type {Map<string, FileSystemInfoEntry | null>} */\n \t\tthis._fileTimestamps = new Map();\n+\t\t/** @type {Map<string, FileSystemInfoEntry | null>} */\n \t\tthis._contextTimestamps = new Map();\n \t\tthis.fileTimestampQueue = new AsyncQueue({\n \t\t\tname: \"file timestamp\",\n@@ -41,7 +43,7 @@ class FileSystemInfo {\n \t}\n \n \t/**\n-\t * @param {Map<string, FileSystemInfoEntry>} map timestamps\n+\t * @param {Map<string, FileSystemInfoEntry | null>} map timestamps\n \t * @returns {void}\n \t */\n \taddFileTimestamps(map) {\n@@ -51,7 +53,7 @@ class FileSystemInfo {\n \t}\n \n \t/**\n-\t * @param {Map<string, FileSystemInfoEntry>} map timestamps\n+\t * @param {Map<string, FileSystemInfoEntry | null>} map timestamps\n \t * @returns {void}\n \t */\n \taddContextTimestamps(map) {\n@@ -82,6 +84,165 @@ class FileSystemInfo {\n \t\tthis.contextTimestampQueue.add(path, callback);\n \t}\n \n+\tcreateSnapshot(startTime, files, directories, missing, options, callback) {\n+\t\tconst fileTimestamps = new Map();\n+\t\tconst contextTimestamps = new Map();\n+\t\tconst missingTimestamps = new Map();\n+\t\tlet jobs = 1;\n+\t\tconst jobDone = () => {\n+\t\t\tif (--jobs === 0) {\n+\t\t\t\tcallback(null, {\n+\t\t\t\t\tstartTime,\n+\t\t\t\t\tfileTimestamps,\n+\t\t\t\t\tcontextTimestamps,\n+\t\t\t\t\tmissingTimestamps\n+\t\t\t\t});\n+\t\t\t}\n+\t\t};\n+\t\tif (files) {\n+\t\t\tfor (const path of files) {\n+\t\t\t\tconst cache = this._fileTimestamps.get(path);\n+\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\tfileTimestamps.set(path, cache);\n+\t\t\t\t} else {\n+\t\t\t\t\tjobs++;\n+\t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\tfileTimestamps.set(path, \"error\");\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tfileTimestamps.set(path, entry);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tif (directories) {\n+\t\t\tfor (const path of directories) {\n+\t\t\t\tcontextTimestamps.set(path, \"error\");\n+\t\t\t\t// TODO: getContextTimestamp is not implemented yet\n+\t\t\t}\n+\t\t}\n+\t\tif (missing) {\n+\t\t\tfor (const path of missing) {\n+\t\t\t\tconst cache = this._fileTimestamps.get(path);\n+\t\t\t\tif (cache !== undefined) {\n+\t\t\t\t\tmissingTimestamps.set(path, cache);\n+\t\t\t\t} else {\n+\t\t\t\t\tjobs++;\n+\t\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\tmissingTimestamps.set(path, \"error\");\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tmissingTimestamps.set(path, entry);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tjobDone();\n+\t}\n+\n+\tcheckSnapshotValid(snapshot, callback) {\n+\t\tconst {\n+\t\t\tstartTime,\n+\t\t\tfileTimestamps,\n+\t\t\tcontextTimestamps,\n+\t\t\tmissingTimestamps\n+\t\t} = snapshot;\n+\t\tlet jobs = 1;\n+\t\tconst jobDone = () => {\n+\t\t\tif (--jobs === 0) {\n+\t\t\t\tcallback(null, true);\n+\t\t\t}\n+\t\t};\n+\t\tconst invalid = () => {\n+\t\t\tif (jobs > 0) {\n+\t\t\t\tjobs = NaN;\n+\t\t\t\tcallback(null, false);\n+\t\t\t}\n+\t\t};\n+\t\tconst checkExistance = (current, snap) => {\n+\t\t\tif (snap === \"error\") {\n+\t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n+\t\t\t\t// we can't compare further data and assume it's invalid\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\treturn !current === !snap;\n+\t\t};\n+\t\tconst checkFile = (current, snap) => {\n+\t\t\tif (snap === \"error\") {\n+\t\t\t\t// If there was an error while snapshotting (i. e. EBUSY)\n+\t\t\t\t// we can't compare further data and assume it's invalid\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\tif (current && current.safeTime > startTime) {\n+\t\t\t\t// If a change happened after starting reading the item\n+\t\t\t\t// this may no longer be valid\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\tif (!current !== !snap) {\n+\t\t\t\t// If existance of item differs\n+\t\t\t\t// it's invalid\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\tif (current) {\n+\t\t\t\t// For existing items only\n+\t\t\t\tif (\n+\t\t\t\t\tsnap.timestamp !== undefined &&\n+\t\t\t\t\tcurrent.timestamp !== snap.timestamp\n+\t\t\t\t) {\n+\t\t\t\t\t// If we have a timestamp (it was a file or symlink) and it differs from current timestamp\n+\t\t\t\t\t// it's invalid\n+\t\t\t\t\treturn false;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn true;\n+\t\t};\n+\t\tfor (const [path, ts] of fileTimestamps) {\n+\t\t\tconst cache = this._fileTimestamps.get(path);\n+\t\t\tif (cache !== undefined) {\n+\t\t\t\tif (!checkFile(cache, ts)) {\n+\t\t\t\t\tinvalid();\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tjobs++;\n+\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\tif (err) return invalid();\n+\t\t\t\t\tif (!checkFile(entry, ts)) {\n+\t\t\t\t\t\tinvalid();\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n+\t\tif (contextTimestamps.size > 0) {\n+\t\t\t// TODO: getContextTimestamp is not implemented yet\n+\t\t\tinvalid();\n+\t\t}\n+\t\tfor (const [path, ts] of missingTimestamps) {\n+\t\t\tconst cache = this._fileTimestamps.get(path);\n+\t\t\tif (cache !== undefined) {\n+\t\t\t\tif (!checkExistance(cache, ts)) {\n+\t\t\t\t\tinvalid();\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tjobs++;\n+\t\t\t\tthis.fileTimestampQueue.add(path, (err, entry) => {\n+\t\t\t\t\tif (err) return invalid();\n+\t\t\t\t\tif (!checkExistance(entry, ts)) {\n+\t\t\t\t\t\tinvalid();\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tjobDone();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n+\t\tjobDone();\n+\t}\n+\n \t// TODO getFileHash(path, callback)\n \n \t_readFileTimestamp(path, callback) {\n@@ -94,12 +255,13 @@ class FileSystemInfo {\n \t\t\t\treturn callback(err);\n \t\t\t}\n \n-\t\t\tif (stat.mtime) applyMtime(+stat.mtime);\n+\t\t\tconst mtime = +stat.mtime;\n+\n+\t\t\tif (mtime) applyMtime(mtime);\n \n-\t\t\tconst mtime = +stat.mtime || Infinity;\n \t\t\tconst ts = {\n-\t\t\t\tsafeTime: mtime + FS_ACCURACY,\n-\t\t\t\ttimestamp: mtime\n+\t\t\t\tsafeTime: mtime ? mtime + FS_ACCURACY : Infinity,\n+\t\t\t\ttimestamp: stat.isDirectory() ? undefined : mtime\n \t\t\t};\n \n \t\t\tthis._fileTimestamps.set(path, ts);"
      },
      {
        "sha": "5923f1865dadf58e72a8aef56ab0de8555929ead",
        "filename": "lib/FunctionModuleTemplatePlugin.js",
        "status": "modified",
        "additions": 24,
        "deletions": 6,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FFunctionModuleTemplatePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FFunctionModuleTemplatePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFunctionModuleTemplatePlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -11,6 +11,22 @@ const Template = require(\"./Template\");\n \n /** @typedef {import(\"./ModuleTemplate\")} ModuleTemplate */\n \n+const joinIterableWithComma = iterable => {\n+\t// This is more performant than Array.from().join(\", \")\n+\t// as it doesn't create an array\n+\tlet str = \"\";\n+\tlet first = true;\n+\tfor (const item of iterable) {\n+\t\tstr += item;\n+\t\tif (first) {\n+\t\t\tfirst = false;\n+\t\t} else {\n+\t\t\tstr += \", \";\n+\t\t}\n+\t}\n+\treturn str;\n+};\n+\n class FunctionModuleTemplatePlugin {\n \tconstructor({ compilation }) {\n \t\tthis.compilation = compilation;\n@@ -62,9 +78,11 @@ class FunctionModuleTemplatePlugin {\n \t\t\t\t\tconst req = module.readableIdentifier(\n \t\t\t\t\t\tmoduleTemplate.runtimeTemplate.requestShortener\n \t\t\t\t\t);\n-\t\t\t\t\tsource.add(\"/*!****\" + req.replace(/./g, \"*\") + \"****!*\\\\\\n\");\n-\t\t\t\t\tsource.add(\"  !*** \" + req.replace(/\\*\\//g, \"*_/\") + \" ***!\\n\");\n-\t\t\t\t\tsource.add(\"  \\\\****\" + req.replace(/./g, \"*\") + \"****/\\n\");\n+\t\t\t\t\tconst reqStr = req.replace(/\\*\\//g, \"*_/\");\n+\t\t\t\t\tconst reqStrStar = \"*\".repeat(reqStr.length);\n+\t\t\t\t\tsource.add(\"/*!****\" + reqStrStar + \"****!*\\\\\\n\");\n+\t\t\t\t\tsource.add(\"  !*** \" + reqStr + \" ***!\\n\");\n+\t\t\t\t\tsource.add(\"  \\\\****\" + reqStrStar + \"****/\\n\");\n \t\t\t\t\tconst providedExports = moduleGraph.getProvidedExports(module);\n \t\t\t\t\tif (Array.isArray(providedExports)) {\n \t\t\t\t\t\tif (providedExports.length === 0) {\n@@ -81,9 +99,9 @@ class FunctionModuleTemplatePlugin {\n \t\t\t\t\t}\n \t\t\t\t\tsource.add(\n \t\t\t\t\t\tTemplate.toComment(\n-\t\t\t\t\t\t\t`runtime requirements: ${Array.from(\n+\t\t\t\t\t\t\t`runtime requirements: ${joinIterableWithComma(\n \t\t\t\t\t\t\t\tchunkGraph.getModuleRuntimeRequirements(module)\n-\t\t\t\t\t\t\t).join(\", \")}`\n+\t\t\t\t\t\t\t)}`\n \t\t\t\t\t\t) + \"\\n\"\n \t\t\t\t\t);\n \t\t\t\t\tconst usedExports = moduleGraph.getUsedExports(module);\n@@ -97,7 +115,7 @@ class FunctionModuleTemplatePlugin {\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tsource.add(\n \t\t\t\t\t\t\t\tTemplate.toComment(\n-\t\t\t\t\t\t\t\t\t\"exports used: \" + Array.from(usedExports).join(\", \")\n+\t\t\t\t\t\t\t\t\t\"exports used: \" + joinIterableWithComma(usedExports)\n \t\t\t\t\t\t\t\t) + \"\\n\"\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}"
      },
      {
        "sha": "bd75ef64b308e08b68cf226e9a84c9e575ab985d",
        "filename": "lib/IgnorePlugin.js",
        "status": "modified",
        "additions": 12,
        "deletions": 15,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FIgnorePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FIgnorePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FIgnorePlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -10,6 +10,7 @@ const schema = require(\"../schemas/plugins/IgnorePlugin.json\");\n \n /** @typedef {import(\"../declarations/plugins/IgnorePlugin\").IgnorePluginOptions} IgnorePluginOptions */\n /** @typedef {import(\"./Compiler\")} Compiler */\n+/** @typedef {import(\"./NormalModuleFactory\").ResolveData} ResolveData */\n \n class IgnorePlugin {\n \t/**\n@@ -27,44 +28,40 @@ class IgnorePlugin {\n \t * Note that if \"contextRegExp\" is given, both the \"resourceRegExp\"\n \t * and \"contextRegExp\" have to match.\n \t *\n-\t * @param {TODO} result result\n-\t * @returns {TODO|null} returns result or null if result should be ignored\n+\t * @param {ResolveData} resolveData resolve data\n+\t * @returns {false|undefined} returns false when the request should be ignored, otherwise undefined\n \t */\n-\tcheckIgnore(result) {\n-\t\tif (!result) return result;\n-\n+\tcheckIgnore(resolveData) {\n \t\tif (\n \t\t\t\"checkResource\" in this.options &&\n \t\t\tthis.options.checkResource &&\n-\t\t\tthis.options.checkResource(result.request, result.context)\n+\t\t\tthis.options.checkResource(resolveData.request, resolveData.context)\n \t\t) {\n \t\t\t// TODO webpack 5 remove checkContext, as checkResource already gets context\n \t\t\tif (\"checkContext\" in this.options && this.options.checkContext) {\n-\t\t\t\tif (this.options.checkContext(result.context)) {\n-\t\t\t\t\treturn null;\n+\t\t\t\tif (this.options.checkContext(resolveData.context)) {\n+\t\t\t\t\treturn false;\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\treturn null;\n+\t\t\t\treturn false;\n \t\t\t}\n \t\t}\n \n \t\tif (\n \t\t\t\"resourceRegExp\" in this.options &&\n \t\t\tthis.options.resourceRegExp &&\n-\t\t\tthis.options.resourceRegExp.test(result.request)\n+\t\t\tthis.options.resourceRegExp.test(resolveData.request)\n \t\t) {\n \t\t\tif (\"contextRegExp\" in this.options && this.options.contextRegExp) {\n \t\t\t\t// if \"contextRegExp\" is given,\n \t\t\t\t// both the \"resourceRegExp\" and \"contextRegExp\" have to match.\n-\t\t\t\tif (this.options.contextRegExp.test(result.context)) {\n-\t\t\t\t\treturn null;\n+\t\t\t\tif (this.options.contextRegExp.test(resolveData.context)) {\n+\t\t\t\t\treturn false;\n \t\t\t\t}\n \t\t\t} else {\n-\t\t\t\treturn null;\n+\t\t\t\treturn false;\n \t\t\t}\n \t\t}\n-\n-\t\treturn result;\n \t}\n \n \t/**"
      },
      {
        "sha": "1a2a03ffee49e9ca4cdcb1f994a4d4149cdfca63",
        "filename": "lib/ModuleFactory.js",
        "status": "added",
        "additions": 44,
        "deletions": 0,
        "changes": 44,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleFactory.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -0,0 +1,44 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+/** @typedef {import(\"./Dependency\")} Dependency */\n+/** @typedef {import(\"./Module\")} Module */\n+\n+/**\n+ * @typedef {Object} ModuleFactoryResult\n+ * @property {Module=} module the created module or unset if no module was created\n+ * @property {Set<string>=} fileDependencies\n+ * @property {Set<string>=} contextDependencies\n+ * @property {Set<string>=} missingDependencies\n+ */\n+\n+/**\n+ * @typedef {Object} ModuleFactoryCreateDataContextInfo\n+ * @property {string} issuer\n+ * @property {string} compiler\n+ */\n+\n+/**\n+ * @typedef {Object} ModuleFactoryCreateData\n+ * @property {ModuleFactoryCreateDataContextInfo} contextInfo\n+ * @property {any=} resolveOptions\n+ * @property {string} context\n+ * @property {Dependency[]} dependencies\n+ */\n+\n+class ModuleFactory {\n+\t/**\n+\t * @param {ModuleFactoryCreateData} data data object\n+\t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n+\t * @returns {void}\n+\t */\n+\tcreate(data, callback) {\n+\t\tthrow new Error(\"ModuleFactory.create must be overridden\");\n+\t}\n+}\n+\n+module.exports = ModuleFactory;"
      },
      {
        "sha": "4563170b3b5c2e3a3ea3f74e9ae990cf284cfd9e",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 82,
        "deletions": 96,
        "changes": 178,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -6,7 +6,6 @@\n \"use strict\";\n \n const { getContext, runLoaders } = require(\"loader-runner\");\n-const asyncLib = require(\"neo-async\");\n const { SyncHook } = require(\"tapable\");\n const {\n \tCachedSource,\n@@ -51,8 +50,6 @@ const makeSerializable = require(\"./util/makeSerializable\");\n  * @property {TODO} options\n  */\n \n-const EARLY_RETURN_ERROR = new Error(\"flags early return is not an error\");\n-\n /**\n  * @param {string | Buffer} input the input\n  * @returns {string} the converted string\n@@ -163,8 +160,6 @@ class NormalModule extends Module {\n \t\tthis.error = null;\n \t\t/** @private @type {Source=} */\n \t\tthis._source = null;\n-\t\t/** @type {number=} */\n-\t\tthis.buildTimestamp = undefined;\n \t\t/** @private @type {Map<string, GenerateSourceResult & CachedSourceEntry>} */\n \t\tthis._cachedSources = new Map();\n \n@@ -337,11 +332,10 @@ class NormalModule extends Module {\n \n \t/**\n \t * @param {string | Buffer} content the content\n-\t * @param {string | Buffer} resourceBuffer TODO\n \t * @param {string | TODO} sourceMap an optional source map\n \t * @returns {Source} the created source\n \t */\n-\tcreateSource(content, resourceBuffer, sourceMap) {\n+\tcreateSource(content, sourceMap) {\n \t\tif (Buffer.isBuffer(content)) {\n \t\t\t// @ts-ignore\n \t\t\t// TODO We need to fix @types/webpack-sources to allow RawSource to take a Buffer | string\n@@ -371,6 +365,56 @@ class NormalModule extends Module {\n \t\t\tfs\n \t\t);\n \n+\t\tconst startTime = Date.now();\n+\n+\t\tconst processResult = (err, result) => {\n+\t\t\tif (err) {\n+\t\t\t\tif (!(err instanceof Error)) {\n+\t\t\t\t\terr = new NonErrorEmittedError(err);\n+\t\t\t\t}\n+\t\t\t\tconst currentLoader = this.getCurrentLoader(loaderContext);\n+\t\t\t\tconst error = new ModuleBuildError(err, {\n+\t\t\t\t\tfrom:\n+\t\t\t\t\t\tcurrentLoader &&\n+\t\t\t\t\t\tcompilation.runtimeTemplate.requestShortener.shorten(\n+\t\t\t\t\t\t\tcurrentLoader.loader\n+\t\t\t\t\t\t)\n+\t\t\t\t});\n+\t\t\t\treturn callback(error);\n+\t\t\t}\n+\n+\t\t\tconst source = result[0];\n+\t\t\tconst sourceMap = result.length >= 1 ? result[1] : null;\n+\t\t\tconst extraInfo = result.length >= 2 ? result[2] : null;\n+\n+\t\t\tif (!Buffer.isBuffer(source) && typeof source !== \"string\") {\n+\t\t\t\tconst currentLoader = this.getCurrentLoader(loaderContext, 0);\n+\t\t\t\tconst err = new Error(\n+\t\t\t\t\t`Final loader (${\n+\t\t\t\t\t\tcurrentLoader\n+\t\t\t\t\t\t\t? compilation.runtimeTemplate.requestShortener.shorten(\n+\t\t\t\t\t\t\t\t\tcurrentLoader.loader\n+\t\t\t\t\t\t\t  )\n+\t\t\t\t\t\t\t: \"unknown\"\n+\t\t\t\t\t}) didn't return a Buffer or String`\n+\t\t\t\t);\n+\t\t\t\tconst error = new ModuleBuildError(err);\n+\t\t\t\treturn callback(error);\n+\t\t\t}\n+\n+\t\t\tthis._source = this.createSource(\n+\t\t\t\tthis.binary ? asBuffer(source) : asString(source),\n+\t\t\t\tsourceMap\n+\t\t\t);\n+\t\t\tthis._ast =\n+\t\t\t\ttypeof extraInfo === \"object\" &&\n+\t\t\t\textraInfo !== null &&\n+\t\t\t\textraInfo.webpackAST !== undefined\n+\t\t\t\t\t? extraInfo.webpackAST\n+\t\t\t\t\t: null;\n+\t\t\treturn callback();\n+\t\t};\n+\n \t\trunLoaders(\n \t\t\t{\n \t\t\t\tresource: this.resource,\n@@ -379,61 +423,36 @@ class NormalModule extends Module {\n \t\t\t\treadResource: fs.readFile.bind(fs)\n \t\t\t},\n \t\t\t(err, result) => {\n-\t\t\t\tif (result) {\n-\t\t\t\t\tthis.buildInfo.cacheable = result.cacheable;\n-\t\t\t\t\tthis.buildInfo.fileDependencies = new Set(result.fileDependencies);\n-\t\t\t\t\tthis.buildInfo.contextDependencies = new Set(\n-\t\t\t\t\t\tresult.contextDependencies\n+\t\t\t\tif (!result) {\n+\t\t\t\t\tprocessResult(\n+\t\t\t\t\t\terr || new Error(\"No result from loader-runner processing\"),\n+\t\t\t\t\t\tnull\n \t\t\t\t\t);\n \t\t\t\t}\n-\n-\t\t\t\tif (err) {\n-\t\t\t\t\tif (!(err instanceof Error)) {\n-\t\t\t\t\t\terr = new NonErrorEmittedError(err);\n-\t\t\t\t\t}\n-\t\t\t\t\tconst currentLoader = this.getCurrentLoader(loaderContext);\n-\t\t\t\t\tconst error = new ModuleBuildError(err, {\n-\t\t\t\t\t\tfrom:\n-\t\t\t\t\t\t\tcurrentLoader &&\n-\t\t\t\t\t\t\tcompilation.runtimeTemplate.requestShortener.shorten(\n-\t\t\t\t\t\t\t\tcurrentLoader.loader\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t});\n-\t\t\t\t\treturn callback(error);\n-\t\t\t\t}\n-\n-\t\t\t\tconst resourceBuffer = result.resourceBuffer;\n-\t\t\t\tconst source = result.result[0];\n-\t\t\t\tconst sourceMap = result.result.length >= 1 ? result.result[1] : null;\n-\t\t\t\tconst extraInfo = result.result.length >= 2 ? result.result[2] : null;\n-\n-\t\t\t\tif (!Buffer.isBuffer(source) && typeof source !== \"string\") {\n-\t\t\t\t\tconst currentLoader = this.getCurrentLoader(loaderContext, 0);\n-\t\t\t\t\tconst err = new Error(\n-\t\t\t\t\t\t`Final loader (${\n-\t\t\t\t\t\t\tcurrentLoader\n-\t\t\t\t\t\t\t\t? compilation.runtimeTemplate.requestShortener.shorten(\n-\t\t\t\t\t\t\t\t\t\tcurrentLoader.loader\n-\t\t\t\t\t\t\t\t  )\n-\t\t\t\t\t\t\t\t: \"unknown\"\n-\t\t\t\t\t\t}) didn't return a Buffer or String`\n-\t\t\t\t\t);\n-\t\t\t\t\tconst error = new ModuleBuildError(err);\n-\t\t\t\t\treturn callback(error);\n+\t\t\t\tthis.buildInfo.fileDependencies = new Set(result.fileDependencies);\n+\t\t\t\tthis.buildInfo.contextDependencies = new Set(\n+\t\t\t\t\tresult.contextDependencies\n+\t\t\t\t);\n+\t\t\t\tthis.buildInfo.missingDependencies = new Set(\n+\t\t\t\t\tresult.missingDependencies\n+\t\t\t\t);\n+\t\t\t\tif (!result.cacheable) {\n+\t\t\t\t\tthis.buildInfo.cacheable = false;\n+\t\t\t\t\tprocessResult(err, result.result);\n+\t\t\t\t\treturn;\n \t\t\t\t}\n-\n-\t\t\t\tthis._source = this.createSource(\n-\t\t\t\t\tthis.binary ? asBuffer(source) : asString(source),\n-\t\t\t\t\tresourceBuffer,\n-\t\t\t\t\tsourceMap\n+\t\t\t\tthis.buildInfo.cacheable = true;\n+\t\t\t\tcompilation.fileSystemInfo.createSnapshot(\n+\t\t\t\t\tstartTime,\n+\t\t\t\t\tresult.fileDependencies,\n+\t\t\t\t\tresult.contextDependencies,\n+\t\t\t\t\tresult.missingDependencies,\n+\t\t\t\t\tnull,\n+\t\t\t\t\t(err2, snapshot) => {\n+\t\t\t\t\t\tthis.buildInfo.snapshot = snapshot;\n+\t\t\t\t\t\tprocessResult(err || err2, result.result);\n+\t\t\t\t\t}\n \t\t\t\t);\n-\t\t\t\tthis._ast =\n-\t\t\t\t\ttypeof extraInfo === \"object\" &&\n-\t\t\t\t\textraInfo !== null &&\n-\t\t\t\t\textraInfo.webpackAST !== undefined\n-\t\t\t\t\t\t? extraInfo.webpackAST\n-\t\t\t\t\t\t: null;\n-\t\t\t\treturn callback();\n \t\t\t}\n \t\t);\n \t}\n@@ -515,7 +534,6 @@ class NormalModule extends Module {\n \t * @returns {void}\n \t */\n \tbuild(options, compilation, resolver, fs, callback) {\n-\t\tthis.buildTimestamp = Date.now();\n \t\tthis._forceBuild = false;\n \t\tthis._source = null;\n \t\tthis._ast = null;\n@@ -530,6 +548,7 @@ class NormalModule extends Module {\n \t\t\tparsed: true,\n \t\t\tfileDependencies: undefined,\n \t\t\tcontextDependencies: undefined,\n+\t\t\tmissingDependencies: undefined,\n \t\t\thash: undefined,\n \t\t\tassets: undefined\n \t\t};\n@@ -717,41 +736,10 @@ class NormalModule extends Module {\n \t\t// always build when module is not cacheable\n \t\tif (!this.buildInfo.cacheable) return callback(null, true);\n \n-\t\t// Check timestamps of all dependencies\n-\t\t// Missing timestamp -> need build\n-\t\t// Timestamp bigger than buildTimestamp -> need build\n-\t\tasyncLib.parallel(\n-\t\t\t[\n-\t\t\t\tcallback =>\n-\t\t\t\t\tasyncLib.each(\n-\t\t\t\t\t\tthis.buildInfo.fileDependencies,\n-\t\t\t\t\t\t(file, callback) => {\n-\t\t\t\t\t\t\tfileSystemInfo.getFileTimestamp(file, (err, info) => {\n-\t\t\t\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\t\t\t\tif (!info || info.safeTime >= this.buildTimestamp)\n-\t\t\t\t\t\t\t\t\treturn callback(EARLY_RETURN_ERROR);\n-\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t},\n-\t\t\t\t\t\tcallback\n-\t\t\t\t\t),\n-\t\t\t\tcallback =>\n-\t\t\t\t\tasyncLib.each(\n-\t\t\t\t\t\tthis.buildInfo.contextDependencies,\n-\t\t\t\t\t\t(context, callback) => {\n-\t\t\t\t\t\t\tfileSystemInfo.getContextTimestamp(context, (err, info) => {\n-\t\t\t\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\t\t\t\tif (!info || info.safeTime >= this.buildTimestamp)\n-\t\t\t\t\t\t\t\t\treturn callback(EARLY_RETURN_ERROR);\n-\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t},\n-\t\t\t\t\t\tcallback\n-\t\t\t\t\t)\n-\t\t\t],\n-\t\t\terr =>\n-\t\t\t\terr === EARLY_RETURN_ERROR ? callback(null, true) : callback(err, false)\n-\t\t);\n+\t\t// check snapshot for validity\n+\t\tfileSystemInfo.checkSnapshotValid(this.buildInfo.snapshot, (err, valid) => {\n+\t\t\tcallback(err, !valid);\n+\t\t});\n \t}\n \n \t/**\n@@ -788,7 +776,6 @@ class NormalModule extends Module {\n \t\twrite(this.resource);\n \t\t// deserialize\n \t\twrite(this._source);\n-\t\twrite(this.buildTimestamp);\n \t\twrite(this.error);\n \t\twrite(this._cachedSources);\n \t\twrite(this._lastSuccessfulBuildMeta);\n@@ -818,7 +805,6 @@ class NormalModule extends Module {\n \tdeserialize(context) {\n \t\tconst { read } = context;\n \t\tthis._source = read();\n-\t\tthis.buildTimestamp = read();\n \t\tthis.error = read();\n \t\tthis._cachedSources = read();\n \t\tthis._lastSuccessfulBuildMeta = read();"
      },
      {
        "sha": "47c50e0a357a407fc27b8ce0304930f6a1e566e6",
        "filename": "lib/NormalModuleFactory.js",
        "status": "modified",
        "additions": 342,
        "deletions": 195,
        "changes": 537,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNormalModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNormalModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModuleFactory.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -8,17 +8,36 @@\n const asyncLib = require(\"neo-async\");\n const path = require(\"path\");\n const {\n-\tAsyncSeriesWaterfallHook,\n+\tAsyncSeriesBailHook,\n \tSyncWaterfallHook,\n \tSyncBailHook,\n \tSyncHook,\n \tHookMap\n } = require(\"tapable\");\n+const Module = require(\"./Module\");\n+const ModuleFactory = require(\"./ModuleFactory\");\n const NormalModule = require(\"./NormalModule\");\n const RawModule = require(\"./RawModule\");\n const RuleSet = require(\"./RuleSet\");\n const cachedMerge = require(\"./util/cachedMerge\");\n \n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryCreateData} ModuleFactoryCreateData */\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n+/** @typedef {import(\"./dependencies/ModuleDependency\")} ModuleDependency */\n+\n+/**\n+ * @typedef {Object} ResolveData\n+ * @property {ModuleFactoryCreateData[\"contextInfo\"]} contextInfo\n+ * @property {ModuleFactoryCreateData[\"resolveOptions\"]} resolveOptions\n+ * @property {string} context\n+ * @property {string} request\n+ * @property {ModuleDependency[]} dependencies\n+ * @property {Object} createData\n+ * @property {Set<string>} fileDependencies\n+ * @property {Set<string>} missingDependencies\n+ * @property {Set<string>} contextDependencies\n+ */\n+\n const EMPTY_RESOLVE_OPTIONS = {};\n \n const MATCH_RESOURCE_REGEX = /^([^!]+)!=!/;\n@@ -39,6 +58,14 @@ const loaderToIdent = data => {\n \treturn data.loader + \"?\" + JSON.stringify(data.options);\n };\n \n+const stringifyLoadersAndResource = (loaders, resource) => {\n+\tlet str = \"\";\n+\tfor (const loader of loaders) {\n+\t\tstr += loaderToIdent(loader) + \"!\";\n+\t}\n+\treturn str + resource;\n+};\n+\n const identToLoaderRequest = resultString => {\n \tconst idx = resultString.indexOf(\"?\");\n \tif (idx >= 0) {\n@@ -56,17 +83,42 @@ const identToLoaderRequest = resultString => {\n \t}\n };\n \n+const needCalls = (times, callback) => {\n+\treturn err => {\n+\t\tif (--times === 0) {\n+\t\t\treturn callback(err);\n+\t\t}\n+\t\tif (err && times > 0) {\n+\t\t\ttimes = NaN;\n+\t\t\treturn callback(err);\n+\t\t}\n+\t};\n+};\n+\n+// TODO webpack 6 remove\n+const deprecationChangedHookMessage = name =>\n+\t`NormalModuleFactory.${name} is no longer a waterfall hook, but a bailing hook instead. ` +\n+\t\"Do not return the passed object, but modify it instead. \" +\n+\t\"Returning false will ignore the request and results in no module created.\";\n+\n const dependencyCache = new WeakMap();\n \n-class NormalModuleFactory {\n+class NormalModuleFactory extends ModuleFactory {\n \tconstructor(context, resolverFactory, options) {\n+\t\tsuper();\n \t\tthis.hooks = Object.freeze({\n-\t\t\tresolver: new SyncWaterfallHook([\"resolver\"]),\n-\t\t\tfactory: new SyncWaterfallHook([\"factory\"]),\n-\t\t\tbeforeResolve: new AsyncSeriesWaterfallHook([\"data\"]),\n-\t\t\tafterResolve: new AsyncSeriesWaterfallHook([\"data\"]),\n-\t\t\tcreateModule: new SyncBailHook([\"data\"]),\n-\t\t\tmodule: new SyncWaterfallHook([\"module\", \"data\"]),\n+\t\t\t/** @type {AsyncSeriesBailHook<ResolveData>} */\n+\t\t\tresolve: new AsyncSeriesBailHook([\"resolveData\"]),\n+\t\t\t/** @type {AsyncSeriesBailHook<ResolveData>} */\n+\t\t\tfactorize: new AsyncSeriesBailHook([\"resolveData\"]),\n+\t\t\t/** @type {AsyncSeriesBailHook<ResolveData>} */\n+\t\t\tbeforeResolve: new AsyncSeriesBailHook([\"resolveData\"]),\n+\t\t\t/** @type {AsyncSeriesBailHook<ResolveData>} */\n+\t\t\tafterResolve: new AsyncSeriesBailHook([\"resolveData\"]),\n+\t\t\t/** @type {SyncBailHook<ResolveData>} */\n+\t\t\tcreateModule: new SyncBailHook([\"resolveData\"]),\n+\t\t\t/** @type {SyncWaterfallHook<Module, ResolveData[\"createData\"], ResolveData>} */\n+\t\t\tmodule: new SyncWaterfallHook([\"module\", \"createData\", \"resolveData\"]),\n \t\t\tcreateParser: new HookMap(() => new SyncBailHook([\"parserOptions\"])),\n \t\t\tparser: new HookMap(() => new SyncHook([\"parser\", \"parserOptions\"])),\n \t\t\tcreateGenerator: new HookMap(\n@@ -86,111 +138,127 @@ class NormalModuleFactory {\n \t\tthis.context = context || \"\";\n \t\tthis.parserCache = Object.create(null);\n \t\tthis.generatorCache = Object.create(null);\n-\t\tthis.hooks.factory.tap(\"NormalModuleFactory\", () => (result, callback) => {\n-\t\t\tlet resolver = this.hooks.resolver.call(null);\n+\t\tthis.hooks.factorize.tapAsync(\n+\t\t\t/** @type {TODO} */ ({\n+\t\t\t\tname: \"NormalModuleFactory\",\n+\t\t\t\tstage: 100\n+\t\t\t}),\n+\t\t\t(resolveData, callback) => {\n+\t\t\t\tthis.hooks.resolve.callAsync(resolveData, (err, result) => {\n+\t\t\t\t\tif (err) return callback(err);\n \n-\t\t\t// Ignored\n-\t\t\tif (!resolver) return callback();\n+\t\t\t\t\t// Ignored\n+\t\t\t\t\tif (result === false) return callback();\n \n-\t\t\tresolver(result, (err, data) => {\n-\t\t\t\tif (err) return callback(err);\n+\t\t\t\t\t// direct module\n+\t\t\t\t\tif (result instanceof Module) return callback(null, result);\n \n-\t\t\t\t// Ignored\n-\t\t\t\tif (!data) return callback();\n+\t\t\t\t\tif (typeof result === \"object\")\n+\t\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t\tdeprecationChangedHookMessage(\"resolve\") +\n+\t\t\t\t\t\t\t\t\" Returning a Module object will result in this module used as result.\"\n+\t\t\t\t\t\t);\n \n-\t\t\t\t// direct module\n-\t\t\t\tif (typeof data.source === \"function\") return callback(null, data);\n+\t\t\t\t\tthis.hooks.afterResolve.callAsync(resolveData, (err, result) => {\n+\t\t\t\t\t\tif (err) return callback(err);\n \n-\t\t\t\tthis.hooks.afterResolve.callAsync(data, (err, result) => {\n-\t\t\t\t\tif (err) return callback(err);\n+\t\t\t\t\t\tif (typeof result === \"object\")\n+\t\t\t\t\t\t\tthrow new Error(deprecationChangedHookMessage(\"afterResolve\"));\n \n-\t\t\t\t\t// Ignored\n-\t\t\t\t\tif (!result) return callback();\n+\t\t\t\t\t\t// Ignored\n+\t\t\t\t\t\tif (result === false) return callback();\n \n-\t\t\t\t\tlet createdModule = this.hooks.createModule.call(result);\n-\t\t\t\t\tif (!createdModule) {\n-\t\t\t\t\t\tif (!result.request) {\n-\t\t\t\t\t\t\treturn callback(new Error(\"Empty dependency (no request)\"));\n-\t\t\t\t\t\t}\n+\t\t\t\t\t\tconst createData = resolveData.createData;\n \n-\t\t\t\t\t\tcreatedModule = new NormalModule(result);\n-\t\t\t\t\t}\n+\t\t\t\t\t\tlet createdModule = this.hooks.createModule.call(createData);\n+\t\t\t\t\t\tif (!createdModule) {\n+\t\t\t\t\t\t\tif (!resolveData.request) {\n+\t\t\t\t\t\t\t\treturn callback(new Error(\"Empty dependency (no request)\"));\n+\t\t\t\t\t\t\t}\n \n-\t\t\t\t\tcreatedModule = this.hooks.module.call(createdModule, result);\n+\t\t\t\t\t\t\tcreatedModule = new NormalModule(createData);\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tcreatedModule = this.hooks.module.call(\n+\t\t\t\t\t\t\tcreatedModule,\n+\t\t\t\t\t\t\tcreateData,\n+\t\t\t\t\t\t\tresolveData\n+\t\t\t\t\t\t);\n \n-\t\t\t\t\treturn callback(null, createdModule);\n+\t\t\t\t\t\treturn callback(null, createdModule);\n+\t\t\t\t\t});\n \t\t\t\t});\n-\t\t\t});\n-\t\t});\n-\t\tthis.hooks.resolver.tap(\"NormalModuleFactory\", () => (data, callback) => {\n-\t\t\tconst contextInfo = data.contextInfo;\n-\t\t\tconst context = data.context;\n-\t\t\tconst request = data.request;\n-\n-\t\t\tconst loaderResolver = this.getResolver(\"loader\");\n-\t\t\tconst normalResolver = this.getResolver(\"normal\", data.resolveOptions);\n-\n-\t\t\tlet matchResource = undefined;\n-\t\t\tlet requestWithoutMatchResource = request;\n-\t\t\tconst matchResourceMatch = MATCH_RESOURCE_REGEX.exec(request);\n-\t\t\tif (matchResourceMatch) {\n-\t\t\t\tmatchResource = matchResourceMatch[1];\n-\t\t\t\tif (/^\\.\\.?\\//.test(matchResource)) {\n-\t\t\t\t\tmatchResource = path.join(context, matchResource);\n-\t\t\t\t}\n-\t\t\t\trequestWithoutMatchResource = request.substr(\n-\t\t\t\t\tmatchResourceMatch[0].length\n-\t\t\t\t);\n \t\t\t}\n-\n-\t\t\tconst noPreAutoLoaders = requestWithoutMatchResource.startsWith(\"-!\");\n-\t\t\tconst noAutoLoaders =\n-\t\t\t\tnoPreAutoLoaders || requestWithoutMatchResource.startsWith(\"!\");\n-\t\t\tconst noPrePostAutoLoaders = requestWithoutMatchResource.startsWith(\"!!\");\n-\t\t\tlet elements = requestWithoutMatchResource\n-\t\t\t\t.replace(/^-?!+/, \"\")\n-\t\t\t\t.replace(/!!+/g, \"!\")\n-\t\t\t\t.split(\"!\");\n-\t\t\tlet resource = elements.pop();\n-\t\t\telements = elements.map(identToLoaderRequest);\n-\n-\t\t\tasyncLib.parallel(\n-\t\t\t\t[\n-\t\t\t\t\tcallback =>\n-\t\t\t\t\t\tthis.resolveRequestArray(\n-\t\t\t\t\t\t\tcontextInfo,\n-\t\t\t\t\t\t\tcontext,\n-\t\t\t\t\t\t\telements,\n-\t\t\t\t\t\t\tloaderResolver,\n-\t\t\t\t\t\t\tcallback\n-\t\t\t\t\t\t),\n-\t\t\t\t\tcallback => {\n-\t\t\t\t\t\tif (resource === \"\" || resource[0] === \"?\") {\n-\t\t\t\t\t\t\treturn callback(null, {\n-\t\t\t\t\t\t\t\tresource\n-\t\t\t\t\t\t\t});\n+\t\t);\n+\t\tthis.hooks.resolve.tapAsync(\n+\t\t\t/** @type {TODO} */ ({\n+\t\t\t\tname: \"NormalModuleFactory\",\n+\t\t\t\tstage: 100\n+\t\t\t}),\n+\t\t\t(data, callback) => {\n+\t\t\t\tconst {\n+\t\t\t\t\tcontextInfo,\n+\t\t\t\t\tcontext,\n+\t\t\t\t\trequest,\n+\t\t\t\t\tresolveOptions,\n+\t\t\t\t\tfileDependencies,\n+\t\t\t\t\tmissingDependencies,\n+\t\t\t\t\tcontextDependencies\n+\t\t\t\t} = data;\n+\n+\t\t\t\tconst loaderResolver = this.getResolver(\"loader\");\n+\t\t\t\tconst normalResolver = this.getResolver(\"normal\", resolveOptions);\n+\n+\t\t\t\t/** @type {string} */\n+\t\t\t\tlet matchResource = undefined;\n+\t\t\t\t/** @type {string} */\n+\t\t\t\tlet requestWithoutMatchResource = request;\n+\t\t\t\tconst matchResourceMatch = MATCH_RESOURCE_REGEX.exec(request);\n+\t\t\t\tif (matchResourceMatch) {\n+\t\t\t\t\tmatchResource = matchResourceMatch[1];\n+\t\t\t\t\tif (matchResource.charCodeAt(0) === 46) {\n+\t\t\t\t\t\t// 46 === \".\", 47 === \"/\"\n+\t\t\t\t\t\tconst secondChar = matchResource.charCodeAt(1);\n+\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\tsecondChar === 47 ||\n+\t\t\t\t\t\t\t(secondChar === 46 && matchResource.charCodeAt(2) === 47)\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t// if matchResources startsWith ../ or ./\n+\t\t\t\t\t\t\tmatchResource = path.join(context, matchResource);\n \t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tnormalResolver.resolve(\n-\t\t\t\t\t\t\tcontextInfo,\n-\t\t\t\t\t\t\tcontext,\n-\t\t\t\t\t\t\tresource,\n-\t\t\t\t\t\t\t{},\n-\t\t\t\t\t\t\t(err, resource, resourceResolveData) => {\n-\t\t\t\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\t\t\t\tcallback(null, {\n-\t\t\t\t\t\t\t\t\tresourceResolveData,\n-\t\t\t\t\t\t\t\t\tresource\n-\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t);\n \t\t\t\t\t}\n-\t\t\t\t],\n-\t\t\t\t(err, results) => {\n+\t\t\t\t\trequestWithoutMatchResource = request.substr(\n+\t\t\t\t\t\tmatchResourceMatch[0].length\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\n+\t\t\t\tconst firstChar = requestWithoutMatchResource.charCodeAt(0);\n+\t\t\t\tconst secondChar = requestWithoutMatchResource.charCodeAt(1);\n+\t\t\t\tconst noPreAutoLoaders = firstChar === 45 && secondChar === 33; // startsWith \"-!\"\n+\t\t\t\tconst noAutoLoaders = noPreAutoLoaders || firstChar === 33; // startsWith \"!\"\n+\t\t\t\tconst noPrePostAutoLoaders = firstChar === 33 && secondChar === 33; // startsWith \"!!\";\n+\t\t\t\tconst rawElements = requestWithoutMatchResource\n+\t\t\t\t\t.slice(\n+\t\t\t\t\t\tnoPreAutoLoaders || noPrePostAutoLoaders ? 2 : noAutoLoaders ? 1 : 0\n+\t\t\t\t\t)\n+\t\t\t\t\t.split(/!+/);\n+\t\t\t\tconst unresolvedResource = rawElements.pop();\n+\t\t\t\tconst elements = rawElements.map(identToLoaderRequest);\n+\n+\t\t\t\tconst resolveContext = {\n+\t\t\t\t\tfileDependencies,\n+\t\t\t\t\tmissing: missingDependencies,\n+\t\t\t\t\tmissingDependencies,\n+\t\t\t\t\tcontextDependencies\n+\t\t\t\t};\n+\n+\t\t\t\t/** @type {string | false} */\n+\t\t\t\tlet resource;\n+\t\t\t\tlet resourceResolveData;\n+\t\t\t\tlet loaders;\n+\n+\t\t\t\tconst continueCallback = needCalls(2, err => {\n \t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\tlet loaders = results[0];\n-\t\t\t\t\tconst resourceResolveData = results[1].resourceResolveData;\n-\t\t\t\t\tresource = results[1].resource;\n \n \t\t\t\t\t// translate option idents\n \t\t\t\t\ttry {\n@@ -219,10 +287,7 @@ class NormalModuleFactory {\n \n \t\t\t\t\tconst userRequest =\n \t\t\t\t\t\t(matchResource !== undefined ? `${matchResource}!=!` : \"\") +\n-\t\t\t\t\t\tloaders\n-\t\t\t\t\t\t\t.map(loaderToIdent)\n-\t\t\t\t\t\t\t.concat([resource])\n-\t\t\t\t\t\t\t.join(\"!\");\n+\t\t\t\t\t\tstringifyLoadersAndResource(loaders, resource);\n \n \t\t\t\t\tlet resourcePath =\n \t\t\t\t\t\tmatchResource !== undefined ? matchResource : resource;\n@@ -275,117 +340,192 @@ class NormalModuleFactory {\n \t\t\t\t\t\t\tsettings[r.type] = r.value;\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\tasyncLib.parallel(\n-\t\t\t\t\t\t[\n-\t\t\t\t\t\t\tthis.resolveRequestArray.bind(\n-\t\t\t\t\t\t\t\tthis,\n-\t\t\t\t\t\t\t\tcontextInfo,\n-\t\t\t\t\t\t\t\tthis.context,\n-\t\t\t\t\t\t\t\tuseLoadersPost,\n-\t\t\t\t\t\t\t\tloaderResolver\n-\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\tthis.resolveRequestArray.bind(\n-\t\t\t\t\t\t\t\tthis,\n-\t\t\t\t\t\t\t\tcontextInfo,\n-\t\t\t\t\t\t\t\tthis.context,\n-\t\t\t\t\t\t\t\tuseLoaders,\n-\t\t\t\t\t\t\t\tloaderResolver\n-\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\tthis.resolveRequestArray.bind(\n-\t\t\t\t\t\t\t\tthis,\n-\t\t\t\t\t\t\t\tcontextInfo,\n-\t\t\t\t\t\t\t\tthis.context,\n-\t\t\t\t\t\t\t\tuseLoadersPre,\n-\t\t\t\t\t\t\t\tloaderResolver\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t],\n-\t\t\t\t\t\t(err, results) => {\n-\t\t\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\t\t\tloaders = results[0].concat(loaders, results[1], results[2]);\n-\t\t\t\t\t\t\tprocess.nextTick(() => {\n-\t\t\t\t\t\t\t\tconst type = settings.type;\n-\t\t\t\t\t\t\t\tconst resolveOptions = settings.resolve;\n-\t\t\t\t\t\t\t\tcallback(null, {\n-\t\t\t\t\t\t\t\t\tcontext: context,\n-\t\t\t\t\t\t\t\t\trequest: loaders\n-\t\t\t\t\t\t\t\t\t\t.map(loaderToIdent)\n-\t\t\t\t\t\t\t\t\t\t.concat([resource])\n-\t\t\t\t\t\t\t\t\t\t.join(\"!\"),\n-\t\t\t\t\t\t\t\t\tdependencies: data.dependencies,\n-\t\t\t\t\t\t\t\t\tuserRequest,\n-\t\t\t\t\t\t\t\t\trawRequest: request,\n-\t\t\t\t\t\t\t\t\tloaders,\n-\t\t\t\t\t\t\t\t\tresource,\n-\t\t\t\t\t\t\t\t\tmatchResource,\n-\t\t\t\t\t\t\t\t\tresourceResolveData,\n-\t\t\t\t\t\t\t\t\tsettings,\n-\t\t\t\t\t\t\t\t\ttype,\n-\t\t\t\t\t\t\t\t\tparser: this.getParser(type, settings.parser),\n-\t\t\t\t\t\t\t\t\tgenerator: this.getGenerator(type, settings.generator),\n-\t\t\t\t\t\t\t\t\tresolveOptions\n-\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\tlet postLoaders, normalLoaders, preLoaders;\n+\n+\t\t\t\t\tconst continueCallback = needCalls(3, err => {\n+\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tconst allLoaders = postLoaders;\n+\t\t\t\t\t\tfor (const loader of loaders) allLoaders.push(loader);\n+\t\t\t\t\t\tfor (const loader of normalLoaders) allLoaders.push(loader);\n+\t\t\t\t\t\tfor (const loader of preLoaders) allLoaders.push(loader);\n+\t\t\t\t\t\tconst type = settings.type;\n+\t\t\t\t\t\tconst resolveOptions = settings.resolve;\n+\t\t\t\t\t\tObject.assign(data.createData, {\n+\t\t\t\t\t\t\trequest: stringifyLoadersAndResource(allLoaders, resource),\n+\t\t\t\t\t\t\tuserRequest,\n+\t\t\t\t\t\t\trawRequest: request,\n+\t\t\t\t\t\t\tloaders: allLoaders,\n+\t\t\t\t\t\t\tresource,\n+\t\t\t\t\t\t\tmatchResource,\n+\t\t\t\t\t\t\tresourceResolveData,\n+\t\t\t\t\t\t\tsettings,\n+\t\t\t\t\t\t\ttype,\n+\t\t\t\t\t\t\tparser: this.getParser(type, settings.parser),\n+\t\t\t\t\t\t\tgenerator: this.getGenerator(type, settings.generator),\n+\t\t\t\t\t\t\tresolveOptions\n+\t\t\t\t\t\t});\n+\t\t\t\t\t\tcallback();\n+\t\t\t\t\t});\n+\t\t\t\t\tthis.resolveRequestArray(\n+\t\t\t\t\t\tcontextInfo,\n+\t\t\t\t\t\tthis.context,\n+\t\t\t\t\t\tuseLoadersPost,\n+\t\t\t\t\t\tloaderResolver,\n+\t\t\t\t\t\tresolveContext,\n+\t\t\t\t\t\t(err, result) => {\n+\t\t\t\t\t\t\tpostLoaders = result;\n+\t\t\t\t\t\t\tcontinueCallback(err);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t);\n+\t\t\t\t\tthis.resolveRequestArray(\n+\t\t\t\t\t\tcontextInfo,\n+\t\t\t\t\t\tthis.context,\n+\t\t\t\t\t\tuseLoaders,\n+\t\t\t\t\t\tloaderResolver,\n+\t\t\t\t\t\tresolveContext,\n+\t\t\t\t\t\t(err, result) => {\n+\t\t\t\t\t\t\tnormalLoaders = result;\n+\t\t\t\t\t\t\tcontinueCallback(err);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t);\n+\t\t\t\t\tthis.resolveRequestArray(\n+\t\t\t\t\t\tcontextInfo,\n+\t\t\t\t\t\tthis.context,\n+\t\t\t\t\t\tuseLoadersPre,\n+\t\t\t\t\t\tloaderResolver,\n+\t\t\t\t\t\tresolveContext,\n+\t\t\t\t\t\t(err, result) => {\n+\t\t\t\t\t\t\tpreLoaders = result;\n+\t\t\t\t\t\t\tcontinueCallback(err);\n \t\t\t\t\t\t}\n \t\t\t\t\t);\n+\t\t\t\t});\n+\n+\t\t\t\tthis.resolveRequestArray(\n+\t\t\t\t\tcontextInfo,\n+\t\t\t\t\tcontext,\n+\t\t\t\t\telements,\n+\t\t\t\t\tloaderResolver,\n+\t\t\t\t\tresolveContext,\n+\t\t\t\t\t(err, result) => {\n+\t\t\t\t\t\tif (err) return continueCallback(err);\n+\t\t\t\t\t\tloaders = result;\n+\t\t\t\t\t\tcontinueCallback();\n+\t\t\t\t\t}\n+\t\t\t\t);\n+\n+\t\t\t\tif (\n+\t\t\t\t\tunresolvedResource === \"\" ||\n+\t\t\t\t\tunresolvedResource.charCodeAt(0) === 63\n+\t\t\t\t) {\n+\t\t\t\t\t// 63 === \"?\"\n+\t\t\t\t\tresource = unresolvedResource;\n+\t\t\t\t\treturn continueCallback();\n \t\t\t\t}\n-\t\t\t);\n-\t\t});\n+\n+\t\t\t\tnormalResolver.resolve(\n+\t\t\t\t\tcontextInfo,\n+\t\t\t\t\tcontext,\n+\t\t\t\t\tunresolvedResource,\n+\t\t\t\t\tresolveContext,\n+\t\t\t\t\t(err, resolvedResource, resolvedResourceResolveData) => {\n+\t\t\t\t\t\tif (err) return continueCallback(err);\n+\n+\t\t\t\t\t\t// TODO remove this when enhanced-resolve supports fileDependencies\n+\t\t\t\t\t\tif (resolvedResource) {\n+\t\t\t\t\t\t\tfileDependencies.add(resolvedResource);\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tresource = resolvedResource;\n+\t\t\t\t\t\tresourceResolveData = resolvedResourceResolveData;\n+\t\t\t\t\t\tcontinueCallback();\n+\t\t\t\t\t}\n+\t\t\t\t);\n+\t\t\t}\n+\t\t);\n \t}\n \n+\t/**\n+\t * @param {ModuleFactoryCreateData} data data object\n+\t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n+\t * @returns {void}\n+\t */\n \tcreate(data, callback) {\n-\t\tconst dependencies = data.dependencies;\n+\t\tconst dependencies = /** @type {ModuleDependency[]} */ (data.dependencies);\n \t\tif (this.unsafeCache) {\n \t\t\tconst cacheEntry = dependencyCache.get(dependencies[0]);\n \t\t\tif (cacheEntry) return callback(null, cacheEntry);\n \t\t}\n \t\tconst context = data.context || this.context;\n \t\tconst resolveOptions = data.resolveOptions || EMPTY_RESOLVE_OPTIONS;\n-\t\tconst request = dependencies[0].request;\n-\t\tconst contextInfo = data.contextInfo || {};\n-\t\tthis.hooks.beforeResolve.callAsync(\n-\t\t\t{\n-\t\t\t\tcontextInfo,\n-\t\t\t\tresolveOptions,\n-\t\t\t\tcontext,\n-\t\t\t\trequest,\n-\t\t\t\tdependencies\n-\t\t\t},\n-\t\t\t(err, result) => {\n-\t\t\t\tif (err) return callback(err);\n+\t\tconst dependency = dependencies[0];\n+\t\tconst request = dependency.request;\n+\t\tconst contextInfo = data.contextInfo;\n+\t\tconst fileDependencies = new Set();\n+\t\tconst missingDependencies = new Set();\n+\t\tconst contextDependencies = new Set();\n+\t\t/** @type {ResolveData} */\n+\t\tconst resolveData = {\n+\t\t\tcontextInfo,\n+\t\t\tresolveOptions,\n+\t\t\tcontext,\n+\t\t\trequest,\n+\t\t\tdependencies,\n+\t\t\tfileDependencies,\n+\t\t\tmissingDependencies,\n+\t\t\tcontextDependencies,\n+\t\t\tcreateData: {}\n+\t\t};\n+\t\tthis.hooks.beforeResolve.callAsync(resolveData, (err, result) => {\n+\t\t\tif (err) return callback(err);\n \n-\t\t\t\t// Ignored\n-\t\t\t\tif (!result) return callback();\n+\t\t\t// Ignored\n+\t\t\tif (result === false) return callback();\n \n-\t\t\t\tconst factory = this.hooks.factory.call(null);\n+\t\t\tif (typeof result === \"object\")\n+\t\t\t\tthrow new Error(deprecationChangedHookMessage(\"beforeResolve\"));\n \n-\t\t\t\t// Ignored\n-\t\t\t\tif (!factory) return callback();\n+\t\t\tthis.hooks.factorize.callAsync(resolveData, (err, module) => {\n+\t\t\t\tif (err) return callback(err);\n \n-\t\t\t\tfactory(result, (err, module) => {\n-\t\t\t\t\tif (err) return callback(err);\n+\t\t\t\tconst factoryResult = {\n+\t\t\t\t\tmodule,\n+\t\t\t\t\tfileDependencies,\n+\t\t\t\t\tmissingDependencies,\n+\t\t\t\t\tcontextDependencies\n+\t\t\t\t};\n \n-\t\t\t\t\tif (this.unsafeCache && module && this.cachePredicate(module)) {\n-\t\t\t\t\t\tfor (const d of dependencies) {\n-\t\t\t\t\t\t\tdependencyCache.set(d, module);\n-\t\t\t\t\t\t}\n+\t\t\t\tif (this.unsafeCache && module && this.cachePredicate(module)) {\n+\t\t\t\t\tfor (const d of dependencies) {\n+\t\t\t\t\t\tdependencyCache.set(d, factoryResult);\n \t\t\t\t\t}\n+\t\t\t\t}\n \n-\t\t\t\t\tcallback(null, module);\n-\t\t\t\t});\n-\t\t\t}\n-\t\t);\n+\t\t\t\tcallback(null, factoryResult);\n+\t\t\t});\n+\t\t});\n \t}\n \n-\tresolveRequestArray(contextInfo, context, array, resolver, callback) {\n-\t\tif (array.length === 0) return callback(null, []);\n+\tresolveRequestArray(\n+\t\tcontextInfo,\n+\t\tcontext,\n+\t\tarray,\n+\t\tresolver,\n+\t\tresolveContext,\n+\t\tcallback\n+\t) {\n+\t\tif (array.length === 0) return callback(null, array);\n \t\tasyncLib.map(\n \t\t\tarray,\n \t\t\t(item, callback) => {\n \t\t\t\tresolver.resolve(\n \t\t\t\t\tcontextInfo,\n \t\t\t\t\tcontext,\n \t\t\t\t\titem.loader,\n-\t\t\t\t\t{},\n+\t\t\t\t\tresolveContext,\n \t\t\t\t\t(err, result) => {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\terr &&\n@@ -396,7 +536,7 @@ class NormalModuleFactory {\n \t\t\t\t\t\t\t\tcontextInfo,\n \t\t\t\t\t\t\t\tcontext,\n \t\t\t\t\t\t\t\titem.loader + \"-loader\",\n-\t\t\t\t\t\t\t\t{},\n+\t\t\t\t\t\t\t\tresolveContext,\n \t\t\t\t\t\t\t\terr2 => {\n \t\t\t\t\t\t\t\t\tif (!err2) {\n \t\t\t\t\t\t\t\t\t\terr.message =\n@@ -414,15 +554,22 @@ class NormalModuleFactory {\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (err) return callback(err);\n \n-\t\t\t\t\t\tconst optionsOnly = item.options\n-\t\t\t\t\t\t\t? {\n-\t\t\t\t\t\t\t\t\toptions: item.options\n-\t\t\t\t\t\t\t  }\n-\t\t\t\t\t\t\t: undefined;\n-\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\tnull,\n-\t\t\t\t\t\t\tObject.assign({}, item, identToLoaderRequest(result), optionsOnly)\n-\t\t\t\t\t\t);\n+\t\t\t\t\t\tconst parsedResult = identToLoaderRequest(result);\n+\t\t\t\t\t\tconst resolved = {\n+\t\t\t\t\t\t\tloader: parsedResult.loader,\n+\t\t\t\t\t\t\toptions:\n+\t\t\t\t\t\t\t\titem.options === undefined\n+\t\t\t\t\t\t\t\t\t? parsedResult.options\n+\t\t\t\t\t\t\t\t\t: item.options,\n+\t\t\t\t\t\t\tident: item.options === undefined ? undefined : item.ident\n+\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\t// TODO remove this when enhanced-resolve supports fileDependencies\n+\t\t\t\t\t\tif (resolved.loader) {\n+\t\t\t\t\t\t\tresolveContext.fileDependencies.add(resolved.loader);\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\treturn callback(null, resolved);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t\t},"
      },
      {
        "sha": "876654babbe7854f56132b82c60de44b3fba4281",
        "filename": "lib/NormalModuleReplacementPlugin.js",
        "status": "modified",
        "additions": 4,
        "deletions": 5,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNormalModuleReplacementPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNormalModuleReplacementPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModuleReplacementPlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -33,7 +33,6 @@ class NormalModuleReplacementPlugin {\n \t\t\t\"NormalModuleReplacementPlugin\",\n \t\t\tnmf => {\n \t\t\t\tnmf.hooks.beforeResolve.tap(\"NormalModuleReplacementPlugin\", result => {\n-\t\t\t\t\tif (!result) return;\n \t\t\t\t\tif (resourceRegExp.test(result.request)) {\n \t\t\t\t\t\tif (typeof newResource === \"function\") {\n \t\t\t\t\t\t\tnewResource(result);\n@@ -44,13 +43,13 @@ class NormalModuleReplacementPlugin {\n \t\t\t\t\treturn result;\n \t\t\t\t});\n \t\t\t\tnmf.hooks.afterResolve.tap(\"NormalModuleReplacementPlugin\", result => {\n-\t\t\t\t\tif (!result) return;\n-\t\t\t\t\tif (resourceRegExp.test(result.resource)) {\n+\t\t\t\t\tconst createData = result.createData;\n+\t\t\t\t\tif (resourceRegExp.test(createData.resource)) {\n \t\t\t\t\t\tif (typeof newResource === \"function\") {\n \t\t\t\t\t\t\tnewResource(result);\n \t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tresult.resource = path.resolve(\n-\t\t\t\t\t\t\t\tpath.dirname(result.resource),\n+\t\t\t\t\t\t\tcreateData.resource = path.resolve(\n+\t\t\t\t\t\t\t\tpath.dirname(createData.resource),\n \t\t\t\t\t\t\t\tnewResource\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}"
      },
      {
        "sha": "be86ccf85de30c34237ad10129d4b03b93dc36fc",
        "filename": "lib/NullFactory.js",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNullFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FNullFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNullFactory.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -5,7 +5,17 @@\n \n \"use strict\";\n \n-class NullFactory {\n+const ModuleFactory = require(\"./ModuleFactory\");\n+\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryCreateData} ModuleFactoryCreateData */\n+/** @typedef {import(\"./ModuleFactory\").ModuleFactoryResult} ModuleFactoryResult */\n+\n+class NullFactory extends ModuleFactory {\n+\t/**\n+\t * @param {ModuleFactoryCreateData} data data object\n+\t * @param {function(Error=, ModuleFactoryResult=): void} callback callback\n+\t * @returns {void}\n+\t */\n \tcreate(data, callback) {\n \t\treturn callback();\n \t}"
      },
      {
        "sha": "b295590c57eb56f463551abdbb100ee32ffde645",
        "filename": "lib/WatchIgnorePlugin.js",
        "status": "modified",
        "additions": 6,
        "deletions": 22,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FWatchIgnorePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FWatchIgnorePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWatchIgnorePlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -34,15 +34,7 @@ class IgnoringWatchFileSystem {\n \t\t\tmissing,\n \t\t\tstartTime,\n \t\t\toptions,\n-\t\t\t(\n-\t\t\t\terr,\n-\t\t\t\tfilesModified,\n-\t\t\t\tdirsModified,\n-\t\t\t\tmissingModified,\n-\t\t\t\tfileTimestamps,\n-\t\t\t\tdirTimestamps,\n-\t\t\t\tremovedFiles\n-\t\t\t) => {\n+\t\t\t(err, fileTimestamps, dirTimestamps, removedFiles) => {\n \t\t\t\tif (err) return callback(err);\n \t\t\t\tfor (const path of ignoredFiles) {\n \t\t\t\t\tfileTimestamps.set(path, 1);\n@@ -52,31 +44,23 @@ class IgnoringWatchFileSystem {\n \t\t\t\t\tdirTimestamps.set(path, 1);\n \t\t\t\t}\n \n-\t\t\t\tcallback(\n-\t\t\t\t\terr,\n-\t\t\t\t\tfilesModified,\n-\t\t\t\t\tdirsModified,\n-\t\t\t\t\tmissingModified,\n-\t\t\t\t\tfileTimestamps,\n-\t\t\t\t\tdirTimestamps,\n-\t\t\t\t\tremovedFiles\n-\t\t\t\t);\n+\t\t\t\tcallback(err, fileTimestamps, dirTimestamps, removedFiles);\n \t\t\t},\n \t\t\tcallbackUndelayed\n \t\t);\n \n \t\treturn {\n \t\t\tclose: () => watcher.close(),\n \t\t\tpause: () => watcher.pause(),\n-\t\t\tgetContextTimestamps: () => {\n-\t\t\t\tconst dirTimestamps = watcher.getContextTimestamps();\n+\t\t\tgetContextInfoEntries: () => {\n+\t\t\t\tconst dirTimestamps = watcher.getContextInfoEntries();\n \t\t\t\tfor (const path of ignoredDirs) {\n \t\t\t\t\tdirTimestamps.set(path, 1);\n \t\t\t\t}\n \t\t\t\treturn dirTimestamps;\n \t\t\t},\n-\t\t\tgetFileTimestamps: () => {\n-\t\t\t\tconst fileTimestamps = watcher.getFileTimestamps();\n+\t\t\tgetFileTimeInfoEntries: () => {\n+\t\t\t\tconst fileTimestamps = watcher.getFileTimeInfoEntries();\n \t\t\t\tfor (const path of ignoredFiles) {\n \t\t\t\t\tfileTimestamps.set(path, 1);\n \t\t\t\t}"
      },
      {
        "sha": "826535c4cac9d48652e2496a082b8ea0496260aa",
        "filename": "lib/Watching.js",
        "status": "modified",
        "additions": 34,
        "deletions": 53,
        "changes": 87,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FWatching.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2FWatching.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWatching.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -19,15 +19,6 @@ const Stats = require(\"./Stats\");\n  * @param {T=} result\n  */\n \n-// TODO refactor watchpack to report timestamps in the correct format\n-const toFileSystemInfoEntryMap = timestamps => {\n-\tconst map = new Map();\n-\tfor (const [key, ts] of timestamps) {\n-\t\tmap.set(key, { safeTime: ts });\n-\t}\n-\treturn map;\n-};\n-\n class Watching {\n \t/**\n \t * @param {Compiler} compiler the compiler\n@@ -77,30 +68,32 @@ class Watching {\n \t\t\t\t\t\treturn this._done(null, compilation);\n \t\t\t\t\t}\n \n-\t\t\t\t\tthis.compiler.emitAssets(compilation, err => {\n-\t\t\t\t\t\tif (err) return this._done(err);\n-\t\t\t\t\t\tif (this.invalid) return this._done();\n-\n-\t\t\t\t\t\tthis.compiler.emitRecords(err => {\n+\t\t\t\t\tprocess.nextTick(() => {\n+\t\t\t\t\t\tthis.compiler.emitAssets(compilation, err => {\n \t\t\t\t\t\t\tif (err) return this._done(err);\n+\t\t\t\t\t\t\tif (this.invalid) return this._done();\n \n-\t\t\t\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n-\t\t\t\t\t\t\t\tcompilation.needAdditionalPass = true;\n+\t\t\t\t\t\t\tthis.compiler.emitRecords(err => {\n+\t\t\t\t\t\t\t\tif (err) return this._done(err);\n \n-\t\t\t\t\t\t\t\tconst stats = new Stats(compilation);\n-\t\t\t\t\t\t\t\tstats.startTime = this.startTime;\n-\t\t\t\t\t\t\t\tstats.endTime = Date.now();\n-\t\t\t\t\t\t\t\tthis.compiler.hooks.done.callAsync(stats, err => {\n-\t\t\t\t\t\t\t\t\tif (err) return this._done(err);\n+\t\t\t\t\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n+\t\t\t\t\t\t\t\t\tcompilation.needAdditionalPass = true;\n \n-\t\t\t\t\t\t\t\t\tthis.compiler.hooks.additionalPass.callAsync(err => {\n+\t\t\t\t\t\t\t\t\tconst stats = new Stats(compilation);\n+\t\t\t\t\t\t\t\t\tstats.startTime = this.startTime;\n+\t\t\t\t\t\t\t\t\tstats.endTime = Date.now();\n+\t\t\t\t\t\t\t\t\tthis.compiler.hooks.done.callAsync(stats, err => {\n \t\t\t\t\t\t\t\t\t\tif (err) return this._done(err);\n-\t\t\t\t\t\t\t\t\t\tthis.compiler.compile(onCompiled);\n+\n+\t\t\t\t\t\t\t\t\t\tthis.compiler.hooks.additionalPass.callAsync(err => {\n+\t\t\t\t\t\t\t\t\t\t\tif (err) return this._done(err);\n+\t\t\t\t\t\t\t\t\t\t\tthis.compiler.compile(onCompiled);\n+\t\t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\treturn;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\treturn this._done(null, compilation);\n+\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\treturn this._done(null, compilation);\n+\t\t\t\t\t\t\t});\n \t\t\t\t\t\t});\n \t\t\t\t\t});\n \t\t\t\t};\n@@ -140,13 +133,15 @@ class Watching {\n \t\tthis.compiler.hooks.done.callAsync(stats, () => {\n \t\t\tthis.compiler.cache.beginIdle();\n \t\t\tthis.handler(null, stats);\n-\t\t\tif (!this.closed) {\n-\t\t\t\tthis.watch(\n-\t\t\t\t\tArray.from(compilation.fileDependencies),\n-\t\t\t\t\tArray.from(compilation.contextDependencies),\n-\t\t\t\t\tArray.from(compilation.missingDependencies)\n-\t\t\t\t);\n-\t\t\t}\n+\t\t\tprocess.nextTick(() => {\n+\t\t\t\tif (!this.closed) {\n+\t\t\t\t\tthis.watch(\n+\t\t\t\t\t\tArray.from(compilation.fileDependencies),\n+\t\t\t\t\t\tArray.from(compilation.contextDependencies),\n+\t\t\t\t\t\tArray.from(compilation.missingDependencies)\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t});\n \t\t\tfor (const cb of this.callbacks) cb();\n \t\t\tthis.callbacks.length = 0;\n \t\t});\n@@ -160,24 +155,14 @@ class Watching {\n \t\t\tmissing,\n \t\t\tthis.startTime,\n \t\t\tthis.watchOptions,\n-\t\t\t(\n-\t\t\t\terr,\n-\t\t\t\tfilesModified,\n-\t\t\t\tcontextModified,\n-\t\t\t\tmissingModified,\n-\t\t\t\tfileTimestamps,\n-\t\t\t\tcontextTimestamps,\n-\t\t\t\tremovedFiles\n-\t\t\t) => {\n+\t\t\t(err, fileTimeInfoEntries, contextTimeInfoEntries, removedFiles) => {\n \t\t\t\tthis.pausedWatcher = this.watcher;\n \t\t\t\tthis.watcher = null;\n \t\t\t\tif (err) {\n \t\t\t\t\treturn this.handler(err);\n \t\t\t\t}\n-\t\t\t\tthis.compiler.fileTimestamps = toFileSystemInfoEntryMap(fileTimestamps);\n-\t\t\t\tthis.compiler.contextTimestamps = toFileSystemInfoEntryMap(\n-\t\t\t\t\tcontextTimestamps\n-\t\t\t\t);\n+\t\t\t\tthis.compiler.fileTimestamps = fileTimeInfoEntries;\n+\t\t\t\tthis.compiler.contextTimestamps = contextTimeInfoEntries;\n \t\t\t\tthis.compiler.removedFiles = removedFiles;\n \t\t\t\tthis._invalidate();\n \t\t\t},\n@@ -196,12 +181,8 @@ class Watching {\n \t\t\tthis.callbacks.push(callback);\n \t\t}\n \t\tif (this.watcher) {\n-\t\t\tthis.compiler.fileTimestamps = toFileSystemInfoEntryMap(\n-\t\t\t\tthis.watcher.getFileTimestamps()\n-\t\t\t);\n-\t\t\tthis.compiler.contextTimestamps = toFileSystemInfoEntryMap(\n-\t\t\t\tthis.watcher.getContextTimestamps()\n-\t\t\t);\n+\t\t\tthis.compiler.fileTimestamps = this.watcher.getFileTimeInfoEntries();\n+\t\t\tthis.compiler.contextTimestamps = this.watcher.getContextTimeInfoEntries();\n \t\t}\n \t\tthis._invalidate();\n \t}"
      },
      {
        "sha": "7cccbe07c4042d22c2fd056a0147fac9f09abf4f",
        "filename": "lib/cache/ResolverCachePlugin.js",
        "status": "modified",
        "additions": 63,
        "deletions": 128,
        "changes": 191,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Fcache%2FResolverCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Fcache%2FResolverCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FResolverCachePlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -5,13 +5,22 @@\n \n \"use strict\";\n \n-const asyncLib = require(\"neo-async\");\n-\n /** @typedef {import(\"enhanced-resolve/lib/Resolver\")} Resolver */\n /** @typedef {import(\"../Compiler\")} Compiler */\n /** @typedef {import(\"../FileSystemInfo\")} FileSystemInfo */\n \n-const INVALID = {};\n+const requestToString = request => {\n+\tlet str = \"\";\n+\tfor (const key in request) {\n+\t\tconst value = request[key];\n+\t\tif (typeof value === \"object\" && value !== null) {\n+\t\t\tstr += `/${key}={${requestToString(value)}}`;\n+\t\t} else {\n+\t\t\tstr += `/${key}=${value}`;\n+\t\t}\n+\t}\n+\treturn str;\n+};\n \n class ResolverCachePlugin {\n \t/**\n@@ -63,68 +72,37 @@ class ResolverCachePlugin {\n \t\t\t\t\tpropagate(\"fileDependencies\");\n \t\t\t\t\tpropagate(\"contextDependencies\");\n \t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\tconst fileDependencies = new Set(newResolveContext.fileDependencies);\n-\t\t\t\t\tif (newResolveContext.missing) {\n-\t\t\t\t\t\tfor (const missing of newResolveContext.missing) {\n-\t\t\t\t\t\t\tfileDependencies.add(missing);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tconst contextDependencies = new Set(\n-\t\t\t\t\t\tnewResolveContext.contextDependencies\n-\t\t\t\t\t);\n+\t\t\t\t\tconst fileDependencies = newResolveContext.fileDependencies;\n+\t\t\t\t\tconst contextDependencies = newResolveContext.contextDependencies;\n+\t\t\t\t\tconst missingDependencies = newResolveContext.missing;\n+\t\t\t\t\t// TODO remove this when enhanced-resolve supports fileDependencies\n \t\t\t\t\tif (result && result.path) {\n \t\t\t\t\t\tfileDependencies.add(result.path);\n \t\t\t\t\t}\n-\t\t\t\t\tconst fileTimestamps = new Map();\n-\t\t\t\t\tconst contextTimestamps = new Map();\n-\t\t\t\t\tconst store = () => {\n-\t\t\t\t\t\tcache.store(\n-\t\t\t\t\t\t\tidentifier,\n-\t\t\t\t\t\t\tnull,\n-\t\t\t\t\t\t\t{\n-\t\t\t\t\t\t\t\tresult,\n-\t\t\t\t\t\t\t\tresolveTime,\n-\t\t\t\t\t\t\t\tfileTimestamps,\n-\t\t\t\t\t\t\t\tcontextTimestamps\n-\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\trestoreErr => {\n-\t\t\t\t\t\t\t\tif (restoreErr) return callback(restoreErr);\n-\t\t\t\t\t\t\t\tif (result) return callback(null, result);\n-\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t);\n-\t\t\t\t\t};\n-\t\t\t\t\tasyncLib.parallel(\n-\t\t\t\t\t\t[\n-\t\t\t\t\t\t\tasyncLib.each.bind(\n-\t\t\t\t\t\t\t\tasyncLib,\n-\t\t\t\t\t\t\t\tfileDependencies,\n-\t\t\t\t\t\t\t\t(dep, callback) => {\n-\t\t\t\t\t\t\t\t\tfileSystemInfo.getFileTimestamp(dep, (err, entry) => {\n-\t\t\t\t\t\t\t\t\t\tif (err) {\n-\t\t\t\t\t\t\t\t\t\t\tfileTimestamps.set(dep, \"error\");\n-\t\t\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\t\t\tfileTimestamps.set(dep, entry && entry.timestamp);\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\tasyncLib.each.bind(\n-\t\t\t\t\t\t\t\tasyncLib,\n-\t\t\t\t\t\t\t\tcontextDependencies,\n-\t\t\t\t\t\t\t\t(dep, callback) => {\n-\t\t\t\t\t\t\t\t\tfileSystemInfo.getContextTimestamp(dep, (err, entry) => {\n-\t\t\t\t\t\t\t\t\t\tcontextTimestamps.set(dep, \"error\");\n-\t\t\t\t\t\t\t\t\t\t// TODO: getContextTimestamp is not implemented yet\n-\t\t\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t],\n-\t\t\t\t\t\terr => {\n+\t\t\t\t\tfileSystemInfo.createSnapshot(\n+\t\t\t\t\t\tresolveTime,\n+\t\t\t\t\t\tfileDependencies,\n+\t\t\t\t\t\tcontextDependencies,\n+\t\t\t\t\t\tmissingDependencies,\n+\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t(err, snapshot) => {\n \t\t\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\t\t\tstore();\n+\t\t\t\t\t\t\tcache.store(\n+\t\t\t\t\t\t\t\tidentifier,\n+\t\t\t\t\t\t\t\tnull,\n+\t\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\t\tresult,\n+\t\t\t\t\t\t\t\t\tmissing: newResolveContext.missing,\n+\t\t\t\t\t\t\t\t\tfileDependencies: newResolveContext.fileDependencies,\n+\t\t\t\t\t\t\t\t\tcontextDependencies: newResolveContext.contextDependencies,\n+\t\t\t\t\t\t\t\t\tsnapshot\n+\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\tstoreErr => {\n+\t\t\t\t\t\t\t\t\tif (storeErr) return callback(storeErr);\n+\t\t\t\t\t\t\t\t\tif (result) return callback(null, result);\n+\t\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t);\n \t\t\t\t}\n@@ -150,76 +128,17 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\tif (request._ResolverCachePluginCacheMiss || !fileSystemInfo) {\n \t\t\t\t\t\t\t\t\treturn callback();\n \t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tconst identifier = `/resolve/${type}/${JSON.stringify(\n+\t\t\t\t\t\t\t\tconst identifier = `/resolve/${type}${requestToString(\n \t\t\t\t\t\t\t\t\trequest\n \t\t\t\t\t\t\t\t)}`;\n-\t\t\t\t\t\t\t\tcache.get(identifier, null, (err, cacheEntry) => {\n+\t\t\t\t\t\t\t\tconst processCacheResult = (err, cacheEntry) => {\n \t\t\t\t\t\t\t\t\tif (err) return callback(err);\n \n \t\t\t\t\t\t\t\t\tif (cacheEntry) {\n-\t\t\t\t\t\t\t\t\t\tconst {\n-\t\t\t\t\t\t\t\t\t\t\tresult,\n-\t\t\t\t\t\t\t\t\t\t\tresolveTime,\n-\t\t\t\t\t\t\t\t\t\t\tfileTimestamps,\n-\t\t\t\t\t\t\t\t\t\t\tcontextTimestamps\n-\t\t\t\t\t\t\t\t\t\t} = cacheEntry;\n-\t\t\t\t\t\t\t\t\t\tasyncLib.parallel(\n-\t\t\t\t\t\t\t\t\t\t\t[\n-\t\t\t\t\t\t\t\t\t\t\t\tasyncLib.each.bind(\n-\t\t\t\t\t\t\t\t\t\t\t\t\tasyncLib,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tfileTimestamps,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t([dep, ts], callback) => {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileSystemInfo.getFileTimestamp(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdep,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(err, entry) => {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ts === \"error\") {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!entry || entry.safeTime > resolveTime\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? INVALID\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!entry !== !ts) return callback(INVALID);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (entry && entry.timestamp) {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tentry.timestamp !== ts ? INVALID : null\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\t\t\t\t\tasyncLib.each.bind(\n-\t\t\t\t\t\t\t\t\t\t\t\t\tasyncLib,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tcontextTimestamps,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t([dep, ts], callback) => {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileSystemInfo.getContextTimestamp(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdep,\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(err, entry) => {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err) return callback(err);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ts === \"error\") {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!entry || entry.safeTime > resolveTime\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? INVALID\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!entry !== !ts) return callback(INVALID);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (entry && entry.timestamp) {\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn callback(\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tentry.timestamp !== ts ? INVALID : null\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcallback();\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t\t\t\t\t\t],\n-\t\t\t\t\t\t\t\t\t\t\terr => {\n-\t\t\t\t\t\t\t\t\t\t\t\tif (err) {\n+\t\t\t\t\t\t\t\t\t\tfileSystemInfo.checkSnapshotValid(\n+\t\t\t\t\t\t\t\t\t\t\tcacheEntry.snapshot,\n+\t\t\t\t\t\t\t\t\t\t\t(err, valid) => {\n+\t\t\t\t\t\t\t\t\t\t\t\tif (err || !valid) {\n \t\t\t\t\t\t\t\t\t\t\t\t\treturn doRealResolve(\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tidentifier,\n \t\t\t\t\t\t\t\t\t\t\t\t\t\ttype,\n@@ -229,7 +148,22 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\t\t\t\t\t\t\tcallback\n \t\t\t\t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t\t\tcallback(null, result);\n+\t\t\t\t\t\t\t\t\t\t\t\tif (resolveContext.missing) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\tfor (const item of cacheEntry.missing) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tresolveContext.missing.add(item);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t\tif (resolveContext.fileDependencies) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\tfor (const item of cacheEntry.fileDependencies) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tresolveContext.fileDependencies.add(item);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t\tif (resolveContext.contextDependencies) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\tfor (const item of cacheEntry.contextDependencies) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tresolveContext.contextDependencies.add(item);\n+\t\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\t\tcallback(null, cacheEntry.result);\n \t\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t} else {\n@@ -242,7 +176,8 @@ class ResolverCachePlugin {\n \t\t\t\t\t\t\t\t\t\t\tcallback\n \t\t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\t\tcache.get(identifier, null, processCacheResult);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t);\n \t\t\t\t\t}"
      },
      {
        "sha": "05b7d1d3be0a32410ad67cb77c5e5a44a2a84470",
        "filename": "lib/node/NodeWatchFileSystem.js",
        "status": "modified",
        "additions": 13,
        "deletions": 26,
        "changes": 39,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Fnode%2FNodeWatchFileSystem.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Fnode%2FNodeWatchFileSystem.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fnode%2FNodeWatchFileSystem.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -6,7 +6,6 @@\n \"use strict\";\n \n const Watchpack = require(\"watchpack\");\n-const objectToMap = require(\"../util/objectToMap\");\n \n class NodeWatchFileSystem {\n \tconstructor(inputFileSystem) {\n@@ -48,31 +47,19 @@ class NodeWatchFileSystem {\n \t\tconst cachedFiles = files;\n \t\tconst cachedDirs = dirs;\n \t\tthis.watcher.once(\"aggregated\", (changes, removals) => {\n-\t\t\tchanges = changes.concat(removals);\n \t\t\tif (this.inputFileSystem && this.inputFileSystem.purge) {\n-\t\t\t\tthis.inputFileSystem.purge(changes);\n+\t\t\t\tfor (const item of changes) {\n+\t\t\t\t\tthis.inputFileSystem.purge(item);\n+\t\t\t\t}\n+\t\t\t\tfor (const item of removals) {\n+\t\t\t\t\tthis.inputFileSystem.purge(item);\n+\t\t\t\t}\n \t\t\t}\n-\t\t\tconst times = objectToMap(this.watcher.getTimes());\n-\t\t\tfiles = new Set(files);\n-\t\t\tdirs = new Set(dirs);\n-\t\t\tmissing = new Set(missing);\n-\t\t\tremovals = new Set(removals.filter(file => files.has(file)));\n-\t\t\tcallback(\n-\t\t\t\tnull,\n-\t\t\t\tchanges.filter(file => files.has(file)).sort(),\n-\t\t\t\tchanges.filter(file => dirs.has(file)).sort(),\n-\t\t\t\tchanges.filter(file => missing.has(file)).sort(),\n-\t\t\t\ttimes,\n-\t\t\t\ttimes,\n-\t\t\t\tremovals\n-\t\t\t);\n+\t\t\tconst times = this.watcher.getTimeInfoEntries();\n+\t\t\tcallback(null, times, times, removals);\n \t\t});\n \n-\t\tthis.watcher.watch(\n-\t\t\tcachedFiles.concat(missing),\n-\t\t\tcachedDirs.concat(missing),\n-\t\t\tstartTime\n-\t\t);\n+\t\tthis.watcher.watch(cachedFiles.concat(missing), cachedDirs, startTime);\n \n \t\tif (oldWatcher) {\n \t\t\toldWatcher.close();\n@@ -89,16 +76,16 @@ class NodeWatchFileSystem {\n \t\t\t\t\tthis.watcher.pause();\n \t\t\t\t}\n \t\t\t},\n-\t\t\tgetFileTimestamps: () => {\n+\t\t\tgetFileTimeInfoEntries: () => {\n \t\t\t\tif (this.watcher) {\n-\t\t\t\t\treturn objectToMap(this.watcher.getTimes());\n+\t\t\t\t\treturn this.watcher.getTimeInfoEntries();\n \t\t\t\t} else {\n \t\t\t\t\treturn new Map();\n \t\t\t\t}\n \t\t\t},\n-\t\t\tgetContextTimestamps: () => {\n+\t\t\tgetContextInfoEntries: () => {\n \t\t\t\tif (this.watcher) {\n-\t\t\t\t\treturn objectToMap(this.watcher.getTimes());\n+\t\t\t\t\treturn this.watcher.getTimeInfoEntries();\n \t\t\t\t} else {\n \t\t\t\t\treturn new Map();\n \t\t\t\t}"
      },
      {
        "sha": "c177a8445a21a5586985f9c565ffa9c5978ffa4a",
        "filename": "lib/optimize/SideEffectsFlagPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Foptimize%2FSideEffectsFlagPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSideEffectsFlagPlugin.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -52,6 +52,7 @@ class SideEffectsFlagPlugin {\n \t\t\t\t} else if (data.settings.sideEffects === true) {\n \t\t\t\t\tmodule.factoryMeta.sideEffectFree = false;\n \t\t\t\t}\n+\t\t\t\treturn module;\n \t\t\t});\n \t\t});\n \t\tcompiler.hooks.compilation.tap(\"SideEffectsFlagPlugin\", compilation => {"
      },
      {
        "sha": "d2a54bd97e3a0266bcc3e7b9078b49bbafbf98f7",
        "filename": "lib/util/AsyncQueue.js",
        "status": "modified",
        "additions": 92,
        "deletions": 62,
        "changes": 154,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Futil%2FAsyncQueue.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/lib%2Futil%2FAsyncQueue.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FAsyncQueue.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -7,13 +7,39 @@\n \n const { SyncHook, AsyncSeriesHook } = require(\"tapable\");\n \n+const QUEUED_STATE = 0;\n+const PROCESSING_STATE = 1;\n+const DONE_STATE = 2;\n+\n /**\n  * @template T\n  * @callback Callback<T>\n  * @param {Error=} err\n  * @param {T=} result\n  */\n \n+/**\n+ * @template T\n+ * @template K\n+ * @template R\n+ */\n+class AsyncQueueEntry {\n+\t/**\n+\t * @param {T} item the item\n+\t * @param {Callback<R>} callback the callback\n+\t */\n+\tconstructor(item, callback) {\n+\t\tthis.item = item;\n+\t\t/** @type {typeof QUEUED_STATE | typeof PROCESSING_STATE | typeof DONE_STATE} */\n+\t\tthis.state = QUEUED_STATE;\n+\t\tthis.callback = callback;\n+\t\t/** @type {Callback<R>[] | undefined} */\n+\t\tthis.callbacks = undefined;\n+\t\tthis.result = undefined;\n+\t\tthis.error = undefined;\n+\t}\n+}\n+\n /**\n  * @template T\n  * @template K\n@@ -33,14 +59,10 @@ class AsyncQueue {\n \t\tthis._processor = processor;\n \t\tthis._getKey =\n \t\t\tgetKey || /** @type {(T) => K} */ (item => /** @type {any} */ (item));\n-\t\t/** @type {Map<K, Callback<R>[]>} */\n-\t\tthis._callbacks = new Map();\n-\t\t/** @type {Set<T>} */\n-\t\tthis._queued = new Set();\n-\t\t/** @type {Set<K>} */\n-\t\tthis._processing = new Set();\n-\t\t/** @type {Map<K, [Error, R]>} */\n-\t\tthis._results = new Map();\n+\t\t/** @type {Map<K, AsyncQueueEntry<T, K, R>>} */\n+\t\tthis._entries = new Map();\n+\t\t/** @type {AsyncQueueEntry<T, K, R>[]} */\n+\t\tthis._queued = [];\n \t\tthis._activeTasks = 0;\n \t\tthis._willEnsureProcessing = false;\n \t\tthis._stopped = false;\n@@ -69,24 +91,25 @@ class AsyncQueue {\n \t\t\t\treturn;\n \t\t\t}\n \t\t\tconst key = this._getKey(item);\n-\t\t\tconst result = this._results.get(key);\n-\t\t\tif (result !== undefined) {\n-\t\t\t\tprocess.nextTick(() => callback(result[0], result[1]));\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\tlet callbacks = this._callbacks.get(key);\n-\t\t\tif (callbacks !== undefined) {\n-\t\t\t\tcallbacks.push(callback);\n+\t\t\tconst entry = this._entries.get(key);\n+\t\t\tif (entry !== undefined) {\n+\t\t\t\tif (entry.state === DONE_STATE) {\n+\t\t\t\t\tprocess.nextTick(() => callback(entry.error, entry.result));\n+\t\t\t\t} else if (entry.callbacks === undefined) {\n+\t\t\t\t\tentry.callbacks = [callback];\n+\t\t\t\t} else {\n+\t\t\t\t\tentry.callbacks.push(callback);\n+\t\t\t\t}\n \t\t\t\treturn;\n \t\t\t}\n-\t\t\tcallbacks = [callback];\n-\t\t\tthis._callbacks.set(key, callbacks);\n+\t\t\tconst newEntry = new AsyncQueueEntry(item, callback);\n \t\t\tif (this._stopped) {\n \t\t\t\tthis.hooks.added.call(item);\n \t\t\t\tthis._activeTasks++;\n-\t\t\t\tthis._handleResult(item, new Error(\"Queue was stopped\"));\n+\t\t\t\tthis._handleResult(newEntry, new Error(\"Queue was stopped\"));\n \t\t\t} else {\n-\t\t\t\tthis._queued.add(item);\n+\t\t\t\tthis._entries.set(key, newEntry);\n+\t\t\t\tthis._queued.push(newEntry);\n \t\t\t\tif (this._willEnsureProcessing === false) {\n \t\t\t\t\tthis._willEnsureProcessing = true;\n \t\t\t\t\tprocess.nextTick(this._ensureProcessing);\n@@ -102,18 +125,27 @@ class AsyncQueue {\n \t */\n \tinvalidate(item) {\n \t\tconst key = this._getKey(item);\n-\t\tthis._results.delete(key);\n+\t\tconst entry = this._entries.get(key);\n+\t\tthis._entries.delete(key);\n+\t\tif (entry.state === QUEUED_STATE) {\n+\t\t\tconst idx = this._queued.indexOf(entry);\n+\t\t\tif (idx >= 0) {\n+\t\t\t\tthis._queued.splice(idx, 1);\n+\t\t\t}\n+\t\t}\n \t}\n \n \t/**\n \t * @returns {void}\n \t */\n \tstop() {\n \t\tthis._stopped = true;\n-\t\tfor (const item of this._queued) {\n+\t\tconst queue = this._queued;\n+\t\tthis._queued = [];\n+\t\tfor (const entry of queue) {\n+\t\t\tthis._entries.delete(this._getKey(entry.item));\n \t\t\tthis._activeTasks++;\n-\t\t\tthis._queued.delete(item);\n-\t\t\tthis._handleResult(item, new Error(\"Queue was stopped\"));\n+\t\t\tthis._handleResult(entry, new Error(\"Queue was stopped\"));\n \t\t}\n \t}\n \n@@ -122,7 +154,7 @@ class AsyncQueue {\n \t */\n \tincreaseParallelism() {\n \t\tthis._parallelism++;\n-\t\tif (this._willEnsureProcessing === false && this._queued.size > 0) {\n+\t\tif (this._willEnsureProcessing === false && this._queued.length > 0) {\n \t\t\tthis._willEnsureProcessing = true;\n \t\t\tprocess.nextTick(this._ensureProcessing);\n \t\t}\n@@ -141,15 +173,18 @@ class AsyncQueue {\n \t */\n \tisProcessing(item) {\n \t\tconst key = this._getKey(item);\n-\t\treturn this._processing.has(key);\n+\t\tconst entry = this._entries.get(key);\n+\t\treturn entry !== undefined && entry.state === PROCESSING_STATE;\n \t}\n \n \t/**\n \t * @param {T} item an item\n \t * @returns {boolean} true, if the item is currently queued\n \t */\n \tisQueued(item) {\n-\t\treturn this._queued.has(item);\n+\t\tconst key = this._getKey(item);\n+\t\tconst entry = this._entries.get(key);\n+\t\treturn entry !== undefined && entry.state === QUEUED_STATE;\n \t}\n \n \t/**\n@@ -158,78 +193,73 @@ class AsyncQueue {\n \t */\n \tisDone(item) {\n \t\tconst key = this._getKey(item);\n-\t\treturn this._results.has(key);\n+\t\tconst entry = this._entries.get(key);\n+\t\treturn entry !== undefined && entry.state === DONE_STATE;\n \t}\n \n \t/**\n \t * @returns {void}\n \t */\n \t_ensureProcessing() {\n-\t\tif (this._activeTasks >= this._parallelism) {\n-\t\t\tthis._willEnsureProcessing = false;\n-\t\t\treturn;\n-\t\t}\n-\t\tfor (const item of this._queued) {\n+\t\twhile (this._activeTasks < this._parallelism && this._queued.length > 0) {\n+\t\t\tconst entry = this._queued.pop();\n \t\t\tthis._activeTasks++;\n-\t\t\tconst key = this._getKey(item);\n-\t\t\tthis._queued.delete(item);\n-\t\t\tthis._processing.add(key);\n-\t\t\tthis._startProcessing(item);\n-\t\t\tif (this._activeTasks >= this._parallelism) {\n-\t\t\t\tthis._willEnsureProcessing = false;\n-\t\t\t\treturn;\n-\t\t\t}\n+\t\t\tentry.state = PROCESSING_STATE;\n+\t\t\tthis._startProcessing(entry);\n \t\t}\n \t\tthis._willEnsureProcessing = false;\n \t}\n \n \t/**\n-\t * @param {T} item an item\n+\t * @param {AsyncQueueEntry<T, K, R>} entry the entry\n \t * @returns {void}\n \t */\n-\t_startProcessing(item) {\n-\t\tthis.hooks.beforeStart.callAsync(item, err => {\n+\t_startProcessing(entry) {\n+\t\tthis.hooks.beforeStart.callAsync(entry.item, err => {\n \t\t\tif (err) {\n-\t\t\t\tthis._handleResult(item, err);\n+\t\t\t\tthis._handleResult(entry, err);\n \t\t\t\treturn;\n \t\t\t}\n \t\t\ttry {\n-\t\t\t\tthis._processor(item, (e, r) => {\n-\t\t\t\t\tprocess.nextTick(() => {\n-\t\t\t\t\t\tthis._handleResult(item, e, r);\n-\t\t\t\t\t});\n+\t\t\t\tthis._processor(entry.item, (e, r) => {\n+\t\t\t\t\tthis._handleResult(entry, e, r);\n \t\t\t\t});\n \t\t\t} catch (err) {\n-\t\t\t\tthis._handleResult(item, err, null);\n+\t\t\t\tthis._handleResult(entry, err, null);\n \t\t\t}\n-\t\t\tthis.hooks.started.call(item);\n+\t\t\tthis.hooks.started.call(entry.item);\n \t\t});\n \t}\n \n \t/**\n-\t * @param {T} item an item\n+\t * @param {AsyncQueueEntry<T, K, R>} entry the entry\n \t * @param {Error=} err error, if any\n \t * @param {R=} result result, if any\n \t * @returns {void}\n \t */\n-\t_handleResult(item, err, result) {\n-\t\tthis.hooks.result.callAsync(item, err, result, hookError => {\n+\t_handleResult(entry, err, result) {\n+\t\tthis.hooks.result.callAsync(entry.item, err, result, hookError => {\n \t\t\tconst error = hookError || err;\n \n-\t\t\tconst key = this._getKey(item);\n-\t\t\tconst callbacks = this._callbacks.get(key);\n-\t\t\tthis._processing.delete(key);\n-\t\t\tthis._results.set(key, [error, result]);\n-\t\t\tthis._callbacks.delete(key);\n+\t\t\tconst callback = entry.callback;\n+\t\t\tconst callbacks = entry.callbacks;\n+\t\t\tentry.state = DONE_STATE;\n+\t\t\tentry.callback = undefined;\n+\t\t\tentry.callbacks = undefined;\n+\t\t\tentry.result = result;\n+\t\t\tentry.error = error;\n \t\t\tthis._activeTasks--;\n \n-\t\t\tif (this._willEnsureProcessing === false && this._queued.size > 0) {\n+\t\t\tif (this._willEnsureProcessing === false && this._queued.length > 0) {\n \t\t\t\tthis._willEnsureProcessing = true;\n \t\t\t\tprocess.nextTick(this._ensureProcessing);\n \t\t\t}\n \n-\t\t\tfor (const callback of callbacks) {\n-\t\t\t\tcallback(error, result);\n+\t\t\tcallback(error, result);\n+\t\t\tif (callbacks !== undefined) {\n+\t\t\t\tfor (const callback of callbacks) {\n+\t\t\t\t\tcallback(error, result);\n+\t\t\t\t}\n \t\t\t}\n \t\t});\n \t}"
      },
      {
        "sha": "8897100e18fc94a9d7358364106f2f1cc62c8f8c",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -28,7 +28,7 @@\n     \"schema-utils\": \"^0.4.4\",\n     \"tapable\": \"^1.1.0\",\n     \"terser-webpack-plugin\": \"^1.2.1\",\n-    \"watchpack\": \"^1.5.0\",\n+    \"watchpack\": \"2.0.0-beta.2\",\n     \"webpack-sources\": \"^1.3.0\"\n   },\n   \"devDependencies\": {"
      },
      {
        "sha": "74961c82e6ea601a15d0aeb3334c6690f6971c9b",
        "filename": "test/StatsTestCases.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/test%2FStatsTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/test%2FStatsTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStatsTestCases.test.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -88,7 +88,7 @@ describe(\"StatsTestCases\", () => {\n \t\t\t\tif (/error$/.test(testName)) {\n \t\t\t\t\texpect(stats.hasErrors()).toBe(true);\n \t\t\t\t} else if (stats.hasErrors()) {\n-\t\t\t\t\treturn done(new Error(stats.toJson().errors.join(\"\\n\\n\")));\n+\t\t\t\t\treturn done(new Error(stats.toString({ all: false, errors: true })));\n \t\t\t\t}\n \t\t\t\tlet toStringOptions = {\n \t\t\t\t\tcontext: path.join(base, testName),"
      },
      {
        "sha": "d3454e6c8a1b513d692206609143024812ccfc79",
        "filename": "test/TestCases.template.js",
        "status": "modified",
        "additions": 9,
        "deletions": 5,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/test%2FTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/test%2FTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCases.template.js?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -181,12 +181,16 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\trimraf(cacheDirectory, done);\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t\tif (config.cache) {\n-\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill disk cache`, done => {\n-\t\t\t\t\t\t\t\t\tconst compiler = webpack(options, err => {\n+\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill disk cache (1st)`, done => {\n+\t\t\t\t\t\t\t\t\twebpack(options, err => {\n \t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n-\t\t\t\t\t\t\t\t\t\tcompiler.close(() => {\n-\t\t\t\t\t\t\t\t\t\t\tdone();\n-\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill disk cache (2nd)`, done => {\n+\t\t\t\t\t\t\t\t\twebpack(options, err => {\n+\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\tdone();\n \t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}"
      },
      {
        "sha": "58c811dff4bca4053401685696615d98f26af829",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 10,
        "deletions": 111,
        "changes": 121,
        "blob_url": "https://github.com/webpack/webpack/blob/e4d1a45c8de242fa51b808917519abd0d8b45aa8/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/e4d1a45c8de242fa51b808917519abd0d8b45aa8/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=e4d1a45c8de242fa51b808917519abd0d8b45aa8",
        "patch": "@@ -550,11 +550,6 @@ astral-regex@^1.0.0:\n   resolved \"https://registry.yarnpkg.com/astral-regex/-/astral-regex-1.0.0.tgz#6c8c3fb827dd43ee3918f27b82782ab7658a6fd9\"\n   integrity sha512-+Ryf6g3BKoRc7jfp7ad8tM4TtMiaWvbF/1/sQcZPkkS7ag3D5nMBCe2UfOTONtAkaG0tO0ij3C5Lwmf1EiyjHg==\n \n-async-each@^1.0.0:\n-  version \"1.0.1\"\n-  resolved \"https://registry.yarnpkg.com/async-each/-/async-each-1.0.1.tgz#19d386a1d9edc6e7c1c85d388aedbcc56d33602d\"\n-  integrity sha1-GdOGodntxufByF04iu28xW0zYC0=\n-\n async-limiter@~1.0.0:\n   version \"1.0.0\"\n   resolved \"https://registry.yarnpkg.com/async-limiter/-/async-limiter-1.0.0.tgz#78faed8c3d074ab81f22b4e985d79e8738f720f8\"\n@@ -839,11 +834,6 @@ big.js@^3.1.3:\n   resolved \"https://registry.yarnpkg.com/big.js/-/big.js-3.2.0.tgz#a5fc298b81b9e0dca2e458824784b65c52ba588e\"\n   integrity sha512-+hN/Zh2D08Mx65pZ/4g5bsmNiZUuChDiQfTUQ7qJr4/kuopCr88xZsAXv6mBoZEsUI4OuGHlX59qE94K2mMW8Q==\n \n-binary-extensions@^1.0.0:\n-  version \"1.11.0\"\n-  resolved \"https://registry.yarnpkg.com/binary-extensions/-/binary-extensions-1.11.0.tgz#46aa1751fb6a2f93ee5e689bb1087d4b14c6c205\"\n-  integrity sha1-RqoXUftqL5PuXmibsQh9SxTGwgU=\n-\n bluebird@^3.5.0, bluebird@^3.5.x:\n   version \"3.5.1\"\n   resolved \"https://registry.yarnpkg.com/bluebird/-/bluebird-3.5.1.tgz#d9551f9de98f1fcda1e683d17ee91a0602ee2eb9\"\n@@ -878,7 +868,7 @@ braces@^1.8.2:\n     preserve \"^0.2.0\"\n     repeat-element \"^1.1.2\"\n \n-braces@^2.3.0, braces@^2.3.1:\n+braces@^2.3.1:\n   version \"2.3.2\"\n   resolved \"https://registry.yarnpkg.com/braces/-/braces-2.3.2.tgz#5979fd3f14cd531565e5fa2df1abfff1dfaee729\"\n   integrity sha512-aNdbnj9P8PjdXU4ybaWLK2IF3jc/EoDYbC7AazW6to3TRsfXxscC9UXOB5iDiEQrkyIbWp2SLQda4+QAa7nc3w==\n@@ -1081,25 +1071,6 @@ chardet@^0.7.0:\n   resolved \"https://registry.yarnpkg.com/chardet/-/chardet-0.7.0.tgz#90094849f0937f2eedc2425d0d28a9e5f0cbad9e\"\n   integrity sha512-mT8iDcrh03qDGRRmoA2hmBJnxpllMR+0/0qlzjqZES6NdiWDcZkCNAk4rPFZ9Q85r27unkiNNg8ZOiwZXBHwcA==\n \n-chokidar@^2.0.2:\n-  version \"2.0.3\"\n-  resolved \"https://registry.yarnpkg.com/chokidar/-/chokidar-2.0.3.tgz#dcbd4f6cbb2a55b4799ba8a840ac527e5f4b1176\"\n-  integrity sha512-zW8iXYZtXMx4kux/nuZVXjkLP+CyIK5Al5FHnj1OgTKGZfp4Oy6/ymtMSKFv3GD8DviEmUPmJg9eFdJ/JzudMg==\n-  dependencies:\n-    anymatch \"^2.0.0\"\n-    async-each \"^1.0.0\"\n-    braces \"^2.3.0\"\n-    glob-parent \"^3.1.0\"\n-    inherits \"^2.0.1\"\n-    is-binary-path \"^1.0.0\"\n-    is-glob \"^4.0.0\"\n-    normalize-path \"^2.1.1\"\n-    path-is-absolute \"^1.0.0\"\n-    readdirp \"^2.0.0\"\n-    upath \"^1.0.0\"\n-  optionalDependencies:\n-    fsevents \"^1.1.2\"\n-\n chownr@^1.0.1, chownr@^1.1.1:\n   version \"1.1.1\"\n   resolved \"https://registry.yarnpkg.com/chownr/-/chownr-1.1.1.tgz#54726b8b8fff4df053c42187e801fb4412df1494\"\n@@ -2555,14 +2526,6 @@ fs.realpath@^1.0.0:\n   resolved \"https://registry.yarnpkg.com/fs.realpath/-/fs.realpath-1.0.0.tgz#1504ad2523158caa40db4a2787cb01411994ea4f\"\n   integrity sha1-FQStJSMVjKpA20onh8sBQRmU6k8=\n \n-fsevents@^1.1.2:\n-  version \"1.2.2\"\n-  resolved \"https://registry.yarnpkg.com/fsevents/-/fsevents-1.2.2.tgz#4f598f0f69b273188ef4a62ca4e9e08ace314bbf\"\n-  integrity sha512-iownA+hC4uHFp+7gwP/y5SzaiUo7m2vpa0dhpzw8YuKtiZsz7cIXsFbXpLEeBM6WuCQyw1MH4RRe6XI8GFUctQ==\n-  dependencies:\n-    nan \"^2.9.2\"\n-    node-pre-gyp \"^0.9.0\"\n-\n fsevents@^1.2.3:\n   version \"1.2.4\"\n   resolved \"https://registry.yarnpkg.com/fsevents/-/fsevents-1.2.4.tgz#f41dcb1af2582af3692da36fc55cbd8e1041c426\"\n@@ -2658,14 +2621,6 @@ glob-parent@^2.0.0:\n   dependencies:\n     is-glob \"^2.0.0\"\n \n-glob-parent@^3.1.0:\n-  version \"3.1.0\"\n-  resolved \"https://registry.yarnpkg.com/glob-parent/-/glob-parent-3.1.0.tgz#9e6af6299d8d3bd2bd40430832bd113df906c5ae\"\n-  integrity sha1-nmr2KZ2NO9K9QEMIMr0RPfkGxa4=\n-  dependencies:\n-    is-glob \"^3.1.0\"\n-    path-dirname \"^1.0.0\"\n-\n glob@^5.0.15:\n   version \"5.0.15\"\n   resolved \"https://registry.yarnpkg.com/glob/-/glob-5.0.15.tgz#1bc936b9e02f4a603fcc222ecf7633d30b8b93b1\"\n@@ -3094,13 +3049,6 @@ is-arrayish@^0.2.1:\n   resolved \"https://registry.yarnpkg.com/is-arrayish/-/is-arrayish-0.2.1.tgz#77c99840527aa8ecb1a8ba697b80645a7a926a9d\"\n   integrity sha1-d8mYQFJ6qOyxqLppe4BkWnqSap0=\n \n-is-binary-path@^1.0.0:\n-  version \"1.0.1\"\n-  resolved \"https://registry.yarnpkg.com/is-binary-path/-/is-binary-path-1.0.1.tgz#75f16642b480f187a711c814161fd3a4a7655898\"\n-  integrity sha1-dfFmQrSA8YenEcgUFh/TpKdlWJg=\n-  dependencies:\n-    binary-extensions \"^1.0.0\"\n-\n is-buffer@^1.1.5:\n   version \"1.1.6\"\n   resolved \"https://registry.yarnpkg.com/is-buffer/-/is-buffer-1.1.6.tgz#efaa2ea9daa0d7ab2ea13a97b2b8ad51fefbe8be\"\n@@ -3211,7 +3159,7 @@ is-extglob@^1.0.0:\n   resolved \"https://registry.yarnpkg.com/is-extglob/-/is-extglob-1.0.0.tgz#ac468177c4943405a092fc8f29760c6ffc6206c0\"\n   integrity sha1-rEaBd8SUNAWgkvyPKXYMb/xiBsA=\n \n-is-extglob@^2.1.0, is-extglob@^2.1.1:\n+is-extglob@^2.1.1:\n   version \"2.1.1\"\n   resolved \"https://registry.yarnpkg.com/is-extglob/-/is-extglob-2.1.1.tgz#a88c02535791f02ed37c76a1b9ea9773c833f8c2\"\n   integrity sha1-qIwCU1eR8C7TfHahueqXc8gz+MI=\n@@ -3247,13 +3195,6 @@ is-glob@^2.0.0, is-glob@^2.0.1:\n   dependencies:\n     is-extglob \"^1.0.0\"\n \n-is-glob@^3.1.0:\n-  version \"3.1.0\"\n-  resolved \"https://registry.yarnpkg.com/is-glob/-/is-glob-3.1.0.tgz#7ba5ae24217804ac70707b96922567486cc3e84a\"\n-  integrity sha1-e6WuJCF4BKxwcHuWkiVnSGzD6Eo=\n-  dependencies:\n-    is-extglob \"^2.1.0\"\n-\n is-glob@^4.0.0:\n   version \"4.0.0\"\n   resolved \"https://registry.yarnpkg.com/is-glob/-/is-glob-4.0.0.tgz#9521c76845cc2610a85203ddf080a958c2ffabc0\"\n@@ -4697,7 +4638,7 @@ mimic-fn@^1.0.0:\n   resolved \"https://registry.yarnpkg.com/mimic-fn/-/mimic-fn-1.2.0.tgz#820c86a39334640e99516928bd03fca88057d022\"\n   integrity sha512-jf84uxzwiuiIVKiOLpfYk7N46TSy8ubTonmneY9vrpHNAnp0QBt2BxWV9dO3/j+BoVAb+a5G6YDPW3M5HOdMWQ==\n \n-\"minimatch@2 || 3\", minimatch@^3.0.2, minimatch@^3.0.3, minimatch@^3.0.4:\n+\"minimatch@2 || 3\", minimatch@^3.0.3, minimatch@^3.0.4:\n   version \"3.0.4\"\n   resolved \"https://registry.yarnpkg.com/minimatch/-/minimatch-3.0.4.tgz#5166e286457f03306064be5497e8dbb0c3d32083\"\n   integrity sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==\n@@ -4828,7 +4769,7 @@ natural-compare@^1.4.0:\n   resolved \"https://registry.yarnpkg.com/natural-compare/-/natural-compare-1.4.0.tgz#4abebfeed7541f2c27acfb29bdbbd15c8d5ba4f7\"\n   integrity sha1-Sr6/7tdUHywnrPspvbvRXI1bpPc=\n \n-needle@^2.2.0, needle@^2.2.1:\n+needle@^2.2.1:\n   version \"2.2.1\"\n   resolved \"https://registry.yarnpkg.com/needle/-/needle-2.2.1.tgz#b5e325bd3aae8c2678902fa296f729455d1d3a7d\"\n   integrity sha512-t/ZswCM9JTWjAdXS9VpvqhI2Ct2sL2MdY4fUXqGJaGBk13ge99ObqRksRTbBE56K+wxUXwwfZYOuZHifFW9q+Q==\n@@ -4891,22 +4832,6 @@ node-pre-gyp@^0.10.0:\n     semver \"^5.3.0\"\n     tar \"^4\"\n \n-node-pre-gyp@^0.9.0:\n-  version \"0.9.1\"\n-  resolved \"https://registry.yarnpkg.com/node-pre-gyp/-/node-pre-gyp-0.9.1.tgz#f11c07516dd92f87199dbc7e1838eab7cd56c9e0\"\n-  integrity sha1-8RwHUW3ZL4cZnbx+GDjqt81WyeA=\n-  dependencies:\n-    detect-libc \"^1.0.2\"\n-    mkdirp \"^0.5.1\"\n-    needle \"^2.2.0\"\n-    nopt \"^4.0.1\"\n-    npm-packlist \"^1.1.6\"\n-    npmlog \"^4.0.2\"\n-    rc \"^1.1.7\"\n-    rimraf \"^2.6.1\"\n-    semver \"^5.3.0\"\n-    tar \"^4\"\n-\n nopt@3.x:\n   version \"3.0.6\"\n   resolved \"https://registry.yarnpkg.com/nopt/-/nopt-3.0.6.tgz#c6465dbf08abcd4db359317f79ac68a646b28ff9\"\n@@ -5249,11 +5174,6 @@ pascalcase@^0.1.1:\n   resolved \"https://registry.yarnpkg.com/pascalcase/-/pascalcase-0.1.1.tgz#b363e55e8006ca6fe21784d2db22bd15d7917f14\"\n   integrity sha1-s2PlXoAGym/iF4TS2yK9FdeRfxQ=\n \n-path-dirname@^1.0.0:\n-  version \"1.0.2\"\n-  resolved \"https://registry.yarnpkg.com/path-dirname/-/path-dirname-1.0.2.tgz#cc33d24d525e099a5388c0336c6e32b9160609e0\"\n-  integrity sha1-zDPSTVJeCZpTiMAzbG4yuRYGCeA=\n-\n path-exists@^2.0.0:\n   version \"2.1.0\"\n   resolved \"https://registry.yarnpkg.com/path-exists/-/path-exists-2.1.0.tgz#0feb6c64f0fc518d9a754dd5efb62c7022761f4b\"\n@@ -5946,7 +5866,7 @@ raw-loader@~0.5.0, raw-loader@~0.5.1:\n   resolved \"https://registry.yarnpkg.com/raw-loader/-/raw-loader-0.5.1.tgz#0c3d0beaed8a01c966d9787bf778281252a979aa\"\n   integrity sha1-DD0L6u2KAclm2Xh793goElKpeao=\n \n-rc@^1.1.7, rc@^1.2.7:\n+rc@^1.2.7:\n   version \"1.2.8\"\n   resolved \"https://registry.yarnpkg.com/rc/-/rc-1.2.8.tgz#cd924bf5200a075b83c188cd6b9e211b7fc0d3ed\"\n   integrity sha512-y3bGgqKj3QBdxLbLkomlohkvsA8gdAiUQlSBJnBhfn+BPxg4bc62d8TcBW15wavDfgexCgccckhcZvywyQYPOw==\n@@ -6003,7 +5923,7 @@ read-pkg@^4.0.1:\n     parse-json \"^4.0.0\"\n     pify \"^3.0.0\"\n \n-\"readable-stream@1 || 2\", readable-stream@^2.0.0, readable-stream@^2.0.1, readable-stream@^2.0.2, readable-stream@^2.0.4, readable-stream@^2.0.6, readable-stream@^2.1.5, readable-stream@^2.2.2, readable-stream@~2.3.6:\n+\"readable-stream@1 || 2\", readable-stream@^2.0.0, readable-stream@^2.0.1, readable-stream@^2.0.4, readable-stream@^2.0.6, readable-stream@^2.1.5, readable-stream@^2.2.2, readable-stream@~2.3.6:\n   version \"2.3.6\"\n   resolved \"https://registry.yarnpkg.com/readable-stream/-/readable-stream-2.3.6.tgz#b11c27d88b8ff1fbe070643cf94b0c79ae1b0aaf\"\n   integrity sha512-tQtKA9WIAhBF3+VLAseyMqZeBjW0AHJoxOtYqSUZNJxauErmLbVm2FW1y+J/YA9dUrAC39ITejlZWhVIwawkKw==\n@@ -6016,16 +5936,6 @@ read-pkg@^4.0.1:\n     string_decoder \"~1.1.1\"\n     util-deprecate \"~1.0.1\"\n \n-readdirp@^2.0.0:\n-  version \"2.1.0\"\n-  resolved \"https://registry.yarnpkg.com/readdirp/-/readdirp-2.1.0.tgz#4ed0ad060df3073300c48440373f72d1cc642d78\"\n-  integrity sha1-TtCtBg3zBzMAxIRANz9y0cxkLXg=\n-  dependencies:\n-    graceful-fs \"^4.1.2\"\n-    minimatch \"^3.0.2\"\n-    readable-stream \"^2.0.2\"\n-    set-immediate-shim \"^1.0.1\"\n-\n realpath-native@^1.0.0:\n   version \"1.0.1\"\n   resolved \"https://registry.yarnpkg.com/realpath-native/-/realpath-native-1.0.1.tgz#07f40a0cce8f8261e2e8b7ebebf5c95965d7b633\"\n@@ -6458,11 +6368,6 @@ set-blocking@^2.0.0, set-blocking@~2.0.0:\n   resolved \"https://registry.yarnpkg.com/set-blocking/-/set-blocking-2.0.0.tgz#045f9782d011ae9a6803ddd382b24392b3d890f7\"\n   integrity sha1-BF+XgtARrppoA93TgrJDkrPYkPc=\n \n-set-immediate-shim@^1.0.1:\n-  version \"1.0.1\"\n-  resolved \"https://registry.yarnpkg.com/set-immediate-shim/-/set-immediate-shim-1.0.1.tgz#4b2b1b27eb808a9f8dcc481a58e5e56f599f3f61\"\n-  integrity sha1-SysbJ+uAip+NzEgaWOXlb1mfP2E=\n-\n set-value@^0.4.3:\n   version \"0.4.3\"\n   resolved \"https://registry.yarnpkg.com/set-value/-/set-value-0.4.3.tgz#7db08f9d3d22dc7f78e53af3c3bf4666ecdfccf1\"\n@@ -7212,11 +7117,6 @@ unset-value@^1.0.0:\n     has-value \"^0.3.1\"\n     isobject \"^3.0.0\"\n \n-upath@^1.0.0:\n-  version \"1.0.5\"\n-  resolved \"https://registry.yarnpkg.com/upath/-/upath-1.0.5.tgz#02cab9ecebe95bbec6d5fc2566325725ab6d1a73\"\n-  integrity sha512-qbKn90aDQ0YEwvXoLqj0oiuUYroLX2lVHZ+b+xwjozFasAOC4GneDq5+OaIG5Zj+jFmbz/uO+f7a9qxjktJQww==\n-\n uri-js@^4.2.2:\n   version \"4.2.2\"\n   resolved \"https://registry.yarnpkg.com/uri-js/-/uri-js-4.2.2.tgz#94c540e1ff772956e2299507c010aea6c8838eb0\"\n@@ -7327,12 +7227,11 @@ watch@~0.18.0:\n     exec-sh \"^0.2.0\"\n     minimist \"^1.2.0\"\n \n-watchpack@^1.5.0:\n-  version \"1.6.0\"\n-  resolved \"https://registry.yarnpkg.com/watchpack/-/watchpack-1.6.0.tgz#4bc12c2ebe8aa277a71f1d3f14d685c7b446cd00\"\n-  integrity sha512-i6dHe3EyLjMmDlU1/bGQpEw25XSjkJULPuAVKCbNRefQVq48yXKUpwg538F7AZTf9kyr57zj++pQFltUa5H7yA==\n+watchpack@2.0.0-beta.2:\n+  version \"2.0.0-beta.2\"\n+  resolved \"https://registry.yarnpkg.com/watchpack/-/watchpack-2.0.0-beta.2.tgz#357ed627767dd16ed80500f49c5d4029b49248cb\"\n+  integrity sha512-dzFk3sOzcuIC9s+6Qek6Y0cQmk+N8VvUSY1BtB9wCEpfbcUFOQS7tlD1wRnwq2gv+orBYB/td4hO59Z4lg6ELQ==\n   dependencies:\n-    chokidar \"^2.0.2\"\n     graceful-fs \"^4.1.2\"\n     neo-async \"^2.5.0\"\n "
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8650",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8650/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8650/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8650/events",
    "html_url": "https://github.com/webpack/webpack/pull/8650",
    "id": 400867600,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjQ1OTU1NzUy",
    "number": 8650,
    "title": "Caching of utf-8 conversion, memory improvement, refactoring",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2019-01-18T19:56:19Z",
    "updated_at": "2019-01-18T21:29:02Z",
    "closed_at": "2019-01-18T21:28:57Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8650",
      "html_url": "https://github.com/webpack/webpack/pull/8650",
      "diff_url": "https://github.com/webpack/webpack/pull/8650.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8650.patch",
      "merged_at": "2019-01-18T21:28:57Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n* New major version of webpack-sources\r\n  * adds `buffer` to Source\r\n  * CachedSource caches `buffer`\r\n* This allows to cache buffer instead of string in memory and filesystem cache, which avoid converting\r\n* removes attached `Source.existsAt` property in favor of more safe WeakMap attaching\r\n* Replaces Source in `assets` with `SizeOnlySource` to allow to free memory if not cached\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nrefactor, performance, memory\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes, `existsAt` removed, `assets` can't be accessed after emit\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n* `Source.existsAt` was removed\r\n* It's no longer allowed to read content/maps from `assets` after emitting. Only `size` access is allowed.\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8650/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "6a62225c99b2998c4ec26c178ea1ed57f4881fbc",
        "filename": "declarations.d.ts",
        "status": "modified",
        "additions": 95,
        "deletions": 0,
        "changes": 95,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/declarations.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/declarations.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations.d.ts?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -220,6 +220,101 @@ declare module \"@webassemblyjs/ast\" {\n \texport function isFuncImportDescr(n: Node): boolean;\n }\n \n+declare module \"webpack-sources\" {\n+\ttype MapOptions = { columns?: boolean; module?: boolean };\n+\n+\texport abstract class Source {\n+\t\tsize(): number;\n+\n+\t\tmap(options?: MapOptions): Object;\n+\n+\t\tsourceAndMap(\n+\t\t\toptions?: MapOptions\n+\t\t): {\n+\t\t\tsource: string | Buffer;\n+\t\t\tmap: Object;\n+\t\t};\n+\n+\t\tupdateHash(hash: import(\"./lib/util/createHash\").Hash): void;\n+\n+\t\tsource(): string | Buffer;\n+\t}\n+\n+\texport class RawSource extends Source {\n+\t\tconstructor(source: string | Buffer);\n+\n+\t\t// TODO remove internals\n+\t\t_value: string | Buffer;\n+\t}\n+\n+\texport class OriginalSource extends Source {\n+\t\tconstructor(source: string | Buffer, name: string);\n+\n+\t\t// TODO remove internals\n+\t\t_value: string | Buffer;\n+\t\t_name: string;\n+\t}\n+\n+\texport class ReplaceSource extends Source {\n+\t\tconstructor(source: Source, name?: string);\n+\n+\t\treplace(start: number, end: number, newValue: string, name?: string): void;\n+\t\tinsert(pos: number, newValue: string, name?: string): void;\n+\n+\t\t// TODO remove internals\n+\t\t_name: string;\n+\t\t_source: string;\n+\t\t_replacements: {\n+\t\t\tstart: number;\n+\t\t\tend: number;\n+\t\t\tcontent: string;\n+\t\t\tinsertIndex: number;\n+\t\t\tname: string;\n+\t\t}[];\n+\t}\n+\n+\texport class SourceMapSource extends Source {\n+\t\tconstructor(\n+\t\t\tsource: string,\n+\t\t\tname: string,\n+\t\t\tsourceMap: Object | string,\n+\t\t\toriginalSource?: string,\n+\t\t\tinnerSourceMap?: Object\n+\t\t);\n+\t}\n+\n+\texport class ConcatSource extends Source {\n+\t\tconstructor(...args: (string | Source)[]);\n+\n+\t\tchildren: (string | Source)[];\n+\n+\t\tadd(item: string | Source): void;\n+\t}\n+\n+\texport class PrefixSource extends Source {\n+\t\tconstructor(prefix: string, source: string | Source);\n+\n+\t\t_source: string | Source;\n+\t\t_prefix: string;\n+\t}\n+\n+\texport class CachedSource extends Source {\n+\t\tconstructor(source: Source);\n+\n+\t\t_source: Source;\n+\t\t_cachedSource: string | Buffer;\n+\t\t_cachedBuffer: Buffer;\n+\t\t_cachedSize: number;\n+\t\t_cachedMaps: Object;\n+\t}\n+\n+\texport class SizeOnlySource extends Source {\n+\t\tconstructor(size: number);\n+\n+\t\t_size: number;\n+\t}\n+}\n+\n // This \"hack\" is needed because typescript doesn't support recursive type definitions\n // It's referenced from \"ruleSet-conditions\" in schemas/WebpackOptions.json\n interface RuleSetConditionsRecursive"
      },
      {
        "sha": "bd474bc139918f66a682a1df85a5e1dd7c0627b7",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -541,8 +541,8 @@ class Compilation {\n \t\tthis.builtModules = new WeakSet();\n \t\t/** @private @type {Map<Module, Callback[]>} */\n \t\tthis._rebuildingModules = new Map();\n-\t\t/** @type {WeakSet<Source>} */\n-\t\tthis.emittedAssets = new WeakSet();\n+\t\t/** @type {Set<string>} */\n+\t\tthis.emittedAssets = new Set();\n \t\t/** @type {SortableSet<string>} */\n \t\tthis.fileDependencies = new SortableSet();\n \t\t/** @type {SortableSet<string>} */"
      },
      {
        "sha": "8ad6e7352f1e96f541a534ef6eebbef0a242fa5b",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 67,
        "deletions": 9,
        "changes": 76,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -15,6 +15,7 @@ const {\n \tAsyncParallelHook,\n \tAsyncSeriesHook\n } = require(\"tapable\");\n+const { SizeOnlySource } = require(\"webpack-sources\");\n \n const Cache = require(\"./Cache\");\n const Compilation = require(\"./Compilation\");\n@@ -27,6 +28,7 @@ const Stats = require(\"./Stats\");\n const Watching = require(\"./Watching\");\n const { makePathsRelative } = require(\"./util/identifier\");\n \n+/** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"../declarations/WebpackOptions\").Entry} Entry */\n /** @typedef {import(\"../declarations/WebpackOptions\").OutputOptions} OutputOptions */\n /** @typedef {import(\"../declarations/WebpackOptions\").WatchOptions} WatchOptions */\n@@ -161,6 +163,11 @@ class Compiler {\n \n \t\t/** @type {boolean} */\n \t\tthis.watchMode = false;\n+\n+\t\t/** @private @type {WeakMap<Source, { sizeOnlySource: SizeOnlySource, writtenTo: Map<string, number> }>} */\n+\t\tthis._assetEmittingSourceCache = new WeakMap();\n+\t\t/** @private @type {Map<string, number>} */\n+\t\tthis._assetEmittingWrittenFiles = new Map();\n \t}\n \n \t/**\n@@ -327,19 +334,70 @@ class Compiler {\n \t\t\t\t\t\t\toutputPath,\n \t\t\t\t\t\t\ttargetFile\n \t\t\t\t\t\t);\n-\t\t\t\t\t\tif (source.existsAt === targetPath) {\n-\t\t\t\t\t\t\tcompilation.emittedAssets.delete(source);\n-\t\t\t\t\t\t\treturn callback();\n+\n+\t\t\t\t\t\t// check if the target file has already been written by this Compiler\n+\t\t\t\t\t\tconst targetFileGeneration = this._assetEmittingWrittenFiles.get(\n+\t\t\t\t\t\t\ttargetPath\n+\t\t\t\t\t\t);\n+\n+\t\t\t\t\t\t// create an cache entry for this Source if not already existing\n+\t\t\t\t\t\tlet cacheEntry = this._assetEmittingSourceCache.get(source);\n+\t\t\t\t\t\tif (cacheEntry === undefined) {\n+\t\t\t\t\t\t\tcacheEntry = {\n+\t\t\t\t\t\t\t\tsizeOnlySource: undefined,\n+\t\t\t\t\t\t\t\twrittenTo: new Map()\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t\tthis._assetEmittingSourceCache.set(source, cacheEntry);\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t// if the target file has already been written\n+\t\t\t\t\t\tif (targetFileGeneration !== undefined) {\n+\t\t\t\t\t\t\t// check if the Source has been written to this target file\n+\t\t\t\t\t\t\tconst writtenGeneration = cacheEntry.writtenTo.get(targetPath);\n+\t\t\t\t\t\t\tif (writtenGeneration === targetFileGeneration) {\n+\t\t\t\t\t\t\t\t// if yes, we skip writing the file\n+\t\t\t\t\t\t\t\t// as it's already there\n+\t\t\t\t\t\t\t\t// (we assume one doesn't remove files while the Compiler is running)\n+\t\t\t\t\t\t\t\treturn callback();\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tlet content = source.source();\n \n-\t\t\t\t\t\tif (!Buffer.isBuffer(content)) {\n-\t\t\t\t\t\t\tcontent = Buffer.from(content, \"utf8\");\n+\t\t\t\t\t\t// get the binary (Buffer) content from the Source\n+\t\t\t\t\t\t/** @type {Buffer} */\n+\t\t\t\t\t\tlet content;\n+\t\t\t\t\t\tif (typeof source.buffer === \"function\") {\n+\t\t\t\t\t\t\tcontent = source.buffer();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tconst bufferOrString = source.source();\n+\t\t\t\t\t\t\tif (Buffer.isBuffer(bufferOrString)) {\n+\t\t\t\t\t\t\t\tcontent = bufferOrString;\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tcontent = Buffer.from(bufferOrString, \"utf8\");\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \n-\t\t\t\t\t\tsource.existsAt = targetPath;\n-\t\t\t\t\t\tcompilation.emittedAssets.add(source);\n-\t\t\t\t\t\tthis.outputFileSystem.writeFile(targetPath, content, callback);\n+\t\t\t\t\t\t// Create a replacement resource which only allows to ask for size\n+\t\t\t\t\t\t// This allows to GC all memory allocated by the Source\n+\t\t\t\t\t\t// (expect when the Source is stored in any other cache)\n+\t\t\t\t\t\tcacheEntry.sizeOnlySource = new SizeOnlySource(content.length);\n+\t\t\t\t\t\tcompilation.assets[file] = cacheEntry.sizeOnlySource;\n+\n+\t\t\t\t\t\t// Write the file to output file system\n+\t\t\t\t\t\tthis.outputFileSystem.writeFile(targetPath, content, err => {\n+\t\t\t\t\t\t\tif (err) return callback(err);\n+\n+\t\t\t\t\t\t\t// information marker that the asset has been emitted\n+\t\t\t\t\t\t\tcompilation.emittedAssets.add(file);\n+\n+\t\t\t\t\t\t\t// cache the information that the Source has been written to that location\n+\t\t\t\t\t\t\tconst newGeneration =\n+\t\t\t\t\t\t\t\ttargetFileGeneration === undefined\n+\t\t\t\t\t\t\t\t\t? 1\n+\t\t\t\t\t\t\t\t\t: targetFileGeneration + 1;\n+\t\t\t\t\t\t\tcacheEntry.writtenTo.set(targetPath, newGeneration);\n+\t\t\t\t\t\t\tthis._assetEmittingWrittenFiles.set(targetPath, newGeneration);\n+\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t});\n \t\t\t\t\t};\n \n \t\t\t\t\tif (targetFile.match(/\\/|\\\\/)) {"
      },
      {
        "sha": "4d69c8cc8bdfe63ac683b71f8827228e187ec285",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -574,7 +574,7 @@ class NormalModule extends Module {\n \t\t\t}\n \n \t\t\tconst handleParseError = e => {\n-\t\t\t\tconst source = this._source.source();\n+\t\t\t\tconst source = /** @type {string} */ (this._source.source());\n \t\t\t\tconst error = new ModuleParseError(source, e);\n \t\t\t\tthis.markModuleAsErrored(error);\n \t\t\t\tthis._initBuildHash(compilation);"
      },
      {
        "sha": "8e5bbfbbe2bc2b158d2efdbcb92f871a0041e071",
        "filename": "lib/stats/DefaultStatsFactoryPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2Fstats%2FDefaultStatsFactoryPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fstats%2FDefaultStatsFactoryPlugin.js?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -282,7 +282,7 @@ const SIMPLE_EXTRACTORS = {\n \t\t\t\t\treturn names;\n \t\t\t\t}, /** @type {Set<string>} */ (new Set()))\n \t\t\t).sort(compareIds);\n-\t\t\tobject.emitted = compilation.emittedAssets.has(asset.source);\n+\t\t\tobject.emitted = compilation.emittedAssets.has(asset.name);\n \t\t},\n \t\tperformance: (object, asset) => {\n \t\t\tobject.isOverSizeLimit = SizeLimitsPlugin.isOverSizeLimit(asset.source);"
      },
      {
        "sha": "703cd00ff3d19105f2c9b64f7889b2ba0ffef4a7",
        "filename": "lib/util/registerExternalSerializer.js",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2Futil%2FregisterExternalSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/lib%2Futil%2FregisterExternalSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FregisterExternalSerializer.js?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -38,6 +38,7 @@ register(\n \t\t */\n \t\tserialize(source, { write }) {\n \t\t\twrite(source._source);\n+\t\t\twrite(source._cachedBuffer);\n \t\t\twrite(source._cachedSource);\n \t\t\twrite(source._cachedSize);\n \t\t\twrite(source._cachedMaps);\n@@ -49,6 +50,7 @@ register(\n \t\t */\n \t\tdeserialize({ read }) {\n \t\t\tconst source = new CachedSource(read());\n+\t\t\tsource._cachedBuffer = read();\n \t\t\tsource._cachedSource = read();\n \t\t\tsource._cachedSize = read();\n \t\t\tsource._cachedMaps = read();\n@@ -148,9 +150,7 @@ register(\n \t\tserialize(source, { write }) {\n \t\t\twrite(source._source);\n \t\t\twrite(source._name);\n-\t\t\tconst replacements = /** @type {TODO} */ (Array.from(\n-\t\t\t\tsource.replacements\n-\t\t\t));\n+\t\t\tconst replacements = Array.from(source._replacements);\n \t\t\treplacements.sort((a, b) => {\n \t\t\t\treturn a.insertIndex - b.insertIndex;\n \t\t\t});\n@@ -171,7 +171,6 @@ register(\n \t\t\tconst source = new ReplaceSource(read(), read());\n \t\t\tconst len = read();\n \t\t\tfor (let i = 0; i < len; i++) {\n-\t\t\t\t// @ts-ignore TODO signature is missing one argument in typings\n \t\t\t\tsource.replace(read(), read(), read(), read());\n \t\t\t}\n \t\t\treturn source;"
      },
      {
        "sha": "131d6465e14eb1f4142504742a24dc89dc98c7ce",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -29,12 +29,11 @@\n     \"tapable\": \"^1.1.0\",\n     \"terser-webpack-plugin\": \"^1.2.1\",\n     \"watchpack\": \"2.0.0-beta.2\",\n-    \"webpack-sources\": \"^1.3.0\"\n+    \"webpack-sources\": \"2.0.0-beta.0\"\n   },\n   \"devDependencies\": {\n     \"@types/node\": \"^10.12.3\",\n     \"@types/tapable\": \"^1.0.1\",\n-    \"@types/webpack-sources\": \"^0.1.4\",\n     \"benchmark\": \"^2.1.1\",\n     \"bundle-loader\": \"~0.5.0\",\n     \"codacy-coverage\": \"^3.1.0\","
      },
      {
        "sha": "44e0751490cd600cf5181d63e25e5ed16bb970c4",
        "filename": "test/HotModuleReplacementPlugin.test.js",
        "status": "modified",
        "additions": 8,
        "deletions": 15,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/test%2FHotModuleReplacementPlugin.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/test%2FHotModuleReplacementPlugin.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FHotModuleReplacementPlugin.test.js?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -99,32 +99,25 @@ describe(\"HotModuleReplacementPlugin\", () => {\n \t}, 120000);\n \n \tit(\"should correct working when entry is Object and key is a number\", done => {\n+\t\tconst outputPath = path.join(__dirname, \"js\", \"HotModuleReplacementPlugin\");\n \t\tconst entryFile = path.join(\n-\t\t\t__dirname,\n-\t\t\t\"js\",\n-\t\t\t\"HotModuleReplacementPlugin\",\n+\t\t\toutputPath,\n \t\t\t\"entry.js\"\n \t\t);\n \t\tconst statsFile3 = path.join(\n-\t\t\t__dirname,\n-\t\t\t\"js\",\n-\t\t\t\"HotModuleReplacementPlugin\",\n+\t\t\toutputPath,\n \t\t\t\"HotModuleReplacementPlugin.test.stats3.txt\"\n \t\t);\n \t\tconst statsFile4 = path.join(\n-\t\t\t__dirname,\n-\t\t\t\"js\",\n-\t\t\t\"HotModuleReplacementPlugin\",\n+\t\t\toutputPath,\n \t\t\t\"HotModuleReplacementPlugin.test.stats4.txt\"\n \t\t);\n \t\tconst recordsFile = path.join(\n-\t\t\t__dirname,\n-\t\t\t\"js\",\n-\t\t\t\"HotModuleReplacementPlugin\",\n+\t\t\toutputPath,\n \t\t\t\"records.json\"\n \t\t);\n \t\ttry {\n-\t\t\tmkdirp.sync(path.join(__dirname, \"js\", \"HotModuleReplacementPlugin\"));\n+\t\t\tmkdirp.sync(outputPath);\n \t\t} catch (e) {\n \t\t\t// empty\n \t\t}\n@@ -141,7 +134,7 @@ describe(\"HotModuleReplacementPlugin\", () => {\n \t\t\t},\n \t\t\trecordsPath: recordsFile,\n \t\t\toutput: {\n-\t\t\t\tpath: path.join(__dirname, \"js\", \"HotModuleReplacementPlugin\")\n+\t\t\t\tpath: outputPath\n \t\t\t},\n \t\t\tplugins: [new webpack.HotModuleReplacementPlugin()],\n \t\t\toptimization: {\n@@ -163,7 +156,7 @@ describe(\"HotModuleReplacementPlugin\", () => {\n \t\t\t\t\tif (err) throw err;\n \t\t\t\t\tfs.writeFileSync(statsFile3, stats.toString());\n \t\t\t\t\tconst result = JSON.parse(\n-\t\t\t\t\t\tstats.compilation.assets[`${hash}.hot-update.json`].source()\n+\t\t\t\t\t\tfs.readFileSync(path.join(outputPath, `${hash}.hot-update.json`), \"utf-8\")\n \t\t\t\t\t)[\"c\"];\n \t\t\t\t\texpect(result).toEqual([chunkName]);\n \t\t\t\t\tdone();"
      },
      {
        "sha": "cf8d490020a3739520d5d148fbf8f950751783cb",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 152,
        "deletions": 152,
        "changes": 304,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -1,130 +1,130 @@\n // Jest Snapshot v1, https://goo.gl/fbAQLP\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n-\"Hash: 63c66a3e98b1290e213163c66a3e98b1290e2131\n+\"Hash: c99c0d5aad7172d3fc17c99c0d5aad7172d3fc17\n Child fitting:\n-    Hash: 63c66a3e98b1290e2131\n+    Hash: c99c0d5aad7172d3fc17\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     PublicPath: (none)\n                       Asset      Size  Chunks             Chunk Names\n-    2ac99180a3a5f1b81b3d.js  1.92 KiB   {972}  [emitted]\n-    6bbefc6ae5f31b1f0363.js  1.07 KiB   {780}  [emitted]\n-    92ce9e05bd27fd2239fb.js  1.92 KiB   {324}  [emitted]\n-    9b208d4fd95898991705.js  12.1 KiB   {967}  [emitted]\n-    Entrypoint main = 92ce9e05bd27fd2239fb.js 2ac99180a3a5f1b81b3d.js 9b208d4fd95898991705.js\n-    chunk {324} 92ce9e05bd27fd2239fb.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    4ec3a56d38eb3a2a2dae.js  1.92 KiB   {324}  [emitted]\n+    69ea1e0c4e453d2cc21c.js  1.07 KiB   {780}  [emitted]\n+    6e8afc9c2e15f398cc94.js  1.92 KiB   {972}  [emitted]\n+    7b4bf185c2f47fcaaac6.js  12.1 KiB   {967}  [emitted]\n+    Entrypoint main = 4ec3a56d38eb3a2a2dae.js 6e8afc9c2e15f398cc94.js 7b4bf185c2f47fcaaac6.js\n+    chunk {324} 4ec3a56d38eb3a2a2dae.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n       [21] ./b.js 899 bytes {324} [built]\n      [162] ./a.js 899 bytes {324} [built]\n-    chunk {780} 6bbefc6ae5f31b1f0363.js 916 bytes [rendered]\n+    chunk {780} 69ea1e0c4e453d2cc21c.js 916 bytes [rendered]\n         > ./g [967] ./index.js 7:0-13\n      [780] ./g.js 916 bytes {780} [built]\n-    chunk {967} 9b208d4fd95898991705.js 1.87 KiB (javascript) 5.88 KiB (runtime) [entry] [rendered]\n+    chunk {967} 7b4bf185c2f47fcaaac6.js 1.87 KiB (javascript) 5.88 KiB (runtime) [entry] [rendered]\n         > ./index main\n      [153] ./f.js 900 bytes {967} [built]\n      [601] ./e.js 899 bytes {967} [built]\n      [967] ./index.js 111 bytes {967} [built]\n          + 7 hidden chunk modules\n-    chunk {972} 2ac99180a3a5f1b81b3d.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk {972} 6e8afc9c2e15f398cc94.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n       [85] ./d.js 899 bytes {972} [built]\n      [911] ./c.js 899 bytes {972} [built]\n Child content-change:\n-    Hash: 63c66a3e98b1290e2131\n+    Hash: c99c0d5aad7172d3fc17\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     PublicPath: (none)\n                       Asset      Size  Chunks             Chunk Names\n-    2ac99180a3a5f1b81b3d.js  1.92 KiB   {972}  [emitted]\n-    6bbefc6ae5f31b1f0363.js  1.07 KiB   {780}  [emitted]\n-    92ce9e05bd27fd2239fb.js  1.92 KiB   {324}  [emitted]\n-    9b208d4fd95898991705.js  12.1 KiB   {967}  [emitted]\n-    Entrypoint main = 92ce9e05bd27fd2239fb.js 2ac99180a3a5f1b81b3d.js 9b208d4fd95898991705.js\n-    chunk {324} 92ce9e05bd27fd2239fb.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    4ec3a56d38eb3a2a2dae.js  1.92 KiB   {324}  [emitted]\n+    69ea1e0c4e453d2cc21c.js  1.07 KiB   {780}  [emitted]\n+    6e8afc9c2e15f398cc94.js  1.92 KiB   {972}  [emitted]\n+    7b4bf185c2f47fcaaac6.js  12.1 KiB   {967}  [emitted]\n+    Entrypoint main = 4ec3a56d38eb3a2a2dae.js 6e8afc9c2e15f398cc94.js 7b4bf185c2f47fcaaac6.js\n+    chunk {324} 4ec3a56d38eb3a2a2dae.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n       [21] ./b.js 899 bytes {324} [built]\n      [162] ./a.js 899 bytes {324} [built]\n-    chunk {780} 6bbefc6ae5f31b1f0363.js 916 bytes [rendered]\n+    chunk {780} 69ea1e0c4e453d2cc21c.js 916 bytes [rendered]\n         > ./g [967] ./index.js 7:0-13\n      [780] ./g.js 916 bytes {780} [built]\n-    chunk {967} 9b208d4fd95898991705.js 1.87 KiB (javascript) 5.88 KiB (runtime) [entry] [rendered]\n+    chunk {967} 7b4bf185c2f47fcaaac6.js 1.87 KiB (javascript) 5.88 KiB (runtime) [entry] [rendered]\n         > ./index main\n      [153] ./f.js 900 bytes {967} [built]\n      [601] ./e.js 899 bytes {967} [built]\n      [967] ./index.js 111 bytes {967} [built]\n          + 7 hidden chunk modules\n-    chunk {972} 2ac99180a3a5f1b81b3d.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n+    chunk {972} 6e8afc9c2e15f398cc94.js 1.76 KiB [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n       [85] ./d.js 899 bytes {972} [built]\n      [911] ./c.js 899 bytes {972} [built]\"\n `;\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n-\"Hash: 812d7adcb8fd2c808e75\n+\"Hash: 975260ee5d294c0a2909\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n PublicPath: (none)\n                   Asset        Size        Chunks             Chunk Names\n-07a82729198397ca66ba.js    1.92 KiB         {318}  [emitted]\n-1c174f7c2b68911f766c.js  1020 bytes         {601}  [emitted]\n-2ac99180a3a5f1b81b3d.js    1.92 KiB         {972}  [emitted]\n-2ddd5da63ba77b990f30.js    8.85 KiB         {404}  [emitted]  main\n-5c0ad07b089bc5ca5779.js    1.92 KiB         {401}  [emitted]\n-679f17471f36eacd7cdf.js    1.92 KiB         {909}  [emitted]\n-7475f3c9f3819c9dd6ba.js    1.92 KiB   {89}, {355}  [emitted]\n-a803a752149acc6c90f3.js  1020 bytes         {355}  [emitted]\n-b4da1c3b1d339741da67.js    1.91 KiB         {535}  [emitted]\n-b9380c3f8016e7d6eac8.js    1.92 KiB  {601}, {663}  [emitted]\n-bf1198d66b286ad36768.js  1020 bytes         {162}  [emitted]\n-d18e688a78f943b719db.js    1.92 KiB         {625}  [emitted]\n-Entrypoint main = 2ddd5da63ba77b990f30.js\n-chunk {89} 7475f3c9f3819c9dd6ba.js 1.76 KiB [rendered]\n+481011ba787ca2245f6c.js    1.92 KiB         {401}  [emitted]\n+498336c458ca3e2f210a.js  1020 bytes         {601}  [emitted]\n+5712ee08c698584c013f.js  1020 bytes         {162}  [emitted]\n+58c8dc21062619780583.js    1.92 KiB         {318}  [emitted]\n+6570ba6ef4cff907e30e.js    8.85 KiB         {404}  [emitted]  main\n+6e8afc9c2e15f398cc94.js    1.92 KiB         {972}  [emitted]\n+83eca01c31cb1c0587d9.js    1.92 KiB         {625}  [emitted]\n+9d0ac517a27e3f3d19d0.js  1020 bytes         {355}  [emitted]\n+c7cb1626aca4edc50d04.js    1.92 KiB         {909}  [emitted]\n+e281eb2e68ed1d5784a5.js    1.92 KiB   {89}, {355}  [emitted]\n+f3e49bab620d29da3576.js    1.92 KiB  {601}, {663}  [emitted]\n+faec1dd207d2cf59dd83.js    1.91 KiB         {535}  [emitted]\n+Entrypoint main = 6570ba6ef4cff907e30e.js\n+chunk {89} e281eb2e68ed1d5784a5.js 1.76 KiB [rendered]\n     > ./f ./g ./h ./i ./j ./k [967] ./index.js 4:0-51\n  [355] ./k.js 899 bytes {89} {355} [built]\n  [397] ./j.js 901 bytes {89} {401} [built]\n-chunk {162} bf1198d66b286ad36768.js 899 bytes [rendered]\n+chunk {162} 5712ee08c698584c013f.js 899 bytes [rendered]\n     > ./a [967] ./index.js 1:0-16\n  [162] ./a.js 899 bytes {162} [built]\n-chunk {318} 07a82729198397ca66ba.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk {318} 58c8dc21062619780583.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k [967] ./index.js 4:0-51\n   [39] ./h.js 899 bytes {318} {663} [built]\n  [917] ./i.js 899 bytes {318} {401} [built]\n-chunk {355} a803a752149acc6c90f3.js 899 bytes [rendered]\n+chunk {355} 9d0ac517a27e3f3d19d0.js 899 bytes [rendered]\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [967] ./index.js 6:0-72\n  [355] ./k.js 899 bytes {89} {355} [built]\n-chunk {401} 5c0ad07b089bc5ca5779.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk {401} 481011ba787ca2245f6c.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [967] ./index.js 6:0-72\n  [397] ./j.js 901 bytes {89} {401} [built]\n  [917] ./i.js 899 bytes {318} {401} [built]\n-chunk {404} 2ddd5da63ba77b990f30.js (main) 248 bytes (javascript) 3.96 KiB (runtime) [entry] [rendered]\n+chunk {404} 6570ba6ef4cff907e30e.js (main) 248 bytes (javascript) 3.96 KiB (runtime) [entry] [rendered]\n     > ./index main\n  [967] ./index.js 248 bytes {404} [built]\n      + 4 hidden chunk modules\n-chunk {535} b4da1c3b1d339741da67.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk {535} faec1dd207d2cf59dd83.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g [967] ./index.js 5:0-44\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [967] ./index.js 6:0-72\n  [21] ./b.js 899 bytes {535} {909} [built]\n  [85] ./d.js 899 bytes {535} {972} [built]\n-chunk {601} 1c174f7c2b68911f766c.js 899 bytes [rendered]\n+chunk {601} 498336c458ca3e2f210a.js 899 bytes [rendered]\n     > ./c ./d ./e [967] ./index.js 3:0-30\n     > ./b ./d ./e ./f ./g [967] ./index.js 5:0-44\n  [601] ./e.js 899 bytes {601} {663} [built]\n-chunk {625} d18e688a78f943b719db.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk {625} 83eca01c31cb1c0587d9.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k [967] ./index.js 4:0-51\n     > ./b ./d ./e ./f ./g [967] ./index.js 5:0-44\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [967] ./index.js 6:0-72\n  [153] ./f.js 899 bytes {625} [built]\n  [780] ./g.js 901 bytes {625} [built]\n-chunk {663} b9380c3f8016e7d6eac8.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk {663} f3e49bab620d29da3576.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [967] ./index.js 6:0-72\n   [39] ./h.js 899 bytes {318} {663} [built]\n  [601] ./e.js 899 bytes {601} {663} [built]\n-chunk {909} 679f17471f36eacd7cdf.js 1.76 KiB [rendered]\n+chunk {909} c7cb1626aca4edc50d04.js 1.76 KiB [rendered]\n     > ./b ./c [967] ./index.js 2:0-23\n   [21] ./b.js 899 bytes {535} {909} [built]\n  [911] ./c.js 899 bytes {909} {972} [built]\n-chunk {972} 2ac99180a3a5f1b81b3d.js 1.76 KiB [rendered] [recorded] aggressive splitted\n+chunk {972} 6e8afc9c2e15f398cc94.js 1.76 KiB [rendered] [recorded] aggressive splitted\n     > ./c ./d ./e [967] ./index.js 3:0-30\n   [85] ./d.js 899 bytes {535} {972} [built]\n  [911] ./c.js 899 bytes {909} {972} [built]\"\n@@ -430,7 +430,7 @@ Child all:\n `;\n \n exports[`StatsTestCases should print correct stats for chunk-module-id-range 1`] = `\n-\"Hash: e1c5cda0af8950ac8e50\n+\"Hash: aef92999a177b4046170\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n PublicPath: (none)\n@@ -458,7 +458,7 @@ chunk {1} main1.js (main1) 136 bytes (javascript) 279 bytes (runtime) [entry] [r\n `;\n \n exports[`StatsTestCases should print correct stats for chunks 1`] = `\n-\"Hash: 7c9f463f0c4bf7052a7b\n+\"Hash: 4204dacfe8ab0c98acce\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n PublicPath: (none)\n@@ -498,7 +498,7 @@ chunk {911} 911.bundle.js 54 bytes <{404}> >{130}< [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for chunks-development 1`] = `\n-\"Hash: 2f1652e2ab1ad03e29d8\n+\"Hash: dd98e862e1d888d75518\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n PublicPath: (none)\n@@ -552,7 +552,7 @@ chunk {912} 912.bundle.js (b) 49 bytes <{43}> <{404}> >{43}< [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for color-disabled 1`] = `\n-\"Hash: 36a766715fbd1a1c3374\n+\"Hash: 41981cf69b6f76c3c874\n Time: Xms\n Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -562,7 +562,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for color-enabled 1`] = `\n-\"Hash: <CLR=BOLD>36a766715fbd1a1c3374</CLR>\n+\"Hash: <CLR=BOLD>41981cf69b6f76c3c874</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n   <CLR=BOLD>Asset</CLR>      <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>             <CLR=BOLD>Chunk Names</CLR>\n@@ -572,7 +572,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n `;\n \n exports[`StatsTestCases should print correct stats for color-enabled-custom 1`] = `\n-\"Hash: <CLR=BOLD>36a766715fbd1a1c3374</CLR>\n+\"Hash: <CLR=BOLD>41981cf69b6f76c3c874</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n   <CLR=BOLD>Asset</CLR>      <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>             <CLR=BOLD>Chunk Names</CLR>\n@@ -582,7 +582,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32>main.js</CLR>\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-0 1`] = `\n-\"Hash: d319bccec54b484edb25\n+\"Hash: b920d41e1e3b43bef164\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n      Asset       Size  Chunks             Chunk Names\n@@ -600,7 +600,7 @@ Entrypoint entry-1 = 314.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-Infinity 1`] = `\n-\"Hash: 2dde95302ffb8bfb1453\n+\"Hash: f9d65c76c025d3f771ef\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset       Size  Chunks             Chunk Names\n@@ -618,26 +618,26 @@ Entrypoint entry-1 = vendor-1.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"Hash: 695675b6de88ae938fc968c60676fc64b3fcbf14\n+\"Hash: 6cfb2138c8ceb67deb0a80f6078e3c2dacf4b7d1\n Child\n-    Hash: 695675b6de88ae938fc9\n+    Hash: 6cfb2138c8ceb67deb0a\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                              Asset       Size  Chunks             Chunk Names\n-       app.0d340f23e555b4caaf7f.js   6.62 KiB   {131}  [emitted]  app\n-    vendor.48812b34a6c49f96f61b.js  616 bytes   {262}  [emitted]  vendor\n-    Entrypoint app = vendor.48812b34a6c49f96f61b.js app.0d340f23e555b4caaf7f.js\n+       app.58adf9207d7635a774f0.js   6.62 KiB   {131}  [emitted]  app\n+    vendor.db1343b8c15cbfb40349.js  616 bytes   {262}  [emitted]  vendor\n+    Entrypoint app = vendor.db1343b8c15cbfb40349.js app.58adf9207d7635a774f0.js\n     [946] ./entry-1.js + 2 modules 190 bytes {131} [built]\n     [950] ./constants.js 87 bytes {262} [built]\n         + 4 hidden modules\n Child\n-    Hash: 68c60676fc64b3fcbf14\n+    Hash: 80f6078e3c2dacf4b7d1\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                              Asset       Size  Chunks             Chunk Names\n-       app.20b53555a87f9ddacdec.js   6.63 KiB   {131}  [emitted]  app\n-    vendor.48812b34a6c49f96f61b.js  616 bytes   {262}  [emitted]  vendor\n-    Entrypoint app = vendor.48812b34a6c49f96f61b.js app.20b53555a87f9ddacdec.js\n+       app.fe80305685dc4ae37f97.js   6.63 KiB   {131}  [emitted]  app\n+    vendor.db1343b8c15cbfb40349.js  616 bytes   {262}  [emitted]  vendor\n+    Entrypoint app = vendor.db1343b8c15cbfb40349.js app.fe80305685dc4ae37f97.js\n     [914] ./entry-2.js + 2 modules 197 bytes {131} [built]\n     [950] ./constants.js 87 bytes {262} [built]\n         + 4 hidden modules\"\n@@ -662,25 +662,25 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for define-plugin 1`] = `\n-\"Hash: 8225e2a349a0885c8395b83aee9e9c4c16f529ddd6bb0c801e3d773e38d4\n+\"Hash: 193c7d77b2540b5c64c07223622702f32911cf3abf18b5bbad8c956df6df\n Child\n-    Hash: 8225e2a349a0885c8395\n+    Hash: 193c7d77b2540b5c64c0\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset      Size  Chunks             Chunk Names\n     main.js  1.35 KiB   {404}  [emitted]  main\n     Entrypoint main = main.js\n     [967] ./index.js 24 bytes {404} [built]\n Child\n-    Hash: b83aee9e9c4c16f529dd\n+    Hash: 7223622702f32911cf3a\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset      Size  Chunks             Chunk Names\n     main.js  1.35 KiB   {404}  [emitted]  main\n     Entrypoint main = main.js\n     [967] ./index.js 24 bytes {404} [built]\n Child\n-    Hash: d6bb0c801e3d773e38d4\n+    Hash: bf18b5bbad8c956df6df\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset      Size  Chunks             Chunk Names\n@@ -690,7 +690,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for dll-reference-plugin-issue-7624 1`] = `\n-\"Hash: 070e9b1e5793fc11dd83\n+\"Hash: 9ddc2f8f4098ef2e7565\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -700,7 +700,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for dll-reference-plugin-issue-7624-error 1`] = `\n-\"Hash: 30c68f023ce6c1b599d6\n+\"Hash: 5070207aed09e0a8ec9d\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks  Chunk Names\n@@ -714,7 +714,7 @@ Unexpected end of JSON input while parsing near ''\n `;\n \n exports[`StatsTestCases should print correct stats for exclude-with-loader 1`] = `\n-\"Hash: 61dca4fe163b9c2ee060\n+\"Hash: edd68ec5ce8683dfc8c0\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -727,7 +727,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for external 1`] = `\n-\"Hash: 706b85db7a116f1f790d\n+\"Hash: 04953aff1adca35fd23d\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -738,9 +738,9 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for filter-warnings 1`] = `\n-\"Hash: a2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665ca2129d3a0902b491665c\n+\"Hash: 614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c614c87c680ad23893c7c\n Child undefined:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -770,49 +770,49 @@ Child undefined:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [./index.js:12,0]\n \n Child Terser:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {404}  [emitted]  main\n     Entrypoint main = bundle.js\n Child /Terser/:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {404}  [emitted]  main\n     Entrypoint main = bundle.js\n Child warnings => true:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {404}  [emitted]  main\n     Entrypoint main = bundle.js\n Child [Terser]:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {404}  [emitted]  main\n     Entrypoint main = bundle.js\n Child [/Terser/]:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {404}  [emitted]  main\n     Entrypoint main = bundle.js\n Child [warnings => true]:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  1.32 KiB   {404}  [emitted]  main\n     Entrypoint main = bundle.js\n Child should not filter:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -842,7 +842,7 @@ Child should not filter:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [./index.js:12,0]\n \n Child /should not filter/:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -872,7 +872,7 @@ Child /should not filter/:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [./index.js:12,0]\n \n Child warnings => false:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -902,7 +902,7 @@ Child warnings => false:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [./index.js:12,0]\n \n Child [should not filter]:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -932,7 +932,7 @@ Child [should not filter]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [./index.js:12,0]\n \n Child [/should not filter/]:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -962,7 +962,7 @@ Child [/should not filter/]:\n     WARNING in Terser Plugin: Dropping unused function someUnUsedFunction5 [./index.js:12,0]\n \n Child [warnings => false]:\n-    Hash: a2129d3a0902b491665c\n+    Hash: 614c87c680ad23893c7c\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -1087,7 +1087,7 @@ chunk {trees} trees.js (trees) 70 bytes [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n-\"Hash: 5ed3bbad7ccb31aa685b\n+\"Hash: 144449879158d774f49b\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n    Asset       Size  Chunks             Chunk Names\n@@ -1105,7 +1105,7 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for import-weak 1`] = `\n-\"Hash: c813abe1524fcc243b9a\n+\"Hash: b9735fc7101f20f713f9\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n    Asset       Size  Chunks             Chunk Names\n@@ -1142,52 +1142,52 @@ Compilation error while processing magic comment(-s): /* webpackPrefetch: nope *\n `;\n \n exports[`StatsTestCases should print correct stats for issue-7577 1`] = `\n-\"Hash: cdc17cfd997ecbbfe12d13ca972a4262e6fecbe0f45a293dca858ba0bc11\n+\"Hash: 674de449ed250fedc74a974641d0bee2d29d3eff87858d9e7d8494baaa0d\n Child\n-    Hash: cdc17cfd997ecbbfe12d\n+    Hash: 674de449ed250fedc74a\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                                      Asset       Size          Chunks             Chunk Names\n-        a-all-a_js-54b5a2614de37c022f83.js  149 bytes      {all-a_js}  [emitted]\n-            a-main-99e53ec3e0e06aeb3ddd.js  115 bytes          {main}  [emitted]  main\n+        a-all-a_js-80d5d793105c1fbb58f1.js  149 bytes      {all-a_js}  [emitted]\n+            a-main-3ba9aa478578189dc722.js  115 bytes          {main}  [emitted]  main\n     a-runtime~main-51515c16a90b8ca4fd63.js   4.66 KiB  {runtime~main}  [emitted]  runtime~main\n-    Entrypoint main = a-runtime~main-51515c16a90b8ca4fd63.js a-all-a_js-54b5a2614de37c022f83.js a-main-99e53ec3e0e06aeb3ddd.js\n+    Entrypoint main = a-runtime~main-51515c16a90b8ca4fd63.js a-all-a_js-80d5d793105c1fbb58f1.js a-main-3ba9aa478578189dc722.js\n     [./a.js] 18 bytes {all-a_js} [built]\n         + 1 hidden module\n Child\n-    Hash: 13ca972a4262e6fecbe0\n+    Hash: 974641d0bee2d29d3eff\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                                                        Asset       Size                            Chunks             Chunk Names\n-                          b-all-b_js-5134ee16a105da74b34c.js  502 bytes                        {all-b_js}  [emitted]\n-                              b-main-7b50296a687afea131dd.js  148 bytes                            {main}  [emitted]  main\n+                          b-all-b_js-f586ead775e42b6ef6f2.js  502 bytes                        {all-b_js}  [emitted]\n+                              b-main-13605e1c706573337764.js  148 bytes                            {main}  [emitted]  main\n                       b-runtime~main-e315648c3cfdbfdbbd34.js   6.08 KiB                    {runtime~main}  [emitted]  runtime~main\n-    b-vendors-node_modules_vendor_js-8ab1672b5507f9d27ea5.js  194 bytes  {vendors-node_modules_vendor_js}  [emitted]\n-    Entrypoint main = b-runtime~main-e315648c3cfdbfdbbd34.js b-vendors-node_modules_vendor_js-8ab1672b5507f9d27ea5.js b-all-b_js-5134ee16a105da74b34c.js b-main-7b50296a687afea131dd.js\n+    b-vendors-node_modules_vendor_js-a7aa3079a16cbae3f591.js  194 bytes  {vendors-node_modules_vendor_js}  [emitted]\n+    Entrypoint main = b-runtime~main-e315648c3cfdbfdbbd34.js b-vendors-node_modules_vendor_js-a7aa3079a16cbae3f591.js b-all-b_js-f586ead775e42b6ef6f2.js b-main-13605e1c706573337764.js\n     [./b.js] 17 bytes {all-b_js} [built]\n     [./node_modules/vendor.js] 23 bytes {vendors-node_modules_vendor_js} [built]\n         + 4 hidden modules\n Child\n-    Hash: f45a293dca858ba0bc11\n+    Hash: 87858d9e7d8494baaa0d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                                                        Asset       Size                            Chunks             Chunk Names\n-                          c-all-b_js-5134ee16a105da74b34c.js  502 bytes                        {all-b_js}  [emitted]\n-                          c-all-c_js-56da055349f3ac154271.js  369 bytes                        {all-c_js}  [emitted]\n-                              c-main-6d14c88f7e63968909be.js  164 bytes                            {main}  [emitted]  main\n-                      c-runtime~main-f8d14068d2ab41418f5d.js   9.54 KiB                    {runtime~main}  [emitted]  runtime~main\n-    c-vendors-node_modules_vendor_js-8ab1672b5507f9d27ea5.js  194 bytes  {vendors-node_modules_vendor_js}  [emitted]\n-    Entrypoint main = c-runtime~main-f8d14068d2ab41418f5d.js c-all-c_js-56da055349f3ac154271.js c-main-6d14c88f7e63968909be.js (prefetch: c-vendors-node_modules_vendor_js-8ab1672b5507f9d27ea5.js c-all-b_js-5134ee16a105da74b34c.js)\n+                          c-all-b_js-f586ead775e42b6ef6f2.js  502 bytes                        {all-b_js}  [emitted]\n+                          c-all-c_js-951cb2b9375c7bdea05d.js  369 bytes                        {all-c_js}  [emitted]\n+                              c-main-3b8ebb4d4d18bb8bef31.js  164 bytes                            {main}  [emitted]  main\n+                      c-runtime~main-d37832fd5dfbab1ced95.js   9.54 KiB                    {runtime~main}  [emitted]  runtime~main\n+    c-vendors-node_modules_vendor_js-a7aa3079a16cbae3f591.js  194 bytes  {vendors-node_modules_vendor_js}  [emitted]\n+    Entrypoint main = c-runtime~main-d37832fd5dfbab1ced95.js c-all-c_js-951cb2b9375c7bdea05d.js c-main-3b8ebb4d4d18bb8bef31.js (prefetch: c-vendors-node_modules_vendor_js-a7aa3079a16cbae3f591.js c-all-b_js-f586ead775e42b6ef6f2.js)\n     [./b.js] 17 bytes {all-b_js} [built]\n     [./c.js] 61 bytes {all-c_js} [built]\n     [./node_modules/vendor.js] 23 bytes {vendors-node_modules_vendor_js} [built]\n         + 7 hidden modules\"\n `;\n \n exports[`StatsTestCases should print correct stats for limit-chunk-count-plugin 1`] = `\n-\"Hash: b81186619ef36356e19c2cb29d802335a636bfe0e91a7c10571980ba6e97e8d106b8ae91a1ba6f31\n+\"Hash: b1b5a334235024991861f7171095df531da2402146ebc6e59d1b60e9b8ba9ee395c9a44fadf020be\n Child 1 chunks:\n-    Hash: b81186619ef36356e19c\n+    Hash: b1b5a334235024991861\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -1202,7 +1202,7 @@ Child 1 chunks:\n      [967] ./index.js 101 bytes {404} [built]\n          + 3 hidden chunk modules\n Child 2 chunks:\n-    Hash: 2cb29d802335a636bfe0\n+    Hash: f7171095df531da24021\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n            Asset       Size  Chunks             Chunk Names\n@@ -1219,7 +1219,7 @@ Child 2 chunks:\n      [967] ./index.js 101 bytes {404} [built]\n          + 7 hidden chunk modules\n Child 3 chunks:\n-    Hash: e91a7c10571980ba6e97\n+    Hash: 46ebc6e59d1b60e9b8ba\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n             Asset       Size  Chunks             Chunk Names\n@@ -1238,7 +1238,7 @@ Child 3 chunks:\n      [967] ./index.js 101 bytes {404} [built]\n          + 7 hidden chunk modules\n Child 4 chunks:\n-    Hash: e8d106b8ae91a1ba6f31\n+    Hash: 9ee395c9a44fadf020be\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n             Asset       Size  Chunks             Chunk Names\n@@ -1261,7 +1261,7 @@ Child 4 chunks:\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules 1`] = `\n-\"Hash: 5272855cf741a099184b\n+\"Hash: 14d7311174a405d5243f\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -1291,7 +1291,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules-default 1`] = `\n-\"Hash: 5272855cf741a099184b\n+\"Hash: 14d7311174a405d5243f\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -1316,7 +1316,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n-\"Hash: cbea15cf8a18237bb976\n+\"Hash: 2a2bff40bcaf79213d7a\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n Entrypoint main = main.js\n@@ -1453,7 +1453,7 @@ If you don't want to include a polyfill, you can use an empty module like this:\n `;\n \n exports[`StatsTestCases should print correct stats for module-reasons 1`] = `\n-\"Hash: 3584c47f06ef83e85f02\n+\"Hash: d7522b75c43f47744105\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -1577,7 +1577,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin 1`] = `\n-\"Hash: d9284c99dd70648f877b\n+\"Hash: ac118c65c3de13d240ee\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset       Size    Chunks             Chunk Names\n@@ -1592,7 +1592,7 @@ Entrypoint entry = vendor.js entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin-async 1`] = `\n-\"Hash: 3d9d37223d309e87c0f3\n+\"Hash: 3e5a8e10c5781110eb35\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n           Asset       Size          Chunks             Chunk Names\n@@ -1607,7 +1607,7 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for no-emit-on-errors-plugin-with-child-error 1`] = `\n-\"Hash: bdb0fa55f85914c926fc\n+\"Hash: 78e7051ed1791913de0f\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks  Chunk Names\n@@ -1633,7 +1633,7 @@ Child child:\n `;\n \n exports[`StatsTestCases should print correct stats for optimize-chunks 1`] = `\n-\"Hash: 1eedd45805deaebab010\n+\"Hash: 4f7e6948b648cba64ac3\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n             Asset       Size        Chunks             Chunk Names\n@@ -1703,9 +1703,9 @@ You may need an appropriate loader to handle this file type.\n `;\n \n exports[`StatsTestCases should print correct stats for performance-different-mode-and-target 1`] = `\n-\"Hash: b5b7dc3f716757ac39e4284311145d0e89bc8d5bb34e55bc73b329c4ce44855529f953e14dba90ccf35880b825f42ff8f380855529f953e14dba90ccb34e55bc73b329c4ce44\n+\"Hash: 1f313757124567a274340b3ddbd7ba016713a6acc849ca5f7a17ffbe2c1543b641f4cb44e48f5a218f5b4acc2df6ab17a38e43b641f4cb44e48f5a21c849ca5f7a17ffbe2c15\n Child\n-    Hash: b5b7dc3f716757ac39e4\n+    Hash: 1f313757124567a27434\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                  Asset     Size  Chunks                    Chunk Names\n@@ -1728,7 +1728,7 @@ Child\n     For more info visit https://webpack.js.org/guides/code-splitting/\n \n Child\n-    Hash: 284311145d0e89bc8d5b\n+    Hash: 0b3ddbd7ba016713a6ac\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                        Asset     Size  Chunks                    Chunk Names\n@@ -1751,39 +1751,39 @@ Child\n     For more info visit https://webpack.js.org/guides/code-splitting/\n \n Child\n-    Hash: b34e55bc73b329c4ce44\n+    Hash: c849ca5f7a17ffbe2c15\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                      Asset     Size  Chunks             Chunk Names\n     no-warning.pro-node.js  294 KiB   {404}  [emitted]  main\n     Entrypoint main = no-warning.pro-node.js\n     [967] ./index.js 293 KiB {404} [built]\n Child\n-    Hash: 855529f953e14dba90cc\n+    Hash: 43b641f4cb44e48f5a21\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                     Asset      Size  Chunks             Chunk Names\n     no-warning.dev-web.js  1.72 MiB  {main}  [emitted]  main\n     Entrypoint main = no-warning.dev-web.js\n     [./index.js] 293 KiB {main} [built]\n Child\n-    Hash: f35880b825f42ff8f380\n+    Hash: 8f5b4acc2df6ab17a38e\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                      Asset      Size  Chunks             Chunk Names\n     no-warning.dev-node.js  1.72 MiB  {main}  [emitted]  main\n     Entrypoint main = no-warning.dev-node.js\n     [./index.js] 293 KiB {main} [built]\n Child\n-    Hash: 855529f953e14dba90cc\n+    Hash: 43b641f4cb44e48f5a21\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                                    Asset      Size  Chunks                    Chunk Names\n     no-warning.dev-web-with-limit-set.js  1.72 MiB  {main}  [emitted]  [big]  main\n     Entrypoint main [big] = no-warning.dev-web-with-limit-set.js\n     [./index.js] 293 KiB {main} [built]\n Child\n-    Hash: b34e55bc73b329c4ce44\n+    Hash: c849ca5f7a17ffbe2c15\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                                  Asset     Size  Chunks                    Chunk Names\n@@ -1990,7 +1990,7 @@ chunk {855} normal.js (normal) 0 bytes [rendered]\"\n `;\n \n exports[`StatsTestCases should print correct stats for preset-detailed 1`] = `\n-\"Hash: 5f11c57a419095d174ec\n+\"Hash: 71702b22a6d262080c63\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n PublicPath: (none)\n@@ -2057,7 +2057,7 @@ exports[`StatsTestCases should print correct stats for preset-none-array 1`] = `\n exports[`StatsTestCases should print correct stats for preset-none-error 1`] = `\"\"`;\n \n exports[`StatsTestCases should print correct stats for preset-normal 1`] = `\n-\"Hash: 5f11c57a419095d174ec\n+\"Hash: 71702b22a6d262080c63\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n@@ -2140,7 +2140,7 @@ Entrypoints:\n `;\n \n exports[`StatsTestCases should print correct stats for preset-verbose 1`] = `\n-\"Hash: 5f11c57a419095d174ec\n+\"Hash: 71702b22a6d262080c63\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n PublicPath: (none)\n@@ -2193,7 +2193,7 @@ chunk {911} 911.js 54 bytes <{404}> >{130}< [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for resolve-plugin-context 1`] = `\n-\"Hash: 61b406bd5d9004a266bd\n+\"Hash: 8e78afb15ae6594a33e2\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -2207,7 +2207,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for reverse-sort-modules 1`] = `\n-\"Hash: 5272855cf741a099184b\n+\"Hash: 14d7311174a405d5243f\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -2279,7 +2279,7 @@ Entrypoint e2 = runtime.js e2.js\"\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-bailouts 1`] = `\n-\"Hash: 97546b2ed8374628b669\n+\"Hash: 0a87ab378771fc91a701\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n Entrypoint index = index.js\n@@ -2308,9 +2308,9 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-multi 1`] = `\n-\"Hash: 210261264c921cff485db47b4774457db5d1be7b\n+\"Hash: 688d8b568919cbd9a11213b4b115124c0312047a\n Child\n-    Hash: 210261264c921cff485d\n+    Hash: 688d8b568919cbd9a112\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     Entrypoint first = vendor.js first.js\n@@ -2328,7 +2328,7 @@ Child\n     [885] ./common2.js 25 bytes {87} {603} [built]\n         + 10 hidden modules\n Child\n-    Hash: b47b4774457db5d1be7b\n+    Hash: 13b4b115124c0312047a\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     Entrypoint first = vendor.js first.js\n@@ -2355,7 +2355,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-issue-7428 1`] = `\n-\"Hash: 64e0056d77ef8469f0ad\n+\"Hash: b4afab758fa19b485ba6\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n@@ -2404,7 +2404,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for side-effects-simple-unused 1`] = `\n-\"Hash: 411fa2950b601ee544e5\n+\"Hash: 7f20386a9daa52bf7114\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -2436,7 +2436,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for simple 1`] = `\n-\"Hash: 64f637d029de53a2871a\n+\"Hash: 5051aed06543e2b31cc0\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -2446,7 +2446,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for simple-more-info 1`] = `\n-\"Hash: 36a766715fbd1a1c3374\n+\"Hash: 41981cf69b6f76c3c874\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n PublicPath: (none)\n@@ -3414,7 +3414,7 @@ chunk {784} default/784.js 110 bytes <{404}> ={329}= ={456}= [rendered] split ch\n `;\n \n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n-\"Hash: f2e42191e5c2d8b40c9e\n+\"Hash: a3acb33e66e750f824f9\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -3452,7 +3452,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for warnings-terser 1`] = `\n-\"Hash: be2eec74fe1f8345da56\n+\"Hash: c96fbf67b17eab033a75\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -3475,36 +3475,36 @@ WARNING in Terser Plugin: Dropping unused function someUnRemoteUsedFunction5 [./\n `;\n \n exports[`StatsTestCases should print correct stats for wasm-explorer-examples-sync 1`] = `\n-\"Hash: 38d3c361a0897a2362e7\n+\"Hash: 47b0ccb957697477ebb0\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n                            Asset       Size  Chunks             Chunk Names\n+06bbff7f9ffc47aee5b2.module.wasm  132 bytes   {286}  [emitted]\n                    147.bundle.js  844 bytes   {147}  [emitted]\n-18de7b6bab402277b2ca.module.wasm   95 bytes   {827}  [emitted]\n-2194eba49084ca9f715b.module.wasm  132 bytes   {286}  [emitted]\n                    286.bundle.js  431 bytes   {286}  [emitted]\n+3136d1cffcb575eb6714.module.wasm  126 bytes   {827}  [emitted]\n                    363.bundle.js  431 bytes   {363}  [emitted]\n                    480.bundle.js  329 bytes   {480}  [emitted]\n-4d49250abd149313ea7a.module.wasm  226 bytes   {147}  [emitted]\n-52a4420208d65f0d8a54.module.wasm  133 bytes   {147}  [emitted]\n-621a5ff1152e883ce251.module.wasm  511 bytes   {363}  [emitted]\n-6fbb79cdc6ab12e575f7.module.wasm  126 bytes   {827}  [emitted]\n                    827.bundle.js   3.93 KiB   {827}  [emitted]\n+b55d07a57948324016ca.module.wasm  511 bytes   {363}  [emitted]\n                        bundle.js   13.2 KiB    {73}  [emitted]  main-1df31ce3\n+f5547c837a1129d5a8d4.module.wasm  133 bytes   {147}  [emitted]\n+f6c45b3a19cc49886819.module.wasm   95 bytes   {827}  [emitted]\n+fd7f6dc0e275592cdc16.module.wasm  226 bytes   {147}  [emitted]\n Entrypoint main = bundle.js\n chunk {73} bundle.js (main-1df31ce3) 586 bytes (javascript) 6.53 KiB (runtime) [entry] [rendered]\n  [967] ./index.js 586 bytes {73} [built]\n      + 7 hidden chunk modules\n-chunk {147} 147.bundle.js, 52a4420208d65f0d8a54.module.wasm, 4d49250abd149313ea7a.module.wasm 205 bytes (javascript) 444 bytes (webassembly) [rendered]\n+chunk {147} 147.bundle.js, f5547c837a1129d5a8d4.module.wasm, fd7f6dc0e275592cdc16.module.wasm 205 bytes (javascript) 444 bytes (webassembly) [rendered]\n  [412] ./fact.wasm 100 bytes (javascript) 154 bytes (webassembly) {147} [built]\n  [987] ./fast-math.wasm 105 bytes (javascript) 290 bytes (webassembly) {147} [built]\n-chunk {286} 286.bundle.js, 2194eba49084ca9f715b.module.wasm 100 bytes (javascript) 156 bytes (webassembly) [rendered]\n+chunk {286} 286.bundle.js, 06bbff7f9ffc47aee5b2.module.wasm 100 bytes (javascript) 156 bytes (webassembly) [rendered]\n  [286] ./Q_rsqrt.wasm 100 bytes (javascript) 156 bytes (webassembly) {286} [built]\n-chunk {363} 363.bundle.js, 621a5ff1152e883ce251.module.wasm 100 bytes (javascript) 531 bytes (webassembly) [rendered]\n+chunk {363} 363.bundle.js, b55d07a57948324016ca.module.wasm 100 bytes (javascript) 531 bytes (webassembly) [rendered]\n  [363] ./duff.wasm 100 bytes (javascript) 531 bytes (webassembly) {363} [built]\n chunk {480} 480.bundle.js 34 bytes [rendered] split chunk (cache group: defaultVendors)\n  [480] ./node_modules/env.js 34 bytes {480} [built]\n-chunk {827} 827.bundle.js, 18de7b6bab402277b2ca.module.wasm, 6fbb79cdc6ab12e575f7.module.wasm 1.6 KiB (javascript) 274 bytes (webassembly) [rendered]\n+chunk {827} 827.bundle.js, f6c45b3a19cc49886819.module.wasm, 3136d1cffcb575eb6714.module.wasm 1.6 KiB (javascript) 274 bytes (webassembly) [rendered]\n  [827] ./tests.js 1.4 KiB {827} [built]\n  [896] ./popcnt.wasm 100 bytes (javascript) 120 bytes (webassembly) {827} [built]\n  [999] ./testFunction.wasm 100 bytes (javascript) 154 bytes (webassembly) {827} [built]"
      },
      {
        "sha": "d842ce96ec3912a2f1e0b5683a8929255a51c8e4",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 10,
        "deletions": 16,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/c5ad6df793c8423d4e83c736db712a8095209b48/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/c5ad6df793c8423d4e83c736db712a8095209b48/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=c5ad6df793c8423d4e83c736db712a8095209b48",
        "patch": "@@ -84,25 +84,11 @@\n   resolved \"https://registry.yarnpkg.com/@types/prettier/-/prettier-1.13.2.tgz#ffe96278e712a8d4e467e367a338b05e22872646\"\n   integrity sha512-k6MCN8WuDiCj6O+UJsVMbrreZxkbrhQbO02oDj6yuRu8UAkp0MDdEcDKif8/gBKuJbT84kkO+VHQAqXkumEklg==\n \n-\"@types/source-list-map@*\":\n-  version \"0.1.2\"\n-  resolved \"https://registry.yarnpkg.com/@types/source-list-map/-/source-list-map-0.1.2.tgz#0078836063ffaf17412349bba364087e0ac02ec9\"\n-  integrity sha512-K5K+yml8LTo9bWJI/rECfIPrGgxdpeNbj+d53lwN4QjW1MCwlkhUms+gtdzigTeUyBr09+u8BwOIY3MXvHdcsA==\n-\n \"@types/tapable@^1.0.1\":\n   version \"1.0.4\"\n   resolved \"https://registry.yarnpkg.com/@types/tapable/-/tapable-1.0.4.tgz#b4ffc7dc97b498c969b360a41eee247f82616370\"\n   integrity sha512-78AdXtlhpCHT0K3EytMpn4JNxaf5tbqbLcbIRoQIHzpTIyjpxLQKRoxU55ujBXAtg3Nl2h/XWvfDa9dsMOd0pQ==\n \n-\"@types/webpack-sources@^0.1.4\":\n-  version \"0.1.5\"\n-  resolved \"https://registry.yarnpkg.com/@types/webpack-sources/-/webpack-sources-0.1.5.tgz#be47c10f783d3d6efe1471ff7f042611bd464a92\"\n-  integrity sha512-zfvjpp7jiafSmrzJ2/i3LqOyTYTuJ7u1KOXlKgDlvsj9Rr0x7ZiYu5lZbXwobL7lmsRNtPXlBfmaUD8eU2Hu8w==\n-  dependencies:\n-    \"@types/node\" \"*\"\n-    \"@types/source-list-map\" \"*\"\n-    source-map \"^0.6.1\"\n-\n \"@webassemblyjs/ast@1.7.11\":\n   version \"1.7.11\"\n   resolved \"https://registry.yarnpkg.com/@webassemblyjs/ast/-/ast-1.7.11.tgz#b988582cafbb2b095e8b556526f30c90d057cace\"\n@@ -6500,7 +6486,7 @@ sort-keys@^1.0.0:\n   dependencies:\n     is-plain-obj \"^1.0.0\"\n \n-source-list-map@^2.0.0:\n+source-list-map@^2.0.0, source-list-map@^2.0.1:\n   version \"2.0.1\"\n   resolved \"https://registry.yarnpkg.com/source-list-map/-/source-list-map-2.0.1.tgz#3993bd873bfc48479cca9ea3a547835c7c154b34\"\n   integrity sha512-qnQ7gVMxGNxsiL4lEuJwe/To8UnK7fAnmbGEEH8RpLouuKbeEm0lhbQVFIrNSuB+G7tVrAlVsZgETT5nljf+Iw==\n@@ -7240,7 +7226,15 @@ webidl-conversions@^4.0.2:\n   resolved \"https://registry.yarnpkg.com/webidl-conversions/-/webidl-conversions-4.0.2.tgz#a855980b1f0b6b359ba1d5d9fb39ae941faa63ad\"\n   integrity sha512-YQ+BmxuTgd6UXZW3+ICGfyqRyHXVlD5GtQr5+qjiNW7bF0cqrzX500HVXPBOvgXb5YnzDd+h0zqyv61KUD7+Sg==\n \n-webpack-sources@^1.1.0, webpack-sources@^1.3.0:\n+webpack-sources@2.0.0-beta.0:\n+  version \"2.0.0-beta.0\"\n+  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-2.0.0-beta.0.tgz#f57b7a466f015132c70d8125d6d36993968854d5\"\n+  integrity sha512-d7mJcjNdNa0hTOzGNdhIM/lVU+Xp1UxTVh42rEjH2/0U/deiaUXJtzj1npqo4TJzEjnXHaIvrMDgWwM/mpiQMw==\n+  dependencies:\n+    source-list-map \"^2.0.1\"\n+    source-map \"~0.6.1\"\n+\n+webpack-sources@^1.1.0:\n   version \"1.3.0\"\n   resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-1.3.0.tgz#2a28dcb9f1f45fe960d8f1493252b5ee6530fa85\"\n   integrity sha512-OiVgSrbGu7NEnEvQJJgdSFPl2qWKkWq5lHMhgiToIiN9w34EBnjYzSYs+VbL5KoYiLNtFFa7BZIKxRED3I32pA=="
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8547",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8547/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8547/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8547/events",
    "html_url": "https://github.com/webpack/webpack/pull/8547",
    "id": 393747202,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjQwNjgwMjM4",
    "number": 8547,
    "title": "Optimize absoluteToRequest",
    "user": {
      "login": "Connormiha",
      "id": 4091305,
      "node_id": "MDQ6VXNlcjQwOTEzMDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4091305?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Connormiha",
      "html_url": "https://github.com/Connormiha",
      "followers_url": "https://api.github.com/users/Connormiha/followers",
      "following_url": "https://api.github.com/users/Connormiha/following{/other_user}",
      "gists_url": "https://api.github.com/users/Connormiha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Connormiha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Connormiha/subscriptions",
      "organizations_url": "https://api.github.com/users/Connormiha/orgs",
      "repos_url": "https://api.github.com/users/Connormiha/repos",
      "events_url": "https://api.github.com/users/Connormiha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Connormiha/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2018-12-23T12:47:00Z",
    "updated_at": "2018-12-26T10:32:45Z",
    "closed_at": "2018-12-26T10:32:42Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8547",
      "html_url": "https://github.com/webpack/webpack/pull/8547",
      "diff_url": "https://github.com/webpack/webpack/pull/8547.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8547.patch",
      "merged_at": "2018-12-26T10:32:41Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\nI decomposed function `absoluteToRequest` to avoid needless regexp checks in performance reason.\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nRefactoring\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nI added a few tests before refactoring.\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nNo\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8547/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "64ddae5dd181100f6b80c6d2f29041e8eed5badd",
        "filename": "lib/util/identifier.js",
        "status": "modified",
        "additions": 45,
        "deletions": 23,
        "changes": 68,
        "blob_url": "https://github.com/webpack/webpack/blob/2143bd6519d17ad0ec66038870958dda9dbd2ae9/lib%2Futil%2Fidentifier.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2143bd6519d17ad0ec66038870958dda9dbd2ae9/lib%2Futil%2Fidentifier.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Fidentifier.js?ref=2143bd6519d17ad0ec66038870958dda9dbd2ae9",
        "patch": "@@ -6,6 +6,10 @@\n \n const path = require(\"path\");\n \n+const WINDOWS_ABS_PATH_REGEXP = /^[a-zA-Z]:\\\\/;\n+const SEGEMENTS_SPLIT_REGEXP = /([|!])/;\n+const WINDOWS_PATH_SEPARATOR_REGEXP = /\\\\/g;\n+\n /**\n  * @typedef {Object} MakeRelativePathsCache\n  * @property {Map<string, Map<string, string>>=} relativePaths\n@@ -17,32 +21,50 @@ const path = require(\"path\");\n  * @returns {string} relative path in request style\n  */\n const absoluteToRequest = (context, maybeAbsolutePath) => {\n-\tif (/^\\/.*\\/$/.test(maybeAbsolutePath)) {\n-\t\t// this 'path' is actually a regexp generated by dynamic requires.\n-\t\t// Don't treat it as an absolute path.\n-\t\treturn maybeAbsolutePath;\n+\tif (maybeAbsolutePath[0] === \"/\") {\n+\t\tif (\n+\t\t\tmaybeAbsolutePath.length > 1 &&\n+\t\t\tmaybeAbsolutePath[maybeAbsolutePath.length - 1] === \"/\"\n+\t\t) {\n+\t\t\t// this 'path' is actually a regexp generated by dynamic requires.\n+\t\t\t// Don't treat it as an absolute path.\n+\t\t\treturn maybeAbsolutePath;\n+\t\t}\n+\n+\t\tconst querySplitPos = maybeAbsolutePath.indexOf(\"?\");\n+\t\tlet resource =\n+\t\t\tquerySplitPos === -1\n+\t\t\t\t? maybeAbsolutePath\n+\t\t\t\t: maybeAbsolutePath.slice(0, querySplitPos);\n+\t\tresource = path.posix.relative(context, resource);\n+\t\tif (!resource.startsWith(\"../\")) {\n+\t\t\tresource = \"./\" + resource;\n+\t\t}\n+\t\treturn querySplitPos === -1\n+\t\t\t? resource\n+\t\t\t: resource + maybeAbsolutePath.slice(querySplitPos);\n \t}\n-\tif (/^[a-zA-Z]:\\\\/.test(maybeAbsolutePath)) {\n-\t\tconst splitPath = maybeAbsolutePath.split(\"?\", 2);\n-\t\tsplitPath[0] = path.win32.relative(context, splitPath[0]);\n-\t\tif (!/^[a-zA-Z]:\\\\/.test(splitPath[0])) {\n-\t\t\tsplitPath[0] = splitPath[0].replace(/\\\\/g, \"/\");\n-\t\t\tif (!/^\\.\\.\\//.test(splitPath[0])) {\n-\t\t\t\tsplitPath[0] = \"./\" + splitPath[0];\n+\n+\tif (WINDOWS_ABS_PATH_REGEXP.test(maybeAbsolutePath)) {\n+\t\tconst querySplitPos = maybeAbsolutePath.indexOf(\"?\");\n+\t\tlet resource =\n+\t\t\tquerySplitPos === -1\n+\t\t\t\t? maybeAbsolutePath\n+\t\t\t\t: maybeAbsolutePath.slice(0, querySplitPos);\n+\t\tresource = path.win32.relative(context, resource);\n+\t\tif (!WINDOWS_ABS_PATH_REGEXP.test(resource)) {\n+\t\t\tresource = resource.replace(WINDOWS_PATH_SEPARATOR_REGEXP, \"/\");\n+\t\t\tif (!resource.startsWith(\"../\")) {\n+\t\t\t\tresource = \"./\" + resource;\n \t\t\t}\n \t\t}\n-\t\treturn splitPath.join(\"?\");\n-\t} else if (/^\\//.test(maybeAbsolutePath)) {\n-\t\tconst splitPath = maybeAbsolutePath.split(\"?\", 2);\n-\t\tsplitPath[0] = path.posix.relative(context, splitPath[0]);\n-\t\tif (!/^\\.\\.\\//.test(splitPath[0])) {\n-\t\t\tsplitPath[0] = \"./\" + splitPath[0];\n-\t\t}\n-\t\treturn splitPath.join(\"?\");\n-\t} else {\n-\t\t// not an absolute path\n-\t\treturn maybeAbsolutePath;\n+\t\treturn querySplitPos === -1\n+\t\t\t? resource\n+\t\t\t: resource + maybeAbsolutePath.slice(querySplitPos);\n \t}\n+\n+\t// not an absolute path\n+\treturn maybeAbsolutePath;\n };\n \n /**\n@@ -53,7 +75,7 @@ const absoluteToRequest = (context, maybeAbsolutePath) => {\n  */\n const _makePathsRelative = (context, identifier) => {\n \treturn identifier\n-\t\t.split(/([|!])/)\n+\t\t.split(SEGEMENTS_SPLIT_REGEXP)\n \t\t.map(str => absoluteToRequest(context, str))\n \t\t.join(\"\");\n };"
      },
      {
        "sha": "5c56e406be023e581baf6e737ed3fa4a00a0e20c",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/2143bd6519d17ad0ec66038870958dda9dbd2ae9/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/2143bd6519d17ad0ec66038870958dda9dbd2ae9/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=2143bd6519d17ad0ec66038870958dda9dbd2ae9",
        "patch": "@@ -1316,18 +1316,18 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n-\"Hash: bc501c6c28c82134fc4f\n+\"Hash: bed53a46b3968aeca1fa\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n Entrypoint main = main.js\n chunk {404} main.js (main) 12 bytes (javascript) 4.41 KiB (runtime) [entry] [rendered]\n  [967] ./index.js 12 bytes {404} [built]\n      + 7 hidden chunk modules\n chunk {687} 687.js 68 bytes [rendered]\n+ [476] ./node_modules/a/1.png 51 bytes {687} [built] [1 asset]\n  [687] ./node_modules/a/index.js 17 bytes {687} [built]\n- [777] ./node_modules/a/1.png 51 bytes {687} [built] [1 asset]\n+[476] ./node_modules/a/1.png 51 bytes {687} [built] [1 asset]\n [687] ./node_modules/a/index.js 17 bytes {687} [built]\n-[777] ./node_modules/a/1.png 51 bytes {687} [built] [1 asset]\n [967] ./index.js 12 bytes {404} [built]\n     + 7 hidden modules\"\n `;"
      },
      {
        "sha": "7099c662da8dca5f6a5a6bd96751a1775a44f5aa",
        "filename": "test/identifier.unittest.js",
        "status": "modified",
        "additions": 47,
        "deletions": 10,
        "changes": 57,
        "blob_url": "https://github.com/webpack/webpack/blob/2143bd6519d17ad0ec66038870958dda9dbd2ae9/test%2Fidentifier.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2143bd6519d17ad0ec66038870958dda9dbd2ae9/test%2Fidentifier.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fidentifier.unittest.js?ref=2143bd6519d17ad0ec66038870958dda9dbd2ae9",
        "patch": "@@ -6,17 +6,54 @@ const identifierUtil = require(\"../lib/util/identifier\");\n describe(\"util/identifier\", () => {\n \tdescribe(\"makePathsRelative\", () => {\n \t\tdescribe(\"given a context and a pathConstruct\", () => {\n-\t\t\tlet context, pathConstruct, expected;\n-\t\t\tbeforeEach(() => {\n-\t\t\t\tcontext = \"/some/dir/\";\n-\t\t\t\tpathConstruct = \"/some/dir/to/somewhere|some/other/dir!../more/dir\";\n-\t\t\t\texpected = \"./to/somewhere|some/other/dir!../more/dir\";\n-\t\t\t});\n-\n \t\t\tit(\"computes the correct relative results for the path construct\", () => {\n-\t\t\t\texpect(identifierUtil.makePathsRelative(context, pathConstruct)).toBe(\n-\t\t\t\t\texpected\n-\t\t\t\t);\n+\t\t\t\t[\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"/some/dir/\",\n+\t\t\t\t\t\t\"/some/dir/to/somewhere|some/other/dir!../more/dir\",\n+\t\t\t\t\t\t\"./to/somewhere|some/other/dir!../more/dir\"\n+\t\t\t\t\t],\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"/dir/\",\n+\t\t\t\t\t\t\"/dir/to/somewhere|some/other/dir!../more/dir\",\n+\t\t\t\t\t\t\"./to/somewhere|some/other/dir!../more/dir\"\n+\t\t\t\t\t],\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"/\",\n+\t\t\t\t\t\t\"/dir/to/somewhere|some/other/dir!../more/dir\",\n+\t\t\t\t\t\t\"./dir/to/somewhere|some/other/dir!../more/dir\"\n+\t\t\t\t\t],\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"c:\\\\some\\\\dir\\\\\",\n+\t\t\t\t\t\t\"c:\\\\some\\\\dir\\\\to\\\\somewhere|some/other/dir!../more/dir\",\n+\t\t\t\t\t\t\"./to/somewhere|some/other/dir!../more/dir\"\n+\t\t\t\t\t],\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"c:\\\\some\\\\dir\\\\\",\n+\t\t\t\t\t\t\"C:\\\\some\\\\dir\\\\to\\\\somewhere|some/other/dir!../more/dir\",\n+\t\t\t\t\t\t\"./to/somewhere|some/other/dir!../more/dir\"\n+\t\t\t\t\t],\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"C:\\\\some\\\\dir\",\n+\t\t\t\t\t\t\"C:\\\\some\\\\dir\\\\to\\\\somewhere|some/other/dir!../more/dir\",\n+\t\t\t\t\t\t\"./to/somewhere|some/other/dir!../more/dir\"\n+\t\t\t\t\t],\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"C:\\\\\\\\some\\\\dir\",\n+\t\t\t\t\t\t\"c:\\\\some\\\\\\\\dir\\\\to\\\\\\\\somewhere|some/other/dir!../more/dir\",\n+\t\t\t\t\t\t\"./to/somewhere|some/other/dir!../more/dir\"\n+\t\t\t\t\t],\n+\t\t\t\t\t[\n+\t\t\t\t\t\t\"/dir\",\n+\t\t\t\t\t\t\"/dir/to/somewhere??ref-123\",\n+\t\t\t\t\t\t\"./to/somewhere??ref-123\"\n+\t\t\t\t\t]\n+\t\t\t\t].forEach(([context, pathConstruct, expected]) => {\n+\n+\t\t\t\t\t\texpect(identifierUtil.makePathsRelative(context, pathConstruct)).toBe(\n+\t\t\t\t\t\t\texpected\n+\t\t\t\t\t\t);\n+\t\t\t\t});\n \t\t\t});\n \t\t});\n \t});"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8168",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8168/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8168/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8168/events",
    "html_url": "https://github.com/webpack/webpack/pull/8168",
    "id": 368824811,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjIxOTExNDM2",
    "number": 8168,
    "title": "feat(serialization): serialize errors",
    "user": {
      "login": "michael-ciniawsky",
      "id": 5419992,
      "node_id": "MDQ6VXNlcjU0MTk5OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5419992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michael-ciniawsky",
      "html_url": "https://github.com/michael-ciniawsky",
      "followers_url": "https://api.github.com/users/michael-ciniawsky/followers",
      "following_url": "https://api.github.com/users/michael-ciniawsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/michael-ciniawsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michael-ciniawsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michael-ciniawsky/subscriptions",
      "organizations_url": "https://api.github.com/users/michael-ciniawsky/orgs",
      "repos_url": "https://api.github.com/users/michael-ciniawsky/repos",
      "events_url": "https://api.github.com/users/michael-ciniawsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michael-ciniawsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2018-10-10T19:49:30Z",
    "updated_at": "2018-10-29T22:24:06Z",
    "closed_at": "2018-10-29T22:23:56Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8168",
      "html_url": "https://github.com/webpack/webpack/pull/8168",
      "diff_url": "https://github.com/webpack/webpack/pull/8168.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8168.patch",
      "merged_at": "2018-10-29T22:23:56Z"
    },
    "body": "**What kind of change does this PR introduce?**\r\n\r\n- [x] Feature\r\n\r\n**Did you add tests for your changes?**\r\n\r\n- [ ] Existing (needs additonal tests)\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\n- [x] No\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\n- None\r\n\r\n### TODO\r\n\r\n---\r\n- [x] `ErrorObjectSerializer`\r\n- [x] Preserve `err.stack`\r\n- [x] Remove repetitive fields already serialized in the base class\r\n---\r\n\r\n- [x] `AsyncDependencyToInitialChunkError`\r\n- [x] `CaseSensitiveModulesWarning`\r\n- [x] `ChunkRenderError`\r\n- [x] `CommentCompilationWarning`\r\n- [x] `ConcurrentCompilationError`\r\n- [x] `EntryModuleNotFoundError`\r\n- [x] `HarmonyLinkingError`\r\n- [x] `ModuleBuildError`\r\n- [x] `ModuleDependencyError`\r\n- [x] `ModuleDependencyWarning`\r\n- [x] `ModuleError`\r\n- [x] `ModuleNotFoundError`\r\n- [x] `ModuleWarning`\r\n- [x] `ModuleParseError`\r\n- [x] `NoModeWarning`\r\n- [x]  `UnsupportedFeatureWarning`\r\n- [x] `WebpackError`\r\n- [x] `performance/AssetsOverSizeLimitWarning`\r\n- [x] `performance/EntrypointsOverSizeLimitWarning`\r\n- [x] `performance/NoAsyncChunksWarning`\r\n- [x] `wasm/WebAssemblyInInitialChunkError`\r\n- [x] `wasm/UnsupportedWebAssemblyFeatureError`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8168/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8168/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "7aa47c763b8dbc421807ea4ff90c04587e8d31a5",
        "filename": "lib/CommentCompilationWarning.js",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FCommentCompilationWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FCommentCompilationWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCommentCompilationWarning.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -6,28 +6,30 @@\n \"use strict\";\n \n const WebpackError = require(\"./WebpackError\");\n-\n-/** @typedef {import(\"./Module\")} Module */\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n \n class CommentCompilationWarning extends WebpackError {\n \t/**\n \t *\n \t * @param {string} message warning message\n-\t * @param {Module} module affected module\n \t * @param {DependencyLocation} loc affected lines of code\n \t */\n-\tconstructor(message, module, loc) {\n+\tconstructor(message, loc) {\n \t\tsuper(message);\n \n \t\tthis.name = \"CommentCompilationWarning\";\n \n-\t\tthis.module = module;\n \t\tthis.loc = loc;\n \n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n }\n \n+makeSerializable(\n+\tCommentCompilationWarning,\n+\t\"webpack/lib/CommentCompilationWarning\"\n+);\n+\n module.exports = CommentCompilationWarning;"
      },
      {
        "sha": "268f8d0a82c8a4eb2bc4d38ee88ec9ce35fec99f",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 0,
        "deletions": 6,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -594,12 +594,6 @@ class Compilation {\n \t\t\t\tif (err) return callback(err);\n \n \t\t\t\tif (!needBuild) {\n-\t\t\t\t\tfor (const err of module.errors) {\n-\t\t\t\t\t\tthis.errors.push(err);\n-\t\t\t\t\t}\n-\t\t\t\t\tfor (const err of module.warnings) {\n-\t\t\t\t\t\tthis.warnings.push(err);\n-\t\t\t\t\t}\n \t\t\t\t\tif (currentProfile !== undefined) {\n \t\t\t\t\t\tcurrentProfile.markBuildingEnd();\n \t\t\t\t\t}"
      },
      {
        "sha": "14792e2730fe9403e7c343d81399a036c12b84c9",
        "filename": "lib/JavascriptParserHelpers.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FJavascriptParserHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FJavascriptParserHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FJavascriptParserHelpers.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -72,7 +72,7 @@ exports.expressionIsUnsupported = (parser, message) => {\n \t\tparser.state.current.addDependency(dep);\n \t\tif (!parser.state.module) return;\n \t\tparser.state.module.warnings.push(\n-\t\t\tnew UnsupportedFeatureWarning(parser.state.module, message, expr.loc)\n+\t\t\tnew UnsupportedFeatureWarning(message, expr.loc)\n \t\t);\n \t\treturn true;\n \t};"
      },
      {
        "sha": "323e360cded38d8930e880d4e878ddf6c6dd3dc9",
        "filename": "lib/ModuleBuildError.js",
        "status": "modified",
        "additions": 24,
        "deletions": 2,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleBuildError.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleBuildError.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleBuildError.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -7,23 +7,28 @@\n \n const { cutOffLoaderExecution } = require(\"./ErrorHelpers\");\n const WebpackError = require(\"./WebpackError\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n class ModuleBuildError extends WebpackError {\n-\tconstructor(module, err, { from = null } = {}) {\n+\tconstructor(err, { from = null } = {}) {\n \t\tlet message = \"Module build failed\";\n \t\tlet details = undefined;\n+\n \t\tif (from) {\n \t\t\tmessage += ` (from ${from}):\\n`;\n \t\t} else {\n \t\t\tmessage += \": \";\n \t\t}\n+\n \t\tif (err !== null && typeof err === \"object\") {\n \t\t\tif (typeof err.stack === \"string\" && err.stack) {\n \t\t\t\tconst stack = cutOffLoaderExecution(err.stack);\n+\n \t\t\t\tif (!err.hideStack) {\n \t\t\t\t\tmessage += stack;\n \t\t\t\t} else {\n \t\t\t\t\tdetails = stack;\n+\n \t\t\t\t\tif (typeof err.message === \"string\" && err.message) {\n \t\t\t\t\t\tmessage += err.message;\n \t\t\t\t\t} else {\n@@ -43,11 +48,28 @@ class ModuleBuildError extends WebpackError {\n \n \t\tthis.name = \"ModuleBuildError\";\n \t\tthis.details = details;\n-\t\tthis.module = module;\n \t\tthis.error = err;\n \n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.error);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.error = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(ModuleBuildError, \"webpack/lib/ModuleBuildError\");\n+\n module.exports = ModuleBuildError;"
      },
      {
        "sha": "51d54877d87aea007afc97c9207c643a5da562e2",
        "filename": "lib/ModuleError.js",
        "status": "modified",
        "additions": 24,
        "deletions": 2,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleError.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleError.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleError.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -7,23 +7,27 @@\n \n const { cleanUp } = require(\"./ErrorHelpers\");\n const WebpackError = require(\"./WebpackError\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n class ModuleError extends WebpackError {\n-\tconstructor(module, err, { from = null } = {}) {\n+\tconstructor(err, { from = null } = {}) {\n \t\tlet message = \"Module Error\";\n+\n \t\tif (from) {\n \t\t\tmessage += ` (from ${from}):\\n`;\n \t\t} else {\n \t\t\tmessage += \": \";\n \t\t}\n+\n \t\tif (err && typeof err === \"object\" && err.message) {\n \t\t\tmessage += err.message;\n \t\t} else if (err) {\n \t\t\tmessage += err;\n \t\t}\n+\n \t\tsuper(message);\n+\n \t\tthis.name = \"ModuleError\";\n-\t\tthis.module = module;\n \t\tthis.error = err;\n \t\tthis.details =\n \t\t\terr && typeof err === \"object\" && err.stack\n@@ -32,6 +36,24 @@ class ModuleError extends WebpackError {\n \n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.error);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.error = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(ModuleError, \"webpack/lib/ModuleError\");\n+\n module.exports = ModuleError;"
      },
      {
        "sha": "d87af56b65f35062b0e65252d973983d26405094",
        "filename": "lib/ModuleParseError.js",
        "status": "modified",
        "additions": 28,
        "deletions": 7,
        "changes": 35,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleParseError.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleParseError.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleParseError.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -6,25 +6,27 @@\n \"use strict\";\n \n const WebpackError = require(\"./WebpackError\");\n-\n-/** @typedef {import(\"./Module\")} Module */\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n class ModuleParseError extends WebpackError {\n \t/**\n-\t * @param {Module} module the errored module\n \t * @param {string} source source code\n \t * @param {Error&any} err the parse error\n \t */\n-\tconstructor(module, source, err) {\n-\t\tlet message = \"Module parse failed: \" + err.message;\n+\tconstructor(source, err) {\n+\t\tlet message = \"Module parse failed: \" + (err && err.message);\n \t\tlet loc = undefined;\n+\n \t\tmessage += \"\\nYou may need an appropriate loader to handle this file type.\";\n+\n \t\tif (\n+\t\t\terr &&\n \t\t\terr.loc &&\n \t\t\ttypeof err.loc === \"object\" &&\n \t\t\ttypeof err.loc.line === \"number\"\n \t\t) {\n \t\t\tvar lineNumber = err.loc.line;\n+\n \t\t\tif (/[\\0\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007]/.test(source)) {\n \t\t\t\t// binary file\n \t\t\t\tmessage += \"\\n(Source code omitted for this binary file)\";\n@@ -34,25 +36,44 @@ class ModuleParseError extends WebpackError {\n \t\t\t\tconst linesBefore = sourceLines.slice(start, lineNumber - 1);\n \t\t\t\tconst theLine = sourceLines[lineNumber - 1];\n \t\t\t\tconst linesAfter = sourceLines.slice(lineNumber, lineNumber + 2);\n+\n \t\t\t\tmessage +=\n \t\t\t\t\tlinesBefore.map(l => `\\n| ${l}`).join(\"\") +\n \t\t\t\t\t`\\n> ${theLine}` +\n \t\t\t\t\tlinesAfter.map(l => `\\n| ${l}`).join(\"\");\n \t\t\t}\n+\n \t\t\tloc = { start: err.loc };\n-\t\t} else {\n+\t\t} else if (err && err.stack) {\n \t\t\tmessage += \"\\n\" + err.stack;\n \t\t}\n \n \t\tsuper(message);\n \n \t\tthis.name = \"ModuleParseError\";\n-\t\tthis.module = module;\n \t\tthis.loc = loc;\n \t\tthis.error = err;\n \n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.error);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.error = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(ModuleParseError, \"webpack/lib/ModuleParseError\");\n+\n module.exports = ModuleParseError;"
      },
      {
        "sha": "bb810ab9618b16105ba575c4c5de4f753bcef755",
        "filename": "lib/ModuleWarning.js",
        "status": "modified",
        "additions": 24,
        "deletions": 2,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FModuleWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleWarning.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -7,23 +7,27 @@\n \n const { cleanUp } = require(\"./ErrorHelpers\");\n const WebpackError = require(\"./WebpackError\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n class ModuleWarning extends WebpackError {\n-\tconstructor(module, warning, { from = null } = {}) {\n+\tconstructor(warning, { from = null } = {}) {\n \t\tlet message = \"Module Warning\";\n+\n \t\tif (from) {\n \t\t\tmessage += ` (from ${from}):\\n`;\n \t\t} else {\n \t\t\tmessage += \": \";\n \t\t}\n+\n \t\tif (warning && typeof warning === \"object\" && warning.message) {\n \t\t\tmessage += warning.message;\n \t\t} else if (warning) {\n \t\t\tmessage += warning;\n \t\t}\n+\n \t\tsuper(message);\n+\n \t\tthis.name = \"ModuleWarning\";\n-\t\tthis.module = module;\n \t\tthis.warning = warning;\n \t\tthis.details =\n \t\t\twarning && typeof warning === \"object\" && warning.stack\n@@ -32,6 +36,24 @@ class ModuleWarning extends WebpackError {\n \n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.warning);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.warning = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(ModuleWarning, \"webpack/lib/ModuleWarning\");\n+\n module.exports = ModuleWarning;"
      },
      {
        "sha": "f0c4d0b10c5cf835447bbd0bb12dfc638dc6f709",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 11,
        "deletions": 6,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -39,7 +39,6 @@ const makeSerializable = require(\"./util/makeSerializable\");\n /** @typedef {import(\"./Module\").SourceContext} SourceContext */\n /** @typedef {import(\"./RequestShortener\")} RequestShortener */\n /** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n-/** @typedef {import(\"./WebpackError\")} WebpackError */\n /** @typedef {import(\"./util/createHash\").Hash} Hash */\n \n const EARLY_RETURN_ERROR = new Error(\"flags early return is not an error\");\n@@ -69,6 +68,12 @@ class NonErrorEmittedError extends WebpackError {\n \t}\n }\n \n+makeSerializable(\n+\tNonErrorEmittedError,\n+\t\"webpack/lib/NormalModule\",\n+\t\"NonErrorEmittedError\"\n+);\n+\n /**\n  * @typedef {Object} CachedSourceEntry\n  * @property {TODO} source the generated source\n@@ -195,7 +200,7 @@ class NormalModule extends Module {\n \t\t\t\t}\n \t\t\t\tconst currentLoader = this.getCurrentLoader(loaderContext);\n \t\t\t\tthis.warnings.push(\n-\t\t\t\t\tnew ModuleWarning(this, warning, {\n+\t\t\t\t\tnew ModuleWarning(warning, {\n \t\t\t\t\t\tfrom: requestShortener.shorten(currentLoader.loader)\n \t\t\t\t\t})\n \t\t\t\t);\n@@ -206,7 +211,7 @@ class NormalModule extends Module {\n \t\t\t\t}\n \t\t\t\tconst currentLoader = this.getCurrentLoader(loaderContext);\n \t\t\t\tthis.errors.push(\n-\t\t\t\t\tnew ModuleError(this, error, {\n+\t\t\t\t\tnew ModuleError(error, {\n \t\t\t\t\t\tfrom: requestShortener.shorten(currentLoader.loader)\n \t\t\t\t\t})\n \t\t\t\t);\n@@ -313,7 +318,7 @@ class NormalModule extends Module {\n \t\t\t\t\t\terr = new NonErrorEmittedError(err);\n \t\t\t\t\t}\n \t\t\t\t\tconst currentLoader = this.getCurrentLoader(loaderContext);\n-\t\t\t\t\tconst error = new ModuleBuildError(this, err, {\n+\t\t\t\t\tconst error = new ModuleBuildError(err, {\n \t\t\t\t\t\tfrom:\n \t\t\t\t\t\t\tcurrentLoader &&\n \t\t\t\t\t\t\tcompilation.runtimeTemplate.requestShortener.shorten(\n@@ -339,7 +344,7 @@ class NormalModule extends Module {\n \t\t\t\t\t\t\t\t: \"unknown\"\n \t\t\t\t\t\t}) didn't return a Buffer or String`\n \t\t\t\t\t);\n-\t\t\t\t\tconst error = new ModuleBuildError(this, err);\n+\t\t\t\t\tconst error = new ModuleBuildError(err);\n \t\t\t\t\treturn callback(error);\n \t\t\t\t}\n \n@@ -469,7 +474,7 @@ class NormalModule extends Module {\n \n \t\t\tconst handleParseError = e => {\n \t\t\t\tconst source = this._source.source();\n-\t\t\t\tconst error = new ModuleParseError(this, source, e);\n+\t\t\t\tconst error = new ModuleParseError(source, e);\n \t\t\t\tthis.markModuleAsErrored(error);\n \t\t\t\tthis._initBuildHash(compilation);\n \t\t\t\treturn callback();"
      },
      {
        "sha": "67f670dab1cd5595f5e1f78269e86e49b87ae4ca",
        "filename": "lib/UnsupportedFeatureWarning.js",
        "status": "modified",
        "additions": 7,
        "deletions": 4,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FUnsupportedFeatureWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FUnsupportedFeatureWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FUnsupportedFeatureWarning.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -6,26 +6,29 @@\n \"use strict\";\n \n const WebpackError = require(\"./WebpackError\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n-/** @typedef {import(\"./Module\")} Module */\n \n class UnsupportedFeatureWarning extends WebpackError {\n \t/**\n-\t * @param {Module} module module relevant to warning\n \t * @param {string} message description of warning\n \t * @param {DependencyLocation} loc location start and end positions of the module\n \t */\n-\tconstructor(module, message, loc) {\n+\tconstructor(message, loc) {\n \t\tsuper(message);\n \n \t\tthis.name = \"UnsupportedFeatureWarning\";\n-\t\tthis.module = module;\n \t\tthis.loc = loc;\n \t\tthis.hideStack = true;\n \n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n }\n \n+makeSerializable(\n+\tUnsupportedFeatureWarning,\n+\t\"webpack/lib/UnsupportedFeatureWarning\"\n+);\n+\n module.exports = UnsupportedFeatureWarning;"
      },
      {
        "sha": "58453ce2a51931878e5157bbe2c50dc01f475dac",
        "filename": "lib/WebpackError.js",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FWebpackError.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2FWebpackError.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackError.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -5,6 +5,8 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"./util/makeSerializable\");\n+\n /** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n \n class WebpackError extends Error {\n@@ -20,13 +22,37 @@ class WebpackError extends Error {\n \t\tthis.module = undefined;\n \t\t/** @type {DependencyLocation} */\n \t\tthis.loc = undefined;\n+\t\t/** @type {boolean} */\n+\t\tthis.hideStack = undefined;\n \n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n \n \tinspect() {\n \t\treturn this.stack + (this.details ? `\\n${this.details}` : \"\");\n \t}\n+\n+\tserialize({ write }) {\n+\t\twrite(this.name);\n+\t\twrite(this.message);\n+\t\twrite(this.stack);\n+\t\twrite(this.details);\n+\t\twrite(this.missing);\n+\t\twrite(this.loc);\n+\t\twrite(this.hideStack);\n+\t}\n+\n+\tdeserialize({ read }) {\n+\t\tthis.name = read();\n+\t\tthis.message = read();\n+\t\tthis.stack = read();\n+\t\tthis.details = read();\n+\t\tthis.missing = read();\n+\t\tthis.loc = read();\n+\t\tthis.hideStack = read();\n+\t}\n }\n \n+makeSerializable(WebpackError, \"webpack/lib/WebpackError\");\n+\n module.exports = WebpackError;"
      },
      {
        "sha": "1dc12f55a5ca5f9d8b49b6f9e88bc6c0fa6972f5",
        "filename": "lib/dependencies/AMDRequireDependenciesBlockParserPlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -214,7 +214,6 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t\tif (parser.state.module) {\n \t\t\t\t\t\tparser.state.module.errors.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t\"Cannot statically analyse 'require(…, …)' in line \" +\n \t\t\t\t\t\t\t\t\texpr.loc.start.line,\n \t\t\t\t\t\t\t\texpr.loc"
      },
      {
        "sha": "e1026d9c1f4b2771ce87a9af5875404ae9b01d34",
        "filename": "lib/dependencies/CriticalDependencyWarning.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FCriticalDependencyWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FCriticalDependencyWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCriticalDependencyWarning.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const WebpackError = require(\"../WebpackError\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n \n class CriticalDependencyWarning extends WebpackError {\n \tconstructor(message) {\n@@ -18,4 +19,9 @@ class CriticalDependencyWarning extends WebpackError {\n \t}\n }\n \n+makeSerializable(\n+\tCriticalDependencyWarning,\n+\t\"webpack/lib/dependencies/CriticalDependencyWarning\"\n+);\n+\n module.exports = CriticalDependencyWarning;"
      },
      {
        "sha": "cb8c582ea050c1268b742705ce5e160d71eee12e",
        "filename": "lib/dependencies/ImportParserPlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 10,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FImportParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FImportParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportParserPlugin.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -48,7 +48,6 @@ class ImportParserPlugin {\n \t\t\t\t\t\t\t`Compilation error while processing magic comment(-s): /*${\n \t\t\t\t\t\t\t\tcomment.value\n \t\t\t\t\t\t\t}*/: ${e.message}`,\n-\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\tcomment.loc\n \t\t\t\t\t\t)\n \t\t\t\t\t);\n@@ -60,7 +59,6 @@ class ImportParserPlugin {\n \t\t\t\t\tif (typeof importOptions.webpackIgnore !== \"boolean\") {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t`\\`webpackIgnore\\` expected a boolean, but received: ${\n \t\t\t\t\t\t\t\t\timportOptions.webpackIgnore\n \t\t\t\t\t\t\t\t}.`,\n@@ -78,7 +76,6 @@ class ImportParserPlugin {\n \t\t\t\t\tif (typeof importOptions.webpackChunkName !== \"string\") {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t`\\`webpackChunkName\\` expected a string, but received: ${\n \t\t\t\t\t\t\t\t\timportOptions.webpackChunkName\n \t\t\t\t\t\t\t\t}.`,\n@@ -93,7 +90,6 @@ class ImportParserPlugin {\n \t\t\t\t\tif (typeof importOptions.webpackMode !== \"string\") {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t`\\`webpackMode\\` expected a string, but received: ${\n \t\t\t\t\t\t\t\t\timportOptions.webpackMode\n \t\t\t\t\t\t\t\t}.`,\n@@ -112,7 +108,6 @@ class ImportParserPlugin {\n \t\t\t\t\t} else {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t`\\`webpackPrefetch\\` expected true or a number, but received: ${\n \t\t\t\t\t\t\t\t\timportOptions.webpackPrefetch\n \t\t\t\t\t\t\t\t}.`,\n@@ -129,7 +124,6 @@ class ImportParserPlugin {\n \t\t\t\t\t} else {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t`\\`webpackPreload\\` expected true or a number, but received: ${\n \t\t\t\t\t\t\t\t\timportOptions.webpackPreload\n \t\t\t\t\t\t\t\t}.`,\n@@ -145,7 +139,6 @@ class ImportParserPlugin {\n \t\t\t\t\t) {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t`\\`webpackInclude\\` expected a regular expression, but received: ${\n \t\t\t\t\t\t\t\t\timportOptions.webpackInclude\n \t\t\t\t\t\t\t\t}.`,\n@@ -163,7 +156,6 @@ class ImportParserPlugin {\n \t\t\t\t\t) {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t\t`\\`webpackExclude\\` expected a regular expression, but received: ${\n \t\t\t\t\t\t\t\t\timportOptions.webpackExclude\n \t\t\t\t\t\t\t\t}.`,\n@@ -180,7 +172,6 @@ class ImportParserPlugin {\n \t\t\t\tif (mode !== \"lazy\" && mode !== \"eager\" && mode !== \"weak\") {\n \t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t`\\`webpackMode\\` expected 'lazy', 'eager' or 'weak', but received: ${mode}.`,\n \t\t\t\t\t\t\texpr.loc\n \t\t\t\t\t\t)\n@@ -217,7 +208,6 @@ class ImportParserPlugin {\n \t\t\t\t) {\n \t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\tnew UnsupportedFeatureWarning(\n-\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\t`\\`webpackMode\\` expected 'lazy', 'lazy-once', 'eager' or 'weak', but received: ${mode}.`,\n \t\t\t\t\t\t\texpr.loc\n \t\t\t\t\t\t)"
      },
      {
        "sha": "889e5945ac908b6d92467d1d0b1ff6e8f47595d5",
        "filename": "lib/dependencies/SystemPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FSystemPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fdependencies%2FSystemPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FSystemPlugin.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -90,7 +90,7 @@ class SystemPlugin {\n \n \t\t\t\t\tparser.hooks.call.for(\"System.import\").tap(\"SystemPlugin\", expr => {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n-\t\t\t\t\t\t\tnew SystemImportDeprecationWarning(parser.state.module, expr.loc)\n+\t\t\t\t\t\t\tnew SystemImportDeprecationWarning(expr.loc)\n \t\t\t\t\t\t);\n \n \t\t\t\t\t\treturn parser.hooks.importCall.call(expr);\n@@ -109,15 +109,14 @@ class SystemPlugin {\n }\n \n class SystemImportDeprecationWarning extends WebpackError {\n-\tconstructor(module, loc) {\n+\tconstructor(loc) {\n \t\tsuper(\n \t\t\t\"System.import() is deprecated and will be removed soon. Use import() instead.\\n\" +\n \t\t\t\t\"For more info visit https://webpack.js.org/guides/code-splitting/\"\n \t\t);\n \n \t\tthis.name = \"SystemImportDeprecationWarning\";\n \n-\t\tthis.module = module;\n \t\tthis.loc = loc;\n \n \t\tError.captureStackTrace(this, this.constructor);"
      },
      {
        "sha": "0e168d5dbfaf8b511923e7ada589dbe1897dc039",
        "filename": "lib/serialization/ErrorObjectSerializer.js",
        "status": "added",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fserialization%2FErrorObjectSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fserialization%2FErrorObjectSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FErrorObjectSerializer.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -0,0 +1,27 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+class ErrorObjectSerializer {\n+\tconstructor(Type) {\n+\t\tthis.Type = Type;\n+\t}\n+\n+\tserialize(obj, { write }) {\n+\t\twrite(obj.message);\n+\t\twrite(obj.stack);\n+\t}\n+\n+\tdeserialize({ read }) {\n+\t\tconst err = new this.Type();\n+\n+\t\terr.message = read();\n+\t\terr.stack = read();\n+\n+\t\treturn err;\n+\t}\n+}\n+\n+module.exports = ErrorObjectSerializer;"
      },
      {
        "sha": "27adab8890958d989572cba2b860bb6c448e11b6",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "modified",
        "additions": 74,
        "deletions": 19,
        "changes": 93,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -4,6 +4,7 @@\n \n \"use strict\";\n \n+const ErrorObjectSerializer = require(\"./ErrorObjectSerializer\");\n const MapObjectSerializer = require(\"./MapObjectSerializer\");\n const PlainObjectSerializer = require(\"./PlainObjectSerializer\");\n const RegExpObjectSerializer = require(\"./RegExpObjectSerializer\");\n@@ -58,9 +59,6 @@ const ESCAPE_UNDEFINED = false;\n const CURRENT_VERSION = 1;\n \n const plainObjectSerializer = new PlainObjectSerializer();\n-const mapObjectSerializer = new MapObjectSerializer();\n-const setObjectSerializer = new SetObjectSerializer();\n-const regExpObjectSerializer = new RegExpObjectSerializer();\n \n const serializers = new Map();\n const serializerInversed = new Map();\n@@ -74,26 +72,35 @@ serializers.set(Object, {\n \tname: null,\n \tserializer: plainObjectSerializer\n });\n+\n serializers.set(Array, {\n \trequest: \"\",\n \tname: null,\n \tserializer: plainObjectSerializer\n });\n-serializers.set(Map, {\n-\trequest: \"\",\n-\tname: 1,\n-\tserializer: mapObjectSerializer\n-});\n-serializers.set(Set, {\n-\trequest: \"\",\n-\tname: 2,\n-\tserializer: setObjectSerializer\n-});\n-serializers.set(RegExp, {\n-\trequest: \"\",\n-\tname: 3,\n-\tserializer: regExpObjectSerializer\n-});\n+\n+const jsTypes = new Map();\n+jsTypes.set(Map, new MapObjectSerializer());\n+jsTypes.set(Set, new SetObjectSerializer());\n+jsTypes.set(RegExp, new RegExpObjectSerializer());\n+jsTypes.set(Error, new ErrorObjectSerializer(Error));\n+jsTypes.set(EvalError, new ErrorObjectSerializer(EvalError));\n+jsTypes.set(RangeError, new ErrorObjectSerializer(RangeError));\n+jsTypes.set(ReferenceError, new ErrorObjectSerializer(ReferenceError));\n+jsTypes.set(SyntaxError, new ErrorObjectSerializer(SyntaxError));\n+jsTypes.set(TypeError, new ErrorObjectSerializer(TypeError));\n+\n+{\n+\tlet i = 1;\n+\tfor (const [type, serializer] of jsTypes) {\n+\t\tserializers.set(type, {\n+\t\t\trequest: \"\",\n+\t\t\tname: i++,\n+\t\t\tserializer\n+\t\t});\n+\t}\n+}\n+\n for (const { request, name, serializer } of serializers.values()) {\n \tserializerInversed.set(`${request}/${name}`, serializer);\n }\n@@ -108,23 +115,27 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t */\n \tstatic register(Constructor, request, name, serializer) {\n \t\tconst key = request + \"/\" + name;\n+\n \t\tif (serializers.has(Constructor)) {\n \t\t\tthrow new Error(\n \t\t\t\t`ObjectMiddleware.register: serializer for ${\n \t\t\t\t\tConstructor.name\n \t\t\t\t} is already registered`\n \t\t\t);\n \t\t}\n+\n \t\tif (serializerInversed.has(key)) {\n \t\t\tthrow new Error(\n \t\t\t\t`ObjectMiddleware.register: serializer for ${key} is already registered`\n \t\t\t);\n \t\t}\n+\n \t\tserializers.set(Constructor, {\n \t\t\trequest,\n \t\t\tname,\n \t\t\tserializer\n \t\t});\n+\n \t\tserializerInversed.set(key, serializer);\n \t}\n \n@@ -140,40 +151,49 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t} is already registered`\n \t\t\t);\n \t\t}\n+\n \t\tserializers.set(Constructor, NOT_SERIALIZABLE);\n \t}\n \n \tstatic getSerializerFor(object) {\n \t\tconst c = object.constructor;\n \t\tconst config = serializers.get(c);\n+\n \t\tif (!config) throw new Error(`No serializer registered for ${c.name}`);\n \t\tif (config === NOT_SERIALIZABLE) throw NOT_SERIALIZABLE;\n+\n \t\treturn config;\n \t}\n \n \tstatic getDeserializerFor(request, name) {\n \t\tconst key = request + \"/\" + name;\n \t\tconst serializer = serializerInversed.get(key);\n+\n \t\tif (serializer === undefined) {\n \t\t\tthrow new Error(`No deserializer registered for ${key}`);\n \t\t}\n+\n \t\treturn serializer;\n \t}\n \n \t_handleFunctionSerialization(fn, context) {\n \t\treturn () => {\n \t\t\tconst r = fn();\n+\n \t\t\tif (r instanceof Promise)\n \t\t\t\treturn r.then(data => this.serialize([data], context));\n+\n \t\t\treturn this.serialize([r], context);\n \t\t};\n \t}\n \n \t_handleFunctionDeserialization(fn, context) {\n \t\treturn () => {\n \t\t\tconst r = fn();\n+\n \t\t\tif (r instanceof Promise)\n \t\t\t\treturn r.then(data => this.deserialize(data, context)[0]);\n+\n \t\t\treturn this.deserialize(r, context)[0];\n \t\t};\n \t}\n@@ -197,12 +217,16 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\tconst process = item => {\n \t\t\t// check if we can emit a reference\n \t\t\tconst ref = referenceable.get(item);\n+\n \t\t\tif (ref !== undefined) {\n \t\t\t\tresult.push(ESCAPE, ref - currentPos);\n+\n \t\t\t\treturn;\n \t\t\t}\n+\n \t\t\tif (Buffer.isBuffer(item)) {\n \t\t\t\taddReferenceable(item);\n+\n \t\t\t\tresult.push(item);\n \t\t\t} else if (typeof item === \"object\" && item !== null) {\n \t\t\t\tif (cycleStack.has(item)) {\n@@ -213,32 +237,40 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t\t\t\t.join(\" -> \")})`\n \t\t\t\t\t);\n \t\t\t\t}\n+\n \t\t\t\tconst { request, name, serializer } = ObjectMiddleware.getSerializerFor(\n \t\t\t\t\titem\n \t\t\t\t);\n-\n \t\t\t\tconst key = `${request}/${name}`;\n \t\t\t\tconst lastIndex = objectTypeLookup.get(key);\n+\n \t\t\t\tif (lastIndex === undefined) {\n \t\t\t\t\tobjectTypeLookup.set(key, currentPosTypeLookup++);\n+\n \t\t\t\t\tresult.push(ESCAPE, request, name);\n \t\t\t\t} else {\n \t\t\t\t\tresult.push(ESCAPE, currentPosTypeLookup - lastIndex);\n \t\t\t\t}\n+\n \t\t\t\tcycleStack.add(item);\n+\n \t\t\t\tserializer.serialize(item, {\n \t\t\t\t\twrite(value) {\n \t\t\t\t\t\tprocess(value);\n \t\t\t\t\t}\n \t\t\t\t});\n+\n \t\t\t\tcycleStack.delete(item);\n+\n \t\t\t\tresult.push(ESCAPE, ESCAPE_END_OBJECT);\n+\n \t\t\t\taddReferenceable(item);\n \t\t\t} else if (typeof item === \"string\") {\n \t\t\t\tif (item !== \"\") {\n \t\t\t\t\t// empty strings are shorter when not emitting a reference (this saves 1 byte per empty string)\n \t\t\t\t\taddReferenceable(item);\n \t\t\t\t}\n+\n \t\t\t\tresult.push(item);\n \t\t\t} else if (item === ESCAPE) {\n \t\t\t\tresult.push(ESCAPE, ESCAPE_ESCAPE_VALUE);\n@@ -250,14 +282,17 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\tresult.push(item);\n \t\t\t}\n \t\t};\n+\n \t\ttry {\n \t\t\tfor (const item of data) {\n \t\t\t\tprocess(item);\n \t\t\t}\n \t\t} catch (e) {\n \t\t\tif (e === NOT_SERIALIZABLE) return null;\n+\n \t\t\tthrow e;\n \t\t}\n+\n \t\treturn result;\n \t}\n \n@@ -271,10 +306,13 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\tconst read = () => {\n \t\t\tif (currentDataPos >= data.length)\n \t\t\t\tthrow new Error(\"Unexpected end of stream\");\n+\n \t\t\treturn data[currentDataPos++];\n \t\t};\n+\n \t\tif (read() !== CURRENT_VERSION)\n \t\t\tthrow new Error(\"Version missmatch, serializer changed\");\n+\n \t\tlet currentPos = 0;\n \t\tconst referenceable = new Map();\n \t\tconst addReferenceable = item => {\n@@ -285,8 +323,10 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\tconst result = [];\n \t\tconst decodeValue = () => {\n \t\t\tconst item = read();\n+\n \t\t\tif (item === ESCAPE) {\n \t\t\t\tconst nextItem = read();\n+\n \t\t\t\tif (nextItem === ESCAPE_ESCAPE_VALUE) {\n \t\t\t\t\treturn ESCAPE;\n \t\t\t\t} else if (nextItem === ESCAPE_UNDEFINED) {\n@@ -301,51 +341,66 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t} else {\n \t\t\t\t\tconst request = nextItem;\n \t\t\t\t\tlet serializer;\n+\n \t\t\t\t\tif (typeof request === \"number\") {\n \t\t\t\t\t\tserializer = objectTypeLookup.get(currentPosTypeLookup - request);\n \t\t\t\t\t} else {\n \t\t\t\t\t\tconst name = read();\n+\n \t\t\t\t\t\tif (request && !loadedRequests.has(request)) {\n \t\t\t\t\t\t\trequire(request);\n+\n \t\t\t\t\t\t\tloadedRequests.add(request);\n \t\t\t\t\t\t}\n+\n \t\t\t\t\t\tserializer = ObjectMiddleware.getDeserializerFor(request, name);\n+\n \t\t\t\t\t\tobjectTypeLookup.set(currentPosTypeLookup++, serializer);\n \t\t\t\t\t}\n \t\t\t\t\tconst item = serializer.deserialize({\n \t\t\t\t\t\tread() {\n \t\t\t\t\t\t\tconst item = decodeValue();\n+\n \t\t\t\t\t\t\treturn item;\n \t\t\t\t\t\t}\n \t\t\t\t\t});\n \t\t\t\t\tconst end1 = read();\n+\n \t\t\t\t\tif (end1 !== ESCAPE) {\n \t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n \t\t\t\t\t}\n+\n \t\t\t\t\tconst end2 = read();\n+\n \t\t\t\t\tif (end2 !== ESCAPE_END_OBJECT) {\n \t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n \t\t\t\t\t}\n+\n \t\t\t\t\taddReferenceable(item);\n+\n \t\t\t\t\treturn item;\n \t\t\t\t}\n \t\t\t} else if (typeof item === \"string\") {\n \t\t\t\tif (item !== \"\") {\n \t\t\t\t\taddReferenceable(item);\n \t\t\t\t}\n+\n \t\t\t\treturn item;\n \t\t\t} else if (Buffer.isBuffer(item)) {\n \t\t\t\taddReferenceable(item);\n+\n \t\t\t\treturn item;\n \t\t\t} else if (typeof item === \"function\") {\n \t\t\t\treturn this._handleFunctionDeserialization(item, context);\n \t\t\t} else {\n \t\t\t\treturn item;\n \t\t\t}\n \t\t};\n+\n \t\twhile (currentDataPos < data.length) {\n \t\t\tresult.push(decodeValue());\n \t\t}\n+\n \t\treturn result;\n \t}\n }"
      },
      {
        "sha": "175379962824b7e5a351cde9bd1ba6e09c245c62",
        "filename": "lib/util/registerExternalSerializer.js",
        "status": "modified",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Futil%2FregisterExternalSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/lib%2Futil%2FregisterExternalSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FregisterExternalSerializer.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -7,6 +7,7 @@\n \n const ObjectMiddleware = require(\"../serialization/ObjectMiddleware\");\n \n+const Position = /** @type {TODO} */ (require(\"acorn\")).Position;\n const SourceLocation = require(\"acorn\").SourceLocation;\n const CachedSource = require(\"webpack-sources\").CachedSource;\n const ConcatSource = require(\"webpack-sources\").ConcatSource;\n@@ -17,6 +18,7 @@ const ReplaceSource = require(\"webpack-sources\").ReplaceSource;\n const SourceMapSource = require(\"webpack-sources\").SourceMapSource;\n \n /** @typedef {import(\"../Dependency\").RealDependencyLocation} RealDependencyLocation */\n+/** @typedef {import(\"../Dependency\").SourcePosition} SourcePosition */\n \n const CURRENT_MODULE = \"webpack/lib/util/registerExternalSerializer\";\n \n@@ -234,6 +236,34 @@ ObjectMiddleware.register(\n \t}()\n );\n \n+ObjectMiddleware.register(\n+\tPosition,\n+\tCURRENT_MODULE,\n+\t\"acorn/Position\",\n+\tnew class PositionSerializer {\n+\t\t/**\n+\t\t * @param {Position} pos the position to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(pos, { write }) {\n+\t\t\twrite(pos.line);\n+\t\t\twrite(pos.column);\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {SourcePosition} position\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\treturn {\n+\t\t\t\tline: read(),\n+\t\t\t\tcolumn: read()\n+\t\t\t};\n+\t\t}\n+\t}()\n+);\n+\n ObjectMiddleware.register(\n \tSourceMapSource,\n \tCURRENT_MODULE,"
      },
      {
        "sha": "ee479ac95edd9d8c17e12d3b8aa5794933d3abb0",
        "filename": "test/StatsTestCases.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/test%2FStatsTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/test%2FStatsTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStatsTestCases.test.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -29,7 +29,7 @@ const tests = fs\n describe(\"StatsTestCases\", () => {\n \ttests.forEach(testName => {\n \t\tit(\"should print correct stats for \" + testName, done => {\n-\t\t\tjest.setTimeout(10000);\n+\t\t\tjest.setTimeout(30000);\n \t\t\tlet options = {\n \t\t\t\tmode: \"development\",\n \t\t\t\tentry: \"./index\","
      },
      {
        "sha": "9bb77c3701aa190225a2b736a4b2fd08bae0be36",
        "filename": "test/cases/parsing/context/warnings.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/test%2Fcases%2Fparsing%2Fcontext%2Fwarnings.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/test%2Fcases%2Fparsing%2Fcontext%2Fwarnings.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Fparsing%2Fcontext%2Fwarnings.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -1,5 +1,5 @@\n module.exports = [\n-\t[/Module parse failed/, /dump-file\\.txt/, /templates sync \\^\\\\\\.\\\\\\/\\.\\*\\$/],\n+\t[/Module parse failed/, /dump-file\\.txt/, /templates sync/],\n \t[/Critical dependency/, /templateLoader\\.js/],\n \t[/Critical dependency/, /templateLoaderIndirect\\.js/],\n \t[/Critical dependency/, /templateLoaderIndirect\\.js/],"
      },
      {
        "sha": "f5f760cca09f22609049ecc8798e98ea34f54977",
        "filename": "test/checkArrayExpectation.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/test%2FcheckArrayExpectation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/test%2FcheckArrayExpectation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FcheckArrayExpectation.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -27,7 +27,7 @@ module.exports = function checkArrayExpectation(\n \t\t\t\t\tnew Error(\n \t\t\t\t\t\t`More ${kind}s while compiling than expected:\\n\\n${array.join(\n \t\t\t\t\t\t\t\"\\n\\n\"\n-\t\t\t\t\t\t)}. Check expected warnings: ${filename}`\n+\t\t\t\t\t\t)}. Check expected ${kind}s: ${expectedFilename}`\n \t\t\t\t\t)\n \t\t\t\t),\n \t\t\t\ttrue\n@@ -38,7 +38,7 @@ module.exports = function checkArrayExpectation(\n \t\t\t\t\tnew Error(\n \t\t\t\t\t\t`Less ${kind}s while compiling than expected:\\n\\n${array.join(\n \t\t\t\t\t\t\t\"\\n\\n\"\n-\t\t\t\t\t\t)}. Check expected warnings: ${filename}`\n+\t\t\t\t\t\t)}. Check expected ${kind}s: ${expectedFilename}`\n \t\t\t\t\t)\n \t\t\t\t),\n \t\t\t\ttrue"
      },
      {
        "sha": "4ec09edc623c84e0e8b91af775e8425d779fce74",
        "filename": "tooling/format-file-header.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/tooling%2Fformat-file-header.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ad308f9d5ac064b4eb6b861c88087adfe38e7f14/tooling%2Fformat-file-header.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/tooling%2Fformat-file-header.js?ref=ad308f9d5ac064b4eb6b861c88087adfe38e7f14",
        "patch": "@@ -82,12 +82,12 @@ const schema = [\n \t},\n \t{\n \t\ttitle: \"imports\",\n-\t\tregexp: /(const (\\{\\s+\\w+(,\\s+\\w+)*\\s+\\}|\\w+) = require\\(\"[^\"]+\"\\)(\\.\\w+)*;\\n)+\\n/g,\n+\t\tregexp: /(const (\\{\\s+\\w+(,\\s+\\w+)*\\s+\\}|\\w+) = (\\/\\*\\* @type \\{TODO\\} \\*\\/\\s\\()?require\\(\"[^\"]+\"\\)\\)?(\\.\\w+)*;\\n)+\\n/g,\n \t\tupdateMessage: \"sort imports alphabetically\",\n \t\tupdate(content) {\n \t\t\tconst items = execToArray(\n \t\t\t\tcontent,\n-\t\t\t\t/const (?:\\{\\s+\\w+(?:,\\s+\\w+)*\\s+\\}|\\w+) = require\\(\"([^\"]+)\"\\)((?:\\.\\w+)*);\\n/g\n+\t\t\t\t/const (?:\\{\\s+\\w+(?:,\\s+\\w+)*\\s+\\}|\\w+) = (?:\\/\\*\\* @type \\{TODO\\} \\*\\/\\s\\()?require\\(\"([^\"]+)\"\\)\\)?((?:\\.\\w+)*);\\n/g\n \t\t\t);\n \t\t\titems.sort(sortImport);\n \t\t\treturn items.map(item => item.content).join(\"\") + \"\\n\";"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/7952",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/7952/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/7952/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/7952/events",
    "html_url": "https://github.com/webpack/webpack/pull/7952",
    "id": 353818194,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjEwNzY1NjI1",
    "number": 7952,
    "title": "improve prettier and lint config and performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-08-24T14:57:58Z",
    "updated_at": "2018-08-24T15:24:12Z",
    "closed_at": "2018-08-24T15:24:10Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/7952",
      "html_url": "https://github.com/webpack/webpack/pull/7952",
      "diff_url": "https://github.com/webpack/webpack/pull/7952.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/7952.patch",
      "merged_at": "2018-08-24T15:24:10Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\ntooling\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nN/A\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnothing\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/7952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/7952/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "2bd8cf9e86d59244621d9c10ab1f2404b67f82cb",
        "filename": ".editorconfig",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/.editorconfig",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/.editorconfig",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/.editorconfig?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -8,10 +8,6 @@ trim_trailing_whitespace = true\n insert_final_newline = true\n max_line_length = 80\n \n-[.prettierrc]\n-indent_style = space\n-indent_size = 2\n-\n [*.{yml,yaml,json}]\n indent_style = space\n indent_size = 2"
      },
      {
        "sha": "37b4be6f4a485b1e9de3ed4ab049f3b12a000eb8",
        "filename": ".eslintrc.js",
        "status": "modified",
        "additions": 26,
        "deletions": 19,
        "changes": 45,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/.eslintrc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/.eslintrc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/.eslintrc.js?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -1,7 +1,11 @@\n module.exports = {\n \troot: true,\n \tplugins: [\"prettier\", \"node\", \"jest\"],\n-\textends: [\"eslint:recommended\", \"plugin:node/recommended\", \"plugin:prettier/recommended\"],\n+\textends: [\n+\t\t\"eslint:recommended\",\n+\t\t\"plugin:node/recommended\",\n+\t\t\"plugin:prettier/recommended\"\n+\t],\n \tenv: {\n \t\tnode: true,\n \t\tes6: true\n@@ -16,8 +20,8 @@ module.exports = {\n \t\t\"no-template-curly-in-string\": \"error\",\n \t\t\"no-caller\": \"error\",\n \t\t\"no-control-regex\": \"off\",\n-\t\t\"yoda\": \"error\",\n-\t\t\"eqeqeq\": \"error\",\n+\t\tyoda: \"error\",\n+\t\teqeqeq: \"error\",\n \t\t\"global-require\": \"off\",\n \t\t\"brace-style\": \"error\",\n \t\t\"eol-last\": \"error\",\n@@ -27,23 +31,26 @@ module.exports = {\n \t\t\"no-unused-vars\": [\"error\", { args: \"none\" }],\n \t\t\"no-unsafe-negation\": \"error\",\n \t\t\"no-loop-func\": \"warn\",\n-\t\t\"indent\": \"off\",\n+\t\tindent: \"off\",\n \t\t\"no-console\": \"off\",\n-\t\t\"valid-jsdoc\": [\"error\", {\n-\t\t\t\"prefer\": {\n-\t\t\t\t\"return\": \"returns\",\n-\t\t\t\t\"prop\": \"property\",\n-\t\t\t\t\"memberof\": \"DONTUSE\",\n-\t\t\t\t\"class\": \"DONTUSE\",\n-\t\t\t\t\"inheritdoc\": \"DONTUSE\",\n-\t\t\t\t\"description\": \"DONTUSE\",\n-\t\t\t\t\"readonly\": \"DONTUSE\"\n-\t\t\t},\n-\t\t\t\"preferType\": {\n-\t\t\t\t\"*\": \"any\"\n-\t\t\t},\n-\t\t\t\"requireReturnType\": true\n-\t\t}],\n+\t\t\"valid-jsdoc\": [\n+\t\t\t\"error\",\n+\t\t\t{\n+\t\t\t\tprefer: {\n+\t\t\t\t\treturn: \"returns\",\n+\t\t\t\t\tprop: \"property\",\n+\t\t\t\t\tmemberof: \"DONTUSE\",\n+\t\t\t\t\tclass: \"DONTUSE\",\n+\t\t\t\t\tinheritdoc: \"DONTUSE\",\n+\t\t\t\t\tdescription: \"DONTUSE\",\n+\t\t\t\t\treadonly: \"DONTUSE\"\n+\t\t\t\t},\n+\t\t\t\tpreferType: {\n+\t\t\t\t\t\"*\": \"any\"\n+\t\t\t\t},\n+\t\t\t\trequireReturnType: true\n+\t\t\t}\n+\t\t],\n \t\t\"node/no-unsupported-features\": \"error\",\n \t\t\"node/no-deprecated-api\": \"error\",\n \t\t\"node/no-missing-import\": \"error\","
      },
      {
        "sha": "bdf38e4bc19bfdf59d350a76649f35a8abf6cb5f",
        "filename": ".prettierignore",
        "status": "modified",
        "additions": 5,
        "deletions": 13,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/.prettierignore",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/.prettierignore",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/.prettierignore?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -1,16 +1,8 @@\n-# Ignore all paths.\n-**/*.*\n-\n-# Enable prettier for the following paths.\n-!*.{ts,js,json}\n-!setup/**/*.js\n-!lib/**/*.js\n-!bin/*.js\n-!hot/*.js\n-!buildin/*.js\n-!benchmark/**/*.js\n+# Ignore test fixtures\n+test\n !test/*.js\n-!tooling/*.js\n !test/**/webpack.config.js\n+\n+# Ignore example fixtures\n+examples\n !examples/**/webpack.config.js\n-!schemas/**/*.js"
      },
      {
        "sha": "cc7e3b513550c9760c64e5d6cd101c1317d0c6e8",
        "filename": ".prettierrc.js",
        "status": "modified",
        "additions": 9,
        "deletions": 1,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/.prettierrc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/.prettierrc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/.prettierrc.js?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -1,5 +1,13 @@\n module.exports = {\n \tprintWidth: 80,\n \tuseTabs: true,\n-\ttabWidth: 2\n+\ttabWidth: 2,\n+\toverrides: [\n+\t\t{\n+\t\t\tfiles: \"*.json\",\n+\t\t\toptions: {\n+\t\t\t\tuseTabs: false\n+\t\t\t}\n+\t\t}\n+\t]\n };"
      },
      {
        "sha": "3b46b09a2944ccf31283f1175d66681b1d7021ac",
        "filename": "package.json",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -120,10 +120,10 @@\n     \"pretest\": \"yarn lint\",\n     \"prelint\": \"yarn setup\",\n     \"lint\": \"yarn code-lint && yarn schema-lint && yarn type-lint\",\n-    \"code-lint\": \"eslint --cache setup lib bin hot buildin benchmark tooling \\\"test/*.js\\\" \\\"test/**/webpack.config.js\\\" \\\"examples/**/webpack.config.js\\\" \\\"schemas/**/*.js\\\"\",\n+    \"code-lint\": \"eslint --cache \\\"{setup,lib,bin,hot,buildin,benchmark,tooling,schemas}/**/*.js\\\" \\\"test/*.js\\\" \\\"test/{configCases,watchCases,statsCases,hotCases}/**/webpack.config.js\\\" \\\"examples/**/webpack.config.js\\\"\",\n     \"type-lint\": \"tsc --pretty\",\n     \"fix\": \"yarn code-lint --fix\",\n-    \"pretty\": \"prettier --write \\\"*.{ts,js,json}\\\" \\\"setup/**/*.js\\\" \\\"lib/**/*.js\\\" \\\"bin/*.js\\\" \\\"hot/*.js\\\" \\\"buildin/*.js\\\" \\\"benchmark/**/*.js\\\" \\\"tooling/*.js\\\" \\\"test/*.js\\\" \\\"test/**/webpack.config.js\\\" \\\"examples/**/webpack.config.js\\\" \\\"schemas/**/*.js\\\"\",\n+    \"pretty\": \"prettier --loglevel warn --write \\\"*.{ts,js,json}\\\" \\\"{setup,lib,bin,hot,buildin,benchmark,tooling,schemas}/**/*.{js,json}\\\" \\\"test/*.js\\\" \\\"test/{configCases,watchCases,statsCases,hotCases}/**/webpack.config.js\\\" \\\"examples/**/webpack.config.js\\\"\",\n     \"schema-lint\": \"node --max-old-space-size=4096 node_modules/jest-cli/bin/jest --testMatch \\\"<rootDir>/test/*.lint.js\\\" --no-verbose\",\n     \"benchmark\": \"node --max-old-space-size=4096 --trace-deprecation node_modules/jest-cli/bin/jest --testMatch \\\"<rootDir>/test/*.benchmark.js\\\" --runInBand\",\n     \"cover\": \"yarn cover:init && yarn cover:all && yarn cover:report\","
      },
      {
        "sha": "01513196134f5f9ad87d1710a19a4be08dde2918",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 24,
        "deletions": 108,
        "changes": 132,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -11,9 +11,7 @@\n         }\n       },\n       \"additionalProperties\": true,\n-      \"required\": [\n-        \"apply\"\n-      ]\n+      \"required\": [\"apply\"]\n     },\n     \"common.pluginObject\": {\n       \"description\": \"Plugin instance\",\n@@ -25,9 +23,7 @@\n         }\n       },\n       \"additionalProperties\": true,\n-      \"required\": [\n-        \"apply\"\n-      ]\n+      \"required\": [\"apply\"]\n     },\n     \"common.arrayOfStringOrStringArrayValues\": {\n       \"items\": {\n@@ -339,19 +335,11 @@\n         },\n         \"crossOriginLoading\": {\n           \"description\": \"This option enables cross-origin loading of chunks.\",\n-          \"enum\": [\n-            false,\n-            \"anonymous\",\n-            \"use-credentials\"\n-          ]\n+          \"enum\": [false, \"anonymous\", \"use-credentials\"]\n         },\n         \"jsonpScriptType\": {\n           \"description\": \"This option enables loading async chunks via a custom script type, such as script type=\\\"module\\\"\",\n-          \"enum\": [\n-            false,\n-            \"text/javascript\",\n-            \"module\"\n-          ]\n+          \"enum\": [false, \"text/javascript\", \"module\"]\n         },\n         \"chunkLoadTimeout\": {\n           \"description\": \"Number of milliseconds before chunk request expires\",\n@@ -837,10 +825,7 @@\n       \"properties\": {\n         \"enforce\": {\n           \"description\": \"Enforce this rule as pre or post step\",\n-          \"enum\": [\n-            \"pre\",\n-            \"post\"\n-          ]\n+          \"enum\": [\"pre\", \"post\"]\n         },\n         \"exclude\": {\n           \"description\": \"Shortcut for resource.exclude\",\n@@ -1114,11 +1099,7 @@\n   \"properties\": {\n     \"mode\": {\n       \"description\": \"Enable production optimizations or development hints.\",\n-      \"enum\": [\n-        \"development\",\n-        \"production\",\n-        \"none\"\n-      ]\n+      \"enum\": [\"development\", \"production\", \"none\"]\n     },\n     \"amd\": {\n       \"description\": \"Set the value of `require.amd` and `define.amd`.\"\n@@ -1164,9 +1145,7 @@\n           \"type\": \"string\"\n         },\n         {\n-          \"enum\": [\n-            false\n-          ]\n+          \"enum\": [false]\n         }\n       ]\n     },\n@@ -1206,64 +1185,37 @@\n       \"description\": \"Include polyfills or mocks for various node stuff.\",\n       \"anyOf\": [\n         {\n-          \"enum\": [\n-            false\n-          ]\n+          \"enum\": [false]\n         },\n         {\n           \"additionalProperties\": {\n             \"description\": \"Include a polyfill for the node.js module\",\n-            \"enum\": [\n-              false,\n-              true,\n-              \"mock\",\n-              \"empty\"\n-            ]\n+            \"enum\": [false, true, \"mock\", \"empty\"]\n           },\n           \"properties\": {\n             \"Buffer\": {\n               \"description\": \"Include a polyfill for the 'Buffer' variable\",\n-              \"enum\": [\n-                false,\n-                true,\n-                \"mock\"\n-              ]\n+              \"enum\": [false, true, \"mock\"]\n             },\n             \"__dirname\": {\n               \"description\": \"Include a polyfill for the '__dirname' variable\",\n-              \"enum\": [\n-                false,\n-                true,\n-                \"mock\"\n-              ]\n+              \"enum\": [false, true, \"mock\"]\n             },\n             \"__filename\": {\n               \"description\": \"Include a polyfill for the '__filename' variable\",\n-              \"enum\": [\n-                false,\n-                true,\n-                \"mock\"\n-              ]\n+              \"enum\": [false, true, \"mock\"]\n             },\n             \"console\": {\n               \"description\": \"Include a polyfill for the 'console' variable\",\n-              \"enum\": [\n-                false,\n-                true,\n-                \"mock\"\n-              ]\n+              \"enum\": [false, true, \"mock\"]\n             },\n             \"global\": {\n               \"description\": \"Include a polyfill for the 'global' variable\",\n               \"type\": \"boolean\"\n             },\n             \"process\": {\n               \"description\": \"Include a polyfill for the 'process' variable\",\n-              \"enum\": [\n-                false,\n-                true,\n-                \"mock\"\n-              ]\n+              \"enum\": [false, true, \"mock\"]\n             }\n           },\n           \"type\": \"object\"\n@@ -1323,9 +1275,7 @@\n           \"description\": \"Optimize duplication and caching by splitting chunks by shared modules and cache group\",\n           \"oneOf\": [\n             {\n-              \"enum\": [\n-                false\n-              ]\n+              \"enum\": [false]\n             },\n             {\n               \"type\": \"object\",\n@@ -1335,11 +1285,7 @@\n                   \"description\": \"Select chunks for determining shared modules (defaults to \\\"async\\\", \\\"initial\\\" and \\\"all\\\" requires adding these chunks to the HTML)\",\n                   \"oneOf\": [\n                     {\n-                      \"enum\": [\n-                        \"initial\",\n-                        \"async\",\n-                        \"all\"\n-                      ]\n+                      \"enum\": [\"initial\", \"async\", \"all\"]\n                     },\n                     {\n                       \"instanceof\": \"Function\"\n@@ -1428,9 +1374,7 @@\n                     \"description\": \"Configuration for a cache group\",\n                     \"anyOf\": [\n                       {\n-                        \"enum\": [\n-                          false\n-                        ]\n+                        \"enum\": [false]\n                       },\n                       {\n                         \"instanceof\": \"Function\"\n@@ -1463,11 +1407,7 @@\n                             \"description\": \"Select chunks for determining cache group content (defaults to \\\"initial\\\", \\\"initial\\\" and \\\"all\\\" requires adding these chunks to the HTML)\",\n                             \"oneOf\": [\n                               {\n-                                \"enum\": [\n-                                  \"initial\",\n-                                  \"async\",\n-                                  \"all\"\n-                                ]\n+                                \"enum\": [\"initial\", \"async\", \"all\"]\n                               },\n                               {\n                                 \"instanceof\": \"Function\"\n@@ -1555,10 +1495,7 @@\n               \"type\": \"boolean\"\n             },\n             {\n-              \"enum\": [\n-                \"single\",\n-                \"multiple\"\n-              ]\n+              \"enum\": [\"single\", \"multiple\"]\n             },\n             {\n               \"type\": \"object\",\n@@ -1593,24 +1530,11 @@\n         },\n         \"moduleIds\": {\n           \"description\": \"Define the algorithm to choose module ids (natural: numeric ids in order of usage, named: readable ids for better debugging, hashed: short hashes as ids for better long term caching, size: numeric ids focused on minimal initial download size, total-size: numeric ids focused on minimal total download size, false: no algorithm used, as custom one can be provided via plugin)\",\n-          \"enum\": [\n-            \"natural\",\n-            \"named\",\n-            \"hashed\",\n-            \"size\",\n-            \"total-size\",\n-            false\n-          ]\n+          \"enum\": [\"natural\", \"named\", \"hashed\", \"size\", \"total-size\", false]\n         },\n         \"chunkIds\": {\n           \"description\": \"Define the algorithm to choose chunk ids (named: readable ids for better debugging, size: numeric ids focused on minimal initial download size, total-size: numeric ids focused on minimal total download size, false: no algorithm used, as custom one can be provided via plugin)\",\n-          \"enum\": [\n-            \"natural\",\n-            \"named\",\n-            \"size\",\n-            \"total-size\",\n-            false\n-          ]\n+          \"enum\": [\"natural\", \"named\", \"size\", \"total-size\", false]\n         },\n         \"namedModules\": {\n           \"description\": \"Use readable module identifiers for better debugging (deprecated, used moduleIds: named instead)\",\n@@ -1651,9 +1575,7 @@\n           \"description\": \"Set process.env.NODE_ENV to a specific value\",\n           \"anyOf\": [\n             {\n-              \"enum\": [\n-                false\n-              ]\n+              \"enum\": [false]\n             },\n             {\n               \"type\": \"string\"\n@@ -1671,9 +1593,7 @@\n       \"description\": \"Configuration for web performance recommendations.\",\n       \"anyOf\": [\n         {\n-          \"enum\": [\n-            false\n-          ]\n+          \"enum\": [false]\n         },\n         {\n           \"additionalProperties\": false,\n@@ -1684,11 +1604,7 @@\n             },\n             \"hints\": {\n               \"description\": \"Sets the format of the hints: warnings, errors or nothing at all\",\n-              \"enum\": [\n-                false,\n-                \"warning\",\n-                \"error\"\n-              ]\n+              \"enum\": [false, \"warning\", \"error\"]\n             },\n             \"maxEntrypointSize\": {\n               \"description\": \"Total size of an entry point (in bytes)\","
      },
      {
        "sha": "6ebebcc5fecd9395ac9ef08ca4112fec7555c53c",
        "filename": "schemas/plugins/BannerPlugin.json",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FBannerPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FBannerPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2FBannerPlugin.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -34,9 +34,7 @@\n     {\n       \"type\": \"object\",\n       \"additionalProperties\": false,\n-      \"required\": [\n-        \"banner\"\n-      ],\n+      \"required\": [\"banner\"],\n       \"properties\": {\n         \"banner\": {\n           \"description\": \"Specifies the banner\","
      },
      {
        "sha": "c8ea5402f31d6cc5c1fb874a3df7ee29fcaa56b0",
        "filename": "schemas/plugins/DllPlugin.json",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FDllPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FDllPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2FDllPlugin.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -1,8 +1,6 @@\n {\n   \"additionalProperties\": false,\n-  \"required\": [\n-    \"path\"\n-  ],\n+  \"required\": [\"path\"],\n   \"properties\": {\n     \"context\": {\n       \"description\": \"Context of requests in the manifest file (defaults to the webpack context)\","
      },
      {
        "sha": "cd0c9ba86712562cb8b0ff4030848d97f0d8a309",
        "filename": "schemas/plugins/DllReferencePlugin.json",
        "status": "modified",
        "additions": 3,
        "deletions": 10,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FDllReferencePlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FDllReferencePlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2FDllReferencePlugin.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -2,14 +2,10 @@\n   \"additionalProperties\": false,\n   \"anyOf\": [\n     {\n-      \"required\": [\n-        \"manifest\"\n-      ]\n+      \"required\": [\"manifest\"]\n     },\n     {\n-      \"required\": [\n-        \"content\"\n-      ]\n+      \"required\": [\"content\"]\n     }\n   ],\n   \"properties\": {\n@@ -60,10 +56,7 @@\n     },\n     \"type\": {\n       \"description\": \"The way how the export of the dll bundle is used\",\n-      \"enum\": [\n-        \"require\",\n-        \"object\"\n-      ]\n+      \"enum\": [\"require\", \"object\"]\n     },\n     \"scope\": {\n       \"description\": \"Prefix which is used for accessing the content of the dll\","
      },
      {
        "sha": "30c6c71cc5ae15e102ab46e3f52f06f8e63b9cb9",
        "filename": "schemas/plugins/HashedModuleIdsPlugin.json",
        "status": "modified",
        "additions": 1,
        "deletions": 5,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FHashedModuleIdsPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FHashedModuleIdsPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2FHashedModuleIdsPlugin.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -9,11 +9,7 @@\n     },\n     \"hashDigest\": {\n       \"description\": \"The encoding to use when generating the hash, defaults to 'base64'. All encodings from Node.JS' hash.digest are supported.\",\n-      \"enum\": [\n-        \"hex\",\n-        \"latin1\",\n-        \"base64\"\n-      ]\n+      \"enum\": [\"hex\", \"latin1\", \"base64\"]\n     },\n     \"hashDigestLength\": {\n       \"description\": \"The prefix length of the hash digest to use, defaults to 4.\","
      },
      {
        "sha": "e0f7d9b210bb0510787aa76548c477e167272ad8",
        "filename": "schemas/plugins/SourceMapDevToolPlugin.json",
        "status": "modified",
        "additions": 2,
        "deletions": 8,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FSourceMapDevToolPlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2FSourceMapDevToolPlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2FSourceMapDevToolPlugin.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -62,10 +62,7 @@\n       \"oneOf\": [\n         {\n           \"description\": \"Disable separate SourceMap file and inline SourceMap as DataUrl\",\n-          \"enum\": [\n-            false,\n-            null\n-          ]\n+          \"enum\": [false, null]\n         },\n         {\n           \"type\": \"string\",\n@@ -79,10 +76,7 @@\n       \"oneOf\": [\n         {\n           \"description\": \"Append no SourceMap comment to the bundle, but still generate SourceMaps\",\n-          \"enum\": [\n-            false,\n-            null\n-          ]\n+          \"enum\": [false, null]\n         },\n         {\n           \"minLength\": 1,"
      },
      {
        "sha": "26b78da993f873e29d54fb387d3da03135851f0b",
        "filename": "schemas/plugins/optimize/MinChunkSizePlugin.json",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2Foptimize%2FMinChunkSizePlugin.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/schemas%2Fplugins%2Foptimize%2FMinChunkSizePlugin.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2Fplugins%2Foptimize%2FMinChunkSizePlugin.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -1,9 +1,7 @@\n {\n   \"additionalProperties\": false,\n   \"type\": \"object\",\n-  \"required\": [\n-    \"minChunkSize\"\n-  ],\n+  \"required\": [\"minChunkSize\"],\n   \"properties\": {\n     \"minChunkSize\": {\n       \"description\": \"Minimum number of characters\","
      },
      {
        "sha": "075c39bfa1202640a005b538f27e3e0474373114",
        "filename": "test/Schemas.lint.js",
        "status": "modified",
        "additions": 0,
        "deletions": 6,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/test%2FSchemas.lint.js",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/test%2FSchemas.lint.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FSchemas.lint.js?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -28,12 +28,6 @@ describe(\"Schemas\", () => {\n \t\t\t});\n \n \t\t\tif (content) {\n-\t\t\t\tit(\"should be formated correctly\", () => {\n-\t\t\t\t\texpect(fileContent.replace(/\\r\\n?/g, \"\\n\")).toBe(\n-\t\t\t\t\t\tJSON.stringify(content, 0, 2) + \"\\n\"\n-\t\t\t\t\t);\n-\t\t\t\t});\n-\n \t\t\t\tconst arrayProperties = [\"oneOf\", \"anyOf\", \"allOf\"];\n \t\t\t\tconst allowedProperties = [\n \t\t\t\t\t\"definitions\","
      },
      {
        "sha": "e94475dc70dbf912a686084ff007701a967bc863",
        "filename": "tsconfig.json",
        "status": "modified",
        "additions": 14,
        "deletions": 14,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/1b886ee3424e7761745d608324a301dc2998b928/tsconfig.json",
        "raw_url": "https://github.com/webpack/webpack/raw/1b886ee3424e7761745d608324a301dc2998b928/tsconfig.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/tsconfig.json?ref=1b886ee3424e7761745d608324a301dc2998b928",
        "patch": "@@ -1,16 +1,16 @@\n {\n-\t\"compilerOptions\": {\n-\t\t\"target\": \"ES2017\",\n-\t\t\"module\": \"commonjs\",\n-\t\t\"lib\": [\"es2017\", \"dom\"],\n-\t\t\"allowJs\": true,\n-\t\t\"checkJs\": true,\n-\t\t\"noEmit\": true,\n-\t\t\"strict\": false,\n-\t\t\"noImplicitThis\": true,\n-\t\t\"alwaysStrict\": true,\n-\t\t\"types\": [\"node\"],\n-\t\t\"esModuleInterop\": true\n-\t},\n-\t\"include\": [\"declarations.d.ts\", \"bin/*.js\", \"lib/**/*.js\", \"tooling/**/*.js\"]\n+  \"compilerOptions\": {\n+    \"target\": \"ES2017\",\n+    \"module\": \"commonjs\",\n+    \"lib\": [\"es2017\", \"dom\"],\n+    \"allowJs\": true,\n+    \"checkJs\": true,\n+    \"noEmit\": true,\n+    \"strict\": false,\n+    \"noImplicitThis\": true,\n+    \"alwaysStrict\": true,\n+    \"types\": [\"node\"],\n+    \"esModuleInterop\": true\n+  },\n+  \"include\": [\"declarations.d.ts\", \"bin/*.js\", \"lib/**/*.js\", \"tooling/**/*.js\"]\n }"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8452",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8452/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8452/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8452/events",
    "html_url": "https://github.com/webpack/webpack/pull/8452",
    "id": 386789442,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjM1NDI0Njgw",
    "number": 8452,
    "title": "add getResolve method to loader context",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-12-03T12:09:40Z",
    "updated_at": "2018-12-04T09:18:57Z",
    "closed_at": "2018-12-04T09:18:53Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8452",
      "html_url": "https://github.com/webpack/webpack/pull/8452",
      "diff_url": "https://github.com/webpack/webpack/pull/8452.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8452.patch",
      "merged_at": "2018-12-04T09:18:53Z"
    },
    "body": "with allows to pass options\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nnew `getResolve` method in loader context. An optional `options` object is merged with the original resolve options in the current module. For performance reasons try to pass the same object identity for every call.\r\n\r\n``` js\r\ngetResolve(options?: Object) => ResolveFunction\r\n\r\nResolveFunction = (context: string, request: string, callback: ResolveCallback) => void\r\nResolveFunction = (context: string, request: string) => Promise<string>\r\n\r\nResolveCallback = (err?: Error, path?: string, data?: Object) => void\r\n```\r\n\r\n\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8452/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "3e9dc55554a2256e10250171f05c8356b19603d0",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/56feccc3699d1c2bf29e2482670eccd97704fb8b/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/56feccc3699d1c2bf29e2482670eccd97704fb8b/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=56feccc3699d1c2bf29e2482670eccd97704fb8b",
        "patch": "@@ -184,6 +184,21 @@ class NormalModule extends Module {\n \t\t\tresolve(context, request, callback) {\n \t\t\t\tresolver.resolve({}, context, request, {}, callback);\n \t\t\t},\n+\t\t\tgetResolve(options) {\n+\t\t\t\tconst child = options ? resolver.withOptions(options) : resolver;\n+\t\t\t\treturn (context, request, callback) => {\n+\t\t\t\t\tif (callback) {\n+\t\t\t\t\t\tchild.resolve({}, context, request, {}, callback);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\treturn new Promise((resolve, reject) => {\n+\t\t\t\t\t\t\tchild.resolve({}, context, request, {}, (err, result) => {\n+\t\t\t\t\t\t\t\tif (err) reject(err);\n+\t\t\t\t\t\t\t\telse resolve(result);\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n+\t\t\t\t};\n+\t\t\t},\n \t\t\temitFile: (name, content, sourceMap) => {\n \t\t\t\tif (!this.buildInfo.assets) {\n \t\t\t\t\tthis.buildInfo.assets = Object.create(null);"
      },
      {
        "sha": "80c5e8b685c91ec6c4ee715f0224d174572b4c9a",
        "filename": "lib/ResolverFactory.js",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/56feccc3699d1c2bf29e2482670eccd97704fb8b/lib%2FResolverFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/56feccc3699d1c2bf29e2482670eccd97704fb8b/lib%2FResolverFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FResolverFactory.js?ref=56feccc3699d1c2bf29e2482670eccd97704fb8b",
        "patch": "@@ -7,6 +7,8 @@\n const { Tapable, HookMap, SyncHook, SyncWaterfallHook } = require(\"tapable\");\n const Factory = require(\"enhanced-resolve\").ResolverFactory;\n \n+/** @typedef {import(\"enhanced-resolve\").Resolver} Resolver */\n+\n module.exports = class ResolverFactory extends Tapable {\n \tconstructor() {\n \t\tsuper();\n@@ -53,11 +55,22 @@ module.exports = class ResolverFactory extends Tapable {\n \t}\n \n \t_create(type, resolveOptions) {\n+\t\tconst originalResolveOptions = Object.assign({}, resolveOptions);\n \t\tresolveOptions = this.hooks.resolveOptions.for(type).call(resolveOptions);\n \t\tconst resolver = Factory.createResolver(resolveOptions);\n \t\tif (!resolver) {\n \t\t\tthrow new Error(\"No resolver created\");\n \t\t}\n+\t\t/** @type {Map<Object, Resolver>} */\n+\t\tconst childCache = new Map();\n+\t\tresolver.withOptions = options => {\n+\t\t\tconst cacheEntry = childCache.get(options);\n+\t\t\tif (cacheEntry !== undefined) return cacheEntry;\n+\t\t\tconst mergedOptions = Object.assign({}, originalResolveOptions, options);\n+\t\t\tconst resolver = this.get(type, mergedOptions);\n+\t\t\tchildCache.set(options, resolver);\n+\t\t\treturn resolver;\n+\t\t};\n \t\tthis.hooks.resolver.for(type).call(resolver, resolveOptions);\n \t\treturn resolver;\n \t}"
      },
      {
        "sha": "07e030a14e8b0c1151d9e167bd9b8a45095f7aeb",
        "filename": "test/cases/loaders/resolve/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/56feccc3699d1c2bf29e2482670eccd97704fb8b/test%2Fcases%2Floaders%2Fresolve%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/56feccc3699d1c2bf29e2482670eccd97704fb8b/test%2Fcases%2Floaders%2Fresolve%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Floaders%2Fresolve%2Findex.js?ref=56feccc3699d1c2bf29e2482670eccd97704fb8b",
        "patch": "@@ -0,0 +1,7 @@\n+it(\"should be possible to create resolver with different options\", () => {\n+\tconst result = require(\"./loader!\");\n+\texpect(result).toEqual({\n+\t\tone: \"index.js\",\n+\t\ttwo: \"index.xyz\"\n+\t});\n+})"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/cases/loaders/resolve/index.xyz",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/56feccc3699d1c2bf29e2482670eccd97704fb8b/test%2Fcases%2Floaders%2Fresolve%2Findex.xyz",
        "raw_url": "https://github.com/webpack/webpack/raw/56feccc3699d1c2bf29e2482670eccd97704fb8b/test%2Fcases%2Floaders%2Fresolve%2Findex.xyz",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Floaders%2Fresolve%2Findex.xyz?ref=56feccc3699d1c2bf29e2482670eccd97704fb8b"
      },
      {
        "sha": "3e558112742e952ea8286f5f7cbeb0f88c39f7fc",
        "filename": "test/cases/loaders/resolve/loader.js",
        "status": "added",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/56feccc3699d1c2bf29e2482670eccd97704fb8b/test%2Fcases%2Floaders%2Fresolve%2Floader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/56feccc3699d1c2bf29e2482670eccd97704fb8b/test%2Fcases%2Floaders%2Fresolve%2Floader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Floaders%2Fresolve%2Floader.js?ref=56feccc3699d1c2bf29e2482670eccd97704fb8b",
        "patch": "@@ -0,0 +1,16 @@\n+const path = require(\"path\");\n+module.exports = function() {\n+\tconst resolve1 = this.getResolve();\n+\tconst resolve2 = this.getResolve({\n+\t\textensions: [\".xyz\", \".js\"]\n+\t});\n+\treturn Promise.all([\n+\t\tresolve1(__dirname, \"./index\"),\n+\t\tresolve2(__dirname, \"./index\")\n+\t]).then(([one, two]) => {\n+\t\treturn `module.exports = ${JSON.stringify({\n+\t\t\tone: path.basename(one),\n+\t\t\ttwo: path.basename(two),\n+\t\t})}`;\n+\t});\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8451",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8451/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8451/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8451/events",
    "html_url": "https://github.com/webpack/webpack/pull/8451",
    "id": 386764341,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjM1NDA1Mjgx",
    "number": 8451,
    "title": "enforce doesn't affect minSize for maxSize",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-12-03T10:59:55Z",
    "updated_at": "2018-12-03T11:42:55Z",
    "closed_at": "2018-12-03T11:42:51Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8451",
      "html_url": "https://github.com/webpack/webpack/pull/8451",
      "diff_url": "https://github.com/webpack/webpack/pull/8451.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8451.patch",
      "merged_at": "2018-12-03T11:42:51Z"
    },
    "body": "enforce now works as documented\r\nemit warning for minSize > maxSize configuration\r\nperformance improvements\r\nbugfix when multiple cacheGroups have the same name\r\n\r\nfixes #8407\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes, but a bugfix\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n`enforce` now works as documented.\r\n\r\n> Tells webpack to ignore splitChunks.minSize, splitChunks.maxSize, splitChunks.minChunks, splitChunks.maxAsyncRequests and splitChunks.maxInitialRequests options and always create chunks for this cache group.\r\n\r\nBut there is a little error in the documentation as `splitChunks.maxSize` is not ignored.\r\n\r\nTells webpack to ignore splitChunks.minSize, splitChunks.minChunks, splitChunks.maxAsyncRequests and splitChunks.maxInitialRequests options and always create chunks for this cache group.\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8451/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8451/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "255e918773f1c92b8631c958e40e2c3959713742",
        "filename": "lib/optimize/MinMaxSizeWarning.js",
        "status": "added",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/3b46b48fa73bf659c064fc11c48b2f54acf653d2/lib%2Foptimize%2FMinMaxSizeWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b46b48fa73bf659c064fc11c48b2f54acf653d2/lib%2Foptimize%2FMinMaxSizeWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FMinMaxSizeWarning.js?ref=3b46b48fa73bf659c064fc11c48b2f54acf653d2",
        "patch": "@@ -0,0 +1,29 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\"use strict\";\n+\n+const WebpackError = require(\"../WebpackError\");\n+const SizeFormatHelpers = require(\"../SizeFormatHelpers\");\n+\n+class MinMaxSizeWarning extends WebpackError {\n+\tconstructor(keys, minSize, maxSize) {\n+\t\tlet keysMessage = \"Fallback cache group\";\n+\t\tif (keys) {\n+\t\t\tkeysMessage =\n+\t\t\t\tkeys.length > 1\n+\t\t\t\t\t? `Cache groups ${keys.sort().join(\", \")}`\n+\t\t\t\t\t: `Cache group ${keys[0]}`;\n+\t\t}\n+\t\tsuper(\n+\t\t\t`SplitChunksPlugin\\n` +\n+\t\t\t\t`${keysMessage}\\n` +\n+\t\t\t\t`Configured minSize (${SizeFormatHelpers.formatSize(minSize)}) is ` +\n+\t\t\t\t`bigger than maxSize (${SizeFormatHelpers.formatSize(maxSize)}).\\n` +\n+\t\t\t\t\"This seem to be a invalid optimiziation.splitChunks configuration.\"\n+\t\t);\n+\t}\n+}\n+\n+module.exports = MinMaxSizeWarning;"
      },
      {
        "sha": "57d286c34092ed2e422ed39b45db81b8d6717c56",
        "filename": "lib/optimize/SplitChunksPlugin.js",
        "status": "modified",
        "additions": 122,
        "deletions": 79,
        "changes": 201,
        "blob_url": "https://github.com/webpack/webpack/blob/3b46b48fa73bf659c064fc11c48b2f54acf653d2/lib%2Foptimize%2FSplitChunksPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b46b48fa73bf659c064fc11c48b2f54acf653d2/lib%2Foptimize%2FSplitChunksPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSplitChunksPlugin.js?ref=3b46b48fa73bf659c064fc11c48b2f54acf653d2",
        "patch": "@@ -9,6 +9,7 @@ const SortableSet = require(\"../util/SortableSet\");\n const GraphHelpers = require(\"../GraphHelpers\");\n const { isSubset } = require(\"../util/SetHelpers\");\n const deterministicGrouping = require(\"../util/deterministicGrouping\");\n+const MinMaxSizeWarning = require(\"./MinMaxSizeWarning\");\n const contextify = require(\"../util/identifier\").contextify;\n \n /** @typedef {import(\"../Compiler\")} Compiler */\n@@ -96,6 +97,8 @@ const compareEntries = (a, b) => {\n \t}\n };\n \n+const compareNumbers = (a, b) => a - b;\n+\n const INITIAL_CHUNK_FILTER = chunk => chunk.canBeInitial();\n const ASYNC_CHUNK_FILTER = chunk => !chunk.canBeInitial();\n const ALL_CHUNK_FILTER = chunk => true;\n@@ -340,7 +343,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t}\n \t\t\t\t\tconst getKey = chunks => {\n \t\t\t\t\t\treturn Array.from(chunks, c => indexMap.get(c))\n-\t\t\t\t\t\t\t.sort()\n+\t\t\t\t\t\t\t.sort(compareNumbers)\n \t\t\t\t\t\t\t.join();\n \t\t\t\t\t};\n \t\t\t\t\t/** @type {Map<string, Set<Chunk>>} */\n@@ -436,6 +439,7 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t * @property {SortableSet} modules\n \t\t\t\t\t * @property {TODO} cacheGroup\n \t\t\t\t\t * @property {string} name\n+\t\t\t\t\t * @property {boolean} validateSize\n \t\t\t\t\t * @property {number} size\n \t\t\t\t\t * @property {Set<Chunk>} chunks\n \t\t\t\t\t * @property {Set<Chunk>} reuseableChunks\n@@ -461,7 +465,11 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\tmodule\n \t\t\t\t\t) => {\n \t\t\t\t\t\t// Break if minimum number of chunks is not reached\n-\t\t\t\t\t\tif (selectedChunks.length < cacheGroup.minChunks) return;\n+\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t!cacheGroup.enforce &&\n+\t\t\t\t\t\t\tselectedChunks.length < cacheGroup.minChunks\n+\t\t\t\t\t\t)\n+\t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t// Determine name for split chunk\n \t\t\t\t\t\tconst name = cacheGroup.getName(\n \t\t\t\t\t\t\tmodule,\n@@ -473,8 +481,8 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t// Elsewise we create the key from chunks and cache group key\n \t\t\t\t\t\t// This automatically merges equal names\n \t\t\t\t\t\tconst key =\n-\t\t\t\t\t\t\t(name && `name:${name}`) ||\n-\t\t\t\t\t\t\t`chunks:${selectedChunksKey} key:${cacheGroup.key}`;\n+\t\t\t\t\t\t\tcacheGroup.key +\n+\t\t\t\t\t\t\t(name ? ` name:${name}` : ` chunks:${selectedChunksKey}`);\n \t\t\t\t\t\t// Add module to maps\n \t\t\t\t\t\tlet info = chunksInfoMap.get(key);\n \t\t\t\t\t\tif (info === undefined) {\n@@ -484,21 +492,18 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\t\tmodules: new SortableSet(undefined, sortByIdentifier),\n \t\t\t\t\t\t\t\t\tcacheGroup,\n \t\t\t\t\t\t\t\t\tname,\n+\t\t\t\t\t\t\t\t\tvalidateSize: !cacheGroup.enforce && cacheGroup.minSize > 0,\n \t\t\t\t\t\t\t\t\tsize: 0,\n \t\t\t\t\t\t\t\t\tchunks: new Set(),\n \t\t\t\t\t\t\t\t\treuseableChunks: new Set(),\n \t\t\t\t\t\t\t\t\tchunksKeys: new Set()\n \t\t\t\t\t\t\t\t})\n \t\t\t\t\t\t\t);\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tif (info.cacheGroup !== cacheGroup) {\n-\t\t\t\t\t\t\t\tif (info.cacheGroup.priority < cacheGroup.priority) {\n-\t\t\t\t\t\t\t\t\tinfo.cacheGroup = cacheGroup;\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinfo.modules.add(module);\n-\t\t\t\t\t\tinfo.size += module.size();\n+\t\t\t\t\t\tif (info.validateSize) {\n+\t\t\t\t\t\t\tinfo.size += module.size();\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tif (!info.chunksKeys.has(selectedChunksKey)) {\n \t\t\t\t\t\t\tinfo.chunksKeys.add(selectedChunksKey);\n \t\t\t\t\t\t\tfor (const chunk of selectedChunks) {\n@@ -529,36 +534,27 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\tpriority: cacheGroupSource.priority || 0,\n \t\t\t\t\t\t\t\tchunksFilter:\n \t\t\t\t\t\t\t\t\tcacheGroupSource.chunksFilter || this.options.chunksFilter,\n+\t\t\t\t\t\t\t\tenforce: cacheGroupSource.enforce,\n \t\t\t\t\t\t\t\tminSize:\n \t\t\t\t\t\t\t\t\tcacheGroupSource.minSize !== undefined\n \t\t\t\t\t\t\t\t\t\t? cacheGroupSource.minSize\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t\t? 0\n-\t\t\t\t\t\t\t\t\t\t\t: this.options.minSize,\n+\t\t\t\t\t\t\t\t\t\t: this.options.minSize,\n \t\t\t\t\t\t\t\tmaxSize:\n \t\t\t\t\t\t\t\t\tcacheGroupSource.maxSize !== undefined\n \t\t\t\t\t\t\t\t\t\t? cacheGroupSource.maxSize\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t\t? 0\n-\t\t\t\t\t\t\t\t\t\t\t: this.options.maxSize,\n+\t\t\t\t\t\t\t\t\t\t: this.options.maxSize,\n \t\t\t\t\t\t\t\tminChunks:\n \t\t\t\t\t\t\t\t\tcacheGroupSource.minChunks !== undefined\n \t\t\t\t\t\t\t\t\t\t? cacheGroupSource.minChunks\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t\t? 1\n-\t\t\t\t\t\t\t\t\t\t\t: this.options.minChunks,\n+\t\t\t\t\t\t\t\t\t\t: this.options.minChunks,\n \t\t\t\t\t\t\t\tmaxAsyncRequests:\n \t\t\t\t\t\t\t\t\tcacheGroupSource.maxAsyncRequests !== undefined\n \t\t\t\t\t\t\t\t\t\t? cacheGroupSource.maxAsyncRequests\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t\t? Infinity\n-\t\t\t\t\t\t\t\t\t\t\t: this.options.maxAsyncRequests,\n+\t\t\t\t\t\t\t\t\t\t: this.options.maxAsyncRequests,\n \t\t\t\t\t\t\t\tmaxInitialRequests:\n \t\t\t\t\t\t\t\t\tcacheGroupSource.maxInitialRequests !== undefined\n \t\t\t\t\t\t\t\t\t\t? cacheGroupSource.maxInitialRequests\n-\t\t\t\t\t\t\t\t\t\t: cacheGroupSource.enforce\n-\t\t\t\t\t\t\t\t\t\t\t? Infinity\n-\t\t\t\t\t\t\t\t\t\t\t: this.options.maxInitialRequests,\n+\t\t\t\t\t\t\t\t\t\t: this.options.maxInitialRequests,\n \t\t\t\t\t\t\t\tgetName:\n \t\t\t\t\t\t\t\t\tcacheGroupSource.getName !== undefined\n \t\t\t\t\t\t\t\t\t\t? cacheGroupSource.getName\n@@ -576,7 +572,11 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t// For all combination of chunk selection\n \t\t\t\t\t\t\tfor (const chunkCombination of combs) {\n \t\t\t\t\t\t\t\t// Break if minimum number of chunks is not reached\n-\t\t\t\t\t\t\t\tif (chunkCombination.size < cacheGroup.minChunks) continue;\n+\t\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\t\t!cacheGroup.enforce &&\n+\t\t\t\t\t\t\t\t\tchunkCombination.size < cacheGroup.minChunks\n+\t\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t\t\t// Select chunks by configuration\n \t\t\t\t\t\t\t\tconst {\n \t\t\t\t\t\t\t\t\tchunks: selectedChunks,\n@@ -586,17 +586,27 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\t\tcacheGroup.chunksFilter\n \t\t\t\t\t\t\t\t);\n \n-\t\t\t\t\t\t\t\taddModuleToChunksInfoMap(\n-\t\t\t\t\t\t\t\t\tcacheGroup,\n-\t\t\t\t\t\t\t\t\tselectedChunks,\n-\t\t\t\t\t\t\t\t\tselectedChunksKey,\n-\t\t\t\t\t\t\t\t\tmodule\n-\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\tif (selectedChunks.length > 0) {\n+\t\t\t\t\t\t\t\t\taddModuleToChunksInfoMap(\n+\t\t\t\t\t\t\t\t\t\tcacheGroup,\n+\t\t\t\t\t\t\t\t\t\tselectedChunks,\n+\t\t\t\t\t\t\t\t\t\tselectedChunksKey,\n+\t\t\t\t\t\t\t\t\t\tmodule\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \n-\t\t\t\t\t/** @type {Map<Chunk, {minSize: number, maxSize: number, automaticNameDelimiter: string}>} */\n+\t\t\t\t\t// Filter items were size < minSize\n+\t\t\t\t\tfor (const pair of chunksInfoMap) {\n+\t\t\t\t\t\tconst info = pair[1];\n+\t\t\t\t\t\tif (info.validateSize && info.size < info.cacheGroup.minSize) {\n+\t\t\t\t\t\t\tchunksInfoMap.delete(pair[0]);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t/** @type {Map<Chunk, {minSize: number, maxSize: number, automaticNameDelimiter: string, keys: string[]}>} */\n \t\t\t\t\tconst maxSizeQueueMap = new Map();\n \n \t\t\t\t\twhile (chunksInfoMap.size > 0) {\n@@ -606,20 +616,15 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\tfor (const pair of chunksInfoMap) {\n \t\t\t\t\t\t\tconst key = pair[0];\n \t\t\t\t\t\t\tconst info = pair[1];\n-\t\t\t\t\t\t\tif (info.size >= info.cacheGroup.minSize) {\n-\t\t\t\t\t\t\t\tif (bestEntry === undefined) {\n-\t\t\t\t\t\t\t\t\tbestEntry = info;\n-\t\t\t\t\t\t\t\t\tbestEntryKey = key;\n-\t\t\t\t\t\t\t\t} else if (compareEntries(bestEntry, info) < 0) {\n-\t\t\t\t\t\t\t\t\tbestEntry = info;\n-\t\t\t\t\t\t\t\t\tbestEntryKey = key;\n-\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tif (bestEntry === undefined) {\n+\t\t\t\t\t\t\t\tbestEntry = info;\n+\t\t\t\t\t\t\t\tbestEntryKey = key;\n+\t\t\t\t\t\t\t} else if (compareEntries(bestEntry, info) < 0) {\n+\t\t\t\t\t\t\t\tbestEntry = info;\n+\t\t\t\t\t\t\t\tbestEntryKey = key;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \n-\t\t\t\t\t\t// No suitable item left\n-\t\t\t\t\t\tif (bestEntry === undefined) break;\n-\n \t\t\t\t\t\tconst item = bestEntry;\n \t\t\t\t\t\tchunksInfoMap.delete(bestEntryKey);\n \n@@ -666,29 +671,41 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t// Skip when no chunk selected\n \t\t\t\t\t\tif (usedChunks.length === 0) continue;\n \n-\t\t\t\t\t\tconst chunkInLimit = usedChunks.filter(chunk => {\n-\t\t\t\t\t\t\t// respect max requests when not enforced\n-\t\t\t\t\t\t\tconst maxRequests = chunk.isOnlyInitial()\n-\t\t\t\t\t\t\t\t? item.cacheGroup.maxInitialRequests\n-\t\t\t\t\t\t\t\t: chunk.canBeInitial()\n-\t\t\t\t\t\t\t\t\t? Math.min(\n-\t\t\t\t\t\t\t\t\t\t\titem.cacheGroup.maxInitialRequests,\n-\t\t\t\t\t\t\t\t\t\t\titem.cacheGroup.maxAsyncRequests\n-\t\t\t\t\t\t\t\t\t  )\n-\t\t\t\t\t\t\t\t\t: item.cacheGroup.maxAsyncRequests;\n-\t\t\t\t\t\t\treturn !isFinite(maxRequests) || getRequests(chunk) < maxRequests;\n-\t\t\t\t\t\t});\n-\n-\t\t\t\t\t\tif (chunkInLimit.length < usedChunks.length) {\n-\t\t\t\t\t\t\tfor (const module of item.modules) {\n-\t\t\t\t\t\t\t\taddModuleToChunksInfoMap(\n-\t\t\t\t\t\t\t\t\titem.cacheGroup,\n-\t\t\t\t\t\t\t\t\tchunkInLimit,\n-\t\t\t\t\t\t\t\t\tgetKey(chunkInLimit),\n-\t\t\t\t\t\t\t\t\tmodule\n+\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t!item.cacheGroup.enforce &&\n+\t\t\t\t\t\t\t(Number.isFinite(item.cacheGroup.maxInitialRequests) ||\n+\t\t\t\t\t\t\t\tNumber.isFinite(item.cacheGroup.maxAsyncRequests))\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\tconst chunkInLimit = usedChunks.filter(chunk => {\n+\t\t\t\t\t\t\t\t// respect max requests when not enforced\n+\t\t\t\t\t\t\t\tconst maxRequests = chunk.isOnlyInitial()\n+\t\t\t\t\t\t\t\t\t? item.cacheGroup.maxInitialRequests\n+\t\t\t\t\t\t\t\t\t: chunk.canBeInitial()\n+\t\t\t\t\t\t\t\t\t\t? Math.min(\n+\t\t\t\t\t\t\t\t\t\t\t\titem.cacheGroup.maxInitialRequests,\n+\t\t\t\t\t\t\t\t\t\t\t\titem.cacheGroup.maxAsyncRequests\n+\t\t\t\t\t\t\t\t\t\t  )\n+\t\t\t\t\t\t\t\t\t\t: item.cacheGroup.maxAsyncRequests;\n+\t\t\t\t\t\t\t\treturn (\n+\t\t\t\t\t\t\t\t\t!isFinite(maxRequests) || getRequests(chunk) < maxRequests\n \t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t});\n+\n+\t\t\t\t\t\t\tif (chunkInLimit.length < usedChunks.length) {\n+\t\t\t\t\t\t\t\t// We do not need to check enforce here as it was\n+\t\t\t\t\t\t\t\t// already checked above.\n+\t\t\t\t\t\t\t\tif (chunkInLimit.length >= item.cacheGroup.minChunks) {\n+\t\t\t\t\t\t\t\t\tfor (const module of item.modules) {\n+\t\t\t\t\t\t\t\t\t\taddModuleToChunksInfoMap(\n+\t\t\t\t\t\t\t\t\t\t\titem.cacheGroup,\n+\t\t\t\t\t\t\t\t\t\t\tchunkInLimit,\n+\t\t\t\t\t\t\t\t\t\t\tgetKey(chunkInLimit),\n+\t\t\t\t\t\t\t\t\t\t\tmodule\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tcontinue;\n \t\t\t\t\t\t}\n \n \t\t\t\t\t\t// Create the new chunk if not reusing one\n@@ -764,36 +781,62 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\t\toldMaxSizeSettings ? oldMaxSizeSettings.maxSize : Infinity,\n \t\t\t\t\t\t\t\t\titem.cacheGroup.maxSize\n \t\t\t\t\t\t\t\t),\n-\t\t\t\t\t\t\t\tautomaticNameDelimiter: item.cacheGroup.automaticNameDelimiter\n+\t\t\t\t\t\t\t\tautomaticNameDelimiter: item.cacheGroup.automaticNameDelimiter,\n+\t\t\t\t\t\t\t\tkeys: oldMaxSizeSettings\n+\t\t\t\t\t\t\t\t\t? oldMaxSizeSettings.keys.concat(item.cacheGroup.key)\n+\t\t\t\t\t\t\t\t\t: [item.cacheGroup.key]\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \n \t\t\t\t\t\t// remove all modules from other entries and update size\n \t\t\t\t\t\tfor (const [key, info] of chunksInfoMap) {\n \t\t\t\t\t\t\tif (isOverlap(info.chunks, item.chunks)) {\n-\t\t\t\t\t\t\t\tconst oldSize = info.modules.size;\n-\t\t\t\t\t\t\t\tfor (const module of item.modules) {\n-\t\t\t\t\t\t\t\t\tinfo.modules.delete(module);\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tif (info.modules.size === 0) {\n-\t\t\t\t\t\t\t\t\tchunksInfoMap.delete(key);\n-\t\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tif (info.modules.size !== oldSize) {\n-\t\t\t\t\t\t\t\t\tinfo.size = getModulesSize(info.modules);\n-\t\t\t\t\t\t\t\t\tif (info.size < info.cacheGroup.minSize) {\n+\t\t\t\t\t\t\t\tif (info.validateSize) {\n+\t\t\t\t\t\t\t\t\t// update modules and total size\n+\t\t\t\t\t\t\t\t\t// may remove it from the map when < minSize\n+\t\t\t\t\t\t\t\t\tconst oldSize = info.modules.size;\n+\t\t\t\t\t\t\t\t\tfor (const module of item.modules) {\n+\t\t\t\t\t\t\t\t\t\tinfo.modules.delete(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tif (info.modules.size === 0) {\n+\t\t\t\t\t\t\t\t\t\tchunksInfoMap.delete(key);\n+\t\t\t\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tif (info.modules.size !== oldSize) {\n+\t\t\t\t\t\t\t\t\t\tinfo.size = getModulesSize(info.modules);\n+\t\t\t\t\t\t\t\t\t\tif (info.size < info.cacheGroup.minSize) {\n+\t\t\t\t\t\t\t\t\t\t\tchunksInfoMap.delete(key);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t// only update the modules\n+\t\t\t\t\t\t\t\t\tfor (const module of item.modules) {\n+\t\t\t\t\t\t\t\t\t\tinfo.modules.delete(module);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tif (info.modules.size === 0) {\n \t\t\t\t\t\t\t\t\t\tchunksInfoMap.delete(key);\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \n+\t\t\t\t\tconst incorrectMinMaxSizeSet = new Set();\n+\n \t\t\t\t\t// Make sure that maxSize is fulfilled\n \t\t\t\t\tfor (const chunk of compilation.chunks.slice()) {\n-\t\t\t\t\t\tconst { minSize, maxSize, automaticNameDelimiter } =\n+\t\t\t\t\t\tconst { minSize, maxSize, automaticNameDelimiter, keys } =\n \t\t\t\t\t\t\tmaxSizeQueueMap.get(chunk) || this.options.fallbackCacheGroup;\n \t\t\t\t\t\tif (!maxSize) continue;\n+\t\t\t\t\t\tif (minSize > maxSize) {\n+\t\t\t\t\t\t\tconst warningKey = `${keys && keys.join()} ${minSize} ${maxSize}`;\n+\t\t\t\t\t\t\tif (!incorrectMinMaxSizeSet.has(warningKey)) {\n+\t\t\t\t\t\t\t\tincorrectMinMaxSizeSet.add(warningKey);\n+\t\t\t\t\t\t\t\tcompilation.warnings.push(\n+\t\t\t\t\t\t\t\t\tnew MinMaxSizeWarning(keys, minSize, maxSize)\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tconst results = deterministicGroupingForModules({\n \t\t\t\t\t\t\tmaxSize: Math.max(minSize, maxSize),\n \t\t\t\t\t\t\tminSize,"
      },
      {
        "sha": "98e10b3926c14a77ade635a26d356d4417d1c877",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 88,
        "deletions": 3,
        "changes": 91,
        "blob_url": "https://github.com/webpack/webpack/blob/3b46b48fa73bf659c064fc11c48b2f54acf653d2/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/3b46b48fa73bf659c064fc11c48b2f54acf653d2/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=3b46b48fa73bf659c064fc11c48b2f54acf653d2",
        "patch": "@@ -2696,7 +2696,7 @@ Child custom-chunks-filter-in-cache-groups:\n \n exports[`StatsTestCases should print correct stats for split-chunks-automatic-name 1`] = `\n \"Entrypoint main = main.js\n-chunk    {0} common~async-a~async-b~async-c.js (common~async-a~async-b~async-c) 40 bytes <{7}> ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= [rendered] split chunk (cache group: vendors) (name: common~async-a~async-b~async-c)\n+chunk    {0} common~async-a~async-b~async-c.js (common~async-a~async-b~async-c) 40 bytes <{7}> ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= [rendered] split chunk (cache group: default) (name: common~async-a~async-b~async-c)\n     > ./a [0] ./index.js 1:0-47\n     > ./b [0] ./index.js 2:0-47\n     > ./c [0] ./index.js 3:0-47\n@@ -2706,7 +2706,7 @@ chunk    {1} common~async-a~async-b.js (common~async-a~async-b) 20 bytes <{7}> =\n     > ./a [0] ./index.js 1:0-47\n     > ./b [0] ./index.js 2:0-47\n  [6] ./node_modules/y.js 20 bytes {1} [built]\n-chunk    {2} common~async-b~async-c.js (common~async-b~async-c) 20 bytes <{7}> ={0}= ={1}= ={4}= ={5}= ={6}= [rendered] split chunk (cache group: vendors) (name: common~async-b~async-c)\n+chunk    {2} common~async-b~async-c.js (common~async-b~async-c) 20 bytes <{7}> ={0}= ={1}= ={4}= ={5}= ={6}= [rendered] split chunk (cache group: default) (name: common~async-b~async-c)\n     > ./b [0] ./index.js 2:0-47\n     > ./c [0] ./index.js 3:0-47\n  [7] ./f.js 20 bytes {2} [built]\n@@ -3040,6 +3040,16 @@ Child switched:\n      [41] ./node_modules/small.js?1 67 bytes {8} [built]\n      [42] ./node_modules/small.js?2 67 bytes {8} [built]\n      [43] ./node_modules/very-big.js?1 1.57 KiB {8} [built]\n+    \n+    WARNING in SplitChunksPlugin\n+    Cache group vendors\n+    Configured minSize (1000 bytes) is bigger than maxSize (100 bytes).\n+    This seem to be a invalid optimiziation.splitChunks configuration.\n+    \n+    WARNING in SplitChunksPlugin\n+    Fallback cache group\n+    Configured minSize (1000 bytes) is bigger than maxSize (100 bytes).\n+    This seem to be a invalid optimiziation.splitChunks configuration.\n Child zero-min:\n     Entrypoint main = zero-min-vendors~main~7274e1de.js zero-min-vendors~main~0feae4ad.js zero-min-main~6e7ead72.js zero-min-main~6a2ae26b.js zero-min-main~17acad98.js zero-min-main~b2c7414a.js zero-min-main~75f09de8.js zero-min-main~052b3814.js zero-min-main~3ff27526.js zero-min-main~11485824.js zero-min-main~c6931360.js zero-min-main~cd7c5bfc.js zero-min-main~02369f19.js\n     chunk    {0} zero-min-main~02369f19.js (main~02369f19) 1.57 KiB ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= [entry] [rendered]\n@@ -3112,7 +3122,82 @@ Child zero-min:\n         > ./ main\n      [40] ./node_modules/big.js?1 268 bytes {12} [built]\n      [41] ./node_modules/small.js?1 67 bytes {12} [built]\n-     [42] ./node_modules/small.js?2 67 bytes {12} [built]\"\n+     [42] ./node_modules/small.js?2 67 bytes {12} [built]\n+Child enforce-min-size:\n+    Entrypoint main = enforce-min-size-all~main~6e7ead72.js enforce-min-size-all~main~6a2ae26b.js enforce-min-size-all~main~17acad98.js enforce-min-size-all~main~b2c7414a.js enforce-min-size-all~main~75f09de8.js enforce-min-size-all~main~7274e1de.js enforce-min-size-all~main~0feae4ad.js enforce-min-size-all~main~052b3814.js enforce-min-size-all~main~3ff27526.js enforce-min-size-all~main~11485824.js enforce-min-size-all~main~c6931360.js enforce-min-size-all~main~cd7c5bfc.js enforce-min-size-all~main~02369f19.js enforce-min-size-main.js\n+    chunk    {0} enforce-min-size-all~main~02369f19.js (all~main~02369f19) 1.57 KiB ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [11] ./very-big.js?1 1.57 KiB {0} [built]\n+    chunk    {1} enforce-min-size-all~main~052b3814.js (all~main~052b3814) 603 bytes ={0}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+      [2] ./small.js?1 67 bytes {1} [built]\n+      [3] ./small.js?2 67 bytes {1} [built]\n+      [4] ./small.js?3 67 bytes {1} [built]\n+      [5] ./small.js?4 67 bytes {1} [built]\n+      [6] ./small.js?5 67 bytes {1} [built]\n+      [7] ./small.js?6 67 bytes {1} [built]\n+      [8] ./small.js?7 67 bytes {1} [built]\n+      [9] ./small.js?8 67 bytes {1} [built]\n+     [10] ./small.js?9 67 bytes {1} [built]\n+    chunk    {2} enforce-min-size-all~main~0feae4ad.js (all~main~0feae4ad) 1.57 KiB ={0}= ={1}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [43] ./node_modules/very-big.js?1 1.57 KiB {2} [built]\n+    chunk    {3} enforce-min-size-all~main~11485824.js (all~main~11485824) 603 bytes ={0}= ={1}= ={2}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [16] ./subfolder/small.js?1 67 bytes {3} [built]\n+     [17] ./subfolder/small.js?2 67 bytes {3} [built]\n+     [18] ./subfolder/small.js?3 67 bytes {3} [built]\n+     [19] ./subfolder/small.js?4 67 bytes {3} [built]\n+     [20] ./subfolder/small.js?5 67 bytes {3} [built]\n+     [21] ./subfolder/small.js?6 67 bytes {3} [built]\n+     [22] ./subfolder/small.js?7 67 bytes {3} [built]\n+     [23] ./subfolder/small.js?8 67 bytes {3} [built]\n+     [24] ./subfolder/small.js?9 67 bytes {3} [built]\n+    chunk    {4} enforce-min-size-all~main~17acad98.js (all~main~17acad98) 1.57 KiB ={0}= ={1}= ={2}= ={3}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [39] ./in-some-directory/very-big.js?1 1.57 KiB {4} [built]\n+    chunk    {5} enforce-min-size-all~main~3ff27526.js (all~main~3ff27526) 536 bytes ={0}= ={1}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [14] ./subfolder/big.js?1 268 bytes {5} [built]\n+     [15] ./subfolder/big.js?2 268 bytes {5} [built]\n+    chunk    {6} enforce-min-size-all~main~6a2ae26b.js (all~main~6a2ae26b) 536 bytes ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [34] ./in-some-directory/big.js?1 268 bytes {6} [built]\n+     [35] ./in-some-directory/small.js?1 67 bytes {6} [built]\n+     [36] ./in-some-directory/small.js?2 67 bytes {6} [built]\n+     [37] ./in-some-directory/small.js?3 67 bytes {6} [built]\n+     [38] ./in-some-directory/small.js?4 67 bytes {6} [built]\n+    chunk    {7} enforce-min-size-all~main~6e7ead72.js (all~main~6e7ead72) 536 bytes ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={8}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [0] ./big.js?1 268 bytes {7} [built]\n+     [1] ./big.js?2 268 bytes {7} [built]\n+    chunk    {8} enforce-min-size-all~main~7274e1de.js (all~main~7274e1de) 402 bytes ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={9}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [40] ./node_modules/big.js?1 268 bytes {8} [built]\n+     [41] ./node_modules/small.js?1 67 bytes {8} [built]\n+     [42] ./node_modules/small.js?2 67 bytes {8} [built]\n+    chunk    {9} enforce-min-size-all~main~75f09de8.js (all~main~75f09de8) 603 bytes ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={10}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [25] ./inner-module/small.js?1 67 bytes {9} [built]\n+     [26] ./inner-module/small.js?2 67 bytes {9} [built]\n+     [27] ./inner-module/small.js?3 67 bytes {9} [built]\n+     [28] ./inner-module/small.js?4 67 bytes {9} [built]\n+     [29] ./inner-module/small.js?5 67 bytes {9} [built]\n+     [30] ./inner-module/small.js?6 67 bytes {9} [built]\n+     [31] ./inner-module/small.js?7 67 bytes {9} [built]\n+     [32] ./inner-module/small.js?8 67 bytes {9} [built]\n+     [33] ./inner-module/small.js?9 67 bytes {9} [built]\n+    chunk   {10} enforce-min-size-all~main~b2c7414a.js (all~main~b2c7414a) 1.19 KiB ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={11}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [44] ./index.js 1.19 KiB {10} [built]\n+    chunk   {11} enforce-min-size-all~main~c6931360.js (all~main~c6931360) 1.57 KiB ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={12}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [12] ./very-big.js?2 1.57 KiB {11} [built]\n+    chunk   {12} enforce-min-size-all~main~cd7c5bfc.js (all~main~cd7c5bfc) 1.57 KiB ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={13}= [initial] [rendered] split chunk (cache group: all) (name: all~main)\n+        > ./ main\n+     [13] ./very-big.js?3 1.57 KiB {12} [built]\n+    chunk   {13} enforce-min-size-main.js (main) 0 bytes ={0}= ={1}= ={2}= ={3}= ={4}= ={5}= ={6}= ={7}= ={8}= ={9}= ={10}= ={11}= ={12}= [entry] [rendered]\n+        > ./ main\"\n `;\n \n exports[`StatsTestCases should print correct stats for split-chunks-prefer-bigger-splits 1`] = `"
      },
      {
        "sha": "3c68b0d5385bfd091ec716abe8303d063075fd5f",
        "filename": "test/statsCases/split-chunks-max-size/webpack.config.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/3b46b48fa73bf659c064fc11c48b2f54acf653d2/test%2FstatsCases%2Fsplit-chunks-max-size%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3b46b48fa73bf659c064fc11c48b2f54acf653d2/test%2FstatsCases%2Fsplit-chunks-max-size%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-max-size%2Fwebpack.config.js?ref=3b46b48fa73bf659c064fc11c48b2f54acf653d2",
        "patch": "@@ -81,4 +81,27 @@ module.exports = [\n \t\t},\n \t\tstats\n \t},\n+\t{\n+\t\tname: \"enforce-min-size\",\n+\t\tmode: \"production\",\n+\t\tentry: {\n+\t\t\tmain: \"./\"\n+\t\t},\n+\t\toutput: {\n+\t\t\tfilename: \"enforce-min-size-[name].js\"\n+\t\t},\n+\t\toptimization: {\n+\t\t\tsplitChunks: {\n+\t\t\t\tminSize: 100,\n+\t\t\t\tcacheGroups: {\n+\t\t\t\t\tall: {\n+\t\t\t\t\t\tmaxSize: 1000,\n+\t\t\t\t\t\tchunks: \"all\",\n+\t\t\t\t\t\tenforce: true\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t},\n+\t\tstats\n+\t},\n ];"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8181",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8181/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8181/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8181/events",
    "html_url": "https://github.com/webpack/webpack/pull/8181",
    "id": 369621551,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjIyNTIwMjU5",
    "number": 8181,
    "title": "Remove IgnorePlugin compat-layer and fix various TODOs",
    "user": {
      "login": "ooflorent",
      "id": 168498,
      "node_id": "MDQ6VXNlcjE2ODQ5OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/168498?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ooflorent",
      "html_url": "https://github.com/ooflorent",
      "followers_url": "https://api.github.com/users/ooflorent/followers",
      "following_url": "https://api.github.com/users/ooflorent/following{/other_user}",
      "gists_url": "https://api.github.com/users/ooflorent/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ooflorent/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ooflorent/subscriptions",
      "organizations_url": "https://api.github.com/users/ooflorent/orgs",
      "repos_url": "https://api.github.com/users/ooflorent/repos",
      "events_url": "https://api.github.com/users/ooflorent/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ooflorent/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2018-10-12T16:24:46Z",
    "updated_at": "2018-10-17T08:02:35Z",
    "closed_at": "2018-10-17T08:02:31Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8181",
      "html_url": "https://github.com/webpack/webpack/pull/8181",
      "diff_url": "https://github.com/webpack/webpack/pull/8181.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8181.patch",
      "merged_at": "2018-10-17T08:02:31Z"
    },
    "body": "- Remove `Compilation#performance`\r\n- Remove `ContextDependency#prepend`\r\n- Remove `IgnorePlugin` compatibility layer\r\n- Update `EnvironmentPlugin` `TODO` comment\r\n\r\n**What kind of change does this PR introduce?**\r\n\r\nrefactoring\r\n\r\n**Did you add tests for your changes?**\r\n\r\nno\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nyes\r\n\r\n**What needs to be documented once your changes are merged?**\r\n\r\n`IgnorePlugin` documentation is outdated.\r\nThe plugin no longer accepts 2 arguments but an object:\r\n\r\n```js\r\nnew webpack.IgnorePlugin({\r\n  requestRegExp: /^\\.\\/locale$/,\r\n  contextRegExp: /moment$/\r\n})\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8181/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "814217b4e29e413601a208c2b9841d4255c9e662",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3",
        "patch": "@@ -365,8 +365,6 @@ class Compilation {\n \t\tthis.bail = (options && options.bail) || false;\n \t\t/** @type {boolean} */\n \t\tthis.profile = (options && options.profile) || false;\n-\t\t// TODO webpack 5 remove this property\n-\t\tthis.performance = options && options.performance;\n \n \t\tthis.mainTemplate = new MainTemplate(this.outputOptions);\n \t\tthis.chunkTemplate = new ChunkTemplate(this.outputOptions);"
      },
      {
        "sha": "6b76a3452a7d543e51ff26f52cd93805dc660d92",
        "filename": "lib/EnvironmentPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2FEnvironmentPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2FEnvironmentPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FEnvironmentPlugin.js?ref=7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3",
        "patch": "@@ -34,7 +34,7 @@ class EnvironmentPlugin {\n \t */\n \tapply(compiler) {\n \t\tconst definitions = this.keys.reduce((defs, key) => {\n-\t\t\t// TODO remove once the fix has made its way into Node 8.\n+\t\t\t// NOTE remove once the required node version is >=8.10.0.\n \t\t\t// Work around https://github.com/nodejs/node/pull/18463,\n \t\t\t// affecting Node 8 & 9 by performing an OS-level\n \t\t\t// operation that always succeeds before reading"
      },
      {
        "sha": "31b449a6f28e97d4b925ac846aab26287963948d",
        "filename": "lib/IgnorePlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2FIgnorePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2FIgnorePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FIgnorePlugin.js?ref=7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3",
        "patch": "@@ -16,14 +16,6 @@ class IgnorePlugin {\n \t * @param {IgnorePluginOptions} options IgnorePlugin options\n \t */\n \tconstructor(options) {\n-\t\t// TODO webpack 5 remove this compat-layer\n-\t\tif (arguments.length > 1 || options instanceof RegExp) {\n-\t\t\toptions = {\n-\t\t\t\tresourceRegExp: arguments[0],\n-\t\t\t\tcontextRegExp: arguments[1]\n-\t\t\t};\n-\t\t}\n-\n \t\tvalidateOptions(schema, options, \"IgnorePlugin\");\n \t\tthis.options = options;\n "
      },
      {
        "sha": "e2a9ebbccea2776ac66d02558f503413a41e7231",
        "filename": "lib/dependencies/ContextDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2Fdependencies%2FContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2Fdependencies%2FContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FContextDependency.js?ref=7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3",
        "patch": "@@ -31,8 +31,6 @@ class ContextDependency extends Dependency {\n \t\tthis.range = undefined;\n \t\tthis.valueRange = undefined;\n \t\t// TODO refactor this\n-\t\tthis.prepend = undefined;\n-\t\t// TODO refactor this\n \t\tthis.replaces = undefined;\n \t}\n "
      },
      {
        "sha": "b2f225019d6e17b1ddad8d7165197c26d9f6b134",
        "filename": "lib/dependencies/ContextDependencyTemplateAsId.js",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2Fdependencies%2FContextDependencyTemplateAsId.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2Fdependencies%2FContextDependencyTemplateAsId.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FContextDependencyTemplateAsId.js?ref=7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3",
        "patch": "@@ -36,13 +36,10 @@ class ContextDependencyTemplateAsId extends ContextDependency.Template {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tsource.replace(dep.valueRange[1], dep.range[1] - 1, \")\");\n-\t\t\t\t// TODO webpack 5 remove `prepend` it's no longer used\n \t\t\t\tsource.replace(\n \t\t\t\t\tdep.range[0],\n \t\t\t\t\tdep.valueRange[0] - 1,\n-\t\t\t\t\t`${moduleExports}.resolve(${\n-\t\t\t\t\t\ttypeof dep.prepend === \"string\" ? JSON.stringify(dep.prepend) : \"\"\n-\t\t\t\t\t}`\n+\t\t\t\t\t`${moduleExports}.resolve(`\n \t\t\t\t);\n \t\t\t} else {\n \t\t\t\tsource.replace("
      },
      {
        "sha": "f2c435054cc21dbe1d397555588f16aa0dedb416",
        "filename": "lib/dependencies/ContextDependencyTemplateAsRequireCall.js",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2Fdependencies%2FContextDependencyTemplateAsRequireCall.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3/lib%2Fdependencies%2FContextDependencyTemplateAsRequireCall.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FContextDependencyTemplateAsRequireCall.js?ref=7db1d0ce4bb78df68fd03e47f1424f2b4cb946e3",
        "patch": "@@ -35,13 +35,10 @@ class ContextDependencyTemplateAsRequireCall extends ContextDependency.Template\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tsource.replace(dep.valueRange[1], dep.range[1] - 1, \")\");\n-\t\t\t\t// TODO webpack 5 remove `prepend` it's no longer used\n \t\t\t\tsource.replace(\n \t\t\t\t\tdep.range[0],\n \t\t\t\t\tdep.valueRange[0] - 1,\n-\t\t\t\t\t`${moduleExports}(${\n-\t\t\t\t\t\ttypeof dep.prepend === \"string\" ? JSON.stringify(dep.prepend) : \"\"\n-\t\t\t\t\t}`\n+\t\t\t\t\t`${moduleExports}(`\n \t\t\t\t);\n \t\t\t} else {\n \t\t\t\tsource.replace(dep.range[0], dep.range[1] - 1, moduleExports);"
      },
      {
        "sha": "4e015a52c59e258bd7263d89d4c94d82dad74e6f",
        "filename": "test/configCases/ignore/compatibilityLayer/folder-a/ignored-module.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-a%2Fignored-module.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-a%2Fignored-module.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-a%2Fignored-module.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"ignored\";"
      },
      {
        "sha": "fbd72556b4f051767a8ad0b30c09ef23a1c453d7",
        "filename": "test/configCases/ignore/compatibilityLayer/folder-a/normal-module.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-a%2Fnormal-module.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-a%2Fnormal-module.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-a%2Fnormal-module.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1 +0,0 @@\n-module.exports = require(\"./normal-module\");"
      },
      {
        "sha": "4e015a52c59e258bd7263d89d4c94d82dad74e6f",
        "filename": "test/configCases/ignore/compatibilityLayer/folder-b/ignored-module.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fignored-module.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fignored-module.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fignored-module.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"ignored\";"
      },
      {
        "sha": "83268eff2a082831f502948dc1832948bedd4ba3",
        "filename": "test/configCases/ignore/compatibilityLayer/folder-b/normal-module.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fnormal-module.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fnormal-module.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fnormal-module.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1 +0,0 @@\n-module.exports = require(\"./ignored-module\");"
      },
      {
        "sha": "29d7ef3b3dd32cde5306440401f5a4807ba1b880",
        "filename": "test/configCases/ignore/compatibilityLayer/folder-b/only-context-match-require.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fonly-context-match-require.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fonly-context-match-require.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fonly-context-match-require.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1 +0,0 @@\n-module.exports = \"should be fine\";"
      },
      {
        "sha": "3625236da61a9f02a903b87939163322f8531a1f",
        "filename": "test/configCases/ignore/compatibilityLayer/folder-b/only-context-match.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fonly-context-match.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fonly-context-match.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ffolder-b%2Fonly-context-match.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1 +0,0 @@\n-module.exports = require(\"./only-context-match-require\");"
      },
      {
        "sha": "97bfa83d013a236d34e42596081a74a1c61f8f08",
        "filename": "test/configCases/ignore/compatibilityLayer/test.js",
        "status": "removed",
        "additions": 0,
        "deletions": 36,
        "changes": 36,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ftest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ftest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Ftest.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1,36 +0,0 @@\n-/* globals it */\n-\"use strict\";\n-\n-// TODO: remove in webpack 5\n-it(\"should ignore context modules that match resource regex and context (compat-layer)\", function() {\n-\tconst folderBContext = function(mod) {\n-\t\trequire(\"./folder-b/\" + mod);\n-\t};\n-\n-\texpect(function() {\n-\t\tfolderBContext(\"normal-module\");\n-\t}).toThrowError();\n-});\n-\n-it(\"should not ignore context modules that dont match the resource (compat-layer)\", function() {\n-\tconst folderBContext = function(mod) {\n-\t\trequire(\"./folder-b/\" + mod);\n-\t};\n-\n-\texpect(function() {\n-\t\tfolderBContext(\"only-context-match\");\n-\t}).not.toThrowError();\n-});\n-\n-it(\"should not ignore context modules that dont match the context (compat-layer)\", function() {\n-\tconst folderBContext = function(mod) {\n-\t\trequire(\"./folder-a/\" + mod);\n-\t};\n-\n-\texpect(function() {\n-\t\tfolderBContext(\"normal-module\");\n-\t}).not.toThrowError();\n-\texpect(function() {\n-\t\tfolderBContext(\"ignored-module\");\n-\t}).not.toThrowError();\n-});"
      },
      {
        "sha": "7151dfc88a21b12a6d68de87dd10a6792413edb0",
        "filename": "test/configCases/ignore/compatibilityLayer/webpack.config.js",
        "status": "removed",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c453f395d19f135633fea917335b472d476850f0/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fignore%2FcompatibilityLayer%2Fwebpack.config.js?ref=c453f395d19f135633fea917335b472d476850f0",
        "patch": "@@ -1,8 +0,0 @@\n-\"use strict\";\n-\n-const IgnorePlugin = require(\"../../../../lib/IgnorePlugin\");\n-\n-module.exports = {\n-\tentry: \"./test.js\",\n-\tplugins: [new IgnorePlugin(/ignored-module/, /folder-b/)]\n-};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8272",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8272/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8272/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8272/events",
    "html_url": "https://github.com/webpack/webpack/pull/8272",
    "id": 373866778,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjI1Njk1MDYz",
    "number": 8272,
    "title": "add pack store mode for filesystem cache",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-10-25T09:57:30Z",
    "updated_at": "2018-10-30T14:36:36Z",
    "closed_at": "2018-10-30T14:36:33Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8272",
      "html_url": "https://github.com/webpack/webpack/pull/8272",
      "diff_url": "https://github.com/webpack/webpack/pull/8272.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8272.patch",
      "merged_at": "2018-10-30T14:36:32Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\n`cache.store: \"pack\"` was added. This mode stores all cache entries in a single file, including garbage collection for old entries.\r\n\r\n* 😄 Less filesystem access\r\n* 😄 Faster, as all cache entries are deserialized at once\r\n* 😄 Smaller data, as deduplication happens between cache entries\r\n* 😄 Handles small cache entries have less overhead compared to separate files\r\n  * Especially relevant when the resolver cache is added\r\n* 😄 Has Garbage Collection (entries are removed after 2 days unused)\r\n  * Need to add option for that\r\n* 😢 Unnecessary cache entries are deserialized and serialized until garbage collected\r\n  * This is relevant when heavy changes made to the application and will reduce performance for 2 days\r\n* 😢 Complete cache file has to be rewritten when single entry has changed\r\n* 😢 Complete cache file has to be read when single entry is accessed\r\n  * Normal usage access 99% of cache anyway, so less important\r\n\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8272/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8272/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "44d762f5be3016663b81cac515c1de8ac4579737",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -428,17 +428,17 @@ export interface FileCacheOptions {\n \t */\n \thashAlgorithm?: string;\n \t/**\n-\t * Display log info. (debug: all access and errors with stack trace, info: all access, warning: only failed serialization)\n+\t * Display log info. (debug: all access and errors with stack trace, verbose: all access, info: all write access, warning: only failed serialization)\n \t */\n-\tloglevel?: \"debug\" | \"info\" | \"warning\";\n+\tloglevel?: \"debug\" | \"verbose\" | \"info\" | \"warning\";\n \t/**\n \t * Name for the cache. Different names will lead to different coexisting caches.\n \t */\n \tname?: string;\n \t/**\n-\t * When to store data to the filesystem. (idle: Store data when compiler is idle; background: Store data in background while compiling, but doesn't block the compilation; instant: Store data when creating blocking compilation until data is stored; defaults to idle)\n+\t * When to store data to the filesystem. (pack: Store data when compiler is idle in a single file, idle: Store data when compiler is idle in multiple files; background: Store data in background while compiling, but doesn't block the compilation; instant: Store data when creating blocking compilation until data is stored; defaults to idle)\n \t */\n-\tstore?: \"idle\" | \"background\" | \"instant\";\n+\tstore?: \"pack\" | \"idle\" | \"background\" | \"instant\";\n \t/**\n \t * Filesystem caching\n \t */"
      },
      {
        "sha": "b5f49ab0c2db35527670bb518ba11953f0ccec16",
        "filename": "lib/cache/FileCachePlugin.js",
        "status": "modified",
        "additions": 232,
        "deletions": 51,
        "changes": 283,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fcache%2FFileCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fcache%2FFileCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FFileCachePlugin.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -5,15 +5,87 @@\n \n \"use strict\";\n \n+const fs = require(\"fs\");\n const path = require(\"path\");\n const createHash = require(\"../util/createHash\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const serializer = require(\"../util/serializer\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"../../declarations/WebpackOptions\").FileCacheOptions} FileCacheOptions */\n /** @typedef {import(\"../Compiler\")} Compiler */\n /** @typedef {import(\"../Module\")} Module */\n \n+class Pack {\n+\tconstructor(version) {\n+\t\tthis.version = version;\n+\t\tthis.content = new Map();\n+\t\tthis.lastAccess = new Map();\n+\t\tthis.used = new Set();\n+\t\tthis.invalid = false;\n+\t}\n+\n+\tget(relativeFilename) {\n+\t\tthis.used.add(relativeFilename);\n+\t\treturn this.content.get(relativeFilename);\n+\t}\n+\n+\tset(relativeFilename, data) {\n+\t\tthis.used.add(relativeFilename);\n+\t\tthis.invalid = true;\n+\t\treturn this.content.set(relativeFilename, data);\n+\t}\n+\n+\tcollectGarbage(maxAge) {\n+\t\tthis._updateLastAccess();\n+\t\tconst now = Date.now();\n+\t\tfor (const [relativeFilename, lastAccess] of this.lastAccess) {\n+\t\t\tif (now - lastAccess > maxAge) {\n+\t\t\t\tthis.lastAccess.delete(relativeFilename);\n+\t\t\t\tthis.content.delete(relativeFilename);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t_updateLastAccess() {\n+\t\tconst now = Date.now();\n+\t\tfor (const relativeFilename of this.used) {\n+\t\t\tthis.lastAccess.set(relativeFilename, now);\n+\t\t}\n+\t\tthis.used.clear();\n+\t}\n+\n+\tserialize({ write, snapshot, rollback }) {\n+\t\tthis._updateLastAccess();\n+\t\twrite(this.version);\n+\t\tfor (const [relativeFilename, data] of this.content) {\n+\t\t\tconst s = snapshot();\n+\t\t\ttry {\n+\t\t\t\twrite(relativeFilename);\n+\t\t\t\twrite(data);\n+\t\t\t} catch (err) {\n+\t\t\t\trollback(s);\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t}\n+\t\twrite(null);\n+\t\twrite(this.lastAccess);\n+\t}\n+\n+\tdeserialize({ read }) {\n+\t\tthis.version = read();\n+\t\tthis.content = new Map();\n+\t\tlet relativeFilename = read();\n+\t\twhile (relativeFilename !== null) {\n+\t\t\tthis.content.set(relativeFilename, read());\n+\t\t\trelativeFilename = read();\n+\t\t}\n+\t\tthis.lastAccess = read();\n+\t}\n+}\n+\n+makeSerializable(Pack, \"webpack/lib/cache/FileCachePlugin\", \"Pack\");\n+\n const memorize = fn => {\n \tlet result = undefined;\n \treturn () => {\n@@ -48,9 +120,9 @@ class FileCachePlugin {\n \t\tconst hashAlgorithm = this.options.hashAlgorithm || \"md4\";\n \t\tconst version = this.options.version || \"\";\n \t\tconst log = this.options.loglevel\n-\t\t\t? { debug: 3, info: 2, warning: 1 }[this.options.loglevel]\n+\t\t\t? { debug: 4, verbose: 3, info: 2, warning: 1 }[this.options.loglevel]\n \t\t\t: 0;\n-\t\tconst store = this.options.store || \"idle\";\n+\t\tconst store = this.options.store || \"pack\";\n \n \t\tlet pendingPromiseFactories = new Map();\n \t\tconst toHash = str => {\n@@ -59,33 +131,82 @@ class FileCachePlugin {\n \t\t\tconst digest = hash.digest(\"hex\");\n \t\t\treturn `${digest.slice(0, 2)}/${digest.slice(2)}`;\n \t\t};\n-\t\tcompiler.cache.hooks.store.tapPromise(\n-\t\t\t\"FileCachePlugin\",\n-\t\t\t(identifier, etag, data) => {\n-\t\t\t\tconst entry = { identifier, data: () => data, etag, version };\n-\t\t\t\tconst filename = path.join(\n-\t\t\t\t\tcacheDirectory,\n-\t\t\t\t\ttoHash(identifier) + \".data\"\n-\t\t\t\t);\n-\t\t\t\tmemoryCache.set(filename, entry);\n-\t\t\t\tconst promiseFactory = () =>\n-\t\t\t\t\tserializer\n-\t\t\t\t\t\t.serializeToFile(entry, filename)\n-\t\t\t\t\t\t.then(() => {\n-\t\t\t\t\t\t\tif (log >= 2) {\n-\t\t\t\t\t\t\t\tconsole.warn(`Cached ${identifier} to ${filename}.`);\n+\t\tlet packPromise;\n+\t\tif (store === \"pack\") {\n+\t\t\tpackPromise = serializer\n+\t\t\t\t.deserializeFromFile(`${cacheDirectory}.pack`)\n+\t\t\t\t.then(cacheEntry => {\n+\t\t\t\t\tif (cacheEntry) {\n+\t\t\t\t\t\tif (!(cacheEntry instanceof Pack)) {\n+\t\t\t\t\t\t\tif (log >= 3) {\n+\t\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t\t`Restored pack from ${cacheDirectory}.pack, but is not a Pack.`\n+\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t})\n-\t\t\t\t\t\t.catch(err => {\n-\t\t\t\t\t\t\tif (log >= 1) {\n+\t\t\t\t\t\t\treturn new Pack(version);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (cacheEntry.version !== version) {\n+\t\t\t\t\t\t\tif (log >= 3) {\n \t\t\t\t\t\t\t\tconsole.warn(\n-\t\t\t\t\t\t\t\t\t`Caching failed for ${identifier}: ${\n-\t\t\t\t\t\t\t\t\t\tlog >= 3 ? err.stack : err\n-\t\t\t\t\t\t\t\t\t}`\n+\t\t\t\t\t\t\t\t\t`Restored pack from ${cacheDirectory}.pack, but version doesn't match.`\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t});\n-\t\t\t\tif (store === \"instant\") {\n+\t\t\t\t\t\t\treturn new Pack(version);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\treturn cacheEntry;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn new Pack(version);\n+\t\t\t\t})\n+\t\t\t\t.catch(err => {\n+\t\t\t\t\tif (log >= 1 && err && err.code !== \"ENOENT\") {\n+\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t`Restoring pack failed from ${cacheDirectory}.pack: ${\n+\t\t\t\t\t\t\t\tlog >= 4 ? err.stack : err\n+\t\t\t\t\t\t\t}`\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t\treturn new Pack(version);\n+\t\t\t\t});\n+\t\t}\n+\t\tcompiler.cache.hooks.store.tapPromise(\n+\t\t\t\"FileCachePlugin\",\n+\t\t\t(identifier, etag, data) => {\n+\t\t\t\tconst entry = {\n+\t\t\t\t\tidentifier,\n+\t\t\t\t\tdata: etag ? () => data : data,\n+\t\t\t\t\tetag,\n+\t\t\t\t\tversion\n+\t\t\t\t};\n+\t\t\t\tconst relativeFilename = toHash(identifier) + \".data\";\n+\t\t\t\tconst filename = path.join(cacheDirectory, relativeFilename);\n+\t\t\t\tmemoryCache.set(filename, entry);\n+\t\t\t\tconst promiseFactory =\n+\t\t\t\t\tstore === \"pack\"\n+\t\t\t\t\t\t? () =>\n+\t\t\t\t\t\t\t\tpackPromise.then(pack => {\n+\t\t\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\t\t\t\tconsole.warn(`Cached ${identifier} to pack.`);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\tpack.set(relativeFilename, entry);\n+\t\t\t\t\t\t\t\t})\n+\t\t\t\t\t\t: () =>\n+\t\t\t\t\t\t\t\tserializer\n+\t\t\t\t\t\t\t\t\t.serializeToFile(entry, filename)\n+\t\t\t\t\t\t\t\t\t.then(() => {\n+\t\t\t\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\t\t\t\t\tconsole.warn(`Cached ${identifier} to ${filename}.`);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t})\n+\t\t\t\t\t\t\t\t\t.catch(err => {\n+\t\t\t\t\t\t\t\t\t\tif (log >= 1) {\n+\t\t\t\t\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t\t\t\t\t`Caching failed for ${identifier}: ${\n+\t\t\t\t\t\t\t\t\t\t\t\t\tlog >= 3 ? err.stack : err\n+\t\t\t\t\t\t\t\t\t\t\t\t}`\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t});\n+\t\t\t\tif (store === \"instant\" || store === \"pack\") {\n \t\t\t\t\treturn promiseFactory();\n \t\t\t\t} else if (store === \"idle\") {\n \t\t\t\t\tpendingPromiseFactories.set(filename, promiseFactory);\n@@ -100,77 +221,133 @@ class FileCachePlugin {\n \t\tcompiler.cache.hooks.get.tapPromise(\n \t\t\t\"FileCachePlugin\",\n \t\t\t(identifier, etag) => {\n-\t\t\t\tconst filename = path.join(\n-\t\t\t\t\tcacheDirectory,\n-\t\t\t\t\ttoHash(identifier) + \".data\"\n-\t\t\t\t);\n+\t\t\t\tconst relativeFilename = toHash(identifier) + \".data\";\n+\t\t\t\tconst filename = path.join(cacheDirectory, relativeFilename);\n+\t\t\t\tconst logMessage = store === \"pack\" ? \"pack\" : filename;\n \t\t\t\tconst memory = memoryCache.get(filename);\n \t\t\t\tif (memory !== undefined) {\n \t\t\t\t\treturn Promise.resolve(\n-\t\t\t\t\t\tmemory.etag === etag && memory.version === version\n-\t\t\t\t\t\t\t? memory.data()\n-\t\t\t\t\t\t\t: undefined\n+\t\t\t\t\t\tmemory.etag !== etag || memory.version !== version\n+\t\t\t\t\t\t\t? undefined\n+\t\t\t\t\t\t\t: typeof memory.data === \"function\"\n+\t\t\t\t\t\t\t\t? memory.data()\n+\t\t\t\t\t\t\t\t: memory.data\n \t\t\t\t\t);\n \t\t\t\t}\n-\t\t\t\treturn serializer.deserializeFromFile(filename).then(\n+\t\t\t\tconst cacheEntryPromise =\n+\t\t\t\t\tstore === \"pack\"\n+\t\t\t\t\t\t? packPromise.then(pack => pack.get(relativeFilename))\n+\t\t\t\t\t\t: serializer.deserializeFromFile(filename);\n+\t\t\t\treturn cacheEntryPromise.then(\n \t\t\t\t\tcacheEntry => {\n-\t\t\t\t\t\tcacheEntry = {\n-\t\t\t\t\t\t\tidentifier: cacheEntry.identifier,\n-\t\t\t\t\t\t\tetag: cacheEntry.etag,\n-\t\t\t\t\t\t\tversion: cacheEntry.version,\n-\t\t\t\t\t\t\tdata: memorize(cacheEntry.data)\n-\t\t\t\t\t\t};\n+\t\t\t\t\t\tif (cacheEntry === undefined) return;\n+\t\t\t\t\t\tif (typeof cacheEntry.data === \"function\")\n+\t\t\t\t\t\t\tcacheEntry.data = memorize(cacheEntry.data);\n \t\t\t\t\t\tmemoryCache.set(filename, cacheEntry);\n \t\t\t\t\t\tif (cacheEntry === undefined) return;\n \t\t\t\t\t\tif (cacheEntry.identifier !== identifier) {\n-\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\tif (log >= 3) {\n \t\t\t\t\t\t\t\tconsole.warn(\n-\t\t\t\t\t\t\t\t\t`Restored ${identifier} from ${filename}, but identifier doesn't match.`\n+\t\t\t\t\t\t\t\t\t`Restored ${identifier} from ${logMessage}, but identifier doesn't match.`\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (cacheEntry.etag !== etag) {\n-\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\tif (log >= 3) {\n \t\t\t\t\t\t\t\tconsole.warn(\n-\t\t\t\t\t\t\t\t\t`Restored ${etag} from ${filename}, but etag doesn't match.`\n+\t\t\t\t\t\t\t\t\t`Restored ${identifier} from ${logMessage}, but etag doesn't match.`\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (cacheEntry.version !== version) {\n-\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\tif (log >= 3) {\n \t\t\t\t\t\t\t\tconsole.warn(\n-\t\t\t\t\t\t\t\t\t`Restored ${version} from ${filename}, but version doesn't match.`\n+\t\t\t\t\t\t\t\t\t`Restored ${identifier} from ${logMessage}, but version doesn't match.`\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\treturn;\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tif (log >= 2) {\n-\t\t\t\t\t\t\tconsole.warn(`Restored ${identifier} from ${filename}.`);\n+\t\t\t\t\t\tif (log >= 3) {\n+\t\t\t\t\t\t\tconsole.warn(`Restored ${identifier} from ${logMessage}.`);\n \t\t\t\t\t\t}\n-\t\t\t\t\t\treturn cacheEntry.data();\n+\t\t\t\t\t\tif (typeof cacheEntry.data === \"function\") return cacheEntry.data();\n+\t\t\t\t\t\treturn cacheEntry.data;\n \t\t\t\t\t},\n \t\t\t\t\terr => {\n \t\t\t\t\t\tif (log >= 1 && err && err.code !== \"ENOENT\") {\n \t\t\t\t\t\t\tconsole.warn(\n-\t\t\t\t\t\t\t\t`Restoring failed for ${identifier} from ${filename}: ${\n-\t\t\t\t\t\t\t\t\tlog >= 3 ? err.stack : err\n+\t\t\t\t\t\t\t\t`Restoring failed for ${identifier} from ${logMessage}: ${\n+\t\t\t\t\t\t\t\t\tlog >= 4 ? err.stack : err\n \t\t\t\t\t\t\t\t}`\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t\t}\n \t\t);\n+\t\tconst serializePack = () => {\n+\t\t\tpackPromise = packPromise.then(pack => {\n+\t\t\t\tif (!pack.invalid) return pack;\n+\t\t\t\tif (log >= 3) {\n+\t\t\t\t\tconsole.warn(`Storing pack...`);\n+\t\t\t\t}\n+\t\t\t\tpack.collectGarbage(1000 * 60 * 60 * 24 * 2);\n+\t\t\t\treturn serializer\n+\t\t\t\t\t.serializeToFile(pack, `${cacheDirectory}.pack~`)\n+\t\t\t\t\t.then(\n+\t\t\t\t\t\tresult =>\n+\t\t\t\t\t\t\tnew Promise((resolve, reject) => {\n+\t\t\t\t\t\t\t\tif (!result) {\n+\t\t\t\t\t\t\t\t\tif (log >= 1) {\n+\t\t\t\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t\t\t\t'Caching failed for pack, because content is flagged as not serializable. Use store: \"idle\" instead.'\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\treturn resolve();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tfs.unlink(`${cacheDirectory}.pack`, err => {\n+\t\t\t\t\t\t\t\t\tfs.rename(\n+\t\t\t\t\t\t\t\t\t\t`${cacheDirectory}.pack~`,\n+\t\t\t\t\t\t\t\t\t\t`${cacheDirectory}.pack`,\n+\t\t\t\t\t\t\t\t\t\terr => {\n+\t\t\t\t\t\t\t\t\t\t\tif (err) return reject(err);\n+\t\t\t\t\t\t\t\t\t\t\tif (log >= 3) {\n+\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn(`Stored pack`);\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t\tresolve();\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t})\n+\t\t\t\t\t)\n+\t\t\t\t\t.then(() => {\n+\t\t\t\t\t\treturn serializer.deserializeFromFile(`${cacheDirectory}.pack`);\n+\t\t\t\t\t})\n+\t\t\t\t\t.catch(err => {\n+\t\t\t\t\t\tif (log >= 1) {\n+\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t`Caching failed for pack: ${log >= 4 ? err.stack : err}`\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\treturn new Pack(version);\n+\t\t\t\t\t});\n+\t\t\t});\n+\t\t\treturn packPromise;\n+\t\t};\n \t\tcompiler.cache.hooks.shutdown.tapPromise(\"FileCachePlugin\", () => {\n \t\t\tisIdle = false;\n \t\t\tconst promises = Array.from(pendingPromiseFactories.values()).map(fn =>\n \t\t\t\tfn()\n \t\t\t);\n \t\t\tpendingPromiseFactories.clear();\n \t\t\tif (currentIdlePromise !== undefined) promises.push(currentIdlePromise);\n-\t\t\treturn Promise.all(promises);\n+\t\t\tconst promise = Promise.all(promises);\n+\t\t\tif (store === \"pack\") {\n+\t\t\t\treturn promise.then(serializePack);\n+\t\t\t}\n+\t\t\treturn promise;\n \t\t});\n \n \t\tlet currentIdlePromise;\n@@ -193,6 +370,10 @@ class FileCachePlugin {\n \t\t};\n \t\tcompiler.cache.hooks.beginIdle.tap(\"FileCachePlugin\", () => {\n \t\t\tisIdle = true;\n+\t\t\tif (store === \"pack\") {\n+\t\t\t\tpendingPromiseFactories.delete(\"pack\");\n+\t\t\t\tpendingPromiseFactories.set(\"pack\", serializePack);\n+\t\t\t}\n \t\t\tPromise.resolve().then(processIdleTasks);\n \t\t});\n \t\tcompiler.cache.hooks.endIdle.tap(\"FileCachePlugin\", () => {"
      },
      {
        "sha": "e5bb449a3f18836c147e54bd41e1e9d4701e1dbe",
        "filename": "lib/serialization/FileMiddleware.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fserialization%2FFileMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fserialization%2FFileMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FFileMiddleware.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -172,7 +172,7 @@ class FileMiddleware extends SerializerMiddleware {\n \t\t\t\t\tif (err) return reject(err);\n \t\t\t\t\tfs.writeFile(filename, Buffer.concat(buffers), err => {\n \t\t\t\t\t\tif (err) return reject(err);\n-\t\t\t\t\t\tresolve();\n+\t\t\t\t\t\tresolve(true);\n \t\t\t\t\t});\n \t\t\t\t});\n \t\t\t});"
      },
      {
        "sha": "0718b710a76d2932cae8b3ab5551729d1e89c472",
        "filename": "lib/serialization/MapObjectSerializer.js",
        "status": "modified",
        "additions": 8,
        "deletions": 2,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fserialization%2FMapObjectSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fserialization%2FMapObjectSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FMapObjectSerializer.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -7,16 +7,22 @@\n class MapObjectSerializer {\n \tserialize(obj, { write }) {\n \t\twrite(obj.size);\n-\t\tfor (const [key, value] of obj) {\n+\t\tfor (const key of obj.keys()) {\n \t\t\twrite(key);\n+\t\t}\n+\t\tfor (const value of obj.values()) {\n \t\t\twrite(value);\n \t\t}\n \t}\n \tdeserialize({ read }) {\n \t\tlet size = read();\n \t\tconst map = new Map();\n+\t\tconst keys = [];\n+\t\tfor (let i = 0; i < size; i++) {\n+\t\t\tkeys.push(read());\n+\t\t}\n \t\tfor (let i = 0; i < size; i++) {\n-\t\t\tmap.set(read(), read());\n+\t\t\tmap.set(keys[i], read());\n \t\t}\n \t\treturn map;\n \t}"
      },
      {
        "sha": "ae58c17511008681d157cbb2920907799ea252db",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "modified",
        "additions": 41,
        "deletions": 1,
        "changes": 42,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -51,6 +51,24 @@ Technically any value can be used.\n  * @property {function(ObjectDeserializerContext): any} deserialize\n  */\n \n+const setSetSize = (set, size) => {\n+\tlet i = 0;\n+\tfor (const item of set) {\n+\t\tif (i++ >= size) {\n+\t\t\tset.delete(item);\n+\t\t}\n+\t}\n+};\n+\n+const setMapSize = (map, size) => {\n+\tlet i = 0;\n+\tfor (const item of map.keys()) {\n+\t\tif (i++ >= size) {\n+\t\t\tmap.delete(item);\n+\t\t}\n+\t}\n+};\n+\n const ESCAPE = null;\n const ESCAPE_ESCAPE_VALUE = null;\n const ESCAPE_END_OBJECT = true;\n@@ -233,7 +251,11 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\t\tthrow new Error(\n \t\t\t\t\t\t`Circular references can't be serialized (${Array.from(cycleStack)\n \t\t\t\t\t\t\t.concat([item])\n-\t\t\t\t\t\t\t.map(obj => obj.constructor.name)\n+\t\t\t\t\t\t\t.map(obj => {\n+\t\t\t\t\t\t\t\tif (obj.constructor === Object)\n+\t\t\t\t\t\t\t\t\treturn `Object { ${Object.keys(obj).join(\", \")} }`;\n+\t\t\t\t\t\t\t\treturn obj.constructor.name;\n+\t\t\t\t\t\t\t})\n \t\t\t\t\t\t\t.join(\" -> \")})`\n \t\t\t\t\t);\n \t\t\t\t}\n@@ -257,6 +279,24 @@ class ObjectMiddleware extends SerializerMiddleware {\n \t\t\t\tserializer.serialize(item, {\n \t\t\t\t\twrite(value) {\n \t\t\t\t\t\tprocess(value);\n+\t\t\t\t\t},\n+\t\t\t\t\tsnapshot() {\n+\t\t\t\t\t\treturn {\n+\t\t\t\t\t\t\tlength: result.length,\n+\t\t\t\t\t\t\tcycleStackSize: cycleStack.size,\n+\t\t\t\t\t\t\treferenceableSize: referenceable.size,\n+\t\t\t\t\t\t\tcurrentPos,\n+\t\t\t\t\t\t\tobjectTypeLookupSize: objectTypeLookup.size,\n+\t\t\t\t\t\t\tcurrentPosTypeLookup\n+\t\t\t\t\t\t};\n+\t\t\t\t\t},\n+\t\t\t\t\trollback(snapshot) {\n+\t\t\t\t\t\tresult.length = snapshot.length;\n+\t\t\t\t\t\tsetSetSize(cycleStack, snapshot.cycleStackSize);\n+\t\t\t\t\t\tsetMapSize(referenceable, snapshot.referenceableSize);\n+\t\t\t\t\t\tcurrentPos = snapshot.currentPos;\n+\t\t\t\t\t\tsetMapSize(objectTypeLookup, snapshot.objectTypeLookupSize);\n+\t\t\t\t\t\tcurrentPosTypeLookup = snapshot.currentPosTypeLookup;\n \t\t\t\t\t}\n \t\t\t\t});\n "
      },
      {
        "sha": "770e6c0e708e2d765bc30233b86bf9e191a4e99c",
        "filename": "lib/util/makeSerializable.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Futil%2FmakeSerializable.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/lib%2Futil%2FmakeSerializable.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FmakeSerializable.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -49,7 +49,11 @@ class ClassSerializer {\n \t\tif (!this.hash) this._createHash();\n \t\tconst hash = context.read();\n \t\tif (this.hash !== hash)\n-\t\t\tthrow new Error(`Version missmatch for ${this.Constructor.name}`);\n+\t\t\tthrow new Error(\n+\t\t\t\t`Version mismatch for ${this.Constructor.name}: ${hash} !== ${\n+\t\t\t\t\tthis.hash\n+\t\t\t\t}`\n+\t\t\t);\n \t\tif (typeof this.Constructor.deserialize === \"function\") {\n \t\t\treturn this.Constructor.deserialize(context);\n \t\t}"
      },
      {
        "sha": "e32a9ee3d16d504ff4e7e9ffaf934ce14f0c2fe0",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -169,16 +169,16 @@\n           \"type\": \"string\"\n         },\n         \"loglevel\": {\n-          \"description\": \"Display log info. (debug: all access and errors with stack trace, info: all access, warning: only failed serialization)\",\n-          \"enum\": [\"debug\", \"info\", \"warning\"]\n+          \"description\": \"Display log info. (debug: all access and errors with stack trace, verbose: all access, info: all write access, warning: only failed serialization)\",\n+          \"enum\": [\"debug\", \"verbose\", \"info\", \"warning\"]\n         },\n         \"name\": {\n           \"description\": \"Name for the cache. Different names will lead to different coexisting caches.\",\n           \"type\": \"string\"\n         },\n         \"store\": {\n-          \"description\": \"When to store data to the filesystem. (idle: Store data when compiler is idle; background: Store data in background while compiling, but doesn't block the compilation; instant: Store data when creating blocking compilation until data is stored; defaults to idle)\",\n-          \"enum\": [\"idle\", \"background\", \"instant\"]\n+          \"description\": \"When to store data to the filesystem. (pack: Store data when compiler is idle in a single file, idle: Store data when compiler is idle in multiple files; background: Store data in background while compiling, but doesn't block the compilation; instant: Store data when creating blocking compilation until data is stored; defaults to idle)\",\n+          \"enum\": [\"pack\", \"idle\", \"background\", \"instant\"]\n         },\n         \"type\": {\n           \"description\": \"Filesystem caching\","
      },
      {
        "sha": "eb9e646bd6eca813cfba53344b26fb221da36ba5",
        "filename": "test/TestCases.template.js",
        "status": "modified",
        "additions": 35,
        "deletions": 13,
        "changes": 48,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FTestCases.template.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FTestCases.template.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCases.template.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -104,12 +104,15 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\tperformance: {\n \t\t\t\t\t\t\t\t\thints: false\n \t\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\t\tcache: {\n-\t\t\t\t\t\t\t\t\ttype: \"filesystem\",\n-\t\t\t\t\t\t\t\t\tcacheDirectory: cacheDirectory,\n-\t\t\t\t\t\t\t\t\tloglevel: \"warning\",\n-\t\t\t\t\t\t\t\t\tstore: \"instant\"\n-\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\tcache:\n+\t\t\t\t\t\t\t\t\tconfig.cache &&\n+\t\t\t\t\t\t\t\t\tObject.assign(\n+\t\t\t\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\t\t\t\tloglevel: \"warning\",\n+\t\t\t\t\t\t\t\t\t\t\tcacheDirectory\n+\t\t\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\t\t\tconfig.cache\n+\t\t\t\t\t\t\t\t\t),\n \t\t\t\t\t\t\t\toutput: {\n \t\t\t\t\t\t\t\t\tpathinfo: true,\n \t\t\t\t\t\t\t\t\tpath: outputDirectory,\n@@ -184,20 +187,36 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t})\n \t\t\t\t\t\t\t};\n \t\t\t\t\t\t\tbeforeAll(done => {\n+\t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n \t\t\t\t\t\t\t\trimraf(cacheDirectory, done);\n \t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\tit(testName + \" should pre-compile\", done => {\n+\t\t\t\t\t\t\tafterAll(() => {\n \t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n-\t\t\t\t\t\t\t\twebpack(options, err => {\n-\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\tif (config.cache) {\n+\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill disk cache`, done => {\n \t\t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n-\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\tconst compiler = webpack(options, err => {\n+\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\tcompiler.close(() => {\n+\t\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\tit(`${testName} should pre-compile to fill memory cache`, done => {\n+\t\t\t\t\t\t\t\t\tFileCachePlugin.purgeMemoryCache();\n+\t\t\t\t\t\t\t\t\tconst compiler = webpack(options, err => {\n+\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\tcompiler.close(() => {\n+\t\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tit(\n \t\t\t\t\t\t\t\ttestName + \" should compile\",\n \t\t\t\t\t\t\t\tdone => {\n-\t\t\t\t\t\t\t\t\twebpack(options, (err, stats) => {\n+\t\t\t\t\t\t\t\t\tconst compiler = webpack(options, (err, stats) => {\n \t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n \t\t\t\t\t\t\t\t\t\tconst statOptions = Stats.presetToOptions(\"verbose\");\n \t\t\t\t\t\t\t\t\t\tstatOptions.colors = false;\n@@ -263,7 +282,10 @@ const describeCases = config => {\n \t\t\t\t\t\t\t\t\t\tif (getNumberOfTests() === 0)\n \t\t\t\t\t\t\t\t\t\t\treturn done(new Error(\"No tests exported by test case\"));\n \n-\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t\tcompiler.close(err => {\n+\t\t\t\t\t\t\t\t\t\t\tif (err) return done(err);\n+\t\t\t\t\t\t\t\t\t\t\tdone();\n+\t\t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t},\n \t\t\t\t\t\t\t\t60000"
      },
      {
        "sha": "993f06923af035e79b82f552a0c7feca36a8a7d7",
        "filename": "test/TestCasesCacheInstant.test.js",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FTestCasesCacheInstant.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FTestCasesCacheInstant.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCasesCacheInstant.test.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -0,0 +1,11 @@\n+const { describeCases } = require(\"./TestCases.template\");\n+\n+describe(\"TestCases\", () => {\n+\tdescribeCases({\n+\t\tname: \"cache instant\",\n+\t\tcache: {\n+\t\t\ttype: \"filesystem\",\n+\t\t\tstore: \"instant\"\n+\t\t}\n+\t});\n+});"
      },
      {
        "sha": "87fae5cdda7c34f98db578a87760078a576457ff",
        "filename": "test/TestCasesCachePack.test.js",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FTestCasesCachePack.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FTestCasesCachePack.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FTestCasesCachePack.test.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -0,0 +1,11 @@\n+const { describeCases } = require(\"./TestCases.template\");\n+\n+describe(\"TestCases\", () => {\n+\tdescribeCases({\n+\t\tname: \"cache pack\",\n+\t\tcache: {\n+\t\t\ttype: \"filesystem\",\n+\t\t\tstore: \"pack\"\n+\t\t}\n+\t});\n+});"
      },
      {
        "sha": "b87427041aa144bdadb0760c6ce62bbc55670e50",
        "filename": "test/setupTestFramework.js",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FsetupTestFramework.js",
        "raw_url": "https://github.com/webpack/webpack/raw/044ad3725b18b71f0c18b00d68781c8983476b9f/test%2FsetupTestFramework.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FsetupTestFramework.js?ref=044ad3725b18b71f0c18b00d68781c8983476b9f",
        "patch": "@@ -50,3 +50,8 @@ if (process.env.ALTERNATIVE_SORT) {\n \t\treturn this;\n \t};\n }\n+\n+// Workaround for a memory leak in wabt\n+// It leaks an Error object on construction\n+// so it leaks the whole stack trace\n+require(\"wast-loader\");"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/8162",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/8162/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/8162/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/8162/events",
    "html_url": "https://github.com/webpack/webpack/pull/8162",
    "id": 368190706,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjIxNDIzNTM1",
    "number": 8162,
    "title": "add persistent caching prototype",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 17,
    "created_at": "2018-10-09T12:41:48Z",
    "updated_at": "2018-10-19T14:30:01Z",
    "closed_at": "2018-10-19T08:59:09Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/8162",
      "html_url": "https://github.com/webpack/webpack/pull/8162",
      "diff_url": "https://github.com/webpack/webpack/pull/8162.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/8162.patch",
      "merged_at": "2018-10-19T08:59:09Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n\r\n<!-- In addition to that please answer these questions: -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**What needs to be documented once your changes are merged?**\r\nThe `cache` options can now take an object of this form: \r\n\r\n``` js\r\n{\r\n  type: \"filesystem\",\r\n\r\n  // directory where to store the cache\r\n  // cache will be stored in subfolded `${name}-${mode}`\r\n  cacheDirectory: \"/path/to/dir\",\r\n\r\n  // subfolder name\r\n  name: \"something\",\r\n\r\n  // configuration version\r\n  // cache is invalidated when this is updated\r\n  version: \"1xz2\",\r\n\r\n  // when to store the cache-able items\r\n  // idle: while the compiler is idling\r\n  // instant: while compiling, blocking\r\n  // background: while compiling, non-blocking\r\n  store: \"idle\", \r\n\r\n  // show warning or info messages\r\n  loglevel: \"warning\",\r\n\r\n  // use a custom hash algorithm i. e. for performance\r\n  hashAlgorithm: \"md4\"\r\n}\r\n```\r\n\r\nFor descriptions see schema.\r\n\r\nThis will lead to (de)serialization of modules and generated assets to the filesystem.\r\n<!-- List all the information that needs to be added to the documentation after merge -->\r\n<!-- When your changes are merged you will be asked to contribute this to the documentation -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/8162/reactions",
      "total_count": 7,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 7,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/8162/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "f4cb1427ae600f56fa846af0da8fe45dc113a030",
        "filename": ".gitignore",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/.gitignore",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/.gitignore",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/.gitignore?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -10,5 +10,6 @@\n *.log\n .idea\n .vscode\n+.cache\n .eslintcache\n package-lock.json"
      },
      {
        "sha": "bcf711db36c95dbb937ea4d6c3cc9a62103e1f6a",
        "filename": "declarations/WebpackOptions.d.ts",
        "status": "modified",
        "additions": 45,
        "deletions": 5,
        "changes": 50,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/declarations%2FWebpackOptions.d.ts",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/declarations%2FWebpackOptions.d.ts",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/declarations%2FWebpackOptions.d.ts?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -257,11 +257,7 @@ export interface WebpackOptions {\n \t/**\n \t * Cache generated modules and chunks to improve performance for multiple incremental builds.\n \t */\n-\tcache?:\n-\t\t| boolean\n-\t\t| {\n-\t\t\t\t[k: string]: any;\n-\t\t  };\n+\tcache?: false | true | MemoryCacheOptions | FileCacheOptions;\n \t/**\n \t * The base directory (absolute path!) for resolving the `entry` option. If `output.pathinfo` is set, the included pathinfo is shortened to this directory.\n \t */\n@@ -408,6 +404,50 @@ export interface WebpackOptions {\n \t\tstdin?: boolean;\n \t};\n }\n+/**\n+ * This interface was referenced by `WebpackOptions`'s JSON-Schema\n+ * via the `definition` \"MemoryCacheOptions\".\n+ */\n+export interface MemoryCacheOptions {\n+\t/**\n+\t * In memory caching\n+\t */\n+\ttype: \"memory\";\n+}\n+/**\n+ * This interface was referenced by `WebpackOptions`'s JSON-Schema\n+ * via the `definition` \"FileCacheOptions\".\n+ */\n+export interface FileCacheOptions {\n+\t/**\n+\t * Base directory for the cache (defaults to node_modules/.cache/webpack).\n+\t */\n+\tcacheDirectory?: string;\n+\t/**\n+\t * Algorithm used for generation the hash (see node.js crypto package)\n+\t */\n+\thashAlgorithm?: string;\n+\t/**\n+\t * Display log info. (debug: all access and errors with stack trace, info: all access, warning: only failed serialization)\n+\t */\n+\tloglevel?: \"debug\" | \"info\" | \"warning\";\n+\t/**\n+\t * Name for the cache. Different names will lead to different coexisting caches.\n+\t */\n+\tname?: string;\n+\t/**\n+\t * When to store data to the filesystem. (idle: Store data when compiler is idle; background: Store data in background while compiling, but doesn't block the compilation; instant: Store data when creating blocking compilation until data is stored; defaults to idle)\n+\t */\n+\tstore?: \"idle\" | \"background\" | \"instant\";\n+\t/**\n+\t * Filesystem caching\n+\t */\n+\ttype: \"filesystem\";\n+\t/**\n+\t * Version of the cache data. Different versions won't allow to reuse the cache and override existing content. Update the version when config changed in a way which doesn't allow to reuse cache. This will invalidate the cache.\n+\t */\n+\tversion?: string;\n+}\n /**\n  * Multiple entry bundles are created. The key is the chunk name. The value can be a string or an array.\n  *"
      },
      {
        "sha": "6ddc9a9dcbf412d894715c756ed1832004d975f0",
        "filename": "examples/build-common.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fbuild-common.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fbuild-common.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Fbuild-common.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -42,9 +42,9 @@ const doCompileAndReplace = (args, prefix, callback) => {\n };\n \n async.series([\n-\tcallback => doCompileAndReplace(\"--mode production\", \"production\", callback),\n-\tcallback => doCompileAndReplace(\"--mode development --devtool none\", \"development\", callback),\n-\tcallback => doCompileAndReplace(\"--mode none --output-pathinfo\", \"\", callback)\n+\tcallback => doCompileAndReplace(\"--mode production --env production\", \"production\", callback),\n+\tcallback => doCompileAndReplace(\"--mode development --env development --devtool none\", \"development\", callback),\n+\tcallback => doCompileAndReplace(\"--mode none --env none --output-pathinfo\", \"\", callback)\n ], () => {\n \treadme = tc.replaceBase(readme);\n \tfs.writeFile(\"README.md\", readme, \"utf-8\", function() {});"
      },
      {
        "sha": "c0cfd6ec1055f8f58ef4fa4b6b7a35043997fd92",
        "filename": "examples/persistent-caching/README.md",
        "status": "added",
        "additions": 38,
        "deletions": 0,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2FREADME.md",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2FREADME.md",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Fpersistent-caching%2FREADME.md?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,38 @@\n+# example.js\n+\n+``` javascript\n+console.log(process.env.NODE_ENV);\n+\n+import \"react\";\n+import \"react-dom\";\n+import \"acorn\";\n+import \"core-js\";\n+import \"date-fns\";\n+```\n+\n+# webpack.config.js\n+\n+``` javascript\n+const path = require(\"path\");\n+module.exports = (env = \"development\") => ({\n+\tmode: env,\n+\tcache: {\n+\t\ttype: \"filesystem\",\n+\t\tcacheDirectory: path.resolve(__dirname, \".cache\"),\n+\t\tloglevel: \"warning\"\n+\t}\n+});\n+```\n+\n+# Info\n+\n+```\n+Hash: 0a1b2c3d4e5f6a7b8c9d\n+Version: webpack 5.0.0-next\n+    Asset      Size  Chunks             Chunk Names\n+output.js  1.44 MiB       0  [emitted]  main\n+Entrypoint main = output.js\n+chunk    {0} output.js (main) 1.23 MiB [entry]\n+    > .\\example.js main\n+    684 modules\n+```"
      },
      {
        "sha": "41c29c9d16954a708e995a9e37806802f099f8e9",
        "filename": "examples/persistent-caching/build.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Fbuild.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Fbuild.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Fpersistent-caching%2Fbuild.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1 @@\n+require(\"../build-common\");\n\\ No newline at end of file"
      },
      {
        "sha": "54b6aed95cfa0db51f40f46f458d49a564a70f19",
        "filename": "examples/persistent-caching/example.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Fexample.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Fexample.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Fpersistent-caching%2Fexample.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,7 @@\n+console.log(process.env.NODE_ENV);\n+\n+import \"react\";\n+import \"react-dom\";\n+import \"acorn\";\n+import \"core-js\";\n+import \"date-fns\";"
      },
      {
        "sha": "6aec1a88ed56c7cf17f94075dd4bad29c38c4f67",
        "filename": "examples/persistent-caching/template.md",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Ftemplate.md",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Ftemplate.md",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Fpersistent-caching%2Ftemplate.md?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,17 @@\n+# example.js\n+\n+``` javascript\n+{{example.js}}\n+```\n+\n+# webpack.config.js\n+\n+``` javascript\n+{{webpack.config.js}}\n+```\n+\n+# Info\n+\n+```\n+{{stdout}}\n+```"
      },
      {
        "sha": "cde84381610d94a8f6f788a3d93ba76d67233f8a",
        "filename": "examples/persistent-caching/webpack.config.js",
        "status": "added",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/examples%2Fpersistent-caching%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Fpersistent-caching%2Fwebpack.config.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,9 @@\n+const path = require(\"path\");\n+module.exports = (env = \"development\") => ({\n+\tmode: env,\n+\tcache: {\n+\t\ttype: \"filesystem\",\n+\t\tcacheDirectory: path.resolve(__dirname, \".cache\"),\n+\t\tloglevel: \"warning\"\n+\t}\n+});"
      },
      {
        "sha": "e953051d4d2b4aecd1e4b3902a2d08d2a6ed3997",
        "filename": "lib/AsyncDependenciesBlock.js",
        "status": "modified",
        "additions": 20,
        "deletions": 4,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FAsyncDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FAsyncDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FAsyncDependenciesBlock.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const DependenciesBlock = require(\"./DependenciesBlock\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"./ChunkGroup\")} ChunkGroup */\n /** @typedef {import(\"./Module\")} Module */\n@@ -17,11 +18,10 @@ const DependenciesBlock = require(\"./DependenciesBlock\");\n class AsyncDependenciesBlock extends DependenciesBlock {\n \t/**\n \t * @param {GroupOptions} groupOptions options for the group\n-\t * @param {Module} module the Module object\n \t * @param {DependencyLocation=} loc the line of code\n \t * @param {string=} request the request\n \t */\n-\tconstructor(groupOptions, module, loc, request) {\n+\tconstructor(groupOptions, loc, request) {\n \t\tsuper();\n \t\tif (typeof groupOptions === \"string\") {\n \t\t\tgroupOptions = { name: groupOptions };\n@@ -33,8 +33,6 @@ class AsyncDependenciesBlock extends DependenciesBlock {\n \t\tthis.request = request;\n \t\t/** @type {DependenciesBlock} */\n \t\tthis.parent = undefined;\n-\t\t/** @type {[number, number]} */\n-\t\tthis.range = undefined;\n \t}\n \n \t/**\n@@ -63,8 +61,26 @@ class AsyncDependenciesBlock extends DependenciesBlock {\n \t\thash.update(chunkGroup ? chunkGroup.id : \"\");\n \t\tsuper.updateHash(hash, chunkGraph);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.groupOptions);\n+\t\twrite(this.loc);\n+\t\twrite(this.request);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.groupOptions = read();\n+\t\tthis.loc = read();\n+\t\tthis.request = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(AsyncDependenciesBlock, \"webpack/lib/AsyncDependenciesBlock\");\n+\n Object.defineProperty(AsyncDependenciesBlock.prototype, \"module\", {\n \tget() {\n \t\tthrow new Error("
      },
      {
        "sha": "f1b6aaf83018a0355ced6d85cb8ec99ce4aa3f4c",
        "filename": "lib/Cache.js",
        "status": "modified",
        "additions": 2,
        "deletions": 5,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FCache.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FCache.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCache.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -7,9 +7,6 @@\n \n const { AsyncParallelHook, AsyncSeriesBailHook, SyncHook } = require(\"tapable\");\n \n-/** @typedef {import(\"webpack-sources\").Source} Source */\n-/** @typedef {import(\"./Module\")} Module */\n-\n class Cache {\n \tconstructor() {\n \t\tthis.hooks = {\n@@ -30,8 +27,8 @@ class Cache {\n \t\tthis.hooks.get.callAsync(identifier, etag, callback);\n \t}\n \n-\tstore(identifier, etag, source, callback) {\n-\t\tthis.hooks.store.callAsync(identifier, etag, source, callback);\n+\tstore(identifier, etag, data, callback) {\n+\t\tthis.hooks.store.callAsync(identifier, etag, data, callback);\n \t}\n \n \tbeginIdle() {"
      },
      {
        "sha": "87aae7a8b0f79cef26a11f3b7b926288af88d783",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 39,
        "deletions": 12,
        "changes": 51,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -33,6 +33,7 @@ const ModuleDependencyWarning = require(\"./ModuleDependencyWarning\");\n const ModuleGraph = require(\"./ModuleGraph\");\n const ModuleNotFoundError = require(\"./ModuleNotFoundError\");\n const ModuleProfile = require(\"./ModuleProfile\");\n+const ModuleRestoreError = require(\"./ModuleRestoreError\");\n const ModuleTemplate = require(\"./ModuleTemplate\");\n const RuntimeTemplate = require(\"./RuntimeTemplate\");\n const Stats = require(\"./Stats\");\n@@ -498,9 +499,21 @@ class Compilation {\n \t\t\treturn callback(null, alreadyAddedModule);\n \t\t}\n \n+\t\tconst currentProfile = this.profile\n+\t\t\t? this.moduleGraph.getProfile(module)\n+\t\t\t: undefined;\n+\t\tif (currentProfile !== undefined) {\n+\t\t\tcurrentProfile.markRestoringStart();\n+\t\t}\n+\n \t\tconst cacheName = `${this.compilerPath}/module/${identifier}`;\n \t\tthis.cache.get(cacheName, null, (err, cacheModule) => {\n-\t\t\tif (err) return callback(err);\n+\t\t\tif (err) return callback(new ModuleRestoreError(module, err));\n+\n+\t\t\tif (currentProfile !== undefined) {\n+\t\t\t\tcurrentProfile.markRestoringEnd();\n+\t\t\t\tcurrentProfile.markIntegrationStart();\n+\t\t\t}\n \n \t\t\tif (cacheModule) {\n \t\t\t\tcacheModule.updateCacheModule(module);\n@@ -510,6 +523,9 @@ class Compilation {\n \t\t\tthis._modules.set(identifier, module);\n \t\t\tthis.modules.add(module);\n \t\t\tModuleGraph.setModuleGraphForModule(module, this.moduleGraph);\n+\t\t\tif (currentProfile !== undefined) {\n+\t\t\t\tcurrentProfile.markIntegrationEnd();\n+\t\t\t}\n \t\t\tcallback(null, module);\n \t\t});\n \t}\n@@ -757,6 +773,10 @@ class Compilation {\n \t\t\t\t\treturn callback();\n \t\t\t\t}\n \n+\t\t\t\tif (currentProfile !== undefined) {\n+\t\t\t\t\tmoduleGraph.setProfile(newModule, currentProfile);\n+\t\t\t\t}\n+\n \t\t\t\tthis.addModule(newModule, (err, module) => {\n \t\t\t\t\tif (err) {\n \t\t\t\t\t\tif (!err.module) {\n@@ -772,17 +792,20 @@ class Compilation {\n \t\t\t\t\t\tmoduleGraph.setResolvedModule(originModule, dependency, module);\n \t\t\t\t\t}\n \n-\t\t\t\t\tif (module === newModule) {\n-\t\t\t\t\t\tif (currentProfile !== undefined) {\n-\t\t\t\t\t\t\tmoduleGraph.setProfile(module, currentProfile);\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tif (originModule !== undefined) {\n-\t\t\t\t\t\t\tmoduleGraph.setIssuer(module, originModule);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else {\n+\t\t\t\t\tif (moduleGraph.getIssuer(module) === undefined) {\n+\t\t\t\t\t\tmoduleGraph.setIssuer(\n+\t\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\t\toriginModule !== undefined ? originModule : null\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t\tif (module !== newModule) {\n \t\t\t\t\t\tif (currentProfile !== undefined) {\n-\t\t\t\t\t\t\tcurrentProfile.mergeInto(moduleGraph.getProfile(module));\n+\t\t\t\t\t\t\tconst otherProfile = moduleGraph.getProfile(module);\n+\t\t\t\t\t\t\tif (otherProfile !== undefined) {\n+\t\t\t\t\t\t\t\tcurrentProfile.mergeInto(otherProfile);\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tmoduleGraph.setProfile(module, currentProfile);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \n@@ -2144,7 +2167,11 @@ class Compilation {\n \t\t\t\t\t\t\t\t\tsource,\n \t\t\t\t\t\t\t\t\tchunk\n \t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\tthis.cache.store(cacheName, usedHash, source, callback);\n+\t\t\t\t\t\t\t\tif (source !== sourceFromCache) {\n+\t\t\t\t\t\t\t\t\tthis.cache.store(cacheName, usedHash, source, callback);\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tcallback();\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\t\tthis.errors.push(\n \t\t\t\t\t\t\t\t\tnew ChunkRenderError(chunk, file || filenameTemplate, err)"
      },
      {
        "sha": "630274ca9ee2dd496ef1b5317200a19b9652d134",
        "filename": "lib/ContextModule.js",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FContextModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FContextModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModule.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -13,6 +13,7 @@ const WebpackError = require(\"./WebpackError\");\n const compareLocations = require(\"./compareLocations\");\n const { compareModulesById } = require(\"./util/comparators\");\n const contextify = require(\"./util/identifier\").contextify;\n+const makeUnserializable = require(\"./util/makeUnserializable\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./ChunkGraph\")} ChunkGraph */\n@@ -287,8 +288,7 @@ class ContextModule extends Module {\n \t\t\t\t\tconst block = new AsyncDependenciesBlock(\n \t\t\t\t\t\tObject.assign({}, this.options.groupOptions, {\n \t\t\t\t\t\t\tname: this.options.chunkName\n-\t\t\t\t\t\t}),\n-\t\t\t\t\t\tthis\n+\t\t\t\t\t\t})\n \t\t\t\t\t);\n \t\t\t\t\tfor (const dep of dependencies) {\n \t\t\t\t\t\tblock.addDependency(dep);\n@@ -324,7 +324,6 @@ class ContextModule extends Module {\n \t\t\t\t\t\tObject.assign({}, this.options.groupOptions, {\n \t\t\t\t\t\t\tname: chunkName\n \t\t\t\t\t\t}),\n-\t\t\t\t\t\tcompilation.moduleGraph.getModule(dep),\n \t\t\t\t\t\tdep.loc,\n \t\t\t\t\t\tdep.userRequest\n \t\t\t\t\t);\n@@ -835,4 +834,6 @@ webpackEmptyAsyncContext.id = ${JSON.stringify(id)};`;\n \t}\n }\n \n+makeUnserializable(ContextModule);\n+\n module.exports = ContextModule;"
      },
      {
        "sha": "bc07340af6d8c57bf5e7f00d2f8471d8b390d43b",
        "filename": "lib/DependenciesBlock.js",
        "status": "modified",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependenciesBlock.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,8 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"./util/makeSerializable\");\n+\n /** @typedef {import(\"./AsyncDependenciesBlock\")} AsyncDependenciesBlock */\n /** @typedef {import(\"./ChunkGraph\")} ChunkGraph */\n /** @typedef {import(\"./ChunkGroup\")} ChunkGroup */\n@@ -84,6 +86,21 @@ class DependenciesBlock {\n \n \t\treturn false;\n \t}\n+\n+\tserialize({ write }) {\n+\t\twrite(this.dependencies);\n+\t\twrite(this.blocks);\n+\t}\n+\n+\tdeserialize({ read }) {\n+\t\tthis.dependencies = read();\n+\t\tthis.blocks = read();\n+\t\tfor (const block of this.blocks) {\n+\t\t\tblock.parent = this;\n+\t\t}\n+\t}\n }\n \n+makeSerializable(DependenciesBlock, \"webpack/lib/DependenciesBlock\");\n+\n module.exports = DependenciesBlock;"
      },
      {
        "sha": "d6b1b46d8fbf080dd333920ae3e21904ee46c13a",
        "filename": "lib/Dependency.js",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -127,6 +127,18 @@ class Dependency {\n \tgetNumberOfIdOccurrences() {\n \t\treturn 1;\n \t}\n+\n+\tserialize({ write }) {\n+\t\twrite(this.weak);\n+\t\twrite(this.optional);\n+\t\twrite(this.loc);\n+\t}\n+\n+\tdeserialize({ read }) {\n+\t\tthis.weak = read();\n+\t\tthis.optional = read();\n+\t\tthis.loc = read();\n+\t}\n }\n \n Object.defineProperty(Dependency.prototype, \"module\", {"
      },
      {
        "sha": "a195cb3fbd1ede8fac6f031a9124bf657915a539",
        "filename": "lib/ExternalModule.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FExternalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FExternalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FExternalModule.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -8,6 +8,7 @@\n const { OriginalSource, RawSource } = require(\"webpack-sources\");\n const Module = require(\"./Module\");\n const Template = require(\"./Template\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./Chunk\")} Chunk */\n@@ -261,6 +262,28 @@ class ExternalModule extends Module {\n \t\t);\n \t\tsuper.updateHash(hash, chunkGraph);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.request);\n+\t\twrite(this.externalType);\n+\t\twrite(this.userRequest);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.request = read();\n+\t\tthis.externalType = read();\n+\t\tthis.userRequest = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(ExternalModule, \"webpack/lib/ExternalModule\");\n+\n module.exports = ExternalModule;"
      },
      {
        "sha": "817998473ba3bdc2463b2856afed75dfddc37873",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 35,
        "deletions": 2,
        "changes": 37,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -10,6 +10,7 @@ const DependenciesBlock = require(\"./DependenciesBlock\");\n const ModuleGraph = require(\"./ModuleGraph\");\n const Template = require(\"./Template\");\n const { compareChunksById } = require(\"./util/comparators\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./Chunk\")} Chunk */\n@@ -582,8 +583,10 @@ class Module extends DependenciesBlock {\n \t * @returns {void}\n \t */\n \tupdateCacheModule(module) {\n-\t\t// do nothing\n-\t\t// this method can be overriden\n+\t\tthis.type = module.type;\n+\t\tthis.context = module.context;\n+\t\tthis.factoryMeta = module.factoryMeta;\n+\t\tthis.resolveOptions = module.resolveOptions;\n \t}\n \n \t/**\n@@ -592,8 +595,38 @@ class Module extends DependenciesBlock {\n \toriginalSource() {\n \t\treturn null;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.type);\n+\t\twrite(this.context);\n+\t\twrite(this.resolveOptions);\n+\t\twrite(this.factoryMeta);\n+\t\twrite(this.useSourceMap);\n+\t\twrite(this.warnings);\n+\t\twrite(this.errors);\n+\t\twrite(this.buildMeta);\n+\t\twrite(this.buildInfo);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.type = read();\n+\t\tthis.context = read();\n+\t\tthis.resolveOptions = read();\n+\t\tthis.factoryMeta = read();\n+\t\tthis.useSourceMap = read();\n+\t\tthis.warnings = read();\n+\t\tthis.errors = read();\n+\t\tthis.buildMeta = read();\n+\t\tthis.buildInfo = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(Module, \"webpack/lib/Module\");\n+\n Object.defineProperty(Module.prototype, \"hasEqualsChunks\", {\n \tget() {\n \t\tthrow new Error("
      },
      {
        "sha": "5e7124709a87458b0b160ff6c6673c979c948735",
        "filename": "lib/ModuleGraph.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModuleGraph.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModuleGraph.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleGraph.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -24,7 +24,7 @@ class ModuleGraphModule {\n \t\t/** @type {Set<ModuleGraphConnection>} */\n \t\tthis.outgoingConnections = new Set();\n \t\t/** @type {Module | null} */\n-\t\tthis.issuer = null;\n+\t\tthis.issuer = undefined;\n \t\t/** @type {(string | OptimizationBailoutFunction)[]} */\n \t\tthis.optimizationBailout = [];\n \t\t/** @type {false | true | SortableSet<string> | null} */"
      },
      {
        "sha": "c2e64ef95878bf274d57f0dede0a5bbaec07c674",
        "filename": "lib/ModuleProfile.js",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModuleProfile.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModuleProfile.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleProfile.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -9,8 +9,10 @@ class ModuleProfile {\n \tconstructor() {\n \t\tthis.startTime = Date.now();\n \t\tthis.factory = 0;\n+\t\tthis.restoring = 0;\n \t\tthis.integration = 0;\n \t\tthis.building = 0;\n+\t\tthis.storing = 0;\n \t\tthis.additionalFactories = 0;\n \t\tthis.additionalIntegration = 0;\n \t}\n@@ -24,6 +26,15 @@ class ModuleProfile {\n \t\tthis.factory = this.factoryEndTime - this.factoryStartTime;\n \t}\n \n+\tmarkRestoringStart() {\n+\t\tthis.restoringStartTime = Date.now();\n+\t}\n+\n+\tmarkRestoringEnd() {\n+\t\tthis.restoringEndTime = Date.now();\n+\t\tthis.restoring = this.restoringEndTime - this.restoringStartTime;\n+\t}\n+\n \tmarkIntegrationStart() {\n \t\tthis.integrationStartTime = Date.now();\n \t}"
      },
      {
        "sha": "3dec09e29f51ef69224ea50ffd09c78944e6e99f",
        "filename": "lib/ModuleRestoreError.js",
        "status": "added",
        "additions": 38,
        "deletions": 0,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModuleRestoreError.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FModuleRestoreError.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleRestoreError.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,38 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const WebpackError = require(\"./WebpackError\");\n+\n+class ModuleRestoreError extends WebpackError {\n+\tconstructor(module, err) {\n+\t\tlet message = \"Module restore failed: \";\n+\t\tlet details = undefined;\n+\t\tif (err !== null && typeof err === \"object\") {\n+\t\t\tif (typeof err.stack === \"string\" && err.stack) {\n+\t\t\t\tconst stack = err.stack;\n+\t\t\t\tmessage += stack;\n+\t\t\t} else if (typeof err.message === \"string\" && err.message) {\n+\t\t\t\tmessage += err.message;\n+\t\t\t} else {\n+\t\t\t\tmessage += err;\n+\t\t\t}\n+\t\t} else {\n+\t\t\tmessage = err;\n+\t\t}\n+\n+\t\tsuper(message);\n+\n+\t\tthis.name = \"ModuleRestoreError\";\n+\t\tthis.details = details;\n+\t\tthis.module = module;\n+\t\tthis.error = err;\n+\n+\t\tError.captureStackTrace(this, this.constructor);\n+\t}\n+}\n+\n+module.exports = ModuleRestoreError;"
      },
      {
        "sha": "955c4a3c348fe30b9856cd8b96a85c33c852e5e6",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 53,
        "deletions": 2,
        "changes": 55,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -23,6 +23,7 @@ const WebpackError = require(\"./WebpackError\");\n const compareLocations = require(\"./compareLocations\");\n const createHash = require(\"./util/createHash\");\n const contextify = require(\"./util/identifier\").contextify;\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./ChunkGraph\")} ChunkGraph */\n@@ -155,8 +156,8 @@ class NormalModule extends Module {\n \t * @returns {void}\n \t */\n \tupdateCacheModule(module) {\n+\t\tsuper.updateCacheModule(module);\n \t\tconst m = /** @type {NormalModule} */ (module);\n-\t\tthis.type = m.type;\n \t\tthis.request = m.request;\n \t\tthis.userRequest = m.userRequest;\n \t\tthis.rawRequest = m.rawRequest;\n@@ -165,7 +166,6 @@ class NormalModule extends Module {\n \t\tthis.resource = m.resource;\n \t\tthis.matchResource = m.matchResource;\n \t\tthis.loaders = m.loaders;\n-\t\tthis.resolveOptions = m.resolveOptions;\n \t}\n \n \tcreateSourceForAsset(name, content, sourceMap) {\n@@ -634,6 +634,57 @@ class NormalModule extends Module {\n \t\thash.update(this._buildHash);\n \t\tsuper.updateHash(hash, chunkGraph);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\t// constructor\n+\t\twrite(this.type);\n+\t\twrite(this.resource);\n+\t\t// deserialize\n+\t\twrite(this._source);\n+\t\twrite(this._buildHash);\n+\t\twrite(this.buildTimestamp);\n+\t\twrite(this.lineToLine);\n+\t\twrite(this.error);\n+\t\twrite(this._cachedSources);\n+\t\twrite(this._lastSuccessfulBuildMeta);\n+\t\twrite(this._forceBuild);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tstatic deserialize(context) {\n+\t\tconst { read } = context;\n+\t\tconst obj = new NormalModule({\n+\t\t\ttype: read(),\n+\t\t\tresource: read(),\n+\t\t\t// will be filled by updateCacheModule\n+\t\t\trequest: null,\n+\t\t\tuserRequest: null,\n+\t\t\trawRequest: null,\n+\t\t\tloaders: null,\n+\t\t\tmatchResource: null,\n+\t\t\tparser: null,\n+\t\t\tgenerator: null,\n+\t\t\tresolveOptions: null\n+\t\t});\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis._source = read();\n+\t\tthis._buildHash = read();\n+\t\tthis.buildTimestamp = read();\n+\t\tthis.lineToLine = read();\n+\t\tthis.error = read();\n+\t\tthis._cachedSources = read();\n+\t\tthis._lastSuccessfulBuildMeta = read();\n+\t\tthis._forceBuild = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(NormalModule, \"webpack/lib/NormalModule\");\n+\n module.exports = NormalModule;"
      },
      {
        "sha": "d7bef68bd9a761eb62cc9c385b8ae6110b5a70b7",
        "filename": "lib/RawModule.js",
        "status": "modified",
        "additions": 27,
        "deletions": 2,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FRawModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FRawModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRawModule.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -7,6 +7,7 @@\n \n const { OriginalSource, RawSource } = require(\"webpack-sources\");\n const Module = require(\"./Module\");\n+const makeSerializable = require(\"./util/makeSerializable\");\n \n /** @typedef {import(\"webpack-sources\").Source} Source */\n /** @typedef {import(\"./ChunkGraph\")} ChunkGraph */\n@@ -19,7 +20,7 @@ const Module = require(\"./Module\");\n /** @typedef {import(\"./WebpackError\")} WebpackError */\n /** @typedef {import(\"./util/createHash\").Hash} Hash */\n \n-module.exports = class RawModule extends Module {\n+class RawModule extends Module {\n \tconstructor(source, identifier, readableIdentifier) {\n \t\tsuper(\"javascript/dynamic\", null);\n \t\tthis.sourceStr = source;\n@@ -95,4 +96,28 @@ module.exports = class RawModule extends Module {\n \t\thash.update(this.sourceStr);\n \t\tsuper.updateHash(hash, chunkGraph);\n \t}\n-};\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.sourceStr);\n+\t\twrite(this.identifierStr);\n+\t\twrite(this.readableIdentifierStr);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.sourceStr = read();\n+\t\tthis.identifierStr = read();\n+\t\tthis.readableIdentifierStr = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n+}\n+\n+makeSerializable(RawModule, \"webpack/lib/RawModule\");\n+\n+module.exports = RawModule;"
      },
      {
        "sha": "50657effb3f6ab4c04af22f67528f2e477298d72",
        "filename": "lib/Stats.js",
        "status": "modified",
        "additions": 12,
        "deletions": 2,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FStats.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FStats.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FStats.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -561,8 +561,10 @@ class Stats {\n \t\t\tif (!profile) return undefined;\n \t\t\treturn {\n \t\t\t\tresolving: profile.factory,\n+\t\t\t\trestoring: profile.restoring,\n \t\t\t\tbuilding: profile.building,\n \t\t\t\tintegration: profile.integration,\n+\t\t\t\tstoring: profile.storing,\n \t\t\t\tadditionalResolving: profile.additionalFactories,\n \t\t\t\tadditionalIntegration: profile.additionalIntegration,\n \t\t\t\t// TODO remove this in webpack 6\n@@ -1261,8 +1263,10 @@ class Stats {\n \t\t\t\t\t\tif (m.profile) {\n \t\t\t\t\t\t\tconst time =\n \t\t\t\t\t\t\t\tm.profile.resolving +\n+\t\t\t\t\t\t\t\tm.profile.restoring +\n \t\t\t\t\t\t\t\tm.profile.integration +\n-\t\t\t\t\t\t\t\tm.profile.building;\n+\t\t\t\t\t\t\t\tm.profile.building +\n+\t\t\t\t\t\t\t\tm.profile.storing;\n \t\t\t\t\t\t\tcoloredTime(time);\n \t\t\t\t\t\t\tcolors.normal(\" \");\n \t\t\t\t\t\t}\n@@ -1271,15 +1275,21 @@ class Stats {\n \t\t\t\t}\n \t\t\t\tcoloredTime(\n \t\t\t\t\tmodule.profile.resolving +\n+\t\t\t\t\t\tmodule.profile.restoring +\n \t\t\t\t\t\tmodule.profile.integration +\n-\t\t\t\t\t\tmodule.profile.building\n+\t\t\t\t\t\tmodule.profile.building +\n+\t\t\t\t\t\tmodule.profile.storing\n \t\t\t\t);\n \t\t\t\tcolors.normal(\" (resolving: \");\n \t\t\t\tcoloredTime(module.profile.resolving);\n+\t\t\t\tcolors.normal(\", restoring: \");\n+\t\t\t\tcoloredTime(module.profile.restoring);\n \t\t\t\tcolors.normal(\", integration: \");\n \t\t\t\tcoloredTime(module.profile.integration);\n \t\t\t\tcolors.normal(\", building: \");\n \t\t\t\tcoloredTime(module.profile.building);\n+\t\t\t\tcolors.normal(\", storing: \");\n+\t\t\t\tcoloredTime(module.profile.storing);\n \t\t\t\tif (module.profile.additionalResolving) {\n \t\t\t\t\tcolors.normal(\", additional resolving: \");\n \t\t\t\t\tcoloredTime(module.profile.additionalResolving);"
      },
      {
        "sha": "a3e86e5e5e24ffb0d1f86c1fe22eae1eb6c807c6",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 16,
        "deletions": 3,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -457,9 +457,22 @@ class WebpackOptionsApply extends OptionsApply {\n \n \t\tnew WarnCaseSensitiveModulesPlugin().apply(compiler);\n \n-\t\tif (options.cache) {\n-\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n-\t\t\tnew MemoryCachePlugin().apply(compiler);\n+\t\tif (options.cache && typeof options.cache === \"object\") {\n+\t\t\tswitch (options.cache.type) {\n+\t\t\t\tcase \"memory\": {\n+\t\t\t\t\tconst MemoryCachePlugin = require(\"./cache/MemoryCachePlugin\");\n+\t\t\t\t\tnew MemoryCachePlugin().apply(compiler);\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tcase \"filesystem\": {\n+\t\t\t\t\tconst FileCachePlugin = require(\"./cache/FileCachePlugin\");\n+\t\t\t\t\tnew FileCachePlugin(options.cache).apply(compiler);\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tdefault:\n+\t\t\t\t\t// @ts-ignore never is expected here\n+\t\t\t\t\tthrow new Error(`Unknown cache type ${options.cache.type}`);\n+\t\t\t}\n \t\t}\n \n \t\tcompiler.hooks.afterPlugins.call(compiler);"
      },
      {
        "sha": "f8479577a150ab909f4b7badef9da0204f6f3abf",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 21,
        "deletions": 1,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -39,7 +39,27 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\t\t\"make\",\n \t\t\toptions => (options.mode === \"development\" ? \"eval\" : false)\n \t\t);\n-\t\tthis.set(\"cache\", \"make\", options => options.mode === \"development\");\n+\t\tthis.set(\"cache\", \"call\", (value, options) => {\n+\t\t\tif (value === undefined) {\n+\t\t\t\tvalue = options.mode === \"development\";\n+\t\t\t}\n+\t\t\tif (value === true) {\n+\t\t\t\treturn {\n+\t\t\t\t\ttype: \"memory\"\n+\t\t\t\t};\n+\t\t\t}\n+\t\t\tif (!value) {\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\tvalue = Object.assign({}, value);\n+\t\t\tif (value.type === \"filesystem\") {\n+\t\t\t\tif (value.name === undefined) {\n+\t\t\t\t\tvalue.name =\n+\t\t\t\t\t\t(options.name || \"default\") + \"-\" + (options.mode || \"production\");\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn value;\n+\t\t});\n \n \t\tthis.set(\"context\", process.cwd());\n \t\tthis.set(\"target\", \"web\");"
      },
      {
        "sha": "3837e1a1de0ed8c19c806ad06e70532470df7cc3",
        "filename": "lib/cache/FileCachePlugin.js",
        "status": "added",
        "additions": 204,
        "deletions": 0,
        "changes": 204,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fcache%2FFileCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fcache%2FFileCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fcache%2FFileCachePlugin.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,204 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const path = require(\"path\");\n+const createHash = require(\"../util/createHash\");\n+const serializer = require(\"../util/serializer\");\n+\n+/** @typedef {import(\"webpack-sources\").Source} Source */\n+/** @typedef {import(\"../../declarations/WebpackOptions\").FileCacheOptions} FileCacheOptions */\n+/** @typedef {import(\"../Compiler\")} Compiler */\n+/** @typedef {import(\"../Module\")} Module */\n+\n+const memorize = fn => {\n+\tlet result = undefined;\n+\treturn () => {\n+\t\tif (result === undefined) result = fn();\n+\t\treturn result;\n+\t};\n+};\n+\n+const memoryCache = new Map();\n+\n+class FileCachePlugin {\n+\t/**\n+\t * @param {FileCacheOptions} options options\n+\t */\n+\tconstructor(options) {\n+\t\tthis.options = options;\n+\t}\n+\n+\tstatic purgeMemoryCache() {\n+\t\tmemoryCache.clear();\n+\t}\n+\n+\t/**\n+\t * @param {Compiler} compiler Webpack compiler\n+\t * @returns {void}\n+\t */\n+\tapply(compiler) {\n+\t\tconst cacheDirectory = path.resolve(\n+\t\t\tthis.options.cacheDirectory || \"node_modules/.cache/webpack/\",\n+\t\t\tthis.options.name || \"default\"\n+\t\t);\n+\t\tconst hashAlgorithm = this.options.hashAlgorithm || \"md4\";\n+\t\tconst version = this.options.version || \"\";\n+\t\tconst log = this.options.loglevel\n+\t\t\t? { debug: 3, info: 2, warning: 1 }[this.options.loglevel]\n+\t\t\t: 0;\n+\t\tconst store = this.options.store || \"idle\";\n+\n+\t\tlet pendingPromiseFactories = new Map();\n+\t\tconst toHash = str => {\n+\t\t\tconst hash = createHash(hashAlgorithm);\n+\t\t\thash.update(str);\n+\t\t\tconst digest = hash.digest(\"hex\");\n+\t\t\treturn `${digest.slice(0, 2)}/${digest.slice(2)}`;\n+\t\t};\n+\t\tcompiler.cache.hooks.store.tapPromise(\n+\t\t\t\"FileCachePlugin\",\n+\t\t\t(identifier, etag, data) => {\n+\t\t\t\tconst entry = { identifier, data: () => data, etag, version };\n+\t\t\t\tconst filename = path.join(\n+\t\t\t\t\tcacheDirectory,\n+\t\t\t\t\ttoHash(identifier) + \".data\"\n+\t\t\t\t);\n+\t\t\t\tmemoryCache.set(filename, entry);\n+\t\t\t\tconst promiseFactory = () =>\n+\t\t\t\t\tserializer\n+\t\t\t\t\t\t.serializeToFile(entry, filename)\n+\t\t\t\t\t\t.then(() => {\n+\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\t\tconsole.warn(`Cached ${identifier} to ${filename}.`);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t})\n+\t\t\t\t\t\t.catch(err => {\n+\t\t\t\t\t\t\tif (log >= 1) {\n+\t\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t\t`Caching failed for ${identifier}: ${\n+\t\t\t\t\t\t\t\t\t\tlog >= 3 ? err.stack : err\n+\t\t\t\t\t\t\t\t\t}`\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t});\n+\t\t\t\tif (store === \"instant\") {\n+\t\t\t\t\treturn promiseFactory();\n+\t\t\t\t} else if (store === \"idle\") {\n+\t\t\t\t\tpendingPromiseFactories.set(filename, promiseFactory);\n+\t\t\t\t\treturn Promise.resolve();\n+\t\t\t\t} else if (store === \"background\") {\n+\t\t\t\t\tconst promise = promiseFactory();\n+\t\t\t\t\tpendingPromiseFactories.set(filename, () => promise);\n+\t\t\t\t\treturn Promise.resolve();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t);\n+\t\tcompiler.cache.hooks.get.tapPromise(\n+\t\t\t\"FileCachePlugin\",\n+\t\t\t(identifier, etag) => {\n+\t\t\t\tconst filename = path.join(\n+\t\t\t\t\tcacheDirectory,\n+\t\t\t\t\ttoHash(identifier) + \".data\"\n+\t\t\t\t);\n+\t\t\t\tconst memory = memoryCache.get(filename);\n+\t\t\t\tif (memory !== undefined) {\n+\t\t\t\t\treturn Promise.resolve(\n+\t\t\t\t\t\tmemory.etag === etag && memory.version === version\n+\t\t\t\t\t\t\t? memory.data()\n+\t\t\t\t\t\t\t: undefined\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\treturn serializer.deserializeFromFile(filename).then(\n+\t\t\t\t\tcacheEntry => {\n+\t\t\t\t\t\tcacheEntry = {\n+\t\t\t\t\t\t\tidentifier: cacheEntry.identifier,\n+\t\t\t\t\t\t\tetag: cacheEntry.etag,\n+\t\t\t\t\t\t\tversion: cacheEntry.version,\n+\t\t\t\t\t\t\tdata: memorize(cacheEntry.data)\n+\t\t\t\t\t\t};\n+\t\t\t\t\t\tmemoryCache.set(filename, cacheEntry);\n+\t\t\t\t\t\tif (cacheEntry === undefined) return;\n+\t\t\t\t\t\tif (cacheEntry.identifier !== identifier) {\n+\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t\t`Restored ${identifier} from ${filename}, but identifier doesn't match.`\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (cacheEntry.etag !== etag) {\n+\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t\t`Restored ${etag} from ${filename}, but etag doesn't match.`\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (cacheEntry.version !== version) {\n+\t\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t\t`Restored ${version} from ${filename}, but version doesn't match.`\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (log >= 2) {\n+\t\t\t\t\t\t\tconsole.warn(`Restored ${identifier} from ${filename}.`);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\treturn cacheEntry.data();\n+\t\t\t\t\t},\n+\t\t\t\t\terr => {\n+\t\t\t\t\t\tif (log >= 1 && err && err.code !== \"ENOENT\") {\n+\t\t\t\t\t\t\tconsole.warn(\n+\t\t\t\t\t\t\t\t`Restoring failed for ${identifier} from ${filename}: ${\n+\t\t\t\t\t\t\t\t\tlog >= 3 ? err.stack : err\n+\t\t\t\t\t\t\t\t}`\n+\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t);\n+\t\t\t}\n+\t\t);\n+\t\tcompiler.cache.hooks.shutdown.tapPromise(\"FileCachePlugin\", () => {\n+\t\t\tisIdle = false;\n+\t\t\tconst promises = Array.from(pendingPromiseFactories.values()).map(fn =>\n+\t\t\t\tfn()\n+\t\t\t);\n+\t\t\tpendingPromiseFactories.clear();\n+\t\t\tif (currentIdlePromise !== undefined) promises.push(currentIdlePromise);\n+\t\t\treturn Promise.all(promises);\n+\t\t});\n+\n+\t\tlet currentIdlePromise;\n+\t\tlet isIdle = false;\n+\t\tconst processIdleTasks = () => {\n+\t\t\tif (isIdle && pendingPromiseFactories.size > 0) {\n+\t\t\t\tconst promises = [];\n+\t\t\t\tconst maxTime = Date.now() + 100;\n+\t\t\t\tlet maxCount = 100;\n+\t\t\t\tfor (const [filename, factory] of pendingPromiseFactories) {\n+\t\t\t\t\tpendingPromiseFactories.delete(filename);\n+\t\t\t\t\tpromises.push(factory());\n+\t\t\t\t\tif (maxCount-- <= 0 || Date.now() > maxTime) break;\n+\t\t\t\t}\n+\t\t\t\tcurrentIdlePromise = Promise.all(promises).then(() => {\n+\t\t\t\t\tcurrentIdlePromise = undefined;\n+\t\t\t\t});\n+\t\t\t\tcurrentIdlePromise.then(processIdleTasks);\n+\t\t\t}\n+\t\t};\n+\t\tcompiler.cache.hooks.beginIdle.tap(\"FileCachePlugin\", () => {\n+\t\t\tisIdle = true;\n+\t\t\tPromise.resolve().then(processIdleTasks);\n+\t\t});\n+\t\tcompiler.cache.hooks.endIdle.tap(\"FileCachePlugin\", () => {\n+\t\t\tisIdle = false;\n+\t\t});\n+\t}\n+}\n+\n+module.exports = FileCachePlugin;"
      },
      {
        "sha": "ed026cd0e4453a357d3827b4765c22a892f4c45d",
        "filename": "lib/dependencies/AMDDefineDependency.js",
        "status": "modified",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDDefineDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDDefineDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDDefineDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -25,8 +26,35 @@ class AMDDefineDependency extends NullDependency {\n \tget type() {\n \t\treturn \"amd define\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.range);\n+\t\twrite(this.arrayRange);\n+\t\twrite(this.functionRange);\n+\t\twrite(this.objectRange);\n+\t\twrite(this.namedModule);\n+\t\twrite(this.localModule);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.range = read();\n+\t\tthis.arrayRange = read();\n+\t\tthis.functionRange = read();\n+\t\tthis.objectRange = read();\n+\t\tthis.namedModule = read();\n+\t\tthis.localModule = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tAMDDefineDependency,\n+\t\"webpack/lib/dependencies/AMDDefineDependency\"\n+);\n+\n AMDDefineDependency.Template = class AMDDefineDependencyTemplate extends NullDependency.Template {\n \tget definitions() {\n \t\treturn {"
      },
      {
        "sha": "5c6d02cec2328d4e03a5cc9c2853d82cbfdf87e5",
        "filename": "lib/dependencies/AMDDefineDependencyParserPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -76,6 +76,7 @@ class AMDDefineDependencyParserPlugin {\n \t\t\t\t\tidentifiers[idx] = request;\n \t\t\t\t\tdep = request;\n \t\t\t\t} else if ((localModule = getLocalModule(parser.state, request))) {\n+\t\t\t\t\tlocalModule.flagUsed();\n \t\t\t\t\tdep = new LocalModuleDependency(localModule, undefined, false);\n \t\t\t\t\tdep.loc = expr.loc;\n \t\t\t\t\tparser.state.current.addDependency(dep);\n@@ -112,6 +113,7 @@ class AMDDefineDependencyParserPlugin {\n \t\t\t} else if (\n \t\t\t\t(localModule = getLocalModule(parser.state, param.string, namedModule))\n \t\t\t) {\n+\t\t\t\tlocalModule.flagUsed();\n \t\t\t\tdep = new LocalModuleDependency(localModule, param.range, false);\n \t\t\t} else {\n \t\t\t\tdep = this.newRequireItemDependency(param.string, param.range);"
      },
      {
        "sha": "b95d2413c6aa12bb831bc2e0ce288751c0049dd6",
        "filename": "lib/dependencies/AMDRequireArrayDependency.js",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireArrayDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireArrayDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireArrayDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -7,22 +7,47 @@\n \n const Dependency = require(\"../Dependency\");\n const DependencyTemplate = require(\"../DependencyTemplate\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n /** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n \n class AMDRequireArrayDependency extends Dependency {\n \tconstructor(depsArray, range) {\n \t\tsuper();\n+\n \t\tthis.depsArray = depsArray;\n \t\tthis.range = range;\n \t}\n \n \tget type() {\n \t\treturn \"amd require array\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.depsArray);\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.depsArray = read();\n+\t\tthis.range = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tAMDRequireArrayDependency,\n+\t\"webpack/lib/dependencies/AMDRequireArrayDependency\"\n+);\n+\n AMDRequireArrayDependency.Template = class AMDRequireArrayDependencyTemplate extends DependencyTemplate {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "c3fcbbce3ed6422715ed0e0e3e6a67540f922433",
        "filename": "lib/dependencies/AMDRequireContextDependency.js",
        "status": "modified",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireContextDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,17 +5,45 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ContextDependency = require(\"./ContextDependency\");\n+\n class AMDRequireContextDependency extends ContextDependency {\n \tconstructor(options, range, valueRange) {\n \t\tsuper(options);\n+\n \t\tthis.range = range;\n \t\tthis.valueRange = valueRange;\n \t}\n \n \tget type() {\n \t\treturn \"amd require context\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\t\twrite(this.valueRange);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\t\tthis.valueRange = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n+\n+makeSerializable(\n+\tAMDRequireContextDependency,\n+\t\"webpack/lib/dependencies/AMDRequireContextDependency\"\n+);\n+\n AMDRequireContextDependency.Template = require(\"./ContextDependencyTemplateAsRequireCall\");\n+\n module.exports = AMDRequireContextDependency;"
      },
      {
        "sha": "eebe0bce26326dd6dca47ecb72ab15963b07cad7",
        "filename": "lib/dependencies/AMDRequireDependenciesBlock.js",
        "status": "modified",
        "additions": 12,
        "deletions": 35,
        "changes": 47,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireDependenciesBlock.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,40 +6,17 @@\n \"use strict\";\n \n const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n-const AMDRequireDependency = require(\"./AMDRequireDependency\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n \n-module.exports = class AMDRequireDependenciesBlock extends AsyncDependenciesBlock {\n-\tconstructor(\n-\t\texpr,\n-\t\tarrayRange,\n-\t\tfunctionRange,\n-\t\terrorCallbackRange,\n-\t\tmodule,\n-\t\tloc,\n-\t\trequest\n-\t) {\n-\t\tsuper(null, module, loc, request);\n-\t\tthis.expr = expr;\n-\t\tthis.outerRange = expr.range;\n-\t\tthis.arrayRange = arrayRange;\n-\t\tthis.functionBindThis = false;\n-\t\tthis.functionRange = functionRange;\n-\t\tthis.errorCallbackBindThis = false;\n-\t\tthis.errorCallbackRange = errorCallbackRange;\n-\t\tthis.bindThis = true;\n-\t\tif (arrayRange && functionRange && errorCallbackRange) {\n-\t\t\tthis.range = [arrayRange[0], errorCallbackRange[1]];\n-\t\t} else if (arrayRange && functionRange) {\n-\t\t\tthis.range = [arrayRange[0], functionRange[1]];\n-\t\t} else if (arrayRange) {\n-\t\t\tthis.range = arrayRange;\n-\t\t} else if (functionRange) {\n-\t\t\tthis.range = functionRange;\n-\t\t} else {\n-\t\t\tthis.range = expr.range;\n-\t\t}\n-\t\tconst dep = new AMDRequireDependency(this);\n-\t\tdep.loc = loc;\n-\t\tthis.addDependency(dep);\n+class AMDRequireDependenciesBlock extends AsyncDependenciesBlock {\n+\tconstructor(loc, request) {\n+\t\tsuper(null, loc, request);\n \t}\n-};\n+}\n+\n+makeSerializable(\n+\tAMDRequireDependenciesBlock,\n+\t\"webpack/lib/dependencies/AMDRequireDependenciesBlock\"\n+);\n+\n+module.exports = AMDRequireDependenciesBlock;"
      },
      {
        "sha": "48a2362e66cd6e5e7df8ddd88b45bcb9c6f703a4",
        "filename": "lib/dependencies/AMDRequireDependenciesBlockParserPlugin.js",
        "status": "modified",
        "additions": 28,
        "deletions": 23,
        "changes": 51,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireDependenciesBlockParserPlugin.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -9,6 +9,7 @@ const UnsupportedFeatureWarning = require(\"../UnsupportedFeatureWarning\");\n const AMDRequireArrayDependency = require(\"./AMDRequireArrayDependency\");\n const AMDRequireContextDependency = require(\"./AMDRequireContextDependency\");\n const AMDRequireDependenciesBlock = require(\"./AMDRequireDependenciesBlock\");\n+const AMDRequireDependency = require(\"./AMDRequireDependency\");\n const AMDRequireItemDependency = require(\"./AMDRequireItemDependency\");\n const ConstDependency = require(\"./ConstDependency\");\n const ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\n@@ -75,6 +76,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t} else if ([\"exports\", \"module\"].includes(request)) {\n \t\t\t\t\tdep = request;\n \t\t\t\t} else if ((localModule = getLocalModule(parser.state, request))) {\n+\t\t\t\t\tlocalModule.flagUsed();\n \t\t\t\t\tdep = new LocalModuleDependency(localModule, undefined, false);\n \t\t\t\t\tdep.loc = expr.loc;\n \t\t\t\t\tparser.state.current.addDependency(dep);\n@@ -117,6 +119,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t\tparam.range\n \t\t\t\t);\n \t\t\t} else if ((localModule = getLocalModule(parser.state, param.string))) {\n+\t\t\t\tlocalModule.flagUsed();\n \t\t\t\tdep = new LocalModuleDependency(localModule, param.range, false);\n \t\t\t} else {\n \t\t\t\tdep = this.newRequireItemDependency(param.string, param.range);\n@@ -166,23 +169,28 @@ class AMDRequireDependenciesBlockParserPlugin {\n \n \tprocessCallRequire(parser, expr) {\n \t\tlet param;\n+\t\tlet depBlock;\n \t\tlet dep;\n \t\tlet result;\n \n \t\tconst old = parser.state.current;\n \n \t\tif (expr.arguments.length >= 1) {\n \t\t\tparam = parser.evaluateExpression(expr.arguments[0]);\n-\t\t\tdep = this.newRequireDependenciesBlock(\n-\t\t\t\texpr,\n-\t\t\t\tparam.range,\n-\t\t\t\texpr.arguments.length > 1 ? expr.arguments[1].range : null,\n-\t\t\t\texpr.arguments.length > 2 ? expr.arguments[2].range : null,\n-\t\t\t\tparser.state.module,\n+\t\t\tdepBlock = this.newRequireDependenciesBlock(\n \t\t\t\texpr.loc,\n \t\t\t\tthis.processArrayForRequestString(param)\n \t\t\t);\n-\t\t\tparser.state.current = dep;\n+\t\t\tdep = this.newRequireDependency(\n+\t\t\t\texpr.range,\n+\t\t\t\tparam.range,\n+\t\t\t\texpr.arguments.length > 1 ? expr.arguments[1].range : null,\n+\t\t\t\texpr.arguments.length > 2 ? expr.arguments[2].range : null\n+\t\t\t);\n+\t\t\tdep.loc = expr.loc;\n+\t\t\tdepBlock.addDependency(dep);\n+\n+\t\t\tparser.state.current = depBlock;\n \t\t}\n \n \t\tif (expr.arguments.length === 1) {\n@@ -191,7 +199,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t});\n \t\t\tparser.state.current = old;\n \t\t\tif (!result) return;\n-\t\t\tparser.state.current.addBlock(dep);\n+\t\t\tparser.state.current.addBlock(depBlock);\n \t\t\treturn true;\n \t\t}\n \n@@ -201,7 +209,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t\tresult = this.processArray(parser, expr, param);\n \t\t\t\t});\n \t\t\t\tif (!result) {\n-\t\t\t\t\tdep = new UnsupportedDependency(\"unsupported\", expr.range);\n+\t\t\t\t\tconst dep = new UnsupportedDependency(\"unsupported\", expr.range);\n \t\t\t\t\told.addDependency(dep);\n \t\t\t\t\tif (parser.state.module) {\n \t\t\t\t\t\tparser.state.module.errors.push(\n@@ -213,7 +221,7 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t);\n \t\t\t\t\t}\n-\t\t\t\t\tdep = null;\n+\t\t\t\t\tdepBlock = null;\n \t\t\t\t\treturn true;\n \t\t\t\t}\n \t\t\t\tdep.functionBindThis = this.processFunctionArgument(\n@@ -228,29 +236,26 @@ class AMDRequireDependenciesBlockParserPlugin {\n \t\t\t\t}\n \t\t\t} finally {\n \t\t\t\tparser.state.current = old;\n-\t\t\t\tif (dep) parser.state.current.addBlock(dep);\n+\t\t\t\tif (depBlock) parser.state.current.addBlock(depBlock);\n \t\t\t}\n \t\t\treturn true;\n \t\t}\n \t}\n \n-\tnewRequireDependenciesBlock(\n-\t\texpr,\n+\tnewRequireDependenciesBlock(loc, request) {\n+\t\treturn new AMDRequireDependenciesBlock(loc, request);\n+\t}\n+\tnewRequireDependency(\n+\t\touterRange,\n \t\tarrayRange,\n \t\tfunctionRange,\n-\t\terrorCallbackRange,\n-\t\tmodule,\n-\t\tloc,\n-\t\trequest\n+\t\terrorCallbackRange\n \t) {\n-\t\treturn new AMDRequireDependenciesBlock(\n-\t\t\texpr,\n+\t\treturn new AMDRequireDependency(\n+\t\t\touterRange,\n \t\t\tarrayRange,\n \t\t\tfunctionRange,\n-\t\t\terrorCallbackRange,\n-\t\t\tmodule,\n-\t\t\tloc,\n-\t\t\trequest\n+\t\t\terrorCallbackRange\n \t\t);\n \t}\n \tnewRequireItemDependency(request, range) {"
      },
      {
        "sha": "5efd05fd3015e3ee1621695121652700707c1179",
        "filename": "lib/dependencies/AMDRequireDependency.js",
        "status": "modified",
        "additions": 83,
        "deletions": 70,
        "changes": 153,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,143 +5,156 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n /** @typedef {import(\"../Dependency\")} Dependency */\n /** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n \n class AMDRequireDependency extends NullDependency {\n-\tconstructor(block) {\n+\tconstructor(outerRange, arrayRange, functionRange, errorCallbackRange) {\n \t\tsuper();\n-\t\tthis.block = block;\n+\n+\t\tthis.outerRange = outerRange;\n+\t\tthis.arrayRange = arrayRange;\n+\t\tthis.functionRange = functionRange;\n+\t\tthis.errorCallbackRange = errorCallbackRange;\n+\t\tthis.functionBindThis = false;\n+\t\tthis.errorCallbackBindThis = false;\n+\t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.outerRange);\n+\t\twrite(this.arrayRange);\n+\t\twrite(this.functionRange);\n+\t\twrite(this.errorCallbackRange);\n+\t\twrite(this.functionBindThis);\n+\t\twrite(this.errorCallbackBindThis);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.outerRange = read();\n+\t\tthis.arrayRange = read();\n+\t\tthis.functionRange = read();\n+\t\tthis.errorCallbackRange = read();\n+\t\tthis.functionBindThis = read();\n+\t\tthis.errorCallbackBindThis = read();\n+\n+\t\tsuper.deserialize(context);\n \t}\n }\n \n+makeSerializable(\n+\tAMDRequireDependency,\n+\t\"webpack/lib/dependencies/AMDRequireDependency\"\n+);\n+\n AMDRequireDependency.Template = class AMDRequireDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n \t * @param {ReplaceSource} source the current replace source which can be modified\n \t * @param {DependencyTemplateContext} templateContext the context object\n \t * @returns {void}\n \t */\n-\tapply(dependency, source, { runtimeTemplate, chunkGraph }) {\n+\tapply(dependency, source, { runtimeTemplate, moduleGraph, chunkGraph }) {\n \t\tconst dep = /** @type {AMDRequireDependency} */ (dependency);\n-\t\tconst depBlock = dep.block;\n+\t\tconst depBlock = moduleGraph.getParentBlock(dep);\n \t\tconst promise = runtimeTemplate.blockPromise({\n \t\t\tchunkGraph,\n \t\t\tblock: depBlock,\n \t\t\tmessage: \"AMD require\"\n \t\t});\n \n \t\t// has array range but no function range\n-\t\tif (depBlock.arrayRange && !depBlock.functionRange) {\n+\t\tif (dep.arrayRange && !dep.functionRange) {\n \t\t\tconst startBlock = `${promise}.then(function() {`;\n \t\t\tconst endBlock = `;}).catch(${runtimeTemplate.onError()})`;\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.outerRange[0],\n-\t\t\t\tdepBlock.arrayRange[0] - 1,\n-\t\t\t\tstartBlock\n-\t\t\t);\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.arrayRange[1],\n-\t\t\t\tdepBlock.outerRange[1] - 1,\n-\t\t\t\tendBlock\n-\t\t\t);\n+\n+\t\t\tsource.replace(dep.outerRange[0], dep.arrayRange[0] - 1, startBlock);\n+\n+\t\t\tsource.replace(dep.arrayRange[1], dep.outerRange[1] - 1, endBlock);\n+\n \t\t\treturn;\n \t\t}\n \n \t\t// has function range but no array range\n-\t\tif (depBlock.functionRange && !depBlock.arrayRange) {\n+\t\tif (dep.functionRange && !dep.arrayRange) {\n \t\t\tconst startBlock = `${promise}.then((`;\n \t\t\tconst endBlock = `).bind(exports, __webpack_require__, exports, module)).catch(${runtimeTemplate.onError()})`;\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.outerRange[0],\n-\t\t\t\tdepBlock.functionRange[0] - 1,\n-\t\t\t\tstartBlock\n-\t\t\t);\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.functionRange[1],\n-\t\t\t\tdepBlock.outerRange[1] - 1,\n-\t\t\t\tendBlock\n-\t\t\t);\n+\n+\t\t\tsource.replace(dep.outerRange[0], dep.functionRange[0] - 1, startBlock);\n+\n+\t\t\tsource.replace(dep.functionRange[1], dep.outerRange[1] - 1, endBlock);\n+\n \t\t\treturn;\n \t\t}\n \n \t\t// has array range, function range, and errorCallbackRange\n-\t\tif (\n-\t\t\tdepBlock.arrayRange &&\n-\t\t\tdepBlock.functionRange &&\n-\t\t\tdepBlock.errorCallbackRange\n-\t\t) {\n+\t\tif (dep.arrayRange && dep.functionRange && dep.errorCallbackRange) {\n \t\t\tconst startBlock = `${promise}.then(function() { `;\n \t\t\tconst errorRangeBlock = `}${\n-\t\t\t\tdepBlock.functionBindThis ? \".bind(this)\" : \"\"\n+\t\t\t\tdep.functionBindThis ? \".bind(this)\" : \"\"\n \t\t\t}).catch(`;\n-\t\t\tconst endBlock = `${\n-\t\t\t\tdepBlock.errorCallbackBindThis ? \".bind(this)\" : \"\"\n-\t\t\t})`;\n+\t\t\tconst endBlock = `${dep.errorCallbackBindThis ? \".bind(this)\" : \"\"})`;\n+\n+\t\t\tsource.replace(dep.outerRange[0], dep.arrayRange[0] - 1, startBlock);\n \n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.outerRange[0],\n-\t\t\t\tdepBlock.arrayRange[0] - 1,\n-\t\t\t\tstartBlock\n-\t\t\t);\n \t\t\tsource.insert(\n-\t\t\t\tdepBlock.arrayRange[0] + 0.9,\n+\t\t\t\tdep.arrayRange[0] + 0.9,\n \t\t\t\t\"var __WEBPACK_AMD_REQUIRE_ARRAY__ = \"\n \t\t\t);\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.arrayRange[1],\n-\t\t\t\tdepBlock.functionRange[0] - 1,\n-\t\t\t\t\"; (\"\n-\t\t\t);\n+\n+\t\t\tsource.replace(dep.arrayRange[1], dep.functionRange[0] - 1, \"; (\");\n+\n \t\t\tsource.insert(\n-\t\t\t\tdepBlock.functionRange[1],\n+\t\t\t\tdep.functionRange[1],\n \t\t\t\t\").apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);\"\n \t\t\t);\n+\n \t\t\tsource.replace(\n-\t\t\t\tdepBlock.functionRange[1],\n-\t\t\t\tdepBlock.errorCallbackRange[0] - 1,\n+\t\t\t\tdep.functionRange[1],\n+\t\t\t\tdep.errorCallbackRange[0] - 1,\n \t\t\t\terrorRangeBlock\n \t\t\t);\n+\n \t\t\tsource.replace(\n-\t\t\t\tdepBlock.errorCallbackRange[1],\n-\t\t\t\tdepBlock.outerRange[1] - 1,\n+\t\t\t\tdep.errorCallbackRange[1],\n+\t\t\t\tdep.outerRange[1] - 1,\n \t\t\t\tendBlock\n \t\t\t);\n+\n \t\t\treturn;\n \t\t}\n \n \t\t// has array range, function range, but no errorCallbackRange\n-\t\tif (depBlock.arrayRange && depBlock.functionRange) {\n+\t\tif (dep.arrayRange && dep.functionRange) {\n \t\t\tconst startBlock = `${promise}.then(function() { `;\n \t\t\tconst endBlock = `}${\n-\t\t\t\tdepBlock.functionBindThis ? \".bind(this)\" : \"\"\n+\t\t\t\tdep.functionBindThis ? \".bind(this)\" : \"\"\n \t\t\t}).catch(${runtimeTemplate.onError()})`;\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.outerRange[0],\n-\t\t\t\tdepBlock.arrayRange[0] - 1,\n-\t\t\t\tstartBlock\n-\t\t\t);\n+\n+\t\t\tsource.replace(dep.outerRange[0], dep.arrayRange[0] - 1, startBlock);\n+\n \t\t\tsource.insert(\n-\t\t\t\tdepBlock.arrayRange[0] + 0.9,\n+\t\t\t\tdep.arrayRange[0] + 0.9,\n \t\t\t\t\"var __WEBPACK_AMD_REQUIRE_ARRAY__ = \"\n \t\t\t);\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.arrayRange[1],\n-\t\t\t\tdepBlock.functionRange[0] - 1,\n-\t\t\t\t\"; (\"\n-\t\t\t);\n+\n+\t\t\tsource.replace(dep.arrayRange[1], dep.functionRange[0] - 1, \"; (\");\n+\n \t\t\tsource.insert(\n-\t\t\t\tdepBlock.functionRange[1],\n+\t\t\t\tdep.functionRange[1],\n \t\t\t\t\").apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);\"\n \t\t\t);\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.functionRange[1],\n-\t\t\t\tdepBlock.outerRange[1] - 1,\n-\t\t\t\tendBlock\n-\t\t\t);\n+\n+\t\t\tsource.replace(dep.functionRange[1], dep.outerRange[1] - 1, endBlock);\n \t\t}\n \t}\n };"
      },
      {
        "sha": "b525782bdae956712a4b353d397e4d6b0d4d5875",
        "filename": "lib/dependencies/AMDRequireItemDependency.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireItemDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FAMDRequireItemDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDRequireItemDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,20 +5,43 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n const ModuleDependencyTemplateAsRequireId = require(\"./ModuleDependencyTemplateAsRequireId\");\n \n class AMDRequireItemDependency extends ModuleDependency {\n \tconstructor(request, range) {\n \t\tsuper(request);\n+\n \t\tthis.range = range;\n \t}\n \n \tget type() {\n \t\treturn \"amd require\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tAMDRequireItemDependency,\n+\t\"webpack/lib/dependencies/AMDRequireItemDependency\"\n+);\n+\n AMDRequireItemDependency.Template = ModuleDependencyTemplateAsRequireId;\n \n module.exports = AMDRequireItemDependency;"
      },
      {
        "sha": "7cb7d0fc4cb0b436f3b1c2c6885df8c15419b31d",
        "filename": "lib/dependencies/CachedConstDependency.js",
        "status": "modified",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCachedConstDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCachedConstDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCachedConstDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -7,6 +7,7 @@\n \n const DependencyTemplate = require(\"../DependencyTemplate\");\n const InitFragment = require(\"../InitFragment\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -21,6 +22,7 @@ const NullDependency = require(\"./NullDependency\");\n class CachedConstDependency extends NullDependency {\n \tconstructor(expression, range, identifier) {\n \t\tsuper();\n+\n \t\tthis.expression = expression;\n \t\tthis.range = range;\n \t\tthis.identifier = identifier;\n@@ -37,8 +39,33 @@ class CachedConstDependency extends NullDependency {\n \t\thash.update(this.range + \"\");\n \t\thash.update(this.expression + \"\");\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.expression);\n+\t\twrite(this.range);\n+\t\twrite(this.identifier);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.expression = read();\n+\t\tthis.range = read();\n+\t\tthis.identifier = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tCachedConstDependency,\n+\t\"webpack/lib/dependencies/CachedConstDependency\"\n+);\n+\n CachedConstDependency.Template = class CachedConstDependencyTemplate extends DependencyTemplate {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n@@ -48,8 +75,10 @@ CachedConstDependency.Template = class CachedConstDependencyTemplate extends Dep\n \t */\n \tapply(dependency, source, { runtimeTemplate, dependencyTemplates }) {\n \t\tconst dep = /** @type {CachedConstDependency} */ (dependency);\n+\n \t\tif (typeof dep.range === \"number\") {\n \t\t\tsource.insert(dep.range, dep.identifier);\n+\n \t\t\treturn;\n \t\t}\n \n@@ -63,6 +92,7 @@ CachedConstDependency.Template = class CachedConstDependencyTemplate extends Dep\n \t */\n \tgetInitFragments(dependency, { runtimeTemplate, dependencyTemplates }) {\n \t\tconst dep = /** @type {CachedConstDependency} */ (dependency);\n+\n \t\treturn [\n \t\t\tnew InitFragment(\n \t\t\t\t`var ${dep.identifier} = ${dep.expression};\\n`,"
      },
      {
        "sha": "51227afdedcc61c8ccc0835c5c4061fe38b2c67f",
        "filename": "lib/dependencies/CommonJsRequireContextDependency.js",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCommonJsRequireContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCommonJsRequireContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCommonJsRequireContextDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,21 +5,46 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ContextDependency = require(\"./ContextDependency\");\n const ContextDependencyTemplateAsRequireCall = require(\"./ContextDependencyTemplateAsRequireCall\");\n \n class CommonJsRequireContextDependency extends ContextDependency {\n \tconstructor(options, range, valueRange) {\n \t\tsuper(options);\n+\n \t\tthis.range = range;\n \t\tthis.valueRange = valueRange;\n \t}\n \n \tget type() {\n \t\treturn \"cjs require context\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\t\twrite(this.valueRange);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\t\tthis.valueRange = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tCommonJsRequireContextDependency,\n+\t\"webpack/lib/dependencies/CommonJsRequireContextDependency\"\n+);\n+\n CommonJsRequireContextDependency.Template = ContextDependencyTemplateAsRequireCall;\n \n module.exports = CommonJsRequireContextDependency;"
      },
      {
        "sha": "4dae5c01df50f656fee72ba7830a215f91836887",
        "filename": "lib/dependencies/CommonJsRequireDependency.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCommonJsRequireDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCommonJsRequireDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCommonJsRequireDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n const ModuleDependencyTemplateAsId = require(\"./ModuleDependencyTemplateAsId\");\n \n@@ -21,4 +22,9 @@ class CommonJsRequireDependency extends ModuleDependency {\n \n CommonJsRequireDependency.Template = ModuleDependencyTemplateAsId;\n \n+makeSerializable(\n+\tCommonJsRequireDependency,\n+\t\"webpack/lib/dependencies/CommonJsRequireDependency\"\n+);\n+\n module.exports = CommonJsRequireDependency;"
      },
      {
        "sha": "aaa2e592d1f2ecf0580faeb94b6b36c975d5198f",
        "filename": "lib/dependencies/CommonJsRequireDependencyParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCommonJsRequireDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FCommonJsRequireDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCommonJsRequireDependencyParserPlugin.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -100,6 +100,7 @@ class CommonJsRequireDependencyParserPlugin {\n \t\t\t\tparam.isString() &&\n \t\t\t\t(localModule = getLocalModule(parser.state, param.string))\n \t\t\t) {\n+\t\t\t\tlocalModule.flagUsed();\n \t\t\t\tconst dep = new LocalModuleDependency(localModule, expr.range, callNew);\n \t\t\t\tdep.loc = expr.loc;\n \t\t\t\tparser.state.current.addDependency(dep);"
      },
      {
        "sha": "8c4b2134aa83067c20859bc4d769ed8b12c48c18",
        "filename": "lib/dependencies/ConstDependency.js",
        "status": "modified",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FConstDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FConstDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FConstDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -32,8 +33,26 @@ class ConstDependency extends NullDependency {\n \t\thash.update(this.range + \"\");\n \t\thash.update(this.expression + \"\");\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.expression);\n+\t\twrite(this.range);\n+\t\twrite(this.requireWebpackRequire);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.expression = read();\n+\t\tthis.range = read();\n+\t\tthis.requireWebpackRequire = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(ConstDependency, \"webpack/lib/dependencies/ConstDependency\");\n+\n ConstDependency.Template = class ConstDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "43589e6bee65b2480da03f00004a9b27e3d6f27d",
        "filename": "lib/dependencies/ContextDependency.js",
        "status": "modified",
        "additions": 50,
        "deletions": 3,
        "changes": 53,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FContextDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -7,6 +7,7 @@\n \n const Dependency = require(\"../Dependency\");\n const DependencyTemplate = require(\"../DependencyTemplate\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const CriticalDependencyWarning = require(\"./CriticalDependencyWarning\");\n \n /** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n@@ -18,15 +19,21 @@ class ContextDependency extends Dependency {\n \t// options: { request, recursive, regExp, include, exclude, mode, chunkName, groupOptions }\n \tconstructor(options) {\n \t\tsuper();\n+\n \t\tthis.options = options;\n-\t\tthis.userRequest = this.options.request;\n+\t\tthis.userRequest = this.options && this.options.request;\n \t\t/** @type {false | string} */\n \t\tthis.critical = false;\n \t\tthis.hadGlobalOrStickyRegExp = false;\n-\t\tif (this.options.regExp.global || this.options.regExp.sticky) {\n-\t\t\tthis.options.regExp = null;\n+\n+\t\tif (\n+\t\t\tthis.options &&\n+\t\t\t(this.options.regExp.global || this.options.regExp.sticky)\n+\t\t) {\n+\t\t\tthis.options = Object.assign({}, this.options, { regExp: null });\n \t\t\tthis.hadGlobalOrStickyRegExp = true;\n \t\t}\n+\n \t\tthis.request = undefined;\n \t\tthis.range = undefined;\n \t\tthis.valueRange = undefined;\n@@ -55,20 +62,60 @@ class ContextDependency extends Dependency {\n \t */\n \tgetWarnings(moduleGraph) {\n \t\tlet warnings = super.getWarnings(moduleGraph) || [];\n+\n \t\tif (this.critical) {\n \t\t\twarnings.push(new CriticalDependencyWarning(this.critical));\n \t\t}\n+\n \t\tif (this.hadGlobalOrStickyRegExp) {\n \t\t\twarnings.push(\n \t\t\t\tnew CriticalDependencyWarning(\n \t\t\t\t\t\"Contexts can't use RegExps with the 'g' or 'y' flags.\"\n \t\t\t\t)\n \t\t\t);\n \t\t}\n+\n \t\treturn warnings;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.options);\n+\t\twrite(this.userRequest);\n+\t\twrite(this.critical);\n+\t\twrite(this.hadGlobalOrStickyRegExp);\n+\t\twrite(this.request);\n+\t\twrite(this.range);\n+\t\twrite(this.valueRange);\n+\t\twrite(this.prepend);\n+\t\twrite(this.replaces);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.options = read();\n+\t\tthis.userRequest = read();\n+\t\tthis.critical = read();\n+\t\tthis.hadGlobalOrStickyRegExp = read();\n+\t\tthis.request = read();\n+\t\tthis.range = read();\n+\t\tthis.valueRange = read();\n+\t\tthis.prepend = read();\n+\t\tthis.replaces = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tContextDependency,\n+\t\"webpack/lib/dependencies/ContextDependency\"\n+);\n+\n ContextDependency.Template = DependencyTemplate;\n \n module.exports = ContextDependency;"
      },
      {
        "sha": "f5d6fe6f10442b7c04e4495b10a3c0c214fa7a09",
        "filename": "lib/dependencies/ContextElementDependency.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FContextElementDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FContextElementDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FContextElementDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,11 +5,13 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n class ContextElementDependency extends ModuleDependency {\n \tconstructor(request, userRequest) {\n \t\tsuper(request);\n+\n \t\tif (userRequest) {\n \t\t\tthis.userRequest = userRequest;\n \t\t}\n@@ -18,6 +20,27 @@ class ContextElementDependency extends ModuleDependency {\n \tget type() {\n \t\treturn \"context element\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.userRequest);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.userRequest = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tContextElementDependency,\n+\t\"webpack/lib/dependencies/ContextElementDependency\"\n+);\n+\n module.exports = ContextElementDependency;"
      },
      {
        "sha": "347f0924e4ed03a31aa813c1646a2e6b15b3b334",
        "filename": "lib/dependencies/DelegatedExportsDependency.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FDelegatedExportsDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FDelegatedExportsDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FDelegatedExportsDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const DependencyReference = require(\"./DependencyReference\");\n const NullDependency = require(\"./NullDependency\");\n \n@@ -14,6 +15,7 @@ const NullDependency = require(\"./NullDependency\");\n class DelegatedExportsDependency extends NullDependency {\n \tconstructor(exports) {\n \t\tsuper();\n+\n \t\tthis.exports = exports;\n \t}\n \n@@ -45,6 +47,27 @@ class DelegatedExportsDependency extends NullDependency {\n \t\t\tdependencies: undefined\n \t\t};\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.exports);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.exports = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tDelegatedExportsDependency,\n+\t\"webpack/lib/dependencies/DelegatedExportsDependency\"\n+);\n+\n module.exports = DelegatedExportsDependency;"
      },
      {
        "sha": "1c3feee83f8394c843d03ecc973f5decec8072ca",
        "filename": "lib/dependencies/DllEntryDependency.js",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FDllEntryDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FDllEntryDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FDllEntryDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,17 +6,42 @@\n \"use strict\";\n \n const Dependency = require(\"../Dependency\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n \n class DllEntryDependency extends Dependency {\n \tconstructor(dependencies, name) {\n \t\tsuper();\n+\n \t\tthis.dependencies = dependencies;\n \t\tthis.name = name;\n \t}\n \n \tget type() {\n \t\treturn \"dll entry\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.dependencies);\n+\t\twrite(this.name);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.dependencies = read();\n+\t\tthis.name = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tDllEntryDependency,\n+\t\"webpack/lib/dependencies/DllEntryDependency\"\n+);\n+\n module.exports = DllEntryDependency;"
      },
      {
        "sha": "073767e0a736cd4d73e83a3ea364574e1bc75b28",
        "filename": "lib/dependencies/HarmonyAcceptDependency.js",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyAcceptDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyAcceptDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyAcceptDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n const NullDependency = require(\"./NullDependency\");\n \n@@ -29,8 +30,29 @@ class HarmonyAcceptDependency extends NullDependency {\n \tget type() {\n \t\treturn \"accepted harmony modules\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.range);\n+\t\twrite(this.dependencies);\n+\t\twrite(this.hasCallback);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.range = read();\n+\t\tthis.dependencies = read();\n+\t\tthis.hasCallback = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tHarmonyAcceptDependency,\n+\t\"webpack/lib/dependencies/HarmonyAcceptDependency\"\n+);\n+\n HarmonyAcceptDependency.Template = class HarmonyAcceptDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "23691c2a859da98b50bb824ebfdc0a51844e2d74",
        "filename": "lib/dependencies/HarmonyAcceptImportDependency.js",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyAcceptImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyAcceptImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyAcceptImportDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -20,8 +21,25 @@ class HarmonyAcceptImportDependency extends HarmonyImportDependency {\n \tget type() {\n \t\treturn \"harmony accept\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.weak);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.weak = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tHarmonyAcceptImportDependency,\n+\t\"webpack/lib/dependencies/HarmonyAcceptImportDependency\"\n+);\n+\n HarmonyAcceptImportDependency.Template = class HarmonyAcceptImportDependencyTemplate extends HarmonyImportDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "0285361b663329a71940c646f0f6784d74ed3c32",
        "filename": "lib/dependencies/HarmonyCompatibilityDependency.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyCompatibilityDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyCompatibilityDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyCompatibilityDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const InitFragment = require(\"../InitFragment\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -19,6 +20,11 @@ class HarmonyCompatibilityDependency extends NullDependency {\n \t}\n }\n \n+makeSerializable(\n+\tHarmonyCompatibilityDependency,\n+\t\"webpack/lib/dependencies/HarmonyCompatibilityDependency\"\n+);\n+\n HarmonyCompatibilityDependency.Template = class HarmonyExportDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "672a90cc942defcb1066ab61f743f864c8880433",
        "filename": "lib/dependencies/HarmonyExportExpressionDependency.js",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportExpressionDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportExpressionDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportExpressionDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -36,8 +37,29 @@ class HarmonyExportExpressionDependency extends NullDependency {\n \t\t\tdependencies: undefined\n \t\t};\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.range);\n+\t\twrite(this.rangeStatement);\n+\t\twrite(this.prefix);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.range = read();\n+\t\tthis.rangeStatement = read();\n+\t\tthis.prefix = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tHarmonyExportExpressionDependency,\n+\t\"webpack/lib/dependencies/HarmonyExportExpressionDependency\"\n+);\n+\n HarmonyExportExpressionDependency.Template = class HarmonyExportDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "07b2c631c0037729416a38b12e3dfae15a29fee7",
        "filename": "lib/dependencies/HarmonyExportHeaderDependency.js",
        "status": "modified",
        "additions": 20,
        "deletions": 0,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportHeaderDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportHeaderDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportHeaderDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -21,8 +22,27 @@ class HarmonyExportHeaderDependency extends NullDependency {\n \tget type() {\n \t\treturn \"harmony export header\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.range);\n+\t\twrite(this.rangeStatement);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.range = read();\n+\t\tthis.rangeStatement = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tHarmonyExportHeaderDependency,\n+\t\"webpack/lib/dependencies/HarmonyExportHeaderDependency\"\n+);\n+\n HarmonyExportHeaderDependency.Template = class HarmonyExportDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "d9f69b945d7ec6ff556e667c054d4f4f18729a3a",
        "filename": "lib/dependencies/HarmonyExportImportedSpecifierDependency.js",
        "status": "modified",
        "additions": 83,
        "deletions": 0,
        "changes": 83,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -8,6 +8,7 @@\n const HarmonyLinkingError = require(\"../HarmonyLinkingError\");\n const InitFragment = require(\"../InitFragment\");\n const Template = require(\"../Template\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const DependencyReference = require(\"./DependencyReference\");\n const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n \n@@ -57,6 +58,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tstrictExportPresence\n \t) {\n \t\tsuper(request, sourceOrder);\n+\n \t\tthis.id = id;\n \t\tthis.name = name;\n \t\tthis.activeExports = activeExports;\n@@ -83,39 +85,50 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \n \t\tif (!importedModule) {\n \t\t\tconst mode = new ExportMode(\"missing\");\n+\n \t\t\tmode.userRequest = this.userRequest;\n+\n \t\t\treturn mode;\n \t\t}\n \n \t\tif (!ignoreUnused && (name ? !used : usedExports === false)) {\n \t\t\tconst mode = new ExportMode(\"unused\");\n+\n \t\t\tmode.name = name || \"*\";\n+\n \t\t\treturn mode;\n \t\t}\n \n \t\tconst strictHarmonyModule = parentModule.buildMeta.strictHarmonyModule;\n+\n \t\tif (name && id === \"default\" && importedModule.buildMeta) {\n \t\t\tif (!importedModule.buildMeta.exportsType) {\n \t\t\t\tconst mode = new ExportMode(\n \t\t\t\t\tstrictHarmonyModule\n \t\t\t\t\t\t? \"reexport-non-harmony-default-strict\"\n \t\t\t\t\t\t: \"reexport-non-harmony-default\"\n \t\t\t\t);\n+\n \t\t\t\tmode.name = name;\n \t\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n+\n \t\t\t\treturn mode;\n \t\t\t} else if (importedModule.buildMeta.exportsType === \"named\") {\n \t\t\t\tconst mode = new ExportMode(\"reexport-named-default\");\n+\n \t\t\t\tmode.name = name;\n \t\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n+\n \t\t\t\treturn mode;\n \t\t\t}\n \t\t}\n \n \t\tconst isNotAHarmonyModule =\n \t\t\timportedModule.buildMeta && !importedModule.buildMeta.exportsType;\n+\n \t\tif (name) {\n \t\t\tlet mode;\n+\n \t\t\tif (id) {\n \t\t\t\t// export { name as name }\n \t\t\t\tif (isNotAHarmonyModule && strictHarmonyModule) {\n@@ -135,7 +148,9 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\tmode.name = name;\n \t\t\t\t}\n \t\t\t}\n+\n \t\t\tmode.getModule = () => moduleGraph.getModule(this);\n+\n \t\t\treturn mode;\n \t\t}\n \n@@ -147,6 +162,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tif (usedExports && usedExports !== true) {\n \t\t\t// reexport * with known used exports\n \t\t\tconst providedExports = importedModule.buildMeta.providedExports;\n+\n \t\t\tif (Array.isArray(providedExports)) {\n \t\t\t\tconst map = new Map(\n \t\t\t\t\tArray.from(usedExports)\n@@ -155,11 +171,13 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\t\t\tif (this.activeExports.has(id)) return false;\n \t\t\t\t\t\t\tif (activeFromOtherStarExports.has(id)) return false;\n \t\t\t\t\t\t\tif (!providedExports.includes(id)) return false;\n+\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t})\n \t\t\t\t\t\t.map(item => {\n \t\t\t\t\t\t\t/** @type {[string, string]} */\n \t\t\t\t\t\t\tconst tuple = [item, item];\n+\n \t\t\t\t\t\t\treturn tuple;\n \t\t\t\t\t\t})\n \t\t\t\t);\n@@ -169,8 +187,10 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t}\n \n \t\t\t\tconst mode = new ExportMode(\"safe-reexport\");\n+\n \t\t\t\tmode.getModule = () => moduleGraph.getModule(this);\n \t\t\t\tmode.map = map;\n+\n \t\t\t\treturn mode;\n \t\t\t}\n \n@@ -186,6 +206,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\t\t.map(item => {\n \t\t\t\t\t\t/** @type {[string, string]} */\n \t\t\t\t\t\tconst tuple = [item, item];\n+\n \t\t\t\t\t\treturn tuple;\n \t\t\t\t\t})\n \t\t\t);\n@@ -195,8 +216,10 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t}\n \n \t\t\tconst mode = new ExportMode(\"checked-reexport\");\n+\n \t\t\tmode.getModule = () => moduleGraph.getModule(this);\n \t\t\tmode.map = map;\n+\n \t\t\treturn mode;\n \t\t}\n \n@@ -222,13 +245,17 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t}\n \n \t\t\tconst mode = new ExportMode(\"safe-reexport\");\n+\n \t\t\tmode.getModule = () => moduleGraph.getModule(this);\n \t\t\tmode.map = map;\n+\n \t\t\treturn mode;\n \t\t}\n \n \t\tconst mode = new ExportMode(\"dynamic-reexport\");\n+\n \t\tmode.getModule = () => moduleGraph.getModule(this);\n+\n \t\treturn mode;\n \t}\n \n@@ -294,20 +321,24 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t */\n \t_discoverActiveExportsFromOtherStartExports(moduleGraph) {\n \t\tif (!this.otherStarExports) return new Set();\n+\n \t\tconst result = new Set();\n \t\t// try to learn impossible exports from other star exports with provided exports\n \t\tfor (const otherStarExport of this.otherStarExports) {\n \t\t\tconst otherImportedModule = moduleGraph.getModule(otherStarExport);\n+\n \t\t\tif (\n \t\t\t\totherImportedModule &&\n \t\t\t\tArray.isArray(otherImportedModule.buildMeta.providedExports)\n \t\t\t) {\n \t\t\t\tconst providedExports = otherImportedModule.buildMeta.providedExports;\n+\n \t\t\t\tfor (const exportName of providedExports) {\n \t\t\t\t\tresult.add(exportName);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\n \t\treturn result;\n \t}\n \n@@ -365,6 +396,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t) {\n \t\t\treturn [];\n \t\t}\n+\n \t\treturn this._getErrors(moduleGraph);\n \t}\n \n@@ -380,11 +412,13 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t) {\n \t\t\treturn this._getErrors(moduleGraph);\n \t\t}\n+\n \t\treturn [];\n \t}\n \n \t_getErrors(moduleGraph) {\n \t\tconst importedModule = moduleGraph.getModule(this);\n+\n \t\tif (!importedModule) {\n \t\t\treturn;\n \t\t}\n@@ -399,12 +433,14 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\t\t\tconst exportName = this.id\n \t\t\t\t\t? `the named export '${this.id}'`\n \t\t\t\t\t: \"the namespace object\";\n+\n \t\t\t\treturn [\n \t\t\t\t\tnew HarmonyLinkingError(\n \t\t\t\t\t\t`Can't reexport ${exportName} from non EcmaScript module (only default export is available)`\n \t\t\t\t\t)\n \t\t\t\t];\n \t\t\t}\n+\n \t\t\treturn;\n \t\t}\n \n@@ -423,6 +459,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t\tconst errorMessage = `\"export '${\n \t\t\tthis.id\n \t\t}'${idIsNotNameMessage} was not found in '${this.userRequest}'`;\n+\n \t\treturn [new HarmonyLinkingError(errorMessage)];\n \t}\n \n@@ -434,19 +471,51 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {\n \t */\n \tupdateHash(hash, chunkGraph) {\n \t\tsuper.updateHash(hash, chunkGraph);\n+\n \t\tconst moduleGraph = chunkGraph.moduleGraph;\n \t\tconst importedModule = moduleGraph.getModule(this);\n+\n \t\tif (importedModule) {\n \t\t\tconst usedExports = moduleGraph.getUsedExports(importedModule);\n \t\t\tconst stringifiedUsedExports = JSON.stringify(usedExports);\n \t\t\tconst stringifiedProvidedExports = JSON.stringify(\n \t\t\t\timportedModule.buildMeta.providedExports\n \t\t\t);\n+\n \t\t\thash.update(stringifiedUsedExports + stringifiedProvidedExports);\n \t\t}\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.id);\n+\t\twrite(this.name);\n+\t\twrite(this.activeExports);\n+\t\twrite(this.otherStarExports);\n+\t\twrite(this.strictExportPresence);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.id = read();\n+\t\tthis.name = read();\n+\t\tthis.activeExports = read();\n+\t\tthis.otherStarExports = read();\n+\t\tthis.strictExportPresence = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tHarmonyExportImportedSpecifierDependency,\n+\t\"webpack/lib/dependencies/HarmonyExportImportedSpecifierDependency\"\n+);\n+\n module.exports = HarmonyExportImportedSpecifierDependency;\n \n HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedSpecifierDependencyTemplate extends HarmonyImportDependency.Template {\n@@ -457,6 +526,7 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t */\n \tgetInitFragments(dependency, templateContext) {\n \t\tconst dep = /** @type {HarmonyExportImportedSpecifierDependency} */ (dependency);\n+\n \t\tif (this.isUsed(dep, templateContext)) {\n \t\t\tconst importFragments = super.getInitFragments(dep, templateContext);\n \t\t\tconst exportFragment = this._getExportFragment(\n@@ -494,8 +564,10 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\t\t\t\tif (dep.activeExports.has(id)) continue;\n \t\t\t\t\tif (importedModule.isProvided(id) === false) continue;\n \t\t\t\t\tif (activeFromOtherStarExports.has(id)) continue;\n+\n \t\t\t\t\treturn true;\n \t\t\t\t}\n+\n \t\t\t\treturn false;\n \t\t\t} else if (\n \t\t\t\tusedExports &&\n@@ -507,10 +579,13 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\t\t\t\tif (id === \"default\") return true;\n \t\t\t\t\tif (dep.activeExports.has(id)) return true;\n \t\t\t\t\tif (activeFromOtherStarExports.has(id)) return true;\n+\n \t\t\t\t\treturn false;\n \t\t\t\t});\n+\n \t\t\t\treturn !unused;\n \t\t\t}\n+\n \t\t\treturn true;\n \t\t}\n \t}\n@@ -686,7 +761,9 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\t\t\t} else {\n \t\t\t\t\tcontent += \"if(__WEBPACK_IMPORT_KEY__ !== 'default') \";\n \t\t\t\t}\n+\n \t\t\t\tconst exportsName = module.exportsArgument;\n+\n \t\t\t\treturn new InitFragment(\n \t\t\t\t\tcontent +\n \t\t\t\t\t\t`(function(key) { __webpack_require__.d(${exportsName}, key, function() { return ${importVar}[key]; }) }(__WEBPACK_IMPORT_KEY__));\\n`,\n@@ -703,13 +780,15 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \tgetReexportStatement(module, key, name, valueKey) {\n \t\tconst exportsName = module.exportsArgument;\n \t\tconst returnValue = this.getReturnValue(name, valueKey);\n+\n \t\treturn `__webpack_require__.d(${exportsName}, ${JSON.stringify(\n \t\t\tkey\n \t\t)}, function() { return ${returnValue}; });\\n`;\n \t}\n \n \tgetReexportFakeNamespaceObjectStatement(module, key, name) {\n \t\tconst exportsName = module.exportsArgument;\n+\n \t\treturn `__webpack_require__.d(${exportsName}, ${JSON.stringify(\n \t\t\tkey\n \t\t)}, function() { return __webpack_require__.t(${name}); });\\n`;\n@@ -719,8 +798,10 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\tif (valueKey === false) {\n \t\t\treturn \"/* unused export */\\n\";\n \t\t}\n+\n \t\tconst exportsName = module.exportsArgument;\n \t\tconst returnValue = this.getReturnValue(name, valueKey);\n+\n \t\treturn `if(__webpack_require__.o(${name}, ${JSON.stringify(\n \t\t\tvalueKey\n \t\t)})) __webpack_require__.d(${exportsName}, ${JSON.stringify(\n@@ -732,9 +813,11 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\tif (valueKey === null) {\n \t\t\treturn `${name}_default.a`;\n \t\t}\n+\n \t\tif (valueKey === \"\") {\n \t\t\treturn name;\n \t\t}\n+\n \t\tif (valueKey === false) {\n \t\t\treturn \"/* unused export */ undefined\";\n \t\t}"
      },
      {
        "sha": "3575feecb2b6320808531cc44e96595650857dd3",
        "filename": "lib/dependencies/HarmonyExportSpecifierDependency.js",
        "status": "modified",
        "additions": 20,
        "deletions": 0,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyExportSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportSpecifierDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const InitFragment = require(\"../InitFragment\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -36,8 +37,27 @@ class HarmonyExportSpecifierDependency extends NullDependency {\n \t\t\tdependencies: undefined\n \t\t};\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.id);\n+\t\twrite(this.name);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.id = read();\n+\t\tthis.name = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tHarmonyExportSpecifierDependency,\n+\t\"webpack/lib/dependencies/HarmonyExportSpecifierDependency\"\n+);\n+\n HarmonyExportSpecifierDependency.Template = class HarmonyExportSpecifierDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "09cfdf05575e4859bdf36efb7beea7b1bb308a7f",
        "filename": "lib/dependencies/HarmonyImportDependency.js",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -98,6 +98,18 @@ class HarmonyImportDependency extends ModuleDependency {\n \t\t\t\t\"\"\n \t\t);\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.sourceOrder);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.sourceOrder = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n module.exports = HarmonyImportDependency;"
      },
      {
        "sha": "93a5db24af934329504c9a687af5aa4de9129cf4",
        "filename": "lib/dependencies/HarmonyImportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -122,7 +122,6 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t.for(\"imported var\")\n \t\t\t.tap(\"HarmonyImportDependencyParserPlugin\", expr => {\n \t\t\t\tconst args = expr.arguments;\n-\t\t\t\tconst fullExpr = expr;\n \t\t\t\texpr = expr.callee;\n \t\t\t\tif (expr.type !== \"Identifier\") return;\n \t\t\t\tconst name = expr.name;\n@@ -136,8 +135,7 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\t\t\tthis.strictExportPresence\n \t\t\t\t);\n \t\t\t\tdep.directImport = true;\n-\t\t\t\tdep.callArgs = args;\n-\t\t\t\tdep.call = fullExpr;\n+\t\t\t\tdep.call = true;\n \t\t\t\tdep.loc = expr.loc;\n \t\t\t\tparser.state.module.addDependency(dep);\n \t\t\t\tif (args) parser.walkExpressions(args);"
      },
      {
        "sha": "fef2510805fba8a5bef7f765b5d480fd82ae8eca",
        "filename": "lib/dependencies/HarmonyImportSideEffectDependency.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSideEffectDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n \n /** @typedef {import(\"../Dependency\")} Dependency */\n@@ -39,6 +40,11 @@ class HarmonyImportSideEffectDependency extends HarmonyImportDependency {\n \t}\n }\n \n+makeSerializable(\n+\tHarmonyImportSideEffectDependency,\n+\t\"webpack/lib/dependencies/HarmonyImportSideEffectDependency\"\n+);\n+\n HarmonyImportSideEffectDependency.Template = class HarmonyImportSideEffectDependencyTemplate extends HarmonyImportDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "8b7c5de3d0b8356f99b5b62ce98c408c506dd4e7",
        "filename": "lib/dependencies/HarmonyImportSpecifierDependency.js",
        "status": "modified",
        "additions": 32,
        "deletions": 1,
        "changes": 33,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportSpecifierDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const HarmonyLinkingError = require(\"../HarmonyLinkingError\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const DependencyReference = require(\"./DependencyReference\");\n const HarmonyImportDependency = require(\"./HarmonyImportDependency\");\n \n@@ -28,7 +29,6 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\tthis.range = range;\n \t\tthis.strictExportPresence = strictExportPresence;\n \t\tthis.namespaceObjectAsContext = false;\n-\t\tthis.callArgs = undefined;\n \t\tthis.call = undefined;\n \t\tthis.directImport = undefined;\n \t\tthis.shorthand = undefined;\n@@ -183,8 +183,39 @@ class HarmonyImportSpecifierDependency extends HarmonyImportDependency {\n \t\t\thash.update(stringifyUsedExports);\n \t\t}\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.id);\n+\t\twrite(this.name);\n+\t\twrite(this.range);\n+\t\twrite(this.strictExportPresence);\n+\t\twrite(this.namespaceObjectAsContext);\n+\t\twrite(this.call);\n+\t\twrite(this.directImport);\n+\t\twrite(this.shorthand);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.id = read();\n+\t\tthis.name = read();\n+\t\tthis.range = read();\n+\t\tthis.strictExportPresence = read();\n+\t\tthis.namespaceObjectAsContext = read();\n+\t\tthis.call = read();\n+\t\tthis.directImport = read();\n+\t\tthis.shorthand = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tHarmonyImportSpecifierDependency,\n+\t\"webpack/lib/dependencies/HarmonyImportSpecifierDependency\"\n+);\n+\n HarmonyImportSpecifierDependency.Template = class HarmonyImportSpecifierDependencyTemplate extends HarmonyImportDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "6f5052a93f49c083169fe375a69306f911b5c614",
        "filename": "lib/dependencies/ImportContextDependency.js",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportContextDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,21 +5,46 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ContextDependency = require(\"./ContextDependency\");\n const ContextDependencyTemplateAsRequireCall = require(\"./ContextDependencyTemplateAsRequireCall\");\n \n class ImportContextDependency extends ContextDependency {\n \tconstructor(options, range, valueRange) {\n \t\tsuper(options);\n+\n \t\tthis.range = range;\n \t\tthis.valueRange = valueRange;\n \t}\n \n \tget type() {\n \t\treturn `import() context ${this.options.mode}`;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\t\twrite(this.valueRange);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\t\tthis.valueRange = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tImportContextDependency,\n+\t\"webpack/lib/dependencies/ImportContextDependency\"\n+);\n+\n ImportContextDependency.Template = ContextDependencyTemplateAsRequireCall;\n \n module.exports = ImportContextDependency;"
      },
      {
        "sha": "227930745752384678c577f4b684762de8dc01cb",
        "filename": "lib/dependencies/ImportDependenciesBlock.js",
        "status": "modified",
        "additions": 33,
        "deletions": 9,
        "changes": 42,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportDependenciesBlock.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,15 +6,39 @@\n \"use strict\";\n \n const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n-const ImportDependency = require(\"./ImportDependency\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n \n-module.exports = class ImportDependenciesBlock extends AsyncDependenciesBlock {\n-\t// TODO webpack 5 reorganize arguments\n-\tconstructor(request, range, groupOptions, module, loc, originModule) {\n-\t\tsuper(groupOptions, module, loc, request);\n+/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n+\n+class ImportDependenciesBlock extends AsyncDependenciesBlock {\n+\t/**\n+\t * @param {TODO} groupOptions options for the chunk group\n+\t * @param {DependencyLocation} loc location info\n+\t * @param {string} request request string for the block\n+\t * @param {[number, number]} range position of the block\n+\t */\n+\tconstructor(groupOptions, loc, request, range) {\n+\t\tsuper(groupOptions, loc, request);\n+\t\t/** @type {[number, number]} */\n \t\tthis.range = range;\n-\t\tconst dep = new ImportDependency(request, this);\n-\t\tdep.loc = loc;\n-\t\tthis.addDependency(dep);\n \t}\n-};\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.range);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.range = read();\n+\t\tsuper.deserialize(context);\n+\t}\n+}\n+\n+makeSerializable(\n+\tImportDependenciesBlock,\n+\t\"webpack/lib/dependencies/ImportDependenciesBlock\"\n+);\n+\n+module.exports = ImportDependenciesBlock;"
      },
      {
        "sha": "953e54c85495321e1f4bab4ee6c30384c5c7b68b",
        "filename": "lib/dependencies/ImportDependency.js",
        "status": "modified",
        "additions": 10,
        "deletions": 4,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,23 +5,26 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n /** @typedef {import(\"../Dependency\")} Dependency */\n /** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n+/** @typedef {import(\"../dependencies/ImportDependenciesBlock\")} ImportDependenciesBlock */\n \n class ImportDependency extends ModuleDependency {\n-\tconstructor(request, block) {\n+\tconstructor(request) {\n \t\tsuper(request);\n-\t\tthis.block = block;\n \t}\n \n \tget type() {\n \t\treturn \"import()\";\n \t}\n }\n \n+makeSerializable(ImportDependency, \"webpack/lib/dependencies/ImportDependency\");\n+\n ImportDependency.Template = class ImportDependencyTemplate extends ModuleDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n@@ -35,16 +38,19 @@ ImportDependency.Template = class ImportDependencyTemplate extends ModuleDepende\n \t\t{ runtimeTemplate, module, moduleGraph, chunkGraph }\n \t) {\n \t\tconst dep = /** @type {ImportDependency} */ (dependency);\n+\t\tconst block = /** @type {ImportDependenciesBlock} */ (moduleGraph.getParentBlock(\n+\t\t\tdep\n+\t\t));\n \t\tconst content = runtimeTemplate.moduleNamespacePromise({\n \t\t\tchunkGraph,\n-\t\t\tblock: dep.block,\n+\t\t\tblock: block,\n \t\t\tmodule: moduleGraph.getModule(dep),\n \t\t\trequest: dep.request,\n \t\t\tstrict: module.buildMeta.strictHarmonyModule,\n \t\t\tmessage: \"import()\"\n \t\t});\n \n-\t\tsource.replace(dep.block.range[0], dep.block.range[1] - 1, content);\n+\t\tsource.replace(block.range[0], block.range[1] - 1, content);\n \t}\n };\n "
      },
      {
        "sha": "131897d7c5c000230e25df5fcade2f53289beb97",
        "filename": "lib/dependencies/ImportEagerDependency.js",
        "status": "modified",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportEagerDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportEagerDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportEagerDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -14,14 +15,36 @@ const ModuleDependency = require(\"./ModuleDependency\");\n class ImportEagerDependency extends ModuleDependency {\n \tconstructor(request, range) {\n \t\tsuper(request);\n+\n \t\tthis.range = range;\n \t}\n \n \tget type() {\n \t\treturn \"import() eager\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tImportEagerDependency,\n+\t\"webpack/lib/dependencies/ImportEagerDependency\"\n+);\n+\n ImportEagerDependency.Template = class ImportEagerDependencyTemplate extends ModuleDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n@@ -42,6 +65,7 @@ ImportEagerDependency.Template = class ImportEagerDependencyTemplate extends Mod\n \t\t\tstrict: module.buildMeta.strictHarmonyModule,\n \t\t\tmessage: \"import() eager\"\n \t\t});\n+\n \t\tsource.replace(dep.range[0], dep.range[1] - 1, content);\n \t}\n };"
      },
      {
        "sha": "d3f97fb994947cdacbf916347610acda0a1594f5",
        "filename": "lib/dependencies/ImportParserPlugin.js",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportParserPlugin.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -10,6 +10,7 @@ const UnsupportedFeatureWarning = require(\"../UnsupportedFeatureWarning\");\n const ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\n const ImportContextDependency = require(\"./ImportContextDependency\");\n const ImportDependenciesBlock = require(\"./ImportDependenciesBlock\");\n+const ImportDependency = require(\"./ImportDependency\");\n const ImportEagerDependency = require(\"./ImportEagerDependency\");\n const ImportWeakDependency = require(\"./ImportWeakDependency\");\n \n@@ -194,15 +195,16 @@ class ImportParserPlugin {\n \t\t\t\t\tparser.state.current.addDependency(dep);\n \t\t\t\t} else {\n \t\t\t\t\tconst depBlock = new ImportDependenciesBlock(\n-\t\t\t\t\t\tparam.string,\n-\t\t\t\t\t\texpr.range,\n \t\t\t\t\t\tObject.assign(groupOptions, {\n \t\t\t\t\t\t\tname: chunkName\n \t\t\t\t\t\t}),\n-\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\texpr.loc,\n-\t\t\t\t\t\tparser.state.module\n+\t\t\t\t\t\tparam.string,\n+\t\t\t\t\t\texpr.range\n \t\t\t\t\t);\n+\t\t\t\t\tconst dep = new ImportDependency(param.string);\n+\t\t\t\t\tdep.loc = expr.loc;\n+\t\t\t\t\tdepBlock.addDependency(dep);\n \t\t\t\t\tparser.state.current.addBlock(depBlock);\n \t\t\t\t}\n \t\t\t\treturn true;"
      },
      {
        "sha": "cb238d29c01ca737f8146a7bec5baab0ba4cb16b",
        "filename": "lib/dependencies/ImportWeakDependency.js",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportWeakDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FImportWeakDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportWeakDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -14,15 +15,39 @@ const ModuleDependency = require(\"./ModuleDependency\");\n class ImportWeakDependency extends ModuleDependency {\n \tconstructor(request, range) {\n \t\tsuper(request);\n+\n \t\tthis.range = range;\n \t\tthis.weak = true;\n \t}\n \n \tget type() {\n \t\treturn \"import() weak\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\t\twrite(this.weak);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\t\tthis.weak = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tImportWeakDependency,\n+\t\"webpack/lib/dependencies/ImportWeakDependency\"\n+);\n+\n ImportWeakDependency.Template = class ImportDependencyTemplate extends ModuleDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n@@ -44,6 +69,7 @@ ImportWeakDependency.Template = class ImportDependencyTemplate extends ModuleDep\n \t\t\tmessage: \"import() weak\",\n \t\t\tweak: true\n \t\t});\n+\n \t\tsource.replace(dep.range[0], dep.range[1] - 1, content);\n \t}\n };"
      },
      {
        "sha": "8c9b44e98e542ae012116396ca211eaaf1d7abad",
        "filename": "lib/dependencies/JsonExportsDependency.js",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FJsonExportsDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FJsonExportsDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FJsonExportsDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"../Dependency\").ExportsSpec} ExportsSpec */\n@@ -31,6 +32,23 @@ class JsonExportsDependency extends NullDependency {\n \t\t\tdependencies: undefined\n \t\t};\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.exports);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.exports = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tJsonExportsDependency,\n+\t\"webpack/lib/dependencies/JsonExportsDependency\"\n+);\n+\n module.exports = JsonExportsDependency;"
      },
      {
        "sha": "8516594b31c9b8818cb02bce3d2b87dd53ed6f6e",
        "filename": "lib/dependencies/LocalModule.js",
        "status": "modified",
        "additions": 22,
        "deletions": 2,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FLocalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FLocalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FLocalModule.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,9 +5,10 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n+\n class LocalModule {\n-\tconstructor(module, name, idx) {\n-\t\tthis.module = module;\n+\tconstructor(name, idx) {\n \t\tthis.name = name;\n \t\tthis.idx = idx;\n \t\tthis.used = false;\n@@ -20,5 +21,24 @@ class LocalModule {\n \tvariableName() {\n \t\treturn \"__WEBPACK_LOCAL_MODULE_\" + this.idx + \"__\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.name);\n+\t\twrite(this.idx);\n+\t\twrite(this.used);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.name = read();\n+\t\tthis.idx = read();\n+\t\tthis.used = read();\n+\t}\n }\n+\n+makeSerializable(LocalModule, \"webpack/lib/dependencies/LocalModule\");\n+\n module.exports = LocalModule;"
      },
      {
        "sha": "8f821f5a669f4c0dc73956659d7b4aff2f461682",
        "filename": "lib/dependencies/LocalModuleDependency.js",
        "status": "modified",
        "additions": 27,
        "deletions": 1,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FLocalModuleDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FLocalModuleDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FLocalModuleDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -14,13 +15,38 @@ const NullDependency = require(\"./NullDependency\");\n class LocalModuleDependency extends NullDependency {\n \tconstructor(localModule, range, callNew) {\n \t\tsuper();\n-\t\tlocalModule.flagUsed();\n+\n \t\tthis.localModule = localModule;\n \t\tthis.range = range;\n \t\tthis.callNew = callNew;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.localModule);\n+\t\twrite(this.range);\n+\t\twrite(this.callNew);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.localModule = read();\n+\t\tthis.range = read();\n+\t\tthis.callNew = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tLocalModuleDependency,\n+\t\"webpack/lib/dependencies/LocalModuleDependency\"\n+);\n+\n LocalModuleDependency.Template = class LocalModuleDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "00af70c63f840271ae0b9ada87ede35b0cafa003",
        "filename": "lib/dependencies/LocalModulesHelpers.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FLocalModulesHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FLocalModulesHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FLocalModulesHelpers.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -30,7 +30,7 @@ exports.addLocalModule = (state, name) => {\n \tif (!state.localModules) {\n \t\tstate.localModules = [];\n \t}\n-\tconst m = new LocalModule(state.module, name, state.localModules.length);\n+\tconst m = new LocalModule(name, state.localModules.length);\n \tstate.localModules.push(m);\n \treturn m;\n };"
      },
      {
        "sha": "2377e0d7a41e730648afbd272aa6740d817e5ba1",
        "filename": "lib/dependencies/ModuleDecoratorDependency.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleDecoratorDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleDecoratorDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleDecoratorDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const InitFragment = require(\"../InitFragment\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -30,6 +31,11 @@ class ModuleDecoratorDependency extends ModuleDependency {\n \t}\n }\n \n+makeSerializable(\n+\tModuleDecoratorDependency,\n+\t\"webpack/lib/dependencies/ModuleDecoratorDependency\"\n+);\n+\n ModuleDecoratorDependency.Template = class ModuleDecoratorDependencyTemplate extends ModuleDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "fbdafa63a63db883a50332acf77cb8c5153cab11",
        "filename": "lib/dependencies/ModuleDependency.js",
        "status": "modified",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -25,6 +25,22 @@ class ModuleDependency extends Dependency {\n \tgetResourceIdentifier() {\n \t\treturn `module${this.request}`;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.request);\n+\t\twrite(this.userRequest);\n+\t\twrite(this.range);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.request = read();\n+\t\tthis.userRequest = read();\n+\t\tthis.range = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n ModuleDependency.Template = DependencyTemplate;"
      },
      {
        "sha": "e9a3d0e30e9cbe15afd631667486a7ab1c81fc5c",
        "filename": "lib/dependencies/ModuleHotAcceptDependency.js",
        "status": "modified",
        "additions": 20,
        "deletions": 0,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleHotAcceptDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleHotAcceptDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleHotAcceptDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n const ModuleDependencyTemplateAsId = require(\"./ModuleDependencyTemplateAsId\");\n \n@@ -18,8 +19,27 @@ class ModuleHotAcceptDependency extends ModuleDependency {\n \tget type() {\n \t\treturn \"module.hot.accept\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.range);\n+\t\twrite(this.weak);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.range = read();\n+\t\tthis.weak = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tModuleHotAcceptDependency,\n+\t\"webpack/lib/dependencies/ModuleHotAcceptDependency\"\n+);\n+\n ModuleHotAcceptDependency.Template = ModuleDependencyTemplateAsId;\n \n module.exports = ModuleHotAcceptDependency;"
      },
      {
        "sha": "ba8143220cb268334c95455ea425361dd87fd8b3",
        "filename": "lib/dependencies/ModuleHotDeclineDependency.js",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleHotDeclineDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FModuleHotDeclineDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleHotDeclineDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,21 +5,46 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n const ModuleDependencyTemplateAsId = require(\"./ModuleDependencyTemplateAsId\");\n \n class ModuleHotDeclineDependency extends ModuleDependency {\n \tconstructor(request, range) {\n \t\tsuper(request);\n+\n \t\tthis.range = range;\n \t\tthis.weak = true;\n \t}\n \n \tget type() {\n \t\treturn \"module.hot.decline\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\t\twrite(this.weak);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\t\tthis.weak = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tModuleHotDeclineDependency,\n+\t\"webpack/lib/dependencies/ModuleHotDeclineDependency\"\n+);\n+\n ModuleHotDeclineDependency.Template = ModuleDependencyTemplateAsId;\n \n module.exports = ModuleHotDeclineDependency;"
      },
      {
        "sha": "fdd75f17395099110ea84d924207001defb9a641",
        "filename": "lib/dependencies/NullDependency.js",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FNullDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FNullDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FNullDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -27,6 +27,14 @@ class NullDependency extends Dependency {\n \t * @returns {void}\n \t */\n \tupdateHash(hash, chunkGraph) {}\n+\n+\tserialize(context) {\n+\t\t// do nothing\n+\t}\n+\n+\tdeserialize(context) {\n+\t\t// do nothing\n+\t}\n }\n \n NullDependency.Template = class NullDependencyTemplate extends DependencyTemplate {"
      },
      {
        "sha": "d05d3bcbd33d36fd1294d08db22e322de06c6af7",
        "filename": "lib/dependencies/ProvidedDependency.js",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FProvidedDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FProvidedDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FProvidedDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const InitFragment = require(\"../InitFragment\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -45,8 +46,29 @@ class ProvidedDependency extends ModuleDependency {\n \t\thash.update(this.identifier);\n \t\thash.update(this.path ? this.path.join(\",\") : \"null\");\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.identifier);\n+\t\twrite(this.path);\n+\t\twrite(this.range);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\t\tthis.identifier = read();\n+\t\tthis.path = read();\n+\t\tthis.range = read();\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tProvidedDependency,\n+\t\"webpack/lib/dependencies/ProvidedDependency\"\n+);\n+\n class ProvidedDependencyTemplate extends ModuleDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "f0e90f53640b0ca7e626fc07a32054b7987835a3",
        "filename": "lib/dependencies/RequireContextDependency.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireContextDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,20 +5,43 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ContextDependency = require(\"./ContextDependency\");\n const ModuleDependencyTemplateAsRequireId = require(\"./ModuleDependencyTemplateAsRequireId\");\n \n class RequireContextDependency extends ContextDependency {\n \tconstructor(options, range) {\n \t\tsuper(options);\n+\n \t\tthis.range = range;\n \t}\n \n \tget type() {\n \t\treturn \"require.context\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tRequireContextDependency,\n+\t\"webpack/lib/dependencies/RequireContextDependency\"\n+);\n+\n RequireContextDependency.Template = ModuleDependencyTemplateAsRequireId;\n \n module.exports = RequireContextDependency;"
      },
      {
        "sha": "1928dbe0f94a38fa8203a00da8b43601186b01e5",
        "filename": "lib/dependencies/RequireEnsureDependenciesBlock.js",
        "status": "modified",
        "additions": 12,
        "deletions": 30,
        "changes": 42,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireEnsureDependenciesBlock.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,35 +6,17 @@\n \"use strict\";\n \n const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n-const RequireEnsureDependency = require(\"./RequireEnsureDependency\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n \n-module.exports = class RequireEnsureDependenciesBlock extends AsyncDependenciesBlock {\n-\tconstructor(\n-\t\texpr,\n-\t\tsuccessExpression,\n-\t\terrorExpression,\n-\t\tchunkName,\n-\t\tchunkNameRange,\n-\t\tmodule,\n-\t\tloc\n-\t) {\n-\t\tsuper(chunkName, module, loc, null);\n-\t\tthis.expr = expr;\n-\t\t/** @type {[number, number] | undefined} */\n-\t\tconst successBodyRange =\n-\t\t\tsuccessExpression &&\n-\t\t\tsuccessExpression.body &&\n-\t\t\tsuccessExpression.body.range;\n-\t\tif (successBodyRange) {\n-\t\t\tconst range = /** @type {[number, number]} */ ([\n-\t\t\t\tsuccessBodyRange[0] + 1,\n-\t\t\t\tsuccessBodyRange[1] - 1\n-\t\t\t]);\n-\t\t\tthis.range = range;\n-\t\t}\n-\t\tthis.chunkNameRange = chunkNameRange;\n-\t\tconst dep = new RequireEnsureDependency(this);\n-\t\tdep.loc = loc;\n-\t\tthis.addDependency(dep);\n+class RequireEnsureDependenciesBlock extends AsyncDependenciesBlock {\n+\tconstructor(chunkName, loc) {\n+\t\tsuper(chunkName, loc, null);\n \t}\n-};\n+}\n+\n+makeSerializable(\n+\tRequireEnsureDependenciesBlock,\n+\t\"webpack/lib/dependencies/RequireEnsureDependenciesBlock\"\n+);\n+\n+module.exports = RequireEnsureDependenciesBlock;"
      },
      {
        "sha": "0eee46a5acf0e47fd00421c90fdc60e8b5020543",
        "filename": "lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js",
        "status": "modified",
        "additions": 16,
        "deletions": 13,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureDependenciesBlockParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureDependenciesBlockParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireEnsureDependenciesBlockParserPlugin.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const RequireEnsureDependenciesBlock = require(\"./RequireEnsureDependenciesBlock\");\n+const RequireEnsureDependency = require(\"./RequireEnsureDependency\");\n const RequireEnsureItemDependency = require(\"./RequireEnsureItemDependency\");\n const getFunctionExpression = require(\"./getFunctionExpression\");\n \n@@ -15,14 +16,12 @@ module.exports = class RequireEnsureDependenciesBlockParserPlugin {\n \t\t\t.for(\"require.ensure\")\n \t\t\t.tap(\"RequireEnsureDependenciesBlockParserPlugin\", expr => {\n \t\t\t\tlet chunkName = null;\n-\t\t\t\tlet chunkNameRange = null;\n \t\t\t\tlet errorExpressionArg = null;\n \t\t\t\tlet errorExpression = null;\n \t\t\t\tswitch (expr.arguments.length) {\n \t\t\t\t\tcase 4: {\n \t\t\t\t\t\tconst chunkNameExpr = parser.evaluateExpression(expr.arguments[3]);\n \t\t\t\t\t\tif (!chunkNameExpr.isString()) return;\n-\t\t\t\t\t\tchunkNameRange = chunkNameExpr.range;\n \t\t\t\t\t\tchunkName = chunkNameExpr.string;\n \t\t\t\t\t}\n \t\t\t\t\t// falls through\n@@ -35,7 +34,6 @@ module.exports = class RequireEnsureDependenciesBlockParserPlugin {\n \t\t\t\t\t\t\t\texpr.arguments[2]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t\tif (!chunkNameExpr.isString()) return;\n-\t\t\t\t\t\t\tchunkNameRange = chunkNameExpr.range;\n \t\t\t\t\t\t\tchunkName = chunkNameExpr.string;\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n@@ -59,25 +57,30 @@ module.exports = class RequireEnsureDependenciesBlockParserPlugin {\n \t\t\t\t\t\t\tparser.walkExpressions(errorExpression.expressions);\n \t\t\t\t\t\t}\n \n-\t\t\t\t\t\tconst dep = new RequireEnsureDependenciesBlock(\n-\t\t\t\t\t\t\texpr,\n-\t\t\t\t\t\t\tsuccessExpression ? successExpression.fn : successExpressionArg,\n-\t\t\t\t\t\t\terrorExpression ? errorExpression.fn : errorExpressionArg,\n+\t\t\t\t\t\tconst depBlock = new RequireEnsureDependenciesBlock(\n \t\t\t\t\t\t\tchunkName,\n-\t\t\t\t\t\t\tchunkNameRange,\n-\t\t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\t\texpr.loc\n \t\t\t\t\t\t);\n+\t\t\t\t\t\tconst errorCallbackExists =\n+\t\t\t\t\t\t\texpr.arguments.length === 4 ||\n+\t\t\t\t\t\t\t(!chunkName && expr.arguments.length === 3);\n+\t\t\t\t\t\tconst dep = new RequireEnsureDependency(\n+\t\t\t\t\t\t\texpr.range,\n+\t\t\t\t\t\t\texpr.arguments[1].range,\n+\t\t\t\t\t\t\terrorCallbackExists && expr.arguments[2].range\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\tdep.loc = expr.loc;\n+\t\t\t\t\t\tdepBlock.addDependency(dep);\n \t\t\t\t\t\tconst old = parser.state.current;\n-\t\t\t\t\t\tparser.state.current = dep;\n+\t\t\t\t\t\tparser.state.current = depBlock;\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tlet failed = false;\n \t\t\t\t\t\t\tparser.inScope([], () => {\n \t\t\t\t\t\t\t\tfor (const ee of dependenciesItems) {\n \t\t\t\t\t\t\t\t\tif (ee.isString()) {\n \t\t\t\t\t\t\t\t\t\tconst edep = new RequireEnsureItemDependency(ee.string);\n-\t\t\t\t\t\t\t\t\t\tedep.loc = dep.loc;\n-\t\t\t\t\t\t\t\t\t\tdep.addDependency(edep);\n+\t\t\t\t\t\t\t\t\t\tedep.loc = ee.loc || expr.loc;\n+\t\t\t\t\t\t\t\t\t\tdepBlock.addDependency(edep);\n \t\t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\t\tfailed = true;\n \t\t\t\t\t\t\t\t\t}\n@@ -93,7 +96,7 @@ module.exports = class RequireEnsureDependenciesBlockParserPlugin {\n \t\t\t\t\t\t\t\t\tparser.walkExpression(successExpression.fn.body);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\told.addBlock(dep);\n+\t\t\t\t\t\t\told.addBlock(depBlock);\n \t\t\t\t\t\t} finally {\n \t\t\t\t\t\t\tparser.state.current = old;\n \t\t\t\t\t\t}"
      },
      {
        "sha": "dea616daca38e6fae601d9573f3951a37219f694",
        "filename": "lib/dependencies/RequireEnsureDependency.js",
        "status": "modified",
        "additions": 45,
        "deletions": 27,
        "changes": 72,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireEnsureDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,65 +5,83 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n /** @typedef {import(\"../Dependency\")} Dependency */\n /** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n \n class RequireEnsureDependency extends NullDependency {\n-\tconstructor(block) {\n+\tconstructor(range, contentRange, errorHandlerRange) {\n \t\tsuper();\n-\t\tthis.block = block;\n+\n+\t\tthis.range = range;\n+\t\tthis.contentRange = contentRange;\n+\t\tthis.errorHandlerRange = errorHandlerRange;\n \t}\n \n \tget type() {\n \t\treturn \"require.ensure\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\t\twrite(this.contentRange);\n+\t\twrite(this.errorHandlerRange);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\t\tthis.contentRange = read();\n+\t\tthis.errorHandlerRange = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tRequireEnsureDependency,\n+\t\"webpack/lib/dependencies/RequireEnsureDependency\"\n+);\n+\n RequireEnsureDependency.Template = class RequireEnsureDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n \t * @param {ReplaceSource} source the current replace source which can be modified\n \t * @param {DependencyTemplateContext} templateContext the context object\n \t * @returns {void}\n \t */\n-\tapply(dependency, source, { runtimeTemplate, chunkGraph }) {\n+\tapply(dependency, source, { runtimeTemplate, moduleGraph, chunkGraph }) {\n \t\tconst dep = /** @type {RequireEnsureDependency} */ (dependency);\n-\t\tconst depBlock = dep.block;\n+\t\tconst depBlock = moduleGraph.getParentBlock(dep);\n \t\tconst promise = runtimeTemplate.blockPromise({\n \t\t\tchunkGraph,\n \t\t\tblock: depBlock,\n \t\t\tmessage: \"require.ensure\"\n \t\t});\n-\t\tconst errorCallbackExists =\n-\t\t\tdepBlock.expr.arguments.length === 4 ||\n-\t\t\t(!depBlock.chunkName && depBlock.expr.arguments.length === 3);\n-\t\tconst startBlock = `${promise}.then((`;\n-\t\tconst middleBlock = \").bind(null, __webpack_require__)).catch(\";\n-\t\tconst endBlock = `).bind(null, __webpack_require__)).catch(${runtimeTemplate.onError()})`;\n-\t\tsource.replace(\n-\t\t\tdepBlock.expr.range[0],\n-\t\t\tdepBlock.expr.arguments[1].range[0] - 1,\n-\t\t\tstartBlock\n-\t\t);\n-\t\tif (errorCallbackExists) {\n-\t\t\tsource.replace(\n-\t\t\t\tdepBlock.expr.arguments[1].range[1],\n-\t\t\t\tdepBlock.expr.arguments[2].range[0] - 1,\n-\t\t\t\tmiddleBlock\n-\t\t\t);\n+\t\tconst range = dep.range;\n+\t\tconst contentRange = dep.contentRange;\n+\t\tconst errorHandlerRange = dep.errorHandlerRange;\n+\t\tsource.replace(range[0], contentRange[0] - 1, `${promise}.then((`);\n+\t\tif (errorHandlerRange) {\n \t\t\tsource.replace(\n-\t\t\t\tdepBlock.expr.arguments[2].range[1],\n-\t\t\t\tdepBlock.expr.range[1] - 1,\n-\t\t\t\t\")\"\n+\t\t\t\tcontentRange[1],\n+\t\t\t\terrorHandlerRange[0] - 1,\n+\t\t\t\t\").bind(null, __webpack_require__)).catch(\"\n \t\t\t);\n+\t\t\tsource.replace(errorHandlerRange[1], range[1] - 1, \")\");\n \t\t} else {\n \t\t\tsource.replace(\n-\t\t\t\tdepBlock.expr.arguments[1].range[1],\n-\t\t\t\tdepBlock.expr.range[1] - 1,\n-\t\t\t\tendBlock\n+\t\t\t\tcontentRange[1],\n+\t\t\t\trange[1] - 1,\n+\t\t\t\t`).bind(null, __webpack_require__)).catch(${runtimeTemplate.onError()})`\n \t\t\t);\n \t\t}\n \t}"
      },
      {
        "sha": "d7a6b20c22ad3f26bd64c19ed3e4d457ea0defbb",
        "filename": "lib/dependencies/RequireEnsureItemDependency.js",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureItemDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireEnsureItemDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireEnsureItemDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n const NullDependency = require(\"./NullDependency\");\n \n@@ -18,6 +19,11 @@ class RequireEnsureItemDependency extends ModuleDependency {\n \t}\n }\n \n+makeSerializable(\n+\tRequireEnsureItemDependency,\n+\t\"webpack/lib/dependencies/RequireEnsureItemDependency\"\n+);\n+\n RequireEnsureItemDependency.Template = NullDependency.Template;\n \n module.exports = RequireEnsureItemDependency;"
      },
      {
        "sha": "368cdfe5d7ae6f81a7986cf9316590a6c2db21f3",
        "filename": "lib/dependencies/RequireHeaderDependency.js",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireHeaderDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireHeaderDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireHeaderDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -17,8 +18,25 @@ class RequireHeaderDependency extends NullDependency {\n \t\tif (!Array.isArray(range)) throw new Error(\"range must be valid\");\n \t\tthis.range = range;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\t\twrite(this.range);\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tstatic deserialize(context) {\n+\t\tconst obj = new RequireHeaderDependency(context.read());\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n+\t}\n }\n \n+makeSerializable(\n+\tRequireHeaderDependency,\n+\t\"webpack/lib/dependencies/RequireHeaderDependency\"\n+);\n+\n RequireHeaderDependency.Template = class RequireHeaderDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "4cc8352a095347fc7178fb2814885822ed655971",
        "filename": "lib/dependencies/RequireIncludeDependency.js",
        "status": "modified",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireIncludeDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireIncludeDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireIncludeDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -6,6 +6,7 @@\n \"use strict\";\n \n const Template = require(\"../Template\");\n+const makeSerializable = require(\"../util/makeSerializable\");\n const DependencyReference = require(\"./DependencyReference\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n@@ -17,6 +18,7 @@ const ModuleDependency = require(\"./ModuleDependency\");\n class RequireIncludeDependency extends ModuleDependency {\n \tconstructor(request, range) {\n \t\tsuper(request);\n+\n \t\tthis.range = range;\n \t}\n \n@@ -39,8 +41,29 @@ class RequireIncludeDependency extends ModuleDependency {\n \tget type() {\n \t\treturn \"require.include\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tRequireIncludeDependency,\n+\t\"webpack/lib/dependencies/RequireIncludeDependency\"\n+);\n+\n RequireIncludeDependency.Template = class RequireIncludeDependencyTemplate extends ModuleDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n@@ -57,6 +80,7 @@ RequireIncludeDependency.Template = class RequireIncludeDependencyTemplate exten\n \t\t\t\t\t)}`\n \t\t\t  )\n \t\t\t: \"\";\n+\n \t\tsource.replace(dep.range[0], dep.range[1] - 1, `undefined${comment}`);\n \t}\n };"
      },
      {
        "sha": "4e998ec0f1234655ca7bd01c72fd36427ec4eadf",
        "filename": "lib/dependencies/RequireResolveContextDependency.js",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireResolveContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireResolveContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireResolveContextDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,21 +5,46 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ContextDependency = require(\"./ContextDependency\");\n const ContextDependencyTemplateAsId = require(\"./ContextDependencyTemplateAsId\");\n \n class RequireResolveContextDependency extends ContextDependency {\n \tconstructor(options, range, valueRange) {\n \t\tsuper(options);\n+\n \t\tthis.range = range;\n \t\tthis.valueRange = valueRange;\n \t}\n \n \tget type() {\n \t\treturn \"amd require context\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\t\twrite(this.valueRange);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\t\tthis.valueRange = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tRequireResolveContextDependency,\n+\t\"webpack/lib/dependencies/RequireResolveContextDependency\"\n+);\n+\n RequireResolveContextDependency.Template = ContextDependencyTemplateAsId;\n \n module.exports = RequireResolveContextDependency;"
      },
      {
        "sha": "c58a988e280a0b16c0ce289c04415dbcae4c9d7a",
        "filename": "lib/dependencies/RequireResolveDependency.js",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireResolveDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireResolveDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireResolveDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,20 +5,43 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const ModuleDependency = require(\"./ModuleDependency\");\n const ModuleDependencyAsId = require(\"./ModuleDependencyTemplateAsId\");\n \n class RequireResolveDependency extends ModuleDependency {\n \tconstructor(request, range) {\n \t\tsuper(request);\n+\n \t\tthis.range = range;\n \t}\n \n \tget type() {\n \t\treturn \"require.resolve\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.range = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tRequireResolveDependency,\n+\t\"webpack/lib/dependencies/RequireResolveDependency\"\n+);\n+\n RequireResolveDependency.Template = ModuleDependencyAsId;\n \n module.exports = RequireResolveDependency;"
      },
      {
        "sha": "3820ab778ff04bf44efc3096c95430900fdc4628",
        "filename": "lib/dependencies/RequireResolveHeaderDependency.js",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireResolveHeaderDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FRequireResolveHeaderDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FRequireResolveHeaderDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -14,11 +15,32 @@ const NullDependency = require(\"./NullDependency\");\n class RequireResolveHeaderDependency extends NullDependency {\n \tconstructor(range) {\n \t\tsuper();\n+\n \t\tif (!Array.isArray(range)) throw new Error(\"range must be valid\");\n+\n \t\tthis.range = range;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tstatic deserialize(context) {\n+\t\tconst obj = new RequireResolveHeaderDependency(context.read());\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n+\t}\n }\n \n+makeSerializable(\n+\tRequireResolveHeaderDependency,\n+\t\"webpack/lib/dependencies/RequireResolveHeaderDependency\"\n+);\n+\n RequireResolveHeaderDependency.Template = class RequireResolveHeaderDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied"
      },
      {
        "sha": "5f3152c362989f6b1e7088e64d3c1ce3dad65b06",
        "filename": "lib/dependencies/UnsupportedDependency.js",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FUnsupportedDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FUnsupportedDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FUnsupportedDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const NullDependency = require(\"./NullDependency\");\n \n /** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n@@ -14,11 +15,35 @@ const NullDependency = require(\"./NullDependency\");\n class UnsupportedDependency extends NullDependency {\n \tconstructor(request, range) {\n \t\tsuper();\n+\n \t\tthis.request = request;\n \t\tthis.range = range;\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.request);\n+\t\twrite(this.range);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.request = read();\n+\t\tthis.range = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tUnsupportedDependency,\n+\t\"webpack/lib/dependencies/UnsupportedDependency\"\n+);\n+\n UnsupportedDependency.Template = class UnsupportedDependencyTemplate extends NullDependency.Template {\n \t/**\n \t * @param {Dependency} dependency the dependency for which the template should be applied\n@@ -28,6 +53,7 @@ UnsupportedDependency.Template = class UnsupportedDependencyTemplate extends Nul\n \t */\n \tapply(dependency, source, { runtimeTemplate }) {\n \t\tconst dep = /** @type {UnsupportedDependency} */ (dependency);\n+\n \t\tsource.replace(\n \t\t\tdep.range[0],\n \t\t\tdep.range[1],"
      },
      {
        "sha": "42102109c2423cd6ce9094033f1fbfc1ece3d411",
        "filename": "lib/dependencies/WebAssemblyExportImportedDependency.js",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FWebAssemblyExportImportedDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FWebAssemblyExportImportedDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FWebAssemblyExportImportedDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const DependencyReference = require(\"./DependencyReference\");\n const ModuleDependency = require(\"./ModuleDependency\");\n \n@@ -26,7 +27,9 @@ class WebAssemblyExportImportedDependency extends ModuleDependency {\n \t */\n \tgetReference(moduleGraph) {\n \t\tconst module = moduleGraph.getModule(this);\n+\n \t\tif (!module) return null;\n+\n \t\treturn new DependencyReference(\n \t\t\t() => moduleGraph.getModule(this),\n \t\t\t[this.name],\n@@ -37,6 +40,29 @@ class WebAssemblyExportImportedDependency extends ModuleDependency {\n \tget type() {\n \t\treturn \"wasm export import\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.exportName);\n+\t\twrite(this.name);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.exportName = read();\n+\t\tthis.name = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tWebAssemblyExportImportedDependency,\n+\t\"webpack/lib/dependencies/WebAssemblyExportImportedDependency\"\n+);\n+\n module.exports = WebAssemblyExportImportedDependency;"
      },
      {
        "sha": "b047b5c727b8791123c0eaa461094dd8d59c7e15",
        "filename": "lib/dependencies/WebAssemblyImportDependency.js",
        "status": "modified",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FWebAssemblyImportDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fdependencies%2FWebAssemblyImportDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FWebAssemblyImportDependency.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -5,6 +5,7 @@\n \n \"use strict\";\n \n+const makeSerializable = require(\"../util/makeSerializable\");\n const UnsupportedWebAssemblyFeatureError = require(\"../wasm/UnsupportedWebAssemblyFeatureError\");\n const DependencyReference = require(\"./DependencyReference\");\n const ModuleDependency = require(\"./ModuleDependency\");\n@@ -37,7 +38,9 @@ class WebAssemblyImportDependency extends ModuleDependency {\n \t */\n \tgetReference(moduleGraph) {\n \t\tconst module = moduleGraph.getModule(this);\n+\n \t\tif (!module) return null;\n+\n \t\treturn new DependencyReference(\n \t\t\t() => moduleGraph.getModule(this),\n \t\t\t[this.name],\n@@ -52,6 +55,7 @@ class WebAssemblyImportDependency extends ModuleDependency {\n \t */\n \tgetErrors(moduleGraph) {\n \t\tconst module = moduleGraph.getModule(this);\n+\n \t\tif (\n \t\t\tthis.onlyDirectImport &&\n \t\t\tmodule &&\n@@ -70,6 +74,31 @@ class WebAssemblyImportDependency extends ModuleDependency {\n \tget type() {\n \t\treturn \"wasm import\";\n \t}\n+\n+\tserialize(context) {\n+\t\tconst { write } = context;\n+\n+\t\twrite(this.name);\n+\t\twrite(this.description);\n+\t\twrite(this.onlyDirectImport);\n+\n+\t\tsuper.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tconst { read } = context;\n+\n+\t\tthis.name = read();\n+\t\tthis.description = read();\n+\t\tthis.onlyDirectImport = read();\n+\n+\t\tsuper.deserialize(context);\n+\t}\n }\n \n+makeSerializable(\n+\tWebAssemblyImportDependency,\n+\t\"webpack/lib/dependencies/WebAssemblyImportDependency\"\n+);\n+\n module.exports = WebAssemblyImportDependency;"
      },
      {
        "sha": "4c395a784e40946ed97f06d3d3972fdbe0f2f382",
        "filename": "lib/serialization/BinaryMiddleware.js",
        "status": "added",
        "additions": 342,
        "deletions": 0,
        "changes": 342,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FBinaryMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FBinaryMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FBinaryMiddleware.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,342 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+const SerializerMiddleware = require(\"./SerializerMiddleware\");\n+\n+/*\n+Format:\n+\n+File -> Section*\n+\n+Section -> NullsSection |\n+\t\t\t\t\t F64NumbersSection |\n+\t\t\t\t\t I32NumbersSection |\n+\t\t\t\t\t I8NumbersSection |\n+\t\t\t\t\t ShortStringSection |\n+\t\t\t\t\t StringSection |\n+\t\t\t\t\t BufferSection |\n+\t\t\t\t\t BooleanSection |\n+\t\t\t\t\t NopSection\n+\n+\n+\n+NullsSection -> NullsSectionHeaderByte\n+F64NumbersSection -> F64NumbersSectionHeaderByte f64*\n+I32NumbersSection -> I32NumbersSectionHeaderByte i32*\n+I8NumbersSection -> I8NumbersSectionHeaderByte i8*\n+ShortStringSection -> ShortStringSectionHeaderByte utf8-byte*\n+StringSection -> StringSectionHeaderByte i32:length utf8-byte*\n+BufferSection -> BufferSectionHeaderByte i32:length byte*\n+BooleanSection -> TrueHeaderByte | FalseHeaderByte\n+NopSection --> NopSectionHeaderByte\n+\n+ShortStringSectionHeaderByte -> 0b1nnn_nnnn (n:length)\n+\n+F64NumbersSectionHeaderByte -> 0b001n_nnnn (n:length)\n+I32NumbersSectionHeaderByte -> 0b010n_nnnn (n:length)\n+I8NumbersSectionHeaderByte -> 0b011n_nnnn (n:length)\n+\n+NullsSectionHeaderByte -> 0b0001_nnnn (n:length)\n+\n+StringSectionHeaderByte -> 0b0000_1110\n+BufferSectionHeaderByte -> 0b0000_1111\n+NopSectionHeaderByte -> 0b0000_1011\n+FalseHeaderByte -> 0b0000_1100\n+TrueHeaderByte -> 0b0000_1101\n+\n+RawNumber -> n (n <= 10)\n+\n+*/\n+\n+const NOP_HEADER = 0x0b;\n+const TRUE_HEADER = 0x0c;\n+const FALSE_HEADER = 0x0d;\n+const STRING_HEADER = 0x0e;\n+const BUFFER_HEADER = 0x0f;\n+const NULLS_HEADER_MASK = 0xf0;\n+const NULLS_HEADER = 0x10;\n+const NUMBERS_HEADER_MASK = 0xe0;\n+const I8_HEADER = 0x60;\n+const I32_HEADER = 0x40;\n+const F64_HEADER = 0x20;\n+const SHORT_STRING_HEADER = 0x80;\n+\n+const identifyNumber = n => {\n+\tif (n === (n | 0)) {\n+\t\tif (n <= 127 && n >= -128) return 0;\n+\t\tif (n <= 2147483647 && n >= -2147483648) return 1;\n+\t}\n+\treturn 2;\n+};\n+\n+class BinaryMiddleware extends SerializerMiddleware {\n+\t_handleFunctionSerialization(fn, context) {\n+\t\treturn () => {\n+\t\t\tconst r = fn();\n+\t\t\tif (r instanceof Promise)\n+\t\t\t\treturn r.then(data => data && this.serialize(data, context));\n+\t\t\tif (r) return this.serialize(r, context);\n+\t\t\treturn null;\n+\t\t};\n+\t}\n+\n+\t_handleFunctionDeserialization(fn, context) {\n+\t\treturn () => {\n+\t\t\tconst r = fn();\n+\t\t\tif (r instanceof Promise)\n+\t\t\t\treturn r.then(data => this.deserialize(data, context));\n+\t\t\treturn this.deserialize(r, context);\n+\t\t};\n+\t}\n+\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} serialized data\n+\t */\n+\tserialize(data, context) {\n+\t\t/** @type {Buffer} */\n+\t\tlet currentBuffer = null;\n+\t\tlet currentPosition = 0;\n+\t\tconst buffers = [];\n+\t\tconst allocate = (bytesNeeded, exact = false) => {\n+\t\t\tif (currentBuffer !== null) {\n+\t\t\t\tif (currentBuffer.length - currentPosition >= bytesNeeded) return;\n+\t\t\t\tflush();\n+\t\t\t}\n+\t\t\tcurrentBuffer = Buffer.alloc(\n+\t\t\t\texact ? bytesNeeded : Math.max(bytesNeeded, 1024)\n+\t\t\t);\n+\t\t};\n+\t\tconst flush = () => {\n+\t\t\tif (currentBuffer !== null) {\n+\t\t\t\tbuffers.push(currentBuffer.slice(0, currentPosition));\n+\t\t\t\tcurrentBuffer = null;\n+\t\t\t\tcurrentPosition = 0;\n+\t\t\t}\n+\t\t};\n+\t\tconst writeU8 = byte => {\n+\t\t\tcurrentBuffer.writeUInt8(byte, currentPosition++);\n+\t\t};\n+\t\tconst writeU32 = ui32 => {\n+\t\t\tcurrentBuffer.writeUInt32LE(ui32, currentPosition);\n+\t\t\tcurrentPosition += 4;\n+\t\t};\n+\t\tfor (let i = 0; i < data.length; i++) {\n+\t\t\tconst thing = data[i];\n+\t\t\tswitch (typeof thing) {\n+\t\t\t\tcase \"function\": {\n+\t\t\t\t\tflush();\n+\t\t\t\t\tbuffers.push(this._handleFunctionSerialization(thing, context));\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tcase \"string\": {\n+\t\t\t\t\tconst len = Buffer.byteLength(thing);\n+\t\t\t\t\tif (len >= 128) {\n+\t\t\t\t\t\tallocate(len + 5);\n+\t\t\t\t\t\twriteU8(STRING_HEADER);\n+\t\t\t\t\t\twriteU32(len);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tallocate(len + 1);\n+\t\t\t\t\t\twriteU8(SHORT_STRING_HEADER | len);\n+\t\t\t\t\t}\n+\t\t\t\t\tcurrentBuffer.write(thing, currentPosition);\n+\t\t\t\t\tcurrentPosition += len;\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tcase \"number\": {\n+\t\t\t\t\tconst type = identifyNumber(thing);\n+\t\t\t\t\tif (type === 0 && thing >= 0 && thing <= 10) {\n+\t\t\t\t\t\t// shortcut for very small numbers\n+\t\t\t\t\t\tallocate(1);\n+\t\t\t\t\t\twriteU8(thing);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t\tlet n;\n+\t\t\t\t\tfor (n = 1; n < 32 && i + n < data.length; n++) {\n+\t\t\t\t\t\tconst item = data[i + n];\n+\t\t\t\t\t\tif (typeof item !== \"number\") break;\n+\t\t\t\t\t\tif (identifyNumber(item) !== type) break;\n+\t\t\t\t\t}\n+\t\t\t\t\tswitch (type) {\n+\t\t\t\t\t\tcase 0:\n+\t\t\t\t\t\t\tallocate(1 + n);\n+\t\t\t\t\t\t\twriteU8(I8_HEADER | (n - 1));\n+\t\t\t\t\t\t\twhile (n > 0) {\n+\t\t\t\t\t\t\t\tcurrentBuffer.writeInt8(data[i], currentPosition);\n+\t\t\t\t\t\t\t\tcurrentPosition++;\n+\t\t\t\t\t\t\t\tn--;\n+\t\t\t\t\t\t\t\ti++;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\tcase 1:\n+\t\t\t\t\t\t\tallocate(1 + 4 * n);\n+\t\t\t\t\t\t\twriteU8(I32_HEADER | (n - 1));\n+\t\t\t\t\t\t\twhile (n > 0) {\n+\t\t\t\t\t\t\t\tcurrentBuffer.writeInt32LE(data[i], currentPosition);\n+\t\t\t\t\t\t\t\tcurrentPosition += 4;\n+\t\t\t\t\t\t\t\tn--;\n+\t\t\t\t\t\t\t\ti++;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\tcase 2:\n+\t\t\t\t\t\t\tallocate(1 + 8 * n);\n+\t\t\t\t\t\t\twriteU8(F64_HEADER | (n - 1));\n+\t\t\t\t\t\t\twhile (n > 0) {\n+\t\t\t\t\t\t\t\tcurrentBuffer.writeDoubleLE(data[i], currentPosition);\n+\t\t\t\t\t\t\t\tcurrentPosition += 8;\n+\t\t\t\t\t\t\t\tn--;\n+\t\t\t\t\t\t\t\ti++;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t\ti--;\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tcase \"boolean\":\n+\t\t\t\t\tallocate(1);\n+\t\t\t\t\twriteU8(thing === true ? TRUE_HEADER : FALSE_HEADER);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase \"object\": {\n+\t\t\t\t\tif (thing === null) {\n+\t\t\t\t\t\tlet n;\n+\t\t\t\t\t\tfor (n = 1; n < 16 && i + n < data.length; n++) {\n+\t\t\t\t\t\t\tconst item = data[i + n];\n+\t\t\t\t\t\t\tif (item !== null) break;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tallocate(1);\n+\t\t\t\t\t\twriteU8(NULLS_HEADER | (n - 1));\n+\t\t\t\t\t\ti += n - 1;\n+\t\t\t\t\t} else if (Buffer.isBuffer(thing)) {\n+\t\t\t\t\t\tallocate(5, true);\n+\t\t\t\t\t\twriteU8(BUFFER_HEADER);\n+\t\t\t\t\t\twriteU32(thing.length);\n+\t\t\t\t\t\tflush();\n+\t\t\t\t\t\tbuffers.push(thing);\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tflush();\n+\t\treturn buffers;\n+\t}\n+\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} deserialized data\n+\t */\n+\tdeserialize(data, context) {\n+\t\tlet currentDataItem = 0;\n+\t\tlet currentBuffer = data[0];\n+\t\tlet currentPosition = 0;\n+\t\tconst checkOverflow = () => {\n+\t\t\tif (currentPosition >= currentBuffer.length) {\n+\t\t\t\tcurrentPosition = 0;\n+\t\t\t\tcurrentDataItem++;\n+\t\t\t\tcurrentBuffer =\n+\t\t\t\t\tcurrentDataItem < data.length ? data[currentDataItem] : null;\n+\t\t\t}\n+\t\t};\n+\t\tconst read = n => {\n+\t\t\tif (currentBuffer === null) throw new Error(\"Unexpected end of stream\");\n+\t\t\tif (!Buffer.isBuffer(currentBuffer))\n+\t\t\t\tthrow new Error(\"Unexpected lazy element in stream\");\n+\t\t\tconst rem = currentBuffer.length - currentPosition;\n+\t\t\tif (rem < n) {\n+\t\t\t\treturn Buffer.concat([read(rem), read(n - rem)]);\n+\t\t\t}\n+\t\t\tconst res = currentBuffer.slice(currentPosition, currentPosition + n);\n+\t\t\tcurrentPosition += n;\n+\t\t\tcheckOverflow();\n+\t\t\treturn res;\n+\t\t};\n+\t\tconst readU8 = () => {\n+\t\t\tif (currentBuffer === null) throw new Error(\"Unexpected end of stream\");\n+\t\t\tif (!Buffer.isBuffer(currentBuffer))\n+\t\t\t\tthrow new Error(\"Unexpected lazy element in stream\");\n+\t\t\tconst byte = currentBuffer.readUInt8(currentPosition);\n+\t\t\tcurrentPosition++;\n+\t\t\tcheckOverflow();\n+\t\t\treturn byte;\n+\t\t};\n+\t\tconst readU32 = () => {\n+\t\t\treturn read(4).readUInt32LE(0);\n+\t\t};\n+\t\tconst result = [];\n+\t\twhile (currentBuffer !== null) {\n+\t\t\tif (typeof currentBuffer === \"function\") {\n+\t\t\t\tresult.push(\n+\t\t\t\t\tthis._handleFunctionDeserialization(currentBuffer, context)\n+\t\t\t\t);\n+\t\t\t\tcurrentDataItem++;\n+\t\t\t\tcurrentBuffer =\n+\t\t\t\t\tcurrentDataItem < data.length ? data[currentDataItem] : null;\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t\tconst header = readU8();\n+\t\t\tswitch (header) {\n+\t\t\t\tcase NOP_HEADER:\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase BUFFER_HEADER: {\n+\t\t\t\t\tconst len = readU32();\n+\t\t\t\t\tresult.push(read(len));\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tcase TRUE_HEADER:\n+\t\t\t\t\tresult.push(true);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase FALSE_HEADER:\n+\t\t\t\t\tresult.push(false);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase STRING_HEADER: {\n+\t\t\t\t\tconst len = readU32();\n+\t\t\t\t\tconst buf = read(len);\n+\t\t\t\t\tresult.push(buf.toString());\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t\tdefault:\n+\t\t\t\t\tif (header <= 10) {\n+\t\t\t\t\t\tresult.push(header);\n+\t\t\t\t\t} else if ((header & SHORT_STRING_HEADER) === SHORT_STRING_HEADER) {\n+\t\t\t\t\t\tconst len = header & 0x7f;\n+\t\t\t\t\t\tconst buf = read(len);\n+\t\t\t\t\t\tresult.push(buf.toString());\n+\t\t\t\t\t} else if ((header & NUMBERS_HEADER_MASK) === F64_HEADER) {\n+\t\t\t\t\t\tconst len = header & 0x1f;\n+\t\t\t\t\t\tconst buf = read(8 * len + 8);\n+\t\t\t\t\t\tfor (let i = 0; i <= len; i++) {\n+\t\t\t\t\t\t\tresult.push(buf.readDoubleLE(i * 8));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else if ((header & NUMBERS_HEADER_MASK) === I32_HEADER) {\n+\t\t\t\t\t\tconst len = header & 0x1f;\n+\t\t\t\t\t\tconst buf = read(4 * len + 4);\n+\t\t\t\t\t\tfor (let i = 0; i <= len; i++) {\n+\t\t\t\t\t\t\tresult.push(buf.readInt32LE(i * 4));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else if ((header & NUMBERS_HEADER_MASK) === I8_HEADER) {\n+\t\t\t\t\t\tconst len = header & 0x1f;\n+\t\t\t\t\t\tconst buf = read(len + 1);\n+\t\t\t\t\t\tfor (let i = 0; i <= len; i++) {\n+\t\t\t\t\t\t\tresult.push(buf.readInt8(i));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else if ((header & NULLS_HEADER_MASK) === NULLS_HEADER) {\n+\t\t\t\t\t\tconst len = header & 0x0f;\n+\t\t\t\t\t\tfor (let i = 0; i <= len; i++) {\n+\t\t\t\t\t\t\tresult.push(null);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tthrow new Error(`Unexpected header byte 0x${header.toString(16)}`);\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t}\n+\t\t}\n+\t\treturn result;\n+\t}\n+}\n+\n+module.exports = BinaryMiddleware;"
      },
      {
        "sha": "110f5f9f3434724e4da452cecfa4e2307a889a01",
        "filename": "lib/serialization/FileMiddleware.js",
        "status": "added",
        "additions": 212,
        "deletions": 0,
        "changes": 212,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FFileMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FFileMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FFileMiddleware.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,212 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+const fs = require(\"fs\");\n+const mkdirp = require(\"mkdirp\");\n+const path = require(\"path\");\n+const SerializerMiddleware = require(\"./SerializerMiddleware\");\n+\n+class Section {\n+\tconstructor(items) {\n+\t\tthis.items = items;\n+\t\tthis.parts = undefined;\n+\t\tthis.length = NaN;\n+\t\tthis.offset = NaN;\n+\t}\n+\n+\tresolve() {\n+\t\tlet hasPromise = false;\n+\t\tlet lastPart = undefined;\n+\t\tconst parts = [];\n+\t\tlet length = 0;\n+\t\tfor (const item of this.items) {\n+\t\t\tif (typeof item === \"function\") {\n+\t\t\t\tconst r = item();\n+\t\t\t\tif (r instanceof Promise) {\n+\t\t\t\t\tparts.push(r.then(items => new Section(items).resolve()));\n+\t\t\t\t\thasPromise = true;\n+\t\t\t\t} else if (r) {\n+\t\t\t\t\tparts.push(new Section(r).resolve());\n+\t\t\t\t} else {\n+\t\t\t\t\treturn null;\n+\t\t\t\t}\n+\t\t\t\tlength += 12; // 0, offset, size\n+\t\t\t\tlastPart = undefined;\n+\t\t\t} else if (lastPart) {\n+\t\t\t\tlastPart.push(item);\n+\t\t\t\tlength += item.length;\n+\t\t\t} else {\n+\t\t\t\tlength += 4; // size\n+\t\t\t\tlength += item.length;\n+\t\t\t\tlastPart = [item];\n+\t\t\t\tparts.push(lastPart);\n+\t\t\t}\n+\t\t}\n+\t\tthis.length = length;\n+\t\tif (hasPromise) {\n+\t\t\treturn Promise.all(parts).then(parts => {\n+\t\t\t\tthis.parts = parts;\n+\t\t\t\tif (!parts.every(Boolean)) return null;\n+\t\t\t\treturn this;\n+\t\t\t});\n+\t\t} else {\n+\t\t\tthis.parts = parts;\n+\t\t\treturn this;\n+\t\t}\n+\t}\n+\n+\tgetSections() {\n+\t\treturn this.parts.filter(p => p instanceof Section);\n+\t}\n+\n+\temit(out) {\n+\t\tfor (const part of this.parts) {\n+\t\t\tif (part instanceof Section) {\n+\t\t\t\tconst pointerBuf = Buffer.alloc(12);\n+\t\t\t\tpointerBuf.writeUInt32LE(0, 0);\n+\t\t\t\tpointerBuf.writeUInt32LE(part.offset, 4);\n+\t\t\t\tpointerBuf.writeUInt32LE(part.length, 8);\n+\t\t\t\tout.push(pointerBuf);\n+\t\t\t} else {\n+\t\t\t\tconst sizeBuf = Buffer.alloc(4);\n+\t\t\t\tout.push(sizeBuf);\n+\t\t\t\tlet len = 0;\n+\t\t\t\tfor (const buf of part) {\n+\t\t\t\t\tlen += buf.length;\n+\t\t\t\t\tout.push(buf);\n+\t\t\t\t}\n+\t\t\t\tsizeBuf.writeUInt32LE(len, 0);\n+\t\t\t}\n+\t\t}\n+\t}\n+}\n+\n+const createPointer = (filename, offset, size) => {\n+\treturn () => {\n+\t\treturn new Promise((resolve, reject) => {\n+\t\t\t// TODO handle concurrent access to file\n+\t\t\tfs.open(filename, \"r\", (err, file) => {\n+\t\t\t\tif (err) return reject(err);\n+\n+\t\t\t\treadSection(filename, file, offset, size, (readErr, parts) => {\n+\t\t\t\t\tfs.close(file, err => {\n+\t\t\t\t\t\tif (err) return reject(err);\n+\t\t\t\t\t\tif (readErr) return reject(readErr);\n+\n+\t\t\t\t\t\tresolve(parts);\n+\t\t\t\t\t});\n+\t\t\t\t});\n+\t\t\t});\n+\t\t});\n+\t};\n+};\n+\n+const readSection = (filename, file, offset, size, callback) => {\n+\tconst buffer = Buffer.alloc(size);\n+\tfs.read(file, buffer, 0, size, offset, err => {\n+\t\tif (err) return callback(err);\n+\n+\t\tconst result = [];\n+\t\tlet pos = 0;\n+\t\twhile (pos < buffer.length) {\n+\t\t\tconst len = buffer.readUInt32LE(pos);\n+\t\t\tpos += 4;\n+\t\t\tif (len === 0) {\n+\t\t\t\tconst pOffset = buffer.readUInt32LE(pos);\n+\t\t\t\tpos += 4;\n+\t\t\t\tconst pSize = buffer.readUInt32LE(pos);\n+\t\t\t\tpos += 4;\n+\t\t\t\tresult.push(createPointer(filename, pOffset, pSize));\n+\t\t\t} else {\n+\t\t\t\tconst buf = buffer.slice(pos, pos + len);\n+\t\t\t\tpos += len;\n+\t\t\t\tresult.push(buf);\n+\t\t\t}\n+\t\t}\n+\t\tcallback(null, result);\n+\t});\n+};\n+\n+class FileMiddleware extends SerializerMiddleware {\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} serialized data\n+\t */\n+\tserialize(data, { filename }) {\n+\t\tconst root = new Section(data);\n+\n+\t\tconst r = root.resolve();\n+\n+\t\treturn Promise.resolve(r).then(root => {\n+\t\t\tif (!root) return null;\n+\t\t\t// calc positions in file\n+\t\t\tlet currentOffset = 4;\n+\t\t\tconst processOffsets = section => {\n+\t\t\t\tsection.offset = currentOffset;\n+\t\t\t\tcurrentOffset += section.length;\n+\t\t\t\tfor (const child of section.getSections()) {\n+\t\t\t\t\tprocessOffsets(child);\n+\t\t\t\t}\n+\t\t\t};\n+\t\t\tprocessOffsets(root);\n+\n+\t\t\t// get buffers to write\n+\t\t\tconst sizeBuf = Buffer.alloc(4);\n+\t\t\tsizeBuf.writeUInt32LE(root.length, 0);\n+\t\t\tconst buffers = [sizeBuf];\n+\t\t\tconst emit = (section, out) => {\n+\t\t\t\tsection.emit(out);\n+\t\t\t\tfor (const child of section.getSections()) {\n+\t\t\t\t\temit(child, out);\n+\t\t\t\t}\n+\t\t\t};\n+\t\t\temit(root, buffers);\n+\n+\t\t\t// write to file\n+\t\t\treturn new Promise((resolve, reject) => {\n+\t\t\t\tmkdirp(path.dirname(filename), err => {\n+\t\t\t\t\tif (err) return reject(err);\n+\t\t\t\t\tfs.writeFile(filename, Buffer.concat(buffers), err => {\n+\t\t\t\t\t\tif (err) return reject(err);\n+\t\t\t\t\t\tresolve();\n+\t\t\t\t\t});\n+\t\t\t\t});\n+\t\t\t});\n+\t\t});\n+\t}\n+\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} deserialized data\n+\t */\n+\tdeserialize(data, { filename }) {\n+\t\treturn new Promise((resolve, reject) => {\n+\t\t\tfs.open(filename, \"r\", (err, file) => {\n+\t\t\t\tif (err) return reject(err);\n+\n+\t\t\t\tconst sizeBuf = Buffer.alloc(4);\n+\t\t\t\tfs.read(file, sizeBuf, 0, 4, 0, err => {\n+\t\t\t\t\tif (err) return reject(err);\n+\n+\t\t\t\t\tconst rootSize = sizeBuf.readUInt32LE(0);\n+\n+\t\t\t\t\treadSection(filename, file, 4, rootSize, (readErr, parts) => {\n+\t\t\t\t\t\tfs.close(file, err => {\n+\t\t\t\t\t\t\tif (err) return reject(err);\n+\t\t\t\t\t\t\tif (readErr) return reject(readErr);\n+\n+\t\t\t\t\t\t\tresolve(parts);\n+\t\t\t\t\t\t});\n+\t\t\t\t\t});\n+\t\t\t\t});\n+\t\t\t});\n+\t\t});\n+\t}\n+}\n+\n+module.exports = FileMiddleware;"
      },
      {
        "sha": "ec917c59676d82c4e9466b4f5c7a211eb4cdd3b3",
        "filename": "lib/serialization/MapObjectSerializer.js",
        "status": "added",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FMapObjectSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FMapObjectSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FMapObjectSerializer.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,25 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+class MapObjectSerializer {\n+\tserialize(obj, { write }) {\n+\t\twrite(obj.size);\n+\t\tfor (const [key, value] of obj) {\n+\t\t\twrite(key);\n+\t\t\twrite(value);\n+\t\t}\n+\t}\n+\tdeserialize({ read }) {\n+\t\tlet size = read();\n+\t\tconst map = new Map();\n+\t\tfor (let i = 0; i < size; i++) {\n+\t\t\tmap.set(read(), read());\n+\t\t}\n+\t\treturn map;\n+\t}\n+}\n+\n+module.exports = MapObjectSerializer;"
      },
      {
        "sha": "cc1e31dae41cff1ff0905e12a7cfba73d7d9e6bf",
        "filename": "lib/serialization/ObjectMiddleware.js",
        "status": "added",
        "additions": 353,
        "deletions": 0,
        "changes": 353,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FObjectMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FObjectMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FObjectMiddleware.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,353 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+const MapObjectSerializer = require(\"./MapObjectSerializer\");\n+const PlainObjectSerializer = require(\"./PlainObjectSerializer\");\n+const RegExpObjectSerializer = require(\"./RegExpObjectSerializer\");\n+const SerializerMiddleware = require(\"./SerializerMiddleware\");\n+const SetObjectSerializer = require(\"./SetObjectSerializer\");\n+\n+/** @typedef {new (...params: any[]) => any} Constructor */\n+\n+/*\n+\n+Format:\n+\n+File -> Section*\n+Section -> ObjectSection | ReferenceSection | EscapeSection | OtherSection\n+\n+ObjectSection -> ESCAPE (\n+\tnumber:relativeOffset (number > 0) |\n+\tstring:request (string|null):export\n+) Section:value* ESCAPE ESCAPE_END_OBJECT\n+ReferenceSection -> ESCAPE number:relativeOffset (number < 0)\n+EscapeSection -> ESCAPE ESCAPE_ESCAPE_VALUE (escaped value ESCAPE)\n+EscapeSection -> ESCAPE ESCAPE_UNDEFINED (escaped value ESCAPE)\n+OtherSection -> any (except ESCAPE)\n+\n+Why using null as escape value?\n+Multiple null values can merged by the BinaryMiddleware, which makes it very efficient\n+Technically any value can be used.\n+\n+*/\n+\n+/**\n+ * @typedef {Object} ObjectSerializerContext\n+ * @property {function(any): void} write\n+ */\n+\n+/**\n+ * @typedef {Object} ObjectDeserializerContext\n+ * @property {function(): any} read\n+ */\n+\n+/**\n+ * @typedef {Object} ObjectSerializer\n+ * @property {function(any, ObjectSerializerContext): void} serialize\n+ * @property {function(ObjectDeserializerContext): any} deserialize\n+ */\n+\n+const ESCAPE = null;\n+const ESCAPE_ESCAPE_VALUE = null;\n+const ESCAPE_END_OBJECT = true;\n+const ESCAPE_UNDEFINED = false;\n+\n+const CURRENT_VERSION = 1;\n+\n+const plainObjectSerializer = new PlainObjectSerializer();\n+const mapObjectSerializer = new MapObjectSerializer();\n+const setObjectSerializer = new SetObjectSerializer();\n+const regExpObjectSerializer = new RegExpObjectSerializer();\n+\n+const serializers = new Map();\n+const serializerInversed = new Map();\n+\n+const loadedRequests = new Set();\n+\n+const NOT_SERIALIZABLE = {};\n+\n+serializers.set(Object, {\n+\trequest: \"\",\n+\tname: null,\n+\tserializer: plainObjectSerializer\n+});\n+serializers.set(Array, {\n+\trequest: \"\",\n+\tname: null,\n+\tserializer: plainObjectSerializer\n+});\n+serializers.set(Map, {\n+\trequest: \"\",\n+\tname: 1,\n+\tserializer: mapObjectSerializer\n+});\n+serializers.set(Set, {\n+\trequest: \"\",\n+\tname: 2,\n+\tserializer: setObjectSerializer\n+});\n+serializers.set(RegExp, {\n+\trequest: \"\",\n+\tname: 3,\n+\tserializer: regExpObjectSerializer\n+});\n+for (const { request, name, serializer } of serializers.values()) {\n+\tserializerInversed.set(`${request}/${name}`, serializer);\n+}\n+\n+class ObjectMiddleware extends SerializerMiddleware {\n+\t/**\n+\t * @param {Constructor} Constructor the constructor\n+\t * @param {string} request the request which will be required when deserializing\n+\t * @param {string} name the name to make multiple serializer unique when sharing a request\n+\t * @param {ObjectSerializer} serializer the serializer\n+\t * @returns {void}\n+\t */\n+\tstatic register(Constructor, request, name, serializer) {\n+\t\tconst key = request + \"/\" + name;\n+\t\tif (serializers.has(Constructor)) {\n+\t\t\tthrow new Error(\n+\t\t\t\t`ObjectMiddleware.register: serializer for ${\n+\t\t\t\t\tConstructor.name\n+\t\t\t\t} is already registered`\n+\t\t\t);\n+\t\t}\n+\t\tif (serializerInversed.has(key)) {\n+\t\t\tthrow new Error(\n+\t\t\t\t`ObjectMiddleware.register: serializer for ${key} is already registered`\n+\t\t\t);\n+\t\t}\n+\t\tserializers.set(Constructor, {\n+\t\t\trequest,\n+\t\t\tname,\n+\t\t\tserializer\n+\t\t});\n+\t\tserializerInversed.set(key, serializer);\n+\t}\n+\n+\t/**\n+\t * @param {Constructor} Constructor the constructor\n+\t * @returns {void}\n+\t */\n+\tstatic registerNotSerializable(Constructor) {\n+\t\tif (serializers.has(Constructor)) {\n+\t\t\tthrow new Error(\n+\t\t\t\t`ObjectMiddleware.registerNotSerializable: serializer for ${\n+\t\t\t\t\tConstructor.name\n+\t\t\t\t} is already registered`\n+\t\t\t);\n+\t\t}\n+\t\tserializers.set(Constructor, NOT_SERIALIZABLE);\n+\t}\n+\n+\tstatic getSerializerFor(object) {\n+\t\tconst c = object.constructor;\n+\t\tconst config = serializers.get(c);\n+\t\tif (!config) throw new Error(`No serializer registered for ${c.name}`);\n+\t\tif (config === NOT_SERIALIZABLE) throw NOT_SERIALIZABLE;\n+\t\treturn config;\n+\t}\n+\n+\tstatic getDeserializerFor(request, name) {\n+\t\tconst key = request + \"/\" + name;\n+\t\tconst serializer = serializerInversed.get(key);\n+\t\tif (serializer === undefined) {\n+\t\t\tthrow new Error(`No deserializer registered for ${key}`);\n+\t\t}\n+\t\treturn serializer;\n+\t}\n+\n+\t_handleFunctionSerialization(fn, context) {\n+\t\treturn () => {\n+\t\t\tconst r = fn();\n+\t\t\tif (r instanceof Promise)\n+\t\t\t\treturn r.then(data => this.serialize([data], context));\n+\t\t\treturn this.serialize([r], context);\n+\t\t};\n+\t}\n+\n+\t_handleFunctionDeserialization(fn, context) {\n+\t\treturn () => {\n+\t\t\tconst r = fn();\n+\t\t\tif (r instanceof Promise)\n+\t\t\t\treturn r.then(data => this.deserialize(data, context)[0]);\n+\t\t\treturn this.deserialize(r, context)[0];\n+\t\t};\n+\t}\n+\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} serialized data\n+\t */\n+\tserialize(data, context) {\n+\t\t/** @type {any[]} */\n+\t\tconst result = [CURRENT_VERSION];\n+\t\tlet currentPos = 0;\n+\t\tconst referenceable = new Map();\n+\t\tconst addReferenceable = item => {\n+\t\t\treferenceable.set(item, currentPos++);\n+\t\t};\n+\t\tlet currentPosTypeLookup = 0;\n+\t\tconst objectTypeLookup = new Map();\n+\t\tconst cycleStack = new Set();\n+\t\tconst process = item => {\n+\t\t\t// check if we can emit a reference\n+\t\t\tconst ref = referenceable.get(item);\n+\t\t\tif (ref !== undefined) {\n+\t\t\t\tresult.push(ESCAPE, ref - currentPos);\n+\t\t\t\treturn;\n+\t\t\t}\n+\t\t\tif (Buffer.isBuffer(item)) {\n+\t\t\t\taddReferenceable(item);\n+\t\t\t\tresult.push(item);\n+\t\t\t} else if (typeof item === \"object\" && item !== null) {\n+\t\t\t\tif (cycleStack.has(item)) {\n+\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t`Circular references can't be serialized (${Array.from(cycleStack)\n+\t\t\t\t\t\t\t.concat([item])\n+\t\t\t\t\t\t\t.map(obj => obj.constructor.name)\n+\t\t\t\t\t\t\t.join(\" -> \")})`\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t\tconst { request, name, serializer } = ObjectMiddleware.getSerializerFor(\n+\t\t\t\t\titem\n+\t\t\t\t);\n+\n+\t\t\t\tconst key = `${request}/${name}`;\n+\t\t\t\tconst lastIndex = objectTypeLookup.get(key);\n+\t\t\t\tif (lastIndex === undefined) {\n+\t\t\t\t\tobjectTypeLookup.set(key, currentPosTypeLookup++);\n+\t\t\t\t\tresult.push(ESCAPE, request, name);\n+\t\t\t\t} else {\n+\t\t\t\t\tresult.push(ESCAPE, currentPosTypeLookup - lastIndex);\n+\t\t\t\t}\n+\t\t\t\tcycleStack.add(item);\n+\t\t\t\tserializer.serialize(item, {\n+\t\t\t\t\twrite(value) {\n+\t\t\t\t\t\tprocess(value);\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t\tcycleStack.delete(item);\n+\t\t\t\tresult.push(ESCAPE, ESCAPE_END_OBJECT);\n+\t\t\t\taddReferenceable(item);\n+\t\t\t} else if (typeof item === \"string\") {\n+\t\t\t\tif (item !== \"\") {\n+\t\t\t\t\t// empty strings are shorter when not emitting a reference (this saves 1 byte per empty string)\n+\t\t\t\t\taddReferenceable(item);\n+\t\t\t\t}\n+\t\t\t\tresult.push(item);\n+\t\t\t} else if (item === ESCAPE) {\n+\t\t\t\tresult.push(ESCAPE, ESCAPE_ESCAPE_VALUE);\n+\t\t\t} else if (typeof item === \"function\") {\n+\t\t\t\tresult.push(this._handleFunctionSerialization(item));\n+\t\t\t} else if (item === undefined) {\n+\t\t\t\tresult.push(ESCAPE, ESCAPE_UNDEFINED);\n+\t\t\t} else {\n+\t\t\t\tresult.push(item);\n+\t\t\t}\n+\t\t};\n+\t\ttry {\n+\t\t\tfor (const item of data) {\n+\t\t\t\tprocess(item);\n+\t\t\t}\n+\t\t} catch (e) {\n+\t\t\tif (e === NOT_SERIALIZABLE) return null;\n+\t\t\tthrow e;\n+\t\t}\n+\t\treturn result;\n+\t}\n+\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} deserialized data\n+\t */\n+\tdeserialize(data, context) {\n+\t\tlet currentDataPos = 0;\n+\t\tconst read = () => {\n+\t\t\tif (currentDataPos >= data.length)\n+\t\t\t\tthrow new Error(\"Unexpected end of stream\");\n+\t\t\treturn data[currentDataPos++];\n+\t\t};\n+\t\tif (read() !== CURRENT_VERSION)\n+\t\t\tthrow new Error(\"Version missmatch, serializer changed\");\n+\t\tlet currentPos = 0;\n+\t\tconst referenceable = new Map();\n+\t\tconst addReferenceable = item => {\n+\t\t\treferenceable.set(currentPos++, item);\n+\t\t};\n+\t\tlet currentPosTypeLookup = 0;\n+\t\tconst objectTypeLookup = new Map();\n+\t\tconst result = [];\n+\t\tconst decodeValue = () => {\n+\t\t\tconst item = read();\n+\t\t\tif (item === ESCAPE) {\n+\t\t\t\tconst nextItem = read();\n+\t\t\t\tif (nextItem === ESCAPE_ESCAPE_VALUE) {\n+\t\t\t\t\treturn ESCAPE;\n+\t\t\t\t} else if (nextItem === ESCAPE_UNDEFINED) {\n+\t\t\t\t\treturn undefined;\n+\t\t\t\t} else if (nextItem === ESCAPE_END_OBJECT) {\n+\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t`Unexpected end of object at position ${currentDataPos - 1}`\n+\t\t\t\t\t);\n+\t\t\t\t} else if (typeof nextItem === \"number\" && nextItem < 0) {\n+\t\t\t\t\t// relative reference\n+\t\t\t\t\treturn referenceable.get(currentPos + nextItem);\n+\t\t\t\t} else {\n+\t\t\t\t\tconst request = nextItem;\n+\t\t\t\t\tlet serializer;\n+\t\t\t\t\tif (typeof request === \"number\") {\n+\t\t\t\t\t\tserializer = objectTypeLookup.get(currentPosTypeLookup - request);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tconst name = read();\n+\t\t\t\t\t\tif (request && !loadedRequests.has(request)) {\n+\t\t\t\t\t\t\trequire(request);\n+\t\t\t\t\t\t\tloadedRequests.add(request);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tserializer = ObjectMiddleware.getDeserializerFor(request, name);\n+\t\t\t\t\t\tobjectTypeLookup.set(currentPosTypeLookup++, serializer);\n+\t\t\t\t\t}\n+\t\t\t\t\tconst item = serializer.deserialize({\n+\t\t\t\t\t\tread() {\n+\t\t\t\t\t\t\tconst item = decodeValue();\n+\t\t\t\t\t\t\treturn item;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t\tconst end1 = read();\n+\t\t\t\t\tif (end1 !== ESCAPE) {\n+\t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n+\t\t\t\t\t}\n+\t\t\t\t\tconst end2 = read();\n+\t\t\t\t\tif (end2 !== ESCAPE_END_OBJECT) {\n+\t\t\t\t\t\tthrow new Error(\"Expected end of object\");\n+\t\t\t\t\t}\n+\t\t\t\t\taddReferenceable(item);\n+\t\t\t\t\treturn item;\n+\t\t\t\t}\n+\t\t\t} else if (typeof item === \"string\") {\n+\t\t\t\tif (item !== \"\") {\n+\t\t\t\t\taddReferenceable(item);\n+\t\t\t\t}\n+\t\t\t\treturn item;\n+\t\t\t} else if (Buffer.isBuffer(item)) {\n+\t\t\t\taddReferenceable(item);\n+\t\t\t\treturn item;\n+\t\t\t} else if (typeof item === \"function\") {\n+\t\t\t\treturn this._handleFunctionDeserialization(item, context);\n+\t\t\t} else {\n+\t\t\t\treturn item;\n+\t\t\t}\n+\t\t};\n+\t\twhile (currentDataPos < data.length) {\n+\t\t\tresult.push(decodeValue());\n+\t\t}\n+\t\treturn result;\n+\t}\n+}\n+\n+module.exports = ObjectMiddleware;"
      },
      {
        "sha": "d804b767f39a2363d787b207f17469c74a3e6f1c",
        "filename": "lib/serialization/PlainObjectSerializer.js",
        "status": "added",
        "additions": 48,
        "deletions": 0,
        "changes": 48,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FPlainObjectSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FPlainObjectSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FPlainObjectSerializer.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,48 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+class PlainObjectSerializer {\n+\tserialize(obj, { write }) {\n+\t\tif (Array.isArray(obj)) {\n+\t\t\twrite(obj.length);\n+\t\t\tfor (const item of obj) {\n+\t\t\t\twrite(item);\n+\t\t\t}\n+\t\t} else {\n+\t\t\tconst keys = Object.keys(obj);\n+\t\t\tfor (const key of keys) {\n+\t\t\t\twrite(key);\n+\t\t\t}\n+\t\t\twrite(null);\n+\t\t\tfor (const key of keys) {\n+\t\t\t\twrite(obj[key]);\n+\t\t\t}\n+\t\t}\n+\t}\n+\tdeserialize({ read }) {\n+\t\tlet key = read();\n+\t\tif (typeof key === \"number\") {\n+\t\t\tconst array = [];\n+\t\t\tfor (let i = 0; i < key; i++) {\n+\t\t\t\tarray.push(read());\n+\t\t\t}\n+\t\t\treturn array;\n+\t\t} else {\n+\t\t\tconst obj = {};\n+\t\t\tconst keys = [];\n+\t\t\twhile (key !== null) {\n+\t\t\t\tkeys.push(key);\n+\t\t\t\tkey = read();\n+\t\t\t}\n+\t\t\tfor (const key of keys) {\n+\t\t\t\tobj[key] = read();\n+\t\t\t}\n+\t\t\treturn obj;\n+\t\t}\n+\t}\n+}\n+\n+module.exports = PlainObjectSerializer;"
      },
      {
        "sha": "61ca881f3c6f718d09273f2a0ab00a3bd97e7c09",
        "filename": "lib/serialization/RegExpObjectSerializer.js",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FRegExpObjectSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FRegExpObjectSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FRegExpObjectSerializer.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,17 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+class RegExpObjectSerializer {\n+\tserialize(obj, { write }) {\n+\t\twrite(obj.source);\n+\t\twrite(obj.flags);\n+\t}\n+\tdeserialize({ read }) {\n+\t\treturn new RegExp(read(), read());\n+\t}\n+}\n+\n+module.exports = RegExpObjectSerializer;"
      },
      {
        "sha": "de24b041771f54b776fc9cdd2b3b68d777af59e5",
        "filename": "lib/serialization/Serializer.js",
        "status": "added",
        "additions": 59,
        "deletions": 0,
        "changes": 59,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FSerializer.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,59 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+class Serializer {\n+\tconstructor(middlewares, options = {}) {\n+\t\tthis.middlewares = middlewares;\n+\t\tthis.options = options;\n+\t}\n+\n+\tserializeToFile(obj, filename) {\n+\t\tconst context = {\n+\t\t\tfilename\n+\t\t};\n+\t\treturn new Promise((resolve, reject) =>\n+\t\t\tresolve(\n+\t\t\t\tthis.middlewares.reduce((last, middleware) => {\n+\t\t\t\t\tif (last instanceof Promise) {\n+\t\t\t\t\t\treturn last.then(\n+\t\t\t\t\t\t\tdata => data && middleware.serialize(data, context)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t} else if (last) {\n+\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\treturn middleware.serialize(last, context);\n+\t\t\t\t\t\t} catch (err) {\n+\t\t\t\t\t\t\treturn Promise.resolve().then(() => {\n+\t\t\t\t\t\t\t\tthrow err;\n+\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}, this.options.singleItem ? [obj] : obj)\n+\t\t\t)\n+\t\t);\n+\t}\n+\n+\tdeserializeFromFile(filename) {\n+\t\tconst context = {\n+\t\t\tfilename\n+\t\t};\n+\t\treturn Promise.resolve()\n+\t\t\t.then(() =>\n+\t\t\t\tthis.middlewares\n+\t\t\t\t\t.slice()\n+\t\t\t\t\t.reverse()\n+\t\t\t\t\t.reduce((last, middleware) => {\n+\t\t\t\t\t\tif (last instanceof Promise)\n+\t\t\t\t\t\t\treturn last.then(data => middleware.deserialize(data, context));\n+\t\t\t\t\t\telse return middleware.deserialize(last, context);\n+\t\t\t\t\t}, [])\n+\t\t\t)\n+\t\t\t.then(array => {\n+\t\t\t\treturn this.options.singleItem ? array[0] : array;\n+\t\t\t});\n+\t}\n+}\n+\n+module.exports = Serializer;"
      },
      {
        "sha": "7a85f3b00670cb5aa2438e0fd8858731e84b753b",
        "filename": "lib/serialization/SerializerMiddleware.js",
        "status": "added",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FSerializerMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FSerializerMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FSerializerMiddleware.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,31 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+class SerializerMiddleware {\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} serialized data\n+\t */\n+\tserialize(data, context) {\n+\t\tthrow new Error(\n+\t\t\t\"Serializer.serialize is abstract and need to be overwritten\"\n+\t\t);\n+\t}\n+\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} deserialized data\n+\t */\n+\tdeserialize(data, context) {\n+\t\tthrow new Error(\n+\t\t\t\"Serializer.deserialize is abstract and need to be overwritten\"\n+\t\t);\n+\t}\n+}\n+\n+module.exports = SerializerMiddleware;"
      },
      {
        "sha": "71b3fcc0fa1ee82e9d9126110ac9078d9c1ab1dd",
        "filename": "lib/serialization/SetObjectSerializer.js",
        "status": "added",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FSetObjectSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FSetObjectSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FSetObjectSerializer.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,24 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+class SetObjectSerializer {\n+\tserialize(obj, { write }) {\n+\t\twrite(obj.size);\n+\t\tfor (const value of obj) {\n+\t\t\twrite(value);\n+\t\t}\n+\t}\n+\tdeserialize({ read }) {\n+\t\tlet size = read();\n+\t\tconst set = new Set();\n+\t\tfor (let i = 0; i < size; i++) {\n+\t\t\tset.add(read());\n+\t\t}\n+\t\treturn set;\n+\t}\n+}\n+\n+module.exports = SetObjectSerializer;"
      },
      {
        "sha": "50f5bc1e0ccd8dc49dceddd4f28f318b6ffe95e0",
        "filename": "lib/serialization/TextMiddleware.js",
        "status": "added",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FTextMiddleware.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fserialization%2FTextMiddleware.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fserialization%2FTextMiddleware.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,29 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+const SerializerMiddleware = require(\"./SerializerMiddleware\");\n+\n+class TextMiddleware extends SerializerMiddleware {\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} serialized data\n+\t */\n+\tserialize(data, context) {\n+\t\treturn [Buffer.from(JSON.stringify(data))];\n+\t}\n+\n+\t/**\n+\t * @param {any[]} data data items\n+\t * @param {TODO} context TODO\n+\t * @returns {any[]|Promise<any[]>} deserialized data\n+\t */\n+\tdeserialize(data, context) {\n+\t\treturn JSON.parse(Buffer.concat(data).toString());\n+\t}\n+}\n+\n+module.exports = TextMiddleware;"
      },
      {
        "sha": "10bf1e6cb6b9b9d91f94315446dfdd8362559585",
        "filename": "lib/util/makeSerializable.js",
        "status": "added",
        "additions": 69,
        "deletions": 0,
        "changes": 69,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2FmakeSerializable.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2FmakeSerializable.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FmakeSerializable.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,69 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+const ObjectMiddleware = require(\"../serialization/ObjectMiddleware\");\n+const createHash = require(\"./createHash\");\n+\n+const getPrototypeChain = C => {\n+\tconst chain = [];\n+\tlet current = C.prototype;\n+\twhile (current !== Object.prototype) {\n+\t\tchain.push(current);\n+\t\tcurrent = Object.getPrototypeOf(current);\n+\t}\n+\treturn chain;\n+};\n+\n+class ClassSerializer {\n+\tconstructor(Constructor) {\n+\t\tthis.Constructor = Constructor;\n+\t\tthis.hash = null;\n+\t}\n+\n+\t_createHash() {\n+\t\tconst hash = createHash(\"md4\");\n+\t\tconst prototypeChain = getPrototypeChain(this.Constructor);\n+\t\tif (typeof this.Constructor.deserialize === \"function\")\n+\t\t\thash.update(this.Constructor.deserialize.toString());\n+\t\tfor (const p of prototypeChain) {\n+\t\t\tif (typeof p.serialize === \"function\") {\n+\t\t\t\thash.update(p.serialize.toString());\n+\t\t\t}\n+\t\t\tif (typeof p.deserialize === \"function\") {\n+\t\t\t\thash.update(p.deserialize.toString());\n+\t\t\t}\n+\t\t}\n+\t\tthis.hash = hash.digest(\"base64\");\n+\t}\n+\n+\tserialize(obj, context) {\n+\t\tif (!this.hash) this._createHash();\n+\t\tcontext.write(this.hash);\n+\t\tobj.serialize(context);\n+\t}\n+\n+\tdeserialize(context) {\n+\t\tif (!this.hash) this._createHash();\n+\t\tconst hash = context.read();\n+\t\tif (this.hash !== hash)\n+\t\t\tthrow new Error(`Version missmatch for ${this.Constructor.name}`);\n+\t\tif (typeof this.Constructor.deserialize === \"function\") {\n+\t\t\treturn this.Constructor.deserialize(context);\n+\t\t}\n+\t\tconst obj = new this.Constructor();\n+\t\tobj.deserialize(context);\n+\t\treturn obj;\n+\t}\n+}\n+\n+module.exports = (Constructor, request, name = null) => {\n+\tObjectMiddleware.register(\n+\t\tConstructor,\n+\t\trequest,\n+\t\tname,\n+\t\tnew ClassSerializer(Constructor)\n+\t);\n+};"
      },
      {
        "sha": "a6a3b2b3f79fec849ff30ccd1dbb42b9442e36a0",
        "filename": "lib/util/makeUnserializable.js",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2FmakeUnserializable.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2FmakeUnserializable.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FmakeUnserializable.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,11 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+*/\n+\n+\"use strict\";\n+\n+const ObjectMiddleware = require(\"../serialization/ObjectMiddleware\");\n+\n+module.exports = Constructor => {\n+\tObjectMiddleware.registerNotSerializable(Constructor);\n+};"
      },
      {
        "sha": "92f981307e2a14817437f7bf148f75be617650a9",
        "filename": "lib/util/registerExternalSerializer.js",
        "status": "added",
        "additions": 263,
        "deletions": 0,
        "changes": 263,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2FregisterExternalSerializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2FregisterExternalSerializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FregisterExternalSerializer.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,263 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const ObjectMiddleware = require(\"../serialization/ObjectMiddleware\");\n+\n+const SourceLocation = require(\"acorn\").SourceLocation;\n+const CachedSource = require(\"webpack-sources\").CachedSource;\n+const ConcatSource = require(\"webpack-sources\").ConcatSource;\n+const OriginalSource = require(\"webpack-sources\").OriginalSource;\n+const PrefixSource = require(\"webpack-sources\").PrefixSource;\n+const RawSource = require(\"webpack-sources\").RawSource;\n+const ReplaceSource = require(\"webpack-sources\").ReplaceSource;\n+const SourceMapSource = require(\"webpack-sources\").SourceMapSource;\n+\n+/** @typedef {import(\"../Dependency\").RealDependencyLocation} RealDependencyLocation */\n+\n+const CURRENT_MODULE = \"webpack/lib/util/registerExternalSerializer\";\n+\n+ObjectMiddleware.register(\n+\tCachedSource,\n+\tCURRENT_MODULE,\n+\t\"webpack-sources/CachedSource\",\n+\tnew class CachedSourceSerializer {\n+\t\t/**\n+\t\t * @param {CachedSource} source the cached source to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(source, { write }) {\n+\t\t\twrite(source._source);\n+\t\t\twrite(source._cachedSource);\n+\t\t\twrite(source._cachedSize);\n+\t\t\twrite(source._cachedMaps);\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {CachedSource} cached source\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\tconst source = new CachedSource(read());\n+\t\t\tsource._cachedSource = read();\n+\t\t\tsource._cachedSize = read();\n+\t\t\tsource._cachedMaps = read();\n+\t\t\treturn source;\n+\t\t}\n+\t}()\n+);\n+\n+ObjectMiddleware.register(\n+\tRawSource,\n+\tCURRENT_MODULE,\n+\t\"webpack-sources/RawSource\",\n+\tnew class RawSourceSerializer {\n+\t\t/**\n+\t\t * @param {RawSource} source the raw source to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(source, { write }) {\n+\t\t\tconst data = source.source();\n+\t\t\twrite(data);\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {RawSource} raw source\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\tconst source = read();\n+\t\t\treturn new RawSource(source);\n+\t\t}\n+\t}()\n+);\n+\n+ObjectMiddleware.register(\n+\tConcatSource,\n+\tCURRENT_MODULE,\n+\t\"webpack-sources/ConcatSource\",\n+\tnew class ConcatSourceSerializer {\n+\t\t/**\n+\t\t * @param {ConcatSource} source the concat source to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(source, { write }) {\n+\t\t\twrite(source.children);\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {ConcatSource} concat source\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\tconst source = new ConcatSource();\n+\t\t\tconst children = read();\n+\t\t\tsource.children = children;\n+\t\t\treturn source;\n+\t\t}\n+\t}()\n+);\n+\n+ObjectMiddleware.register(\n+\tPrefixSource,\n+\tCURRENT_MODULE,\n+\t\"webpack-sources/PrefixSource\",\n+\tnew class PrefixSourceSerializer {\n+\t\t/**\n+\t\t * @param {PrefixSource} source the prefix source to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(source, { write }) {\n+\t\t\twrite(source._prefix);\n+\t\t\twrite(source._source);\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {PrefixSource} prefix source\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\treturn new PrefixSource(read(), read());\n+\t\t}\n+\t}()\n+);\n+\n+ObjectMiddleware.register(\n+\tReplaceSource,\n+\tCURRENT_MODULE,\n+\t\"webpack-sources/ReplaceSource\",\n+\tnew class ReplaceSourceSerializer {\n+\t\t/**\n+\t\t * @param {ReplaceSource} source the replace source to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(source, { write }) {\n+\t\t\twrite(source._source);\n+\t\t\twrite(source._name);\n+\t\t\tconst replacements = /** @type {TODO} */ (Array.from(\n+\t\t\t\tsource.replacements\n+\t\t\t));\n+\t\t\treplacements.sort((a, b) => {\n+\t\t\t\treturn a.insertIndex - b.insertIndex;\n+\t\t\t});\n+\t\t\twrite(replacements.length);\n+\t\t\tfor (const repl of replacements) {\n+\t\t\t\twrite(repl.start);\n+\t\t\t\twrite(repl.end);\n+\t\t\t\twrite(repl.content);\n+\t\t\t\twrite(repl.name);\n+\t\t\t}\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {ReplaceSource} replace source\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\tconst source = new ReplaceSource(read(), read());\n+\t\t\tconst len = read();\n+\t\t\tfor (let i = 0; i < len; i++) {\n+\t\t\t\t// @ts-ignore TODO signature is missing one argument in typings\n+\t\t\t\tsource.replace(read(), read(), read(), read());\n+\t\t\t}\n+\t\t\treturn source;\n+\t\t}\n+\t}()\n+);\n+\n+ObjectMiddleware.register(\n+\tOriginalSource,\n+\tCURRENT_MODULE,\n+\t\"webpack-sources/OriginalSource\",\n+\tnew class OriginalSourceSerializer {\n+\t\t/**\n+\t\t * @param {OriginalSource} source the original source to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(source, { write }) {\n+\t\t\twrite(source.source());\n+\t\t\twrite(source._name);\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {OriginalSource} original source\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\treturn new OriginalSource(read(), read());\n+\t\t}\n+\t}()\n+);\n+\n+ObjectMiddleware.register(\n+\tSourceLocation,\n+\tCURRENT_MODULE,\n+\t\"acorn/SourceLocation\",\n+\tnew class SourceLocationSerializer {\n+\t\t/**\n+\t\t * @param {SourceLocation} loc the location to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(loc, { write }) {\n+\t\t\twrite(loc.start.line);\n+\t\t\twrite(loc.start.column);\n+\t\t\twrite(loc.end.line);\n+\t\t\twrite(loc.end.column);\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {RealDependencyLocation} location\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\treturn {\n+\t\t\t\tstart: {\n+\t\t\t\t\tline: read(),\n+\t\t\t\t\tcolumn: read()\n+\t\t\t\t},\n+\t\t\t\tend: {\n+\t\t\t\t\tline: read(),\n+\t\t\t\t\tcolumn: read()\n+\t\t\t\t}\n+\t\t\t};\n+\t\t}\n+\t}()\n+);\n+\n+ObjectMiddleware.register(\n+\tSourceMapSource,\n+\tCURRENT_MODULE,\n+\t\"webpack-sources/SourceMapSource\",\n+\tnew class SourceMapSourceSerializer {\n+\t\t/**\n+\t\t * @param {SourceMapSource} source the source map source to be serialized\n+\t\t * @param {ObjectMiddleware.ObjectSerializerContext} context context\n+\t\t * @returns {void}\n+\t\t */\n+\t\tserialize(source, { write }) {\n+\t\t\tconst data = source.sourceAndMap({});\n+\t\t\twrite(data.source);\n+\t\t\twrite(JSON.stringify(data.map));\n+\t\t}\n+\n+\t\t/**\n+\t\t * @param {ObjectMiddleware.ObjectDeserializerContext} context context\n+\t\t * @returns {SourceMapSource} source source map source\n+\t\t */\n+\t\tdeserialize({ read }) {\n+\t\t\tconst source = read();\n+\t\t\tconst map = read();\n+\t\t\treturn new SourceMapSource(source, \"unknown\", map);\n+\t\t}\n+\t}()\n+);"
      },
      {
        "sha": "a81e238f48c52abc84a4e36007d8fde638b1e24c",
        "filename": "lib/util/serializer.js",
        "status": "added",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2Fserializer.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Futil%2Fserializer.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Fserializer.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -0,0 +1,22 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\n+\"use strict\";\n+\n+const BinaryMiddleware = require(\"../serialization/BinaryMiddleware\");\n+const FileMiddleware = require(\"../serialization/FileMiddleware\");\n+const ObjectMiddleware = require(\"../serialization/ObjectMiddleware\");\n+const Serializer = require(\"../serialization/Serializer\");\n+\n+const serializer = new Serializer(\n+\t[new ObjectMiddleware(), new BinaryMiddleware(), new FileMiddleware()],\n+\t{\n+\t\tsingleItem: true\n+\t}\n+);\n+\n+require(\"./registerExternalSerializer\");\n+\n+module.exports = serializer;"
      },
      {
        "sha": "26b3449bf726470e34a0316a6dc1a2f6a8352998",
        "filename": "lib/wasm/WebAssemblyGenerator.js",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fwasm%2FWebAssemblyGenerator.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fwasm%2FWebAssemblyGenerator.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fwasm%2FWebAssemblyGenerator.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -385,7 +385,8 @@ class WebAssemblyGenerator extends Generator {\n \t\t// TODO remove this casts when webpack-sources is fixed\n \t\t// source() should have return type (string | Buffer)\n \t\tconst sourceAsAny = /** @type {TODO} */ (source);\n-\t\tlet bin = /** @type {ArrayBuffer} */ (sourceAsAny);\n+\t\tconst buf = /** @type {Buffer} */ (sourceAsAny);\n+\t\tconst bin = buf.buffer;\n \n \t\tconst usedExports = moduleGraph.getUsedExports(module);\n \t\tconst initFuncId = t.identifier(\n@@ -456,7 +457,9 @@ class WebAssemblyGenerator extends Generator {\n \n \t\tconst newBin = transform(bin);\n \n-\t\treturn new RawSource(newBin);\n+\t\tconst newBuf = Buffer.from(newBin);\n+\n+\t\treturn new RawSource(/** @type {TODO} */ (newBuf));\n \t}\n }\n "
      },
      {
        "sha": "a7d31474e54e8a3a6d2f288b1c3d9ae05711351a",
        "filename": "lib/wasm/WebAssemblyParser.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fwasm%2FWebAssemblyParser.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/lib%2Fwasm%2FWebAssemblyParser.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fwasm%2FWebAssemblyParser.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -77,7 +77,7 @@ class WebAssemblyParser {\n \n \t\t// extract imports and exports\n \t\tconst exports = (state.module.buildMeta.providedExports = []);\n-\t\tconst jsIncompatibleExports = (state.module.buildMeta.jsIncompatibleExports = []);\n+\t\tlet jsIncompatibleExports = (state.module.buildMeta.jsIncompatibleExports = undefined);\n \n \t\tconst importedGlobals = [];\n \t\tt.traverse(module, {\n@@ -95,6 +95,9 @@ class WebAssemblyParser {\n \t\t\t\t\t);\n \n \t\t\t\t\tif (incompatibleType) {\n+\t\t\t\t\t\tif (jsIncompatibleExports === undefined) {\n+\t\t\t\t\t\t\tjsIncompatibleExports = state.module.buildMeta.jsIncompatibleExports = {};\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tjsIncompatibleExports[node.name] = incompatibleType;\n \t\t\t\t\t}\n \t\t\t\t}"
      },
      {
        "sha": "f7c5f67384e95360566bbe4e58ae47244467e4d6",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 67,
        "deletions": 4,
        "changes": 71,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -155,6 +155,42 @@\n         }\n       ]\n     },\n+    \"FileCacheOptions\": {\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"cacheDirectory\": {\n+          \"description\": \"Base directory for the cache (defaults to node_modules/.cache/webpack).\",\n+          \"type\": \"string\",\n+          \"absolutePath\": true\n+        },\n+        \"hashAlgorithm\": {\n+          \"description\": \"Algorithm used for generation the hash (see node.js crypto package)\",\n+          \"type\": \"string\"\n+        },\n+        \"loglevel\": {\n+          \"description\": \"Display log info. (debug: all access and errors with stack trace, info: all access, warning: only failed serialization)\",\n+          \"enum\": [\"debug\", \"info\", \"warning\"]\n+        },\n+        \"name\": {\n+          \"description\": \"Name for the cache. Different names will lead to different coexisting caches.\",\n+          \"type\": \"string\"\n+        },\n+        \"store\": {\n+          \"description\": \"When to store data to the filesystem. (idle: Store data when compiler is idle; background: Store data in background while compiling, but doesn't block the compilation; instant: Store data when creating blocking compilation until data is stored; defaults to idle)\",\n+          \"enum\": [\"idle\", \"background\", \"instant\"]\n+        },\n+        \"type\": {\n+          \"description\": \"Filesystem caching\",\n+          \"enum\": [\"filesystem\"]\n+        },\n+        \"version\": {\n+          \"description\": \"Version of the cache data. Different versions won't allow to reuse the cache and override existing content. Update the version when config changed in a way which doesn't allow to reuse cache. This will invalidate the cache.\",\n+          \"type\": \"string\"\n+        }\n+      },\n+      \"required\": [\"type\"]\n+    },\n     \"FilterItemTypes\": {\n       \"anyOf\": [\n         {\n@@ -213,6 +249,17 @@\n         }\n       }\n     },\n+    \"MemoryCacheOptions\": {\n+      \"type\": \"object\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"type\": {\n+          \"description\": \"In memory caching\",\n+          \"enum\": [\"memory\"]\n+        }\n+      },\n+      \"required\": [\"type\"]\n+    },\n     \"ModuleOptions\": {\n       \"type\": \"object\",\n       \"additionalProperties\": false,\n@@ -1897,12 +1944,28 @@\n       \"description\": \"Cache generated modules and chunks to improve performance for multiple incremental builds.\",\n       \"anyOf\": [\n         {\n-          \"description\": \"You can pass `false` to disable it.\",\n-          \"type\": \"boolean\"\n+          \"description\": \"Disable caching.\",\n+          \"enum\": [false]\n         },\n         {\n-          \"description\": \"You can pass an object to enable it and let webpack use the passed object as cache. This way you can share the cache object between multiple compiler calls.\",\n-          \"type\": \"object\"\n+          \"description\": \"Enable in memory caching.\",\n+          \"enum\": [true]\n+        },\n+        {\n+          \"description\": \"Options for memory caching.\",\n+          \"anyOf\": [\n+            {\n+              \"$ref\": \"#/definitions/MemoryCacheOptions\"\n+            }\n+          ]\n+        },\n+        {\n+          \"description\": \"Options for persistent caching.\",\n+          \"anyOf\": [\n+            {\n+              \"$ref\": \"#/definitions/FileCacheOptions\"\n+            }\n+          ]\n         }\n       ]\n     },"
      },
      {
        "sha": "d1c14107b14db3be5f1c314d7145c0ceb3fe5c22",
        "filename": "test/Errors.test.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/test%2FErrors.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8512b4a81d3ab64a8b9e82b89364b908a7c432a7/test%2FErrors.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FErrors.test.js?ref=8512b4a81d3ab64a8b9e82b89364b908a7c432a7",
        "patch": "@@ -190,7 +190,6 @@ describe(\"Errors\", () => {\n \t\t\t(errors, warnings) => {\n \t\t\t\texpect(errors).toHaveLength(2);\n \t\t\t\texpect(warnings).toHaveLength(0);\n-\t\t\t\tconsole.log(errors);\n \t\t\t\tlet lines = errors[0].split(\"\\n\");\n \t\t\t\texpect(lines[0]).toMatch(/missingFile.js 4:0/);\n \t\t\t\texpect(lines[1]).toMatch(/^Module not found/);"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/7165",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/7165/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/7165/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/7165/events",
    "html_url": "https://github.com/webpack/webpack/pull/7165",
    "id": 319151338,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTg1MTQ0NjA3",
    "number": 7165,
    "title": "improve NormalModule performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-05-01T09:07:55Z",
    "updated_at": "2018-05-02T22:47:18Z",
    "closed_at": "2018-05-02T22:47:11Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/7165",
      "html_url": "https://github.com/webpack/webpack/pull/7165",
      "diff_url": "https://github.com/webpack/webpack/pull/7165.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/7165.patch",
      "merged_at": "2018-05-02T22:47:11Z"
    },
    "body": "\r\n\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\n\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\ncache source and meta hash\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/7165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/7165/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "e090168869b6227bdad21c6781a83eaed4e2d9e5",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 19,
        "deletions": 16,
        "changes": 35,
        "blob_url": "https://github.com/webpack/webpack/blob/ff950e732b465d89b6d251e4bfe1549534f0e372/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ff950e732b465d89b6d251e4bfe1549534f0e372/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=ff950e732b465d89b6d251e4bfe1549534f0e372",
        "patch": "@@ -22,6 +22,7 @@ const ModuleParseError = require(\"./ModuleParseError\");\n const ModuleBuildError = require(\"./ModuleBuildError\");\n const ModuleError = require(\"./ModuleError\");\n const ModuleWarning = require(\"./ModuleWarning\");\n+const createHash = require(\"./util/createHash\");\n \n const asString = buf => {\n \tif (Buffer.isBuffer(buf)) {\n@@ -89,6 +90,7 @@ class NormalModule extends Module {\n \t\t// Info from Build\n \t\tthis.error = null;\n \t\tthis._source = null;\n+\t\tthis._buildHash = \"\";\n \t\tthis.buildTimestamp = undefined;\n \t\tthis._cachedSource = undefined;\n \t\tthis._cachedSourceHash = undefined;\n@@ -327,11 +329,23 @@ class NormalModule extends Module {\n \t\treturn false;\n \t}\n \n+\t_initBuildHash(compilation) {\n+\t\tconst hash = createHash(compilation.outputOptions.hashFunction);\n+\t\tif (this._source) {\n+\t\t\thash.update(\"source\");\n+\t\t\tthis._source.updateHash(hash);\n+\t\t}\n+\t\thash.update(\"meta\");\n+\t\thash.update(JSON.stringify(this.buildMeta));\n+\t\tthis._buildHash = hash.digest(\"hex\");\n+\t}\n+\n \tbuild(options, compilation, resolver, fs, callback) {\n \t\tthis.buildTimestamp = Date.now();\n \t\tthis.built = true;\n \t\tthis._source = null;\n \t\tthis._ast = null;\n+\t\tthis._buildHash = \"\";\n \t\tthis.error = null;\n \t\tthis.errors.length = 0;\n \t\tthis.warnings.length = 0;\n@@ -349,25 +363,29 @@ class NormalModule extends Module {\n \t\t\t// if we have an error mark module as failed and exit\n \t\t\tif (err) {\n \t\t\t\tthis.markModuleAsErrored(err);\n+\t\t\t\tthis._initBuildHash(compilation);\n \t\t\t\treturn callback();\n \t\t\t}\n \n \t\t\t// check if this module should !not! be parsed.\n \t\t\t// if so, exit here;\n \t\t\tconst noParseRule = options.module && options.module.noParse;\n \t\t\tif (this.shouldPreventParsing(noParseRule, this.request)) {\n+\t\t\t\tthis._initBuildHash(compilation);\n \t\t\t\treturn callback();\n \t\t\t}\n \n \t\t\tconst handleParseError = e => {\n \t\t\t\tconst source = this._source.source();\n \t\t\t\tconst error = new ModuleParseError(this, source, e);\n \t\t\t\tthis.markModuleAsErrored(error);\n+\t\t\t\tthis._initBuildHash(compilation);\n \t\t\t\treturn callback();\n \t\t\t};\n \n \t\t\tconst handleParseResult = result => {\n \t\t\t\tthis._lastSuccessfulBuildMeta = this.buildMeta;\n+\t\t\t\tthis._initBuildHash(compilation);\n \t\t\t\treturn callback();\n \t\t\t};\n \n@@ -454,23 +472,8 @@ class NormalModule extends Module {\n \t\treturn this._source ? this._source.size() : -1;\n \t}\n \n-\tupdateHashWithSource(hash) {\n-\t\tif (!this._source) {\n-\t\t\thash.update(\"null\");\n-\t\t\treturn;\n-\t\t}\n-\t\thash.update(\"source\");\n-\t\tthis._source.updateHash(hash);\n-\t}\n-\n-\tupdateHashWithMeta(hash) {\n-\t\thash.update(\"meta\");\n-\t\thash.update(JSON.stringify(this.buildMeta));\n-\t}\n-\n \tupdateHash(hash) {\n-\t\tthis.updateHashWithSource(hash);\n-\t\tthis.updateHashWithMeta(hash);\n+\t\thash.update(this._buildHash);\n \t\tsuper.updateHash(hash);\n \t}\n }"
      },
      {
        "sha": "368ccb093fbc3f762f1513ddb16923f12beb7024",
        "filename": "test/NormalModule.unittest.js",
        "status": "modified",
        "additions": 0,
        "deletions": 32,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/ff950e732b465d89b6d251e4bfe1549534f0e372/test%2FNormalModule.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ff950e732b465d89b6d251e4bfe1549534f0e372/test%2FNormalModule.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FNormalModule.unittest.js?ref=ff950e732b465d89b6d251e4bfe1549534f0e372",
        "patch": "@@ -184,38 +184,6 @@ describe(\"NormalModule\", () => {\n \t\t});\n \t});\n \n-\tdescribe(\"#updateHashWithSource\", () => {\n-\t\tlet hashSpy;\n-\t\tlet hash;\n-\t\tbeforeEach(() => {\n-\t\t\thashSpy = sinon.spy();\n-\t\t\thash = {\n-\t\t\t\tupdate: hashSpy\n-\t\t\t};\n-\t\t});\n-\t\tdescribe(\"without the module having any source\", () => {\n-\t\t\tbeforeEach(() => {\n-\t\t\t\tnormalModule._source = null;\n-\t\t\t});\n-\t\t\tit('calls hash function with \"null\"', () => {\n-\t\t\t\tnormalModule.updateHashWithSource(hash);\n-\t\t\t\texpect(hashSpy.callCount).toBe(1);\n-\t\t\t\texpect(hashSpy.args[0][0]).toBe(\"null\");\n-\t\t\t});\n-\t\t});\n-\t\tdescribe(\"without the module having source\", () => {\n-\t\t\tlet expectedSource = \"some source\";\n-\t\t\tbeforeEach(() => {\n-\t\t\t\tnormalModule._source = new RawSource(expectedSource);\n-\t\t\t});\n-\t\t\tit('calls hash function with \"source\" and then the actual source of the module', function() {\n-\t\t\t\tnormalModule.updateHashWithSource(hash);\n-\t\t\t\texpect(hashSpy.callCount).toBe(2);\n-\t\t\t\texpect(hashSpy.args[0][0]).toBe(\"source\");\n-\t\t\t\texpect(hashSpy.args[1][0]).toBe(expectedSource);\n-\t\t\t});\n-\t\t});\n-\t});\n \tdescribe(\"#hasDependencies\", () => {\n \t\tit(\"returns true if has dependencies\", () => {\n \t\t\tnormalModule.addDependency(new NullDependency());"
      },
      {
        "sha": "531e24da9df3f84f45bd3f37a8dba170c63f683e",
        "filename": "test/__snapshots__/StatsTestCases.test.js.snap",
        "status": "modified",
        "additions": 116,
        "deletions": 116,
        "changes": 232,
        "blob_url": "https://github.com/webpack/webpack/blob/ff950e732b465d89b6d251e4bfe1549534f0e372/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "raw_url": "https://github.com/webpack/webpack/raw/ff950e732b465d89b6d251e4bfe1549534f0e372/test%2F__snapshots__%2FStatsTestCases.test.js.snap",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2F__snapshots__%2FStatsTestCases.test.js.snap?ref=ff950e732b465d89b6d251e4bfe1549534f0e372",
        "patch": "@@ -1,124 +1,124 @@\n // Jest Snapshot v1, https://goo.gl/fbAQLP\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-entry 1`] = `\n-\"Hash: e3ba3c1dddc97b92dbf7e3ba3c1dddc97b92dbf7\n+\"Hash: b907386938ff12cf9dbbb907386938ff12cf9dbb\n Child fitting:\n-    Hash: e3ba3c1dddc97b92dbf7\n+    Hash: b907386938ff12cf9dbb\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                       Asset      Size  Chunks             Chunk Names\n-    fb95acf7c457672e70d0.js  1.05 KiB       0  [emitted]  \n-    2795fd99577b4ba7fef2.js  10.2 KiB       1  [emitted]  \n-    d43339a3d0f86c6b8d90.js  1.94 KiB       2  [emitted]  \n-    6c7fb52c5514dbfbf094.js  1.94 KiB       3  [emitted]  \n-    Entrypoint main = d43339a3d0f86c6b8d90.js 6c7fb52c5514dbfbf094.js 2795fd99577b4ba7fef2.js\n-    chunk    {0} fb95acf7c457672e70d0.js 916 bytes <{1}> <{2}> <{3}>\n+    9ac13fb7087e9ff1b93e.js  1.05 KiB       0  [emitted]  \n+    077726e3805b482fd93e.js  10.2 KiB       1  [emitted]  \n+    d1ba53816ff760e185b0.js  1.94 KiB       2  [emitted]  \n+    7b5b0a943e9362bc88c6.js  1.94 KiB       3  [emitted]  \n+    Entrypoint main = d1ba53816ff760e185b0.js 7b5b0a943e9362bc88c6.js 077726e3805b482fd93e.js\n+    chunk    {0} 9ac13fb7087e9ff1b93e.js 916 bytes <{1}> <{2}> <{3}>\n         > ./g [4] ./index.js 7:0-13\n      [7] ./g.js 916 bytes {0} [built]\n-    chunk    {1} 2795fd99577b4ba7fef2.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n+    chunk    {1} 077726e3805b482fd93e.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n         > ./index main\n      [3] ./e.js 899 bytes {1} [built]\n      [4] ./index.js 111 bytes {1} [built]\n      [6] ./f.js 900 bytes {1} [built]\n-    chunk    {2} d43339a3d0f86c6b8d90.js 1.76 KiB ={1}= ={3}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {2} d1ba53816ff760e185b0.js 1.76 KiB ={1}= ={3}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      [0] ./b.js 899 bytes {2} [built]\n      [5] ./a.js 899 bytes {2} [built]\n-    chunk    {3} 6c7fb52c5514dbfbf094.js 1.76 KiB ={1}= ={2}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {3} 7b5b0a943e9362bc88c6.js 1.76 KiB ={1}= ={2}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      [1] ./c.js 899 bytes {3} [built]\n      [2] ./d.js 899 bytes {3} [built]\n Child content-change:\n-    Hash: e3ba3c1dddc97b92dbf7\n+    Hash: b907386938ff12cf9dbb\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                       Asset      Size  Chunks             Chunk Names\n-    fb95acf7c457672e70d0.js  1.05 KiB       0  [emitted]  \n-    2795fd99577b4ba7fef2.js  10.2 KiB       1  [emitted]  \n-    d43339a3d0f86c6b8d90.js  1.94 KiB       2  [emitted]  \n-    6c7fb52c5514dbfbf094.js  1.94 KiB       3  [emitted]  \n-    Entrypoint main = d43339a3d0f86c6b8d90.js 6c7fb52c5514dbfbf094.js 2795fd99577b4ba7fef2.js\n-    chunk    {0} fb95acf7c457672e70d0.js 916 bytes <{1}> <{2}> <{3}>\n+    9ac13fb7087e9ff1b93e.js  1.05 KiB       0  [emitted]  \n+    077726e3805b482fd93e.js  10.2 KiB       1  [emitted]  \n+    d1ba53816ff760e185b0.js  1.94 KiB       2  [emitted]  \n+    7b5b0a943e9362bc88c6.js  1.94 KiB       3  [emitted]  \n+    Entrypoint main = d1ba53816ff760e185b0.js 7b5b0a943e9362bc88c6.js 077726e3805b482fd93e.js\n+    chunk    {0} 9ac13fb7087e9ff1b93e.js 916 bytes <{1}> <{2}> <{3}>\n         > ./g [4] ./index.js 7:0-13\n      [7] ./g.js 916 bytes {0} [built]\n-    chunk    {1} 2795fd99577b4ba7fef2.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n+    chunk    {1} 077726e3805b482fd93e.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n         > ./index main\n      [3] ./e.js 899 bytes {1} [built]\n      [4] ./index.js 111 bytes {1} [built]\n      [6] ./f.js 900 bytes {1} [built]\n-    chunk    {2} d43339a3d0f86c6b8d90.js 1.76 KiB ={1}= ={3}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {2} d1ba53816ff760e185b0.js 1.76 KiB ={1}= ={3}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      [0] ./b.js 899 bytes {2} [built]\n      [5] ./a.js 899 bytes {2} [built]\n-    chunk    {3} 6c7fb52c5514dbfbf094.js 1.76 KiB ={1}= ={2}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {3} 7b5b0a943e9362bc88c6.js 1.76 KiB ={1}= ={2}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n      [1] ./c.js 899 bytes {3} [built]\n      [2] ./d.js 899 bytes {3} [built]\"\n `;\n \n exports[`StatsTestCases should print correct stats for aggressive-splitting-on-demand 1`] = `\n-\"Hash: 0bbde62e97b9652dcaac\n+\"Hash: d1ec33892177d3771968\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n                   Asset      Size  Chunks             Chunk Names\n-620d3f8d9bdb989cde07.js  1.94 KiB    6, 7  [emitted]  \n-4467a9f70ef8365bcb32.js  1.93 KiB       0  [emitted]  \n-8debdc7e72b763a13e35.js  1.96 KiB       2  [emitted]  \n-6a2c2702ac98f9f90db9.js  1.94 KiB    3, 1  [emitted]  \n-258ba4b441feff644266.js  1.01 KiB       4  [emitted]  \n-8ae4998ca98adb2a08ea.js  1.94 KiB       5  [emitted]  \n-aafb9d82e452def4c3bb.js     1 KiB       1  [emitted]  \n-344e13508b62e833aacf.js     1 KiB       7  [emitted]  \n-2aaed192bbfbc2302c53.js  1.94 KiB       8  [emitted]  \n-72e04d4eaed46d9aac4c.js  1.94 KiB       9  [emitted]  \n-d19dabec0d62bca26765.js  8.68 KiB      10  [emitted]  main\n-1165c0cca1ba14a506ff.js  1.94 KiB      11  [emitted]  \n-Entrypoint main = d19dabec0d62bca26765.js\n-chunk    {0} 4467a9f70ef8365bcb32.js 1.76 KiB <{10}> ={1}= ={2}= ={3}= ={7}= ={9}= [recorded] aggressive splitted\n+cf8697fa2c994f39a5d4.js  1.94 KiB    6, 7  [emitted]  \n+fd868baa40dab4fc30fd.js  1.93 KiB       0  [emitted]  \n+79c527bb5bf9cba1dc12.js  1.96 KiB       2  [emitted]  \n+e9d82e81fefd7353e8df.js  1.94 KiB    3, 1  [emitted]  \n+ae76098eeb55b9c448f2.js  1.01 KiB       4  [emitted]  \n+05d92aaacfbffa4b7e56.js  1.94 KiB       5  [emitted]  \n+d6418937dfae4b3ee922.js     1 KiB       1  [emitted]  \n+685acdc95ff4af957f47.js     1 KiB       7  [emitted]  \n+606f48c13070850338b1.js  1.94 KiB       8  [emitted]  \n+c5a8eae840969538f450.js  1.94 KiB       9  [emitted]  \n+3bf16d513625c7c39e6f.js  8.68 KiB      10  [emitted]  main\n+fcdf398c8972e4dcf788.js  1.94 KiB      11  [emitted]  \n+Entrypoint main = 3bf16d513625c7c39e6f.js\n+chunk    {0} fd868baa40dab4fc30fd.js 1.76 KiB <{10}> ={1}= ={2}= ={3}= ={7}= ={9}= [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n  [0] ./b.js 899 bytes {0} {5} [built]\n  [1] ./d.js 899 bytes {0} {8} [built]\n-chunk    {1} aafb9d82e452def4c3bb.js 899 bytes <{10}> ={0}= ={2}= ={8}=\n+chunk    {1} d6418937dfae4b3ee922.js 899 bytes <{10}> ={0}= ={2}= ={8}=\n     > ./c ./d ./e [11] ./index.js 3:0-30\n     > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n  [2] ./e.js 899 bytes {1} {3} [built]\n-chunk    {2} 8debdc7e72b763a13e35.js 1.76 KiB <{10}> ={0}= ={1}= ={11}= ={3}= ={6}= ={7}= ={9}= [recorded] aggressive splitted\n+chunk    {2} 79c527bb5bf9cba1dc12.js 1.76 KiB <{10}> ={0}= ={1}= ={11}= ={3}= ={6}= ={7}= ={9}= [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k [11] ./index.js 4:0-51\n     > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n  [3] ./f.js 899 bytes {2} [built]\n  [4] ./g.js 901 bytes {2} [built]\n-chunk    {3} 6a2c2702ac98f9f90db9.js 1.76 KiB <{10}> ={0}= ={2}= ={7}= ={9}= [rendered] [recorded] aggressive splitted\n+chunk    {3} e9d82e81fefd7353e8df.js 1.76 KiB <{10}> ={0}= ={2}= ={7}= ={9}= [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n  [2] ./e.js 899 bytes {1} {3} [built]\n  [6] ./h.js 899 bytes {3} {11} [built]\n-chunk    {4} 258ba4b441feff644266.js 899 bytes <{10}>\n+chunk    {4} ae76098eeb55b9c448f2.js 899 bytes <{10}>\n     > ./a [11] ./index.js 1:0-16\n  [10] ./a.js 899 bytes {4} [built]\n-chunk    {5} 8ae4998ca98adb2a08ea.js 1.76 KiB <{10}>\n+chunk    {5} 05d92aaacfbffa4b7e56.js 1.76 KiB <{10}>\n     > ./b ./c [11] ./index.js 2:0-23\n  [0] ./b.js 899 bytes {0} {5} [built]\n  [5] ./c.js 899 bytes {5} {8} [built]\n-chunk    {6} 620d3f8d9bdb989cde07.js 1.76 KiB <{10}> ={11}= ={2}=\n+chunk    {6} cf8697fa2c994f39a5d4.js 1.76 KiB <{10}> ={11}= ={2}=\n     > ./f ./g ./h ./i ./j ./k [11] ./index.js 4:0-51\n  [8] ./j.js 901 bytes {6} {9} [built]\n  [9] ./k.js 899 bytes {6} {7} [built]\n-chunk    {7} 344e13508b62e833aacf.js 899 bytes <{10}> ={0}= ={2}= ={3}= ={9}=\n+chunk    {7} 685acdc95ff4af957f47.js 899 bytes <{10}> ={0}= ={2}= ={3}= ={9}=\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n  [9] ./k.js 899 bytes {6} {7} [built]\n-chunk    {8} 2aaed192bbfbc2302c53.js 1.76 KiB <{10}> ={1}= [recorded] aggressive splitted\n+chunk    {8} 606f48c13070850338b1.js 1.76 KiB <{10}> ={1}= [recorded] aggressive splitted\n     > ./c ./d ./e [11] ./index.js 3:0-30\n  [1] ./d.js 899 bytes {0} {8} [built]\n  [5] ./c.js 899 bytes {5} {8} [built]\n-chunk    {9} 72e04d4eaed46d9aac4c.js 1.76 KiB <{10}> ={0}= ={2}= ={3}= ={7}= [rendered] [recorded] aggressive splitted\n+chunk    {9} c5a8eae840969538f450.js 1.76 KiB <{10}> ={0}= ={2}= ={3}= ={7}= [rendered] [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n  [7] ./i.js 899 bytes {9} {11} [built]\n  [8] ./j.js 901 bytes {6} {9} [built]\n-chunk   {10} d19dabec0d62bca26765.js (main) 248 bytes >{0}< >{1}< >{11}< >{2}< >{3}< >{4}< >{5}< >{6}< >{7}< >{8}< >{9}< [entry] [rendered]\n+chunk   {10} 3bf16d513625c7c39e6f.js (main) 248 bytes >{0}< >{1}< >{11}< >{2}< >{3}< >{4}< >{5}< >{6}< >{7}< >{8}< >{9}< [entry] [rendered]\n     > ./index main\n  [11] ./index.js 248 bytes {10} [built]\n-chunk   {11} 1165c0cca1ba14a506ff.js 1.76 KiB <{10}> ={2}= ={6}= [rendered] [recorded] aggressive splitted\n+chunk   {11} fcdf398c8972e4dcf788.js 1.76 KiB <{10}> ={2}= ={6}= [rendered] [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k [11] ./index.js 4:0-51\n  [6] ./h.js 899 bytes {3} {11} [built]\n  [7] ./i.js 899 bytes {9} {11} [built]\"\n@@ -467,7 +467,7 @@ Child all:\n `;\n \n exports[`StatsTestCases should print correct stats for chunk-module-id-range 1`] = `\n-\"Hash: 27b68d27e07b42624dae\n+\"Hash: 0bb3f504cf6cc3cbace1\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n    Asset      Size  Chunks             Chunk Names\n@@ -492,7 +492,7 @@ chunk    {1} main1.js (main1) 136 bytes [entry] [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for chunks 1`] = `\n-\"Hash: e99cd61934506d7567a3\n+\"Hash: 41fab27e5669c037a625\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset       Size  Chunks             Chunk Names\n@@ -530,7 +530,7 @@ chunk    {3} 3.bundle.js 44 bytes <{1}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for chunks-development 1`] = `\n-\"Hash: d8b40b77893587325329\n+\"Hash: 7724565418b8b6c8467a\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset       Size  Chunks             Chunk Names\n@@ -581,7 +581,7 @@ chunk    {3} 3.bundle.js (c) 98 bytes <{0}> <{1}> >{0}< >{1}< [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for color-disabled 1`] = `\n-\"Hash: 0b32ee714cee3c8b25d4\n+\"Hash: a6779032127bc5f302b0\n Time: Xms\n Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -591,7 +591,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for color-enabled 1`] = `\n-\"Hash: <CLR=BOLD>0b32ee714cee3c8b25d4</CLR>\n+\"Hash: <CLR=BOLD>a6779032127bc5f302b0</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n   <CLR=BOLD>Asset</CLR>      <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22><CLR=BOLD>Chunk Names</CLR>\n@@ -601,7 +601,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n `;\n \n exports[`StatsTestCases should print correct stats for color-enabled-custom 1`] = `\n-\"Hash: <CLR=BOLD>0b32ee714cee3c8b25d4</CLR>\n+\"Hash: <CLR=BOLD>a6779032127bc5f302b0</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n Built at: Thu Jan 01 1970 <CLR=BOLD>00:00:00</CLR> GMT\n   <CLR=BOLD>Asset</CLR>      <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22><CLR=BOLD>Chunk Names</CLR>\n@@ -611,7 +611,7 @@ Entrypoint <CLR=BOLD>main</CLR> = <CLR=32>main.js</CLR>\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-0 1`] = `\n-\"Hash: cad25b99a073374722a7\n+\"Hash: fe1218333b65ce9f8634\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n               Asset       Size  Chunks             Chunk Names\n@@ -628,7 +628,7 @@ Entrypoint entry-1 = vendor-1~entry-1.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-chunk-min-size-Infinity 1`] = `\n-\"Hash: c176225f44e51c7a39a4\n+\"Hash: 795be68665d680b959bb\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset       Size  Chunks             Chunk Names\n@@ -645,28 +645,28 @@ Entrypoint entry-1 = vendor-1.js entry-1.js\n `;\n \n exports[`StatsTestCases should print correct stats for commons-plugin-issue-4980 1`] = `\n-\"Hash: 1c62a4c91035f66150df2425703c4fe7d61799b3\n+\"Hash: 3da37f8a7e9d647c86531c172aabb881b93ba6be\n Child\n-    Hash: 1c62a4c91035f66150df\n+    Hash: 3da37f8a7e9d647c8653\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                              Asset       Size  Chunks             Chunk Names\n                             app.js    5.9 KiB       0  [emitted]  app\n-    vendor.c0e73bece4137a7015c2.js  619 bytes       1  [emitted]  vendor\n-    Entrypoint app = vendor.c0e73bece4137a7015c2.js app.js\n+    vendor.6a3bdffda9f0de672978.js  619 bytes       1  [emitted]  vendor\n+    Entrypoint app = vendor.6a3bdffda9f0de672978.js app.js\n     [./constants.js] 87 bytes {1} [built]\n     [./entry-1.js] ./entry-1.js + 2 modules 190 bytes {0} [built]\n         | ./entry-1.js 67 bytes [built]\n         | ./submodule-a.js 59 bytes [built]\n         | ./submodule-b.js 59 bytes [built]\n Child\n-    Hash: 2425703c4fe7d61799b3\n+    Hash: 1c172aabb881b93ba6be\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                              Asset       Size  Chunks             Chunk Names\n                             app.js   5.92 KiB       0  [emitted]  app\n-    vendor.c0e73bece4137a7015c2.js  619 bytes       1  [emitted]  vendor\n-    Entrypoint app = vendor.c0e73bece4137a7015c2.js app.js\n+    vendor.6a3bdffda9f0de672978.js  619 bytes       1  [emitted]  vendor\n+    Entrypoint app = vendor.6a3bdffda9f0de672978.js app.js\n     [./constants.js] 87 bytes {1} [built]\n     [./entry-2.js] ./entry-2.js + 2 modules 197 bytes {0} [built]\n         | ./entry-2.js 67 bytes [built]\n@@ -693,17 +693,17 @@ exports[`StatsTestCases should print correct stats for concat-and-sideeffects 1`\n `;\n \n exports[`StatsTestCases should print correct stats for define-plugin 1`] = `\n-\"Hash: 189d0d15eb46be80d1f9eaead63561588b554cc6\n+\"Hash: e7d8a913568c3242d80b39c3fe9ff20894943d05\n Child\n-    Hash: 189d0d15eb46be80d1f9\n+    Hash: e7d8a913568c3242d80b\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset      Size  Chunks             Chunk Names\n     main.js  2.63 KiB       0  [emitted]  main\n     Entrypoint main = main.js\n     [0] ./index.js 24 bytes {0} [built]\n Child\n-    Hash: eaead63561588b554cc6\n+    Hash: 39c3fe9ff20894943d05\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset      Size  Chunks             Chunk Names\n@@ -713,7 +713,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for exclude-with-loader 1`] = `\n-\"Hash: 8b3d74c47fe62d34ee43\n+\"Hash: 0bfe3f933dc07ac74c68\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -726,7 +726,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for external 1`] = `\n-\"Hash: 3386bd94ba1fc3ae7f29\n+\"Hash: c978d13c314f28182daa\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -737,9 +737,9 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for filter-warnings 1`] = `\n-\"Hash: abbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318adabbea59d067e262318ad\n+\"Hash: 894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d894b7278b69dd6b1969d\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -759,49 +759,49 @@ Child\n     Dropping unused function someRemoteUnUsedFunction4 [./a.js:6,0]\n     Dropping unused function someRemoteUnUsedFunction5 [./a.js:7,0]\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  2.19 KiB       0  [emitted]  main\n     Entrypoint main = bundle.js\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  2.19 KiB       0  [emitted]  main\n     Entrypoint main = bundle.js\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  2.19 KiB       0  [emitted]  main\n     Entrypoint main = bundle.js\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  2.19 KiB       0  [emitted]  main\n     Entrypoint main = bundle.js\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  2.19 KiB       0  [emitted]  main\n     Entrypoint main = bundle.js\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n     bundle.js  2.19 KiB       0  [emitted]  main\n     Entrypoint main = bundle.js\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -821,7 +821,7 @@ Child\n     Dropping unused function someRemoteUnUsedFunction4 [./a.js:6,0]\n     Dropping unused function someRemoteUnUsedFunction5 [./a.js:7,0]\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -841,7 +841,7 @@ Child\n     Dropping unused function someRemoteUnUsedFunction4 [./a.js:6,0]\n     Dropping unused function someRemoteUnUsedFunction5 [./a.js:7,0]\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -861,7 +861,7 @@ Child\n     Dropping unused function someRemoteUnUsedFunction4 [./a.js:6,0]\n     Dropping unused function someRemoteUnUsedFunction5 [./a.js:7,0]\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -881,7 +881,7 @@ Child\n     Dropping unused function someRemoteUnUsedFunction4 [./a.js:6,0]\n     Dropping unused function someRemoteUnUsedFunction5 [./a.js:7,0]\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -901,7 +901,7 @@ Child\n     Dropping unused function someRemoteUnUsedFunction4 [./a.js:6,0]\n     Dropping unused function someRemoteUnUsedFunction5 [./a.js:7,0]\n Child\n-    Hash: abbea59d067e262318ad\n+    Hash: 894b7278b69dd6b1969d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -978,7 +978,7 @@ chunk    {5} b.js (b) 179 bytes <{2}> >{1}< [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for import-context-filter 1`] = `\n-\"Hash: 736289137c8313a6d802\n+\"Hash: e08ae3f7bf8b895ac342\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n    Asset       Size  Chunks             Chunk Names\n@@ -995,7 +995,7 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for import-weak 1`] = `\n-\"Hash: 1c55fc2d238369c62239\n+\"Hash: 59a0e9590a7c1754c76d\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n    Asset       Size  Chunks             Chunk Names\n@@ -1008,9 +1008,9 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for limit-chunk-count-plugin 1`] = `\n-\"Hash: 89bb5076b735d47082582924d303eb8bcffb1c785cc24ae5dbdd7c6bafb935e3a49d38d6f5cc7854\n+\"Hash: fbf4374d5e6774f1f5763193fa6cb748ec53112f17662c5c606c0e127c765794818a8074e5c164c7\n Child 1 chunks:\n-    Hash: 89bb5076b735d4708258\n+    Hash: fbf4374d5e6774f1f576\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n@@ -1024,7 +1024,7 @@ Child 1 chunks:\n      [4] ./d.js 22 bytes {0} [built]\n      [5] ./e.js 22 bytes {0} [built]\n Child 2 chunks:\n-    Hash: 2924d303eb8bcffb1c78\n+    Hash: 3193fa6cb748ec53112f\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n           Asset      Size  Chunks             Chunk Names\n@@ -1040,7 +1040,7 @@ Child 2 chunks:\n     chunk    {1} bundle.js (main) 73 bytes >{0}< [entry] [rendered]\n      [5] ./index.js 73 bytes {1} [built]\n Child 3 chunks:\n-    Hash: 5cc24ae5dbdd7c6bafb9\n+    Hash: 17662c5c606c0e127c76\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n           Asset       Size  Chunks             Chunk Names\n@@ -1058,7 +1058,7 @@ Child 3 chunks:\n     chunk    {2} bundle.js (main) 73 bytes >{0}< >{1}< [entry] [rendered]\n      [5] ./index.js 73 bytes {2} [built]\n Child 4 chunks:\n-    Hash: 35e3a49d38d6f5cc7854\n+    Hash: 5794818a8074e5c164c7\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n           Asset       Size  Chunks             Chunk Names\n@@ -1080,7 +1080,7 @@ Child 4 chunks:\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules 1`] = `\n-\"Hash: c5cf5ab0cc0a404f1acf\n+\"Hash: 75aa9fbfda2cb79419d8\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -1110,7 +1110,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for max-modules-default 1`] = `\n-\"Hash: c5cf5ab0cc0a404f1acf\n+\"Hash: 75aa9fbfda2cb79419d8\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -1135,7 +1135,7 @@ Entrypoint main = main.js\n `;\n \n exports[`StatsTestCases should print correct stats for module-assets 1`] = `\n-\"Hash: 021e4419d6957e08eedd\n+\"Hash: 50b073bf8c481825a488\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n Entrypoint main = main.js\n@@ -1317,7 +1317,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin 1`] = `\n-\"Hash: 5df55d54223f36cc303b\n+\"Hash: bda0a8a2c2ad3a4d41bd\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset       Size  Chunks             Chunk Names\n@@ -1331,7 +1331,7 @@ Entrypoint entry = vendor.js entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for named-chunks-plugin-async 1`] = `\n-\"Hash: f7d13fc86234627ae268\n+\"Hash: b07ae41580240259728a\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n                      Asset       Size                   Chunks             Chunk Names\n@@ -1345,7 +1345,7 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for no-emit-on-errors-plugin-with-child-error 1`] = `\n-\"Hash: 550499db0a071b393308\n+\"Hash: 30e651c30e081df7d6fb\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks  Chunk Names\n@@ -1367,7 +1367,7 @@ Child child:\n `;\n \n exports[`StatsTestCases should print correct stats for optimize-chunks 1`] = `\n-\"Hash: b643225c9d2e70212495\n+\"Hash: 72023c7499b4b25526da\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n             Asset       Size  Chunks             Chunk Names\n@@ -1438,9 +1438,9 @@ You may need an appropriate loader to handle this file type.\n `;\n \n exports[`StatsTestCases should print correct stats for performance-different-mode-and-target 1`] = `\n-\"Hash: df3a0090d24670ebd17d7094466a296a7ae4ae823f59070ac8deb95011d223ef01d5f7db6f7b0912f47482563c8b6b9dc4955fdf2e3a0c7c308a998f9bab5b59aa119495c443\n+\"Hash: 1600ea0c15704981d2afb76a49f4a3d86abe6cece7a6e8bbef9e93fb375f94f7ccc27c401fad35731592704355cc413e2afcf8bdd2c0c7cffce662a97f3b443bb4363f92335d\n Child\n-    Hash: df3a0090d24670ebd17d\n+    Hash: 1600ea0c15704981d2af\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                  Asset     Size  Chunks                    Chunk Names\n@@ -1463,7 +1463,7 @@ Child\n     You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\n     For more info visit https://webpack.js.org/guides/code-splitting/\n Child\n-    Hash: 7094466a296a7ae4ae82\n+    Hash: b76a49f4a3d86abe6cec\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                        Asset     Size  Chunks                    Chunk Names\n@@ -1486,39 +1486,39 @@ Child\n     You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\n     For more info visit https://webpack.js.org/guides/code-splitting/\n Child\n-    Hash: 3f59070ac8deb95011d2\n+    Hash: e7a6e8bbef9e93fb375f\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                      Asset     Size  Chunks             Chunk Names\n     no-warning.pro-node.js  296 KiB       0  [emitted]  main\n     Entrypoint main = no-warning.pro-node.js\n     [0] ./index.js 293 KiB {0} [built]\n Child\n-    Hash: 23ef01d5f7db6f7b0912\n+    Hash: 94f7ccc27c401fad3573\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                     Asset      Size  Chunks             Chunk Names\n     no-warning.dev-web.js  1.72 MiB    main  [emitted]  main\n     Entrypoint main = no-warning.dev-web.js\n     [./index.js] 293 KiB {main} [built]\n Child\n-    Hash: f47482563c8b6b9dc495\n+    Hash: 1592704355cc413e2afc\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                      Asset      Size  Chunks             Chunk Names\n     no-warning.dev-node.js  1.72 MiB    main  [emitted]  main\n     Entrypoint main = no-warning.dev-node.js\n     [./index.js] 293 KiB {main} [built]\n Child\n-    Hash: 5fdf2e3a0c7c308a998f\n+    Hash: f8bdd2c0c7cffce662a9\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                                    Asset      Size  Chunks                    Chunk Names\n     no-warning.dev-web-with-limit-set.js  1.72 MiB    main  [emitted]  [big]  main\n     Entrypoint main [big] = no-warning.dev-web-with-limit-set.js\n     [./index.js] 293 KiB {main} [built]\n Child\n-    Hash: 9bab5b59aa119495c443\n+    Hash: 7f3b443bb4363f92335d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                                  Asset     Size  Chunks                    Chunk Names\n@@ -1719,7 +1719,7 @@ chunk    {6} inner2.js (inner2) 0 bytes <{0}> [rendered]\"\n `;\n \n exports[`StatsTestCases should print correct stats for preset-detailed 1`] = `\n-\"Hash: 5a6d9c01f46a5330eee6\n+\"Hash: 633de649e1fd60300acb\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n@@ -1778,7 +1778,7 @@ exports[`StatsTestCases should print correct stats for preset-none-array 1`] = `\n exports[`StatsTestCases should print correct stats for preset-none-error 1`] = `\"\"`;\n \n exports[`StatsTestCases should print correct stats for preset-normal 1`] = `\n-\"Hash: 5a6d9c01f46a5330eee6\n+\"Hash: 633de649e1fd60300acb\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n@@ -1856,7 +1856,7 @@ Entrypoints:\n `;\n \n exports[`StatsTestCases should print correct stats for preset-verbose 1`] = `\n-\"Hash: 5a6d9c01f46a5330eee6\n+\"Hash: 633de649e1fd60300acb\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n@@ -1900,7 +1900,7 @@ chunk    {3} 3.js 44 bytes <{1}> [rendered]\n `;\n \n exports[`StatsTestCases should print correct stats for resolve-plugin-context 1`] = `\n-\"Hash: 47eae06ebcb26f6b883a\n+\"Hash: b03156e9d530e0fdde16\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -1914,7 +1914,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for reverse-sort-modules 1`] = `\n-\"Hash: c5cf5ab0cc0a404f1acf\n+\"Hash: 75aa9fbfda2cb79419d8\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset      Size  Chunks             Chunk Names\n@@ -1979,7 +1979,7 @@ Entrypoint e2 = runtime.js e2.js\"\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-bailouts 1`] = `\n-\"Hash: ee60eae5100628922748\n+\"Hash: eca97dadc365a5ea9495\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n Entrypoint index = index.js\n@@ -2011,9 +2011,9 @@ Entrypoint entry = entry.js\n `;\n \n exports[`StatsTestCases should print correct stats for scope-hoisting-multi 1`] = `\n-\"Hash: 33704ebeb245a82a7e824bf53c5eb877060bfd4d\n+\"Hash: 649bc82f0ddfa78bf8265487d50fbccae514909d\n Child\n-    Hash: 33704ebeb245a82a7e82\n+    Hash: 649bc82f0ddfa78bf826\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     Entrypoint first = vendor.js first.js\n@@ -2030,7 +2030,7 @@ Child\n      [9] ./module_first.js 31 bytes {4} [built]\n     [10] ./second.js 177 bytes {5} [built]\n Child\n-    Hash: 4bf53c5eb877060bfd4d\n+    Hash: 5487d50fbccae514909d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     Entrypoint first = vendor.js first.js\n@@ -2058,7 +2058,7 @@ Child\n `;\n \n exports[`StatsTestCases should print correct stats for simple 1`] = `\n-\"Hash: 18342b523b0aca4784a6\n+\"Hash: 85e288d6fa103903dde9\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -2068,7 +2068,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for simple-more-info 1`] = `\n-\"Hash: ee367da3e170c28a39bf\n+\"Hash: f252a9e1a2892c292e8e\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -2574,7 +2574,7 @@ chunk    {4} default/main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< [entry] [r\n `;\n \n exports[`StatsTestCases should print correct stats for tree-shaking 1`] = `\n-\"Hash: 6877ac726b04eb5d7985\n+\"Hash: 268985187bb6f35a0709\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names\n@@ -2611,7 +2611,7 @@ Entrypoint main = bundle.js\n `;\n \n exports[`StatsTestCases should print correct stats for warnings-uglifyjs 1`] = `\n-\"Hash: 5f08c421d55ae2ad3d0e\n+\"Hash: c9585261f508c0a85e1b\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset      Size  Chunks             Chunk Names"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/6049",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/6049/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/6049/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/6049/events",
    "html_url": "https://github.com/webpack/webpack/pull/6049",
    "id": 278435951,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTU1ODM5MTk1",
    "number": 6049,
    "title": "Performance improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-12-01T11:21:58Z",
    "updated_at": "2018-03-31T14:32:53Z",
    "closed_at": "2017-12-04T13:09:58Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/6049",
      "html_url": "https://github.com/webpack/webpack/pull/6049",
      "diff_url": "https://github.com/webpack/webpack/pull/6049.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/6049.patch",
      "merged_at": "2017-12-04T13:09:58Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance improvements\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nn/a\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\n* convert algorithm to iterative\r\n* use less memory\r\n* cache result of eval devtool\r\n* recycle nodes in Queue\r\n* Only generate portable records when needed\r\n* improve FlagDependencyExportsPlugin performance and memory usage\r\n* always create a CachedSource, because it's accessed multiple times\r\n* Only create one RequestShortener per Compiler\r\n* move Compiler.context assignment into Compiler\r\n* make `Module.hash` official and use it for caching\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/6049/reactions",
      "total_count": 5,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 5,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/6049/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "6a6a6eea5034e5385ee0268bd64b1edafa360041",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 42,
        "deletions": 20,
        "changes": 62,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -536,43 +536,64 @@ class Chunk {\n \t}\n \n \tgetChunkMaps(includeEntries, realHash) {\n-\t\tconst chunksProcessed = new Set();\n \t\tconst chunkHashMap = Object.create(null);\n \t\tconst chunkNameMap = Object.create(null);\n-\t\tconst addChunk = chunk => {\n-\t\t\tif(chunksProcessed.has(chunk)) return;\n-\t\t\tchunksProcessed.add(chunk);\n+\n+\t\tconst queue = [this];\n+\t\tconst chunksEnqueued = new Set([this]);\n+\n+\t\twhile(queue.length > 0) {\n+\t\t\tconst chunk = queue.pop();\n \t\t\tif(!chunk.hasRuntime() || includeEntries) {\n \t\t\t\tchunkHashMap[chunk.id] = realHash ? chunk.hash : chunk.renderedHash;\n \t\t\t\tif(chunk.name)\n \t\t\t\t\tchunkNameMap[chunk.id] = chunk.name;\n \t\t\t}\n-\t\t\tchunk._chunks.forEach(addChunk);\n-\t\t};\n-\t\taddChunk(this);\n+\t\t\tfor(const child of chunk.chunksIterable) {\n+\t\t\t\tif(chunksEnqueued.has(child)) continue;\n+\t\t\t\tchunksEnqueued.add(child);\n+\t\t\t\tqueue.push(child);\n+\t\t\t}\n+\t\t}\n+\n \t\treturn {\n \t\t\thash: chunkHashMap,\n \t\t\tname: chunkNameMap\n \t\t};\n \t}\n \n \tgetChunkModuleMaps(includeEntries, filterFn) {\n-\t\tconst chunksProcessed = new Set();\n \t\tconst chunkModuleIdMap = Object.create(null);\n \t\tconst chunkModuleHashMap = Object.create(null);\n-\t\t(function addChunk(chunk) {\n-\t\t\tif(chunksProcessed.has(chunk)) return;\n-\t\t\tchunksProcessed.add(chunk);\n+\n+\t\tconst chunksEnqueued = new Set([this]);\n+\t\tconst queue = [this];\n+\n+\t\twhile(queue.length > 0) {\n+\t\t\tconst chunk = queue.pop();\n \t\t\tif(!chunk.hasRuntime() || includeEntries) {\n-\t\t\t\tconst array = chunk.getModules().filter(filterFn);\n-\t\t\t\tif(array.length > 0)\n-\t\t\t\t\tchunkModuleIdMap[chunk.id] = array.map(m => m.id).sort();\n-\t\t\t\tfor(const m of array) {\n-\t\t\t\t\tchunkModuleHashMap[m.id] = m.renderedHash;\n+\t\t\t\tlet array = undefined;\n+\t\t\t\tfor(const module of chunk.modulesIterable) {\n+\t\t\t\t\tif(filterFn(module)) {\n+\t\t\t\t\t\tif(array === undefined) {\n+\t\t\t\t\t\t\tarray = [];\n+\t\t\t\t\t\t\tchunkModuleIdMap[chunk.id] = array;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tarray.push(module.id);\n+\t\t\t\t\t\tchunkModuleHashMap[module.id] = module.renderedHash;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif(array !== undefined) {\n+\t\t\t\t\tarray.sort();\n \t\t\t\t}\n \t\t\t}\n-\t\t\tchunk._chunks.forEach(addChunk);\n-\t\t}(this));\n+\t\t\tfor(const child of chunk.chunksIterable) {\n+\t\t\t\tif(chunksEnqueued.has(child)) continue;\n+\t\t\t\tchunksEnqueued.add(child);\n+\t\t\t\tqueue.push(child);\n+\t\t\t}\n+\t\t}\n+\n \t\treturn {\n \t\t\tid: chunkModuleIdMap,\n \t\t\thash: chunkModuleHashMap\n@@ -585,8 +606,9 @@ class Chunk {\n \n \t\twhile(queue.length > 0) {\n \t\t\tconst chunk = queue.pop();\n-\t\t\tif(chunk.getModules().some(filterFn))\n-\t\t\t\treturn true;\n+\t\t\tfor(const module of chunk.modulesIterable)\n+\t\t\t\tif(filterFn(module))\n+\t\t\t\t\treturn true;\n \t\t\tfor(const next of chunk.chunksIterable) {\n \t\t\t\tif(!chunksProcessed.has(next)) {\n \t\t\t\t\tchunksProcessed.add(next);"
      },
      {
        "sha": "a3688d5e939b88eccd870290d7d1ba0564931fe7",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 16,
        "deletions": 3,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -170,6 +170,7 @@ class Compilation extends Tapable {\n \t\tthis.compiler = compiler;\n \t\tthis.resolverFactory = compiler.resolverFactory;\n \t\tthis.inputFileSystem = compiler.inputFileSystem;\n+\t\tthis.requestShortener = compiler.requestShortener;\n \n \t\tconst options = this.options = compiler.options;\n \t\tthis.outputOptions = options && options.output;\n@@ -181,8 +182,8 @@ class Compilation extends Tapable {\n \t\tthis.chunkTemplate = new ChunkTemplate(this.outputOptions);\n \t\tthis.hotUpdateChunkTemplate = new HotUpdateChunkTemplate(this.outputOptions);\n \t\tthis.moduleTemplates = {\n-\t\t\tjavascript: new ModuleTemplate(this.outputOptions),\n-\t\t\twebassembly: new ModuleTemplate(this.outputOptions)\n+\t\t\tjavascript: new ModuleTemplate(this.outputOptions, this.requestShortener),\n+\t\t\twebassembly: new ModuleTemplate(this.outputOptions, this.requestShortener)\n \t\t};\n \n \t\tthis.semaphore = new Semaphore(options.parallelism || 100);\n@@ -1544,6 +1545,7 @@ class Compilation extends Tapable {\n \n \tcreateChunkAssets() {\n \t\tconst outputOptions = this.outputOptions;\n+\t\tconst cachedSourceMap = new Map();\n \t\tfor(let i = 0; i < this.chunks.length; i++) {\n \t\t\tconst chunk = this.chunks[i];\n \t\t\tchunk.files = [];\n@@ -1568,10 +1570,21 @@ class Compilation extends Tapable {\n \t\t\t\t\t\tsource = this.cache[cacheName].source;\n \t\t\t\t\t} else {\n \t\t\t\t\t\tsource = fileManifest.render();\n+\t\t\t\t\t\t// Ensure that source is a cached source to avoid additional cost because of repeated access\n+\t\t\t\t\t\tif(!(source instanceof CachedSource)) {\n+\t\t\t\t\t\t\tconst cacheEntry = cachedSourceMap.get(source);\n+\t\t\t\t\t\t\tif(cacheEntry) {\n+\t\t\t\t\t\t\t\tsource = cacheEntry;\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tconst cachedSource = new CachedSource(source);\n+\t\t\t\t\t\t\t\tcachedSourceMap.set(source, cachedSource);\n+\t\t\t\t\t\t\t\tsource = cachedSource;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tif(this.cache) {\n \t\t\t\t\t\t\tthis.cache[cacheName] = {\n \t\t\t\t\t\t\t\thash: usedHash,\n-\t\t\t\t\t\t\t\tsource: source = (source instanceof CachedSource ? source : new CachedSource(source))\n+\t\t\t\t\t\t\t\tsource\n \t\t\t\t\t\t\t};\n \t\t\t\t\t\t}\n \t\t\t\t\t}"
      },
      {
        "sha": "fb836d178f9e862301af9acc8fac37888c5a1265",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 7,
        "deletions": 2,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -18,6 +18,7 @@ const NormalModuleFactory = require(\"./NormalModuleFactory\");\n const ContextModuleFactory = require(\"./ContextModuleFactory\");\n const ResolverFactory = require(\"./ResolverFactory\");\n \n+const RequestShortener = require(\"./RequestShortener\");\n const makePathsRelative = require(\"./util/identifier\").makePathsRelative;\n \n class Watching {\n@@ -174,7 +175,7 @@ class Watching {\n }\n \n class Compiler extends Tapable {\n-\tconstructor() {\n+\tconstructor(context) {\n \t\tsuper();\n \t\tthis.hooks = {\n \t\t\tshouldEmit: new SyncBailHook([\"compilation\"]),\n@@ -321,6 +322,10 @@ class Compiler extends Tapable {\n \t\t};\n \n \t\tthis.options = {};\n+\n+\t\tthis.context = context;\n+\n+\t\tthis.requestShortener = new RequestShortener(context);\n \t}\n \n \twatch(watchOptions, handler) {\n@@ -515,7 +520,7 @@ class Compiler extends Tapable {\n \t}\n \n \tcreateChildCompiler(compilation, compilerName, compilerIndex, outputOptions, plugins) {\n-\t\tconst childCompiler = new Compiler();\n+\t\tconst childCompiler = new Compiler(this.context);\n \t\tif(Array.isArray(plugins)) {\n \t\t\tplugins.forEach(plugin => childCompiler.apply(plugin));\n \t\t}"
      },
      {
        "sha": "af4b443a6e36c536c996d01a80c7cee9868d48df",
        "filename": "lib/EvalDevToolModuleTemplatePlugin.js",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FEvalDevToolModuleTemplatePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FEvalDevToolModuleTemplatePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FEvalDevToolModuleTemplatePlugin.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -6,6 +6,7 @@\n \n const RawSource = require(\"webpack-sources\").RawSource;\n const ModuleFilenameHelpers = require(\"./ModuleFilenameHelpers\");\n+const cache = new WeakMap();\n \n class EvalDevToolModuleTemplatePlugin {\n \tconstructor(options) {\n@@ -16,6 +17,8 @@ class EvalDevToolModuleTemplatePlugin {\n \n \tapply(moduleTemplate) {\n \t\tmoduleTemplate.plugin(\"module\", (source, module) => {\n+\t\t\tconst cacheEntry = cache.get(source);\n+\t\t\tif(cacheEntry !== undefined) return cacheEntry;\n \t\t\tconst content = source.source();\n \t\t\tconst str = ModuleFilenameHelpers.createFilename(module, {\n \t\t\t\tmoduleFilenameTemplate: this.moduleFilenameTemplate,\n@@ -25,7 +28,9 @@ class EvalDevToolModuleTemplatePlugin {\n \t\t\t\tModuleFilenameHelpers.createFooter(module, moduleTemplate.requestShortener),\n \t\t\t\tthis.sourceUrlComment.replace(/\\[url\\]/g, encodeURI(str).replace(/%2F/g, \"/\").replace(/%20/g, \"_\").replace(/%5E/g, \"^\").replace(/%5C/g, \"\\\\\").replace(/^\\//, \"\"))\n \t\t\t].join(\"\\n\");\n-\t\t\treturn new RawSource(`eval(${JSON.stringify(content + footer)});`);\n+\t\t\tconst result = new RawSource(`eval(${JSON.stringify(content + footer)});`);\n+\t\t\tcache.set(source, result);\n+\t\t\treturn result;\n \t\t});\n \t\tmoduleTemplate.plugin(\"hash\", hash => {\n \t\t\thash.update(\"EvalDevToolModuleTemplatePlugin\");"
      },
      {
        "sha": "66ba9eeb87322a09e54b2e4675c68e78d5254178",
        "filename": "lib/FlagDependencyExportsPlugin.js",
        "status": "modified",
        "additions": 60,
        "deletions": 40,
        "changes": 100,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FFlagDependencyExportsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FFlagDependencyExportsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyExportsPlugin.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -4,14 +4,16 @@\n */\n \"use strict\";\n \n+const Queue = require(\"./util/Queue\");\n+\n const addToSet = (a, b) => {\n \tlet changed = false;\n-\tb.forEach((item) => {\n+\tfor(const item of b) {\n \t\tif(!a.has(item)) {\n \t\t\ta.add(item);\n \t\t\tchanged = true;\n \t\t}\n-\t});\n+\t}\n \treturn changed;\n };\n \n@@ -20,69 +22,87 @@ class FlagDependencyExportsPlugin {\n \tapply(compiler) {\n \t\tcompiler.plugin(\"compilation\", (compilation) => {\n \t\t\tcompilation.plugin(\"finish-modules\", (modules) => {\n-\t\t\t\tconst dependencies = Object.create(null);\n+\t\t\t\tconst dependencies = new Map();\n \n-\t\t\t\t// TODO maybe replace with utils/Queue for better performance?\n-\t\t\t\tconst queue = modules.filter((m) => !m.providedExports);\n+\t\t\t\tconst queue = new Queue();\n \n \t\t\t\tlet module;\n \t\t\t\tlet moduleWithExports;\n \t\t\t\tlet moduleProvidedExports;\n \n \t\t\t\tconst processDependenciesBlock = depBlock => {\n-\t\t\t\t\tdepBlock.dependencies.forEach((dep) => processDependency(dep));\n-\t\t\t\t\tdepBlock.variables.forEach((variable) => {\n-\t\t\t\t\t\tvariable.dependencies.forEach((dep) => processDependency(dep));\n-\t\t\t\t\t});\n-\t\t\t\t\tdepBlock.blocks.forEach(processDependenciesBlock);\n+\t\t\t\t\tfor(const dep of depBlock.dependencies) {\n+\t\t\t\t\t\tif(processDependency(dep))\n+\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t\tfor(const variable of depBlock.variables) {\n+\t\t\t\t\t\tfor(const dep of variable.dependencies) {\n+\t\t\t\t\t\t\tif(processDependency(dep))\n+\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tfor(const block of depBlock.blocks) {\n+\t\t\t\t\t\tif(processDependenciesBlock(block))\n+\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn false;\n \t\t\t\t};\n \n \t\t\t\tconst processDependency = dep => {\n \t\t\t\t\tconst exportDesc = dep.getExports && dep.getExports();\n \t\t\t\t\tif(!exportDesc) return;\n \t\t\t\t\tmoduleWithExports = true;\n \t\t\t\t\tconst exports = exportDesc.exports;\n+\t\t\t\t\t// break early if it's only in the worst state\n+\t\t\t\t\tif(module.providedExports === true) {\n+\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t\t// break if it should move to the worst state\n+\t\t\t\t\tif(exports === true) {\n+\t\t\t\t\t\tmodule.providedExports = true;\n+\t\t\t\t\t\tnotifyDependencies();\n+\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t\t// merge in new exports\n+\t\t\t\t\tif(Array.isArray(exports)) {\n+\t\t\t\t\t\tif(addToSet(moduleProvidedExports, exports)) {\n+\t\t\t\t\t\t\tnotifyDependencies();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\t// store dependencies\n \t\t\t\t\tconst exportDeps = exportDesc.dependencies;\n \t\t\t\t\tif(exportDeps) {\n-\t\t\t\t\t\texportDeps.forEach((dep) => {\n-\t\t\t\t\t\t\tconst depIdent = dep.identifier();\n-\t\t\t\t\t\t\t// if this was not yet initialized\n-\t\t\t\t\t\t\t// initialize it as an array containing the module and stop\n-\t\t\t\t\t\t\tconst array = dependencies[depIdent];\n-\t\t\t\t\t\t\tif(!array) {\n-\t\t\t\t\t\t\t\tdependencies[depIdent] = [module];\n-\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\tfor(const exportDependency of exportDeps) {\n+\t\t\t\t\t\t\t// add dependency for this module\n+\t\t\t\t\t\t\tconst set = dependencies.get(exportDependency);\n+\t\t\t\t\t\t\tif(set === undefined) {\n+\t\t\t\t\t\t\t\tdependencies.set(exportDependency, new Set([module]));\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tset.add(module);\n \t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t// check if this module is known\n-\t\t\t\t\t\t\t// if not, add it to the dependencies for this identifier\n-\t\t\t\t\t\t\tif(array.indexOf(module) < 0)\n-\t\t\t\t\t\t\t\tarray.push(module);\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t\tlet changed = false;\n-\t\t\t\t\tif(module.providedExports !== true) {\n-\t\t\t\t\t\tif(exports === true) {\n-\t\t\t\t\t\t\tmodule.providedExports = true;\n-\t\t\t\t\t\t\tchanged = true;\n-\t\t\t\t\t\t} else if(Array.isArray(exports)) {\n-\t\t\t\t\t\t\tchanged = addToSet(moduleProvidedExports, exports);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\tif(changed) {\n-\t\t\t\t\t\tnotifyDependencies();\n-\t\t\t\t\t}\n+\t\t\t\t\treturn false;\n \t\t\t\t};\n \n \t\t\t\tconst notifyDependencies = () => {\n-\t\t\t\t\tconst deps = dependencies[module.identifier()];\n-\t\t\t\t\tif(deps) {\n-\t\t\t\t\t\tdeps.forEach((dep) => queue.push(dep));\n+\t\t\t\t\tconst deps = dependencies.get(module);\n+\t\t\t\t\tif(deps !== undefined) {\n+\t\t\t\t\t\tfor(const dep of deps) {\n+\t\t\t\t\t\t\tqueue.enqueue(dep);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t};\n \n-\t\t\t\tfor(let i = 0; i < queue.length; i++) {\n-\t\t\t\t\tmodule = queue[i];\n+\t\t\t\t// Start with all modules without provided exports\n+\t\t\t\tfor(const module of modules) {\n+\t\t\t\t\tif(!module.providedExports) {\n+\t\t\t\t\t\tqueue.enqueue(module);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\twhile(queue.length > 0) {\n+\t\t\t\t\tmodule = queue.dequeue();\n \n \t\t\t\t\tif(module.providedExports !== true) {\n \t\t\t\t\t\tmoduleWithExports = module.meta && module.meta.harmonyModule;"
      },
      {
        "sha": "ed617af785eee7e47c5202eee66746116c62ed81",
        "filename": "lib/FunctionModulePlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FFunctionModulePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FFunctionModulePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFunctionModulePlugin.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -5,17 +5,14 @@\n \"use strict\";\n \n const FunctionModuleTemplatePlugin = require(\"./FunctionModuleTemplatePlugin\");\n-const RequestShortener = require(\"./RequestShortener\");\n \n class FunctionModulePlugin {\n-\tconstructor(options, requestShortener) {\n+\tconstructor(options) {\n \t\tthis.options = options;\n-\t\tthis.requestShortener = requestShortener;\n \t}\n \n \tapply(compiler) {\n \t\tcompiler.plugin(\"compilation\", (compilation) => {\n-\t\t\tcompilation.moduleTemplates.javascript.requestShortener = this.requestShortener || new RequestShortener(compiler.context);\n \t\t\tcompilation.moduleTemplates.javascript.apply(new FunctionModuleTemplatePlugin());\n \t\t});\n \t}"
      },
      {
        "sha": "b688151ced6f3afa465c09fd6bcddc096f4d09ed",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -51,6 +51,10 @@ class Module extends DependenciesBlock {\n \t\t// Unique Id\n \t\tthis.debugId = debugId++;\n \n+\t\t// Hash\n+\t\tthis.hash = undefined;\n+\t\tthis.renderedHash = undefined;\n+\n \t\t// Info from Factory\n \t\t// TODO refactor: pass as constructor argument\n \t\tthis.context = null;\n@@ -93,6 +97,9 @@ class Module extends DependenciesBlock {\n \t}\n \n \tdisconnect() {\n+\t\tthis.hash = undefined;\n+\t\tthis.renderedHash = undefined;\n+\n \t\tthis.reasons.length = 0;\n \t\tthis._rewriteChunkInReasons = undefined;\n \t\tthis._chunks.clear();"
      },
      {
        "sha": "90601b7461a076313abae542465bbbb64e246430",
        "filename": "lib/ModuleTemplate.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FModuleTemplate.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FModuleTemplate.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleTemplate.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -9,8 +9,9 @@ const SyncWaterfallHook = require(\"tapable\").SyncWaterfallHook;\n const SyncHook = require(\"tapable\").SyncHook;\n \n module.exports = class ModuleTemplate extends Template {\n-\tconstructor(outputOptions) {\n+\tconstructor(outputOptions, requestShortener) {\n \t\tsuper(outputOptions);\n+\t\tthis.requestShortener = requestShortener;\n \t\tthis.hooks = {\n \t\t\tcontent: new SyncWaterfallHook([\"source\", \"module\", \"options\", \"dependencyTemplates\"]),\n \t\t\tmodule: new SyncWaterfallHook([\"source\", \"module\", \"options\", \"dependencyTemplates\"]),"
      },
      {
        "sha": "da50e4e026665292e7057cff960b1169ca95f07a",
        "filename": "lib/NormalModule.js",
        "status": "modified",
        "additions": 13,
        "deletions": 14,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FNormalModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FNormalModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModule.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -20,7 +20,6 @@ const ModuleParseError = require(\"./ModuleParseError\");\n const ModuleBuildError = require(\"./ModuleBuildError\");\n const ModuleError = require(\"./ModuleError\");\n const ModuleWarning = require(\"./ModuleWarning\");\n-const createHash = require(\"./util/createHash\");\n \n const runLoaders = require(\"loader-runner\").runLoaders;\n const getContext = require(\"loader-runner\").getContext;\n@@ -88,7 +87,8 @@ class NormalModule extends Module {\n \t\tthis._source = null;\n \t\tthis.buildTimestamp = undefined;\n \t\tthis.cacheable = false;\n-\t\tthis._cachedSource = null;\n+\t\tthis._cachedSource = undefined;\n+\t\tthis._cachedSourceHash = undefined;\n \n \t\t// Options for the NormalModule set by plugins\n \t\t// TODO refactor this -> options object filled from Factory\n@@ -294,7 +294,8 @@ class NormalModule extends Module {\n \t\t\tthis.dependencies.length = 0;\n \t\t\tthis.variables.length = 0;\n \t\t\tthis.blocks.length = 0;\n-\t\t\tthis._cachedSource = null;\n+\t\t\tthis._cachedSource = undefined;\n+\t\t\tthis._cachedSourceHash = undefined;\n \n \t\t\t// if we have an error mark module as failed and exit\n \t\t\tif(err) {\n@@ -328,10 +329,7 @@ class NormalModule extends Module {\n \n \tgetHashDigest(dependencyTemplates) {\n \t\tlet dtHash = dependencyTemplatesHashMap.get(\"hash\");\n-\t\tconst hash = createHash(\"md5\");\n-\t\tthis.updateHash(hash);\n-\t\thash.update(`${dtHash}`);\n-\t\treturn hash.digest(\"hex\");\n+\t\treturn `${this.hash}-${dtHash}`;\n \t}\n \n \tsourceDependency(dependency, dependencyTemplates, source, outputOptions, requestShortener) {\n@@ -489,22 +487,23 @@ class NormalModule extends Module {\n \tsource(dependencyTemplates, outputOptions, requestShortener) {\n \t\tif(this.type.startsWith(\"javascript\")) {\n \t\t\tconst hashDigest = this.getHashDigest(dependencyTemplates);\n-\t\t\tif(this._cachedSource && this._cachedSource.hash === hashDigest) {\n-\t\t\t\treturn this._cachedSource.source;\n+\t\t\tif(this._cachedSourceHash === hashDigest) {\n+\t\t\t\t// We can reuse the cached source\n+\t\t\t\treturn this._cachedSource;\n \t\t\t}\n \n \t\t\tif(!this._source) {\n \t\t\t\treturn new RawSource(\"throw new Error('No source available');\");\n \t\t\t}\n \n \t\t\tconst source = new ReplaceSource(this._source);\n-\t\t\tthis._cachedSource = {\n-\t\t\t\tsource: source,\n-\t\t\t\thash: hashDigest\n-\t\t\t};\n \n \t\t\tthis.sourceBlock(this, [], dependencyTemplates, source, outputOptions, requestShortener);\n-\t\t\treturn new CachedSource(source);\n+\n+\t\t\tconst cachedSource = new CachedSource(source);\n+\t\t\tthis._cachedSource = cachedSource;\n+\t\t\tthis._cachedSourceHash = hashDigest;\n+\t\t\treturn cachedSource;\n \t\t}\n \t\treturn this._source;\n \t}"
      },
      {
        "sha": "4899c2b2ce87987a8cc6bfcde61ac6f7d324d6d2",
        "filename": "lib/RecordIdsPlugin.js",
        "status": "modified",
        "additions": 8,
        "deletions": 7,
        "changes": 15,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FRecordIdsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FRecordIdsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRecordIdsPlugin.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -6,19 +6,20 @@\n \n const identifierUtils = require(\"./util/identifier\");\n \n-const portableIdCache = new WeakMap();\n-\n class RecordIdsPlugin {\n+\tconstructor(options) {\n+\t\tthis.options = options || {};\n+\t}\n \n \tapply(compiler) {\n+\t\tconst portableIds = this.options.portableIds;\n \t\tcompiler.plugin(\"compilation\", compilation => {\n \t\t\tcompilation.plugin(\"record-modules\", (modules, records) => {\n \t\t\t\tif(!records.modules) records.modules = {};\n \t\t\t\tif(!records.modules.byIdentifier) records.modules.byIdentifier = {};\n \t\t\t\tif(!records.modules.usedIds) records.modules.usedIds = {};\n \t\t\t\tmodules.forEach(module => {\n-\t\t\t\t\tlet identifier = portableIdCache.get(module);\n-\t\t\t\t\tif(!identifier) portableIdCache.set(module, identifier = identifierUtils.makePathsRelative(compiler.context, module.identifier()));\n+\t\t\t\t\tconst identifier = portableIds ? identifierUtils.makePathsRelative(compiler.context, module.identifier(), compilation.cache) : module.identifier();\n \t\t\t\t\trecords.modules.byIdentifier[identifier] = module.id;\n \t\t\t\t\trecords.modules.usedIds[module.id] = module.id;\n \t\t\t\t});\n@@ -29,8 +30,7 @@ class RecordIdsPlugin {\n \t\t\t\t\tconst usedIds = {};\n \t\t\t\t\tmodules.forEach(module => {\n \t\t\t\t\t\tif(module.id !== null) return;\n-\t\t\t\t\t\tlet identifier = portableIdCache.get(module);\n-\t\t\t\t\t\tif(!identifier) portableIdCache.set(module, identifier = identifierUtils.makePathsRelative(compiler.context, module.identifier()));\n+\t\t\t\t\t\tconst identifier = portableIds ? identifierUtils.makePathsRelative(compiler.context, module.identifier(), compilation.cache) : module.identifier();\n \t\t\t\t\t\tconst id = records.modules.byIdentifier[identifier];\n \t\t\t\t\t\tif(id === undefined) return;\n \t\t\t\t\t\tif(usedIds[id]) return;\n@@ -53,7 +53,8 @@ class RecordIdsPlugin {\n \t\t\t\t\tblock = block.parent;\n \t\t\t\t}\n \t\t\t\tif(!block.identifier) return null;\n-\t\t\t\tident.push(identifierUtils.makePathsRelative(compiler.context, block.identifier()));\n+\t\t\t\tconst identifier = portableIds ? identifierUtils.makePathsRelative(compiler.context, block.identifier(), compilation.cache) : block.identifier();\n+\t\t\t\tident.push(identifier);\n \t\t\t\treturn ident.reverse().join(\":\");\n \t\t\t};\n "
      },
      {
        "sha": "3de10fc59713da8017c693a4499863270b11df7a",
        "filename": "lib/SourceMapDevToolPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FSourceMapDevToolPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FSourceMapDevToolPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FSourceMapDevToolPlugin.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -5,7 +5,6 @@\n \"use strict\";\n \n const path = require(\"path\");\n-const RequestShortener = require(\"./RequestShortener\");\n const ConcatSource = require(\"webpack-sources\").ConcatSource;\n const RawSource = require(\"webpack-sources\").RawSource;\n const ModuleFilenameHelpers = require(\"./ModuleFilenameHelpers\");\n@@ -74,7 +73,7 @@ class SourceMapDevToolPlugin {\n \t\tconst moduleFilenameTemplate = this.moduleFilenameTemplate;\n \t\tconst namespace = this.namespace;\n \t\tconst fallbackModuleFilenameTemplate = this.fallbackModuleFilenameTemplate;\n-\t\tconst requestShortener = new RequestShortener(compiler.context);\n+\t\tconst requestShortener = compiler.requestShortener;\n \t\tconst options = this.options;\n \t\toptions.test = options.test || /\\.(js|css)($|\\?)/i;\n "
      },
      {
        "sha": "2b39c45a596b103860f7901965f158d6c1fce2eb",
        "filename": "lib/Stats.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FStats.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FStats.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FStats.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -96,8 +96,8 @@ class Stats {\n \t\t};\n \n \t\tconst compilation = this.compilation;\n-\t\tconst context = optionsOrFallback(options.context, process.cwd());\n-\t\tconst requestShortener = new RequestShortener(context);\n+\t\tconst context = optionsOrFallback(options.context, compilation.compiler.context);\n+\t\tconst requestShortener = compilation.compiler.context === context ? compilation.requestShortener : new RequestShortener(context);\n \t\tconst showPerformance = optionOrLocalFallback(options.performance, true);\n \t\tconst showHash = optionOrLocalFallback(options.hash, true);\n \t\tconst showEnv = optionOrLocalFallback(options.env, false);"
      },
      {
        "sha": "38d3f54bd512515f3e5a96741373e7f150dbbd40",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -321,7 +321,9 @@ class WebpackOptionsApply extends OptionsApply {\n \n \t\tcompiler.apply(new TemplatedPathPlugin());\n \n-\t\tcompiler.apply(new RecordIdsPlugin());\n+\t\tcompiler.apply(new RecordIdsPlugin({\n+\t\t\tportableIds: options.optimization.portableRecords\n+\t\t}));\n \n \t\tcompiler.apply(new WarnCaseSensitiveModulesPlugin());\n "
      },
      {
        "sha": "8ce95cd4c07300638a16365809c87649cc8512c5",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -113,6 +113,7 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\tthis.set(\"node.__filename\", \"mock\");\n \t\tthis.set(\"node.__dirname\", \"mock\");\n \n+\t\tthis.set(\"performance\", \"make\", options => options.mode !== \"production\" ? false : undefined);\n \t\tthis.set(\"performance\", \"call\", value => {\n \t\t\tif(typeof value === \"boolean\") {\n \t\t\t\treturn value;\n@@ -136,6 +137,7 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\tthis.set(\"optimization.noEmitOnErrors\", \"make\", options => options.mode === \"production\");\n \t\tthis.set(\"optimization.namedModules\", \"make\", options => options.mode === \"development\");\n \t\tthis.set(\"optimization.namedChunks\", \"make\", options => options.mode === \"development\");\n+\t\tthis.set(\"optimization.portableRecords\", \"make\", options => !!(options.recordsInputPath || options.recordsOutputPath || options.recordsPath));\n \t\tthis.set(\"optimization.nodeEnv\", \"make\", options => options.mode);\n \n \t\tthis.set(\"resolve\", \"call\", value => Object.assign({}, value));"
      },
      {
        "sha": "10ec852a50f7b6e9283aff8b01d04b5dcb06688c",
        "filename": "lib/util/Queue.js",
        "status": "modified",
        "additions": 13,
        "deletions": 4,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2Futil%2FQueue.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2Futil%2FQueue.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FQueue.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -4,6 +4,7 @@ module.exports = class Queue {\n \tconstructor(items) {\n \t\tthis.first = null;\n \t\tthis.last = null;\n+\t\tthis.recycle = [];\n \t\tthis.length = 0;\n \t\tif(items) {\n \t\t\tfor(const item of items) {\n@@ -14,10 +15,17 @@ module.exports = class Queue {\n \n \tenqueue(item) {\n \t\tconst first = this.first;\n-\t\tconst node = {\n-\t\t\titem,\n-\t\t\tnext: null\n-\t\t};\n+\t\tlet node;\n+\t\tif(this.recycle.length > 0) {\n+\t\t\tnode = this.recycle.pop();\n+\t\t\tnode.item = item;\n+\t\t\tnode.next = null;\n+\t\t} else {\n+\t\t\tnode = {\n+\t\t\t\titem,\n+\t\t\t\tnext: null\n+\t\t\t};\n+\t\t}\n \t\tif(first === null) {\n \t\t\tthis.last = node;\n \t\t} else {\n@@ -37,6 +45,7 @@ module.exports = class Queue {\n \t\t}\n \t\tthis.last = next;\n \t\tthis.length--;\n+\t\tthis.recycle.push(last);\n \t\treturn last.item;\n \t}\n };"
      },
      {
        "sha": "98d469e0a213aef17b89b0aec61294177fcddb77",
        "filename": "lib/webpack.js",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2Fwebpack.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/lib%2Fwebpack.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fwebpack.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -24,8 +24,7 @@ const webpack = (options, callback) => {\n \t} else if(typeof options === \"object\") {\n \t\toptions = new WebpackOptionsDefaulter().process(options);\n \n-\t\tcompiler = new Compiler();\n-\t\tcompiler.context = options.context;\n+\t\tcompiler = new Compiler(options.context);\n \t\tcompiler.options = options;\n \t\tnew NodeEnvironmentPlugin().apply(compiler);\n \t\tif(options.plugins && Array.isArray(options.plugins)) {"
      },
      {
        "sha": "cfab6cd7e7ad61de1283d101ccd56e74cb72a27a",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -1271,6 +1271,10 @@\n           \"description\": \"Use readable chunk identifiers for better debugging\",\n           \"type\": \"boolean\"\n         },\n+        \"portableRecords\": {\n+          \"description\": \"Generate records with relative paths to be able to move the context folder\",\n+          \"type\": \"boolean\"\n+        },\n         \"nodeEnv\": {\n           \"description\": \"Set process.env.NODE_ENV to a specific value\",\n           \"anyOf\": ["
      },
      {
        "sha": "41fa9ee44410a4e165bdd878c55e09b371396226",
        "filename": "test/Stats.unittest.js",
        "status": "modified",
        "additions": 19,
        "deletions": 4,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/2acd0d410ec831e98799e97cd1debc72eb9863b4/test%2FStats.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2acd0d410ec831e98799e97cd1debc72eb9863b4/test%2FStats.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FStats.unittest.js?ref=2acd0d410ec831e98799e97cd1debc72eb9863b4",
        "patch": "@@ -11,14 +11,20 @@ describe(\"Stats\", () => {\n \t\t\tit(\"hasErrors\", () => {\n \t\t\t\tconst mockStats = new Stats({\n \t\t\t\t\terrors: [\"firstError\"],\n-\t\t\t\t\thash: \"1234\"\n+\t\t\t\t\thash: \"1234\",\n+\t\t\t\t\tcompiler: {\n+\t\t\t\t\t\tcontext: \"\"\n+\t\t\t\t\t}\n \t\t\t\t});\n \t\t\t\tmockStats.hasErrors().should.be.ok();\n \t\t\t});\n \t\t\tit(\"hasWarnings\", () => {\n \t\t\t\tconst mockStats = new Stats({\n \t\t\t\t\twarnings: [\"firstError\"],\n-\t\t\t\t\thash: \"1234\"\n+\t\t\t\t\thash: \"1234\",\n+\t\t\t\t\tcompiler: {\n+\t\t\t\t\t\tcontext: \"\"\n+\t\t\t\t\t}\n \t\t\t\t});\n \t\t\t\tmockStats.hasWarnings().should.be.ok();\n \t\t\t});\n@@ -27,14 +33,20 @@ describe(\"Stats\", () => {\n \t\t\tit(\"hasErrors\", () => {\n \t\t\t\tconst mockStats = new Stats({\n \t\t\t\t\terrors: [],\n-\t\t\t\t\thash: \"1234\"\n+\t\t\t\t\thash: \"1234\",\n+\t\t\t\t\tcompiler: {\n+\t\t\t\t\t\tcontext: \"\"\n+\t\t\t\t\t}\n \t\t\t\t});\n \t\t\t\tmockStats.hasErrors().should.not.be.ok();\n \t\t\t});\n \t\t\tit(\"hasWarnings\", () => {\n \t\t\t\tconst mockStats = new Stats({\n \t\t\t\t\twarnings: [],\n-\t\t\t\t\thash: \"1234\"\n+\t\t\t\t\thash: \"1234\",\n+\t\t\t\t\tcompiler: {\n+\t\t\t\t\t\tcontext: \"\"\n+\t\t\t\t\t}\n \t\t\t\t});\n \t\t\t\tmockStats.hasWarnings().should.not.be.ok();\n \t\t\t});\n@@ -51,6 +63,9 @@ describe(\"Stats\", () => {\n \t\t\t\thash: \"1234\",\n \t\t\t\tmainTemplate: {\n \t\t\t\t\tgetPublicPath: () => \"path\"\n+\t\t\t\t},\n+\t\t\t\tcompiler: {\n+\t\t\t\t\tcontext: \"\"\n \t\t\t\t}\n \t\t\t});\n \t\t\tconst obj = mockStats.toJson();"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/6354",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/6354/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/6354/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/6354/events",
    "html_url": "https://github.com/webpack/webpack/pull/6354",
    "id": 290443197,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTY0MjkwMTQ0",
    "number": 6354,
    "title": "remove the need to rewrite chunk in reasons",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817412,
        "node_id": "MDU6TGFiZWw1NzI4MTc0MTI=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20review-outdated",
        "name": "PR: review-outdated",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2018-01-22T12:08:33Z",
    "updated_at": "2018-07-23T14:19:36Z",
    "closed_at": "2018-07-23T14:19:27Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/6354",
      "html_url": "https://github.com/webpack/webpack/pull/6354",
      "diff_url": "https://github.com/webpack/webpack/pull/6354.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/6354.patch",
      "merged_at": "2018-07-23T14:19:27Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests, but need to be tested with extract-text-plugin too, which need to be updated TODO\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nn/a\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\n\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/6354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/6354/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "c87cfc320b7f305794ee26122772a43d0f99aa97",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/7036ec488b3f5228df74ad9816262960b35c1826/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7036ec488b3f5228df74ad9816262960b35c1826/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=7036ec488b3f5228df74ad9816262960b35c1826",
        "patch": "@@ -330,7 +330,6 @@ class Chunk {\n \tmoveModule(module, otherChunk) {\n \t\tGraphHelpers.disconnectChunkAndModule(this, module);\n \t\tGraphHelpers.connectChunkAndModule(otherChunk, module);\n-\t\tmodule.rewriteChunkInReasons(this, [otherChunk]);\n \t}\n \n \t/**"
      },
      {
        "sha": "c266d9607a25c747e734991027534ce7236d2a10",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 34,
        "deletions": 29,
        "changes": 63,
        "blob_url": "https://github.com/webpack/webpack/blob/7036ec488b3f5228df74ad9816262960b35c1826/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7036ec488b3f5228df74ad9816262960b35c1826/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=7036ec488b3f5228df74ad9816262960b35c1826",
        "patch": "@@ -94,10 +94,6 @@ class Module extends DependenciesBlock {\n \t\t/** @type {(string | OptimizationBailoutFunction)[]} */\n \t\tthis.optimizationBailout = [];\n \n-\t\t// delayed operations\n-\t\t/** @type {undefined | {oldChunk: Chunk, newChunks: Chunk[]}[] } */\n-\t\tthis._rewriteChunkInReasons = undefined;\n-\n \t\t/** @type {boolean} */\n \t\tthis.useSourceMap = false;\n \n@@ -118,7 +114,6 @@ class Module extends DependenciesBlock {\n \t\tthis.renderedHash = undefined;\n \n \t\tthis.reasons.length = 0;\n-\t\tthis._rewriteChunkInReasons = undefined;\n \t\tthis._chunks.clear();\n \n \t\tthis.id = null;\n@@ -226,38 +221,48 @@ class Module extends DependenciesBlock {\n \t\treturn false;\n \t}\n \n-\thasReasonForChunk(chunk) {\n-\t\tif (this._rewriteChunkInReasons) {\n-\t\t\tfor (const operation of this._rewriteChunkInReasons) {\n-\t\t\t\tthis._doRewriteChunkInReasons(operation.oldChunk, operation.newChunks);\n-\t\t\t}\n-\t\t\tthis._rewriteChunkInReasons = undefined;\n+\tisAccessibleInChunk(chunk, ignoreChunk) {\n+\t\t// Check if module is accessible in ALL chunk groups\n+\t\tfor (const chunkGroup of chunk.groupsIterable) {\n+\t\t\tif (!this.isAccessibleInChunkGroup(chunkGroup)) return false;\n \t\t}\n-\t\tfor (let i = 0; i < this.reasons.length; i++) {\n-\t\t\tif (this.reasons[i].hasChunk(chunk)) return true;\n-\t\t}\n-\t\treturn false;\n+\t\treturn true;\n \t}\n \n-\thasReasons() {\n-\t\treturn this.reasons.length > 0;\n-\t}\n+\tisAccessibleInChunkGroup(chunkGroup, ignoreChunk) {\n+\t\tconst queue = new Set([chunkGroup]);\n \n-\trewriteChunkInReasons(oldChunk, newChunks) {\n-\t\t// This is expensive. Delay operation until we really need the data\n-\t\tif (this._rewriteChunkInReasons === undefined) {\n-\t\t\tthis._rewriteChunkInReasons = [];\n+\t\t// Check if module is accessible from all items of the queue\n+\t\tqueueFor: for (const cg of queue) {\n+\t\t\t// 1. If module is in one of the chunks of the group we can continue checking the next items\n+\t\t\t//    because it's accessible.\n+\t\t\tfor (const chunk of cg.chunks) {\n+\t\t\t\tif (chunk !== ignoreChunk && chunk.containsModule(this))\n+\t\t\t\t\tcontinue queueFor;\n+\t\t\t}\n+\t\t\t// 2. If the chunk group is initial, we can break here because it's not accessible.\n+\t\t\tif (chunkGroup.isInitial()) return false;\n+\t\t\t// 3. Enqueue all parents because it must be accessible from ALL parents\n+\t\t\tfor (const parent of chunkGroup.parentsIterable) queue.add(parent);\n \t\t}\n-\t\tthis._rewriteChunkInReasons.push({\n-\t\t\toldChunk,\n-\t\t\tnewChunks\n-\t\t});\n+\t\t// When we processed through the whole list and we didn't bailout, the module is accessible\n+\t\treturn true;\n \t}\n \n-\t_doRewriteChunkInReasons(oldChunk, newChunks) {\n-\t\tfor (let i = 0; i < this.reasons.length; i++) {\n-\t\t\tthis.reasons[i].rewriteChunks(oldChunk, newChunks);\n+\thasReasonForChunk(chunk) {\n+\t\t// check for each reason if we need the chunk\n+\t\tfor (const reason of this.reasons) {\n+\t\t\tconst fromModule = reason.module;\n+\t\t\tfor (const originChunk of fromModule.chunksIterable) {\n+\t\t\t\t// return true if module this is not reachable from originChunk when ignoring cunk\n+\t\t\t\tif (!this.isAccessibleInChunk(originChunk, chunk)) return true;\n+\t\t\t}\n \t\t}\n+\t\treturn false;\n+\t}\n+\n+\thasReasons() {\n+\t\treturn this.reasons.length > 0;\n \t}\n \n \tisUsed(exportName) {"
      },
      {
        "sha": "34bcc9719659a2c5bcb64d9d6ebd6680114f4565",
        "filename": "lib/ModuleReason.js",
        "status": "modified",
        "additions": 0,
        "deletions": 25,
        "changes": 25,
        "blob_url": "https://github.com/webpack/webpack/blob/7036ec488b3f5228df74ad9816262960b35c1826/lib%2FModuleReason.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7036ec488b3f5228df74ad9816262960b35c1826/lib%2FModuleReason.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModuleReason.js?ref=7036ec488b3f5228df74ad9816262960b35c1826",
        "patch": "@@ -17,31 +17,6 @@ class ModuleReason {\n \t\tthis.module = module;\n \t\tthis.dependency = dependency;\n \t\tthis.explanation = explanation;\n-\t\tthis._chunks = null;\n-\t}\n-\n-\thasChunk(chunk) {\n-\t\tif (this._chunks) {\n-\t\t\tif (this._chunks.has(chunk)) return true;\n-\t\t} else if (this.module && this.module._chunks.has(chunk)) return true;\n-\t\treturn false;\n-\t}\n-\n-\trewriteChunks(oldChunk, newChunks) {\n-\t\tif (!this._chunks) {\n-\t\t\tif (this.module) {\n-\t\t\t\tif (!this.module._chunks.has(oldChunk)) return;\n-\t\t\t\tthis._chunks = new Set(this.module._chunks);\n-\t\t\t} else {\n-\t\t\t\tthis._chunks = new Set();\n-\t\t\t}\n-\t\t}\n-\t\tif (this._chunks.has(oldChunk)) {\n-\t\t\tthis._chunks.delete(oldChunk);\n-\t\t\tfor (let i = 0; i < newChunks.length; i++) {\n-\t\t\t\tthis._chunks.add(newChunks[i]);\n-\t\t\t}\n-\t\t}\n \t}\n }\n "
      },
      {
        "sha": "b3e2493be19546c0cdcc167f5194d5737d1856a7",
        "filename": "lib/optimize/RemoveParentModulesPlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 21,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/7036ec488b3f5228df74ad9816262960b35c1826/lib%2Foptimize%2FRemoveParentModulesPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7036ec488b3f5228df74ad9816262960b35c1826/lib%2Foptimize%2FRemoveParentModulesPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FRemoveParentModulesPlugin.js?ref=7036ec488b3f5228df74ad9816262960b35c1826",
        "patch": "@@ -7,23 +7,6 @@\n const Queue = require(\"../util/Queue\");\n const { intersect } = require(\"../util/SetHelpers\");\n \n-const getParentChunksWithModule = (currentChunk, module) => {\n-\tconst chunks = [];\n-\tconst stack = new Set(currentChunk.parentsIterable);\n-\n-\tfor (const chunk of stack) {\n-\t\tif (chunk.containsModule(module)) {\n-\t\t\tchunks.push(chunk);\n-\t\t} else {\n-\t\t\tfor (const parent of chunk.parentsIterable) {\n-\t\t\t\tstack.add(parent);\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\treturn chunks;\n-};\n-\n class RemoveParentModulesPlugin {\n \tapply(compiler) {\n \t\tcompiler.hooks.compilation.tap(\"RemoveParentModulesPlugin\", compilation => {\n@@ -105,10 +88,6 @@ class RemoveParentModulesPlugin {\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (const module of toRemove) {\n-\t\t\t\t\t\tmodule.rewriteChunkInReasons(\n-\t\t\t\t\t\t\tchunk,\n-\t\t\t\t\t\t\tgetParentChunksWithModule(chunk, module)\n-\t\t\t\t\t\t);\n \t\t\t\t\t\tchunk.removeModule(module);\n \t\t\t\t\t}\n \t\t\t\t}"
      },
      {
        "sha": "d1b26e8733d7b5fde9c573d777a58fad5a6484fd",
        "filename": "lib/optimize/SplitChunksPlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/7036ec488b3f5228df74ad9816262960b35c1826/lib%2Foptimize%2FSplitChunksPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7036ec488b3f5228df74ad9816262960b35c1826/lib%2Foptimize%2FSplitChunksPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSplitChunksPlugin.js?ref=7036ec488b3f5228df74ad9816262960b35c1826",
        "patch": "@@ -736,15 +736,13 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\t// Remove module from used chunks\n \t\t\t\t\t\t\t\tfor (const chunk of usedChunks) {\n \t\t\t\t\t\t\t\t\tchunk.removeModule(module);\n-\t\t\t\t\t\t\t\t\tmodule.rewriteChunkInReasons(chunk, [newChunk]);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t// Remove all modules from used chunks\n \t\t\t\t\t\t\tfor (const module of item.modules) {\n \t\t\t\t\t\t\t\tfor (const chunk of usedChunks) {\n \t\t\t\t\t\t\t\t\tchunk.removeModule(module);\n-\t\t\t\t\t\t\t\t\tmodule.rewriteChunkInReasons(chunk, [newChunk]);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n@@ -846,7 +844,6 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\t\t\tGraphHelpers.connectChunkAndModule(newPart, module);\n \t\t\t\t\t\t\t\t\t// Remove module from used chunks\n \t\t\t\t\t\t\t\t\tchunk.removeModule(module);\n-\t\t\t\t\t\t\t\t\tmodule.rewriteChunkInReasons(chunk, [newPart]);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t// change the chunk to be a part"
      },
      {
        "sha": "56a6cc25c0160afd3a81d7c0f4c587c4da814543",
        "filename": "test/ModuleReason.unittest.js",
        "status": "removed",
        "additions": 0,
        "deletions": 60,
        "changes": 60,
        "blob_url": "https://github.com/webpack/webpack/blob/66d3f319a645eea796e496f57e98a3fe68c6087a/test%2FModuleReason.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66d3f319a645eea796e496f57e98a3fe68c6087a/test%2FModuleReason.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FModuleReason.unittest.js?ref=66d3f319a645eea796e496f57e98a3fe68c6087a",
        "patch": "@@ -1,60 +0,0 @@\n-\"use strict\";\n-\n-const Module = require(\"../lib/Module\");\n-const Chunk = require(\"../lib/Chunk\");\n-const Dependency = require(\"../lib/Dependency\");\n-const ModuleReason = require(\"../lib/ModuleReason\");\n-\n-describe(\"ModuleReason\", () => {\n-\tlet myModule;\n-\tlet myDependency;\n-\tlet myModuleReason;\n-\tlet myChunk;\n-\tlet myChunk2;\n-\n-\tbeforeEach(() => {\n-\t\tmyModule = new Module();\n-\t\tmyDependency = new Dependency();\n-\t\tmyChunk = new Chunk(\"chunk-test\", \"module-test\", \"loc-test\");\n-\t\tmyChunk2 = new Chunk(\"chunk-test\", \"module-test\", \"loc-test\");\n-\n-\t\tmyModuleReason = new ModuleReason(myModule, myDependency);\n-\t});\n-\n-\tdescribe(\"hasChunk\", () => {\n-\t\tit(\"returns false when chunk is not present\", () => {\n-\t\t\texpect(myModuleReason.hasChunk(myChunk)).toBe(false);\n-\t\t});\n-\n-\t\tit(\"returns true when chunk is present\", () => {\n-\t\t\tmyModuleReason.module.addChunk(myChunk);\n-\t\t\texpect(myModuleReason.hasChunk(myChunk)).toBe(true);\n-\t\t});\n-\t});\n-\n-\tdescribe(\"rewriteChunks\", () => {\n-\t\tit(\"if old chunk is present, it is replaced with new chunks\", () => {\n-\t\t\tmyModuleReason.module.addChunk(myChunk);\n-\t\t\tmyModuleReason.rewriteChunks(myChunk, [myChunk2]);\n-\n-\t\t\texpect(myModuleReason.hasChunk(myChunk)).toBe(false);\n-\t\t\texpect(myModuleReason.hasChunk(myChunk2)).toBe(true);\n-\t\t});\n-\n-\t\tit(\"if old chunk is not present, new chunks are not added\", () => {\n-\t\t\tmyModuleReason.rewriteChunks(myChunk, [myChunk2]);\n-\n-\t\t\texpect(myModuleReason.hasChunk(myChunk)).toBe(false);\n-\t\t\texpect(myModuleReason.hasChunk(myChunk2)).toBe(false);\n-\t\t});\n-\n-\t\tit(\"if already rewritten chunk is present, it is replaced with new chunks\", () => {\n-\t\t\tmyModuleReason.module.addChunk(myChunk);\n-\t\t\tmyModuleReason.rewriteChunks(myChunk, [myChunk2]);\n-\t\t\tmyModuleReason.rewriteChunks(myChunk2, [myChunk]);\n-\n-\t\t\texpect(myModuleReason.hasChunk(myChunk)).toBe(true);\n-\t\t\texpect(myModuleReason.hasChunk(myChunk2)).toBe(false);\n-\t\t});\n-\t});\n-});"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/6904",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/6904/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/6904/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/6904/events",
    "html_url": "https://github.com/webpack/webpack/pull/6904",
    "id": 309739933,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTc4MzE3Mzc2",
    "number": 6904,
    "title": "avoid walking scopes multiple times for performance reasons",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-03-29T12:44:11Z",
    "updated_at": "2018-04-04T09:29:52Z",
    "closed_at": "2018-04-04T09:29:43Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/6904",
      "html_url": "https://github.com/webpack/webpack/pull/6904",
      "diff_url": "https://github.com/webpack/webpack/pull/6904.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/6904.patch",
      "merged_at": "2018-04-04T09:29:43Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nn/a\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\navoid walking scopes multiple times for performance reasons\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/6904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/6904/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "480f227598516f546ba0ac993d42e50f6e542296",
        "filename": "lib/optimize/ConcatenatedModule.js",
        "status": "modified",
        "additions": 64,
        "deletions": 18,
        "changes": 82,
        "blob_url": "https://github.com/webpack/webpack/blob/2fa104f73a78890162186a87708110e3eec33d1a/lib%2Foptimize%2FConcatenatedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2fa104f73a78890162186a87708110e3eec33d1a/lib%2Foptimize%2FConcatenatedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FConcatenatedModule.js?ref=2fa104f73a78890162186a87708110e3eec33d1a",
        "patch": "@@ -168,17 +168,29 @@ const getFinalName = (\n \t}\n };\n \n-const getSymbolsFromScope = (s, untilScope) => {\n-\tconst allUsedNames = new Set();\n+const addScopeSymbols1 = (s, nameSet, scopeSet) => {\n \tlet scope = s;\n \twhile (scope) {\n+\t\tif (scopeSet.has(scope)) break;\n+\t\tscopeSet.add(scope);\n \t\tfor (const variable of scope.variables) {\n-\t\t\tallUsedNames.add(variable.name);\n+\t\t\tnameSet.add(variable.name);\n+\t\t}\n+\t\tscope = scope.upper;\n+\t}\n+};\n+\n+const addScopeSymbols2 = (s, nameSet, scopeSet1, scopeSet2) => {\n+\tlet scope = s;\n+\twhile (scope) {\n+\t\tif (scopeSet1.has(scope)) break;\n+\t\tif (scopeSet2.has(scope)) break;\n+\t\tscopeSet1.add(scope);\n+\t\tfor (const variable of scope.variables) {\n+\t\t\tnameSet.add(variable.name);\n \t\t}\n-\t\tif (untilScope === scope) break;\n \t\tscope = scope.upper;\n \t}\n-\treturn allUsedNames;\n };\n \n const getAllReferences = variable => {\n@@ -196,11 +208,6 @@ const getAllReferences = variable => {\n \treturn set;\n };\n \n-const reduceSet = (a, b) => {\n-\tfor (const item of b) a.add(item);\n-\treturn a;\n-};\n-\n const getPathInAst = (ast, node) => {\n \tif (ast === node) {\n \t\treturn [];\n@@ -816,8 +823,31 @@ class ConcatenatedModule extends Module {\n \t\t\t\"onsubmit\"\n \t\t]);\n \n+\t\t// Set of already checked scopes\n+\t\tconst alreadyCheckedScopes = new Set();\n+\n \t\t// get all global names\n \t\tfor (const info of modulesWithInfo) {\n+\t\t\tconst superClassExpressions = [];\n+\n+\t\t\t// ignore symbols from moduleScope\n+\t\t\tif (info.moduleScope) {\n+\t\t\t\talreadyCheckedScopes.add(info.moduleScope);\n+\n+\t\t\t\t// The super class expression in class scopes behaves weird\n+\t\t\t\t// We store ranges of all super class expressions to make\n+\t\t\t\t// renaming to work correctly\n+\t\t\t\tfor (const childScope of info.moduleScope.childScopes) {\n+\t\t\t\t\tif (childScope.type !== \"class\") continue;\n+\t\t\t\t\tif (!childScope.block.superClass) continue;\n+\t\t\t\t\tsuperClassExpressions.push({\n+\t\t\t\t\t\trange: childScope.block.superClass.range,\n+\t\t\t\t\t\tvariables: childScope.variables\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t// add global symbols\n \t\t\tif (info.globalScope) {\n \t\t\t\tfor (const reference of info.globalScope.through) {\n \t\t\t\t\tconst name = reference.identifier.name;\n@@ -826,12 +856,21 @@ class ConcatenatedModule extends Module {\n \t\t\t\t\t\t\tname\n \t\t\t\t\t\t)\n \t\t\t\t\t) {\n-\t\t\t\t\t\tfor (const s of getSymbolsFromScope(\n-\t\t\t\t\t\t\treference.from,\n-\t\t\t\t\t\t\tinfo.moduleScope\n-\t\t\t\t\t\t)) {\n-\t\t\t\t\t\t\tallUsedNames.add(s);\n+\t\t\t\t\t\tfor (const expr of superClassExpressions) {\n+\t\t\t\t\t\t\tif (\n+\t\t\t\t\t\t\t\texpr.range[0] <= reference.identifier.range[0] &&\n+\t\t\t\t\t\t\t\texpr.range[1] >= reference.identifier.range[1]\n+\t\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t\tfor (const variable of expr.variables) {\n+\t\t\t\t\t\t\t\t\tallUsedNames.add(variable.name);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n+\t\t\t\t\t\taddScopeSymbols1(\n+\t\t\t\t\t\t\treference.from,\n+\t\t\t\t\t\t\tallUsedNames,\n+\t\t\t\t\t\t\talreadyCheckedScopes\n+\t\t\t\t\t\t);\n \t\t\t\t\t} else {\n \t\t\t\t\t\tallUsedNames.add(name);\n \t\t\t\t\t}\n@@ -856,9 +895,16 @@ class ConcatenatedModule extends Module {\n \t\t\t\t\t\tconst name = variable.name;\n \t\t\t\t\t\tif (allUsedNames.has(name)) {\n \t\t\t\t\t\t\tconst references = getAllReferences(variable);\n-\t\t\t\t\t\t\tconst symbolsInReferences = references\n-\t\t\t\t\t\t\t\t.map(ref => getSymbolsFromScope(ref.from, info.moduleScope))\n-\t\t\t\t\t\t\t\t.reduce(reduceSet, new Set());\n+\t\t\t\t\t\t\tconst symbolsInReferences = new Set();\n+\t\t\t\t\t\t\tconst alreadyCheckedInnerScopes = new Set();\n+\t\t\t\t\t\t\tfor (const ref of references) {\n+\t\t\t\t\t\t\t\taddScopeSymbols2(\n+\t\t\t\t\t\t\t\t\tref.from,\n+\t\t\t\t\t\t\t\t\tsymbolsInReferences,\n+\t\t\t\t\t\t\t\t\talreadyCheckedInnerScopes,\n+\t\t\t\t\t\t\t\t\talreadyCheckedScopes\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tconst newName = this.findNewName(\n \t\t\t\t\t\t\t\tname,\n \t\t\t\t\t\t\t\tallUsedNames,"
      },
      {
        "sha": "d38cc09474081ae85168e9f62f9330aa4782b7da",
        "filename": "test/cases/scope-hoisting/renaming-4967/file1.js",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/2fa104f73a78890162186a87708110e3eec33d1a/test%2Fcases%2Fscope-hoisting%2Frenaming-4967%2Ffile1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2fa104f73a78890162186a87708110e3eec33d1a/test%2Fcases%2Fscope-hoisting%2Frenaming-4967%2Ffile1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Fscope-hoisting%2Frenaming-4967%2Ffile1.js?ref=2fa104f73a78890162186a87708110e3eec33d1a",
        "patch": "@@ -6,5 +6,15 @@ export function test() {\n \tfunction file1_js_a() {\n \t\treturn \"fail\";\n \t}\n+\tfunction file1_a() {\n+\t\treturn \"fail\";\n+\t}\n \treturn a();\n }\n+\n+function renaming_4967_file1_js_a() {\n+\treturn \"fail\";\n+}\n+function renaming_4967_file1_a() {\n+\treturn \"fail\";\n+}"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/6510",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/6510/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/6510/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/6510/events",
    "html_url": "https://github.com/webpack/webpack/pull/6510",
    "id": 297990888,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5Nzc1MzE4",
    "number": 6510,
    "title": "improve performance of chunk splitting combinations",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2018-02-17T08:59:49Z",
    "updated_at": "2018-02-17T10:03:37Z",
    "closed_at": "2018-02-17T10:03:33Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/6510",
      "html_url": "https://github.com/webpack/webpack/pull/6510",
      "diff_url": "https://github.com/webpack/webpack/pull/6510.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/6510.patch",
      "merged_at": "2018-02-17T10:03:33Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nn/a\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nsort parents, children, siblings in stats \r\nimprove way of getting combinations of chunks \r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/6510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/6510/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "0347250e7b8e2896702194a4832c215ff4d8433f",
        "filename": "lib/Stats.js",
        "status": "modified",
        "additions": 14,
        "deletions": 4,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/lib%2FStats.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/lib%2FStats.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FStats.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -448,9 +448,9 @@ class Stats {\n \t\t\t\t\tnames: chunk.name ? [chunk.name] : [],\n \t\t\t\t\tfiles: chunk.files.slice(),\n \t\t\t\t\thash: chunk.renderedHash,\n-\t\t\t\t\tsiblings: Array.from(siblings),\n-\t\t\t\t\tparents: Array.from(parents),\n-\t\t\t\t\tchildren: Array.from(children)\n+\t\t\t\t\tsiblings: Array.from(siblings).sort(),\n+\t\t\t\t\tparents: Array.from(parents).sort(),\n+\t\t\t\t\tchildren: Array.from(children).sort()\n \t\t\t\t};\n \t\t\t\tif(showChunkModules) {\n \t\t\t\t\tobj.modules = chunk\n@@ -472,7 +472,17 @@ class Stats {\n \t\t\t\t\t\t\tloc: formatLocation(origin.loc),\n \t\t\t\t\t\t\trequest: origin.request,\n \t\t\t\t\t\t\treasons: origin.reasons || []\n-\t\t\t\t\t\t}));\n+\t\t\t\t\t\t})).sort((a, b) => {\n+\t\t\t\t\t\t\tif(typeof a.moduleId === \"number\" && typeof b.moduleId !== \"number\") return 1;\n+\t\t\t\t\t\t\tif(typeof a.moduleId !== \"number\" && typeof b.moduleId === \"number\") return -1;\n+\t\t\t\t\t\t\tif(typeof a.moduleId === \"number\" && typeof b.moduleId === \"number\") {\n+\t\t\t\t\t\t\t\tconst diffId = a.moduleId - b.moduleId;\n+\t\t\t\t\t\t\t\tif(diffId !== 0) return diffId;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tif(a.loc < b.loc) return -1;\n+\t\t\t\t\t\t\tif(a.loc > b.loc) return 1;\n+\t\t\t\t\t\t\treturn 0;\n+\t\t\t\t\t\t});\n \t\t\t\t}\n \t\t\t\treturn obj;\n \t\t\t});"
      },
      {
        "sha": "a3b5ee65a0f636d6b5c4cc85fb33d9c66652d110",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -168,7 +168,6 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\tthis.set(\"optimization.usedExports\", \"make\", options => isProductionLikeMode(options));\n \t\tthis.set(\"optimization.concatenateModules\", \"make\", options => isProductionLikeMode(options));\n \t\tthis.set(\"optimization.splitChunks\", {});\n-\t\tthis.set(\"optimization.splitChunks.maxComplexity\", \"make\", options => isProductionLikeMode(options) ? 3 : 1);\n \t\tthis.set(\"optimization.splitChunks.chunks\", \"async\");\n \t\tthis.set(\"optimization.splitChunks.minSize\", 30000);\n \t\tthis.set(\"optimization.splitChunks.minChunks\", 1);"
      },
      {
        "sha": "90264ca13030aa0f4f2b90b73d00e8f8020b3886",
        "filename": "lib/optimize/SplitChunksPlugin.js",
        "status": "modified",
        "additions": 28,
        "deletions": 26,
        "changes": 54,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/lib%2Foptimize%2FSplitChunksPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/lib%2Foptimize%2FSplitChunksPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FSplitChunksPlugin.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -7,6 +7,7 @@\n const crypto = require(\"crypto\");\n const SortableSet = require(\"../util/SortableSet\");\n const GraphHelpers = require(\"../GraphHelpers\");\n+const isSubset = require(\"../util/SetHelpers\").isSubset;\n \n const hashFilename = (name) => {\n \treturn crypto.createHash(\"md5\").update(name).digest(\"hex\").slice(0, 8);\n@@ -40,23 +41,6 @@ const isOverlap = (a, b) => {\n \treturn false;\n };\n \n-const getCombinations = (array, maxDepth) => {\n-\tconst results = [];\n-\tgetCombinationsInteral(array, maxDepth, results);\n-\treturn results;\n-};\n-\n-const getCombinationsInteral = (array, maxDepth, results) => {\n-\tresults.push(array);\n-\tif(maxDepth === 0 || array.length === 1) {\n-\t\treturn;\n-\t}\n-\tfor(let i = 0; i < array.length; i++) {\n-\t\tconst newArray = array.slice(0, i).concat(array.slice(i + 1, array.length));\n-\t\tgetCombinationsInteral(newArray, maxDepth - 1, results);\n-\t}\n-};\n-\n const compareEntries = (a, b) => {\n \t// 1. by priority\n \tconst diffPriority = a.cacheGroup.priority - b.cacheGroup.priority;\n@@ -97,7 +81,6 @@ module.exports = class SplitChunksPlugin {\n \n \tstatic normalizeOptions(options) {\n \t\treturn {\n-\t\t\tmaxComplexity: options.maxComplexity || 0,\n \t\t\tchunks: options.chunks || \"all\",\n \t\t\tminSize: options.minSize || 0,\n \t\t\tminChunks: options.minChunks || 1,\n@@ -227,6 +210,25 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\tfor(const chunk of chunks) {\n \t\t\t\t\tindexMap.set(chunk, index++);\n \t\t\t\t}\n+\t\t\t\tconst getKey = chunks => {\n+\t\t\t\t\treturn Array.from(chunks, c => indexMap.get(c)).sort().join();\n+\t\t\t\t};\n+\t\t\t\t// Create a list of possible combinations\n+\t\t\t\tconst chunkSetsInGraph = new Map(); // Map<string, Set<Chunk>>\n+\t\t\t\tfor(const module of compilation.modules) {\n+\t\t\t\t\tconst chunkIndices = getKey(module.chunksIterable);\n+\t\t\t\t\tchunkSetsInGraph.set(chunkIndices, new Set(module.chunksIterable));\n+\t\t\t\t}\n+\t\t\t\tconst combinations = new Map(); // Map<string, Set<Chunk>[]>\n+\t\t\t\tfor(const [key, chunksSet] of chunkSetsInGraph) {\n+\t\t\t\t\tvar array = [];\n+\t\t\t\t\tfor(const set of chunkSetsInGraph.values()) {\n+\t\t\t\t\t\tif(isSubset(chunksSet, set)) {\n+\t\t\t\t\t\t\tarray.push(set);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tcombinations.set(key, array);\n+\t\t\t\t}\n \t\t\t\t// Map a list of chunks to a list of modules\n \t\t\t\t// For the key the chunk \"index\" is used, the value is a SortableSet of modules\n \t\t\t\tconst chunksInfoMap = new Map();\n@@ -249,24 +251,24 @@ module.exports = class SplitChunksPlugin {\n \t\t\t\t\t\t\tgetName: cacheGroupSource.getName !== undefined ? cacheGroupSource.getName : this.options.getName,\n \t\t\t\t\t\t\treuseExistingChunk: cacheGroupSource.reuseExistingChunk\n \t\t\t\t\t\t};\n-\t\t\t\t\t\t// Select chunks by configuration\n-\t\t\t\t\t\tconst maxSelectedChunks = cacheGroup.chunks === \"initial\" ? chunks.filter(chunk => chunk.canBeInitial()) :\n-\t\t\t\t\t\t\tcacheGroup.chunks === \"async\" ? chunks.filter(chunk => !chunk.canBeInitial()) :\n-\t\t\t\t\t\t\tchunks;\n-\t\t\t\t\t\t// For all (nearly all) combination of chunk selection\n-\t\t\t\t\t\tfor(const selectedChunks of getCombinations(maxSelectedChunks, this.options.maxComplexity)) {\n+\t\t\t\t\t\t// For all combination of chunk selection\n+\t\t\t\t\t\tfor(const chunkCombination of combinations.get(getKey(chunks))) {\n \t\t\t\t\t\t\t// Get indices of chunks in which this module occurs\n-\t\t\t\t\t\t\tconst chunkIndices = selectedChunks.map(chunk => indexMap.get(chunk));\n+\t\t\t\t\t\t\tconst chunkIndices = Array.from(chunkCombination, chunk => indexMap.get(chunk));\n \t\t\t\t\t\t\t// Break if minimum number of chunks is not reached\n \t\t\t\t\t\t\tif(chunkIndices.length < cacheGroup.minChunks)\n \t\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t\t// Select chunks by configuration\n+\t\t\t\t\t\t\tconst selectedChunks = cacheGroup.chunks === \"initial\" ? Array.from(chunkCombination).filter(chunk => chunk.canBeInitial()) :\n+\t\t\t\t\t\t\t\tcacheGroup.chunks === \"async\" ? Array.from(chunkCombination).filter(chunk => !chunk.canBeInitial()) :\n+\t\t\t\t\t\t\t\tArray.from(chunkCombination);\n \t\t\t\t\t\t\t// Determine name for split chunk\n \t\t\t\t\t\t\tconst name = cacheGroup.getName(module, selectedChunks, cacheGroup.key);\n \t\t\t\t\t\t\t// Create key for maps\n \t\t\t\t\t\t\t// When it has a name we use the name as key\n \t\t\t\t\t\t\t// Elsewise we create the key from chunks and cache group key\n \t\t\t\t\t\t\t// This automatically merges equal names\n-\t\t\t\t\t\t\tconst chunksKey = chunkIndices.sort().join();\n+\t\t\t\t\t\t\tconst chunksKey = getKey(selectedChunks);\n \t\t\t\t\t\t\tconst key = name && `name:${name}` ||\n \t\t\t\t\t\t\t\t`chunks:${chunksKey} key:${cacheGroup.key}`;\n \t\t\t\t\t\t\t// Add module to maps"
      },
      {
        "sha": "d134a6fd2da0675ed2a1eb4a03839e1c418504bd",
        "filename": "lib/util/SetHelpers.js",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/lib%2Futil%2FSetHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/lib%2Futil%2FSetHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FSetHelpers.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -24,3 +24,11 @@ exports.intersect = sets => {\n \t}\n \treturn current;\n };\n+\n+exports.isSubset = (bigSet, smallSet) => {\n+\tif(bigSet.size < smallSet.size) return false;\n+\tfor(const item of smallSet) {\n+\t\tif(!bigSet.has(item)) return false;\n+\t}\n+\treturn true;\n+};"
      },
      {
        "sha": "93969552e06836c7e05ca6240548dfe9d5a6d544",
        "filename": "schemas/WebpackOptions.json",
        "status": "modified",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/schemas%2FWebpackOptions.json",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/schemas%2FWebpackOptions.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FWebpackOptions.json?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1335,11 +1335,6 @@\n               \"type\": \"object\",\n               \"additionalProperties\": false,\n               \"properties\": {\n-                \"maxComplexity\": {\n-                  \"description\": \"Limits the algorithmic complexity\",\n-                  \"type\": \"number\",\n-                  \"minimum\": 0\n-                },\n                 \"chunks\": {\n                   \"description\": \"Select chunks for determining shared modules (defaults to \\\"async\\\", \\\"initial\\\" and \\\"all\\\" requires adding these chunks to the HTML)\",\n                   \"enum\": ["
      },
      {
        "sha": "1b54686d85335fe867892d9c0226aea5d1b1c165",
        "filename": "test/statsCases/aggressive-splitting-entry/expected.txt",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -9,19 +9,19 @@ Child fitting:\n     4c485a9e1dc58eedfbd1.js  1.94 KiB       2  [emitted]  \n     337c857e3e34cc5ef72d.js  1.94 KiB       3  [emitted]  \n     Entrypoint main = 4c485a9e1dc58eedfbd1.js 337c857e3e34cc5ef72d.js a65f8652fd07c12d0049.js\n-    chunk    {0} 706f97eb6a2b8fb1a17e.js 916 bytes <{2}> <{3}> <{1}>\n+    chunk    {0} 706f97eb6a2b8fb1a17e.js 916 bytes <{1}> <{2}> <{3}>\n         > ./g [4] ./index.js 7:0-13\n         [7] ./g.js 916 bytes {0} [built]\n     chunk    {1} a65f8652fd07c12d0049.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n         > ./index main\n         [3] ./e.js 899 bytes {1} [built]\n         [4] ./index.js 111 bytes {1} [built]\n         [6] ./f.js 900 bytes {1} [built]\n-    chunk    {2} 4c485a9e1dc58eedfbd1.js 1.76 KiB ={3}= ={1}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {2} 4c485a9e1dc58eedfbd1.js 1.76 KiB ={1}= ={3}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n         [0] ./b.js 899 bytes {2} [built]\n         [5] ./a.js 899 bytes {2} [built]\n-    chunk    {3} 337c857e3e34cc5ef72d.js 1.76 KiB ={2}= ={1}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {3} 337c857e3e34cc5ef72d.js 1.76 KiB ={1}= ={2}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n         [1] ./c.js 899 bytes {3} [built]\n         [2] ./d.js 899 bytes {3} [built]\n@@ -35,19 +35,19 @@ Child content-change:\n     4c485a9e1dc58eedfbd1.js  1.94 KiB       2  [emitted]  \n     337c857e3e34cc5ef72d.js  1.94 KiB       3  [emitted]  \n     Entrypoint main = 4c485a9e1dc58eedfbd1.js 337c857e3e34cc5ef72d.js a65f8652fd07c12d0049.js\n-    chunk    {0} 706f97eb6a2b8fb1a17e.js 916 bytes <{2}> <{3}> <{1}>\n+    chunk    {0} 706f97eb6a2b8fb1a17e.js 916 bytes <{1}> <{2}> <{3}>\n         > ./g [4] ./index.js 7:0-13\n         [7] ./g.js 916 bytes {0} [built]\n     chunk    {1} a65f8652fd07c12d0049.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n         > ./index main\n         [3] ./e.js 899 bytes {1} [built]\n         [4] ./index.js 111 bytes {1} [built]\n         [6] ./f.js 900 bytes {1} [built]\n-    chunk    {2} 4c485a9e1dc58eedfbd1.js 1.76 KiB ={3}= ={1}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {2} 4c485a9e1dc58eedfbd1.js 1.76 KiB ={1}= ={3}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n         [0] ./b.js 899 bytes {2} [built]\n         [5] ./a.js 899 bytes {2} [built]\n-    chunk    {3} 337c857e3e34cc5ef72d.js 1.76 KiB ={2}= ={1}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n+    chunk    {3} 337c857e3e34cc5ef72d.js 1.76 KiB ={1}= ={2}= >{0}< [initial] [rendered] [recorded] aggressive splitted\n         > ./index main\n         [1] ./c.js 899 bytes {3} [built]\n         [2] ./d.js 899 bytes {3} [built]\n\\ No newline at end of file"
      },
      {
        "sha": "f6ce02e03382394dea9cc88b4fb2beb8c8e5dcd7",
        "filename": "test/statsCases/aggressive-splitting-on-demand/expected.txt",
        "status": "modified",
        "additions": 9,
        "deletions": 9,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -14,24 +14,24 @@ a28f1d7d7367daaaf00a.js     1 KiB       7  [emitted]\n 9ac0014114101e5f7d2c.js  1.94 KiB    9, 1  [emitted]  \n f507739d37522e79688a.js  8.38 KiB      10  [emitted]  main\n Entrypoint main = f507739d37522e79688a.js\n-chunk    {0} ba1a8dd27d611254d495.js 1.76 KiB <{10}> ={2}= ={3}= ={9}= ={7}= ={1}= [recorded] aggressive splitted\n-    > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n+chunk    {0} ba1a8dd27d611254d495.js 1.76 KiB <{10}> ={1}= ={2}= ={3}= ={7}= ={9}= [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n+    > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n     [0] ./b.js 899 bytes {0} {5} [built]\n     [1] ./d.js 899 bytes {0} {8} [built]\n-chunk    {1} f4818881f9e5138ad8ac.js 899 bytes <{10}> ={8}= ={0}= ={2}=\n+chunk    {1} f4818881f9e5138ad8ac.js 899 bytes <{10}> ={0}= ={2}= ={8}=\n     > ./c ./d ./e [11] ./index.js 3:0-30\n     > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n     [2] ./e.js 899 bytes {1} {9} [built]\n-chunk    {2} 81950df8ced1664c8037.js 1.76 KiB <{10}> ={0}= ={3}= ={9}= ={7}= ={1}= ={6}= [recorded] aggressive splitted\n-    > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n-    > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n+chunk    {2} 81950df8ced1664c8037.js 1.76 KiB <{10}> ={0}= ={1}= ={3}= ={6}= ={7}= ={9}= [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k [11] ./index.js 4:0-51\n+    > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n+    > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n     [3] ./f.js 899 bytes {2} [built]\n     [4] ./g.js 901 bytes {2} [built]\n-chunk    {3} 2a7cf3b38962fac54bb9.js 1.76 KiB <{10}> ={0}= ={2}= ={9}= ={7}= ={6}= [recorded] aggressive splitted\n-    > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n+chunk    {3} 2a7cf3b38962fac54bb9.js 1.76 KiB <{10}> ={0}= ={2}= ={6}= ={7}= ={9}= [recorded] aggressive splitted\n     > ./f ./g ./h ./i ./j ./k [11] ./index.js 4:0-51\n+    > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n     [6] ./h.js 899 bytes {3} [built]\n     [7] ./i.js 899 bytes {3} [built]\n chunk    {4} acfde31fdfbd1bdb41c4.js 899 bytes <{10}>\n@@ -56,6 +56,6 @@ chunk    {9} 9ac0014114101e5f7d2c.js 1.76 KiB <{10}> ={0}= ={2}= ={3}= ={7}= [re\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n     [2] ./e.js 899 bytes {1} {9} [built]\n     [8] ./j.js 901 bytes {6} {9} [built]\n-chunk   {10} f507739d37522e79688a.js (main) 248 bytes >{0}< >{2}< >{1}< >{3}< >{9}< >{7}< >{6}< >{4}< >{5}< >{8}< [entry]\n+chunk   {10} f507739d37522e79688a.js (main) 248 bytes >{0}< >{1}< >{2}< >{3}< >{4}< >{5}< >{6}< >{7}< >{8}< >{9}< [entry]\n     > ./index main\n    [11] ./index.js 248 bytes {10} [built]\n\\ No newline at end of file"
      },
      {
        "sha": "7115649365ff742096f96a3f50b973b9ffa08661",
        "filename": "test/statsCases/async-commons-chunk-auto/expected.txt",
        "status": "modified",
        "additions": 56,
        "deletions": 56,
        "changes": 112,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fasync-commons-chunk-auto%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fasync-commons-chunk-auto%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fasync-commons-chunk-auto%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -62,45 +62,45 @@ Child default:\n     Entrypoint a = default/a.js\n     Entrypoint b = default/b.js\n     Entrypoint c = default/c.js\n-    chunk    {0} default/vendors~async-a~async-b~async-c.js (vendors~async-a~async-b~async-c) 20 bytes <{9}> ={8}= ={1}= ={2}= ={7}= ={3}= ={6}= ={5}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b~async-c)\n-        > ./c [8] ./index.js 3:0-47\n-        > ./b [8] ./index.js 2:0-47\n+    chunk    {0} default/vendors~async-a~async-b~async-c.js (vendors~async-a~async-b~async-c) 20 bytes <{9}> ={1}= ={2}= ={3}= ={5}= ={6}= ={7}= ={8}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b~async-c)\n         > ./a [8] ./index.js 1:0-47\n-        [1] ./node_modules/x.js 20 bytes {0} {10} {11} {12} [built]\n-    chunk    {1} default/async-a~async-b~async-c.js (async-a~async-b~async-c) 20 bytes <{9}> ={0}= ={8}= ={2}= ={7}= ={3}= ={6}= ={5}= >{2}< >{4}< [rendered] split chunk (cache group: default) (name: async-a~async-b~async-c)\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n+        [1] ./node_modules/x.js 20 bytes {0} {10} {11} {12} [built]\n+    chunk    {1} default/async-a~async-b~async-c.js (async-a~async-b~async-c) 20 bytes <{9}> ={0}= ={2}= ={3}= ={5}= ={6}= ={7}= ={8}= >{2}< >{4}< [rendered] split chunk (cache group: default) (name: async-a~async-b~async-c)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [0] ./d.js 20 bytes {1} {10} {11} {12} [built]\n-    chunk    {2} default/async-b~async-c~async-g.js (async-b~async-c~async-g) 20 bytes <{0}> <{3}> <{1}> <{5}> <{10}> <{9}> ={4}= ={0}= ={8}= ={1}= ={7}= ={3}= ={6}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g)\n+    chunk    {2} default/async-b~async-c~async-g.js (async-b~async-c~async-g) 20 bytes <{0}> <{1}> <{10}> <{3}> <{5}> <{9}> ={0}= ={1}= ={3}= ={4}= ={6}= ={7}= ={8}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g)\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [2] ./f.js 20 bytes {2} {11} {12} [built]\n-    chunk    {3} default/vendors~async-a~async-b.js (vendors~async-a~async-b) 20 bytes <{9}> ={0}= ={1}= ={2}= ={6}= ={5}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b)\n-        > ./b [8] ./index.js 2:0-47\n+    chunk    {3} default/vendors~async-a~async-b.js (vendors~async-a~async-b) 20 bytes <{9}> ={0}= ={1}= ={2}= ={5}= ={6}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n         [3] ./node_modules/y.js 20 bytes {3} {10} {11} [built]\n-    chunk    {4} default/async-g.js (async-g) 34 bytes <{0}> <{3}> <{1}> <{5}> <{10}> ={2}= [rendered]\n+    chunk    {4} default/async-g.js (async-g) 34 bytes <{0}> <{1}> <{10}> <{3}> <{5}> ={2}= [rendered]\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n         [9] ./g.js 34 bytes {4} [built]\n-    chunk    {5} default/async-a.js (async-a) 156 bytes <{9}> ={0}= ={3}= ={1}= >{2}< >{4}< [rendered]\n+    chunk    {5} default/async-a.js (async-a) 156 bytes <{9}> ={0}= ={1}= ={3}= >{2}< >{4}< [rendered]\n         > ./a [8] ./index.js 1:0-47\n         [7] ./a.js + 1 modules 156 bytes {5} {10} [built]\n             | ./a.js 121 bytes [built]\n             | ./e.js 20 bytes [built]\n-    chunk    {6} default/async-b.js (async-b) 72 bytes <{9}> ={0}= ={3}= ={1}= ={2}= [rendered]\n+    chunk    {6} default/async-b.js (async-b) 72 bytes <{9}> ={0}= ={1}= ={2}= ={3}= [rendered]\n         > ./b [8] ./index.js 2:0-47\n         [5] ./b.js 72 bytes {6} {11} [built]\n-    chunk    {7} default/async-c.js (async-c) 72 bytes <{9}> ={0}= ={8}= ={1}= ={2}= [rendered]\n+    chunk    {7} default/async-c.js (async-c) 72 bytes <{9}> ={0}= ={1}= ={2}= ={8}= [rendered]\n         > ./c [8] ./index.js 3:0-47\n         [6] ./c.js 72 bytes {7} {12} [built]\n     chunk    {8} default/vendors~async-c.js (vendors~async-c) 20 bytes <{9}> ={0}= ={1}= ={2}= ={7}= [rendered] split chunk (cache group: vendors) (name: vendors~async-c)\n         > ./c [8] ./index.js 3:0-47\n         [4] ./node_modules/z.js 20 bytes {8} {12} [built]\n-    chunk    {9} default/main.js (main) 147 bytes >{0}< >{3}< >{1}< >{2}< >{6}< >{5}< >{8}< >{7}< [entry] [rendered]\n+    chunk    {9} default/main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< >{5}< >{6}< >{7}< >{8}< [entry] [rendered]\n         > ./ main\n         [8] ./index.js 147 bytes {9} [built]\n     chunk   {10} default/a.js (a) 216 bytes >{2}< >{4}< [entry] [rendered]\n@@ -157,10 +157,10 @@ Child vendors:\n         [2] ./f.js 20 bytes {0} {2} {3} {7} {8} [built]\n         [4] ./node_modules/z.js 20 bytes {3} {4} [built]\n         [6] ./c.js 72 bytes {3} {8} [built]\n-    chunk    {4} vendors/vendors.js (vendors) 60 bytes ={8}= ={7}= ={6}= >{0}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors)\n-        > ./c c\n-        > ./b b\n+    chunk    {4} vendors/vendors.js (vendors) 60 bytes ={6}= ={7}= ={8}= >{0}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors)\n         > ./a a\n+        > ./b b\n+        > ./c c\n         [1] ./node_modules/x.js 20 bytes {1} {2} {3} {4} [built]\n         [3] ./node_modules/y.js 20 bytes {1} {2} {4} [built]\n         [4] ./node_modules/z.js 20 bytes {3} {4} [built]\n@@ -188,51 +188,51 @@ Child multiple-vendors:\n     Entrypoint a = multiple-vendors/libs-x.js multiple-vendors/vendors~a~async-a~async-b~b.js multiple-vendors/a.js\n     Entrypoint b = multiple-vendors/libs-x.js multiple-vendors/vendors~a~async-a~async-b~b.js multiple-vendors/b.js\n     Entrypoint c = multiple-vendors/libs-x.js multiple-vendors/vendors~async-c~c.js multiple-vendors/c.js\n-    chunk    {0} multiple-vendors/libs-x.js (libs-x) 20 bytes <{9}> ={4}= ={12}= ={3}= ={11}= ={10}= ={1}= ={2}= ={7}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: libs) (name: libs-x)\n-        > ./c c\n-        > ./b b\n+    chunk    {0} multiple-vendors/libs-x.js (libs-x) 20 bytes <{9}> ={1}= ={10}= ={11}= ={12}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: libs) (name: libs-x)\n         > ./a a\n-        > ./c [8] ./index.js 3:0-47\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b b\n+        > ./c c\n         > ./a [8] ./index.js 1:0-47\n-        [2] ./node_modules/x.js 20 bytes {0} [built]\n-    chunk    {1} multiple-vendors/a~async-a~async-b~async-c~b~c.js (a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={0}= ={4}= ={2}= ={7}= ={3}= ={6}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a~async-b~async-c~b~c)\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n+        [2] ./node_modules/x.js 20 bytes {0} [built]\n+    chunk    {1} multiple-vendors/a~async-a~async-b~async-c~b~c.js (a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={0}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a~async-b~async-c~b~c)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [0] ./d.js 20 bytes {1} {10} {11} {12} [built]\n-    chunk    {2} multiple-vendors/async-b~async-c~async-g~b~c.js (async-b~async-c~async-g~b~c) 20 bytes <{0}> <{3}> <{1}> <{8}> <{10}> <{9}> ={5}= ={0}= ={4}= ={1}= ={7}= ={3}= ={6}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~b~c)\n+    chunk    {2} multiple-vendors/async-b~async-c~async-g~b~c.js (async-b~async-c~async-g~b~c) 20 bytes <{0}> <{1}> <{10}> <{3}> <{8}> <{9}> ={0}= ={1}= ={3}= ={4}= ={5}= ={6}= ={7}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~b~c)\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [1] ./f.js 20 bytes {2} {11} {12} [built]\n-    chunk    {3} multiple-vendors/vendors~a~async-a~async-b~b.js (vendors~a~async-a~async-b~b) 20 bytes <{9}> ={0}= ={11}= ={10}= ={1}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~b)\n-        > ./b b\n+    chunk    {3} multiple-vendors/vendors~a~async-a~async-b~b.js (vendors~a~async-a~async-b~b) 20 bytes <{9}> ={0}= ={1}= ={10}= ={11}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~b)\n         > ./a a\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b b\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n         [3] ./node_modules/y.js 20 bytes {3} [built]\n-    chunk    {4} multiple-vendors/vendors~async-c~c.js (vendors~async-c~c) 20 bytes <{9}> ={0}= ={12}= ={1}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~c)\n+    chunk    {4} multiple-vendors/vendors~async-c~c.js (vendors~async-c~c) 20 bytes <{9}> ={0}= ={1}= ={12}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~c)\n         > ./c c\n         > ./c [8] ./index.js 3:0-47\n         [7] ./node_modules/z.js 20 bytes {4} [built]\n-    chunk    {5} multiple-vendors/async-g.js (async-g) 34 bytes <{0}> <{3}> <{1}> <{8}> <{10}> ={2}= [rendered]\n+    chunk    {5} multiple-vendors/async-g.js (async-g) 34 bytes <{0}> <{1}> <{10}> <{3}> <{8}> ={2}= [rendered]\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n         [9] ./g.js 34 bytes {5} [built]\n-    chunk    {6} multiple-vendors/async-b.js (async-b) 72 bytes <{9}> ={0}= ={3}= ={1}= ={2}= [rendered]\n+    chunk    {6} multiple-vendors/async-b.js (async-b) 72 bytes <{9}> ={0}= ={1}= ={2}= ={3}= [rendered]\n         > ./b [8] ./index.js 2:0-47\n         [4] ./b.js 72 bytes {6} {11} [built]\n-    chunk    {7} multiple-vendors/async-c.js (async-c) 72 bytes <{9}> ={0}= ={4}= ={1}= ={2}= [rendered]\n+    chunk    {7} multiple-vendors/async-c.js (async-c) 72 bytes <{9}> ={0}= ={1}= ={2}= ={4}= [rendered]\n         > ./c [8] ./index.js 3:0-47\n         [5] ./c.js 72 bytes {7} {12} [built]\n-    chunk    {8} multiple-vendors/a~async-a.js (a~async-a) 156 bytes <{9}> ={0}= ={3}= ={1}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a)\n+    chunk    {8} multiple-vendors/a~async-a.js (a~async-a) 156 bytes <{9}> ={0}= ={1}= ={3}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a)\n         > ./a [8] ./index.js 1:0-47\n         [6] ./a.js + 1 modules 156 bytes {8} {10} [built]\n             | ./a.js 121 bytes [built]\n             | ./e.js 20 bytes [built]\n-    chunk    {9} multiple-vendors/main.js (main) 147 bytes >{0}< >{3}< >{1}< >{2}< >{6}< >{8}< >{4}< >{7}< [entry] [rendered]\n+    chunk    {9} multiple-vendors/main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< >{4}< >{6}< >{7}< >{8}< [entry] [rendered]\n         > ./ main\n         [8] ./index.js 147 bytes {9} [built]\n     chunk   {10} multiple-vendors/a.js (a) 176 bytes ={0}= ={3}= >{2}< >{5}< [entry] [rendered]\n@@ -256,51 +256,51 @@ Child all:\n     Entrypoint a = all/vendors~a~async-a~async-b~async-c~b~c.js all/vendors~a~async-a~async-b~b.js all/a.js\n     Entrypoint b = all/vendors~a~async-a~async-b~async-c~b~c.js all/vendors~a~async-a~async-b~b.js all/b.js\n     Entrypoint c = all/vendors~a~async-a~async-b~async-c~b~c.js all/vendors~async-c~c.js all/c.js\n-    chunk    {0} all/vendors~a~async-a~async-b~async-c~b~c.js (vendors~a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={4}= ={12}= ={3}= ={11}= ={10}= ={1}= ={2}= ={7}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~async-c~b~c)\n-        > ./c c\n-        > ./b b\n+    chunk    {0} all/vendors~a~async-a~async-b~async-c~b~c.js (vendors~a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={1}= ={10}= ={11}= ={12}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~async-c~b~c)\n         > ./a a\n-        > ./c [8] ./index.js 3:0-47\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b b\n+        > ./c c\n         > ./a [8] ./index.js 1:0-47\n-        [2] ./node_modules/x.js 20 bytes {0} [built]\n-    chunk    {1} all/a~async-a~async-b~async-c~b~c.js (a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={0}= ={4}= ={2}= ={7}= ={3}= ={6}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a~async-b~async-c~b~c)\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n+        [2] ./node_modules/x.js 20 bytes {0} [built]\n+    chunk    {1} all/a~async-a~async-b~async-c~b~c.js (a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={0}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a~async-b~async-c~b~c)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [0] ./d.js 20 bytes {1} {10} {11} {12} [built]\n-    chunk    {2} all/async-b~async-c~async-g~b~c.js (async-b~async-c~async-g~b~c) 20 bytes <{0}> <{3}> <{1}> <{8}> <{10}> <{9}> ={5}= ={0}= ={4}= ={1}= ={7}= ={3}= ={6}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~b~c)\n+    chunk    {2} all/async-b~async-c~async-g~b~c.js (async-b~async-c~async-g~b~c) 20 bytes <{0}> <{1}> <{10}> <{3}> <{8}> <{9}> ={0}= ={1}= ={3}= ={4}= ={5}= ={6}= ={7}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~b~c)\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [1] ./f.js 20 bytes {2} {11} {12} [built]\n-    chunk    {3} all/vendors~a~async-a~async-b~b.js (vendors~a~async-a~async-b~b) 20 bytes <{9}> ={0}= ={11}= ={10}= ={1}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~b)\n-        > ./b b\n+    chunk    {3} all/vendors~a~async-a~async-b~b.js (vendors~a~async-a~async-b~b) 20 bytes <{9}> ={0}= ={1}= ={10}= ={11}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~b)\n         > ./a a\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b b\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n         [3] ./node_modules/y.js 20 bytes {3} [built]\n-    chunk    {4} all/vendors~async-c~c.js (vendors~async-c~c) 20 bytes <{9}> ={0}= ={12}= ={1}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~c)\n+    chunk    {4} all/vendors~async-c~c.js (vendors~async-c~c) 20 bytes <{9}> ={0}= ={1}= ={12}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~c)\n         > ./c c\n         > ./c [8] ./index.js 3:0-47\n         [7] ./node_modules/z.js 20 bytes {4} [built]\n-    chunk    {5} all/async-g.js (async-g) 34 bytes <{0}> <{3}> <{1}> <{8}> <{10}> ={2}= [rendered]\n+    chunk    {5} all/async-g.js (async-g) 34 bytes <{0}> <{1}> <{10}> <{3}> <{8}> ={2}= [rendered]\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n         [9] ./g.js 34 bytes {5} [built]\n-    chunk    {6} all/async-b.js (async-b) 72 bytes <{9}> ={0}= ={3}= ={1}= ={2}= [rendered]\n+    chunk    {6} all/async-b.js (async-b) 72 bytes <{9}> ={0}= ={1}= ={2}= ={3}= [rendered]\n         > ./b [8] ./index.js 2:0-47\n         [4] ./b.js 72 bytes {6} {11} [built]\n-    chunk    {7} all/async-c.js (async-c) 72 bytes <{9}> ={0}= ={4}= ={1}= ={2}= [rendered]\n+    chunk    {7} all/async-c.js (async-c) 72 bytes <{9}> ={0}= ={1}= ={2}= ={4}= [rendered]\n         > ./c [8] ./index.js 3:0-47\n         [5] ./c.js 72 bytes {7} {12} [built]\n-    chunk    {8} all/a~async-a.js (a~async-a) 156 bytes <{9}> ={0}= ={3}= ={1}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a)\n+    chunk    {8} all/a~async-a.js (a~async-a) 156 bytes <{9}> ={0}= ={1}= ={3}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a)\n         > ./a [8] ./index.js 1:0-47\n         [6] ./a.js + 1 modules 156 bytes {8} {10} [built]\n             | ./a.js 121 bytes [built]\n             | ./e.js 20 bytes [built]\n-    chunk    {9} all/main.js (main) 147 bytes >{0}< >{3}< >{1}< >{2}< >{6}< >{8}< >{4}< >{7}< [entry] [rendered]\n+    chunk    {9} all/main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< >{4}< >{6}< >{7}< >{8}< [entry] [rendered]\n         > ./ main\n         [8] ./index.js 147 bytes {9} [built]\n     chunk   {10} all/a.js (a) 176 bytes ={0}= ={3}= >{2}< >{5}< [entry] [rendered]"
      },
      {
        "sha": "d67732917eb1cad50b2aec6a3191194c9c8f1c57",
        "filename": "test/statsCases/async-commons-chunk/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fasync-commons-chunk%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fasync-commons-chunk%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fasync-commons-chunk%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,7 +1,7 @@\n Entrypoint main = main.js\n-chunk    {0} 0.js 21 bytes <{3}> ={2}= ={1}= [rendered] reused as split chunk (cache group: default)\n-    > [3] ./index.js 2:1-5:3\n+chunk    {0} 0.js 21 bytes <{3}> ={1}= ={2}= [rendered] reused as split chunk (cache group: default)\n     > [3] ./index.js 17:1-21:3\n+    > [3] ./index.js 2:1-5:3\n     > ./a ./b [3] ./index.js 9:1-13:3\n     [0] ./a.js 21 bytes {0} [built]\n chunk    {1} 1.js 21 bytes <{3}> ={0}= [rendered]"
      },
      {
        "sha": "52cd46d26520a6abfaf198f30c92350017369168",
        "filename": "test/statsCases/limit-chunk-count-plugin/expected.txt",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Flimit-chunk-count-plugin%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Flimit-chunk-count-plugin%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Flimit-chunk-count-plugin%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -21,7 +21,7 @@ Child 2 chunks:\n     0.bundle.js  912 bytes       0  [emitted]  \n       bundle.js   7.14 KiB       1  [emitted]  main\n     Entrypoint main = bundle.js\n-    chunk    {0} 0.bundle.js 118 bytes <{1}> <{0}> >{0}< [rendered]\n+    chunk    {0} 0.bundle.js 118 bytes <{0}> <{1}> >{0}< [rendered]\n         [0] ./d.js 22 bytes {0} [built]\n         [1] ./e.js 22 bytes {0} [built]\n         [2] ./a.js 22 bytes {0} [built]\n@@ -38,11 +38,11 @@ Child 3 chunks:\n     1.bundle.js  245 bytes       1  [emitted]  \n       bundle.js   7.14 KiB       2  [emitted]  main\n     Entrypoint main = bundle.js\n-    chunk    {0} 0.bundle.js 74 bytes <{2}> <{0}> >{0}< >{1}< [rendered]\n+    chunk    {0} 0.bundle.js 74 bytes <{0}> <{2}> >{0}< >{1}< [rendered]\n         [0] ./d.js 22 bytes {0} [built]\n         [2] ./a.js 22 bytes {0} [built]\n         [4] ./c.js 30 bytes {0} [built]\n-    chunk    {1} 1.bundle.js 44 bytes <{2}> <{0}> [rendered]\n+    chunk    {1} 1.bundle.js 44 bytes <{0}> <{2}> [rendered]\n         [1] ./e.js 22 bytes {1} [built]\n         [3] ./b.js 22 bytes {1} [built]\n     chunk    {2} bundle.js (main) 73 bytes >{0}< >{1}< [entry] [rendered]\n@@ -57,10 +57,10 @@ Child 4 chunks:\n     2.bundle.js  603 bytes       2  [emitted]  \n       bundle.js   7.14 KiB       3  [emitted]  main\n     Entrypoint main = bundle.js\n-    chunk    {0} 0.bundle.js 44 bytes <{3}> <{2}> [rendered]\n+    chunk    {0} 0.bundle.js 44 bytes <{2}> <{3}> [rendered]\n         [0] ./d.js 22 bytes {0} [built]\n         [2] ./a.js 22 bytes {0} [built]\n-    chunk    {1} 1.bundle.js 44 bytes <{3}> <{2}> [rendered]\n+    chunk    {1} 1.bundle.js 44 bytes <{2}> <{3}> [rendered]\n         [1] ./e.js 22 bytes {1} [built]\n         [3] ./b.js 22 bytes {1} [built]\n     chunk    {2} 2.bundle.js 30 bytes <{3}> >{0}< >{1}< [rendered]"
      },
      {
        "sha": "f9a25238a4ce2a85051dab57f67b93b2f54644a1",
        "filename": "test/statsCases/module-deduplication/expected.txt",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -11,13 +11,13 @@ e3.js   8.18 KiB       8  [emitted]  e3\n Entrypoint e1 = e1.js\n Entrypoint e2 = e2.js\n Entrypoint e3 = e3.js\n-chunk    {0} 0.js 37 bytes <{8}> <{7}> [rendered]\n+chunk    {0} 0.js 37 bytes <{7}> <{8}> [rendered]\n     [2] ./d.js 9 bytes {0} {6} [built]\n     [5] ./async1.js 28 bytes {0} {5} [built]\n-chunk    {1} 1.js 37 bytes <{8}> <{6}> [rendered]\n+chunk    {1} 1.js 37 bytes <{6}> <{8}> [rendered]\n     [3] ./f.js 9 bytes {1} {7} [built]\n     [6] ./async2.js 28 bytes {1} {4} [built]\n-chunk    {2} 2.js 37 bytes <{7}> <{6}> [rendered]\n+chunk    {2} 2.js 37 bytes <{6}> <{7}> [rendered]\n     [4] ./h.js 9 bytes {2} {8} [built]\n     [7] ./async3.js 28 bytes {2} {3} [built]\n chunk    {3} 3.js 28 bytes <{8}> [rendered]"
      },
      {
        "sha": "446f4f1c64a5d06bfa3c23c167caf80e0377d23b",
        "filename": "test/statsCases/optimize-chunks/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -11,10 +11,10 @@ cir2 from cir1.js  359 bytes    5, 3  [emitted]  cir2 from cir1\n          chunk.js  190 bytes    6, 7  [emitted]  chunk\n       ac in ab.js  130 bytes       7  [emitted]  ac in ab\n Entrypoint main = main.js\n-chunk    {0} cir1.js (cir1) 81 bytes <{4}> <{3}> <{5}> >{5}< [rendered]\n-    > [8] ./index.js 13:0-54\n+chunk    {0} cir1.js (cir1) 81 bytes <{3}> <{4}> <{5}> >{5}< [rendered]\n     > [3] ./circular2.js 1:0-79\n     > [3] ./circular2.js 1:0-79\n+    > [8] ./index.js 13:0-54\n     [2] ./circular1.js 81 bytes {0} [built]\n chunk    {1} ab.js (ab) 0 bytes <{4}> >{7}< [rendered]\n     > [8] ./index.js 1:0-6:8"
      },
      {
        "sha": "48f0846880bf0851dfeb0689db4b18cac685d968",
        "filename": "test/statsCases/split-chunks-combinations/a.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fa.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,3 +1,3 @@\n-import \"./d\";\n-import \"./e\";\n+import \"./x\";\n+import \"./y\";\n export default \"a\";"
      },
      {
        "sha": "4a7438a206175d3e8b4900c87466673e431f9a16",
        "filename": "test/statsCases/split-chunks-combinations/b.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fb.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,3 +1,3 @@\n-import \"./d\";\n-import \"./e\";\n+import \"./x\";\n+import \"./y\";\n export default \"b\";"
      },
      {
        "sha": "651fd1cbaf57729d88b6b7bedda715d7ce8de8ef",
        "filename": "test/statsCases/split-chunks-combinations/c.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fc.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,2 +1,2 @@\n-import \"./d\";\n-export default \"a\";\n+import \"./x\";\n+export default \"c\";"
      },
      {
        "sha": "9d7e0d4ded98f5646f6a3ad2071b4f5ede65a9bf",
        "filename": "test/statsCases/split-chunks-combinations/d.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fd.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1 +1,2 @@\n-// content content content content content content content content\n+import \"./x\";\n+export default \"d\";"
      },
      {
        "sha": "4e0e9da3d491b1eb1f6518a6556e3a157b3bfd27",
        "filename": "test/statsCases/split-chunks-combinations/e.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fe.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1 +1,2 @@\n-// content content content content content content content content\n+import \"./x\";\n+export default \"e\";"
      },
      {
        "sha": "1ebfc3cc93a26084617ba2abd3f82e75d26a36dd",
        "filename": "test/statsCases/split-chunks-combinations/expected.txt",
        "status": "modified",
        "additions": 30,
        "deletions": 14,
        "changes": 44,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,19 +1,35 @@\n Entrypoint main = main.js\n-chunk    {0} async-a~async-b.js (async-a~async-b) 134 bytes <{4}> ={2}= ={1}= [rendered] split chunk (cache group: default) (name: async-a~async-b)\n-    > ./b [5] ./index.js 2:0-47\n-    > ./a [5] ./index.js 1:0-47\n-    [0] ./d.js 67 bytes {0} {3} [built]\n-    [1] ./e.js 67 bytes {0} [built]\n-chunk    {1} async-a.js (async-a) 48 bytes <{4}> ={0}= [rendered]\n-    > ./a [5] ./index.js 1:0-47\n+chunk    {0} async-a~async-b.js (async-a~async-b) 134 bytes <{8}> ={1}= ={2}= [rendered] split chunk (cache group: default) (name: async-a~async-b)\n+    > ./a [9] ./index.js 1:0-47\n+    > ./b [9] ./index.js 2:0-47\n+    [0] ./x.js 67 bytes {0} {3} {4} {5} {6} {7} [built]\n+    [1] ./y.js 67 bytes {0} [built]\n+chunk    {1} async-a.js (async-a) 48 bytes <{8}> ={0}= [rendered]\n+    > ./a [9] ./index.js 1:0-47\n     [2] ./a.js 48 bytes {1} [built]\n-chunk    {2} async-b.js (async-b) 48 bytes <{4}> ={0}= [rendered]\n-    > ./b [5] ./index.js 2:0-47\n+chunk    {2} async-b.js (async-b) 48 bytes <{8}> ={0}= [rendered]\n+    > ./b [9] ./index.js 2:0-47\n     [3] ./b.js 48 bytes {2} [built]\n-chunk    {3} async-c.js (async-c) 101 bytes <{4}> [rendered]\n-    > ./c [5] ./index.js 3:0-47\n-    [0] ./d.js 67 bytes {0} {3} [built]\n+chunk    {3} async-c.js (async-c) 101 bytes <{8}> [rendered]\n+    > ./c [9] ./index.js 3:0-47\n+    [0] ./x.js 67 bytes {0} {3} {4} {5} {6} {7} [built]\n     [4] ./c.js 34 bytes {3} [built]\n-chunk    {4} main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< [entry] [rendered]\n+chunk    {4} async-d.js (async-d) 101 bytes <{8}> [rendered]\n+    > ./d [9] ./index.js 4:0-47\n+    [0] ./x.js 67 bytes {0} {3} {4} {5} {6} {7} [built]\n+    [5] ./d.js 34 bytes {4} [built]\n+chunk    {5} async-e.js (async-e) 101 bytes <{8}> [rendered]\n+    > ./e [9] ./index.js 5:0-47\n+    [0] ./x.js 67 bytes {0} {3} {4} {5} {6} {7} [built]\n+    [6] ./e.js 34 bytes {5} [built]\n+chunk    {6} async-f.js (async-f) 101 bytes <{8}> [rendered]\n+    > ./f [9] ./index.js 6:0-47\n+    [0] ./x.js 67 bytes {0} {3} {4} {5} {6} {7} [built]\n+    [7] ./f.js 34 bytes {6} [built]\n+chunk    {7} async-g.js (async-g) 101 bytes <{8}> [rendered]\n+    > ./g [9] ./index.js 7:0-47\n+    [0] ./x.js 67 bytes {0} {3} {4} {5} {6} {7} [built]\n+    [8] ./g.js 34 bytes {7} [built]\n+chunk    {8} main.js (main) 343 bytes >{0}< >{1}< >{2}< >{3}< >{4}< >{5}< >{6}< >{7}< [entry] [rendered]\n     > ./ main\n-    [5] ./index.js 147 bytes {4} [built]\n\\ No newline at end of file\n+    [9] ./index.js 343 bytes {8} [built]\n\\ No newline at end of file"
      },
      {
        "sha": "e497c6df31e3441960eed59f9c1186cab13a4c89",
        "filename": "test/statsCases/split-chunks-combinations/f.js",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Ff.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Ff.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Ff.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1 +1,2 @@\n-// content content content content content\n+import \"./x\";\n+export default \"f\";"
      },
      {
        "sha": "4c9e17ae7771b3e7f78264b54ff173a8536f5530",
        "filename": "test/statsCases/split-chunks-combinations/g.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fg.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fg.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fg.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -0,0 +1,2 @@\n+import \"./x\";\n+export default \"g\";"
      },
      {
        "sha": "e3303204ffed921a6c0e18488610cc139543a838",
        "filename": "test/statsCases/split-chunks-combinations/index.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Findex.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,3 +1,7 @@\n import(/* webpackChunkName: \"async-a\" */ \"./a\");\n import(/* webpackChunkName: \"async-b\" */ \"./b\");\n import(/* webpackChunkName: \"async-c\" */ \"./c\");\n+import(/* webpackChunkName: \"async-d\" */ \"./d\");\n+import(/* webpackChunkName: \"async-e\" */ \"./e\");\n+import(/* webpackChunkName: \"async-f\" */ \"./f\");\n+import(/* webpackChunkName: \"async-g\" */ \"./g\");"
      },
      {
        "sha": "1f44b439eae9229c7fde02e4f78886ffb63a817b",
        "filename": "test/statsCases/split-chunks-combinations/x.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fx.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fx.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fx.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -0,0 +1 @@\n+// content content content content content content content content"
      },
      {
        "sha": "1f44b439eae9229c7fde02e4f78886ffb63a817b",
        "filename": "test/statsCases/split-chunks-combinations/y.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fy.js",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-combinations%2Fy.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-combinations%2Fy.js?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -0,0 +1 @@\n+// content content content content content content content content"
      },
      {
        "sha": "0ed29a058a5433543cfe4b3a85d3cc63329c70cc",
        "filename": "test/statsCases/split-chunks-issue-6413/expected.txt",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-issue-6413%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-issue-6413%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-issue-6413%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,13 +1,13 @@\n Entrypoint main = main.js\n-chunk    {0} vendors~async-a~async-b~async-c.js (vendors~async-a~async-b~async-c) 20 bytes <{5}> ={1}= ={4}= ={3}= ={2}= [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b~async-c)\n-    > ./c [5] ./index.js 3:0-47\n-    > ./b [5] ./index.js 2:0-47\n+chunk    {0} vendors~async-a~async-b~async-c.js (vendors~async-a~async-b~async-c) 20 bytes <{5}> ={1}= ={2}= ={3}= ={4}= [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b~async-c)\n     > ./a [5] ./index.js 1:0-47\n-    [1] ./node_modules/x.js 20 bytes {0} [built]\n-chunk    {1} async-a~async-b~async-c.js (async-a~async-b~async-c) 11 bytes <{5}> ={0}= ={4}= ={3}= ={2}= [rendered] split chunk (cache group: default) (name: async-a~async-b~async-c)\n-    > ./c [5] ./index.js 3:0-47\n     > ./b [5] ./index.js 2:0-47\n+    > ./c [5] ./index.js 3:0-47\n+    [1] ./node_modules/x.js 20 bytes {0} [built]\n+chunk    {1} async-a~async-b~async-c.js (async-a~async-b~async-c) 11 bytes <{5}> ={0}= ={2}= ={3}= ={4}= [rendered] split chunk (cache group: default) (name: async-a~async-b~async-c)\n     > ./a [5] ./index.js 1:0-47\n+    > ./b [5] ./index.js 2:0-47\n+    > ./c [5] ./index.js 3:0-47\n     [0] ./common.js 11 bytes {1} [built]\n chunk    {2} async-a.js (async-a) 19 bytes <{5}> ={0}= ={1}= [rendered]\n     > ./a [5] ./index.js 1:0-47"
      },
      {
        "sha": "09548ddd41963c22b63a661c7b9d3fd96b08bb4e",
        "filename": "test/statsCases/split-chunks-prefer-bigger-splits/expected.txt",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-prefer-bigger-splits%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks-prefer-bigger-splits%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks-prefer-bigger-splits%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -1,7 +1,7 @@\n Entrypoint main = default/main.js\n-chunk    {0} default/async-b~async-c.js (async-b~async-c) 110 bytes <{4}> ={3}= ={2}= [rendered] split chunk (cache group: default) (name: async-b~async-c)\n-    > ./c [6] ./index.js 3:0-47\n+chunk    {0} default/async-b~async-c.js (async-b~async-c) 110 bytes <{4}> ={2}= ={3}= [rendered] split chunk (cache group: default) (name: async-b~async-c)\n     > ./b [6] ./index.js 2:0-47\n+    > ./c [6] ./index.js 3:0-47\n     [0] ./d.js 43 bytes {0} {1} [built]\n     [2] ./f.js 67 bytes {0} [built]\n chunk    {1} default/async-a.js (async-a) 134 bytes <{4}> [rendered]\n@@ -16,6 +16,6 @@ chunk    {2} default/async-b.js (async-b) 105 bytes <{4}> ={0}= [rendered]\n chunk    {3} default/async-c.js (async-c) 48 bytes <{4}> ={0}= [rendered]\n     > ./c [6] ./index.js 3:0-47\n     [5] ./c.js 48 bytes {3} [built]\n-chunk    {4} default/main.js (main) 147 bytes >{0}< >{2}< >{3}< >{1}< [entry] [rendered]\n+chunk    {4} default/main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< [entry] [rendered]\n     > ./ main\n     [6] ./index.js 147 bytes {4} [built]\n\\ No newline at end of file"
      },
      {
        "sha": "834f44369c504797be284465c03859be48daf6ae",
        "filename": "test/statsCases/split-chunks/expected.txt",
        "status": "modified",
        "additions": 58,
        "deletions": 58,
        "changes": 116,
        "blob_url": "https://github.com/webpack/webpack/blob/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/244d27a42daccea5e4e211374c111109e18f1059/test%2FstatsCases%2Fsplit-chunks%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fsplit-chunks%2Fexpected.txt?ref=244d27a42daccea5e4e211374c111109e18f1059",
        "patch": "@@ -3,45 +3,45 @@ Child default:\n     Entrypoint a = default/a.js\n     Entrypoint b = default/b.js\n     Entrypoint c = default/c.js\n-    chunk    {0} default/vendors~async-a~async-b~async-c.js (vendors~async-a~async-b~async-c) 20 bytes <{9}> ={8}= ={1}= ={2}= ={7}= ={3}= ={6}= ={5}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b~async-c)\n-        > ./c [8] ./index.js 3:0-47\n-        > ./b [8] ./index.js 2:0-47\n+    chunk    {0} default/vendors~async-a~async-b~async-c.js (vendors~async-a~async-b~async-c) 20 bytes <{9}> ={1}= ={2}= ={3}= ={5}= ={6}= ={7}= ={8}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b~async-c)\n         > ./a [8] ./index.js 1:0-47\n-        [1] ./node_modules/x.js 20 bytes {0} {10} {11} {12} [built]\n-    chunk    {1} default/async-a~async-b~async-c.js (async-a~async-b~async-c) 20 bytes <{9}> ={0}= ={8}= ={2}= ={7}= ={3}= ={6}= ={5}= >{2}< >{4}< [rendered] split chunk (cache group: default) (name: async-a~async-b~async-c)\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n+        [1] ./node_modules/x.js 20 bytes {0} {10} {11} {12} [built]\n+    chunk    {1} default/async-a~async-b~async-c.js (async-a~async-b~async-c) 20 bytes <{9}> ={0}= ={2}= ={3}= ={5}= ={6}= ={7}= ={8}= >{2}< >{4}< [rendered] split chunk (cache group: default) (name: async-a~async-b~async-c)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [0] ./d.js 20 bytes {1} {10} {11} {12} [built]\n-    chunk    {2} default/async-b~async-c~async-g.js (async-b~async-c~async-g) 20 bytes <{0}> <{3}> <{1}> <{5}> <{10}> <{9}> ={4}= ={0}= ={8}= ={1}= ={7}= ={3}= ={6}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g)\n+    chunk    {2} default/async-b~async-c~async-g.js (async-b~async-c~async-g) 20 bytes <{0}> <{1}> <{10}> <{3}> <{5}> <{9}> ={0}= ={1}= ={3}= ={4}= ={6}= ={7}= ={8}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g)\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [2] ./f.js 20 bytes {2} {11} {12} [built]\n-    chunk    {3} default/vendors~async-a~async-b.js (vendors~async-a~async-b) 20 bytes <{9}> ={0}= ={1}= ={2}= ={6}= ={5}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b)\n-        > ./b [8] ./index.js 2:0-47\n+    chunk    {3} default/vendors~async-a~async-b.js (vendors~async-a~async-b) 20 bytes <{9}> ={0}= ={1}= ={2}= ={5}= ={6}= >{2}< >{4}< [rendered] split chunk (cache group: vendors) (name: vendors~async-a~async-b)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n         [3] ./node_modules/y.js 20 bytes {3} {10} {11} [built]\n-    chunk    {4} default/async-g.js (async-g) 34 bytes <{0}> <{3}> <{1}> <{5}> <{10}> ={2}= [rendered]\n+    chunk    {4} default/async-g.js (async-g) 34 bytes <{0}> <{1}> <{10}> <{3}> <{5}> ={2}= [rendered]\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n         [9] ./g.js 34 bytes {4} [built]\n-    chunk    {5} default/async-a.js (async-a) 156 bytes <{9}> ={0}= ={3}= ={1}= >{2}< >{4}< [rendered]\n+    chunk    {5} default/async-a.js (async-a) 156 bytes <{9}> ={0}= ={1}= ={3}= >{2}< >{4}< [rendered]\n         > ./a [8] ./index.js 1:0-47\n         [7] ./a.js + 1 modules 156 bytes {5} {10} [built]\n             | ./a.js 121 bytes [built]\n             | ./e.js 20 bytes [built]\n-    chunk    {6} default/async-b.js (async-b) 72 bytes <{9}> ={0}= ={3}= ={1}= ={2}= [rendered]\n+    chunk    {6} default/async-b.js (async-b) 72 bytes <{9}> ={0}= ={1}= ={2}= ={3}= [rendered]\n         > ./b [8] ./index.js 2:0-47\n         [5] ./b.js 72 bytes {6} {11} [built]\n-    chunk    {7} default/async-c.js (async-c) 72 bytes <{9}> ={0}= ={8}= ={1}= ={2}= [rendered]\n+    chunk    {7} default/async-c.js (async-c) 72 bytes <{9}> ={0}= ={1}= ={2}= ={8}= [rendered]\n         > ./c [8] ./index.js 3:0-47\n         [6] ./c.js 72 bytes {7} {12} [built]\n     chunk    {8} default/vendors~async-c.js (vendors~async-c) 20 bytes <{9}> ={0}= ={1}= ={2}= ={7}= [rendered] split chunk (cache group: vendors) (name: vendors~async-c)\n         > ./c [8] ./index.js 3:0-47\n         [4] ./node_modules/z.js 20 bytes {8} {12} [built]\n-    chunk    {9} default/main.js (main) 147 bytes >{0}< >{3}< >{1}< >{2}< >{6}< >{5}< >{8}< >{7}< [entry] [rendered]\n+    chunk    {9} default/main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< >{5}< >{6}< >{7}< >{8}< [entry] [rendered]\n         > ./ main\n         [8] ./index.js 147 bytes {9} [built]\n     chunk   {10} default/a.js (a) 216 bytes >{2}< >{4}< [entry] [rendered]\n@@ -71,51 +71,51 @@ Child all-chunks:\n     Entrypoint a = default/vendors~a~async-a~async-b~async-c~b~c.js default/vendors~a~async-a~async-b~b.js default/a.js\n     Entrypoint b = default/vendors~a~async-a~async-b~async-c~b~c.js default/vendors~a~async-a~async-b~b.js default/b.js\n     Entrypoint c = default/vendors~a~async-a~async-b~async-c~b~c.js default/vendors~async-c~c.js default/c.js\n-    chunk    {0} default/vendors~a~async-a~async-b~async-c~b~c.js (vendors~a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={4}= ={12}= ={3}= ={11}= ={10}= ={1}= ={2}= ={7}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~async-c~b~c)\n-        > ./c c\n-        > ./b b\n+    chunk    {0} default/vendors~a~async-a~async-b~async-c~b~c.js (vendors~a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={1}= ={10}= ={11}= ={12}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~async-c~b~c)\n         > ./a a\n-        > ./c [8] ./index.js 3:0-47\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b b\n+        > ./c c\n         > ./a [8] ./index.js 1:0-47\n-        [2] ./node_modules/x.js 20 bytes {0} [built]\n-    chunk    {1} default/a~async-a~async-b~async-c~b~c.js (a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={0}= ={4}= ={2}= ={7}= ={3}= ={6}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a~async-b~async-c~b~c)\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n+        [2] ./node_modules/x.js 20 bytes {0} [built]\n+    chunk    {1} default/a~async-a~async-b~async-c~b~c.js (a~async-a~async-b~async-c~b~c) 20 bytes <{9}> ={0}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a~async-b~async-c~b~c)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [0] ./d.js 20 bytes {1} {10} {11} {12} [built]\n-    chunk    {2} default/async-b~async-c~async-g~b~c.js (async-b~async-c~async-g~b~c) 20 bytes <{0}> <{3}> <{1}> <{8}> <{10}> <{9}> ={5}= ={0}= ={4}= ={1}= ={7}= ={3}= ={6}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~b~c)\n+    chunk    {2} default/async-b~async-c~async-g~b~c.js (async-b~async-c~async-g~b~c) 20 bytes <{0}> <{1}> <{10}> <{3}> <{8}> <{9}> ={0}= ={1}= ={3}= ={4}= ={5}= ={6}= ={7}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~b~c)\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [1] ./f.js 20 bytes {2} {11} {12} [built]\n-    chunk    {3} default/vendors~a~async-a~async-b~b.js (vendors~a~async-a~async-b~b) 20 bytes <{9}> ={0}= ={11}= ={10}= ={1}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~b)\n-        > ./b b\n+    chunk    {3} default/vendors~a~async-a~async-b~b.js (vendors~a~async-a~async-b~b) 20 bytes <{9}> ={0}= ={1}= ={10}= ={11}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~a~async-a~async-b~b)\n         > ./a a\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b b\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n         [3] ./node_modules/y.js 20 bytes {3} [built]\n-    chunk    {4} default/vendors~async-c~c.js (vendors~async-c~c) 20 bytes <{9}> ={0}= ={12}= ={1}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~c)\n+    chunk    {4} default/vendors~async-c~c.js (vendors~async-c~c) 20 bytes <{9}> ={0}= ={1}= ={12}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~c)\n         > ./c c\n         > ./c [8] ./index.js 3:0-47\n         [7] ./node_modules/z.js 20 bytes {4} [built]\n-    chunk    {5} default/async-g.js (async-g) 34 bytes <{0}> <{3}> <{1}> <{8}> <{10}> ={2}= [rendered]\n+    chunk    {5} default/async-g.js (async-g) 34 bytes <{0}> <{1}> <{10}> <{3}> <{8}> ={2}= [rendered]\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n         [9] ./g.js 34 bytes {5} [built]\n-    chunk    {6} default/async-b.js (async-b) 72 bytes <{9}> ={0}= ={3}= ={1}= ={2}= [rendered]\n+    chunk    {6} default/async-b.js (async-b) 72 bytes <{9}> ={0}= ={1}= ={2}= ={3}= [rendered]\n         > ./b [8] ./index.js 2:0-47\n         [4] ./b.js 72 bytes {6} {11} [built]\n-    chunk    {7} default/async-c.js (async-c) 72 bytes <{9}> ={0}= ={4}= ={1}= ={2}= [rendered]\n+    chunk    {7} default/async-c.js (async-c) 72 bytes <{9}> ={0}= ={1}= ={2}= ={4}= [rendered]\n         > ./c [8] ./index.js 3:0-47\n         [5] ./c.js 72 bytes {7} {12} [built]\n-    chunk    {8} default/a~async-a.js (a~async-a) 156 bytes <{9}> ={0}= ={3}= ={1}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a)\n+    chunk    {8} default/a~async-a.js (a~async-a) 156 bytes <{9}> ={0}= ={1}= ={3}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: a~async-a)\n         > ./a [8] ./index.js 1:0-47\n         [6] ./a.js + 1 modules 156 bytes {8} {10} [built]\n             | ./a.js 121 bytes [built]\n             | ./e.js 20 bytes [built]\n-    chunk    {9} default/main.js (main) 147 bytes >{0}< >{3}< >{1}< >{2}< >{6}< >{8}< >{4}< >{7}< [entry] [rendered]\n+    chunk    {9} default/main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< >{4}< >{6}< >{7}< >{8}< [entry] [rendered]\n         > ./ main\n         [8] ./index.js 147 bytes {9} [built]\n     chunk   {10} default/a.js (a) 176 bytes ={0}= ={3}= >{2}< >{5}< [entry] [rendered]\n@@ -139,13 +139,13 @@ Child manual:\n     Entrypoint a = default/vendors.js default/a.js\n     Entrypoint b = default/vendors.js default/b.js\n     Entrypoint c = default/vendors.js default/c.js\n-    chunk    {0} default/vendors.js (vendors) 112 bytes <{5}> ={8}= ={7}= ={6}= ={4}= ={3}= ={2}= >{1}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors)\n-        > ./c c\n-        > ./b b\n+    chunk    {0} default/vendors.js (vendors) 112 bytes <{5}> ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{1}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors)\n         > ./a a\n-        > ./c [8] ./index.js 3:0-47\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b b\n+        > ./c c\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [2] ./node_modules/x.js 20 bytes {0} [built]\n         [3] ./node_modules/y.js 20 bytes {0} [built]\n         [6] ./node_modules/z.js 20 bytes {0} [built]\n@@ -195,51 +195,51 @@ Child name-too-long:\n     Entrypoint aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa = vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be.js vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.js aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.js\n     Entrypoint bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb = vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be.js vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.js bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.js\n     Entrypoint cccccccccccccccccccccccccccccc = vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be.js vendors~async-c~cccccccccccccccccccccccccccccc.js cccccccccccccccccccccccccccccc.js\n-    chunk    {0} vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be.js (vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be) 20 bytes <{9}> ={4}= ={12}= ={3}= ={11}= ={10}= ={1}= ={2}= ={7}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be)\n-        > ./c cccccccccccccccccccccccccccccc\n-        > ./b bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\n+    chunk    {0} vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be.js (vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be) 20 bytes <{9}> ={1}= ={10}= ={11}= ={12}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccc~716093be)\n         > ./a aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n-        > ./c [8] ./index.js 3:0-47\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\n+        > ./c cccccccccccccccccccccccccccccc\n         > ./a [8] ./index.js 1:0-47\n-        [2] ./node_modules/x.js 20 bytes {0} [built]\n-    chunk    {1} aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccc~e7d53185.js (aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccc~e7d53185) 20 bytes <{9}> ={0}= ={4}= ={2}= ={7}= ={3}= ={6}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccc~e7d53185)\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n+        [2] ./node_modules/x.js 20 bytes {0} [built]\n+    chunk    {1} aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccc~e7d53185.js (aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccc~e7d53185) 20 bytes <{9}> ={0}= ={2}= ={3}= ={4}= ={6}= ={7}= ={8}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~async-c~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccc~e7d53185)\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [0] ./d.js 20 bytes {1} {10} {11} {12} [built]\n-    chunk    {2} async-b~async-c~async-g~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccccccccccccccccccc.js (async-b~async-c~async-g~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccccccccccccccccccc) 20 bytes <{0}> <{3}> <{1}> <{8}> <{10}> <{9}> ={5}= ={0}= ={4}= ={1}= ={7}= ={3}= ={6}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccccccccccccccccccc)\n+    chunk    {2} async-b~async-c~async-g~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccccccccccccccccccc.js (async-b~async-c~async-g~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccccccccccccccccccc) 20 bytes <{0}> <{1}> <{10}> <{3}> <{8}> <{9}> ={0}= ={1}= ={3}= ={4}= ={5}= ={6}= ={7}= [rendered] split chunk (cache group: default) (name: async-b~async-c~async-g~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb~cccccccccccccccccccccccccccccc)\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n-        > ./c [8] ./index.js 3:0-47\n         > ./b [8] ./index.js 2:0-47\n+        > ./c [8] ./index.js 3:0-47\n         [1] ./f.js 20 bytes {2} {11} {12} [built]\n-    chunk    {3} vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.js (vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb) 20 bytes <{9}> ={0}= ={11}= ={10}= ={1}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb)\n-        > ./b bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\n+    chunk    {3} vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.js (vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb) 20 bytes <{9}> ={0}= ={1}= ={10}= ={11}= ={2}= ={6}= ={8}= >{2}< >{5}< [initial] [rendered] split chunk (cache group: vendors) (name: vendors~aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a~async-b~bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb)\n         > ./a aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n-        > ./b [8] ./index.js 2:0-47\n+        > ./b bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\n         > ./a [8] ./index.js 1:0-47\n+        > ./b [8] ./index.js 2:0-47\n         [3] ./node_modules/y.js 20 bytes {3} [built]\n-    chunk    {4} vendors~async-c~cccccccccccccccccccccccccccccc.js (vendors~async-c~cccccccccccccccccccccccccccccc) 20 bytes <{9}> ={0}= ={12}= ={1}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~cccccccccccccccccccccccccccccc)\n+    chunk    {4} vendors~async-c~cccccccccccccccccccccccccccccc.js (vendors~async-c~cccccccccccccccccccccccccccccc) 20 bytes <{9}> ={0}= ={1}= ={12}= ={2}= ={7}= [initial] [rendered] split chunk (cache group: vendors) (name: vendors~async-c~cccccccccccccccccccccccccccccc)\n         > ./c cccccccccccccccccccccccccccccc\n         > ./c [8] ./index.js 3:0-47\n         [7] ./node_modules/z.js 20 bytes {4} [built]\n-    chunk    {5} async-g.js (async-g) 34 bytes <{0}> <{3}> <{1}> <{8}> <{10}> ={2}= [rendered]\n+    chunk    {5} async-g.js (async-g) 34 bytes <{0}> <{1}> <{10}> <{3}> <{8}> ={2}= [rendered]\n         > ./g [] 6:0-47\n         > ./g [] 6:0-47\n         [9] ./g.js 34 bytes {5} [built]\n-    chunk    {6} async-b.js (async-b) 72 bytes <{9}> ={0}= ={3}= ={1}= ={2}= [rendered]\n+    chunk    {6} async-b.js (async-b) 72 bytes <{9}> ={0}= ={1}= ={2}= ={3}= [rendered]\n         > ./b [8] ./index.js 2:0-47\n         [4] ./b.js 72 bytes {6} {11} [built]\n-    chunk    {7} async-c.js (async-c) 72 bytes <{9}> ={0}= ={4}= ={1}= ={2}= [rendered]\n+    chunk    {7} async-c.js (async-c) 72 bytes <{9}> ={0}= ={1}= ={2}= ={4}= [rendered]\n         > ./c [8] ./index.js 3:0-47\n         [5] ./c.js 72 bytes {7} {12} [built]\n-    chunk    {8} aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a.js (aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a) 156 bytes <{9}> ={0}= ={3}= ={1}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a)\n+    chunk    {8} aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a.js (aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a) 156 bytes <{9}> ={0}= ={1}= ={3}= >{2}< >{5}< [rendered] split chunk (cache group: default) (name: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa~async-a)\n         > ./a [8] ./index.js 1:0-47\n         [6] ./a.js + 1 modules 156 bytes {8} {10} [built]\n             | ./a.js 121 bytes [built]\n             | ./e.js 20 bytes [built]\n-    chunk    {9} main.js (main) 147 bytes >{0}< >{3}< >{1}< >{2}< >{6}< >{8}< >{4}< >{7}< [entry] [rendered]\n+    chunk    {9} main.js (main) 147 bytes >{0}< >{1}< >{2}< >{3}< >{4}< >{6}< >{7}< >{8}< [entry] [rendered]\n         > ./ main\n         [8] ./index.js 147 bytes {9} [built]\n     chunk   {10} aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.js (aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa) 176 bytes ={0}= ={3}= >{2}< >{5}< [entry] [rendered]"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/6736",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/6736/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/6736/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/6736/events",
    "html_url": "https://github.com/webpack/webpack/pull/6736",
    "id": 304642356,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTc0NTY4NDgx",
    "number": 6736,
    "title": "Make the `performance` default to false while at non-web target. Close #6715",
    "user": {
      "login": "mc-zone",
      "id": 4403937,
      "node_id": "MDQ6VXNlcjQ0MDM5Mzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4403937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mc-zone",
      "html_url": "https://github.com/mc-zone",
      "followers_url": "https://api.github.com/users/mc-zone/followers",
      "following_url": "https://api.github.com/users/mc-zone/following{/other_user}",
      "gists_url": "https://api.github.com/users/mc-zone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mc-zone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mc-zone/subscriptions",
      "organizations_url": "https://api.github.com/users/mc-zone/orgs",
      "repos_url": "https://api.github.com/users/mc-zone/repos",
      "events_url": "https://api.github.com/users/mc-zone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mc-zone/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-03-13T06:27:19Z",
    "updated_at": "2018-03-14T10:52:39Z",
    "closed_at": "2018-03-14T10:52:35Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/6736",
      "html_url": "https://github.com/webpack/webpack/pull/6736",
      "diff_url": "https://github.com/webpack/webpack/pull/6736.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/6736.patch",
      "merged_at": "2018-03-14T10:52:35Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nImporvement (about default config)\r\n\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nYes.\r\n\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\n\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\n\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\nResolves #6715.\r\n\r\n**Does this PR introduce a breaking change?**\r\nNo.\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/6736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/6736/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "481d842a17998eabd99e137d98a77c0bd94924e0",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 12,
        "deletions": 11,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/2ecd323a38eeeb06a7f0642e2764346aa6070258/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2ecd323a38eeeb06a7f0642e2764346aa6070258/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=2ecd323a38eeeb06a7f0642e2764346aa6070258",
        "patch": "@@ -13,6 +13,10 @@ const isProductionLikeMode = options => {\n \treturn options.mode === \"production\" || !options.mode;\n };\n \n+const isWebLikeTarget = options => {\n+\treturn options.target === \"web\" || options.target === \"webworker\";\n+};\n+\n class WebpackOptionsDefaulter extends OptionsDefaulter {\n \tconstructor() {\n \t\tsuper();\n@@ -166,17 +170,14 @@ class WebpackOptionsDefaulter extends OptionsDefaulter {\n \t\tthis.set(\"node.__filename\", \"mock\");\n \t\tthis.set(\"node.__dirname\", \"mock\");\n \n-\t\tthis.set(\n-\t\t\t\"performance\",\n-\t\t\t\"make\",\n-\t\t\toptions => (isProductionLikeMode(options) ? false : undefined)\n-\t\t);\n-\t\tthis.set(\"performance\", \"call\", value => {\n-\t\t\tif (typeof value === \"boolean\") {\n-\t\t\t\treturn value;\n-\t\t\t} else {\n-\t\t\t\treturn Object.assign({}, value);\n-\t\t\t}\n+\t\tthis.set(\"performance\", \"call\", (value, options) => {\n+\t\t\tif (value === false) return false;\n+\t\t\tif (\n+\t\t\t\tvalue === undefined &&\n+\t\t\t\t(!isProductionLikeMode(options) || !isWebLikeTarget(options))\n+\t\t\t)\n+\t\t\t\treturn false;\n+\t\t\treturn Object.assign({}, value);\n \t\t});\n \t\tthis.set(\"performance.maxAssetSize\", 250000);\n \t\tthis.set(\"performance.maxEntrypointSize\", 250000);"
      },
      {
        "sha": "9aaff8332ed7a8cc562b5020685c18145f881cc6",
        "filename": "test/statsCases/performance-different-mode-and-target/expected.txt",
        "status": "added",
        "additions": 102,
        "deletions": 0,
        "changes": 102,
        "blob_url": "https://github.com/webpack/webpack/blob/2ecd323a38eeeb06a7f0642e2764346aa6070258/test%2FstatsCases%2Fperformance-different-mode-and-target%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/2ecd323a38eeeb06a7f0642e2764346aa6070258/test%2FstatsCases%2Fperformance-different-mode-and-target%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-different-mode-and-target%2Fexpected.txt?ref=2ecd323a38eeeb06a7f0642e2764346aa6070258",
        "patch": "@@ -0,0 +1,102 @@\n+Hash: df3a0090d24670ebd17d7094466a296a7ae4ae823f59070ac8deb95011d223ef01d5f7db6f7b0912f47482563c8b6b9dc4955fdf2e3a0c7c308a998f9bab5b59aa119495c443\n+Child\n+    Hash: df3a0090d24670ebd17d\n+    Time: Xms\n+    Built at: Thu Jan 01 1970 00:00:00 GMT\n+                 Asset     Size  Chunks                    Chunk Names\n+    warning.pro-web.js  296 KiB       0  [emitted]  [big]  main\n+    Entrypoint main [big] = warning.pro-web.js\n+       [0] ./index.js 293 KiB {0} [built]\n+    \n+    WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\n+    This can impact web performance.\n+    Assets: \n+      warning.pro-web.js (296 KiB)\n+    \n+    WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\n+    Entrypoints:\n+      main (296 KiB)\n+          warning.pro-web.js\n+    \n+    \n+    WARNING in webpack performance recommendations: \n+    You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\n+    For more info visit https://webpack.js.org/guides/code-splitting/\n+Child\n+    Hash: 7094466a296a7ae4ae82\n+    Time: Xms\n+    Built at: Thu Jan 01 1970 00:00:00 GMT\n+                       Asset     Size  Chunks                    Chunk Names\n+    warning.pro-webworker.js  296 KiB       0  [emitted]  [big]  main\n+    Entrypoint main [big] = warning.pro-webworker.js\n+       [0] ./index.js 293 KiB {0} [built]\n+    \n+    WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\n+    This can impact web performance.\n+    Assets: \n+      warning.pro-webworker.js (296 KiB)\n+    \n+    WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\n+    Entrypoints:\n+      main (296 KiB)\n+          warning.pro-webworker.js\n+    \n+    \n+    WARNING in webpack performance recommendations: \n+    You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\n+    For more info visit https://webpack.js.org/guides/code-splitting/\n+Child\n+    Hash: 3f59070ac8deb95011d2\n+    Time: Xms\n+    Built at: Thu Jan 01 1970 00:00:00 GMT\n+                     Asset     Size  Chunks             Chunk Names\n+    no-warning.pro-node.js  296 KiB       0  [emitted]  main\n+    Entrypoint main = no-warning.pro-node.js\n+       [0] ./index.js 293 KiB {0} [built]\n+Child\n+    Hash: 23ef01d5f7db6f7b0912\n+    Time: Xms\n+    Built at: Thu Jan 01 1970 00:00:00 GMT\n+                    Asset      Size  Chunks             Chunk Names\n+    no-warning.dev-web.js  1.72 MiB    main  [emitted]  main\n+    Entrypoint main = no-warning.dev-web.js\n+    [./index.js] 293 KiB {main} [built]\n+Child\n+    Hash: f47482563c8b6b9dc495\n+    Time: Xms\n+    Built at: Thu Jan 01 1970 00:00:00 GMT\n+                     Asset      Size  Chunks             Chunk Names\n+    no-warning.dev-node.js  1.72 MiB    main  [emitted]  main\n+    Entrypoint main = no-warning.dev-node.js\n+    [./index.js] 293 KiB {main} [built]\n+Child\n+    Hash: 5fdf2e3a0c7c308a998f\n+    Time: Xms\n+    Built at: Thu Jan 01 1970 00:00:00 GMT\n+                                   Asset      Size  Chunks                    Chunk Names\n+    no-warning.dev-web-with-limit-set.js  1.72 MiB    main  [emitted]  [big]  main\n+    Entrypoint main [big] = no-warning.dev-web-with-limit-set.js\n+    [./index.js] 293 KiB {main} [built]\n+Child\n+    Hash: 9bab5b59aa119495c443\n+    Time: Xms\n+    Built at: Thu Jan 01 1970 00:00:00 GMT\n+                                 Asset     Size  Chunks                    Chunk Names\n+    warning.pro-node-with-hints-set.js  296 KiB       0  [emitted]  [big]  main\n+    Entrypoint main [big] = warning.pro-node-with-hints-set.js\n+       [0] ./index.js 293 KiB {0} [built]\n+    \n+    WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\n+    This can impact web performance.\n+    Assets: \n+      warning.pro-node-with-hints-set.js (296 KiB)\n+    \n+    WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\n+    Entrypoints:\n+      main (296 KiB)\n+          warning.pro-node-with-hints-set.js\n+    \n+    \n+    WARNING in webpack performance recommendations: \n+    You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\n+    For more info visit https://webpack.js.org/guides/code-splitting/\n\\ No newline at end of file"
      },
      {
        "sha": "6f9f4d4b392a5082d98eda9202d0fcb6df6773ee",
        "filename": "test/statsCases/performance-different-mode-and-target/index.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/2ecd323a38eeeb06a7f0642e2764346aa6070258/test%2FstatsCases%2Fperformance-different-mode-and-target%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2ecd323a38eeeb06a7f0642e2764346aa6070258/test%2FstatsCases%2Fperformance-different-mode-and-target%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-different-mode-and-target%2Findex.js?ref=2ecd323a38eeeb06a7f0642e2764346aa6070258"
      },
      {
        "sha": "6e23f0dac62167a66451be980ff6f21bdef3e4e5",
        "filename": "test/statsCases/performance-different-mode-and-target/webpack.config.js",
        "status": "added",
        "additions": 64,
        "deletions": 0,
        "changes": 64,
        "blob_url": "https://github.com/webpack/webpack/blob/2ecd323a38eeeb06a7f0642e2764346aa6070258/test%2FstatsCases%2Fperformance-different-mode-and-target%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2ecd323a38eeeb06a7f0642e2764346aa6070258/test%2FstatsCases%2Fperformance-different-mode-and-target%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-different-mode-and-target%2Fwebpack.config.js?ref=2ecd323a38eeeb06a7f0642e2764346aa6070258",
        "patch": "@@ -0,0 +1,64 @@\n+module.exports = [\n+\t{\n+\t\tentry: \"./index\",\n+\t\tmode: \"production\",\n+\t\ttarget: \"web\",\n+\t\toutput: {\n+\t\t\tfilename: \"warning.pro-web.js\"\n+\t\t}\n+\t},\n+\t{\n+\t\tentry: \"./index\",\n+\t\tmode: \"production\",\n+\t\ttarget: \"webworker\",\n+\t\toutput: {\n+\t\t\tfilename: \"warning.pro-webworker.js\"\n+\t\t}\n+\t},\n+\t{\n+\t\tentry: \"./index\",\n+\t\tmode: \"production\",\n+\t\ttarget: \"node\",\n+\t\toutput: {\n+\t\t\tfilename: \"no-warning.pro-node.js\"\n+\t\t}\n+\t},\n+\t{\n+\t\tentry: \"./index\",\n+\t\tmode: \"development\",\n+\t\ttarget: \"web\",\n+\t\toutput: {\n+\t\t\tfilename: \"no-warning.dev-web.js\"\n+\t\t}\n+\t},\n+\t{\n+\t\tentry: \"./index\",\n+\t\tmode: \"development\",\n+\t\ttarget: \"node\",\n+\t\toutput: {\n+\t\t\tfilename: \"no-warning.dev-node.js\"\n+\t\t}\n+\t},\n+\t{\n+\t\tentry: \"./index\",\n+\t\tmode: \"development\",\n+\t\ttarget: \"web\",\n+\t\tperformance: {\n+\t\t\tmaxAssetSize: 100\n+\t\t},\n+\t\toutput: {\n+\t\t\tfilename: \"no-warning.dev-web-with-limit-set.js\"\n+\t\t}\n+\t},\n+\t{\n+\t\tentry: \"./index\",\n+\t\tmode: \"production\",\n+\t\ttarget: \"node\",\n+\t\tperformance: {\n+\t\t\thints: \"warning\"\n+\t\t},\n+\t\toutput: {\n+\t\t\tfilename: \"warning.pro-node-with-hints-set.js\"\n+\t\t}\n+\t}\n+];"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5983",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5983/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5983/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5983/events",
    "html_url": "https://github.com/webpack/webpack/pull/5983",
    "id": 275119739,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTUzNDczNzgx",
    "number": 5983,
    "title": "Performance improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-11-18T23:55:00Z",
    "updated_at": "2017-11-20T09:28:03Z",
    "closed_at": "2017-11-20T09:28:00Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5983",
      "html_url": "https://github.com/webpack/webpack/pull/5983",
      "diff_url": "https://github.com/webpack/webpack/pull/5983.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5983.patch",
      "merged_at": "2017-11-20T09:28:00Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nUse StackedSetMap for better performance in ModuleConcatenationPlugin\r\nreplace isEqualResource with more performance implementation \r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5983/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "2337a6a9b780f2c7453d33ac658a86a4967a4296",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 34,
        "deletions": 19,
        "changes": 53,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -206,15 +206,22 @@ class Compilation extends Tapable {\n \t}\n \n \tprocessModuleDependencies(module, callback) {\n-\t\tconst dependencies = [];\n+\t\tconst dependencies = new Map();\n \n \t\tconst addDependency = dep => {\n-\t\t\tfor(let i = 0; i < dependencies.length; i++) {\n-\t\t\t\tif(dep.isEqualResource(dependencies[i][0])) {\n-\t\t\t\t\treturn dependencies[i].push(dep);\n-\t\t\t\t}\n+\t\t\tconst resourceIdent = dep.getResourceIdentifier();\n+\t\t\tif(resourceIdent) {\n+\t\t\t\tconst factory = this.dependencyFactories.get(dep.constructor);\n+\t\t\t\tif(factory === undefined)\n+\t\t\t\t\tthrow new Error(`No module factory available for dependency type: ${dep.constructor.name}`);\n+\t\t\t\tlet innerMap = dependencies.get(factory);\n+\t\t\t\tif(innerMap === undefined)\n+\t\t\t\t\tdependencies.set(factory, innerMap = new Map());\n+\t\t\t\tlet list = innerMap.get(resourceIdent);\n+\t\t\t\tif(list === undefined)\n+\t\t\t\t\tinnerMap.set(resourceIdent, list = []);\n+\t\t\t\tlist.push(dep);\n \t\t\t}\n-\t\t\tdependencies.push([dep]);\n \t\t};\n \n \t\tconst addDependenciesBlock = block => {\n@@ -229,24 +236,32 @@ class Compilation extends Tapable {\n \t\t\t}\n \t\t};\n \n-\t\taddDependenciesBlock(module);\n-\t\tthis.addModuleDependencies(module, dependencies, this.bail, null, true, callback);\n+\t\ttry {\n+\t\t\taddDependenciesBlock(module);\n+\t\t} catch(e) {\n+\t\t\tcallback(e);\n+\t\t}\n+\n+\t\tconst sortedDependencies = [];\n+\n+\t\tfor(const pair1 of dependencies) {\n+\t\t\tfor(const pair2 of pair1[1]) {\n+\t\t\t\tsortedDependencies.push({\n+\t\t\t\t\tfactory: pair1[0],\n+\t\t\t\t\tdependencies: pair2[1]\n+\t\t\t\t});\n+\t\t\t}\n+\t\t}\n+\n+\t\tthis.addModuleDependencies(module, sortedDependencies, this.bail, null, true, callback);\n \t}\n \n \taddModuleDependencies(module, dependencies, bail, cacheGroup, recursive, callback) {\n \t\tlet _this = this;\n \t\tconst start = _this.profile && Date.now();\n \n-\t\tconst factories = [];\n-\t\tfor(let i = 0; i < dependencies.length; i++) {\n-\t\t\tconst factory = _this.dependencyFactories.get(dependencies[i][0].constructor);\n-\t\t\tif(!factory) {\n-\t\t\t\treturn callback(new Error(`No module factory available for dependency type: ${dependencies[i][0].constructor.name}`));\n-\t\t\t}\n-\t\t\tfactories[i] = [factory, dependencies[i]];\n-\t\t}\n-\t\tasyncLib.forEach(factories, (item, callback) => {\n-\t\t\tconst dependencies = item[1];\n+\t\tasyncLib.forEach(dependencies, (item, callback) => {\n+\t\t\tconst dependencies = item.dependencies;\n \n \t\t\tconst errorAndCallback = err => {\n \t\t\t\terr.origin = module;\n@@ -267,7 +282,7 @@ class Compilation extends Tapable {\n \t\t\tsemaphore.acquire(() => {\n \t\t\t\tif(_this === null) return semaphore.release();\n \n-\t\t\t\tconst factory = item[0];\n+\t\t\t\tconst factory = item.factory;\n \t\t\t\tfactory.create({\n \t\t\t\t\tcontextInfo: {\n \t\t\t\t\t\tissuer: module.nameForCondition && module.nameForCondition(),"
      },
      {
        "sha": "0cb59f380290785e0955a383e29b5aec9e053019",
        "filename": "lib/Dependency.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2FDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2FDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDependency.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -12,8 +12,8 @@ class Dependency {\n \t\tthis.optional = false;\n \t}\n \n-\tisEqualResource() {\n-\t\treturn false;\n+\tgetResourceIdentifier() {\n+\t\treturn null;\n \t}\n \n \t// Returns the referenced module and export"
      },
      {
        "sha": "1eebd51f497b2f7830578af48c49e16b8cc06998",
        "filename": "lib/dependencies/ContextDependency.js",
        "status": "modified",
        "additions": 5,
        "deletions": 16,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FContextDependency.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -6,11 +6,7 @@\n const Dependency = require(\"../Dependency\");\n const CriticalDependencyWarning = require(\"./CriticalDependencyWarning\");\n \n-const equalRegExp = (a, b) => {\n-\tif(a === b) return true;\n-\tif(typeof a !== \"object\" || typeof b !== \"object\") return false;\n-\treturn a + \"\" === b + \"\";\n-};\n+const regExpToString = r => r ? r + \"\" : \"\";\n \n class ContextDependency extends Dependency {\n \t// options: { request, recursive, regExp, include, exclude, mode, chunkName }\n@@ -25,17 +21,10 @@ class ContextDependency extends Dependency {\n \t\t}\n \t}\n \n-\tisEqualResource(other) {\n-\t\tif(!(other instanceof ContextDependency))\n-\t\t\treturn false;\n-\n-\t\treturn this.options.request === other.options.request &&\n-\t\t\tthis.options.recursive === other.options.recursive &&\n-\t\t\tequalRegExp(this.options.regExp, other.options.regExp) &&\n-\t\t\tequalRegExp(this.options.include, other.options.include) &&\n-\t\t\tequalRegExp(this.options.exclude, other.options.exclude) &&\n-\t\t\tthis.options.mode === other.options.mode &&\n-\t\t\tthis.options.chunkName === other.options.chunkName;\n+\tgetResourceIdentifier() {\n+\t\treturn `context${this.options.request} ${this.options.recursive} ` +\n+\t\t\t`${regExpToString(this.options.regExp)} ${regExpToString(this.options.include)} ${regExpToString(this.options.exclude)} ` +\n+\t\t\t`${this.options.mode} ${this.options.chunkName}`;\n \t}\n \n \tgetWarnings() {"
      },
      {
        "sha": "afc7c100ed4a73fd9f4f5f482e5a97316a51c020",
        "filename": "lib/dependencies/LoaderPlugin.js",
        "status": "modified",
        "additions": 7,
        "deletions": 3,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FLoaderPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FLoaderPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FLoaderPlugin.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -19,9 +19,13 @@ class LoaderPlugin {\n \t\t\t\tloaderContext.loadModule = (request, callback) => {\n \t\t\t\t\tconst dep = new LoaderDependency(request);\n \t\t\t\t\tdep.loc = request;\n-\t\t\t\t\tcompilation.addModuleDependencies(module, [\n-\t\t\t\t\t\t[dep]\n-\t\t\t\t\t], true, \"lm\", false, err => {\n+\t\t\t\t\tconst factory = compilation.dependencyFactories.get(dep.constructor);\n+\t\t\t\t\tif(factory === undefined)\n+\t\t\t\t\t\treturn callback(new Error(`No module factory available for dependency type: ${dep.constructor.name}`));\n+\t\t\t\t\tcompilation.addModuleDependencies(module, [{\n+\t\t\t\t\t\tfactory,\n+\t\t\t\t\t\tdependencies: [dep]\n+\t\t\t\t\t}], true, \"lm\", false, err => {\n \t\t\t\t\t\tif(err) return callback(err);\n \n \t\t\t\t\t\tif(!dep.module) return callback(new Error(\"Cannot load the module\"));"
      },
      {
        "sha": "992d86534db82888445133e6ba952fc86ce48d5d",
        "filename": "lib/dependencies/ModuleDependency.js",
        "status": "modified",
        "additions": 2,
        "deletions": 5,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FModuleDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FModuleDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FModuleDependency.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -12,11 +12,8 @@ class ModuleDependency extends Dependency {\n \t\tthis.userRequest = request;\n \t}\n \n-\tisEqualResource(other) {\n-\t\tif(!(other instanceof ModuleDependency))\n-\t\t\treturn false;\n-\n-\t\treturn this.request === other.request;\n+\tgetResourceIdentifier() {\n+\t\treturn `module${this.request}`;\n \t}\n }\n "
      },
      {
        "sha": "585f5fc0c84ee03da0c1cd6d05dd5e70f1fcc599",
        "filename": "lib/dependencies/NullDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FNullDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2Fdependencies%2FNullDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FNullDependency.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -10,10 +10,6 @@ class NullDependency extends Dependency {\n \t\treturn \"null\";\n \t}\n \n-\tisEqualResource() {\n-\t\treturn false;\n-\t}\n-\n \tupdateHash() {}\n }\n "
      },
      {
        "sha": "6543458dfbd2dcb0ee6edd90081a919f618b6c4b",
        "filename": "lib/optimize/ModuleConcatenationPlugin.js",
        "status": "modified",
        "additions": 24,
        "deletions": 18,
        "changes": 42,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2Foptimize%2FModuleConcatenationPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FModuleConcatenationPlugin.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -9,6 +9,7 @@ const ModuleHotAcceptDependency = require(\"../dependencies/ModuleHotAcceptDepend\n const ModuleHotDeclineDependency = require(\"../dependencies/ModuleHotDeclineDependency\");\n const ConcatenatedModule = require(\"./ConcatenatedModule\");\n const HarmonyCompatibilityDependency = require(\"../dependencies/HarmonyCompatibilityDependency\");\n+const StackedSetMap = require(\"../util/StackedSetMap\");\n \n const formatBailoutReason = msg => {\n \treturn \"ModuleConcatenation bailout: \" + msg;\n@@ -126,7 +127,7 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t}\n \t\t\t\t\tif(!currentConfiguration.isEmpty()) {\n \t\t\t\t\t\tconcatConfigurations.push(currentConfiguration);\n-\t\t\t\t\t\tfor(const module of currentConfiguration.modules) {\n+\t\t\t\t\t\tfor(const module of currentConfiguration.getModules()) {\n \t\t\t\t\t\t\tif(module !== currentConfiguration.rootModule)\n \t\t\t\t\t\t\t\tusedAsInner.add(module);\n \t\t\t\t\t\t}\n@@ -143,9 +144,9 @@ class ModuleConcatenationPlugin {\n \t\t\t\tfor(const concatConfiguration of concatConfigurations) {\n \t\t\t\t\tif(usedModules.has(concatConfiguration.rootModule))\n \t\t\t\t\t\tcontinue;\n-\t\t\t\t\tconst newModule = new ConcatenatedModule(concatConfiguration.rootModule, Array.from(concatConfiguration.modules));\n-\t\t\t\t\tconcatConfiguration.sortWarnings();\n-\t\t\t\t\tfor(const warning of concatConfiguration.warnings) {\n+\t\t\t\t\tconst modules = concatConfiguration.getModules();\n+\t\t\t\t\tconst newModule = new ConcatenatedModule(concatConfiguration.rootModule, modules);\n+\t\t\t\t\tfor(const warning of concatConfiguration.getWarningsSorted()) {\n \t\t\t\t\t\tnewModule.optimizationBailout.push((requestShortener) => {\n \t\t\t\t\t\t\tconst reason = getBailoutReason(warning[0], requestShortener);\n \t\t\t\t\t\t\tconst reasonWithPrefix = reason ? ` (<- ${reason})` : \"\";\n@@ -156,7 +157,7 @@ class ModuleConcatenationPlugin {\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tconst chunks = concatConfiguration.rootModule.getChunks();\n-\t\t\t\t\tfor(const m of concatConfiguration.modules) {\n+\t\t\t\t\tfor(const m of modules) {\n \t\t\t\t\t\tusedModules.add(m);\n \t\t\t\t\t\tchunks.forEach(chunk => chunk.removeModule(m));\n \t\t\t\t\t}\n@@ -259,10 +260,16 @@ class ModuleConcatenationPlugin {\n }\n \n class ConcatConfiguration {\n-\tconstructor(rootModule) {\n+\tconstructor(rootModule, cloneFrom) {\n \t\tthis.rootModule = rootModule;\n-\t\tthis.modules = new Set([rootModule]);\n-\t\tthis.warnings = new Map();\n+\t\tif(cloneFrom) {\n+\t\t\tthis.modules = cloneFrom.modules.createChild(5);\n+\t\t\tthis.warnings = cloneFrom.warnings.createChild(5);\n+\t\t} else {\n+\t\t\tthis.modules = new StackedSetMap();\n+\t\t\tthis.modules.add(rootModule);\n+\t\t\tthis.warnings = new StackedSetMap();\n+\t\t}\n \t}\n \n \tadd(module) {\n@@ -281,8 +288,8 @@ class ConcatConfiguration {\n \t\tthis.warnings.set(module, problem);\n \t}\n \n-\tsortWarnings() {\n-\t\tthis.warnings = new Map(Array.from(this.warnings).sort((a, b) => {\n+\tgetWarningsSorted() {\n+\t\treturn new Map(this.warnings.asPairArray().sort((a, b) => {\n \t\t\tconst ai = a[0].identifier();\n \t\t\tconst bi = b[0].identifier();\n \t\t\tif(ai < bi) return -1;\n@@ -291,19 +298,18 @@ class ConcatConfiguration {\n \t\t}));\n \t}\n \n+\tgetModules() {\n+\t\treturn this.modules.asArray();\n+\t}\n+\n \tclone() {\n-\t\tconst clone = new ConcatConfiguration(this.rootModule);\n-\t\tfor(const module of this.modules)\n-\t\t\tclone.add(module);\n-\t\tfor(const pair of this.warnings)\n-\t\t\tclone.addWarning(pair[0], pair[1]);\n-\t\treturn clone;\n+\t\treturn new ConcatConfiguration(this.rootModule, this);\n \t}\n \n \tset(config) {\n \t\tthis.rootModule = config.rootModule;\n-\t\tthis.modules = new Set(config.modules);\n-\t\tthis.warnings = new Map(config.warnings);\n+\t\tthis.modules = config.modules;\n+\t\tthis.warnings = config.warnings;\n \t}\n }\n "
      },
      {
        "sha": "a67a9e096eb91b60cb34aa8e883dbaa7950fe59f",
        "filename": "lib/util/StackedSetMap.js",
        "status": "modified",
        "additions": 16,
        "deletions": 2,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/lib%2Futil%2FStackedSetMap.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/lib%2Futil%2FStackedSetMap.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FStackedSetMap.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -66,6 +66,7 @@ class StackedSetMap {\n \t}\n \n \t_compress() {\n+\t\tif(this.stack.length === 1) return;\n \t\tthis.map = new Map();\n \t\tfor(const data of this.stack) {\n \t\t\tfor(const pair of data) {\n@@ -78,14 +79,27 @@ class StackedSetMap {\n \t\tthis.stack = [this.map];\n \t}\n \n+\tasArray() {\n+\t\tthis._compress();\n+\t\treturn Array.from(this.map.entries(), pair => pair[0]);\n+\t}\n+\n \tasSet() {\n+\t\treturn new Set(this.asArray());\n+\t}\n+\n+\tasPairArray() {\n \t\tthis._compress();\n-\t\treturn new Set(Array.from(this.map.entries()).map(pair => pair[0]));\n+\t\treturn Array.from(this.map.entries(), pair => pair[1] === UNDEFINED_MARKER ? [pair[0], undefined] : pair);\n \t}\n \n \tasMap() {\n+\t\treturn new Map(this.asPairArray());\n+\t}\n+\n+\tget size() {\n \t\tthis._compress();\n-\t\treturn new Map(this.map.entries());\n+\t\treturn this.map.size;\n \t}\n \n \tcreateChild() {"
      },
      {
        "sha": "5f6f1f5eba0fed4bb8daf8457b3dd0324e04354c",
        "filename": "test/NullDependency.unittest.js",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/4655836ee8313bb2d582af46921986af06a449f0/test%2FNullDependency.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/4655836ee8313bb2d582af46921986af06a449f0/test%2FNullDependency.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FNullDependency.unittest.js?ref=4655836ee8313bb2d582af46921986af06a449f0",
        "patch": "@@ -16,8 +16,6 @@ describe(\"NullDependency\", () => {\n \n \t\tit(\"has a null type\", () => env.nullDependency.type.should.be.exactly(\"null\"));\n \n-\t\tit(\"is not an equal resource\", () => env.nullDependency.isEqualResource().should.be.False());\n-\n \t\tit(\"has update hash function\", () => env.nullDependency.updateHash.should.be.Function());\n \n \t\tit(\"does not update hash\", () => {"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/6470",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/6470/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/6470/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/6470/events",
    "html_url": "https://github.com/webpack/webpack/pull/6470",
    "id": 296167087,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4NDM5OTIx",
    "number": 6470,
    "title": "replace Async with Neo-Async",
    "user": {
      "login": "suguru03",
      "id": 8013633,
      "node_id": "MDQ6VXNlcjgwMTM2MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8013633?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/suguru03",
      "html_url": "https://github.com/suguru03",
      "followers_url": "https://api.github.com/users/suguru03/followers",
      "following_url": "https://api.github.com/users/suguru03/following{/other_user}",
      "gists_url": "https://api.github.com/users/suguru03/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/suguru03/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/suguru03/subscriptions",
      "organizations_url": "https://api.github.com/users/suguru03/orgs",
      "repos_url": "https://api.github.com/users/suguru03/repos",
      "events_url": "https://api.github.com/users/suguru03/events{/privacy}",
      "received_events_url": "https://api.github.com/users/suguru03/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2018-02-11T06:55:56Z",
    "updated_at": "2018-02-19T15:43:02Z",
    "closed_at": "2018-02-19T13:07:00Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/6470",
      "html_url": "https://github.com/webpack/webpack/pull/6470",
      "diff_url": "https://github.com/webpack/webpack/pull/6470.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/6470.patch",
      "merged_at": "2018-02-19T13:06:59Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nPerformance improvement\r\n\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nNo, but it shouldn't affect any logic. I ran [the latest test cases](https://travis-ci.org/suguru03/webpack) with my changes.\r\n\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\n[The latest Bluebird benchmark](https://github.com/suguru03/bluebird/tree/add-aigle/benchmark)\r\n[Neo-Async benchmark](https://github.com/suguru03/neo-async#benchmark)\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nI replaced Async with Neo-Async to improve performance. (https://github.com/webpack/webpack/issues/4778)\r\nI'm really inspired by [this tweet](https://twitter.com/TheLarkInn/status/943606514509418496) and [the contributing guideline](https://github.com/webpack/webpack#contributing), I would love to start contributing performance improvement. 😊\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nNo\r\n\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/6470/reactions",
      "total_count": 7,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 7,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/6470/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "afca1e4d7c47718432c32669a86814b166ec9098",
        "filename": "examples/build-common.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/examples%2Fbuild-common.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/examples%2Fbuild-common.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/examples%2Fbuild-common.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -8,7 +8,7 @@ const cp = require(\"child_process\");\n const path = require(\"path\");\n const tc = require(\"./template-common\");\n const fs = require(\"fs\");\n-const async = require(\"async\");\n+const async = require(\"neo-async\");\n \n const extraArgs = \"\";\n "
      },
      {
        "sha": "fd0c75609b7fd428f60625ce4ae430a76bd2274c",
        "filename": "lib/AutomaticPrefetchPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FAutomaticPrefetchPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FAutomaticPrefetchPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FAutomaticPrefetchPlugin.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -4,7 +4,7 @@\n */\n \"use strict\";\n \n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n const PrefetchDependency = require(\"./dependencies/PrefetchDependency\");\n const NormalModule = require(\"./NormalModule\");\n "
      },
      {
        "sha": "4a11e02ed52e8a384d295558aace648c6be661f5",
        "filename": "lib/CachePlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FCachePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FCachePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCachePlugin.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -4,7 +4,7 @@\n */\n \"use strict\";\n \n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n \n class CachePlugin {\n \tconstructor(cache) {"
      },
      {
        "sha": "6fcbf42e00fa143d9af4bdb5dac20f8c72398cd6",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -4,7 +4,7 @@\n \t*/\n \"use strict\";\n \n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n const util = require(\"util\");\n const Tapable = require(\"tapable\").Tapable;\n const SyncHook = require(\"tapable\").SyncHook;"
      },
      {
        "sha": "2787734e64161a0ffc8ef410205627d0a6d17230",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -4,7 +4,7 @@\n */\n \"use strict\";\n \n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n const path = require(\"path\");\n const util = require(\"util\");\n const Tapable = require(\"tapable\").Tapable;\n@@ -255,7 +255,7 @@ class Compiler extends Tapable {\n \t\tconst emitFiles = (err) => {\n \t\t\tif(err) return callback(err);\n \n-\t\t\tasyncLib.forEach(Object.keys(compilation.assets), (file, callback) => {\n+\t\t\tasyncLib.forEach(compilation.assets, (source, file, callback) => {\n \n \t\t\t\tlet targetFile = file;\n \t\t\t\tconst queryStringIdx = targetFile.indexOf(\"?\");\n@@ -266,7 +266,6 @@ class Compiler extends Tapable {\n \t\t\t\tconst writeOut = (err) => {\n \t\t\t\t\tif(err) return callback(err);\n \t\t\t\t\tconst targetPath = this.outputFileSystem.join(outputPath, targetFile);\n-\t\t\t\t\tconst source = compilation.assets[file];\n \t\t\t\t\tif(source.existsAt === targetPath) {\n \t\t\t\t\t\tsource.emitted = false;\n \t\t\t\t\t\treturn callback();"
      },
      {
        "sha": "faadb758fe032957193222d9e4f75859245c757f",
        "filename": "lib/ContextModuleFactory.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FContextModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FContextModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModuleFactory.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -4,7 +4,7 @@\n */\n \"use strict\";\n \n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n const path = require(\"path\");\n \n const Tapable = require(\"tapable\").Tapable;"
      },
      {
        "sha": "d05e15ad21284007e1294122f0521581b1df1162",
        "filename": "lib/LibManifestPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FLibManifestPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FLibManifestPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FLibManifestPlugin.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -5,7 +5,7 @@\n \"use strict\";\n \n const path = require(\"path\");\n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n \n class LibManifestPlugin {\n \tconstructor(options) {"
      },
      {
        "sha": "84165f90428755917daa8eb6e1a03a7b68bccf57",
        "filename": "lib/MultiCompiler.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FMultiCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FMultiCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FMultiCompiler.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -7,7 +7,7 @@\n const Tapable = require(\"tapable\").Tapable;\n const SyncHook = require(\"tapable\").SyncHook;\n const MultiHook = require(\"tapable\").MultiHook;\n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n const MultiWatching = require(\"./MultiWatching\");\n const MultiStats = require(\"./MultiStats\");\n "
      },
      {
        "sha": "0e586d936dac770a23eb945fefef3294c87c93d5",
        "filename": "lib/MultiWatching.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FMultiWatching.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FMultiWatching.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FMultiWatching.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -4,7 +4,7 @@\n */\n \"use strict\";\n \n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n \n class MultiWatching {\n \tconstructor(watchings, compiler) {"
      },
      {
        "sha": "df3f844a8da65500f754cfbb4b083330e87553ed",
        "filename": "lib/NormalModuleFactory.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FNormalModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/lib%2FNormalModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModuleFactory.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -4,7 +4,7 @@\n  */\n \"use strict\";\n \n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n const Tapable = require(\"tapable\").Tapable;\n const AsyncSeriesWaterfallHook = require(\"tapable\").AsyncSeriesWaterfallHook;\n const SyncWaterfallHook = require(\"tapable\").SyncWaterfallHook;"
      },
      {
        "sha": "0233ff86704ff6a0ae9dce70f978fcb4724892a2",
        "filename": "package.json",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -9,14 +9,14 @@\n     \"acorn-dynamic-import\": \"^3.0.0\",\n     \"ajv\": \"^6.1.0\",\n     \"ajv-keywords\": \"^3.1.0\",\n-    \"async\": \"^2.1.2\",\n     \"chrome-trace-event\": \"^0.1.1\",\n     \"enhanced-resolve\": \"^4.0.0-beta.2\",\n     \"eslint-scope\": \"^3.7.1\",\n     \"loader-runner\": \"^2.3.0\",\n     \"loader-utils\": \"^1.1.0\",\n     \"memory-fs\": \"~0.4.1\",\n     \"mkdirp\": \"~0.5.0\",\n+    \"neo-async\": \"^2.5.0\",\n     \"node-libs-browser\": \"^2.0.0\",\n     \"schema-utils\": \"^0.4.2\",\n     \"tapable\": \"^1.0.0-beta.5\","
      },
      {
        "sha": "f626a63044c46a427781069dce4195b9ca060dfc",
        "filename": "test/BenchmarkTestCases.benchmark.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/test%2FBenchmarkTestCases.benchmark.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/test%2FBenchmarkTestCases.benchmark.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FBenchmarkTestCases.benchmark.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -3,7 +3,7 @@\n require(\"should\");\n const path = require(\"path\");\n const fs = require(\"fs\");\n-const asyncLib = require(\"async\");\n+const asyncLib = require(\"neo-async\");\n var Test = require(\"mocha/lib/test\");\n \n const Benchmark = require(\"benchmark\");"
      },
      {
        "sha": "cb27f7cf273d7c3adc3bba1f50f6c85af7205076",
        "filename": "test/cases/loaders/issue-2299/loader/index.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/test%2Fcases%2Floaders%2Fissue-2299%2Floader%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/test%2Fcases%2Floaders%2Fissue-2299%2Floader%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fcases%2Floaders%2Fissue-2299%2Floader%2Findex.js?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -1,4 +1,4 @@\n-var asyncLib = require(\"async\");\n+var asyncLib = require(\"neo-async\");\n module.exports = function(content) {\n \tvar cb = this.async();\n \tvar json = JSON.parse(content);"
      },
      {
        "sha": "bfa39cfcf1249580fd639bbe6b2f2aa3287dc95a",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/864e5631738b79c3a70204deda756b81e6eb566d/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/864e5631738b79c3a70204deda756b81e6eb566d/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=864e5631738b79c3a70204deda756b81e6eb566d",
        "patch": "@@ -2616,6 +2616,10 @@ negotiator@0.5.3:\n   version \"0.5.3\"\n   resolved \"https://registry.yarnpkg.com/negotiator/-/negotiator-0.5.3.tgz#269d5c476810ec92edbe7b6c2f28316384f9a7e8\"\n \n+neo-async@^2.5.0:\n+  version \"2.5.0\"\n+  resolved \"https://registry.yarnpkg.com/neo-async/-/neo-async-2.5.0.tgz#76b1c823130cca26acfbaccc8fbaf0a2fa33b18f\"\n+\n node-fetch@^1.0.1:\n   version \"1.7.3\"\n   resolved \"https://registry.yarnpkg.com/node-fetch/-/node-fetch-1.7.3.tgz#980f6f72d85211a5347c6b2bc18c5b84c3eb47ef\""
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/7056",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/7056/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/7056/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/7056/events",
    "html_url": "https://github.com/webpack/webpack/pull/7056",
    "id": 314550443,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTgxNzg4MDQ0",
    "number": 7056,
    "title": "add support for link preload/prefetch",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2018-04-16T08:36:34Z",
    "updated_at": "2018-04-17T09:06:42Z",
    "closed_at": "2018-04-17T09:06:38Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/7056",
      "html_url": "https://github.com/webpack/webpack/pull/7056",
      "diff_url": "https://github.com/webpack/webpack/pull/7056.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/7056.patch",
      "merged_at": "2018-04-17T09:06:38Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nTODO\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nThis adds support for a `webpackPreload` resp. `webpackPrefetch` magic comment at `import()` which automatically adds `<link rel=\"preload/prefetch\">` tags after the parent chunk is loaded. This prefetches the scripts when the browser is idle and improves latency resp. preloads a script that is expected to be used imediately. When multiple `import()`s are accessible they are prefetch/preloading by importance (highest first, can be provided as number argument).\r\n\r\nPrefetching is similar to precaching the whole application in a service worker, but this PR only prefetches the next possible on-demand chunks and in the order you specify. This saves bandwidth and more likely accessed chunks can be prefetched first.\r\n\r\nPreload allows the browser to prepare the script in background which also improves performance, and elimitates waterfall-like `import()`. Use preload wisely and only when you know what you are doing.\r\n\r\nPreloading/prefetching is also available on entry points but this requires support by the plugin you are using to generate the HTML. webpack now provides preload/prefetch info in the json stats object in `entrypoints.childAssets`. This can be used to generate `<link>` tags in the HTML (Note that the normal assets for the entrypoint also need to be added as `<link>` tags to ensure they load first, when using preload).\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nI hope not, but there are a few API changes which should be backward-compatible\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\nsee also https://github.com/GoogleChromeLabs/preload-webpack-plugin. Compared to this plugin this PR prefetches only the next layer in the application and allows to specify the order. cc @addyosmani\r\n\r\nAs guideline:\r\n* add `webpackPrefetch: true` to `import()`s that the user will likely visit in future.\r\n* add `webpackPreload: true` to `import()`s that your code will always load immediately.\r\n* don't add anything if it's unlikely that the user will visit this in future (don't waste bandwidth).\r\n* add `webpackPrefetch: -10` to `import()`s that the user will probably visit in future and low latency is very important.",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/7056/reactions",
      "total_count": 29,
      "+1": 24,
      "-1": 0,
      "laugh": 0,
      "hooray": 3,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/7056/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "3bf22d2e2977551d68bb4554d758d8b2e1def507",
        "filename": "lib/AsyncDependenciesBlock.js",
        "status": "modified",
        "additions": 16,
        "deletions": 3,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FAsyncDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FAsyncDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FAsyncDependenciesBlock.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -6,15 +6,28 @@\n const DependenciesBlock = require(\"./DependenciesBlock\");\n \n module.exports = class AsyncDependenciesBlock extends DependenciesBlock {\n-\tconstructor(name, module, loc, request) {\n+\tconstructor(groupOptions, module, loc, request) {\n \t\tsuper();\n-\t\tthis.chunkName = name;\n+\t\tif (typeof groupOptions === \"string\") {\n+\t\t\tgroupOptions = { name: groupOptions };\n+\t\t} else if (!groupOptions) {\n+\t\t\tgroupOptions = { name: undefined };\n+\t\t}\n+\t\tthis.groupOptions = groupOptions;\n \t\tthis.chunkGroup = undefined;\n \t\tthis.module = module;\n \t\tthis.loc = loc;\n \t\tthis.request = request;\n \t}\n \n+\tget chunkName() {\n+\t\treturn this.groupOptions.name;\n+\t}\n+\n+\tset chunkName(value) {\n+\t\tthis.groupOptions.name = value;\n+\t}\n+\n \tget chunks() {\n \t\tthrow new Error(\"Moved to AsyncDependenciesBlock.chunkGroup\");\n \t}\n@@ -24,7 +37,7 @@ module.exports = class AsyncDependenciesBlock extends DependenciesBlock {\n \t}\n \n \tupdateHash(hash) {\n-\t\thash.update(this.chunkName || \"\");\n+\t\thash.update(JSON.stringify(this.groupOptions));\n \t\thash.update(\n \t\t\t(this.chunkGroup &&\n \t\t\t\tthis.chunkGroup.chunks"
      },
      {
        "sha": "4e88ad223cc6ee9b15819ba07a3ca3a8a808d997",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 58,
        "deletions": 2,
        "changes": 60,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -170,8 +170,8 @@ class Chunk {\n \t\t\tif (aItem.done) return 0;\n \t\t\tconst aModuleIdentifier = aItem.value.identifier();\n \t\t\tconst bModuleIdentifier = bItem.value.identifier();\n-\t\t\tif (aModuleIdentifier > bModuleIdentifier) return -1;\n-\t\t\tif (aModuleIdentifier < bModuleIdentifier) return 1;\n+\t\t\tif (aModuleIdentifier < bModuleIdentifier) return -1;\n+\t\t\tif (aModuleIdentifier > bModuleIdentifier) return 1;\n \t\t}\n \t}\n \n@@ -361,6 +361,62 @@ class Chunk {\n \t\t};\n \t}\n \n+\tgetChildIdsByOrders() {\n+\t\tconst lists = new Map();\n+\t\tfor (const group of this.groupsIterable) {\n+\t\t\tif (group.chunks[group.chunks.length - 1] === this) {\n+\t\t\t\tfor (const childGroup of group.childrenIterable) {\n+\t\t\t\t\t// TODO webpack 5 remove this check for options\n+\t\t\t\t\tif (typeof childGroup.options === \"object\") {\n+\t\t\t\t\t\tfor (const key of Object.keys(childGroup.options)) {\n+\t\t\t\t\t\t\tif (key.endsWith(\"Order\")) {\n+\t\t\t\t\t\t\t\tconst name = key.substr(0, key.length - \"Order\".length);\n+\t\t\t\t\t\t\t\tlet list = lists.get(name);\n+\t\t\t\t\t\t\t\tif (list === undefined) lists.set(name, (list = []));\n+\t\t\t\t\t\t\t\tlist.push({\n+\t\t\t\t\t\t\t\t\torder: childGroup.options[key],\n+\t\t\t\t\t\t\t\t\tgroup: childGroup\n+\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tconst result = Object.create(null);\n+\t\tfor (const [name, list] of lists) {\n+\t\t\tlist.sort((a, b) => {\n+\t\t\t\tconst cmp = b.order - a.order;\n+\t\t\t\tif (cmp !== 0) return cmp;\n+\t\t\t\t// TOOD webpack 5 remove this check of compareTo\n+\t\t\t\tif (a.group.compareTo) return a.group.compareTo(b.group);\n+\t\t\t\treturn 0;\n+\t\t\t});\n+\t\t\tresult[name] = Array.from(\n+\t\t\t\tlist.reduce((set, item) => {\n+\t\t\t\t\tfor (const chunk of item.group.chunks) set.add(chunk.id);\n+\t\t\t\t\treturn set;\n+\t\t\t\t}, new Set())\n+\t\t\t);\n+\t\t}\n+\t\treturn result;\n+\t}\n+\n+\tgetChildIdsByOrdersMap() {\n+\t\tconst chunkMaps = Object.create(null);\n+\n+\t\tfor (const chunk of this.getAllAsyncChunks()) {\n+\t\t\tconst data = chunk.getChildIdsByOrders();\n+\t\t\tfor (const key of Object.keys(data)) {\n+\t\t\t\tlet chunkMap = chunkMaps[key];\n+\t\t\t\tif (chunkMap === undefined)\n+\t\t\t\t\tchunkMaps[key] = chunkMap = Object.create(null);\n+\t\t\t\tchunkMap[chunk.id] = data[key];\n+\t\t\t}\n+\t\t}\n+\t\treturn chunkMaps;\n+\t}\n+\n \tgetChunkModuleMaps(filterFn) {\n \t\tconst chunkModuleIdMap = Object.create(null);\n \t\tconst chunkModuleHashMap = Object.create(null);"
      },
      {
        "sha": "23b2c219c758f2291509cd5a08a5dc906aa2e853",
        "filename": "lib/ChunkGroup.js",
        "status": "modified",
        "additions": 90,
        "deletions": 2,
        "changes": 92,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FChunkGroup.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FChunkGroup.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunkGroup.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -26,16 +26,45 @@ const sortOrigin = (a, b) => {\n };\n \n class ChunkGroup {\n-\tconstructor(name) {\n+\tconstructor(options) {\n+\t\tif (typeof options === \"string\") {\n+\t\t\toptions = { name: options };\n+\t\t} else if (!options) {\n+\t\t\toptions = { name: undefined };\n+\t\t}\n \t\tthis.groupDebugId = debugId++;\n-\t\tthis.name = name;\n+\t\tthis.options = options;\n \t\tthis._children = new SortableSet(undefined, sortById);\n \t\tthis._parents = new SortableSet(undefined, sortById);\n \t\tthis._blocks = new SortableSet();\n \t\tthis.chunks = [];\n \t\tthis.origins = [];\n \t}\n \n+\taddOptions(options) {\n+\t\tfor (const key of Object.keys(options)) {\n+\t\t\tif (this.options[key] === undefined) {\n+\t\t\t\tthis.options[key] = options[key];\n+\t\t\t} else if (this.options[key] !== options[key]) {\n+\t\t\t\tif (key.endsWith(\"Order\")) {\n+\t\t\t\t\tthis.options[key] = Math.max(this.options[key], options[key]);\n+\t\t\t\t} else {\n+\t\t\t\t\tthrow new Error(\n+\t\t\t\t\t\t`ChunkGroup.addOptions: No option merge strategy for ${key}`\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tget name() {\n+\t\treturn this.options.name;\n+\t}\n+\n+\tset name(value) {\n+\t\tthis.options.name = value;\n+\t}\n+\n \t/* istanbul ignore next */\n \tget debugId() {\n \t\treturn Array.from(this.chunks, x => x.debugId).join(\"+\");\n@@ -222,6 +251,18 @@ class ChunkGroup {\n \t\treturn false;\n \t}\n \n+\tgetFiles() {\n+\t\tconst files = new Set();\n+\n+\t\tfor (const chunk of this.chunks) {\n+\t\t\tfor (const file of chunk.files) {\n+\t\t\t\tfiles.add(file);\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn Array.from(files);\n+\t}\n+\n \tremove(reason) {\n \t\t// cleanup parents\n \t\tfor (const parentChunkGroup of this._parents) {\n@@ -269,6 +310,53 @@ class ChunkGroup {\n \t\tthis._children.sort();\n \t}\n \n+\tcompareTo(otherGroup) {\n+\t\tif (this.chunks.length > otherGroup.chunks.length) return -1;\n+\t\tif (this.chunks.length < otherGroup.chunks.length) return 1;\n+\t\tconst a = this.chunks[Symbol.iterator]();\n+\t\tconst b = otherGroup.chunks[Symbol.iterator]();\n+\t\t// eslint-disable-next-line\n+\t\twhile (true) {\n+\t\t\tconst aItem = a.next();\n+\t\t\tconst bItem = b.next();\n+\t\t\tif (aItem.done) return 0;\n+\t\t\tconst cmp = aItem.value.compareTo(bItem.value);\n+\t\t\tif (cmp !== 0) return cmp;\n+\t\t}\n+\t}\n+\n+\tgetChildrenByOrders() {\n+\t\tconst lists = new Map();\n+\t\tfor (const childGroup of this._children) {\n+\t\t\t// TODO webpack 5 remove this check for options\n+\t\t\tif (typeof childGroup.options === \"object\") {\n+\t\t\t\tfor (const key of Object.keys(childGroup.options)) {\n+\t\t\t\t\tif (key.endsWith(\"Order\")) {\n+\t\t\t\t\t\tconst name = key.substr(0, key.length - \"Order\".length);\n+\t\t\t\t\t\tlet list = lists.get(name);\n+\t\t\t\t\t\tif (list === undefined) lists.set(name, (list = []));\n+\t\t\t\t\t\tlist.push({\n+\t\t\t\t\t\t\torder: childGroup.options[key],\n+\t\t\t\t\t\t\tgroup: childGroup\n+\t\t\t\t\t\t});\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tconst result = Object.create(null);\n+\t\tfor (const [name, list] of lists) {\n+\t\t\tlist.sort((a, b) => {\n+\t\t\t\tconst cmp = b.order - a.order;\n+\t\t\t\tif (cmp !== 0) return cmp;\n+\t\t\t\t// TOOD webpack 5 remove this check of compareTo\n+\t\t\t\tif (a.group.compareTo) return a.group.compareTo(b.group);\n+\t\t\t\treturn 0;\n+\t\t\t});\n+\t\t\tresult[name] = list.map(i => i.group);\n+\t\t}\n+\t\treturn result;\n+\t}\n+\n \tcheckConstraints() {\n \t\tconst chunk = this;\n \t\tfor (const child of chunk._children) {"
      },
      {
        "sha": "baaf1e3ff7cd90fbb9156f5d9e35610f98e720bb",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 15,
        "deletions": 3,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1006,17 +1006,22 @@ class Compilation extends Tapable {\n \t\t}\n \t}\n \n-\taddChunkInGroup(name, module, loc, request) {\n+\taddChunkInGroup(groupOptions, module, loc, request) {\n+\t\tif (typeof groupOptions === \"string\") {\n+\t\t\tgroupOptions = { name: groupOptions };\n+\t\t}\n+\t\tconst name = groupOptions.name;\n \t\tif (name) {\n \t\t\tconst chunkGroup = this.namedChunkGroups.get(name);\n \t\t\tif (chunkGroup !== undefined) {\n+\t\t\t\tchunkGroup.addOptions(groupOptions);\n \t\t\t\tif (module) {\n \t\t\t\t\tchunkGroup.addOrigin(module, loc, request);\n \t\t\t\t}\n \t\t\t\treturn chunkGroup;\n \t\t\t}\n \t\t}\n-\t\tconst chunkGroup = new ChunkGroup(name);\n+\t\tconst chunkGroup = new ChunkGroup(groupOptions);\n \t\tif (module) chunkGroup.addOrigin(module, loc, request);\n \t\tconst chunk = this.addChunk(name);\n \n@@ -1190,11 +1195,18 @@ class Compilation extends Tapable {\n \t\t\t\t\t);\n \t\t\t\t\tc = chunkGroup;\n \t\t\t\t} else {\n-\t\t\t\t\tc = this.addChunkInGroup(b.chunkName, module, b.loc, b.request);\n+\t\t\t\t\tc = this.addChunkInGroup(\n+\t\t\t\t\t\tb.groupOptions || b.chunkName,\n+\t\t\t\t\t\tmodule,\n+\t\t\t\t\t\tb.loc,\n+\t\t\t\t\t\tb.request\n+\t\t\t\t\t);\n \t\t\t\t\tblockChunkGroups.set(b, c);\n \t\t\t\t\tallCreatedChunkGroups.add(c);\n \t\t\t\t}\n \t\t\t} else {\n+\t\t\t\t// TODO webpack 5 remove addOptions check\n+\t\t\t\tif (c.addOptions) c.addOptions(b.groupOptions);\n \t\t\t\tc.addOrigin(module, b.loc, b.request);\n \t\t\t}\n "
      },
      {
        "sha": "fd186bc90f6270d0ae9d67d9c5f9ea145fa8f789",
        "filename": "lib/ContextModule.js",
        "status": "modified",
        "additions": 17,
        "deletions": 3,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FContextModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FContextModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModule.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -12,7 +12,7 @@ const Template = require(\"./Template\");\n \n class ContextModule extends Module {\n \t// type ContextMode = \"sync\" | \"eager\" | \"weak\" | \"async-weak\" | \"lazy\" | \"lazy-once\"\n-\t// type ContextOptions = { resource: string, recursive: boolean, regExp: RegExp, addon?: string, mode?: ContextMode, chunkName?: string, include?: RegExp, exclude?: RegExp }\n+\t// type ContextOptions = { resource: string, recursive: boolean, regExp: RegExp, addon?: string, mode?: ContextMode, chunkName?: string, include?: RegExp, exclude?: RegExp, groupOptions?: Object }\n \t// resolveDependencies: (fs: FS, options: ContextOptions, (err: Error?, dependencies: Dependency[]) => void) => void\n \t// options: ContextOptions\n \tconstructor(resolveDependencies, options) {\n@@ -81,6 +81,11 @@ class ContextModule extends Module {\n \t\tif (this.options.regExp) identifier += ` ${this.options.regExp}`;\n \t\tif (this.options.include) identifier += ` include: ${this.options.include}`;\n \t\tif (this.options.exclude) identifier += ` exclude: ${this.options.exclude}`;\n+\t\tif (this.options.groupOptions) {\n+\t\t\tidentifier += ` groupOptions: ${JSON.stringify(\n+\t\t\t\tthis.options.groupOptions\n+\t\t\t)}`;\n+\t\t}\n \t\tif (this.options.namespaceObject === \"strict\")\n \t\t\tidentifier += \" strict namespace object\";\n \t\telse if (this.options.namespaceObject) identifier += \" namespace object\";\n@@ -106,6 +111,11 @@ class ContextModule extends Module {\n \t\t\tidentifier += ` include: ${this.prettyRegExp(this.options.include + \"\")}`;\n \t\tif (this.options.exclude)\n \t\t\tidentifier += ` exclude: ${this.prettyRegExp(this.options.exclude + \"\")}`;\n+\t\tif (this.options.groupOptions) {\n+\t\t\tconst groupOptions = this.options.groupOptions;\n+\t\t\tfor (const key of Object.keys(groupOptions))\n+\t\t\t\tidentifier += ` ${key}: ${groupOptions[key]}`;\n+\t\t}\n \t\tif (this.options.namespaceObject === \"strict\")\n \t\t\tidentifier += \" strict namespace object\";\n \t\telse if (this.options.namespaceObject) identifier += \" namespace object\";\n@@ -170,7 +180,9 @@ class ContextModule extends Module {\n \t\t\t\t// and add that block to this context\n \t\t\t\tif (dependencies.length > 0) {\n \t\t\t\t\tconst block = new AsyncDependenciesBlock(\n-\t\t\t\t\t\tthis.options.chunkName,\n+\t\t\t\t\t\tObject.assign({}, this.options.groupOptions, {\n+\t\t\t\t\t\t\tname: this.options.chunkName\n+\t\t\t\t\t\t}),\n \t\t\t\t\t\tthis\n \t\t\t\t\t);\n \t\t\t\t\tfor (const dep of dependencies) {\n@@ -202,7 +214,9 @@ class ContextModule extends Module {\n \t\t\t\t\t\t);\n \t\t\t\t\t}\n \t\t\t\t\tconst block = new AsyncDependenciesBlock(\n-\t\t\t\t\t\tchunkName,\n+\t\t\t\t\t\tObject.assign({}, this.options.groupOptions, {\n+\t\t\t\t\t\t\tname: chunkName\n+\t\t\t\t\t\t}),\n \t\t\t\t\t\tdep.module,\n \t\t\t\t\t\tdep.loc,\n \t\t\t\t\t\tdep.userRequest"
      },
      {
        "sha": "faaba3abc71ad2129d39bbe6fa3404780864a6ab",
        "filename": "lib/Entrypoint.js",
        "status": "modified",
        "additions": 0,
        "deletions": 12,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FEntrypoint.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FEntrypoint.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FEntrypoint.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -16,18 +16,6 @@ class Entrypoint extends ChunkGroup {\n \t\treturn true;\n \t}\n \n-\tgetFiles() {\n-\t\tconst files = new Set();\n-\n-\t\tfor (const chunk of this.chunks) {\n-\t\t\tfor (const file of chunk.files) {\n-\t\t\t\tfiles.add(file);\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn Array.from(files);\n-\t}\n-\n \tsetRuntimeChunk(chunk) {\n \t\tthis.runtimeChunk = chunk;\n \t}"
      },
      {
        "sha": "485080fef2680d08479e367b12ff172bcf63580c",
        "filename": "lib/Stats.js",
        "status": "modified",
        "additions": 56,
        "deletions": 2,
        "changes": 58,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FStats.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2FStats.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FStats.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -401,12 +401,39 @@ class Stats {\n \t\t\tfor (const keyValuePair of compilation.entrypoints) {\n \t\t\t\tconst name = keyValuePair[0];\n \t\t\t\tconst ep = keyValuePair[1];\n+\t\t\t\tconst children = ep.getChildrenByOrders();\n \t\t\t\tobj.entrypoints[name] = {\n \t\t\t\t\tchunks: ep.chunks.map(c => c.id),\n \t\t\t\t\tassets: ep.chunks.reduce(\n \t\t\t\t\t\t(array, c) => array.concat(c.files || []),\n \t\t\t\t\t\t[]\n-\t\t\t\t\t)\n+\t\t\t\t\t),\n+\t\t\t\t\tchildren: Object.keys(children).reduce((obj, key) => {\n+\t\t\t\t\t\tconst groups = children[key];\n+\t\t\t\t\t\tobj[key] = groups.map(group => ({\n+\t\t\t\t\t\t\tname: group.name,\n+\t\t\t\t\t\t\tchunks: group.chunks.map(c => c.id),\n+\t\t\t\t\t\t\tassets: group.chunks.reduce(\n+\t\t\t\t\t\t\t\t(array, c) => array.concat(c.files || []),\n+\t\t\t\t\t\t\t\t[]\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t}));\n+\t\t\t\t\t\treturn obj;\n+\t\t\t\t\t}, Object.create(null)),\n+\t\t\t\t\tchildAssets: Object.keys(children).reduce((obj, key) => {\n+\t\t\t\t\t\tconst groups = children[key];\n+\t\t\t\t\t\tobj[key] = Array.from(\n+\t\t\t\t\t\t\tgroups.reduce((set, group) => {\n+\t\t\t\t\t\t\t\tfor (const chunk of group.chunks) {\n+\t\t\t\t\t\t\t\t\tfor (const asset of chunk.files) {\n+\t\t\t\t\t\t\t\t\t\tset.add(asset);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\treturn set;\n+\t\t\t\t\t\t\t}, new Set())\n+\t\t\t\t\t\t);\n+\t\t\t\t\t\treturn obj;\n+\t\t\t\t\t}, Object.create(null))\n \t\t\t\t};\n \t\t\t\tif (showPerformance) {\n \t\t\t\t\tobj.entrypoints[name].isOverSizeLimit = ep.isOverSizeLimit;\n@@ -519,6 +546,7 @@ class Stats {\n \t\t\t\tconst parents = new Set();\n \t\t\t\tconst children = new Set();\n \t\t\t\tconst siblings = new Set();\n+\t\t\t\tconst childIdByOrder = chunk.getChildIdsByOrders();\n \t\t\t\tfor (const chunkGroup of chunk.groupsIterable) {\n \t\t\t\t\tfor (const parentGroup of chunkGroup.parentsIterable) {\n \t\t\t\t\t\tfor (const chunk of parentGroup.chunks) {\n@@ -547,7 +575,8 @@ class Stats {\n \t\t\t\t\thash: chunk.renderedHash,\n \t\t\t\t\tsiblings: Array.from(siblings).sort(),\n \t\t\t\t\tparents: Array.from(parents).sort(),\n-\t\t\t\t\tchildren: Array.from(children).sort()\n+\t\t\t\t\tchildren: Array.from(children).sort(),\n+\t\t\t\t\tchildrenByOrder: childIdByOrder\n \t\t\t\t};\n \t\t\t\tif (showChunkModules) {\n \t\t\t\t\tobj.modules = chunk\n@@ -851,6 +880,18 @@ class Stats {\n \t\t\t\t\tcolors.normal(\" \");\n \t\t\t\t\tcolors.green(asset);\n \t\t\t\t}\n+\t\t\t\tfor (const name of Object.keys(ep.childAssets)) {\n+\t\t\t\t\tconst assets = ep.childAssets[name];\n+\t\t\t\t\tif (assets && assets.length > 0) {\n+\t\t\t\t\t\tcolors.normal(\" \");\n+\t\t\t\t\t\tcolors.magenta(`(${name}:`);\n+\t\t\t\t\t\tfor (const asset of assets) {\n+\t\t\t\t\t\t\tcolors.normal(\" \");\n+\t\t\t\t\t\t\tcolors.green(asset);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tcolors.magenta(\")\");\n+\t\t\t\t\t}\n+\t\t\t\t}\n \t\t\t\tnewline();\n \t\t\t}\n \t\t}\n@@ -1103,6 +1144,19 @@ class Stats {\n \t\t\t\t\tcolors.yellow(id);\n \t\t\t\t\tcolors.normal(\"}<\");\n \t\t\t\t}\n+\t\t\t\tif (chunk.childrenByOrder) {\n+\t\t\t\t\tfor (const name of Object.keys(chunk.childrenByOrder)) {\n+\t\t\t\t\t\tconst children = chunk.childrenByOrder[name];\n+\t\t\t\t\t\tcolors.normal(\" \");\n+\t\t\t\t\t\tcolors.magenta(`(${name}:`);\n+\t\t\t\t\t\tfor (const id of children) {\n+\t\t\t\t\t\t\tcolors.normal(\" {\");\n+\t\t\t\t\t\t\tcolors.yellow(id);\n+\t\t\t\t\t\t\tcolors.normal(\"}\");\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tcolors.magenta(\")\");\n+\t\t\t\t\t}\n+\t\t\t\t}\n \t\t\t\tif (chunk.entry) {\n \t\t\t\t\tcolors.yellow(\" [entry]\");\n \t\t\t\t} else if (chunk.initial) {"
      },
      {
        "sha": "10c2fea991541e2679267452eca6049ce15a3b89",
        "filename": "lib/dependencies/ContextDependency.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fdependencies%2FContextDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fdependencies%2FContextDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FContextDependency.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -9,7 +9,7 @@ const CriticalDependencyWarning = require(\"./CriticalDependencyWarning\");\n const regExpToString = r => (r ? r + \"\" : \"\");\n \n class ContextDependency extends Dependency {\n-\t// options: { request, recursive, regExp, include, exclude, mode, chunkName }\n+\t// options: { request, recursive, regExp, include, exclude, mode, chunkName, groupOptions }\n \tconstructor(options) {\n \t\tsuper();\n \t\tthis.options = options;\n@@ -29,7 +29,8 @@ class ContextDependency extends Dependency {\n \t\t\t`${regExpToString(this.options.regExp)} ${regExpToString(\n \t\t\t\tthis.options.include\n \t\t\t)} ${regExpToString(this.options.exclude)} ` +\n-\t\t\t`${this.options.mode} ${this.options.chunkName}`\n+\t\t\t`${this.options.mode} ${this.options.chunkName} ` +\n+\t\t\t`${JSON.stringify(this.options.groupOptions)}`\n \t\t);\n \t}\n "
      },
      {
        "sha": "61e6bb27234aec2006c44c8cfc36f9d5a9e62222",
        "filename": "lib/dependencies/ImportDependenciesBlock.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fdependencies%2FImportDependenciesBlock.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fdependencies%2FImportDependenciesBlock.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportDependenciesBlock.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -7,8 +7,9 @@ const AsyncDependenciesBlock = require(\"../AsyncDependenciesBlock\");\n const ImportDependency = require(\"./ImportDependency\");\n \n module.exports = class ImportDependenciesBlock extends AsyncDependenciesBlock {\n-\tconstructor(request, range, chunkName, module, loc, originModule) {\n-\t\tsuper(chunkName, module, loc, request);\n+\t// TODO webpack 5 reorganize arguments\n+\tconstructor(request, range, groupOptions, module, loc, originModule) {\n+\t\tsuper(groupOptions, module, loc, request);\n \t\tthis.range = range;\n \t\tconst dep = new ImportDependency(request, originModule, this);\n \t\tdep.loc = loc;"
      },
      {
        "sha": "d9e5f1273a75a51616aec1e282771f44b5869f15",
        "filename": "lib/dependencies/ImportParserPlugin.js",
        "status": "modified",
        "additions": 45,
        "deletions": 5,
        "changes": 50,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fdependencies%2FImportParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fdependencies%2FImportParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FImportParserPlugin.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -29,11 +29,12 @@ class ImportParserPlugin {\n \t\t\tlet mode = \"lazy\";\n \t\t\tlet include = null;\n \t\t\tlet exclude = null;\n+\t\t\tconst groupOptions = {};\n \n \t\t\tconst importOptions = parser.getCommentOptions(expr.range);\n \t\t\tif (importOptions) {\n \t\t\t\tif (typeof importOptions.webpackChunkName !== \"undefined\") {\n-\t\t\t\t\tif (typeof importOptions.webpackChunkName !== \"string\")\n+\t\t\t\t\tif (typeof importOptions.webpackChunkName !== \"string\") {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\tparser.state.module,\n@@ -42,10 +43,12 @@ class ImportParserPlugin {\n \t\t\t\t\t\t\t\t}.`\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t);\n-\t\t\t\t\telse chunkName = importOptions.webpackChunkName;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tchunkName = importOptions.webpackChunkName;\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (typeof importOptions.webpackMode !== \"undefined\") {\n-\t\t\t\t\tif (typeof importOptions.webpackMode !== \"string\")\n+\t\t\t\t\tif (typeof importOptions.webpackMode !== \"string\") {\n \t\t\t\t\t\tparser.state.module.warnings.push(\n \t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n \t\t\t\t\t\t\t\tparser.state.module,\n@@ -54,7 +57,41 @@ class ImportParserPlugin {\n \t\t\t\t\t\t\t\t}.`\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t);\n-\t\t\t\t\telse mode = importOptions.webpackMode;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tmode = importOptions.webpackMode;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif (typeof importOptions.webpackPrefetch !== \"undefined\") {\n+\t\t\t\t\tif (importOptions.webpackPrefetch === true) {\n+\t\t\t\t\t\tgroupOptions.prefetchOrder = 0;\n+\t\t\t\t\t} else if (typeof importOptions.webpackPrefetch === \"number\") {\n+\t\t\t\t\t\tgroupOptions.prefetchOrder = importOptions.webpackPrefetch;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n+\t\t\t\t\t\t\t\tparser.state.module,\n+\t\t\t\t\t\t\t\t`\\`webpackPrefetch\\` expected true or a number, but received: ${\n+\t\t\t\t\t\t\t\t\timportOptions.webpackPrefetch\n+\t\t\t\t\t\t\t\t}.`\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif (typeof importOptions.webpackPreload !== \"undefined\") {\n+\t\t\t\t\tif (importOptions.webpackPreload === true) {\n+\t\t\t\t\t\tgroupOptions.preloadOrder = 0;\n+\t\t\t\t\t} else if (typeof importOptions.webpackPreload === \"number\") {\n+\t\t\t\t\t\tgroupOptions.preloadOrder = importOptions.webpackPreload;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tparser.state.module.warnings.push(\n+\t\t\t\t\t\t\tnew UnsupportedFeatureWarning(\n+\t\t\t\t\t\t\t\tparser.state.module,\n+\t\t\t\t\t\t\t\t`\\`webpackPreload\\` expected true or a number, but received: ${\n+\t\t\t\t\t\t\t\t\timportOptions.webpackPreload\n+\t\t\t\t\t\t\t\t}.`\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (typeof importOptions.webpackInclude !== \"undefined\") {\n \t\t\t\t\tif (\n@@ -120,7 +157,9 @@ class ImportParserPlugin {\n \t\t\t\t\tconst depBlock = new ImportDependenciesBlock(\n \t\t\t\t\t\tparam.string,\n \t\t\t\t\t\texpr.range,\n-\t\t\t\t\t\tchunkName,\n+\t\t\t\t\t\tObject.assign(groupOptions, {\n+\t\t\t\t\t\t\tname: chunkName\n+\t\t\t\t\t\t}),\n \t\t\t\t\t\tparser.state.module,\n \t\t\t\t\t\texpr.loc,\n \t\t\t\t\t\tparser.state.module\n@@ -155,6 +194,7 @@ class ImportParserPlugin {\n \t\t\t\t\tthis.options,\n \t\t\t\t\t{\n \t\t\t\t\t\tchunkName,\n+\t\t\t\t\t\tgroupOptions,\n \t\t\t\t\t\tinclude,\n \t\t\t\t\t\texclude,\n \t\t\t\t\t\tmode,"
      },
      {
        "sha": "78e53b5074458f3124d7d5e5ddad9bb1e7094da9",
        "filename": "lib/web/JsonpMainTemplatePlugin.js",
        "status": "modified",
        "additions": 197,
        "deletions": 53,
        "changes": 250,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fweb%2FJsonpMainTemplatePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/lib%2Fweb%2FJsonpMainTemplatePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fweb%2FJsonpMainTemplatePlugin.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -36,84 +36,117 @@ class JsonpMainTemplatePlugin {\n \t\t\t\t\"hash\"\n \t\t\t]);\n \t\t}\n+\t\tif (!mainTemplate.hooks.linkPreload) {\n+\t\t\tmainTemplate.hooks.linkPreload = new SyncWaterfallHook([\n+\t\t\t\t\"source\",\n+\t\t\t\t\"chunk\",\n+\t\t\t\t\"hash\"\n+\t\t\t]);\n+\t\t}\n+\t\tif (!mainTemplate.hooks.linkPrefetch) {\n+\t\t\tmainTemplate.hooks.linkPrefetch = new SyncWaterfallHook([\n+\t\t\t\t\"source\",\n+\t\t\t\t\"chunk\",\n+\t\t\t\t\"hash\"\n+\t\t\t]);\n+\t\t}\n \n+\t\tconst getScriptSrcPath = (hash, chunk, chunkIdExpression) => {\n+\t\t\tconst chunkFilename = mainTemplate.outputOptions.chunkFilename;\n+\t\t\tconst chunkMaps = chunk.getChunkMaps();\n+\t\t\treturn mainTemplate.getAssetPath(JSON.stringify(chunkFilename), {\n+\t\t\t\thash: `\" + ${mainTemplate.renderCurrentHashCode(hash)} + \"`,\n+\t\t\t\thashWithLength: length =>\n+\t\t\t\t\t`\" + ${mainTemplate.renderCurrentHashCode(hash, length)} + \"`,\n+\t\t\t\tchunk: {\n+\t\t\t\t\tid: `\" + ${chunkIdExpression} + \"`,\n+\t\t\t\t\thash: `\" + ${JSON.stringify(\n+\t\t\t\t\t\tchunkMaps.hash\n+\t\t\t\t\t)}[${chunkIdExpression}] + \"`,\n+\t\t\t\t\thashWithLength(length) {\n+\t\t\t\t\t\tconst shortChunkHashMap = Object.create(null);\n+\t\t\t\t\t\tfor (const chunkId of Object.keys(chunkMaps.hash)) {\n+\t\t\t\t\t\t\tif (typeof chunkMaps.hash[chunkId] === \"string\")\n+\t\t\t\t\t\t\t\tshortChunkHashMap[chunkId] = chunkMaps.hash[chunkId].substr(\n+\t\t\t\t\t\t\t\t\t0,\n+\t\t\t\t\t\t\t\t\tlength\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\treturn `\" + ${JSON.stringify(\n+\t\t\t\t\t\t\tshortChunkHashMap\n+\t\t\t\t\t\t)}[${chunkIdExpression}] + \"`;\n+\t\t\t\t\t},\n+\t\t\t\t\tname: `\" + (${JSON.stringify(\n+\t\t\t\t\t\tchunkMaps.name\n+\t\t\t\t\t)}[${chunkIdExpression}]||${chunkIdExpression}) + \"`,\n+\t\t\t\t\tcontentHash: {\n+\t\t\t\t\t\tjavascript: `\" + ${JSON.stringify(\n+\t\t\t\t\t\t\tchunkMaps.contentHash.javascript\n+\t\t\t\t\t\t)}[${chunkIdExpression}] + \"`\n+\t\t\t\t\t},\n+\t\t\t\t\tcontentHashWithLength: {\n+\t\t\t\t\t\tjavascript: length => {\n+\t\t\t\t\t\t\tconst shortContentHashMap = {};\n+\t\t\t\t\t\t\tconst contentHash = chunkMaps.contentHash.javascript;\n+\t\t\t\t\t\t\tfor (const chunkId of Object.keys(contentHash)) {\n+\t\t\t\t\t\t\t\tif (typeof contentHash[chunkId] === \"string\") {\n+\t\t\t\t\t\t\t\t\tshortContentHashMap[chunkId] = contentHash[chunkId].substr(\n+\t\t\t\t\t\t\t\t\t\t0,\n+\t\t\t\t\t\t\t\t\t\tlength\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn `\" + ${JSON.stringify(\n+\t\t\t\t\t\t\t\tshortContentHashMap\n+\t\t\t\t\t\t\t)}[${chunkIdExpression}] + \"`;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t},\n+\t\t\t\tcontentHashType: \"javascript\"\n+\t\t\t});\n+\t\t};\n \t\tmainTemplate.hooks.localVars.tap(\n \t\t\t\"JsonpMainTemplatePlugin\",\n-\t\t\t(source, chunk) => {\n+\t\t\t(source, chunk, hash) => {\n \t\t\t\tif (needChunkLoadingCode(chunk)) {\n \t\t\t\t\treturn Template.asString([\n \t\t\t\t\t\tsource,\n \t\t\t\t\t\t\"\",\n \t\t\t\t\t\t\"// object to store loaded and loading chunks\",\n+\t\t\t\t\t\t\"// undefined = chunk not loaded, null = chunk preloaded/prefetched\",\n+\t\t\t\t\t\t\"// Promise = chunk loading, 0 = chunk loaded\",\n \t\t\t\t\t\t\"var installedChunks = {\",\n \t\t\t\t\t\tTemplate.indent(\n \t\t\t\t\t\t\tchunk.ids.map(id => `${JSON.stringify(id)}: 0`).join(\",\\n\")\n \t\t\t\t\t\t),\n \t\t\t\t\t\t\"};\",\n \t\t\t\t\t\t\"\",\n+\t\t\t\t\t\t\"// script path function\",\n+\t\t\t\t\t\t\"function jsonpScriptSrc(chunkId) {\",\n+\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t`return ${mainTemplate.requireFn}.p + ${getScriptSrcPath(\n+\t\t\t\t\t\t\t\thash,\n+\t\t\t\t\t\t\t\tchunk,\n+\t\t\t\t\t\t\t\t\"chunkId\"\n+\t\t\t\t\t\t\t)}`\n+\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\"}\",\n+\t\t\t\t\t\t\"\",\n \t\t\t\t\t\tneedEntryDeferringCode(chunk) ? \"var deferredModules = [];\" : \"\"\n \t\t\t\t\t]);\n \t\t\t\t}\n \t\t\t\treturn source;\n \t\t\t}\n \t\t);\n+\n \t\tmainTemplate.hooks.jsonpScript.tap(\n \t\t\t\"JsonpMainTemplatePlugin\",\n \t\t\t(_, chunk, hash) => {\n-\t\t\t\tconst chunkFilename = mainTemplate.outputOptions.chunkFilename;\n-\t\t\t\tconst chunkMaps = chunk.getChunkMaps();\n \t\t\t\tconst crossOriginLoading =\n \t\t\t\t\tmainTemplate.outputOptions.crossOriginLoading;\n \t\t\t\tconst chunkLoadTimeout = mainTemplate.outputOptions.chunkLoadTimeout;\n \t\t\t\tconst jsonpScriptType = mainTemplate.outputOptions.jsonpScriptType;\n-\t\t\t\tconst scriptSrcPath = mainTemplate.getAssetPath(\n-\t\t\t\t\tJSON.stringify(chunkFilename),\n-\t\t\t\t\t{\n-\t\t\t\t\t\thash: `\" + ${mainTemplate.renderCurrentHashCode(hash)} + \"`,\n-\t\t\t\t\t\thashWithLength: length =>\n-\t\t\t\t\t\t\t`\" + ${mainTemplate.renderCurrentHashCode(hash, length)} + \"`,\n-\t\t\t\t\t\tchunk: {\n-\t\t\t\t\t\t\tid: '\" + chunkId + \"',\n-\t\t\t\t\t\t\thash: `\" + ${JSON.stringify(chunkMaps.hash)}[chunkId] + \"`,\n-\t\t\t\t\t\t\thashWithLength(length) {\n-\t\t\t\t\t\t\t\tconst shortChunkHashMap = Object.create(null);\n-\t\t\t\t\t\t\t\tfor (const chunkId of Object.keys(chunkMaps.hash)) {\n-\t\t\t\t\t\t\t\t\tif (typeof chunkMaps.hash[chunkId] === \"string\")\n-\t\t\t\t\t\t\t\t\t\tshortChunkHashMap[chunkId] = chunkMaps.hash[chunkId].substr(\n-\t\t\t\t\t\t\t\t\t\t\t0,\n-\t\t\t\t\t\t\t\t\t\t\tlength\n-\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\treturn `\" + ${JSON.stringify(shortChunkHashMap)}[chunkId] + \"`;\n-\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\tname: `\" + (${JSON.stringify(\n-\t\t\t\t\t\t\t\tchunkMaps.name\n-\t\t\t\t\t\t\t)}[chunkId]||chunkId) + \"`,\n-\t\t\t\t\t\t\tcontentHash: {\n-\t\t\t\t\t\t\t\tjavascript: `\" + ${JSON.stringify(\n-\t\t\t\t\t\t\t\t\tchunkMaps.contentHash.javascript\n-\t\t\t\t\t\t\t\t)}[chunkId] + \"`\n-\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\tcontentHashWithLength: {\n-\t\t\t\t\t\t\t\tjavascript: length => {\n-\t\t\t\t\t\t\t\t\tconst shortContentHashMap = {};\n-\t\t\t\t\t\t\t\t\tconst contentHash = chunkMaps.contentHash.javascript;\n-\t\t\t\t\t\t\t\t\tfor (const chunkId of Object.keys(contentHash)) {\n-\t\t\t\t\t\t\t\t\t\tif (typeof contentHash[chunkId] === \"string\") {\n-\t\t\t\t\t\t\t\t\t\t\tshortContentHashMap[chunkId] = contentHash[\n-\t\t\t\t\t\t\t\t\t\t\t\tchunkId\n-\t\t\t\t\t\t\t\t\t\t\t].substr(0, length);\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\treturn `\" + ${JSON.stringify(\n-\t\t\t\t\t\t\t\t\t\tshortContentHashMap\n-\t\t\t\t\t\t\t\t\t)}[chunkId] + \"`;\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t},\n-\t\t\t\t\t\tcontentHashType: \"javascript\"\n-\t\t\t\t\t}\n-\t\t\t\t);\n+\n \t\t\t\treturn Template.asString([\n \t\t\t\t\t\"var script = document.createElement('script');\",\n \t\t\t\t\tjsonpScriptType\n@@ -129,7 +162,7 @@ class JsonpMainTemplatePlugin {\n \t\t\t\t\t\t`script.setAttribute(\"nonce\", ${mainTemplate.requireFn}.nc);`\n \t\t\t\t\t),\n \t\t\t\t\t\"}\",\n-\t\t\t\t\t`script.src = ${mainTemplate.requireFn}.p + ${scriptSrcPath};`,\n+\t\t\t\t\t\"script.src = jsonpScriptSrc(chunkId);\",\n \t\t\t\t\t\"var timeout = setTimeout(function(){\",\n \t\t\t\t\tTemplate.indent([\n \t\t\t\t\t\t\"onScriptComplete({ type: 'timeout', target: script });\"\n@@ -162,8 +195,45 @@ class JsonpMainTemplatePlugin {\n \t\t\t\t]);\n \t\t\t}\n \t\t);\n-\t\tmainTemplate.hooks.requireEnsure.tap(\n+\t\tmainTemplate.hooks.linkPreload.tap(\n+\t\t\t\"JsonpMainTemplatePlugin\",\n+\t\t\t(_, chunk, hash) => {\n+\t\t\t\tconst crossOriginLoading =\n+\t\t\t\t\tmainTemplate.outputOptions.crossOriginLoading;\n+\t\t\t\tconst jsonpScriptType = mainTemplate.outputOptions.jsonpScriptType;\n+\n+\t\t\t\treturn Template.asString([\n+\t\t\t\t\t\"var link = document.createElement('link');\",\n+\t\t\t\t\tjsonpScriptType\n+\t\t\t\t\t\t? `link.type = ${JSON.stringify(jsonpScriptType)};`\n+\t\t\t\t\t\t: \"\",\n+\t\t\t\t\t\"link.charset = 'utf-8';\",\n+\t\t\t\t\tcrossOriginLoading\n+\t\t\t\t\t\t? `link.crossOrigin = ${JSON.stringify(crossOriginLoading)};`\n+\t\t\t\t\t\t: \"\",\n+\t\t\t\t\t`if (${mainTemplate.requireFn}.nc) {`,\n+\t\t\t\t\tTemplate.indent(\n+\t\t\t\t\t\t`link.setAttribute(\"nonce\", ${mainTemplate.requireFn}.nc);`\n+\t\t\t\t\t),\n+\t\t\t\t\t\"}\",\n+\t\t\t\t\t'link.rel = \"preload\";',\n+\t\t\t\t\t'link.as = \"script\";',\n+\t\t\t\t\t\"link.href = jsonpScriptSrc(chunkId);\"\n+\t\t\t\t]);\n+\t\t\t}\n+\t\t);\n+\t\tmainTemplate.hooks.linkPrefetch.tap(\n \t\t\t\"JsonpMainTemplatePlugin\",\n+\t\t\t(_, chunk, hash) => {\n+\t\t\t\treturn Template.asString([\n+\t\t\t\t\t\"var link = document.createElement('link');\",\n+\t\t\t\t\t'link.rel = \"prefetch\";',\n+\t\t\t\t\t\"link.href = jsonpScriptSrc(chunkId);\"\n+\t\t\t\t]);\n+\t\t\t}\n+\t\t);\n+\t\tmainTemplate.hooks.requireEnsure.tap(\n+\t\t\t\"JsonpMainTemplatePlugin load\",\n \t\t\t(source, chunk, hash) => {\n \t\t\t\treturn Template.asString([\n \t\t\t\t\tsource,\n@@ -198,6 +268,80 @@ class JsonpMainTemplatePlugin {\n \t\t\t\t]);\n \t\t\t}\n \t\t);\n+\t\tmainTemplate.hooks.requireEnsure.tap(\n+\t\t\t{\n+\t\t\t\tname: \"JsonpMainTemplatePlugin preload\",\n+\t\t\t\tstage: 10\n+\t\t\t},\n+\t\t\t(source, chunk, hash) => {\n+\t\t\t\tconst chunkMap = chunk.getChildIdsByOrdersMap().preload;\n+\t\t\t\tif (!chunkMap || Object.keys(chunkMap).length === 0) return source;\n+\t\t\t\treturn Template.asString([\n+\t\t\t\t\tsource,\n+\t\t\t\t\t\"\",\n+\t\t\t\t\t\"// chunk preloadng for javascript\",\n+\t\t\t\t\t\"\",\n+\t\t\t\t\t`var chunkPreloadMap = ${JSON.stringify(chunkMap, null, \"\\t\")}`,\n+\t\t\t\t\t\"\",\n+\t\t\t\t\t\"var chunkPreloadData = chunkPreloadMap[chunkId];\",\n+\t\t\t\t\t\"if(chunkPreloadData) {\",\n+\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\"var head = document.getElementsByTagName('head')[0];\",\n+\t\t\t\t\t\t\"chunkPreloadData.forEach(function(chunkId) {\",\n+\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\"if(installedChunks[chunkId] === undefined) {\",\n+\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\"installedChunks[chunkId] = null;\",\n+\t\t\t\t\t\t\t\tmainTemplate.hooks.linkPreload.call(\"\", chunk, hash),\n+\t\t\t\t\t\t\t\t\"head.appendChild(link);\"\n+\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\"}\"\n+\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\"});\"\n+\t\t\t\t\t]),\n+\t\t\t\t\t\"}\"\n+\t\t\t\t]);\n+\t\t\t}\n+\t\t);\n+\t\tmainTemplate.hooks.requireEnsure.tap(\n+\t\t\t{\n+\t\t\t\tname: \"JsonpMainTemplatePlugin prefetch\",\n+\t\t\t\tstage: 20\n+\t\t\t},\n+\t\t\t(source, chunk, hash) => {\n+\t\t\t\tconst chunkMap = chunk.getChildIdsByOrdersMap().prefetch;\n+\t\t\t\tif (!chunkMap || Object.keys(chunkMap).length === 0) return source;\n+\t\t\t\treturn Template.asString([\n+\t\t\t\t\tsource,\n+\t\t\t\t\t\"\",\n+\t\t\t\t\t\"// chunk prefetching for javascript\",\n+\t\t\t\t\t\"\",\n+\t\t\t\t\t`var chunkPrefetchMap = ${JSON.stringify(chunkMap, null, \"\\t\")}`,\n+\t\t\t\t\t\"\",\n+\t\t\t\t\t\"var chunkPrefetchData = chunkPrefetchMap[chunkId];\",\n+\t\t\t\t\t\"if(chunkPrefetchData) {\",\n+\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\"Promise.all(promises).then(function() {\",\n+\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\"var head = document.getElementsByTagName('head')[0];\",\n+\t\t\t\t\t\t\t\"chunkPrefetchData.forEach(function(chunkId) {\",\n+\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\"if(installedChunks[chunkId] === undefined) {\",\n+\t\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\t\"installedChunks[chunkId] = null;\",\n+\t\t\t\t\t\t\t\t\tmainTemplate.hooks.linkPrefetch.call(\"\", chunk, hash),\n+\t\t\t\t\t\t\t\t\t\"head.appendChild(link);\"\n+\t\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\t\"}\"\n+\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\"});\"\n+\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\"})\"\n+\t\t\t\t\t]),\n+\t\t\t\t\t\"}\"\n+\t\t\t\t]);\n+\t\t\t}\n+\t\t);\n \t\tmainTemplate.hooks.requireExtensions.tap(\n \t\t\t\"JsonpMainTemplatePlugin\",\n \t\t\t(source, chunk) => {"
      },
      {
        "sha": "5819ac38c2c3872ab4c62bf5be81e71b96637028",
        "filename": "test/ConfigTestCases.test.js",
        "status": "modified",
        "additions": 15,
        "deletions": 3,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FConfigTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FConfigTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FConfigTestCases.test.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -149,8 +149,18 @@ describe(\"ConfigTestCases\", () => {\n \t\t\t\t\t\t\treturn test;\n \t\t\t\t\t\t}\n \n+\t\t\t\t\t\tfunction _beforeEach(title, fn) {\n+\t\t\t\t\t\t\treturn suite.beforeEach(title, fn);\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tfunction _afterEach(title, fn) {\n+\t\t\t\t\t\t\treturn suite.afterEach(title, fn);\n+\t\t\t\t\t\t}\n+\n \t\t\t\t\t\tconst globalContext = {\n-\t\t\t\t\t\t\tconsole: console\n+\t\t\t\t\t\t\tconsole: console,\n+\t\t\t\t\t\t\tsetTimeout: setTimeout,\n+\t\t\t\t\t\t\tclearTimeout: clearTimeout\n \t\t\t\t\t\t};\n \n \t\t\t\t\t\tfunction _require(currentDirectory, module) {\n@@ -175,15 +185,15 @@ describe(\"ConfigTestCases\", () => {\n \t\t\t\t\t\t\t\t\toptions.target === \"webworker\"\n \t\t\t\t\t\t\t\t) {\n \t\t\t\t\t\t\t\t\tfn = vm.runInNewContext(\n-\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, __filename, it, window) {\" +\n+\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, __filename, it, beforeEach, afterEach, window) {\" +\n \t\t\t\t\t\t\t\t\t\t\tcontent +\n \t\t\t\t\t\t\t\t\t\t\t\"\\n})\",\n \t\t\t\t\t\t\t\t\t\tglobalContext,\n \t\t\t\t\t\t\t\t\t\tp\n \t\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\tfn = vm.runInThisContext(\n-\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, __filename, it) {\" +\n+\t\t\t\t\t\t\t\t\t\t\"(function(require, module, exports, __dirname, __filename, it, beforeEach, afterEach) {\" +\n \t\t\t\t\t\t\t\t\t\t\tcontent +\n \t\t\t\t\t\t\t\t\t\t\t\"\\n})\",\n \t\t\t\t\t\t\t\t\t\tp\n@@ -200,6 +210,8 @@ describe(\"ConfigTestCases\", () => {\n \t\t\t\t\t\t\t\t\tpath.dirname(p),\n \t\t\t\t\t\t\t\t\tp,\n \t\t\t\t\t\t\t\t\t_it,\n+\t\t\t\t\t\t\t\t\t_beforeEach,\n+\t\t\t\t\t\t\t\t\t_afterEach,\n \t\t\t\t\t\t\t\t\tglobalContext\n \t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\treturn m.exports;"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/configCases/web/prefetch-preload/chunk1-a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-a.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-a.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-a.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/configCases/web/prefetch-preload/chunk1-b.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-b.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-b.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-b.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/configCases/web/prefetch-preload/chunk1-c.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-c.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-c.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1-c.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "60d6f1685b7d8dffcaa3848e3c478aa224b146d9",
        "filename": "test/configCases/web/prefetch-preload/chunk1.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fchunk1.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,5 @@\n+export default function() {\n+\timport(/* webpackPrefetch: true, webpackChunkName: \"chunk1-a\" */ \"./chunk1-a\");\n+\timport(/* webpackPreload: true, webpackChunkName: \"chunk1-b\" */ \"./chunk1-b\");\n+\timport(/* webpackPrefetch: 10, webpackChunkName: \"chunk1-c\" */ \"./chunk1-c\");\n+}"
      },
      {
        "sha": "361620e85d8cebd7aaa8ff9bb9eb9fd8bc4bf2e7",
        "filename": "test/configCases/web/prefetch-preload/index.js",
        "status": "added",
        "additions": 57,
        "deletions": 0,
        "changes": 57,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Findex.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,57 @@\n+const should = require(\"should\");\n+const FakeDocument = require(\"../../../helpers/FakeDocument\");\n+\n+let oldNonce;\n+let oldPublicPath;\n+\n+beforeEach(() => {\n+\toldNonce = __webpack_nonce__;\n+\toldPublicPath = __webpack_public_path__;\n+\tglobal.document = new FakeDocument();\n+});\n+\n+afterEach(() => {\n+\tdelete global.document;\n+\t__webpack_nonce__ = oldNonce;\n+\t__webpack_public_path__ = oldPublicPath;\n+})\n+\n+it(\"should prefetch and preload child chunks on chunk load\", () => {\n+\t__webpack_nonce__ = \"nonce\";\n+\t__webpack_public_path__ = \"/public/path/\";\n+\n+\tconst promise = import(/* webpackChunkName: \"chunk1\" */ \"./chunk1\");\n+\tdocument.head._children.length.should.be.eql(2);\n+\tconst script = document.head._children[0];\n+\tscript._type.should.be.eql(\"script\");\n+\tshould(script.src).be.eql(\"/public/path/chunk1.js\")\n+\tshould(script.getAttribute(\"nonce\")).be.eql(\"nonce\")\n+\tshould(script.crossOrigin).be.eql(\"anonymous\");\n+\tshould(script.onload).be.type(\"function\");\n+\n+\tlet link = document.head._children[1];\n+\tlink._type.should.be.eql(\"link\");\n+\tshould(link.rel).be.eql(\"preload\");\n+\tshould(link.as).be.eql(\"script\");\n+\tshould(link.href).be.eql(\"/public/path/chunk1-b.js\");\n+\tshould(link.charset).be.eql(\"utf-8\");\n+\tshould(link.getAttribute(\"nonce\")).be.eql(\"nonce\");\n+\tshould(link.crossOrigin).be.eql(\"anonymous\");\n+\n+\t__non_webpack_require__(\"./chunk1.js\");\n+\tscript.onload();\n+\n+\treturn promise.then((ex) => {\n+\t\tdocument.head._children.length.should.be.eql(4);\n+\n+\t\tlet link = document.head._children[2];\n+\t\tlink._type.should.be.eql(\"link\");\n+\t\tshould(link.rel).be.eql(\"prefetch\");\n+\t\tshould(link.href).be.eql(\"/public/path/chunk1-c.js\");\n+\n+\t\tlink = document.head._children[3];\n+\t\tlink._type.should.be.eql(\"link\");\n+\t\tshould(link.rel).be.eql(\"prefetch\");\n+\t\tshould(link.href).be.eql(\"/public/path/chunk1-a.js\");\n+\t});\n+})"
      },
      {
        "sha": "34460c414c719899fbc48f38e6918149bef7261b",
        "filename": "test/configCases/web/prefetch-preload/webpack.config.js",
        "status": "added",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fweb%2Fprefetch-preload%2Fwebpack.config.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,13 @@\n+module.exports = {\n+\ttarget: \"web\",\n+\toutput: {\n+\t\tchunkFilename: \"[name].js\",\n+\t\tcrossOriginLoading: \"anonymous\"\n+\t},\n+\tperformance: {\n+\t\thints: false\n+\t},\n+\toptimization: {\n+\t\tminimize: false\n+\t}\n+};"
      },
      {
        "sha": "0c9d80de06f5da6e7534d7b3f34db7be44db0cb8",
        "filename": "test/helpers/FakeDocument.js",
        "status": "added",
        "additions": 36,
        "deletions": 0,
        "changes": 36,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2Fhelpers%2FFakeDocument.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2Fhelpers%2FFakeDocument.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Fhelpers%2FFakeDocument.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,36 @@\n+module.exports = class FakeDocument {\n+\tconstructor() {\n+\t\tthis.head = this.createElement(\"head\");\n+\t}\n+\n+\tcreateElement(type) {\n+\t\treturn new FakeElement(type);\n+\t}\n+\n+\tgetElementsByTagName(name) {\n+\t\tif (name === \"head\") return [this.head];\n+\t\tthrow new Error(\n+\t\t\t`FakeDocument.getElementsByTagName(${name}): not implemented`\n+\t\t);\n+\t}\n+};\n+\n+class FakeElement {\n+\tconstructor(type) {\n+\t\tthis._type = type;\n+\t\tthis._children = [];\n+\t\tthis._attributes = Object.create(null);\n+\t}\n+\n+\tappendChild(node) {\n+\t\tthis._children.push(node);\n+\t}\n+\n+\tsetAttribute(name, value) {\n+\t\tthis._attributes[name] = value;\n+\t}\n+\n+\tgetAttribute(name) {\n+\t\treturn this._attributes[name];\n+\t}\n+}"
      },
      {
        "sha": "8f046830f3b947016ab7146a5d24b31b8fef1155",
        "filename": "test/statsCases/aggressive-splitting-entry/expected.txt",
        "status": "modified",
        "additions": 9,
        "deletions": 9,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,18 +1,18 @@\n-Hash: a82dbd8d6c7a22df1cafa82dbd8d6c7a22df1caf\n+Hash: e3ba3c1dddc97b92dbf7e3ba3c1dddc97b92dbf7\n Child fitting:\n-    Hash: a82dbd8d6c7a22df1caf\n+    Hash: e3ba3c1dddc97b92dbf7\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                       Asset      Size  Chunks             Chunk Names\n     fb95acf7c457672e70d0.js  1.05 KiB       0  [emitted]  \n-    a1e683753eca705a0882.js  9.97 KiB       1  [emitted]  \n+    2795fd99577b4ba7fef2.js  10.2 KiB       1  [emitted]  \n     d43339a3d0f86c6b8d90.js  1.94 KiB       2  [emitted]  \n     6c7fb52c5514dbfbf094.js  1.94 KiB       3  [emitted]  \n-    Entrypoint main = d43339a3d0f86c6b8d90.js 6c7fb52c5514dbfbf094.js a1e683753eca705a0882.js\n+    Entrypoint main = d43339a3d0f86c6b8d90.js 6c7fb52c5514dbfbf094.js 2795fd99577b4ba7fef2.js\n     chunk    {0} fb95acf7c457672e70d0.js 916 bytes <{1}> <{2}> <{3}>\n         > ./g [4] ./index.js 7:0-13\n      [7] ./g.js 916 bytes {0} [built]\n-    chunk    {1} a1e683753eca705a0882.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n+    chunk    {1} 2795fd99577b4ba7fef2.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n         > ./index main\n      [3] ./e.js 899 bytes {1} [built]\n      [4] ./index.js 111 bytes {1} [built]\n@@ -26,19 +26,19 @@ Child fitting:\n      [1] ./c.js 899 bytes {3} [built]\n      [2] ./d.js 899 bytes {3} [built]\n Child content-change:\n-    Hash: a82dbd8d6c7a22df1caf\n+    Hash: e3ba3c1dddc97b92dbf7\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                       Asset      Size  Chunks             Chunk Names\n     fb95acf7c457672e70d0.js  1.05 KiB       0  [emitted]  \n-    a1e683753eca705a0882.js  9.97 KiB       1  [emitted]  \n+    2795fd99577b4ba7fef2.js  10.2 KiB       1  [emitted]  \n     d43339a3d0f86c6b8d90.js  1.94 KiB       2  [emitted]  \n     6c7fb52c5514dbfbf094.js  1.94 KiB       3  [emitted]  \n-    Entrypoint main = d43339a3d0f86c6b8d90.js 6c7fb52c5514dbfbf094.js a1e683753eca705a0882.js\n+    Entrypoint main = d43339a3d0f86c6b8d90.js 6c7fb52c5514dbfbf094.js 2795fd99577b4ba7fef2.js\n     chunk    {0} fb95acf7c457672e70d0.js 916 bytes <{1}> <{2}> <{3}>\n         > ./g [4] ./index.js 7:0-13\n      [7] ./g.js 916 bytes {0} [built]\n-    chunk    {1} a1e683753eca705a0882.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n+    chunk    {1} 2795fd99577b4ba7fef2.js 1.87 KiB ={2}= ={3}= >{0}< [entry] [rendered]\n         > ./index main\n      [3] ./e.js 899 bytes {1} [built]\n      [4] ./index.js 111 bytes {1} [built]"
      },
      {
        "sha": "2f3970dc44328aba04a514933d20262eda74aa3c",
        "filename": "test/statsCases/aggressive-splitting-on-demand/expected.txt",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,4 +1,4 @@\n-Hash: 7a73868d9be286944b0a\n+Hash: 0bbde62e97b9652dcaac\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n                   Asset      Size  Chunks             Chunk Names\n@@ -12,9 +12,9 @@ aafb9d82e452def4c3bb.js     1 KiB       1  [emitted]\n 344e13508b62e833aacf.js     1 KiB       7  [emitted]  \n 2aaed192bbfbc2302c53.js  1.94 KiB       8  [emitted]  \n 72e04d4eaed46d9aac4c.js  1.94 KiB       9  [emitted]  \n-d20b83dfd7d0fd0c8793.js  8.41 KiB      10  [emitted]  main\n+d19dabec0d62bca26765.js  8.68 KiB      10  [emitted]  main\n 1165c0cca1ba14a506ff.js  1.94 KiB      11  [emitted]  \n-Entrypoint main = d20b83dfd7d0fd0c8793.js\n+Entrypoint main = d19dabec0d62bca26765.js\n chunk    {0} 4467a9f70ef8365bcb32.js 1.76 KiB <{10}> ={1}= ={2}= ={3}= ={7}= ={9}= [recorded] aggressive splitted\n     > ./b ./d ./e ./f ./g [11] ./index.js 5:0-44\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n@@ -56,7 +56,7 @@ chunk    {9} 72e04d4eaed46d9aac4c.js 1.76 KiB <{10}> ={0}= ={2}= ={3}= ={7}= [re\n     > ./b ./d ./e ./f ./g ./h ./i ./j ./k [11] ./index.js 6:0-72\n  [7] ./i.js 899 bytes {9} {11} [built]\n  [8] ./j.js 901 bytes {6} {9} [built]\n-chunk   {10} d20b83dfd7d0fd0c8793.js (main) 248 bytes >{0}< >{1}< >{11}< >{2}< >{3}< >{4}< >{5}< >{6}< >{7}< >{8}< >{9}< [entry] [rendered]\n+chunk   {10} d19dabec0d62bca26765.js (main) 248 bytes >{0}< >{1}< >{11}< >{2}< >{3}< >{4}< >{5}< >{6}< >{7}< >{8}< >{9}< [entry] [rendered]\n     > ./index main\n  [11] ./index.js 248 bytes {10} [built]\n chunk   {11} 1165c0cca1ba14a506ff.js 1.76 KiB <{10}> ={2}= ={6}= [rendered] [recorded] aggressive splitted"
      },
      {
        "sha": "bdbe8c27e6a2e757a866d663300721a984d10088",
        "filename": "test/statsCases/async-commons-chunk/expected.txt",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fasync-commons-chunk%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fasync-commons-chunk%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fasync-commons-chunk%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,14 +1,14 @@\n Entrypoint main = main.js\n-chunk    {0} 0.js 21 bytes <{3}> ={1}= ={2}= [rendered] reused as split chunk (cache group: default)\n-    > [3] ./index.js 17:1-21:3\n+chunk    {0} 0.js 21 bytes <{3}> [rendered] reused as split chunk (cache group: default)\n     > [3] ./index.js 2:1-5:3\n+ [0] ./a.js 21 bytes {0} {1} {2} [built]\n+chunk    {1} 1.js 42 bytes <{3}> [rendered]\n     > ./a ./b [3] ./index.js 9:1-13:3\n- [0] ./a.js 21 bytes {0} [built]\n-chunk    {1} 1.js 21 bytes <{3}> ={0}= [rendered]\n-    > ./a ./b [3] ./index.js 9:1-13:3\n+ [0] ./a.js 21 bytes {0} {1} {2} [built]\n  [1] ./b.js 21 bytes {1} [built]\n-chunk    {2} 2.js 21 bytes <{3}> ={0}= [rendered]\n+chunk    {2} 2.js 42 bytes <{3}> [rendered]\n     > [3] ./index.js 17:1-21:3\n+ [0] ./a.js 21 bytes {0} {1} {2} [built]\n  [2] ./c.js 21 bytes {2} [built]\n chunk    {3} main.js (main) 550 bytes >{0}< >{1}< >{2}< [entry] [rendered]\n     > ./ main"
      },
      {
        "sha": "615dd812ab6cc66868e6bb1e81cf7f1465ed74b5",
        "filename": "test/statsCases/chunks-development/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fchunks-development%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fchunks-development%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fchunks-development%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,11 +1,11 @@\n-Hash: e81afb52ad447e8765ab\n+Hash: d8b40b77893587325329\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset       Size  Chunks             Chunk Names\n 0.bundle.js  433 bytes       0  [emitted]  \n 1.bundle.js  297 bytes       1  [emitted]  \n 2.bundle.js  588 bytes       2  [emitted]  \n-  bundle.js   7.38 KiB    main  [emitted]  main\n+  bundle.js   7.65 KiB    main  [emitted]  main\n Entrypoint main = bundle.js\n chunk {main} bundle.js (main) 73 bytes >{0}< >{1}< [entry] [rendered]\n     > ./index main"
      },
      {
        "sha": "b12c85752585f89809a3c6618ead90a042e0dc18",
        "filename": "test/statsCases/chunks/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fchunks%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fchunks%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fchunks%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,10 +1,10 @@\n-Hash: 4a1bda30edd6ae541ab2\n+Hash: e99cd61934506d7567a3\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset       Size  Chunks             Chunk Names\n 0.bundle.js  152 bytes       0  [emitted]  \n 1.bundle.js  289 bytes       1  [emitted]  \n-  bundle.js      7 KiB       2  [emitted]  main\n+  bundle.js   7.27 KiB       2  [emitted]  main\n 3.bundle.js  227 bytes       3  [emitted]  \n Entrypoint main = bundle.js\n chunk    {0} 0.bundle.js 22 bytes <{2}> [rendered]"
      },
      {
        "sha": "4a2b4f0c5280d746bf2ab8635901c5f18640c6e3",
        "filename": "test/statsCases/commons-chunk-min-size-0/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fcommons-chunk-min-size-0%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fcommons-chunk-min-size-0%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fcommons-chunk-min-size-0%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -2,7 +2,7 @@ Hash: cad25b99a073374722a7\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n               Asset       Size  Chunks             Chunk Names\n-         entry-1.js   5.49 KiB       0  [emitted]  entry-1\n+         entry-1.js   5.79 KiB       0  [emitted]  entry-1\n vendor-1~entry-1.js  314 bytes       1  [emitted]  vendor-1~entry-1\n Entrypoint entry-1 = vendor-1~entry-1.js entry-1.js\n [0] ./entry-1.js 145 bytes {0} [built]"
      },
      {
        "sha": "00f7c5aa4bdcd338797deaea98fc23ee52316b50",
        "filename": "test/statsCases/commons-chunk-min-size-Infinity/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fcommons-chunk-min-size-Infinity%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fcommons-chunk-min-size-Infinity%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fcommons-chunk-min-size-Infinity%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -2,7 +2,7 @@ Hash: c176225f44e51c7a39a4\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n       Asset       Size  Chunks             Chunk Names\n- entry-1.js   5.49 KiB       0  [emitted]  entry-1\n+ entry-1.js   5.79 KiB       0  [emitted]  entry-1\n vendor-1.js  314 bytes       1  [emitted]  vendor-1\n Entrypoint entry-1 = vendor-1.js entry-1.js\n [0] ./entry-1.js 145 bytes {0} [built]"
      },
      {
        "sha": "8c19ca7a3c810461a815072cc5cc55254f0a63bb",
        "filename": "test/statsCases/commons-plugin-issue-4980/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fcommons-plugin-issue-4980%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fcommons-plugin-issue-4980%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fcommons-plugin-issue-4980%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -4,7 +4,7 @@ Child\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                              Asset       Size  Chunks             Chunk Names\n-                            app.js   5.58 KiB       0  [emitted]  app\n+                            app.js    5.9 KiB       0  [emitted]  app\n     vendor.c0e73bece4137a7015c2.js  619 bytes       1  [emitted]  vendor\n     Entrypoint app = vendor.c0e73bece4137a7015c2.js app.js\n     [./constants.js] 87 bytes {1} [built]\n@@ -17,7 +17,7 @@ Child\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n                              Asset       Size  Chunks             Chunk Names\n-                            app.js   5.59 KiB       0  [emitted]  app\n+                            app.js   5.92 KiB       0  [emitted]  app\n     vendor.c0e73bece4137a7015c2.js  619 bytes       1  [emitted]  vendor\n     Entrypoint app = vendor.c0e73bece4137a7015c2.js app.js\n     [./constants.js] 87 bytes {1} [built]"
      },
      {
        "sha": "8883ce138ef687cedaa5a49c2ad542600937613f",
        "filename": "test/statsCases/import-context-filter/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fimport-context-filter%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fimport-context-filter%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fimport-context-filter%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,11 +1,11 @@\n-Hash: 20afe8e9eb9a69aecddb\n+Hash: 736289137c8313a6d802\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n    Asset       Size  Chunks             Chunk Names\n     0.js  305 bytes       0  [emitted]  \n     1.js  314 bytes       1  [emitted]  \n     2.js  308 bytes       2  [emitted]  \n-entry.js    7.8 KiB       3  [emitted]  entry\n+entry.js   8.07 KiB       3  [emitted]  entry\n Entrypoint entry = entry.js\n [0] ./templates/bar.js 38 bytes {0} [optional] [built]\n [1] ./templates/baz.js 38 bytes {1} [optional] [built]"
      },
      {
        "sha": "e1283ab691b22ea682e11d3485fc71c4d21679d4",
        "filename": "test/statsCases/import-weak/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fimport-weak%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fimport-weak%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fimport-weak%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,9 +1,9 @@\n-Hash: 1f9db3ad053a3687e3bb\n+Hash: 1c55fc2d238369c62239\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n    Asset       Size  Chunks             Chunk Names\n     0.js  149 bytes       0  [emitted]  \n-entry.js   7.79 KiB       1  [emitted]  entry\n+entry.js   8.06 KiB       1  [emitted]  entry\n Entrypoint entry = entry.js\n [0] ./modules/b.js 22 bytes {0} [built]\n [1] ./entry.js 120 bytes {1} [built]"
      },
      {
        "sha": "88012eed753f4fd851f395e0fea24d09cb473b17",
        "filename": "test/statsCases/limit-chunk-count-plugin/expected.txt",
        "status": "modified",
        "additions": 9,
        "deletions": 9,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Flimit-chunk-count-plugin%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Flimit-chunk-count-plugin%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Flimit-chunk-count-plugin%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,10 +1,10 @@\n-Hash: 599eb45be3863921e183f90c7b21ae5c6e853a0df3a313c9918d7d712c3f113bf580db9e5c6196ce\n+Hash: 89bb5076b735d47082582924d303eb8bcffb1c785cc24ae5dbdd7c6bafb935e3a49d38d6f5cc7854\n Child 1 chunks:\n-    Hash: 599eb45be3863921e183\n+    Hash: 89bb5076b735d4708258\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n         Asset      Size  Chunks             Chunk Names\n-    bundle.js  5.68 KiB       0  [emitted]  main\n+    bundle.js  5.98 KiB       0  [emitted]  main\n     Entrypoint main = bundle.js\n     chunk    {0} bundle.js (main) 191 bytes <{0}> >{0}< [entry] [rendered]\n      [0] ./index.js 73 bytes {0} [built]\n@@ -14,12 +14,12 @@ Child 1 chunks:\n      [4] ./d.js 22 bytes {0} [built]\n      [5] ./e.js 22 bytes {0} [built]\n Child 2 chunks:\n-    Hash: f90c7b21ae5c6e853a0d\n+    Hash: 2924d303eb8bcffb1c78\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n           Asset      Size  Chunks             Chunk Names\n     0.bundle.js     1 KiB       0  [emitted]  \n-      bundle.js  7.19 KiB       1  [emitted]  main\n+      bundle.js  7.46 KiB       1  [emitted]  main\n     Entrypoint main = bundle.js\n     chunk    {0} 0.bundle.js 118 bytes <{0}> <{1}> >{0}< [rendered]\n      [0] ./d.js 22 bytes {0} [built]\n@@ -30,13 +30,13 @@ Child 2 chunks:\n     chunk    {1} bundle.js (main) 73 bytes >{0}< [entry] [rendered]\n      [5] ./index.js 73 bytes {1} [built]\n Child 3 chunks:\n-    Hash: f3a313c9918d7d712c3f\n+    Hash: 5cc24ae5dbdd7c6bafb9\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n           Asset       Size  Chunks             Chunk Names\n     0.bundle.js  886 bytes       0  [emitted]  \n     1.bundle.js  245 bytes       1  [emitted]  \n-      bundle.js   7.19 KiB       2  [emitted]  main\n+      bundle.js   7.46 KiB       2  [emitted]  main\n     Entrypoint main = bundle.js\n     chunk    {0} 0.bundle.js 74 bytes <{0}> <{2}> >{0}< >{1}< [rendered]\n      [0] ./d.js 22 bytes {0} [built]\n@@ -48,14 +48,14 @@ Child 3 chunks:\n     chunk    {2} bundle.js (main) 73 bytes >{0}< >{1}< [entry] [rendered]\n      [5] ./index.js 73 bytes {2} [built]\n Child 4 chunks:\n-    Hash: 113bf580db9e5c6196ce\n+    Hash: 35e3a49d38d6f5cc7854\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n           Asset       Size  Chunks             Chunk Names\n     0.bundle.js  236 bytes       0  [emitted]  \n     1.bundle.js  245 bytes       1  [emitted]  \n     2.bundle.js  715 bytes       2  [emitted]  \n-      bundle.js   7.19 KiB       3  [emitted]  main\n+      bundle.js   7.46 KiB       3  [emitted]  main\n     Entrypoint main = bundle.js\n     chunk    {0} 0.bundle.js 44 bytes <{2}> <{3}> [rendered]\n      [0] ./d.js 22 bytes {0} [built]"
      },
      {
        "sha": "723eea28d5e75ba39090510c2a1ee482c1250fab",
        "filename": "test/statsCases/module-assets/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fmodule-assets%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fmodule-assets%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-assets%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,4 +1,4 @@\n-Hash: d71bd16b0b20f34e994a\n+Hash: 021e4419d6957e08eedd\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n Entrypoint main = main.js"
      },
      {
        "sha": "1c68b4453604f464ba73f513b201568313b2b18e",
        "filename": "test/statsCases/module-deduplication-named/expected.txt",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fmodule-deduplication-named%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fmodule-deduplication-named%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -2,9 +2,9 @@\n async3.js  818 bytes       0  [emitted]  async3\n async1.js  818 bytes       1  [emitted]  async1\n async2.js  818 bytes       2  [emitted]  async2\n-    e1.js   8.02 KiB       3  [emitted]  e1\n-    e2.js   8.05 KiB       4  [emitted]  e2\n-    e3.js   8.07 KiB       5  [emitted]  e3\n+    e1.js   8.29 KiB       3  [emitted]  e1\n+    e2.js   8.31 KiB       4  [emitted]  e2\n+    e3.js   8.33 KiB       5  [emitted]  e3\n Entrypoint e1 = e1.js\n Entrypoint e2 = e2.js\n Entrypoint e3 = e3.js"
      },
      {
        "sha": "1dd7c9037f2b50f5ef11fc6927f64d4df0a572f0",
        "filename": "test/statsCases/module-deduplication/expected.txt",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -5,9 +5,9 @@ Asset       Size  Chunks             Chunk Names\n  3.js  661 bytes       3  [emitted]  \n  4.js  661 bytes       4  [emitted]  \n  5.js  661 bytes       5  [emitted]  \n-e1.js   8.14 KiB       6  [emitted]  e1\n-e2.js   8.16 KiB       7  [emitted]  e2\n-e3.js   8.18 KiB       8  [emitted]  e3\n+e1.js    8.4 KiB       6  [emitted]  e1\n+e2.js   8.43 KiB       7  [emitted]  e2\n+e3.js   8.45 KiB       8  [emitted]  e3\n Entrypoint e1 = e1.js\n Entrypoint e2 = e2.js\n Entrypoint e3 = e3.js"
      },
      {
        "sha": "1bf804994222e2cc46dcf6f606c178a194b1a768",
        "filename": "test/statsCases/named-chunks-plugin-async/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fnamed-chunks-plugin-async%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fnamed-chunks-plugin-async%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fnamed-chunks-plugin-async%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,10 +1,10 @@\n-Hash: c5b0089a4015e8744f8e\n+Hash: f7d13fc86234627ae268\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n                      Asset       Size                   Chunks             Chunk Names\n chunk-containing-__a_js.js  509 bytes  chunk-containing-__a_js  [emitted]  \n chunk-containing-__b_js.js  173 bytes  chunk-containing-__b_js  [emitted]  \n-                  entry.js   7.28 KiB                    entry  [emitted]  entry\n+                  entry.js   7.55 KiB                    entry  [emitted]  entry\n Entrypoint entry = entry.js\n [0] ./modules/b.js 22 bytes {chunk-containing-__b_js} [built]\n [1] ./modules/a.js 37 bytes {chunk-containing-__a_js} [built]"
      },
      {
        "sha": "b4bcb7705057eb37e43ecbd04afee8af6bffd73a",
        "filename": "test/statsCases/named-chunks-plugin/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fnamed-chunks-plugin%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fnamed-chunks-plugin%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fnamed-chunks-plugin%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -2,7 +2,7 @@ Hash: 5df55d54223f36cc303b\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n     Asset       Size  Chunks             Chunk Names\n- entry.js   5.34 KiB   entry  [emitted]  entry\n+ entry.js   5.64 KiB   entry  [emitted]  entry\n vendor.js  269 bytes  vendor  [emitted]  vendor\n Entrypoint entry = vendor.js entry.js\n [./entry.js] 72 bytes {entry} [built]"
      },
      {
        "sha": "37a2a0a38a3a42fc2845e927f58186233607fa70",
        "filename": "test/statsCases/optimize-chunks/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,12 +1,12 @@\n-Hash: c4c4476c6d07e1bf7404\n+Hash: b643225c9d2e70212495\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n             Asset       Size  Chunks             Chunk Names\n           cir1.js  299 bytes       0  [emitted]  cir1\n             ab.js  183 bytes       1  [emitted]  ab\n            abd.js  277 bytes    2, 1  [emitted]  abd\n           cir2.js  299 bytes       3  [emitted]  cir2\n-          main.js    7.8 KiB       4  [emitted]  main\n+          main.js   8.07 KiB       4  [emitted]  main\n cir2 from cir1.js  359 bytes    5, 3  [emitted]  cir2 from cir1\n          chunk.js  190 bytes    6, 7  [emitted]  chunk\n       ac in ab.js  130 bytes       7  [emitted]  ac in ab"
      },
      {
        "sha": "55e534918f0c80f483f3a8ffbccd9ba12c56dfc6",
        "filename": "test/statsCases/prefetch-preload-mixed/a.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,2 @@\n+import(/* webpackPrefetch: true, webpackChunkName: \"a1\" */ \"./a1\");\n+import(/* webpackPrefetch: true, webpackChunkName: \"a2\" */ \"./a2\");"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch-preload-mixed/a1.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa1.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch-preload-mixed/a2.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fa2.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "756debf2d027be9083177e888a89db7dab80888b",
        "filename": "test/statsCases/prefetch-preload-mixed/b.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,3 @@\n+import(/* webpackPrefetch: true, webpackChunkName: \"b1\" */ \"./b1\");\n+import(/* webpackPreload: true, webpackChunkName: \"b2\" */ \"./b2\");\n+import(/* webpackPrefetch: true, webpackChunkName: \"b3\" */ \"./b3\");"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch-preload-mixed/b1.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb1.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch-preload-mixed/b2.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb2.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch-preload-mixed/b3.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fb3.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "33838a297eb57951bae16215f31e0f6a80c5219a",
        "filename": "test/statsCases/prefetch-preload-mixed/c.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,2 @@\n+import(/* webpackPreload: true, webpackChunkName: \"c1\" */ \"./c1\");\n+import(/* webpackPreload: true, webpackChunkName: \"c2\" */ \"./c2\");"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch-preload-mixed/c1.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc1.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch-preload-mixed/c2.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fc2.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "55597681b9f78a35d31ec2a98cffd2819663f189",
        "filename": "test/statsCases/prefetch-preload-mixed/expected.txt",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,11 @@\n+chunk    {0} a.js (a) 136 bytes <{3}> >{10}< >{9}< (prefetch: {9} {10}) [rendered]\n+chunk    {1} b.js (b) 203 bytes <{3}> >{6}< >{7}< >{8}< (prefetch: {6} {8}) (preload: {7}) [rendered]\n+chunk    {2} c.js (c) 134 bytes <{3}> >{4}< >{5}< (preload: {4} {5}) [rendered]\n+chunk    {3} main.js (main) 195 bytes >{0}< >{1}< >{2}< (prefetch: {0} {1} {2}) [entry] [rendered]\n+chunk    {4} c1.js (c1) 0 bytes <{2}> [rendered]\n+chunk    {5} c2.js (c2) 0 bytes <{2}> [rendered]\n+chunk    {6} b1.js (b1) 0 bytes <{1}> [rendered]\n+chunk    {7} b2.js (b2) 0 bytes <{1}> [rendered]\n+chunk    {8} b3.js (b3) 0 bytes <{1}> [rendered]\n+chunk    {9} a1.js (a1) 0 bytes <{0}> [rendered]\n+chunk   {10} a2.js (a2) 0 bytes <{0}> [rendered]\n\\ No newline at end of file"
      },
      {
        "sha": "a1bb65b54b379135d0c99bd5dfd4745964f76a22",
        "filename": "test/statsCases/prefetch-preload-mixed/index.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Findex.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,3 @@\n+import(/* webpackPrefetch: true, webpackChunkName: \"a\" */\"./a\");\n+import(/* webpackPrefetch: true, webpackChunkName: \"b\" */\"./b\");\n+import(/* webpackPrefetch: true, webpackChunkName: \"c\" */\"./c\");"
      },
      {
        "sha": "85c108d2ed7461fadcfae8b314b6e313e5eeb3d6",
        "filename": "test/statsCases/prefetch-preload-mixed/webpack.config.js",
        "status": "added",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch-preload-mixed%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch-preload-mixed%2Fwebpack.config.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,8 @@\n+module.exports = {\n+\tmode: \"production\",\n+\tentry: \"./index\",\n+\tstats: {\n+\t\tall: false,\n+\t\tchunks: true\n+\t}\n+};"
      },
      {
        "sha": "1c4aa09a03eca090aec531417a4ea8ee41aad978",
        "filename": "test/statsCases/prefetch/expected.txt",
        "status": "added",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,16 @@\n+         Asset       Size  Chunks             Chunk Names\n+ prefetched.js   1.03 KiB       0  [emitted]  prefetched\n+     normal.js  130 bytes       1  [emitted]  normal\n+prefetched2.js  127 bytes       2  [emitted]  prefetched2\n+prefetched3.js  130 bytes       3  [emitted]  prefetched3\n+       main.js   9.69 KiB       4  [emitted]  main\n+      inner.js  136 bytes       5  [emitted]  inner\n+     inner2.js  201 bytes       6  [emitted]  inner2\n+Entrypoint main = main.js (prefetch: prefetched2.js prefetched.js prefetched3.js)\n+chunk    {0} prefetched.js (prefetched) 228 bytes <{4}> >{5}< >{6}< (prefetch: {6} {5}) [rendered]\n+chunk    {1} normal.js (normal) 0 bytes <{4}> [rendered]\n+chunk    {2} prefetched2.js (prefetched2) 0 bytes <{4}> [rendered]\n+chunk    {3} prefetched3.js (prefetched3) 0 bytes <{4}> [rendered]\n+chunk    {4} main.js (main) 436 bytes >{0}< >{1}< >{2}< >{3}< (prefetch: {2} {0} {3}) [entry] [rendered]\n+chunk    {5} inner.js (inner) 0 bytes <{0}> [rendered]\n+chunk    {6} inner2.js (inner2) 0 bytes <{0}> [rendered]\n\\ No newline at end of file"
      },
      {
        "sha": "9b6aaeab545fcf726200ef2cc1c6161a3dbd7c09",
        "filename": "test/statsCases/prefetch/index.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Findex.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,5 @@\n+import \"./with-nested\";\n+import(/* webpackPrefetch: 1, webpackChunkName: \"prefetched\" */ \"./prefetched\");\n+setTimeout(() => {\n+\timport(/* webpackChunkName: \"normal\" */\"./normal\");\n+}, 500);"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch/inner.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Finner.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Finner.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Finner.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch/inner2.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Finner2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Finner2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Finner2.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch/inner3.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Finner3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Finner3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Finner3.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch/normal.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fnormal.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fnormal.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Fnormal.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "63683ca279422bb30e3ab39ed52627b9d5cc4cb9",
        "filename": "test/statsCases/prefetch/prefetched.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fprefetched.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fprefetched.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Fprefetched.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,5 @@\n+setTimeout(() => {\n+\timport(/* webpackPrefetch: 10, webpackChunkName: \"inner\" */\"./inner\");\n+\timport(/* webpackPrefetch: 20, webpackChunkName: \"inner2\" */\"./inner2\");\n+\timport(/* webpackChunkName: \"inner2\" */\"./inner3\");\n+}, 5000);"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch/prefetched2.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fprefetched2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fprefetched2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Fprefetched2.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/prefetch/prefetched3.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fprefetched3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fprefetched3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Fprefetched3.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "17dba56dbc3e53c8188c59b589b5ef0b55f4e120",
        "filename": "test/statsCases/prefetch/webpack.config.js",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Fwebpack.config.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,10 @@\n+module.exports = {\n+\tmode: \"production\",\n+\tentry: \"./index\",\n+\tstats: {\n+\t\tall: false,\n+\t\tassets: true,\n+\t\tentrypoints: true,\n+\t\tchunks: true\n+\t}\n+};"
      },
      {
        "sha": "0720ce6e7e054e2263b1117a29ef6f81151e6bab",
        "filename": "test/statsCases/prefetch/with-nested.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fwith-nested.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fprefetch%2Fwith-nested.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fprefetch%2Fwith-nested.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,3 @@\n+import(/* webpackPrefetch: -20, webpackChunkName: \"prefetched2\" */\"./prefetched2\");\n+import(/* webpackPrefetch: 3, webpackChunkName: \"prefetched2\" */\"./prefetched2\");\n+import(/* webpackPrefetch: -10, webpackChunkName: \"prefetched3\" */\"./prefetched3\");"
      },
      {
        "sha": "75bf0ae9fa8506bd9417dc4c094ca826248a4eef",
        "filename": "test/statsCases/preload/expected.txt",
        "status": "added",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,16 @@\n+        Asset       Size  Chunks             Chunk Names\n+ preloaded.js   1.03 KiB       0  [emitted]  preloaded\n+    normal.js  130 bytes       1  [emitted]  normal\n+preloaded2.js  127 bytes       2  [emitted]  preloaded2\n+preloaded3.js  130 bytes       3  [emitted]  preloaded3\n+      main.js   9.81 KiB       4  [emitted]  main\n+     inner.js  136 bytes       5  [emitted]  inner\n+    inner2.js  201 bytes       6  [emitted]  inner2\n+Entrypoint main = main.js (preload: preloaded2.js preloaded.js preloaded3.js)\n+chunk    {0} preloaded.js (preloaded) 226 bytes <{4}> >{5}< >{6}< (preload: {6} {5}) [rendered]\n+chunk    {1} normal.js (normal) 0 bytes <{4}> [rendered]\n+chunk    {2} preloaded2.js (preloaded2) 0 bytes <{4}> [rendered]\n+chunk    {3} preloaded3.js (preloaded3) 0 bytes <{4}> [rendered]\n+chunk    {4} main.js (main) 424 bytes >{0}< >{1}< >{2}< >{3}< (preload: {2} {0} {3}) [entry] [rendered]\n+chunk    {5} inner.js (inner) 0 bytes <{0}> [rendered]\n+chunk    {6} inner2.js (inner2) 0 bytes <{0}> [rendered]\n\\ No newline at end of file"
      },
      {
        "sha": "2578b3824ab26aa49572af2640420abb977ffd52",
        "filename": "test/statsCases/preload/index.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Findex.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,5 @@\n+import \"./with-nested\";\n+import(/* webpackPreload: 1, webpackChunkName: \"preloaded\" */ \"./preloaded\");\n+setTimeout(() => {\n+\timport(/* webpackChunkName: \"normal\" */\"./normal\");\n+}, 500);"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/preload/inner.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Finner.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Finner.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Finner.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/preload/inner2.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Finner2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Finner2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Finner2.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/preload/inner3.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Finner3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Finner3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Finner3.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/preload/normal.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fnormal.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fnormal.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Fnormal.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "02f02b8e86fe08bb5f616a415bf930ab68315193",
        "filename": "test/statsCases/preload/preloaded.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fpreloaded.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fpreloaded.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Fpreloaded.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,5 @@\n+setTimeout(() => {\n+\timport(/* webpackPreload: 10, webpackChunkName: \"inner\" */\"./inner\");\n+\timport(/* webpackPreload: 20, webpackChunkName: \"inner2\" */\"./inner2\");\n+\timport(/* webpackChunkName: \"inner2\" */\"./inner3\");\n+}, 5000);"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/preload/preloaded2.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fpreloaded2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fpreloaded2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Fpreloaded2.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "test/statsCases/preload/preloaded3.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fpreloaded3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fpreloaded3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Fpreloaded3.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da"
      },
      {
        "sha": "17dba56dbc3e53c8188c59b589b5ef0b55f4e120",
        "filename": "test/statsCases/preload/webpack.config.js",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Fwebpack.config.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,10 @@\n+module.exports = {\n+\tmode: \"production\",\n+\tentry: \"./index\",\n+\tstats: {\n+\t\tall: false,\n+\t\tassets: true,\n+\t\tentrypoints: true,\n+\t\tchunks: true\n+\t}\n+};"
      },
      {
        "sha": "0b7a826e18034d37a8864ee4b81623018407ad20",
        "filename": "test/statsCases/preload/with-nested.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fwith-nested.js",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreload%2Fwith-nested.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreload%2Fwith-nested.js?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -0,0 +1,3 @@\n+import(/* webpackPreload: -20, webpackChunkName: \"preloaded2\" */\"./preloaded2\");\n+import(/* webpackPreload: 3, webpackChunkName: \"preloaded2\" */\"./preloaded2\");\n+import(/* webpackPreload: -10, webpackChunkName: \"preloaded3\" */\"./preloaded3\");"
      },
      {
        "sha": "353b8af1d53e06361806118f3326b4072840c1db",
        "filename": "test/statsCases/preset-detailed/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreset-detailed%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreset-detailed%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-detailed%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,10 +1,10 @@\n-Hash: a181afd92c30187a0eba\n+Hash: 5a6d9c01f46a5330eee6\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n    0.js  152 bytes       0  [emitted]  \n    1.js  289 bytes       1  [emitted]  \n-main.js   7.01 KiB       2  [emitted]  main\n+main.js   7.28 KiB       2  [emitted]  main\n    3.js  227 bytes       3  [emitted]  \n Entrypoint main = main.js\n chunk    {0} 0.js 22 bytes <{2}> [rendered]"
      },
      {
        "sha": "89ef4e41f64f04e60ecc7b0ff43f044986b53983",
        "filename": "test/statsCases/preset-normal/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreset-normal%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreset-normal%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,10 +1,10 @@\n-Hash: a181afd92c30187a0eba\n+Hash: 5a6d9c01f46a5330eee6\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n    0.js  152 bytes       0  [emitted]  \n    1.js  289 bytes       1  [emitted]  \n-main.js   7.01 KiB       2  [emitted]  main\n+main.js   7.28 KiB       2  [emitted]  main\n    3.js  227 bytes       3  [emitted]  \n Entrypoint main = main.js\n [0] ./d.js 22 bytes {3} [built]"
      },
      {
        "sha": "5f0db8b99d75d440e37ef8fbf47115290dbd515a",
        "filename": "test/statsCases/preset-verbose/expected.txt",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreset-verbose%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fpreset-verbose%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-verbose%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,10 +1,10 @@\n-Hash: a181afd92c30187a0eba\n+Hash: 5a6d9c01f46a5330eee6\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n   Asset       Size  Chunks             Chunk Names\n    0.js  152 bytes       0  [emitted]  \n    1.js  289 bytes       1  [emitted]  \n-main.js   7.01 KiB       2  [emitted]  main\n+main.js   7.28 KiB       2  [emitted]  main\n    3.js  227 bytes       3  [emitted]  \n Entrypoint main = main.js\n chunk    {0} 0.js 22 bytes <{2}> [rendered]"
      },
      {
        "sha": "93abd07115e89fa780dab8a3e266b89dcb6095a2",
        "filename": "test/statsCases/scope-hoisting-bailouts/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fscope-hoisting-bailouts%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fscope-hoisting-bailouts%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fscope-hoisting-bailouts%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,4 +1,4 @@\n-Hash: 123228577e0595ae0a8e\n+Hash: ee60eae5100628922748\n Time: Xms\n Built at: Thu Jan 01 1970 00:00:00 GMT\n Entrypoint index = index.js"
      },
      {
        "sha": "93efc61d5b2225809271f4535dc059e4d8d3241a",
        "filename": "test/statsCases/scope-hoisting-multi/expected.txt",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fscope-hoisting-multi%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/8e2e19ba50b1d84710cd6b56b85705ee230a86da/test%2FstatsCases%2Fscope-hoisting-multi%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fscope-hoisting-multi%2Fexpected.txt?ref=8e2e19ba50b1d84710cd6b56b85705ee230a86da",
        "patch": "@@ -1,6 +1,6 @@\n-Hash: 1e05cb63c83229a31d7fe3bbe6aa8fb8e8ec3bd9\n+Hash: 33704ebeb245a82a7e824bf53c5eb877060bfd4d\n Child\n-    Hash: 1e05cb63c83229a31d7f\n+    Hash: 33704ebeb245a82a7e82\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     Entrypoint first = vendor.js first.js\n@@ -17,7 +17,7 @@ Child\n      [9] ./module_first.js 31 bytes {4} [built]\n     [10] ./second.js 177 bytes {5} [built]\n Child\n-    Hash: e3bbe6aa8fb8e8ec3bd9\n+    Hash: 4bf53c5eb877060bfd4d\n     Time: Xms\n     Built at: Thu Jan 01 1970 00:00:00 GMT\n     Entrypoint first = vendor.js first.js"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/6253",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/6253/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/6253/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/6253/events",
    "html_url": "https://github.com/webpack/webpack/pull/6253",
    "id": 286454340,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxNDYzMDIy",
    "number": 6253,
    "title": "Remove extra semicolons",
    "user": {
      "login": "wa-Nadoo",
      "id": 1248501,
      "node_id": "MDQ6VXNlcjEyNDg1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1248501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wa-Nadoo",
      "html_url": "https://github.com/wa-Nadoo",
      "followers_url": "https://api.github.com/users/wa-Nadoo/followers",
      "following_url": "https://api.github.com/users/wa-Nadoo/following{/other_user}",
      "gists_url": "https://api.github.com/users/wa-Nadoo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wa-Nadoo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wa-Nadoo/subscriptions",
      "organizations_url": "https://api.github.com/users/wa-Nadoo/orgs",
      "repos_url": "https://api.github.com/users/wa-Nadoo/repos",
      "events_url": "https://api.github.com/users/wa-Nadoo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wa-Nadoo/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-01-06T03:02:34Z",
    "updated_at": "2018-01-06T11:20:57Z",
    "closed_at": "2018-01-06T09:37:49Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/6253",
      "html_url": "https://github.com/webpack/webpack/pull/6253",
      "diff_url": "https://github.com/webpack/webpack/pull/6253.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/6253.patch",
      "merged_at": "2018-01-06T09:37:49Z"
    },
    "body": "**What kind of change does this PR introduce?**\r\nrefactoring\r\n\r\n**Summary**\r\nThe small refactoring. It fixes duplicated semicolons in bundled files and slightly improves build performance.\r\n\r\n**Does this PR introduce a breaking change?**\r\nNo\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/6253/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/6253/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "e36586fce4b47a9a6e100426c9d8725724f2dac9",
        "filename": "lib/ContextModule.js",
        "status": "modified",
        "additions": 19,
        "deletions": 19,
        "changes": 38,
        "blob_url": "https://github.com/webpack/webpack/blob/3a89252c62eb121f49520ae0a86ba4d5b76ac93e/lib%2FContextModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3a89252c62eb121f49520ae0a86ba4d5b76ac93e/lib%2FContextModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModule.js?ref=3a89252c62eb121f49520ae0a86ba4d5b76ac93e",
        "patch": "@@ -258,27 +258,27 @@ class ContextModule extends Module {\n \t\treturn typeof fakeMap === \"object\" ? `var fakeMap = ${JSON.stringify(fakeMap, null, \"\\t\")};` : \"\";\n \t}\n \n-\tgetReturnModuleObjectSource(fakeMap, fakeMapDataExpression = \"fakeMap[id]\") {\n-\t\tconst strict = this.options.namespaceObject === \"strict\";\n-\t\tconst getReturn = type => {\n-\t\t\tif(type === 1) return \"module\";\n-\t\t\tif(type === 2) return \"Object.assign({/* fake namespace object */}, module, { \\\"default\\\": module })\";\n-\t\t\tif(type === 0) {\n-\t\t\t\tif(strict) {\n-\t\t\t\t\treturn \"/* fake namespace object */ { \\\"default\\\": module }\";\n-\t\t\t\t} else {\n-\t\t\t\t\treturn \"(typeof module === \\\"object\\\" && module && module.__esModule ? module : /* fake namespace object */ { \\\"default\\\": module })\";\n-\t\t\t\t}\n+\tgetReturn(type) {\n+\t\tif(type === 1) return \"module\";\n+\t\tif(type === 2) return \"Object.assign({/* fake namespace object */}, module, { \\\"default\\\": module })\";\n+\t\tif(type === 0) {\n+\t\t\tif(this.options.namespaceObject === \"strict\") {\n+\t\t\t\treturn \"/* fake namespace object */ { \\\"default\\\": module }\";\n+\t\t\t} else {\n+\t\t\t\treturn \"(typeof module === \\\"object\\\" && module && module.__esModule ? module : /* fake namespace object */ { \\\"default\\\": module })\";\n \t\t\t}\n-\t\t};\n-\t\tif(typeof fakeMap === \"number\") return `return ${getReturn(fakeMap)};`;\n-\t\treturn `return ${fakeMapDataExpression} === 1 ? ${getReturn(1)} : ${fakeMapDataExpression} ? ${getReturn(2)} : ${getReturn(0)};`;\n+\t\t}\n+\t}\n+\n+\tgetReturnModuleObjectSource(fakeMap, fakeMapDataExpression = \"fakeMap[id]\") {\n+\t\tif(typeof fakeMap === \"number\") return `return ${this.getReturn(fakeMap)};`;\n+\t\treturn `return ${fakeMapDataExpression} === 1 ? ${this.getReturn(1)} : ${fakeMapDataExpression} ? ${this.getReturn(2)} : ${this.getReturn(0)};`;\n \t}\n \n \tgetSyncSource(dependencies, id) {\n \t\tconst map = this.getUserRequestMap(dependencies);\n \t\tconst fakeMap = this.getFakeMap(dependencies);\n-\t\tconst returnModuleObject = `${this.getReturnModuleObjectSource(fakeMap)};`;\n+\t\tconst returnModuleObject = this.getReturnModuleObjectSource(fakeMap);\n \n \t\treturn `var map = ${JSON.stringify(map, null, \"\\t\")};\n ${this.getFakeMapInitStatement(fakeMap)}\n@@ -308,7 +308,7 @@ webpackContext.id = ${JSON.stringify(id)};`;\n \tgetWeakSyncSource(dependencies, id) {\n \t\tconst map = this.getUserRequestMap(dependencies);\n \t\tconst fakeMap = this.getFakeMap(dependencies);\n-\t\tconst returnModuleObject = `${this.getReturnModuleObjectSource(fakeMap)};`;\n+\t\tconst returnModuleObject = this.getReturnModuleObjectSource(fakeMap);\n \n \t\treturn `var map = ${JSON.stringify(map, null, \"\\t\")};\n ${this.getFakeMapInitStatement(fakeMap)}\n@@ -343,7 +343,7 @@ module.exports = webpackContext;`;\n \tgetAsyncWeakSource(dependencies, id) {\n \t\tconst map = this.getUserRequestMap(dependencies);\n \t\tconst fakeMap = this.getFakeMap(dependencies);\n-\t\tconst returnModuleObject = `${this.getReturnModuleObjectSource(fakeMap)};`;\n+\t\tconst returnModuleObject = this.getReturnModuleObjectSource(fakeMap);\n \n \t\treturn `var map = ${JSON.stringify(map, null, \"\\t\")};\n ${this.getFakeMapInitStatement(fakeMap)}\n@@ -386,7 +386,7 @@ module.exports = webpackAsyncContext;`;\n \t\tconst thenFunction = fakeMap !== 1 ?\n \t\t\t`function(id) {\n \tvar module = __webpack_require__(id);\n-\t${this.getReturnModuleObjectSource(fakeMap)};\n+\t${this.getReturnModuleObjectSource(fakeMap)}\n }` :\n \t\t\t\"__webpack_require__\";\n \t\treturn `var map = ${JSON.stringify(map, null, \"\\t\")};\n@@ -485,7 +485,7 @@ module.exports = webpackAsyncContext;`;\n \t\tconst requestPrefix = hasMultipleOrNoChunks ?\n \t\t\t`Promise.all(ids.slice(${chunksStartPosition}).map(__webpack_require__.e))` :\n \t\t\t`__webpack_require__.e(ids[${chunksStartPosition}])`;\n-\t\tconst returnModuleObject = `${this.getReturnModuleObjectSource(fakeMap, \"ids[1]\")};`;\n+\t\tconst returnModuleObject = this.getReturnModuleObjectSource(fakeMap, \"ids[1]\");\n \n \t\treturn `var map = ${JSON.stringify(map, null, \"\\t\")};\n function webpackAsyncContext(req) {"
      },
      {
        "sha": "ed627e845e828440745acbda1a75de2343df203b",
        "filename": "lib/dependencies/WebpackMissingModule.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3a89252c62eb121f49520ae0a86ba4d5b76ac93e/lib%2Fdependencies%2FWebpackMissingModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3a89252c62eb121f49520ae0a86ba4d5b76ac93e/lib%2Fdependencies%2FWebpackMissingModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FWebpackMissingModule.js?ref=3a89252c62eb121f49520ae0a86ba4d5b76ac93e",
        "patch": "@@ -9,7 +9,7 @@ exports.module = request => `!(function webpackMissingModule() { ${exports.modul\n \n exports.promise = (request) => {\n \tconst errorCode = toErrorCode(`Cannot find module \"${request}\"`);\n-\treturn `Promise.reject(function webpackMissingModule() { ${errorCode}; return e; }())`;\n+\treturn `Promise.reject(function webpackMissingModule() { ${errorCode} return e; }())`;\n };\n \n exports.moduleCode = (request) => {"
      },
      {
        "sha": "ce82d777196cdc9a5b8a1ee3314c994e039fc3ca",
        "filename": "test/WebpackMissingModule.unittest.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3a89252c62eb121f49520ae0a86ba4d5b76ac93e/test%2FWebpackMissingModule.unittest.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3a89252c62eb121f49520ae0a86ba4d5b76ac93e/test%2FWebpackMissingModule.unittest.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FWebpackMissingModule.unittest.js?ref=3a89252c62eb121f49520ae0a86ba4d5b76ac93e",
        "patch": "@@ -15,7 +15,7 @@ describe(\"WebpackMissingModule\", () => {\n \tdescribe(\"#promise\", () => {\n \t\tit(\"returns an error message based on given error message\", () => {\n \t\t\tconst errorMessage = WebpackMissingModule.promise(\"mock message\");\n-\t\t\tshould(errorMessage).be.eql(\"Promise.reject(function webpackMissingModule() { var e = new Error(\\\"Cannot find module \\\\\\\"mock message\\\\\\\"\\\"); e.code = 'MODULE_NOT_FOUND';; return e; }())\");\n+\t\t\tshould(errorMessage).be.eql(\"Promise.reject(function webpackMissingModule() { var e = new Error(\\\"Cannot find module \\\\\\\"mock message\\\\\\\"\\\"); e.code = 'MODULE_NOT_FOUND'; return e; }())\");\n \t\t});\n \t});\n "
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5322",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5322/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5322/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5322/events",
    "html_url": "https://github.com/webpack/webpack/pull/5322",
    "id": 244076892,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTMxMzQ3ODY5",
    "number": 5322,
    "title": "Parser performance improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 496339709,
        "node_id": "MDU6TGFiZWw0OTYzMzk3MDk=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20breaking%20change",
        "name": "PR: breaking change",
        "color": "f9d0c4",
        "default": false,
        "description": null
      },
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
      "url": "https://api.github.com/repos/webpack/webpack/milestones/15",
      "html_url": "https://github.com/webpack/webpack/milestone/15",
      "labels_url": "https://api.github.com/repos/webpack/webpack/milestones/15/labels",
      "id": 2472672,
      "node_id": "MDk6TWlsZXN0b25lMjQ3MjY3Mg==",
      "number": 15,
      "title": "webpack 4",
      "description": "",
      "creator": {
        "login": "sokra",
        "id": 1365881,
        "node_id": "MDQ6VXNlcjEzNjU4ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sokra",
        "html_url": "https://github.com/sokra",
        "followers_url": "https://api.github.com/users/sokra/followers",
        "following_url": "https://api.github.com/users/sokra/following{/other_user}",
        "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
        "organizations_url": "https://api.github.com/users/sokra/orgs",
        "repos_url": "https://api.github.com/users/sokra/repos",
        "events_url": "https://api.github.com/users/sokra/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sokra/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 58,
      "state": "closed",
      "created_at": "2017-04-21T16:56:32Z",
      "updated_at": "2018-06-21T10:45:41Z",
      "due_on": "2018-02-24T08:00:00Z",
      "closed_at": "2018-06-21T10:45:41Z"
    },
    "comments": 1,
    "created_at": "2017-07-19T15:15:34Z",
    "updated_at": "2017-09-11T10:41:32Z",
    "closed_at": "2017-09-11T10:41:28Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5322",
      "html_url": "https://github.com/webpack/webpack/pull/5322",
      "diff_url": "https://github.com/webpack/webpack/pull/5322.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5322.patch",
      "merged_at": "2017-09-11T10:41:28Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nParser.definitions and Parser.renames are using Maps now\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nYes\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\nMy first try was using `Set` for definitions, but this was slow because it's often copied for a nested scope. Because of this I implemented `StackedSetMap` which is a stacked versions of `Set` and `Map`. It keeps a stack of parent scope sets/maps to avoid copying. Asking the `StackedSetMap` for a value asks all maps in the stack for the value, starting with the top-most one. A found value is \"cached\" in the top-most map of the stack. Deleting is implemented as set to the default value in the top-most map. Set is implemented as Map with value is a boolean. This makes all operation very performant:\r\n* creating child scope: O(1)\r\n* reading a value the first time: O(n) with n is the number of parent scopes\r\n* reading a value the second time: O(1)\r\n* writing a value: O(1)",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5322/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5322/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "330f32844d564f8b599407d52efe72d9d4242bfe",
        "filename": "lib/Parser.js",
        "status": "modified",
        "additions": 96,
        "deletions": 61,
        "changes": 157,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/lib%2FParser.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/lib%2FParser.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FParser.js?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -10,6 +10,7 @@ const acorn = require(\"acorn-dynamic-import\").default;\n const Tapable = require(\"tapable\");\n const json5 = require(\"json5\");\n const BasicEvaluatedExpression = require(\"./BasicEvaluatedExpression\");\n+const StackedSetMap = require(\"./util/StackedSetMap\");\n \n function joinRanges(startRange, endRange) {\n \tif(!endRange) return startRange;\n@@ -37,6 +38,36 @@ const POSSIBLE_AST_OPTIONS = [{\n \t}\n }];\n \n+class TrackingSet {\n+\tconstructor(set) {\n+\t\tthis.set = set;\n+\t\tthis.set2 = new Set();\n+\t\tthis.stack = set.stack;\n+\t}\n+\n+\tadd(item) {\n+\t\tthis.set2.add(item);\n+\t\treturn this.set.add(item);\n+\t}\n+\n+\tdelete(item) {\n+\t\tthis.set2.delete(item);\n+\t\treturn this.set.delete(item);\n+\t}\n+\n+\thas(item) {\n+\t\treturn this.set.has(item);\n+\t}\n+\n+\tcreateChild() {\n+\t\treturn this.set.createChild();\n+\t}\n+\n+\tgetAddedItems() {\n+\t\treturn this.set2;\n+\t}\n+}\n+\n class Parser extends Tapable {\n \tconstructor(options) {\n \t\tsuper();\n@@ -207,8 +238,8 @@ class Parser extends Tapable {\n \t\t\t\tlet res;\n \t\t\t\tlet name;\n \t\t\t\tif(expr.argument.type === \"Identifier\") {\n-\t\t\t\t\tname = this.scope.renames[\"$\" + expr.argument.name] || expr.argument.name;\n-\t\t\t\t\tif(this.scope.definitions.indexOf(name) === -1) {\n+\t\t\t\t\tname = this.scope.renames.get(expr.argument.name) || expr.argument.name;\n+\t\t\t\t\tif(!this.scope.definitions.has(name)) {\n \t\t\t\t\t\tres = this.applyPluginsBailResult1(\"evaluate typeof \" + name, expr);\n \t\t\t\t\t\tif(res !== undefined) return res;\n \t\t\t\t\t}\n@@ -248,8 +279,8 @@ class Parser extends Tapable {\n \t\t\treturn new BasicEvaluatedExpression().setString(\"undefined\").setRange(expr.range);\n \t\t});\n \t\tthis.plugin(\"evaluate Identifier\", function(expr) {\n-\t\t\tconst name = this.scope.renames[\"$\" + expr.name] || expr.name;\n-\t\t\tif(this.scope.definitions.indexOf(expr.name) === -1) {\n+\t\t\tconst name = this.scope.renames.get(expr.name) || expr.name;\n+\t\t\tif(!this.scope.definitions.has(expr.name)) {\n \t\t\t\tconst result = this.applyPluginsBailResult1(\"evaluate Identifier \" + name, expr);\n \t\t\t\tif(result) return result;\n \t\t\t\treturn new BasicEvaluatedExpression().setIdentifier(name).setRange(expr.range);\n@@ -258,7 +289,7 @@ class Parser extends Tapable {\n \t\t\t}\n \t\t});\n \t\tthis.plugin(\"evaluate ThisExpression\", function(expr) {\n-\t\t\tconst name = this.scope.renames.$this;\n+\t\t\tconst name = this.scope.renames.get(\"this\");\n \t\t\tif(name) {\n \t\t\t\tconst result = this.applyPluginsBailResult1(\"evaluate Identifier \" + name, expr);\n \t\t\t\tif(result) return result;\n@@ -283,7 +314,7 @@ class Parser extends Tapable {\n \t\t\tconst param = this.evaluateExpression(expr.callee.object);\n \t\t\tif(!param) return;\n \t\t\tconst property = expr.callee.property.name || expr.callee.property.value;\n-\t\t\treturn this.applyPluginsBailResult(\"evaluate CallExpression .\" + property, expr, param);\n+\t\t\treturn this.applyPluginsBailResult2(\"evaluate CallExpression .\" + property, expr, param);\n \t\t});\n \t\tthis.plugin(\"evaluate CallExpression .replace\", function(expr, param) {\n \t\t\tif(!param.isString()) return;\n@@ -625,8 +656,8 @@ class Parser extends Tapable {\n \t// Declarations\n \tprewalkFunctionDeclaration(statement) {\n \t\tif(statement.id) {\n-\t\t\tthis.scope.renames[\"$\" + statement.id.name] = undefined;\n-\t\t\tthis.scope.definitions.push(statement.id.name);\n+\t\t\tthis.scope.renames.set(statement.id.name, null);\n+\t\t\tthis.scope.definitions.add(statement.id.name);\n \t\t}\n \t}\n \n@@ -646,20 +677,20 @@ class Parser extends Tapable {\n \n \tprewalkImportDeclaration(statement) {\n \t\tconst source = statement.source.value;\n-\t\tthis.applyPluginsBailResult(\"import\", statement, source);\n+\t\tthis.applyPluginsBailResult2(\"import\", statement, source);\n \t\tstatement.specifiers.forEach(function(specifier) {\n \t\t\tconst name = specifier.local.name;\n-\t\t\tthis.scope.renames[\"$\" + name] = undefined;\n-\t\t\tthis.scope.definitions.push(name);\n+\t\t\tthis.scope.renames.set(name, null);\n+\t\t\tthis.scope.definitions.add(name);\n \t\t\tswitch(specifier.type) {\n \t\t\t\tcase \"ImportDefaultSpecifier\":\n-\t\t\t\t\tthis.applyPluginsBailResult(\"import specifier\", statement, source, \"default\", name);\n+\t\t\t\t\tthis.applyPluginsBailResult4(\"import specifier\", statement, source, \"default\", name);\n \t\t\t\t\tbreak;\n \t\t\t\tcase \"ImportSpecifier\":\n-\t\t\t\t\tthis.applyPluginsBailResult(\"import specifier\", statement, source, specifier.imported.name, name);\n+\t\t\t\t\tthis.applyPluginsBailResult4(\"import specifier\", statement, source, specifier.imported.name, name);\n \t\t\t\t\tbreak;\n \t\t\t\tcase \"ImportNamespaceSpecifier\":\n-\t\t\t\t\tthis.applyPluginsBailResult(\"import specifier\", statement, source, null, name);\n+\t\t\t\t\tthis.applyPluginsBailResult4(\"import specifier\", statement, source, null, name);\n \t\t\t\t\tbreak;\n \t\t\t}\n \t\t}, this);\n@@ -669,21 +700,24 @@ class Parser extends Tapable {\n \t\tlet source;\n \t\tif(statement.source) {\n \t\t\tsource = statement.source.value;\n-\t\t\tthis.applyPluginsBailResult(\"export import\", statement, source);\n+\t\t\tthis.applyPluginsBailResult2(\"export import\", statement, source);\n \t\t} else {\n \t\t\tthis.applyPluginsBailResult1(\"export\", statement);\n \t\t}\n \t\tif(statement.declaration) {\n \t\t\tif(/Expression$/.test(statement.declaration.type)) {\n \t\t\t\tthrow new Error(\"Doesn't occur?\");\n \t\t\t} else {\n-\t\t\t\tif(!this.applyPluginsBailResult(\"export declaration\", statement, statement.declaration)) {\n-\t\t\t\t\tconst pos = this.scope.definitions.length;\n+\t\t\t\tif(!this.applyPluginsBailResult2(\"export declaration\", statement, statement.declaration)) {\n+\t\t\t\t\tconst originalDefinitions = this.scope.definitions;\n+\t\t\t\t\tconst tracker = new TrackingSet(this.scope.definitions);\n+\t\t\t\t\tthis.scope.definitions = tracker;\n \t\t\t\t\tthis.prewalkStatement(statement.declaration);\n-\t\t\t\t\tconst newDefs = this.scope.definitions.slice(pos);\n+\t\t\t\t\tconst newDefs = Array.from(tracker.getAddedItems());\n+\t\t\t\t\tthis.scope.definitions = originalDefinitions;\n \t\t\t\t\tfor(let index = newDefs.length - 1; index >= 0; index--) {\n \t\t\t\t\t\tconst def = newDefs[index];\n-\t\t\t\t\t\tthis.applyPluginsBailResult(\"export specifier\", statement, def, def, index);\n+\t\t\t\t\t\tthis.applyPluginsBailResult4(\"export specifier\", statement, def, def, index);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n@@ -696,9 +730,9 @@ class Parser extends Tapable {\n \t\t\t\t\t\t{\n \t\t\t\t\t\t\tconst name = specifier.exported.name;\n \t\t\t\t\t\t\tif(source)\n-\t\t\t\t\t\t\t\tthis.applyPluginsBailResult(\"export import specifier\", statement, source, specifier.local.name, name, specifierIndex);\n+\t\t\t\t\t\t\t\tthis.applyPluginsBailResult5(\"export import specifier\", statement, source, specifier.local.name, name, specifierIndex);\n \t\t\t\t\t\t\telse\n-\t\t\t\t\t\t\t\tthis.applyPluginsBailResult(\"export specifier\", statement, specifier.local.name, name, specifierIndex);\n+\t\t\t\t\t\t\t\tthis.applyPluginsBailResult4(\"export specifier\", statement, specifier.local.name, name, specifierIndex);\n \t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t}\n \t\t\t\t}\n@@ -714,34 +748,37 @@ class Parser extends Tapable {\n \n \tprewalkExportDefaultDeclaration(statement) {\n \t\tif(/Declaration$/.test(statement.declaration.type)) {\n-\t\t\tconst pos = this.scope.definitions.length;\n+\t\t\tconst originalDefinitions = this.scope.definitions;\n+\t\t\tconst tracker = new TrackingSet(this.scope.definitions);\n+\t\t\tthis.scope.definitions = tracker;\n \t\t\tthis.prewalkStatement(statement.declaration);\n-\t\t\tconst newDefs = this.scope.definitions.slice(pos);\n+\t\t\tconst newDefs = Array.from(tracker.getAddedItems());\n+\t\t\tthis.scope.definitions = originalDefinitions;\n \t\t\tfor(let index = 0, len = newDefs.length; index < len; index++) {\n \t\t\t\tconst def = newDefs[index];\n-\t\t\t\tthis.applyPluginsBailResult(\"export specifier\", statement, def, \"default\");\n+\t\t\t\tthis.applyPluginsBailResult3(\"export specifier\", statement, def, \"default\");\n \t\t\t}\n \t\t}\n \t}\n \n \twalkExportDefaultDeclaration(statement) {\n \t\tthis.applyPluginsBailResult1(\"export\", statement);\n \t\tif(/Declaration$/.test(statement.declaration.type)) {\n-\t\t\tif(!this.applyPluginsBailResult(\"export declaration\", statement, statement.declaration)) {\n+\t\t\tif(!this.applyPluginsBailResult2(\"export declaration\", statement, statement.declaration)) {\n \t\t\t\tthis.walkStatement(statement.declaration);\n \t\t\t}\n \t\t} else {\n \t\t\tthis.walkExpression(statement.declaration);\n-\t\t\tif(!this.applyPluginsBailResult(\"export expression\", statement, statement.declaration)) {\n-\t\t\t\tthis.applyPluginsBailResult(\"export specifier\", statement, statement.declaration, \"default\");\n+\t\t\tif(!this.applyPluginsBailResult2(\"export expression\", statement, statement.declaration)) {\n+\t\t\t\tthis.applyPluginsBailResult3(\"export specifier\", statement, statement.declaration, \"default\");\n \t\t\t}\n \t\t}\n \t}\n \n \tprewalkExportAllDeclaration(statement) {\n \t\tconst source = statement.source.value;\n-\t\tthis.applyPluginsBailResult(\"export import\", statement, source);\n-\t\tthis.applyPluginsBailResult(\"export import specifier\", statement, source, null, null, 0);\n+\t\tthis.applyPluginsBailResult2(\"export import\", statement, source);\n+\t\tthis.applyPluginsBailResult5(\"export import specifier\", statement, source, null, null, 0);\n \t}\n \n \tprewalkVariableDeclaration(statement) {\n@@ -756,8 +793,8 @@ class Parser extends Tapable {\n \n \tprewalkClassDeclaration(statement) {\n \t\tif(statement.id) {\n-\t\t\tthis.scope.renames[\"$\" + statement.id.name] = undefined;\n-\t\t\tthis.scope.definitions.push(statement.id.name);\n+\t\t\tthis.scope.renames.set(statement.id.name, null);\n+\t\t\tthis.scope.definitions.add(statement.id.name);\n \t\t}\n \t}\n \n@@ -798,9 +835,8 @@ class Parser extends Tapable {\n \t\t\t\t\t\tthis.enterPattern(declarator.id, (name, decl) => {\n \t\t\t\t\t\t\tif(!this.applyPluginsBailResult1(\"var-\" + declarator.kind + \" \" + name, decl)) {\n \t\t\t\t\t\t\t\tif(!this.applyPluginsBailResult1(\"var \" + name, decl)) {\n-\t\t\t\t\t\t\t\t\tthis.scope.renames[\"$\" + name] = undefined;\n-\t\t\t\t\t\t\t\t\tif(this.scope.definitions.indexOf(name) < 0)\n-\t\t\t\t\t\t\t\t\t\tthis.scope.definitions.push(name);\n+\t\t\t\t\t\t\t\t\tthis.scope.renames.set(name, null);\n+\t\t\t\t\t\t\t\t\tthis.scope.definitions.add(name);\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t});\n@@ -819,9 +855,8 @@ class Parser extends Tapable {\n \t\t\t\t\t\tif(renameIdentifier && declarator.id.type === \"Identifier\" && this.applyPluginsBailResult1(\"can-rename \" + renameIdentifier, declarator.init)) {\n \t\t\t\t\t\t\t// renaming with \"var a = b;\"\n \t\t\t\t\t\t\tif(!this.applyPluginsBailResult1(\"rename \" + renameIdentifier, declarator.init)) {\n-\t\t\t\t\t\t\t\tthis.scope.renames[\"$\" + declarator.id.name] = this.scope.renames[\"$\" + renameIdentifier] || renameIdentifier;\n-\t\t\t\t\t\t\t\tconst idx = this.scope.definitions.indexOf(declarator.id.name);\n-\t\t\t\t\t\t\t\tif(idx >= 0) this.scope.definitions.splice(idx, 1);\n+\t\t\t\t\t\t\t\tthis.scope.renames.set(declarator.id.name, this.scope.renames.get(renameIdentifier) || renameIdentifier);\n+\t\t\t\t\t\t\t\tthis.scope.definitions.delete(declarator.id.name);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tthis.walkPattern(declarator.id);\n@@ -979,23 +1014,22 @@ class Parser extends Tapable {\n \t\tif(expression.left.type === \"Identifier\" && renameIdentifier && this.applyPluginsBailResult1(\"can-rename \" + renameIdentifier, expression.right)) {\n \t\t\t// renaming \"a = b;\"\n \t\t\tif(!this.applyPluginsBailResult1(\"rename \" + renameIdentifier, expression.right)) {\n-\t\t\t\tthis.scope.renames[\"$\" + expression.left.name] = renameIdentifier;\n-\t\t\t\tconst idx = this.scope.definitions.indexOf(expression.left.name);\n-\t\t\t\tif(idx >= 0) this.scope.definitions.splice(idx, 1);\n+\t\t\t\tthis.scope.renames.set(expression.left.name, renameIdentifier);\n+\t\t\t\tthis.scope.definitions.delete(expression.left.name);\n \t\t\t}\n \t\t} else if(expression.left.type === \"Identifier\") {\n \t\t\tif(!this.applyPluginsBailResult1(\"assigned \" + expression.left.name, expression)) {\n \t\t\t\tthis.walkExpression(expression.right);\n \t\t\t}\n-\t\t\tthis.scope.renames[\"$\" + expression.left.name] = undefined;\n+\t\t\tthis.scope.renames.set(expression.left.name, null);\n \t\t\tif(!this.applyPluginsBailResult1(\"assign \" + expression.left.name, expression)) {\n \t\t\t\tthis.walkExpression(expression.left);\n \t\t\t}\n \t\t} else {\n \t\t\tthis.walkExpression(expression.right);\n \t\t\tthis.walkPattern(expression.left);\n \t\t\tthis.enterPattern(expression.left, (name, decl) => {\n-\t\t\t\tthis.scope.renames[\"$\" + name] = undefined;\n+\t\t\t\tthis.scope.renames.set(name, null);\n \t\t\t});\n \t\t}\n \t}\n@@ -1061,13 +1095,13 @@ class Parser extends Tapable {\n \t\t\t\treturn !args[idx];\n \t\t\t}), () => {\n \t\t\t\tif(renameThis) {\n-\t\t\t\t\tthis.scope.renames.$this = renameThis;\n+\t\t\t\t\tthis.scope.renames.set(\"this\", renameThis);\n \t\t\t\t}\n \t\t\t\tfor(let i = 0; i < args.length; i++) {\n \t\t\t\t\tconst param = args[i];\n \t\t\t\t\tif(!param) continue;\n \t\t\t\t\tif(!params[i] || params[i].type !== \"Identifier\") continue;\n-\t\t\t\t\tthis.scope.renames[\"$\" + params[i].name] = param;\n+\t\t\t\t\tthis.scope.renames.set(params[i].name, param);\n \t\t\t\t}\n \t\t\t\tif(functionExpression.body.type === \"BlockStatement\") {\n \t\t\t\t\tthis.prewalkStatement(functionExpression.body);\n@@ -1079,7 +1113,7 @@ class Parser extends Tapable {\n \t\tif(expression.callee.type === \"MemberExpression\" &&\n \t\t\texpression.callee.object.type === \"FunctionExpression\" &&\n \t\t\t!expression.callee.computed &&\n-\t\t\t([\"call\", \"bind\"]).indexOf(expression.callee.property.name) >= 0 &&\n+\t\t\t(expression.callee.property.name === \"call\" || expression.callee.property.name === \"bind\") &&\n \t\t\texpression.arguments &&\n \t\t\texpression.arguments.length > 0\n \t\t) {\n@@ -1133,8 +1167,8 @@ class Parser extends Tapable {\n \t}\n \n \twalkIdentifier(expression) {\n-\t\tif(this.scope.definitions.indexOf(expression.name) === -1) {\n-\t\t\tconst result = this.applyPluginsBailResult1(\"expression \" + (this.scope.renames[\"$\" + expression.name] || expression.name), expression);\n+\t\tif(!this.scope.definitions.has(expression.name)) {\n+\t\t\tconst result = this.applyPluginsBailResult1(\"expression \" + (this.scope.renames.get(expression.name) || expression.name), expression);\n \t\t\tif(result === true)\n \t\t\t\treturn;\n \t\t}\n@@ -1145,23 +1179,23 @@ class Parser extends Tapable {\n \t\tthis.scope = {\n \t\t\tinTry: false,\n \t\t\tinShorthand: false,\n-\t\t\tdefinitions: oldScope.definitions.slice(),\n-\t\t\trenames: Object.create(oldScope.renames)\n+\t\t\tdefinitions: oldScope.definitions.createChild(),\n+\t\t\trenames: oldScope.renames.createChild()\n \t\t};\n \n-\t\tthis.scope.renames.$this = undefined;\n+\t\tthis.scope.renames.set(\"this\", null);\n \n \t\tfor(let paramIndex = 0, len = params.length; paramIndex < len; paramIndex++) {\n \t\t\tconst param = params[paramIndex];\n \n \t\t\tif(typeof param !== \"string\") {\n \t\t\t\tthis.enterPattern(param, param => {\n-\t\t\t\t\tthis.scope.renames[\"$\" + param] = undefined;\n-\t\t\t\t\tthis.scope.definitions.push(param);\n+\t\t\t\t\tthis.scope.renames.set(param, null);\n+\t\t\t\t\tthis.scope.definitions.add(param);\n \t\t\t\t});\n \t\t\t} else {\n-\t\t\t\tthis.scope.renames[\"$\" + param] = undefined;\n-\t\t\t\tthis.scope.definitions.push(param);\n+\t\t\t\tthis.scope.renames.set(param, null);\n+\t\t\t\tthis.scope.definitions.add(param);\n \t\t\t}\n \t\t}\n \n@@ -1343,12 +1377,12 @@ class Parser extends Tapable {\n \t\tconst oldComments = this.comments;\n \t\tthis.scope = {\n \t\t\tinTry: false,\n-\t\t\tdefinitions: [],\n-\t\t\trenames: {}\n+\t\t\tdefinitions: new StackedSetMap(),\n+\t\t\trenames: new StackedSetMap()\n \t\t};\n \t\tconst state = this.state = initialState || {};\n \t\tthis.comments = comments;\n-\t\tif(this.applyPluginsBailResult(\"program\", ast, comments) === undefined) {\n+\t\tif(this.applyPluginsBailResult2(\"program\", ast, comments) === undefined) {\n \t\t\tthis.prewalkStatements(ast.body);\n \t\t\tthis.walkStatements(ast.body);\n \t\t}\n@@ -1401,11 +1435,11 @@ class Parser extends Tapable {\n \t\t}\n \t\tlet free;\n \t\tif(expr.type === \"Identifier\") {\n-\t\t\tfree = this.scope.definitions.indexOf(expr.name) === -1;\n-\t\t\texprName.push(this.scope.renames[\"$\" + expr.name] || expr.name);\n-\t\t} else if(expr.type === \"ThisExpression\" && this.scope.renames.$this) {\n+\t\t\tfree = !this.scope.definitions.has(expr.name);\n+\t\t\texprName.push(this.scope.renames.get(expr.name) || expr.name);\n+\t\t} else if(expr.type === \"ThisExpression\" && this.scope.renames.get(\"this\")) {\n \t\t\tfree = true;\n-\t\t\texprName.push(this.scope.renames.$this);\n+\t\t\texprName.push(this.scope.renames.get(\"this\"));\n \t\t} else if(expr.type === \"ThisExpression\") {\n \t\t\tfree = false;\n \t\t\texprName.push(\"this\");\n@@ -1429,3 +1463,4 @@ class Parser extends Tapable {\n Parser.ECMA_VERSION = ECMA_VERSION;\n \n module.exports = Parser;\n+Parser.StackedSetMap = StackedSetMap;"
      },
      {
        "sha": "e211771fa7ae31e9d09647dbf9ab3d7ecc9e9ce4",
        "filename": "lib/dependencies/AMDDefineDependencyParserPlugin.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDDefineDependencyParserPlugin.js?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -105,7 +105,7 @@ class AMDDefineDependencyParserPlugin {\n \t\t\t\t\tif(fnParamsOffset < 0) fnParamsOffset = 0;\n \t\t\t\t}\n \t\t\t}\n-\t\t\tlet fnRenames = Object.create(parser.scope.renames);\n+\t\t\tlet fnRenames = parser.scope.renames.createChild();\n \t\t\tlet identifiers;\n \t\t\tif(array) {\n \t\t\t\tidentifiers = {};\n@@ -114,7 +114,7 @@ class AMDDefineDependencyParserPlugin {\n \t\t\t\tif(!result) return;\n \t\t\t\tif(fnParams) fnParams = fnParams.slice(fnParamsOffset).filter((param, idx) => {\n \t\t\t\t\tif(identifiers[idx]) {\n-\t\t\t\t\t\tfnRenames[\"$\" + param.name] = identifiers[idx];\n+\t\t\t\t\t\tfnRenames.set(param.name, identifiers[idx]);\n \t\t\t\t\t\treturn false;\n \t\t\t\t\t}\n \t\t\t\t\treturn true;\n@@ -123,7 +123,7 @@ class AMDDefineDependencyParserPlugin {\n \t\t\t\tidentifiers = [\"require\", \"exports\", \"module\"];\n \t\t\t\tif(fnParams) fnParams = fnParams.slice(fnParamsOffset).filter((param, idx) => {\n \t\t\t\t\tif(identifiers[idx]) {\n-\t\t\t\t\t\tfnRenames[\"$\" + param.name] = identifiers[idx];\n+\t\t\t\t\t\tfnRenames.set(param.name, identifiers[idx]);\n \t\t\t\t\t\treturn false;\n \t\t\t\t\t}\n \t\t\t\t\treturn true;"
      },
      {
        "sha": "9bef044a7142b373ace1be2ea3f834865aa7e79b",
        "filename": "lib/dependencies/CommonJsPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FCommonJsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FCommonJsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FCommonJsPlugin.js?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -65,7 +65,7 @@ class CommonJsPlugin {\n \t\t\t\t\tconst dep = new ConstDependency(\"var require;\", 0);\n \t\t\t\t\tdep.loc = expr.loc;\n \t\t\t\t\tparser.state.current.addDependency(dep);\n-\t\t\t\t\tparser.scope.definitions.push(\"require\");\n+\t\t\t\t\tparser.scope.definitions.add(\"require\");\n \t\t\t\t\treturn true;\n \t\t\t\t});\n \t\t\t\tparser.plugin(\"can-rename require\", () => true);"
      },
      {
        "sha": "4f937d354278fd3d0865e3455e7f46c264a461ca",
        "filename": "lib/dependencies/HarmonyExportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -37,7 +37,7 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t});\n \t\tparser.plugin(\"export declaration\", statement => {});\n \t\tparser.plugin(\"export specifier\", (statement, id, name, idx) => {\n-\t\t\tconst rename = parser.scope.renames[`$${id}`];\n+\t\t\tconst rename = parser.scope.renames.get(id);\n \t\t\tlet dep;\n \t\t\tif(rename === \"imported var\") {\n \t\t\t\tconst settings = parser.state.harmonySpecifier[`$${id}`];"
      },
      {
        "sha": "16efa2a35e49afa465031ca3e0705c56e7ec3494",
        "filename": "lib/dependencies/HarmonyImportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyImportDependencyParserPlugin.js?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -25,8 +25,8 @@ module.exports = class HarmonyImportDependencyParserPlugin {\n \t\t\treturn true;\n \t\t});\n \t\tparser.plugin(\"import specifier\", (statement, source, id, name) => {\n-\t\t\tparser.scope.definitions.length--;\n-\t\t\tparser.scope.renames[`$${name}`] = \"imported var\";\n+\t\t\tparser.scope.definitions.delete(name);\n+\t\t\tparser.scope.renames.set(name, \"imported var\");\n \t\t\tif(!parser.state.harmonySpecifier) parser.state.harmonySpecifier = {};\n \t\t\tparser.state.harmonySpecifier[`$${name}`] = [parser.state.lastHarmonyImport, HarmonyModulesHelpers.getModuleVar(parser.state, source), id];\n \t\t\treturn true;"
      },
      {
        "sha": "45f53a6413a6bc0392ba39d5a4321eb9a8c3c45d",
        "filename": "lib/util/StackedSetMap.js",
        "status": "added",
        "additions": 108,
        "deletions": 0,
        "changes": 108,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/lib%2Futil%2FStackedSetMap.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/lib%2Futil%2FStackedSetMap.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FStackedSetMap.js?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -0,0 +1,108 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\"use strict\";\n+\n+const util = require(\"util\");\n+\n+const TOMBSTONE = {};\n+const UNDEFINED_MARKER = {};\n+\n+class StackedSetMap {\n+\tconstructor(parentStack) {\n+\t\tthis.stack = parentStack === undefined ? [] : parentStack.slice();\n+\t\tthis.map = new Map();\n+\t\tthis.stack.push(this.map);\n+\t}\n+\n+\tadd(item) {\n+\t\tthis.map.set(item, true);\n+\t}\n+\n+\tset(item, value) {\n+\t\tthis.map.set(item, value === undefined ? UNDEFINED_MARKER : value);\n+\t}\n+\n+\tdelete(item) {\n+\t\tif(this.stack.length > 1)\n+\t\t\tthis.map.set(item, TOMBSTONE);\n+\t\telse\n+\t\t\tthis.map.delete(item);\n+\t}\n+\n+\thas(item) {\n+\t\tconst topValue = this.map.get(item);\n+\t\tif(topValue !== undefined)\n+\t\t\treturn topValue !== TOMBSTONE;\n+\t\tif(this.stack.length > 1) {\n+\t\t\tfor(var i = this.stack.length - 2; i >= 0; i--) {\n+\t\t\t\tconst value = this.stack[i].get(item);\n+\t\t\t\tif(value !== undefined) {\n+\t\t\t\t\tthis.map.set(item, value);\n+\t\t\t\t\treturn value !== TOMBSTONE;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tthis.map.set(item, TOMBSTONE);\n+\t\t}\n+\t\treturn false;\n+\t}\n+\n+\tget(item) {\n+\t\tconst topValue = this.map.get(item);\n+\t\tif(topValue !== undefined)\n+\t\t\treturn topValue === TOMBSTONE || topValue === UNDEFINED_MARKER ? undefined : topValue;\n+\t\tif(this.stack.length > 1) {\n+\t\t\tfor(var i = this.stack.length - 2; i >= 0; i--) {\n+\t\t\t\tconst value = this.stack[i].get(item);\n+\t\t\t\tif(value !== undefined) {\n+\t\t\t\t\tthis.map.set(item, value);\n+\t\t\t\t\treturn value === TOMBSTONE || value === UNDEFINED_MARKER ? undefined : value;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tthis.map.set(item, TOMBSTONE);\n+\t\t}\n+\t\treturn undefined;\n+\t}\n+\n+\t_compress() {\n+\t\tthis.map = new Map();\n+\t\tfor(const data of this.stack) {\n+\t\t\tfor(const pair of data) {\n+\t\t\t\tif(pair[1] === TOMBSTONE)\n+\t\t\t\t\tthis.map.delete(pair[0]);\n+\t\t\t\telse\n+\t\t\t\t\tthis.map.set(pair[0], pair[1]);\n+\t\t\t}\n+\t\t}\n+\t\tthis.stack = [this.map];\n+\t}\n+\n+\tasSet() {\n+\t\tthis._compress();\n+\t\treturn new Set(Array.from(this.map.entries()).map(pair => pair[0]));\n+\t}\n+\n+\tasMap() {\n+\t\tthis._compress();\n+\t\treturn new Map(this.map.entries());\n+\t}\n+\n+\tcreateChild() {\n+\t\treturn new StackedSetMap(this.stack);\n+\t}\n+\n+\tget length() {\n+\t\tthrow new Error(\"This is no longer an Array\");\n+\t}\n+\n+\tset length(value) {\n+\t\tthrow new Error(\"This is no longer an Array\");\n+\t}\n+}\n+\n+StackedSetMap.prototype.push = util.deprecate(function(item) {\n+\tthis.add(item);\n+}, \"This is no longer an Array: Use add instead.\");\n+\n+module.exports = StackedSetMap;"
      },
      {
        "sha": "e0cf86a3a5b33ab2b5c1c104c9af30600f50e495",
        "filename": "test/Parser.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/test%2FParser.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/test%2FParser.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FParser.test.js?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -219,7 +219,7 @@ describe(\"Parser\", () => {\n \t\t\t});\n \t\t\ttestParser.plugin(\"expression fgh\", (expr) => {\n \t\t\t\tif(!testParser.state.fgh) testParser.state.fgh = [];\n-\t\t\t\ttestParser.state.fgh.push(testParser.scope.definitions.join(\" \"));\n+\t\t\t\ttestParser.state.fgh.push(Array.from(testParser.scope.definitions.asSet()).join(\" \"));\n \t\t\t\treturn true;\n \t\t\t});\n \t\t\ttestParser.plugin(\"expression fgh.sub\", (expr) => {"
      },
      {
        "sha": "b3c7b8ab8f3831f91ee1074c1e375e7cce279b9b",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 8,
        "deletions": 29,
        "changes": 37,
        "blob_url": "https://github.com/webpack/webpack/blob/66385458a65d1040bec1776958d30c1152dbe159/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/66385458a65d1040bec1776958d30c1152dbe159/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=66385458a65d1040bec1776958d30c1152dbe159",
        "patch": "@@ -2,11 +2,7 @@\n # yarn lockfile v1\n \n \n-abbrev@1:\n-  version \"1.1.0\"\n-  resolved \"https://registry.yarnpkg.com/abbrev/-/abbrev-1.1.0.tgz#d0554c2256636e2f56e7c2e5ad183f859428d81f\"\n-\n-abbrev@1.0.x:\n+abbrev@1, abbrev@1.0.x:\n   version \"1.0.9\"\n   resolved \"https://registry.yarnpkg.com/abbrev/-/abbrev-1.0.9.tgz#91b4792588a7738c25f35dd6f63752a2f8776135\"\n \n@@ -1072,18 +1068,14 @@ destroy@~1.0.4:\n   version \"1.0.4\"\n   resolved \"https://registry.yarnpkg.com/destroy/-/destroy-1.0.4.tgz#978857442c44749e4206613e37946205826abd80\"\n \n-diff@3.2.0:\n+diff@3.2.0, diff@^3.1.0:\n   version \"3.2.0\"\n   resolved \"https://registry.yarnpkg.com/diff/-/diff-3.2.0.tgz#c9ce393a4b7cbd0b058a725c93df299027868ff9\"\n \n diff@^2.2.1:\n   version \"2.2.3\"\n   resolved \"https://registry.yarnpkg.com/diff/-/diff-2.2.3.tgz#60eafd0d28ee906e4e8ff0a52c1229521033bf99\"\n \n-diff@^3.1.0:\n-  version \"3.3.0\"\n-  resolved \"https://registry.yarnpkg.com/diff/-/diff-3.3.0.tgz#056695150d7aa93237ca7e378ac3b1682b7963b9\"\n-\n diffie-hellman@^5.0.0:\n   version \"5.0.2\"\n   resolved \"https://registry.yarnpkg.com/diffie-hellman/-/diffie-hellman-5.0.2.tgz#b5835739270cfe26acf632099fded2a07f209e5e\"\n@@ -2192,7 +2184,6 @@ jade@^1.11.0:\n     jstransformer \"0.0.2\"\n     mkdirp \"~0.5.0\"\n     transformers \"2.1.0\"\n-    uglify-js \"^2.4.19\"\n     void-elements \"~2.0.1\"\n     with \"~4.0.0\"\n \n@@ -2600,18 +2591,14 @@ minimalistic-crypto-utils@^1.0.0, minimalistic-crypto-utils@^1.0.1:\n   dependencies:\n     brace-expansion \"^1.1.7\"\n \n-minimist@0.0.8:\n+minimist@0.0.8, minimist@~0.0.1:\n   version \"0.0.8\"\n   resolved \"https://registry.yarnpkg.com/minimist/-/minimist-0.0.8.tgz#857fcabfc3397d2625b8228262e86aa7a011b05d\"\n \n minimist@1.2.0, minimist@^1.2.0:\n   version \"1.2.0\"\n   resolved \"https://registry.yarnpkg.com/minimist/-/minimist-1.2.0.tgz#a35008b20f41383eec1fb914f4cd5df79a264284\"\n \n-minimist@~0.0.1:\n-  version \"0.0.10\"\n-  resolved \"https://registry.yarnpkg.com/minimist/-/minimist-0.0.10.tgz#de3f98543dbf96082be48ad1a0c7cda836301dcf\"\n-\n mkdirp@0.5.1, mkdirp@0.5.x, \"mkdirp@>=0.5 0\", mkdirp@^0.5.0, mkdirp@^0.5.1, mkdirp@~0.5.0, mkdirp@~0.5.1:\n   version \"0.5.1\"\n   resolved \"https://registry.yarnpkg.com/mkdirp/-/mkdirp-0.5.1.tgz#30057438eac6cf7f8c4767f38648d6697d75c903\"\n@@ -3402,11 +3389,7 @@ randombytes@^2.0.0, randombytes@^2.0.1:\n   dependencies:\n     safe-buffer \"^5.1.0\"\n \n-range-parser@^1.0.3:\n-  version \"1.2.0\"\n-  resolved \"https://registry.yarnpkg.com/range-parser/-/range-parser-1.2.0.tgz#f49be6b487894ddc40dcc94a322f611092e00d5e\"\n-\n-range-parser@~1.0.3:\n+range-parser@^1.0.3, range-parser@~1.0.3:\n   version \"1.0.3\"\n   resolved \"https://registry.yarnpkg.com/range-parser/-/range-parser-1.0.3.tgz#6872823535c692e2c2a0103826afd82c2e0ff175\"\n \n@@ -3572,7 +3555,7 @@ request@2.42.0:\n     stringstream \"~0.0.4\"\n     tough-cookie \">=0.12.0\"\n \n-request@2.79.0:\n+request@2.79.0, request@^2.34, request@^2.72.0:\n   version \"2.79.0\"\n   resolved \"https://registry.yarnpkg.com/request/-/request-2.79.0.tgz#4dfe5bf6be8b8cdc37fcf93e04b65577722710de\"\n   dependencies:\n@@ -3597,7 +3580,7 @@ request@2.79.0:\n     tunnel-agent \"~0.4.1\"\n     uuid \"^3.0.0\"\n \n-request@^2.34, request@^2.72.0, request@^2.81.0:\n+request@^2.81.0:\n   version \"2.81.0\"\n   resolved \"https://registry.yarnpkg.com/request/-/request-2.81.0.tgz#c6928946a0e06c5f8d6f8a9333469ffda46298a0\"\n   dependencies:\n@@ -3958,11 +3941,7 @@ sshpk@^1.7.0:\n     jsbn \"~0.1.0\"\n     tweetnacl \"~0.14.0\"\n \n-statuses@1:\n-  version \"1.3.1\"\n-  resolved \"https://registry.yarnpkg.com/statuses/-/statuses-1.3.1.tgz#faf51b9eb74aaef3b3acf4ad5f61abf24cb7b93e\"\n-\n-statuses@~1.2.1:\n+statuses@1, statuses@~1.2.1:\n   version \"1.2.1\"\n   resolved \"https://registry.yarnpkg.com/statuses/-/statuses-1.2.1.tgz#dded45cc18256d51ed40aec142489d5c61026d28\"\n \n@@ -4240,7 +4219,7 @@ ua-parser-js@^0.7.9:\n   version \"0.7.14\"\n   resolved \"https://registry.yarnpkg.com/ua-parser-js/-/ua-parser-js-0.7.14.tgz#110d53fa4c3f326c121292bbeac904d2e03387ca\"\n \n-uglify-js@^2.4.19, uglify-js@^2.6, uglify-js@^2.8.29:\n+uglify-js@^2.6, uglify-js@^2.8.29:\n   version \"2.8.29\"\n   resolved \"https://registry.yarnpkg.com/uglify-js/-/uglify-js-2.8.29.tgz#29c5733148057bb4e1f75df35b7a9cb72e6a59dd\"\n   dependencies:"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5778",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5778/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5778/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5778/events",
    "html_url": "https://github.com/webpack/webpack/pull/5778",
    "id": 263899723,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ1NDU2NTIz",
    "number": 5778,
    "title": "Refactor precendence rules for harmony exports for better performance",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-10-09T13:42:32Z",
    "updated_at": "2017-10-09T18:28:20Z",
    "closed_at": "2017-10-09T18:28:15Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5778",
      "html_url": "https://github.com/webpack/webpack/pull/5778",
      "diff_url": "https://github.com/webpack/webpack/pull/5778.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5778.patch",
      "merged_at": "2017-10-09T18:28:15Z"
    },
    "body": "\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nrefactoring for performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nfixes #5763\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5778/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5778/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "bd67a4b7db83d9db680b9fe3ef41bcd0aacc37af",
        "filename": "lib/dependencies/HarmonyExportDependencyParserPlugin.js",
        "status": "modified",
        "additions": 14,
        "deletions": 2,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportDependencyParserPlugin.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -39,9 +39,11 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\tparser.plugin(\"export specifier\", (statement, id, name, idx) => {\n \t\t\tconst rename = parser.scope.renames[`$${id}`];\n \t\t\tlet dep;\n+\t\t\tconst harmonyNamedExports = parser.state.harmonyNamedExports = parser.state.harmonyNamedExports || new Set();\n+\t\t\tharmonyNamedExports.add(name);\n \t\t\tif(rename === \"imported var\") {\n \t\t\t\tconst settings = parser.state.harmonySpecifier[`$${id}`];\n-\t\t\t\tdep = new HarmonyExportImportedSpecifierDependency(parser.state.module, settings[0], settings[1], settings[2], name);\n+\t\t\t\tdep = new HarmonyExportImportedSpecifierDependency(parser.state.module, settings[0], settings[1], settings[2], name, harmonyNamedExports, null);\n \t\t\t} else {\n \t\t\t\tconst immutable = statement.declaration && isImmutableStatement(statement.declaration);\n \t\t\t\tconst hoisted = statement.declaration && isHoistedStatement(statement.declaration);\n@@ -53,7 +55,17 @@ module.exports = class HarmonyExportDependencyParserPlugin {\n \t\t\treturn true;\n \t\t});\n \t\tparser.plugin(\"export import specifier\", (statement, source, id, name, idx) => {\n-\t\t\tconst dep = new HarmonyExportImportedSpecifierDependency(parser.state.module, parser.state.lastHarmonyImport, HarmonyModulesHelpers.getModuleVar(parser.state, source), id, name);\n+\t\t\tconst harmonyNamedExports = parser.state.harmonyNamedExports = parser.state.harmonyNamedExports || new Set();\n+\t\t\tlet harmonyStarExports = null;\n+\t\t\tif(name) {\n+\t\t\t\tharmonyNamedExports.add(name);\n+\t\t\t} else {\n+\t\t\t\tharmonyStarExports = parser.state.harmonyStarExports = parser.state.harmonyStarExports || [];\n+\t\t\t}\n+\t\t\tconst dep = new HarmonyExportImportedSpecifierDependency(parser.state.module, parser.state.lastHarmonyImport, HarmonyModulesHelpers.getModuleVar(parser.state, source), id, name, harmonyNamedExports, harmonyStarExports && harmonyStarExports.slice());\n+\t\t\tif(harmonyStarExports) {\n+\t\t\t\tharmonyStarExports.push(dep);\n+\t\t\t}\n \t\t\tdep.loc = Object.create(statement.loc);\n \t\t\tdep.loc.index = idx;\n \t\t\tparser.state.current.addDependency(dep);"
      },
      {
        "sha": "5b52541ed667934b7a2b13c1647a1b9f779b8fe2",
        "filename": "lib/dependencies/HarmonyExportExpressionDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 7,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportExpressionDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportExpressionDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportExpressionDependency.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -22,13 +22,6 @@ class HarmonyExportExpressionDependency extends NullDependency {\n \t\t\texports: [\"default\"]\n \t\t};\n \t}\n-\n-\tdescribeHarmonyExport() {\n-\t\treturn {\n-\t\t\texportedName: \"default\",\n-\t\t\tprecedence: 1,\n-\t\t};\n-\t}\n }\n \n HarmonyExportExpressionDependency.Template = class HarmonyExportDependencyTemplate {"
      },
      {
        "sha": "3bc07c1fd08e3d998a95c6b37740cca4091291fa",
        "filename": "lib/dependencies/HarmonyExportImportedSpecifierDependency.js",
        "status": "modified",
        "additions": 45,
        "deletions": 45,
        "changes": 90,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportImportedSpecifierDependency.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -4,16 +4,17 @@\n */\n \"use strict\";\n const NullDependency = require(\"./NullDependency\");\n-const HarmonyModulesHelpers = require(\"./HarmonyModulesHelpers\");\n \n class HarmonyExportImportedSpecifierDependency extends NullDependency {\n-\tconstructor(originModule, importDependency, importedVar, id, name) {\n+\tconstructor(originModule, importDependency, importedVar, id, name, activeExports, otherStarExports) {\n \t\tsuper();\n \t\tthis.originModule = originModule;\n \t\tthis.importDependency = importDependency;\n \t\tthis.importedVar = importedVar;\n \t\tthis.id = id;\n \t\tthis.name = name;\n+\t\tthis.activeExports = activeExports;\n+\t\tthis.otherStarExports = otherStarExports;\n \t}\n \n \tget type() {\n@@ -23,10 +24,9 @@ class HarmonyExportImportedSpecifierDependency extends NullDependency {\n \tgetReference() {\n \t\tconst name = this.name;\n \t\tconst used = this.originModule.isUsed(name);\n-\t\tconst active = HarmonyModulesHelpers.isActive(this.originModule, this);\n \t\tconst importedModule = this.importDependency.module;\n \n-\t\tif(!importedModule || !used || !active || !this.originModule.usedExports) return null;\n+\t\tif(!importedModule || !used || !this.originModule.usedExports) return null;\n \n \t\tconst hasUsedExports = Array.isArray(this.originModule.usedExports);\n \n@@ -50,21 +50,18 @@ class HarmonyExportImportedSpecifierDependency extends NullDependency {\n \t\t}\n \n \t\tconst hasProvidedExports = Array.isArray(importedModule.providedExports);\n+\t\tconst activeFromOtherStarExports = this._discoverActiveExportsFromOtherStartExports();\n \n \t\t// export *\n \t\tif(hasUsedExports) {\n \t\t\t// reexport * with known used exports\n-\t\t\tconst activeExports = HarmonyModulesHelpers.getActiveExports(this.originModule, this);\n \t\t\tconst importedNames = this.originModule.usedExports.filter(id => {\n-\t\t\t\tconst notInActiveExports = activeExports.indexOf(id) < 0;\n-\t\t\t\tconst notDefault = id !== \"default\";\n-\n-\t\t\t\tif(hasProvidedExports) {\n-\t\t\t\t\tconst inProvidedExports = importedModule.providedExports.indexOf(id) >= 0;\n-\t\t\t\t\treturn notInActiveExports && notDefault && inProvidedExports;\n-\t\t\t\t} else {\n-\t\t\t\t\treturn notInActiveExports && notDefault;\n-\t\t\t\t}\n+\t\t\t\tif(id === \"default\") return false;\n+\t\t\t\tif(this.activeExports.has(id)) return false;\n+\t\t\t\tif(activeFromOtherStarExports.has(id)) return false;\n+\t\t\t\tif(hasProvidedExports && importedModule.providedExports.indexOf(id) < 0) return false;\n+\n+\t\t\t\treturn true;\n \t\t\t});\n \n \t\t\treturn {\n@@ -76,7 +73,13 @@ class HarmonyExportImportedSpecifierDependency extends NullDependency {\n \t\tif(hasProvidedExports) {\n \t\t\treturn {\n \t\t\t\tmodule: importedModule,\n-\t\t\t\timportedNames: importedModule.providedExports.filter(id => id !== \"default\"),\n+\t\t\t\timportedNames: importedModule.providedExports.filter(id => {\n+\t\t\t\t\tif(id === \"default\") return false;\n+\t\t\t\t\tif(this.activeExports.has(id)) return false;\n+\t\t\t\t\tif(activeFromOtherStarExports.has(id)) return false;\n+\n+\t\t\t\t\treturn true;\n+\t\t\t\t})\n \t\t\t};\n \t\t}\n \n@@ -86,6 +89,21 @@ class HarmonyExportImportedSpecifierDependency extends NullDependency {\n \t\t};\n \t}\n \n+\t_discoverActiveExportsFromOtherStartExports() {\n+\t\tif(!this.otherStarExports)\n+\t\t\treturn new Set();\n+\t\tconst result = new Set();\n+\t\t// try to learn impossible exports from other star exports with provided exports\n+\t\tfor(const otherStarExport of this.otherStarExports) {\n+\t\t\tconst otherImportedModule = otherStarExport.importDependency.module;\n+\t\t\tif(Array.isArray(otherImportedModule.providedExports)) {\n+\t\t\t\tfor(const exportName of otherImportedModule.providedExports)\n+\t\t\t\t\tresult.add(exportName);\n+\t\t\t}\n+\t\t}\n+\t\treturn result;\n+\t}\n+\n \tgetExports() {\n \t\tif(this.name) {\n \t\t\treturn {\n@@ -121,22 +139,6 @@ class HarmonyExportImportedSpecifierDependency extends NullDependency {\n \t\t};\n \t}\n \n-\tdescribeHarmonyExport() {\n-\t\tconst importedModule = this.importDependency.module;\n-\t\tif(!this.name && importedModule && Array.isArray(importedModule.providedExports)) {\n-\t\t\t// for a star export and when we know which exports are provided, we can tell so\n-\t\t\treturn {\n-\t\t\t\texportedName: importedModule.providedExports,\n-\t\t\t\tprecedence: 3\n-\t\t\t};\n-\t\t}\n-\n-\t\treturn {\n-\t\t\texportedName: this.name,\n-\t\t\tprecedence: this.name ? 2 : 3\n-\t\t};\n-\t}\n-\n \tupdateHash(hash) {\n \t\tsuper.updateHash(hash);\n \t\tconst hashValue = this.getHashValue(this.importDependency.module);\n@@ -166,7 +168,6 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\tconst name = dep.importedVar;\n \t\tconst used = dep.originModule.isUsed(dep.name);\n \t\tconst importedModule = dep.importDependency.module;\n-\t\tconst active = HarmonyModulesHelpers.isActive(dep.originModule, dep);\n \t\tconst importsExportsUnknown = !importedModule || !Array.isArray(importedModule.providedExports);\n \n \t\tconst getReexportStatement = this.reexportStatementCreator(dep.originModule, importsExportsUnknown, name);\n@@ -176,11 +177,6 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\t\treturn \"/* unused harmony reexport \" + dep.name + \" */\\n\";\n \t\t}\n \n-\t\t// we want to reexport something but another exports overrides this one\n-\t\tif(!active) {\n-\t\t\treturn \"/* inactive harmony reexport \" + (dep.name || \"namespace\") + \" */\\n\";\n-\t\t}\n-\n \t\t// we want to reexport the default export from a non-hamory module\n \t\tconst isNotAHarmonyModule = !(importedModule && (!importedModule.meta || importedModule.meta.harmonyModule));\n \t\tif(dep.name && dep.id === \"default\" && isNotAHarmonyModule) {\n@@ -198,13 +194,17 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\t\treturn \"/* harmony reexport (module object) */ \" + getReexportStatement(JSON.stringify(used), \"\");\n \t\t}\n \n+\t\tconst hasProvidedExports = Array.isArray(importedModule.providedExports);\n+\n+\t\tconst activeFromOtherStarExports = dep._discoverActiveExportsFromOtherStartExports();\n+\n \t\t// we know which exports are used\n \t\tif(Array.isArray(dep.originModule.usedExports)) {\n-\t\t\tconst activeExports = HarmonyModulesHelpers.getActiveExports(dep.originModule, dep);\n-\t\t\tconst items = dep.originModule.usedExports.map(function(id) {\n+\t\t\tconst items = dep.originModule.usedExports.map(id => {\n \t\t\t\tif(id === \"default\") return;\n-\t\t\t\tif(activeExports.indexOf(id) >= 0) return;\n+\t\t\t\tif(dep.activeExports.has(id)) return;\n \t\t\t\tif(importedModule.isProvided(id) === false) return;\n+\t\t\t\tif(activeFromOtherStarExports.has(id)) return;\n \t\t\t\tvar exportUsed = dep.originModule.isUsed(id);\n \t\t\t\tvar idUsed = importedModule && importedModule.isUsed(id);\n \t\t\t\treturn [exportUsed, idUsed];\n@@ -220,11 +220,11 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \t\t}\n \n \t\t// not sure which exports are used, but we know which are provided\n-\t\tif(dep.originModule.usedExports && importedModule && Array.isArray(importedModule.providedExports)) {\n-\t\t\tconst activeExports = HarmonyModulesHelpers.getActiveExports(dep.originModule, dep);\n-\t\t\tconst items = importedModule.providedExports.map(function(id) {\n+\t\tif(dep.originModule.usedExports && importedModule && hasProvidedExports) {\n+\t\t\tconst items = importedModule.providedExports.map(id => {\n \t\t\t\tif(id === \"default\") return;\n-\t\t\t\tif(activeExports.indexOf(id) >= 0) return;\n+\t\t\t\tif(dep.activeExports.has(id)) return;\n+\t\t\t\tif(activeFromOtherStarExports.has(id)) return;\n \t\t\t\tvar exportUsed = dep.originModule.isUsed(id);\n \t\t\t\tvar idUsed = importedModule && importedModule.isUsed(id);\n \t\t\t\treturn [exportUsed, idUsed];\n@@ -241,7 +241,7 @@ HarmonyExportImportedSpecifierDependency.Template = class HarmonyExportImportedS\n \n \t\t// not sure which exports are used and provided\n \t\tif(dep.originModule.usedExports) {\n-\t\t\tconst activeExports = HarmonyModulesHelpers.getActiveExports(dep.originModule, dep);\n+\t\t\tconst activeExports = Array.from(dep.activeExports).concat(Array.from(activeFromOtherStarExports));\n \t\t\tlet content = \"/* harmony namespace reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in \" + name + \") \";\n \n \t\t\t// Filter out exports which are defined by other exports"
      },
      {
        "sha": "c1be10e18ada85050dbd048c1069dd0e7be60159",
        "filename": "lib/dependencies/HarmonyExportSpecifierDependency.js",
        "status": "modified",
        "additions": 0,
        "deletions": 13,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportSpecifierDependency.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyExportSpecifierDependency.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyExportSpecifierDependency.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -4,7 +4,6 @@\n */\n \"use strict\";\n const NullDependency = require(\"./NullDependency\");\n-const HarmonyModulesHelpers = require(\"./HarmonyModulesHelpers\");\n \n class HarmonyExportSpecifierDependency extends NullDependency {\n \tconstructor(originModule, id, name, position, immutable) {\n@@ -25,13 +24,6 @@ class HarmonyExportSpecifierDependency extends NullDependency {\n \t\t\texports: [this.name]\n \t\t};\n \t}\n-\n-\tdescribeHarmonyExport() {\n-\t\treturn {\n-\t\t\texportedName: this.name,\n-\t\t\tprecedence: 1\n-\t\t};\n-\t}\n }\n \n HarmonyExportSpecifierDependency.Template = class HarmonyExportSpecifierDependencyTemplate {\n@@ -46,15 +38,10 @@ HarmonyExportSpecifierDependency.Template = class HarmonyExportSpecifierDependen\n \n \tgetContent(dep) {\n \t\tconst used = dep.originModule.isUsed(dep.name);\n-\t\tconst active = HarmonyModulesHelpers.isActive(dep.originModule, dep);\n \t\tif(!used) {\n \t\t\treturn `/* unused harmony export ${(dep.name || \"namespace\")} */\\n`;\n \t\t}\n \n-\t\tif(!active) {\n-\t\t\treturn `/* inactive harmony export ${(dep.name || \"namespace\")} */\\n`;\n-\t\t}\n-\n \t\tconst exportsName = dep.originModule.exportsArgument || \"exports\";\n \t\tif(dep.immutable) {\n \t\t\treturn `/* harmony export (immutable) */ ${exportsName}[${JSON.stringify(used)}] = ${dep.id};\\n`;"
      },
      {
        "sha": "9c28d5717924629bfdf861aab8a6562bdd370c2c",
        "filename": "lib/dependencies/HarmonyModulesHelpers.js",
        "status": "modified",
        "additions": 0,
        "deletions": 53,
        "changes": 53,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyModulesHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Fdependencies%2FHarmonyModulesHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FHarmonyModulesHelpers.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -27,59 +27,6 @@ class HarmonyModulesHelpers {\n \t\t\treturn null;\n \t\treturn this.getModuleVar(state, request);\n \t}\n-\n-\t// checks if an harmony dependency is active in a module according to\n-\t// precedence rules.\n-\tstatic isActive(module, depInQuestion) {\n-\t\tconst desc = depInQuestion.describeHarmonyExport();\n-\t\tif(!desc.exportedName) return true;\n-\t\tlet before = true;\n-\t\tfor(let idx = 0; idx < module.dependencies.length; idx++) {\n-\t\t\tconst dep = module.dependencies[idx];\n-\t\t\tif(dep === depInQuestion) {\n-\t\t\t\tbefore = false;\n-\t\t\t\tcontinue;\n-\t\t\t}\n-\t\t\tif(!dep.describeHarmonyExport) continue;\n-\t\t\tconst d = dep.describeHarmonyExport();\n-\t\t\tif(!d || !d.exportedName) continue;\n-\t\t\tif(d.exportedName === desc.exportedName) {\n-\t\t\t\tif(d.precedence < desc.precedence) {\n-\t\t\t\t\treturn false;\n-\t\t\t\t}\n-\t\t\t\tif(d.precedence === desc.precedence && !before) {\n-\t\t\t\t\treturn false;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t\treturn true;\n-\t}\n-\n-\t// get a list of named exports defined in a module\n-\t// doesn't include * reexports.\n-\tstatic getActiveExports(module, currentDependency) {\n-\t\tconst desc = currentDependency && currentDependency.describeHarmonyExport();\n-\t\tvar currentIndex = currentDependency ? module.dependencies.indexOf(currentDependency) : -1;\n-\t\treturn module.dependencies.map((dep, idx) => {\n-\t\t\treturn {\n-\t\t\t\tdep: dep,\n-\t\t\t\tidx: idx\n-\t\t\t};\n-\t\t}).reduce((arr, data) => {\n-\t\t\tconst dep = data.dep;\n-\t\t\tif(!dep.describeHarmonyExport) return arr;\n-\t\t\tconst d = dep.describeHarmonyExport();\n-\t\t\tif(!d) return arr;\n-\t\t\tif(!desc || (d.precedence < desc.precedence) || (d.precedence === desc.precedence && data.idx < currentIndex)) {\n-\t\t\t\tvar names = [].concat(d.exportedName);\n-\t\t\t\tnames.forEach(function(name) {\n-\t\t\t\t\tif(name && arr.indexOf(name) < 0)\n-\t\t\t\t\t\tarr.push(name);\n-\t\t\t\t});\n-\t\t\t}\n-\t\t\treturn arr;\n-\t\t}, []);\n-\t}\n }\n \n module.exports = HarmonyModulesHelpers;"
      },
      {
        "sha": "d70d328ddfa6d5b8e9346ccb72f3c09952b453af",
        "filename": "lib/optimize/ConcatenatedModule.js",
        "status": "modified",
        "additions": 27,
        "deletions": 24,
        "changes": 51,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Foptimize%2FConcatenatedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/lib%2Foptimize%2FConcatenatedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FConcatenatedModule.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -17,7 +17,6 @@ const HarmonyExportSpecifierDependency = require(\"../dependencies/HarmonyExportS\n const HarmonyExportExpressionDependency = require(\"../dependencies/HarmonyExportExpressionDependency\");\n const HarmonyExportImportedSpecifierDependency = require(\"../dependencies/HarmonyExportImportedSpecifierDependency\");\n const HarmonyCompatibilityDependency = require(\"../dependencies/HarmonyCompatibilityDependency\");\n-const HarmonyModulesHelpers = require(\"../dependencies/HarmonyModulesHelpers\");\n \n function ensureNsObjSource(info, moduleToInfoMap, requestShortener) {\n \tif(!info.hasNamespaceObject) {\n@@ -308,35 +307,42 @@ class ConcatenatedModule extends Module {\n \t\t\t\t\t\tconst reexportMap = new Map();\n \t\t\t\t\t\tinfo.module.dependencies.forEach(dep => {\n \t\t\t\t\t\t\tif(dep instanceof HarmonyExportSpecifierDependency) {\n-\t\t\t\t\t\t\t\texportMap.set(dep.name, dep.id);\n+\t\t\t\t\t\t\t\tif(!exportMap.has(dep.name))\n+\t\t\t\t\t\t\t\t\texportMap.set(dep.name, dep.id);\n \t\t\t\t\t\t\t} else if(dep instanceof HarmonyExportExpressionDependency) {\n-\t\t\t\t\t\t\t\texportMap.set(\"default\", \"__WEBPACK_MODULE_DEFAULT_EXPORT__\");\n+\t\t\t\t\t\t\t\tif(!exportMap.has(\"default\"))\n+\t\t\t\t\t\t\t\t\texportMap.set(\"default\", \"__WEBPACK_MODULE_DEFAULT_EXPORT__\");\n \t\t\t\t\t\t\t} else if(dep instanceof HarmonyExportImportedSpecifierDependency) {\n \t\t\t\t\t\t\t\tconst exportName = dep.name;\n \t\t\t\t\t\t\t\tconst importName = dep.id;\n \t\t\t\t\t\t\t\tconst importedModule = dep.importDependency.module;\n \t\t\t\t\t\t\t\tif(exportName && importName) {\n-\t\t\t\t\t\t\t\t\treexportMap.set(exportName, {\n-\t\t\t\t\t\t\t\t\t\tmodule: importedModule,\n-\t\t\t\t\t\t\t\t\t\texportName: importName,\n-\t\t\t\t\t\t\t\t\t\tdependency: dep\n-\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\tif(!reexportMap.has(exportName)) {\n+\t\t\t\t\t\t\t\t\t\treexportMap.set(exportName, {\n+\t\t\t\t\t\t\t\t\t\t\tmodule: importedModule,\n+\t\t\t\t\t\t\t\t\t\t\texportName: importName,\n+\t\t\t\t\t\t\t\t\t\t\tdependency: dep\n+\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t} else if(exportName) {\n-\t\t\t\t\t\t\t\t\treexportMap.set(exportName, {\n-\t\t\t\t\t\t\t\t\t\tmodule: importedModule,\n-\t\t\t\t\t\t\t\t\t\texportName: true,\n-\t\t\t\t\t\t\t\t\t\tdependency: dep\n-\t\t\t\t\t\t\t\t\t});\n-\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\tvar activeExports = new Set(HarmonyModulesHelpers.getActiveExports(dep.originModule, dep));\n-\t\t\t\t\t\t\t\t\timportedModule.providedExports.forEach(name => {\n-\t\t\t\t\t\t\t\t\t\tif(activeExports.has(name) || name === \"default\")\n-\t\t\t\t\t\t\t\t\t\t\treturn;\n-\t\t\t\t\t\t\t\t\t\treexportMap.set(name, {\n+\t\t\t\t\t\t\t\t\tif(!reexportMap.has(exportName)) {\n+\t\t\t\t\t\t\t\t\t\treexportMap.set(exportName, {\n \t\t\t\t\t\t\t\t\t\t\tmodule: importedModule,\n-\t\t\t\t\t\t\t\t\t\t\texportName: name,\n+\t\t\t\t\t\t\t\t\t\t\texportName: true,\n \t\t\t\t\t\t\t\t\t\t\tdependency: dep\n \t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\timportedModule.providedExports.forEach(name => {\n+\t\t\t\t\t\t\t\t\t\tif(dep.activeExports.has(name) || name === \"default\")\n+\t\t\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t\t\tif(!reexportMap.has(name)) {\n+\t\t\t\t\t\t\t\t\t\t\treexportMap.set(name, {\n+\t\t\t\t\t\t\t\t\t\t\t\tmodule: importedModule,\n+\t\t\t\t\t\t\t\t\t\t\t\texportName: name,\n+\t\t\t\t\t\t\t\t\t\t\t\tdependency: dep\n+\t\t\t\t\t\t\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n@@ -741,8 +747,6 @@ class HarmonyExportImportedSpecifierDependencyConcatenatedTemplate {\n \t}\n \n \tgetExports(dep) {\n-\t\tconst active = HarmonyModulesHelpers.isActive(dep.originModule, dep);\n-\t\tif(!active) return [];\n \t\tconst importModule = dep.importDependency.module;\n \t\tif(dep.id) {\n \t\t\t// export { named } from \"module\"\n@@ -761,8 +765,7 @@ class HarmonyExportImportedSpecifierDependencyConcatenatedTemplate {\n \t\t\t}];\n \t\t}\n \t\t// export * from \"module\"\n-\t\tconst activeExports = new Set(HarmonyModulesHelpers.getActiveExports(dep.originModule, dep));\n-\t\treturn importModule.providedExports.filter(exp => exp !== \"default\" && !activeExports.has(exp)).map(exp => {\n+\t\treturn importModule.providedExports.filter(exp => exp !== \"default\" && !dep.activeExports.has(exp)).map(exp => {\n \t\t\treturn {\n \t\t\t\tname: exp,\n \t\t\t\tid: exp,"
      },
      {
        "sha": "8e6c60b513c67bb3cff346ec844d72e395da71e3",
        "filename": "test/ConfigTestCases.test.js",
        "status": "modified",
        "additions": 15,
        "deletions": 12,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FConfigTestCases.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FConfigTestCases.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FConfigTestCases.test.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -37,7 +37,6 @@ describe(\"ConfigTestCases\", () => {\n \t\t\tcategory.tests.forEach((testName) => {\n \t\t\t\tconst suite = describe(testName, () => {});\n \t\t\t\tit(testName + \" should compile\", function(done) {\n-\t\t\t\t\tthis.timeout(30000);\n \t\t\t\t\tconst testDirectory = path.join(casesPath, category.name, testName);\n \t\t\t\t\tconst outputDirectory = path.join(__dirname, \"js\", \"config\", category.name, testName);\n \t\t\t\t\tconst options = prepareOptions(require(path.join(testDirectory, \"webpack.config.js\")));\n@@ -52,6 +51,21 @@ describe(\"ConfigTestCases\", () => {\n \t\t\t\t\t\tif(!options.output.filename) options.output.filename = \"bundle\" + idx + \".js\";\n \t\t\t\t\t\tif(!options.output.chunkFilename) options.output.chunkFilename = \"[id].bundle\" + idx + \".js\";\n \t\t\t\t\t});\n+\t\t\t\t\tlet testConfig = {\n+\t\t\t\t\t\tfindBundle: function(i, options) {\n+\t\t\t\t\t\t\tif(fs.existsSync(path.join(options.output.path, \"bundle\" + i + \".js\"))) {\n+\t\t\t\t\t\t\t\treturn \"./bundle\" + i + \".js\";\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\ttimeout: 30000\n+\t\t\t\t\t};\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\t// try to load a test file\n+\t\t\t\t\t\ttestConfig = Object.assign(testConfig, require(path.join(testDirectory, \"test.config.js\")));\n+\t\t\t\t\t} catch(e) {}\n+\n+\t\t\t\t\tthis.timeout(testConfig.timeout);\n+\n \t\t\t\t\twebpack(options, (err, stats) => {\n \t\t\t\t\t\tif(err) return done(err);\n \t\t\t\t\t\tconst statOptions = Stats.presetToOptions(\"verbose\");\n@@ -105,17 +119,6 @@ describe(\"ConfigTestCases\", () => {\n \t\t\t\t\t\t\t} else return require(module);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tlet filesCount = 0;\n-\t\t\t\t\t\tlet testConfig = {\n-\t\t\t\t\t\t\tfindBundle: function(i, options) {\n-\t\t\t\t\t\t\t\tif(fs.existsSync(path.join(options.output.path, \"bundle\" + i + \".js\"))) {\n-\t\t\t\t\t\t\t\t\treturn \"./bundle\" + i + \".js\";\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t};\n-\t\t\t\t\t\ttry {\n-\t\t\t\t\t\t\t// try to load a test file\n-\t\t\t\t\t\t\ttestConfig = require(path.join(testDirectory, \"test.config.js\"));\n-\t\t\t\t\t\t} catch(e) {}\n \n \t\t\t\t\t\tif(testConfig.noTests) return process.nextTick(done);\n \t\t\t\t\t\tfor(let i = 0; i < optionsArr.length; i++) {"
      },
      {
        "sha": "fcd87470eb39e5fd92f4cabff33cc33e6e3da192",
        "filename": "test/HarmonyModulesHelpers.test.js",
        "status": "modified",
        "additions": 0,
        "deletions": 97,
        "changes": 97,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FHarmonyModulesHelpers.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FHarmonyModulesHelpers.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FHarmonyModulesHelpers.test.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -78,101 +78,4 @@ describe(\"HarmonyModulesHelpers\", () => {\n \t\t\tshould(HarmonyModulesHelpers.getNewModuleVar(state, request)).be.eql('__WEBPACK_IMPORTED_MODULE_0_sample_test__');\n \t\t});\n \t});\n-\n-\tdescribe(\"isActive\", () => {\n-\t\tit(\"returns `true` if module has NOT dependencies\", () => {\n-\t\t\tconst currentDependency = {\n-\t\t\t\tdescribeHarmonyExport: () => {\n-\t\t\t\t\treturn {\n-\t\t\t\t\t\texportedName: '',\n-\t\t\t\t\t\tprecedence: 1\n-\t\t\t\t\t};\n-\t\t\t\t}\n-\t\t\t};\n-\t\t\tconst module = {\n-\t\t\t\tdependencies: []\n-\t\t\t};\n-\t\t\tshould(HarmonyModulesHelpers.isActive(module, currentDependency)).be.eql(true);\n-\t\t});\n-\n-\t\tit(\"returns `false` if module currentDependency has precedence greater than module dependency\", () => {\n-\t\t\tconst currentDependency = {\n-\t\t\t\tdescribeHarmonyExport: () => {\n-\t\t\t\t\treturn {\n-\t\t\t\t\t\texportedName: 'first dependency',\n-\t\t\t\t\t\tprecedence: 2\n-\t\t\t\t\t};\n-\t\t\t\t}\n-\t\t\t};\n-\t\t\tconst module = {\n-\t\t\t\tdependencies: [{\n-\t\t\t\t\tdescribeHarmonyExport: () => {\n-\t\t\t\t\t\treturn {\n-\t\t\t\t\t\t\texportedName: 'first dependency',\n-\t\t\t\t\t\t\tprecedence: 1\n-\t\t\t\t\t\t};\n-\t\t\t\t\t}\n-\t\t\t\t}]\n-\t\t\t};\n-\t\t\tshould(HarmonyModulesHelpers.isActive(module, currentDependency)).be.eql(false);\n-\t\t});\n-\n-\t\tdescribe(\"getActiveExports\", () => {\n-\t\t\tit(\"returns an empty array with modules has no dependency\", () => {\n-\t\t\t\tconst currentDependency = {\n-\t\t\t\t\tdescribeHarmonyExport: () => {}\n-\t\t\t\t};\n-\t\t\t\tconst module = {\n-\t\t\t\t\tdependencies: []\n-\t\t\t\t};\n-\t\t\t\tshould(HarmonyModulesHelpers.getActiveExports(module, currentDependency)).be.eql([]);\n-\t\t\t});\n-\n-\t\t\tit(\"returns an empty array if the precedence of current dependency is less than module dependency\", () => {\n-\t\t\t\tconst currentDependency = {\n-\t\t\t\t\tdescribeHarmonyExport: () => {\n-\t\t\t\t\t\treturn {\n-\t\t\t\t\t\t\texportedName: 'first dependency',\n-\t\t\t\t\t\t\tprecedence: 1\n-\t\t\t\t\t\t};\n-\t\t\t\t\t}\n-\t\t\t\t};\n-\t\t\t\tconst module = {\n-\t\t\t\t\tdependencies: [{\n-\t\t\t\t\t\tdescribeHarmonyExport: () => {\n-\t\t\t\t\t\t\treturn {\n-\t\t\t\t\t\t\t\texportedName: 'first dependency',\n-\t\t\t\t\t\t\t\tprecedence: 2\n-\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}]\n-\t\t\t\t};\n-\t\t\t\tshould(HarmonyModulesHelpers.getActiveExports(module, currentDependency)).be.eql([]);\n-\t\t\t});\n-\n-\t\t\tit(\"returns an array with modules if currentDependency has precedence greater than module dependency\", () => {\n-\t\t\t\tconst currentDependency = {\n-\t\t\t\t\tdescribeHarmonyExport: () => {\n-\t\t\t\t\t\treturn {\n-\t\t\t\t\t\t\texportedName: 'first dependency',\n-\t\t\t\t\t\t\tprecedence: 2\n-\t\t\t\t\t\t};\n-\t\t\t\t\t}\n-\t\t\t\t};\n-\t\t\t\tconst module = {\n-\t\t\t\t\tdependencies: [{\n-\t\t\t\t\t\tdescribeHarmonyExport: () => {\n-\t\t\t\t\t\t\treturn {\n-\t\t\t\t\t\t\t\texportedName: 'first dependency',\n-\t\t\t\t\t\t\t\tprecedence: 1\n-\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}]\n-\t\t\t\t};\n-\t\t\t\tshould(HarmonyModulesHelpers.getActiveExports(module, currentDependency)).be.eql(['first dependency']);\n-\t\t\t});\n-\t\t});\n-\n-\t});\n-\n });"
      },
      {
        "sha": "6ec2268c91d7fa32277939b4521446f3b136b22a",
        "filename": "test/configCases/performance/many-exports/file.loader.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ffile.loader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ffile.loader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ffile.loader.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -0,0 +1,7 @@\n+module.exports = function() {\n+\tvar str = \"\";\n+\tfor(var i = 0; i < 1000; i++) {\n+\t\tstr += `export var a${i} = ${i};\\n`;\n+\t}\n+\treturn str;\n+}"
      },
      {
        "sha": "09e6f32034f396e5fac371f3d27359a4a3dfff94",
        "filename": "test/configCases/performance/many-exports/index.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-exports%2Findex.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -0,0 +1,5 @@\n+import sum from \"./reexport.loader.js!\";\n+\n+it(\"should compile a module with many harmony exports in acceptable time\", function() {\n+\tsum.should.be.eql(499500);\n+});"
      },
      {
        "sha": "af755e8686a13f17981decb47902605977f59824",
        "filename": "test/configCases/performance/many-exports/reexport.loader.js",
        "status": "added",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Freexport.loader.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Freexport.loader.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-exports%2Freexport.loader.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -0,0 +1,9 @@\n+module.exports = function() {\n+\tvar str = \"import * as i from \\\"./file.loader.js!\\\";\\n\";\n+\tstr += \"var sum = 0;\\n\";\n+\tfor(var i = 0; i < 1000; i++) {\n+\t\tstr += `sum += i.a${i};\\n`;\n+\t}\n+\tstr += \"export default sum;\\n\";\n+\treturn str;\n+}"
      },
      {
        "sha": "3f84fd04e2f573c54730a05b1034da9c4dca3030",
        "filename": "test/configCases/performance/many-exports/test.config.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ftest.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ftest.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ftest.config.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = {\n+\ttimeout: 10000\n+};"
      },
      {
        "sha": "6a8d56378febebfa98c12fcda58677f2fe87e70e",
        "filename": "test/configCases/performance/many-exports/test.filter.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ftest.filter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ftest.filter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-exports%2Ftest.filter.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -0,0 +1,3 @@\n+module.exports = function(config) {\n+\treturn !/^v4/.test(process.version);\n+};"
      },
      {
        "sha": "f053ebf7976e3726d11f3c03fade2170903889a5",
        "filename": "test/configCases/performance/many-exports/webpack.config.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a5112fe5daca52a15780cc32789dab43670045d7/test%2FconfigCases%2Fperformance%2Fmany-exports%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fperformance%2Fmany-exports%2Fwebpack.config.js?ref=a5112fe5daca52a15780cc32789dab43670045d7",
        "patch": "@@ -0,0 +1 @@\n+module.exports = {};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5816",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5816/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5816/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5816/events",
    "html_url": "https://github.com/webpack/webpack/pull/5816",
    "id": 265023990,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ2MjY4NzI5",
    "number": 5816,
    "title": "improve performance by doing a breath-first traversal in the chunk graph",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2017-10-12T17:29:16Z",
    "updated_at": "2017-10-13T07:21:15Z",
    "closed_at": "2017-10-12T18:52:27Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5816",
      "html_url": "https://github.com/webpack/webpack/pull/5816",
      "diff_url": "https://github.com/webpack/webpack/pull/5816.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5816.patch",
      "merged_at": "2017-10-12T18:52:27Z"
    },
    "body": "\r\n<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nrefactor for performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nexisting tests\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nimprove performance by doing a breath-first traversal in the chunk graph\r\n\r\nThis is faster because shorter paths usually have less modules available.\r\nThis allows to reach minimal modules faster\r\n\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5816/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "8a32598b9934bae3ac73738e1e7372edf95e89fd",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -23,6 +23,7 @@ const ChunkRenderError = require(\"./ChunkRenderError\");\n const CachedSource = require(\"webpack-sources\").CachedSource;\n const Stats = require(\"./Stats\");\n const Semaphore = require(\"./util/Semaphore\");\n+const Queue = require(\"./util/Queue\");\n \n function byId(a, b) {\n \tif(a.id < b.id) return -1;\n@@ -954,10 +955,10 @@ class Compilation extends Tapable {\n \n \t\tlet availableModules;\n \t\tlet newAvailableModules;\n-\t\tconst queue2 = inputChunks.map(chunk => ({\n+\t\tconst queue2 = new Queue(inputChunks.map(chunk => ({\n \t\t\tchunk,\n \t\t\tavailableModules: new Set()\n-\t\t}));\n+\t\t})));\n \n \t\t// Helper function to check if all modules of a chunk are available\n \t\tconst areModulesAvailable = (chunk, availableModules) => {\n@@ -982,7 +983,7 @@ class Compilation extends Tapable {\n \n \t\t// Iterative traversing of the basic chunk graph\n \t\twhile(queue2.length) {\n-\t\t\tconst queueItem = queue2.pop();\n+\t\t\tconst queueItem = queue2.dequeue();\n \t\t\tchunk = queueItem.chunk;\n \t\t\tavailableModules = queueItem.availableModules;\n \n@@ -1003,6 +1004,7 @@ class Compilation extends Tapable {\n \t\t\t\t}\n \t\t\t\tif(!deletedModules)\n \t\t\t\t\tcontinue;\n+\t\t\t\tavailableModules = minAvailableModules;\n \t\t\t}\n \n \t\t\t// 2. Get the edges at this point of the graph\n@@ -1040,7 +1042,7 @@ class Compilation extends Tapable {\n \n \t\t\t// 8. Enqueue further traversal\n \t\t\tfor(const nextChunk of nextChunks) {\n-\t\t\t\tqueue2.push({\n+\t\t\t\tqueue2.enqueue({\n \t\t\t\t\tchunk: nextChunk,\n \t\t\t\t\tavailableModules: newAvailableModules\n \t\t\t\t});"
      },
      {
        "sha": "48941bac091e2b5de41e12b77470fc8e04df1df4",
        "filename": "lib/util/Queue.js",
        "status": "added",
        "additions": 42,
        "deletions": 0,
        "changes": 42,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/lib%2Futil%2FQueue.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/lib%2Futil%2FQueue.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FQueue.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,42 @@\n+\"use strict\";\n+\n+module.exports = class Queue {\n+\tconstructor(items) {\n+\t\tthis.first = null;\n+\t\tthis.last = null;\n+\t\tthis.length = 0;\n+\t\tif(items) {\n+\t\t\tfor(const item of items) {\n+\t\t\t\tthis.enqueue(item);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tenqueue(item) {\n+\t\tconst first = this.first;\n+\t\tconst node = {\n+\t\t\titem,\n+\t\t\tnext: null\n+\t\t};\n+\t\tif(first === null) {\n+\t\t\tthis.last = node;\n+\t\t} else {\n+\t\t\tfirst.next = node;\n+\t\t}\n+\t\tthis.first = node;\n+\t\tthis.length++;\n+\t}\n+\n+\tdequeue() {\n+\t\tconst last = this.last;\n+\t\tif(last === null)\n+\t\t\treturn undefined;\n+\t\tconst next = last.next;\n+\t\tif(next === null) {\n+\t\t\tthis.first = null;\n+\t\t}\n+\t\tthis.last = next;\n+\t\tthis.length--;\n+\t\treturn last.item;\n+\t}\n+};"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/a.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fa.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "118b7b2dfaf8bb761bf933bf0385dd7404008fd5",
        "filename": "test/statsCases/module-deduplication-named/async1.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync1.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,3 @@\n+import \"./b\";\n+import \"./d\";\n+import(/* webpackChunkName: \"async2\" */\"./async2\");"
      },
      {
        "sha": "9ee2d754bef42dd241ee33dec98ba4941cc6d69e",
        "filename": "test/statsCases/module-deduplication-named/async2.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync2.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,3 @@\n+import \"./b\";\n+import \"./f\";\n+import(/* webpackChunkName: \"async3\" */\"./async3\");"
      },
      {
        "sha": "7f802fe2d99e975ad8792e6bba2acc7141e48203",
        "filename": "test/statsCases/module-deduplication-named/async3.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fasync3.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,3 @@\n+import \"./b\";\n+import \"./h\";\n+import(/* webpackChunkName: \"async1\" */\"./async1\");"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fb.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fc.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fd.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fe.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "35e90e78fcbaf308d16a3de9a4b419e321c931da",
        "filename": "test/statsCases/module-deduplication-named/e1.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fe1.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,5 @@\n+import \"./a\";\n+import \"./b\";\n+import \"./c\";\n+import \"./d\";\n+import(/* webpackChunkName: \"async1\" */\"./async1\");"
      },
      {
        "sha": "cb20797bbe744f74f7f045cebdcb5c444c8814ef",
        "filename": "test/statsCases/module-deduplication-named/e2.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fe2.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,5 @@\n+import \"./a\";\n+import \"./b\";\n+import \"./e\";\n+import \"./f\";\n+import(/* webpackChunkName: \"async2\" */\"./async2\");"
      },
      {
        "sha": "1ee82f31f1f8c05b3d0582ca76be50ecea012972",
        "filename": "test/statsCases/module-deduplication-named/e3.js",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fe3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fe3.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,5 @@\n+import \"./a\";\n+import \"./b\";\n+import \"./g\";\n+import \"./h\";\n+import(/* webpackChunkName: \"async3\" */\"./async3\");"
      },
      {
        "sha": "8851e9da39d1cdfa5449ffbfccb4eba0ab0bc7cb",
        "filename": "test/statsCases/module-deduplication-named/expected.txt",
        "status": "added",
        "additions": 35,
        "deletions": 0,
        "changes": 35,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fexpected.txt?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,35 @@\n+Time: Xms\n+Asset       Size  Chunks             Chunk Names\n+ 0.js  769 bytes       0  [emitted]  async3\n+ 1.js  769 bytes       1  [emitted]  async2\n+ 2.js  769 bytes       2  [emitted]  async1\n+e3.js    7.14 kB       3  [emitted]  e3\n+e2.js    7.12 kB       4  [emitted]  e2\n+e1.js    7.09 kB       5  [emitted]  e1\n+chunk    {0} 0.js (async3) 89 bytes {1} {3} [rendered]\n+    [4] (webpack)/test/statsCases/module-deduplication-named/h.js 9 bytes {0} {3} [built]\n+    [7] (webpack)/test/statsCases/module-deduplication-named/async3.js 80 bytes {0} [built]\n+chunk    {1} 1.js (async2) 89 bytes {2} {4} [rendered]\n+    [3] (webpack)/test/statsCases/module-deduplication-named/f.js 9 bytes {1} {4} [built]\n+    [6] (webpack)/test/statsCases/module-deduplication-named/async2.js 80 bytes {1} [built]\n+chunk    {2} 2.js (async1) 89 bytes {0} {5} [rendered]\n+    [2] (webpack)/test/statsCases/module-deduplication-named/d.js 9 bytes {2} {5} [built]\n+    [5] (webpack)/test/statsCases/module-deduplication-named/async1.js 80 bytes {2} [built]\n+chunk    {3} e3.js (e3) 144 bytes [entry] [rendered]\n+    [0] (webpack)/test/statsCases/module-deduplication-named/b.js 9 bytes {3} {4} {5} [built]\n+    [1] (webpack)/test/statsCases/module-deduplication-named/a.js 9 bytes {3} {4} {5} [built]\n+    [4] (webpack)/test/statsCases/module-deduplication-named/h.js 9 bytes {0} {3} [built]\n+   [12] (webpack)/test/statsCases/module-deduplication-named/e3.js 108 bytes {3} [built]\n+   [13] (webpack)/test/statsCases/module-deduplication-named/g.js 9 bytes {3} [built]\n+chunk    {4} e2.js (e2) 144 bytes [entry] [rendered]\n+    [0] (webpack)/test/statsCases/module-deduplication-named/b.js 9 bytes {3} {4} {5} [built]\n+    [1] (webpack)/test/statsCases/module-deduplication-named/a.js 9 bytes {3} {4} {5} [built]\n+    [3] (webpack)/test/statsCases/module-deduplication-named/f.js 9 bytes {1} {4} [built]\n+   [10] (webpack)/test/statsCases/module-deduplication-named/e2.js 108 bytes {4} [built]\n+   [11] (webpack)/test/statsCases/module-deduplication-named/e.js 9 bytes {4} [built]\n+chunk    {5} e1.js (e1) 144 bytes [entry] [rendered]\n+    [0] (webpack)/test/statsCases/module-deduplication-named/b.js 9 bytes {3} {4} {5} [built]\n+    [1] (webpack)/test/statsCases/module-deduplication-named/a.js 9 bytes {3} {4} {5} [built]\n+    [2] (webpack)/test/statsCases/module-deduplication-named/d.js 9 bytes {2} {5} [built]\n+    [8] (webpack)/test/statsCases/module-deduplication-named/e1.js 108 bytes {5} [built]\n+    [9] (webpack)/test/statsCases/module-deduplication-named/c.js 9 bytes {5} [built]\n\\ No newline at end of file"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/f.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Ff.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Ff.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Ff.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/g.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fg.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fg.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fg.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication-named/h.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fh.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fh.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fh.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "4036423e41a88c46527a5dc6687ee1e94798e73e",
        "filename": "test/statsCases/module-deduplication-named/webpack.config.js",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication-named%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication-named%2Fwebpack.config.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,17 @@\n+module.exports = {\n+\tentry: {\n+\t\te1: \"./e1\",\n+\t\te2: \"./e2\",\n+\t\te3: \"./e3\"\n+\t},\n+\toutput: {\n+\t\tfilename: \"[name].js\"\n+\t},\n+\tstats: {\n+\t\thash: false,\n+\t\ttiming: false,\n+\t\tchunks: true,\n+\t\tchunkModules: true,\n+\t\tmodules: false\n+\t}\n+};"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/a.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fa.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "26fa1f2244cf8bc33bdf24e90f6d58aca57b382d",
        "filename": "test/statsCases/module-deduplication/async1.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fasync1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fasync1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fasync1.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,2 @@\n+import \"./b\";\n+import \"./d\";"
      },
      {
        "sha": "8ab3bed29d0f0d82ea2fa9f9e93a83ba30ec812b",
        "filename": "test/statsCases/module-deduplication/async2.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fasync2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fasync2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fasync2.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,2 @@\n+import \"./b\";\n+import \"./f\";"
      },
      {
        "sha": "b53d36759e95d7f734899f00b63dbb7ea4a5dce5",
        "filename": "test/statsCases/module-deduplication/async3.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fasync3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fasync3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fasync3.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,2 @@\n+import \"./b\";\n+import \"./h\";"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fb.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fc.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fd.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fe.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8f319a09452ef97850680c51ef4b801c4100c400",
        "filename": "test/statsCases/module-deduplication/e1.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe1.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe1.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fe1.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,7 @@\n+import \"./a\";\n+import \"./b\";\n+import \"./c\";\n+import \"./d\";\n+import(\"./async1\");\n+import(\"./async2\");\n+import(\"./async3\");"
      },
      {
        "sha": "37edf823b4d8c7f62b5b1a07f7a0bde7d9c3a0ae",
        "filename": "test/statsCases/module-deduplication/e2.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fe2.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,7 @@\n+import \"./a\";\n+import \"./b\";\n+import \"./e\";\n+import \"./f\";\n+import(\"./async1\");\n+import(\"./async2\");\n+import(\"./async3\");"
      },
      {
        "sha": "c7adaf8ee8191eea4894e9ba7d7018fe0f0d0601",
        "filename": "test/statsCases/module-deduplication/e3.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe3.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fe3.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fe3.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,7 @@\n+import \"./a\";\n+import \"./b\";\n+import \"./g\";\n+import \"./h\";\n+import(\"./async1\");\n+import(\"./async2\");\n+import(\"./async3\");"
      },
      {
        "sha": "5eb94e30e6b85eaf552e5e6f6a36eb3edcb07edf",
        "filename": "test/statsCases/module-deduplication/expected.txt",
        "status": "added",
        "additions": 44,
        "deletions": 0,
        "changes": 44,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fexpected.txt?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,44 @@\n+Time: Xms\n+Asset       Size  Chunks             Chunk Names\n+ 0.js  691 bytes    0, 3  [emitted]  \n+ 1.js  691 bytes    1, 4  [emitted]  \n+ 2.js  704 bytes    2, 5  [emitted]  \n+ 3.js  622 bytes       3  [emitted]  \n+ 4.js  622 bytes       4  [emitted]  \n+ 5.js  622 bytes       5  [emitted]  \n+e3.js     7.3 kB       6  [emitted]  e3\n+e2.js    7.29 kB       7  [emitted]  e2\n+e1.js    7.28 kB       8  [emitted]  e1\n+chunk    {0} 0.js 37 bytes {7} {8} [rendered]\n+    [6] (webpack)/test/statsCases/module-deduplication/async3.js 28 bytes {0} {3} [built]\n+    [7] (webpack)/test/statsCases/module-deduplication/h.js 9 bytes {0} {6} [built]\n+chunk    {1} 1.js 37 bytes {6} {8} [rendered]\n+    [4] (webpack)/test/statsCases/module-deduplication/async2.js 28 bytes {1} {4} [built]\n+    [5] (webpack)/test/statsCases/module-deduplication/f.js 9 bytes {1} {7} [built]\n+chunk    {2} 2.js 37 bytes {6} {7} [rendered]\n+    [2] (webpack)/test/statsCases/module-deduplication/d.js 9 bytes {2} {8} [built]\n+    [3] (webpack)/test/statsCases/module-deduplication/async1.js 28 bytes {2} {5} [built]\n+chunk    {3} 3.js 28 bytes {6} [rendered]\n+    [6] (webpack)/test/statsCases/module-deduplication/async3.js 28 bytes {0} {3} [built]\n+chunk    {4} 4.js 28 bytes {7} [rendered]\n+    [4] (webpack)/test/statsCases/module-deduplication/async2.js 28 bytes {1} {4} [built]\n+chunk    {5} 5.js 28 bytes {8} [rendered]\n+    [3] (webpack)/test/statsCases/module-deduplication/async1.js 28 bytes {2} {5} [built]\n+chunk    {6} e3.js (e3) 152 bytes [entry] [rendered]\n+    [0] (webpack)/test/statsCases/module-deduplication/b.js 9 bytes {6} {7} {8} [built]\n+    [1] (webpack)/test/statsCases/module-deduplication/a.js 9 bytes {6} {7} {8} [built]\n+    [7] (webpack)/test/statsCases/module-deduplication/h.js 9 bytes {0} {6} [built]\n+   [12] (webpack)/test/statsCases/module-deduplication/e3.js 116 bytes {6} [built]\n+   [13] (webpack)/test/statsCases/module-deduplication/g.js 9 bytes {6} [built]\n+chunk    {7} e2.js (e2) 152 bytes [entry] [rendered]\n+    [0] (webpack)/test/statsCases/module-deduplication/b.js 9 bytes {6} {7} {8} [built]\n+    [1] (webpack)/test/statsCases/module-deduplication/a.js 9 bytes {6} {7} {8} [built]\n+    [5] (webpack)/test/statsCases/module-deduplication/f.js 9 bytes {1} {7} [built]\n+   [10] (webpack)/test/statsCases/module-deduplication/e2.js 116 bytes {7} [built]\n+   [11] (webpack)/test/statsCases/module-deduplication/e.js 9 bytes {7} [built]\n+chunk    {8} e1.js (e1) 152 bytes [entry] [rendered]\n+    [0] (webpack)/test/statsCases/module-deduplication/b.js 9 bytes {6} {7} {8} [built]\n+    [1] (webpack)/test/statsCases/module-deduplication/a.js 9 bytes {6} {7} {8} [built]\n+    [2] (webpack)/test/statsCases/module-deduplication/d.js 9 bytes {2} {8} [built]\n+    [8] (webpack)/test/statsCases/module-deduplication/e1.js 116 bytes {8} [built]\n+    [9] (webpack)/test/statsCases/module-deduplication/c.js 9 bytes {8} [built]\n\\ No newline at end of file"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/f.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Ff.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Ff.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Ff.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/g.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fg.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fg.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fg.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "8b1a393741c96c03c3712b4c80b3d2bcd06959b6",
        "filename": "test/statsCases/module-deduplication/h.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fh.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fh.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fh.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1 @@\n+// empty"
      },
      {
        "sha": "4036423e41a88c46527a5dc6687ee1e94798e73e",
        "filename": "test/statsCases/module-deduplication/webpack.config.js",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/11e28793faf18d61bca86e5b9e68a4b1ecb2ac50/test%2FstatsCases%2Fmodule-deduplication%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fmodule-deduplication%2Fwebpack.config.js?ref=11e28793faf18d61bca86e5b9e68a4b1ecb2ac50",
        "patch": "@@ -0,0 +1,17 @@\n+module.exports = {\n+\tentry: {\n+\t\te1: \"./e1\",\n+\t\te2: \"./e2\",\n+\t\te3: \"./e3\"\n+\t},\n+\toutput: {\n+\t\tfilename: \"[name].js\"\n+\t},\n+\tstats: {\n+\t\thash: false,\n+\t\ttiming: false,\n+\t\tchunks: true,\n+\t\tchunkModules: true,\n+\t\tmodules: false\n+\t}\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5155",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5155/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5155/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5155/events",
    "html_url": "https://github.com/webpack/webpack/pull/5155",
    "id": 238285671,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTI3MzExOTIy",
    "number": 5155,
    "title": "Use sortable set for \"chunks\" of Chunks",
    "user": {
      "login": "timse",
      "id": 749171,
      "node_id": "MDQ6VXNlcjc0OTE3MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/749171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timse",
      "html_url": "https://github.com/timse",
      "followers_url": "https://api.github.com/users/timse/followers",
      "following_url": "https://api.github.com/users/timse/following{/other_user}",
      "gists_url": "https://api.github.com/users/timse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timse/subscriptions",
      "organizations_url": "https://api.github.com/users/timse/orgs",
      "repos_url": "https://api.github.com/users/timse/repos",
      "events_url": "https://api.github.com/users/timse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timse/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 496339709,
        "node_id": "MDU6TGFiZWw0OTYzMzk3MDk=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20breaking%20change",
        "name": "PR: breaking change",
        "color": "f9d0c4",
        "default": false,
        "description": null
      },
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575748708,
        "node_id": "MDU6TGFiZWw1NzU3NDg3MDg=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-changes-requested",
        "name": "PR: reviewed-changes-requested",
        "color": "c2e0c6",
        "default": false,
        "description": null
      },
      {
        "id": 689140390,
        "node_id": "MDU6TGFiZWw2ODkxNDAzOTA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20next",
        "name": "PR: next",
        "color": "8b32d3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
      "url": "https://api.github.com/repos/webpack/webpack/milestones/15",
      "html_url": "https://github.com/webpack/webpack/milestone/15",
      "labels_url": "https://api.github.com/repos/webpack/webpack/milestones/15/labels",
      "id": 2472672,
      "node_id": "MDk6TWlsZXN0b25lMjQ3MjY3Mg==",
      "number": 15,
      "title": "webpack 4",
      "description": "",
      "creator": {
        "login": "sokra",
        "id": 1365881,
        "node_id": "MDQ6VXNlcjEzNjU4ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sokra",
        "html_url": "https://github.com/sokra",
        "followers_url": "https://api.github.com/users/sokra/followers",
        "following_url": "https://api.github.com/users/sokra/following{/other_user}",
        "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
        "organizations_url": "https://api.github.com/users/sokra/orgs",
        "repos_url": "https://api.github.com/users/sokra/repos",
        "events_url": "https://api.github.com/users/sokra/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sokra/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 58,
      "state": "closed",
      "created_at": "2017-04-21T16:56:32Z",
      "updated_at": "2018-06-21T10:45:41Z",
      "due_on": "2018-02-24T08:00:00Z",
      "closed_at": "2018-06-21T10:45:41Z"
    },
    "comments": 2,
    "created_at": "2017-06-24T01:42:42Z",
    "updated_at": "2017-09-25T12:17:18Z",
    "closed_at": "2017-09-22T13:01:22Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5155",
      "html_url": "https://github.com/webpack/webpack/pull/5155",
      "diff_url": "https://github.com/webpack/webpack/pull/5155.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5155.patch",
      "merged_at": "2017-09-22T13:01:22Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\n\r\nrefactoring\r\n\r\n**Did you add tests for your changes?**\r\n\r\nyes\r\n\r\n**If relevant, link to documentation update:**\r\n\r\nN/A\r\n\r\n**Summary**\r\n\r\nUse SortableSet for \"chunks\" of chunks to increase performance. \r\nHide them behind an API to simplify future reasoning about their usage.\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nMaybe, probably not.\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5155/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "8751ebad2d9be3573e72a123c202ecaacde1ad4b",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 57,
        "deletions": 32,
        "changes": 89,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -30,7 +30,7 @@ class Chunk {\n \t\tthis.name = name;\n \t\tthis._modules = new SortableSet(undefined, sortByIdentifier);\n \t\tthis.entrypoints = [];\n-\t\tthis.chunks = [];\n+\t\tthis._chunks = new SortableSet(undefined, sortById);\n \t\tthis.parents = [];\n \t\tthis.blocks = [];\n \t\tthis.origins = [];\n@@ -61,6 +61,21 @@ class Chunk {\n \t\tthrow new Error(\"Chunk.initial was removed. Use isInitial()\");\n \t}\n \n+\t/**\n+\t * @return {Array} - an array containing the chunks\n+\t */\n+\tgetChunks() {\n+\t\treturn Array.from(this._chunks);\n+\t}\n+\n+\tgetNumberOfChunks() {\n+\t\treturn this._chunks.size;\n+\t}\n+\n+\tget chunksIterable() {\n+\t\treturn this._chunks;\n+\t}\n+\n \thasRuntime() {\n \t\tif(this.entrypoints.length === 0) return false;\n \t\treturn this.entrypoints[0].getRuntimeChunk() === this;\n@@ -88,7 +103,11 @@ class Chunk {\n \t}\n \n \taddChunk(chunk) {\n-\t\treturn this.addToCollection(this.chunks, chunk);\n+\t\tif(this._chunks.has(chunk)) {\n+\t\t\treturn false;\n+\t\t}\n+\t\tthis._chunks.add(chunk);\n+\t\treturn true;\n \t}\n \n \taddParent(parentChunk) {\n@@ -116,13 +135,13 @@ class Chunk {\n \t}\n \n \tremoveChunk(chunk) {\n-\t\tconst idx = this.chunks.indexOf(chunk);\n-\t\tif(idx >= 0) {\n-\t\t\tthis.chunks.splice(idx, 1);\n-\t\t\tchunk.removeParent(this);\n-\t\t\treturn true;\n+\t\tif(!this._chunks.has(chunk)) {\n+\t\t\treturn false;\n \t\t}\n-\t\treturn false;\n+\n+\t\tthis._chunks.delete(chunk);\n+\t\tchunk.removeParent(this);\n+\t\treturn true;\n \t}\n \n \tremoveParent(chunk) {\n@@ -208,13 +227,10 @@ class Chunk {\n \t\t// cleanup parents\n \t\tthis.parents.forEach(parentChunk => {\n \t\t\t// remove this chunk from its parents\n-\t\t\tconst idx = parentChunk.chunks.indexOf(this);\n-\t\t\tif(idx >= 0) {\n-\t\t\t\tparentChunk.chunks.splice(idx, 1);\n-\t\t\t}\n+\t\t\tparentChunk._chunks.delete(this);\n \n \t\t\t// cleanup \"sub chunks\"\n-\t\t\tthis.chunks.forEach(chunk => {\n+\t\t\tthis._chunks.forEach(chunk => {\n \t\t\t\t/**\n \t\t\t\t * remove this chunk as \"intermediary\" and connect\n \t\t\t\t * it \"sub chunks\" and parents directly\n@@ -232,7 +248,7 @@ class Chunk {\n \t\t * This can not be done in the above loop\n \t\t * as it is not garuanteed that `this.parents` contains anything.\n \t\t */\n-\t\tthis.chunks.forEach(chunk => {\n+\t\tthis._chunks.forEach(chunk => {\n \t\t\t// remove this as parent of every \"sub chunk\"\n \t\t\tconst idx = chunk.parents.indexOf(this);\n \t\t\tif(idx >= 0) {\n@@ -261,10 +277,7 @@ class Chunk {\n \t}\n \n \treplaceChunk(oldChunk, newChunk) {\n-\t\tconst idx = this.chunks.indexOf(oldChunk);\n-\t\tif(idx >= 0) {\n-\t\t\tthis.chunks.splice(idx, 1);\n-\t\t}\n+\t\tthis._chunks.delete(oldChunk);\n \t\tif(this !== newChunk && newChunk.addParent(this)) {\n \t\t\tthis.addChunk(newChunk);\n \t\t}\n@@ -293,8 +306,8 @@ class Chunk {\n \t\totherChunk.parents.forEach(parentChunk => parentChunk.replaceChunk(otherChunk, this));\n \t\totherChunk.parents.length = 0;\n \n-\t\totherChunk.chunks.forEach(chunk => chunk.replaceParentChunk(otherChunk, this));\n-\t\totherChunk.chunks.length = 0;\n+\t\totherChunk._chunks.forEach(chunk => chunk.replaceParentChunk(otherChunk, this));\n+\t\totherChunk._chunks.clear();\n \n \t\totherChunk.blocks.forEach(b => {\n \t\t\tb.chunks = b.chunks ? b.chunks.map(c => {\n@@ -315,9 +328,8 @@ class Chunk {\n \t\t\t\torigin.reasons.unshift(reason);\n \t\t\t}\n \t\t});\n-\t\tthis.chunks = this.chunks.filter(chunk => {\n-\t\t\treturn chunk !== otherChunk && chunk !== this;\n-\t\t});\n+\t\tthis._chunks.delete(otherChunk);\n+\t\tthis._chunks.delete(this);\n \t\tthis.parents = this.parents.filter(parentChunk => {\n \t\t\treturn parentChunk !== otherChunk && parentChunk !== this;\n \t\t});\n@@ -329,12 +341,12 @@ class Chunk {\n \t\t\tnewChunk.blocks.push(block);\n \t\t\tblock.chunks.push(newChunk);\n \t\t});\n-\t\tthis.chunks.forEach(chunk => {\n-\t\t\tnewChunk.chunks.push(chunk);\n+\t\tthis._chunks.forEach(chunk => {\n+\t\t\tnewChunk.addChunk(chunk);\n \t\t\tchunk.parents.push(newChunk);\n \t\t});\n \t\tthis.parents.forEach(parentChunk => {\n-\t\t\tparentChunk.chunks.push(newChunk);\n+\t\t\tparentChunk.addChunk(newChunk);\n \t\t\tnewChunk.parents.push(parentChunk);\n \t\t});\n \t\tthis.entrypoints.forEach(entrypoint => {\n@@ -413,7 +425,7 @@ class Chunk {\n \t\t\t\tif(chunk.name)\n \t\t\t\t\tchunkNameMap[chunk.id] = chunk.name;\n \t\t\t}\n-\t\t\tchunk.chunks.forEach(addChunk);\n+\t\t\tchunk._chunks.forEach(addChunk);\n \t\t}(this));\n \t\treturn {\n \t\t\thash: chunkHashMap,\n@@ -439,7 +451,7 @@ class Chunk {\n \t\t\t\torigin.reasons.sort();\n \t\t});\n \t\tthis.parents.sort(sortById);\n-\t\tthis.chunks.sort(sortById);\n+\t\tthis._chunks.sort();\n \t}\n \n \ttoString() {\n@@ -448,16 +460,19 @@ class Chunk {\n \n \tcheckConstraints() {\n \t\tconst chunk = this;\n-\t\tchunk.chunks.forEach((child, idx) => {\n-\t\t\tif(chunk.chunks.indexOf(child) !== idx)\n+\t\tconst chunks = Array.from(chunk._chunks);\n+\t\tchunks.forEach((child, idx) => {\n+\t\t\tif(chunks.indexOf(child) !== idx)\n \t\t\t\tthrow new Error(`checkConstraints: duplicate child in chunk ${chunk.debugId} ${child.debugId}`);\n \t\t\tif(child.parents.indexOf(chunk) < 0)\n \t\t\t\tthrow new Error(`checkConstraints: child missing parent ${chunk.debugId} -> ${child.debugId}`);\n \t\t});\n \t\tchunk.parents.forEach((parentChunk, idx) => {\n \t\t\tif(chunk.parents.indexOf(parentChunk) !== idx)\n \t\t\t\tthrow new Error(`checkConstraints: duplicate parent in chunk ${chunk.debugId} ${parentChunk.debugId}`);\n-\t\t\tif(parentChunk.chunks.indexOf(chunk) < 0)\n+\n+\t\t\tconst chunks = Array.from(parentChunk._chunks);\n+\t\t\tif(chunks.indexOf(chunk) < 0)\n \t\t\t\tthrow new Error(`checkConstraints: parent missing child ${parentChunk.debugId} <- ${chunk.debugId}`);\n \t\t});\n \t}\n@@ -466,11 +481,21 @@ class Chunk {\n Object.defineProperty(Chunk.prototype, \"modules\", {\n \tconfigurable: false,\n \tget: util.deprecate(function() {\n-\t\treturn Array.from(this._modules);\n+\t\treturn this._modules.getFrozenArray();\n \t}, \"Chunk.modules is deprecated. Use Chunk.getNumberOfModules/mapModules/forEachModule/containsModule instead.\"),\n \tset: util.deprecate(function(value) {\n \t\tthis.setModules(value);\n \t}, \"Chunk.modules is deprecated. Use Chunk.addModule/removeModule instead.\")\n });\n \n+Object.defineProperty(Chunk.prototype, \"chunks\", {\n+\tconfigurable: false,\n+\tget: util.deprecate(function() {\n+\t\treturn this._chunks.getFrozenArray();\n+\t}, \"Chunk.chunks: Use Chunk.getChunks() instead\"),\n+\tset() {\n+\t\tthrow new Error(\"Readonly. Use Chunk.addChunk/removeChunk/getChunks to access/modify chunks.\");\n+\t}\n+});\n+\n module.exports = Chunk;"
      },
      {
        "sha": "00be1ecf6e7470cbd4c8709150d82651fb168066",
        "filename": "lib/HotModuleReplacementPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FHotModuleReplacementPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FHotModuleReplacementPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FHotModuleReplacementPlugin.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -166,7 +166,7 @@ module.exports = class HotModuleReplacementPlugin {\n \t\t\t\t\t.replace(/\\$require\\$/g, this.requireFn)\n \t\t\t\t\t.replace(/\\$hash\\$/g, JSON.stringify(hash))\n \t\t\t\t\t.replace(/\\$requestTimeout\\$/g, requestTimeout)\n-\t\t\t\t\t.replace(/\\/\\*foreachInstalledChunks\\*\\//g, chunk.chunks.length > 0 ? \"for(var chunkId in installedChunks)\" : `var chunkId = ${JSON.stringify(chunk.id)};`)\n+\t\t\t\t\t.replace(/\\/\\*foreachInstalledChunks\\*\\//g, chunk.getNumberOfChunks() > 0 ? \"for(var chunkId in installedChunks)\" : `var chunkId = ${JSON.stringify(chunk.id)};`)\n \t\t\t\t]);\n \t\t\t});\n "
      },
      {
        "sha": "40717cb65271e32e1ebc7cdacc7d065206000cdf",
        "filename": "lib/JsonpMainTemplatePlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FJsonpMainTemplatePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FJsonpMainTemplatePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FJsonpMainTemplatePlugin.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -13,7 +13,7 @@ class JsonpMainTemplatePlugin {\n \t\t\tvar otherChunksInEntry = chunk.entrypoints.some(function(entrypoint) {\n \t\t\t\treturn entrypoint.chunks.length > 1;\n \t\t\t});\n-\t\t\tvar onDemandChunks = chunk.chunks.length > 0;\n+\t\t\tvar onDemandChunks = chunk.getNumberOfChunks() > 0;\n \t\t\treturn otherChunksInEntry || onDemandChunks;\n \t\t}\n \t\tmainTemplate.plugin(\"local-vars\", function(source, chunk) {\n@@ -130,7 +130,7 @@ class JsonpMainTemplatePlugin {\n \t\t\t]);\n \t\t});\n \t\tmainTemplate.plugin(\"require-extensions\", function(source, chunk) {\n-\t\t\tif(chunk.chunks.length === 0) return source;\n+\t\t\tif(chunk.getNumberOfChunks() === 0) return source;\n \n \t\t\treturn this.asString([\n \t\t\t\tsource,"
      },
      {
        "sha": "c93422c50b1314d0712711b373573265d26e18bb",
        "filename": "lib/MainTemplate.js",
        "status": "modified",
        "additions": 10,
        "deletions": 7,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FMainTemplate.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FMainTemplate.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FMainTemplate.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -99,7 +99,7 @@ module.exports = class MainTemplate extends Template {\n \t\t});\n \t\tthis.plugin(\"require-extensions\", (source, chunk, hash) => {\n \t\t\tconst buf = [];\n-\t\t\tif(chunk.chunks.length > 0) {\n+\t\t\tif(chunk.getNumberOfChunks() > 0) {\n \t\t\t\tbuf.push(\"// This file contains only the entry chunk.\");\n \t\t\t\tbuf.push(\"// The chunk loading function for additional chunks\");\n \t\t\t\tbuf.push(`${this.requireFn}.e = function requireEnsure(chunkId) {`);\n@@ -199,13 +199,16 @@ module.exports = class MainTemplate extends Template {\n \n \tentryPointInChildren(chunk) {\n \t\tconst checkChildren = (chunk, alreadyCheckedChunks) => {\n-\t\t\treturn chunk.chunks.some((child) => {\n-\t\t\t\tif(alreadyCheckedChunks.indexOf(child) >= 0) return;\n-\t\t\t\talreadyCheckedChunks.push(child);\n-\t\t\t\treturn child.hasEntryModule() || checkChildren(child, alreadyCheckedChunks);\n-\t\t\t});\n+\t\t\tfor(const child of chunk.chunksIterable) {\n+\t\t\t\tif(!alreadyCheckedChunks.has(child)) {\n+\t\t\t\t\talreadyCheckedChunks.add(child);\n+\t\t\t\t\tif(child.hasEntryModule() || checkChildren(child, alreadyCheckedChunks)) {\n+\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n \t\t};\n-\t\treturn checkChildren(chunk, []);\n+\t\treturn checkChildren(chunk, new Set()) === true;\n \t}\n \n \tgetPublicPath(options) {"
      },
      {
        "sha": "63f5adf5600344a2071d40cd320cceef2a57d4ec",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -129,6 +129,10 @@ class Module extends DependenciesBlock {\n \t\treturn this._chunks.size;\n \t}\n \n+\tget chunksIterable() {\n+\t\treturn this._chunks;\n+\t}\n+\n \thasEqualsChunks(otherModule) {\n \t\tif(this._chunks.size !== otherModule._chunks.size) return false;\n \t\tthis._chunks.sortWith(sortByDebugId);\n@@ -233,7 +237,7 @@ Object.defineProperty(Module.prototype, \"entry\", {\n Object.defineProperty(Module.prototype, \"chunks\", {\n \tconfigurable: false,\n \tget: util.deprecate(function() {\n-\t\treturn Array.from(this._chunks);\n+\t\treturn this._chunks.getFrozenArray();\n \t}, \"Module.chunks: Use Module.forEachChunk/mapChunks/getNumberOfChunks/isInChunk/addChunk/removeChunk instead\"),\n \tset() {\n \t\tthrow new Error(\"Readonly. Use Module.addChunk/removeChunk to modify chunks.\");"
      },
      {
        "sha": "05b03ce7c62e76b15cb0270c9148411775a3bdbf",
        "filename": "lib/node/NodeMainTemplatePlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Fnode%2FNodeMainTemplatePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Fnode%2FNodeMainTemplatePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fnode%2FNodeMainTemplatePlugin.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -14,7 +14,7 @@ module.exports = class NodeMainTemplatePlugin {\n \tapply(mainTemplate) {\n \t\tconst asyncChunkLoading = this.asyncChunkLoading;\n \t\tmainTemplate.plugin(\"local-vars\", function(source, chunk) {\n-\t\t\tif(chunk.chunks.length > 0) {\n+\t\t\tif(chunk.getNumberOfChunks() > 0) {\n \t\t\t\treturn this.asString([\n \t\t\t\t\tsource,\n \t\t\t\t\t\"\",\n@@ -28,7 +28,7 @@ module.exports = class NodeMainTemplatePlugin {\n \t\t\treturn source;\n \t\t});\n \t\tmainTemplate.plugin(\"require-extensions\", function(source, chunk) {\n-\t\t\tif(chunk.chunks.length > 0) {\n+\t\t\tif(chunk.getNumberOfChunks() > 0) {\n \t\t\t\treturn this.asString([\n \t\t\t\t\tsource,\n \t\t\t\t\t\"\","
      },
      {
        "sha": "710b85ba6bd50e42f74fdd9d9cbac708567d6827",
        "filename": "lib/optimize/CommonsChunkPlugin.js",
        "status": "modified",
        "additions": 1,
        "deletions": 6,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Foptimize%2FCommonsChunkPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Foptimize%2FCommonsChunkPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FCommonsChunkPlugin.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -223,12 +223,7 @@ Take a look at the \"name\"/\"names\" or async/children option.`);\n \t\t}\n \n \t\tif(asyncOrNoSelectedChunk) {\n-\t\t\t// nothing to do here\n-\t\t\tif(!targetChunk.chunks) {\n-\t\t\t\treturn [];\n-\t\t\t}\n-\n-\t\t\treturn targetChunk.chunks.filter((chunk) => {\n+\t\t\treturn targetChunk.getChunks().filter((chunk) => {\n \t\t\t\t// we only are interested in on-demand chunks\n \t\t\t\tif(chunk.isInitial())\n \t\t\t\t\treturn false;"
      },
      {
        "sha": "5e38e017448258b7a610bc2c025b8a6839803708",
        "filename": "lib/util/SortableSet.js",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Futil%2FSortableSet.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Futil%2FSortableSet.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FSortableSet.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -6,6 +6,7 @@ module.exports = class SortableSet extends Set {\n \t\tsuper(initialIterable);\n \t\tthis._sortFn = defaultSort;\n \t\tthis._lastActiveSortFn = null;\n+\t\tthis._frozenArray = null;\n \t}\n \n \t/**\n@@ -14,10 +15,21 @@ module.exports = class SortableSet extends Set {\n \t */\n \tadd(value) {\n \t\tthis._lastActiveSortFn = null;\n+\t\tthis._frozenArray = null;\n \t\tsuper.add(value);\n \t\treturn this;\n \t}\n \n+\tdelete(value) {\n+\t\tthis._frozenArray = null;\n+\t\treturn super.delete(value);\n+\t}\n+\n+\tclear() {\n+\t\tthis._frozenArray = null;\n+\t\treturn super.clear();\n+\t}\n+\n \t/**\n \t * @param {Function} sortFn - function to sort the set\n \t * @returns {void}\n@@ -42,4 +54,14 @@ module.exports = class SortableSet extends Set {\n \tsort() {\n \t\tthis.sortWith(this._sortFn);\n \t}\n+\n+\t/**\n+\t * @returns {any[]} - returns content as frozen array\n+\t */\n+\tgetFrozenArray() {\n+\t\tif(this._frozenArray === null) {\n+\t\t\tthis._frozenArray = Object.freeze(Array.from(this));\n+\t\t}\n+\t\treturn this._frozenArray;\n+\t}\n };"
      },
      {
        "sha": "e48504eac00a53c6f1e7bc26f19e903f64271d47",
        "filename": "lib/webworker/WebWorkerMainTemplatePlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Fwebworker%2FWebWorkerMainTemplatePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/lib%2Fwebworker%2FWebWorkerMainTemplatePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fwebworker%2FWebWorkerMainTemplatePlugin.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -9,7 +9,7 @@ const Template = require(\"../Template\");\n class WebWorkerMainTemplatePlugin {\n \tapply(mainTemplate) {\n \t\tmainTemplate.plugin(\"local-vars\", function(source, chunk) {\n-\t\t\tif(chunk.chunks.length > 0) {\n+\t\t\tif(chunk.getNumberOfChunks() > 0) {\n \t\t\t\treturn this.asString([\n \t\t\t\t\tsource,\n \t\t\t\t\t\"\",\n@@ -48,7 +48,7 @@ class WebWorkerMainTemplatePlugin {\n \t\t\t]);\n \t\t});\n \t\tmainTemplate.plugin(\"bootstrap\", function(source, chunk, hash) {\n-\t\t\tif(chunk.chunks.length > 0) {\n+\t\t\tif(chunk.getNumberOfChunks() > 0) {\n \t\t\t\tconst chunkCallbackName = this.outputOptions.chunkCallbackName || Template.toIdentifier(\"webpackChunk\" + (this.outputOptions.library || \"\"));\n \t\t\t\treturn this.asString([\n \t\t\t\t\tsource,"
      },
      {
        "sha": "13cc6b25a6dcdfeeb15e3375636220afaa222c84",
        "filename": "package.json",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -89,13 +89,13 @@\n     \"schemas/\"\n   ],\n   \"scripts\": {\n-    \"test\": \"mocha test/*.test.js --max-old-space-size=4096 --harmony --check-leaks\",\n+    \"test\": \"mocha test/*.test.js --max-old-space-size=4096 --harmony --trace-deprecation --check-leaks\",\n     \"travis:test\": \"npm run cover:min\",\n     \"travis:lint\": \"npm run lint-files && npm run nsp\",\n     \"travis:benchmark\": \"npm run benchmark\",\n-    \"appveyor:test\": \"node node_modules\\\\mocha\\\\bin\\\\mocha --max-old-space-size=4096 --harmony test/*.test.js\",\n+    \"appveyor:test\": \"node node_modules\\\\mocha\\\\bin\\\\mocha --max-old-space-size=4096 --harmony --trace-deprecation test/*.test.js\",\n     \"appveyor:benchmark\": \"npm run benchmark\",\n-    \"circleci:test\": \"node node_modules/mocha/bin/mocha --max-old-space-size=4096 --harmony test/*.test.js\",\n+    \"circleci:test\": \"node node_modules/mocha/bin/mocha --max-old-space-size=4096 --harmony --trace-deprecation test/*.test.js\",\n     \"circleci:lint\": \"npm run lint-files && npm run nsp\",\n     \"build:examples\": \"cd examples && node buildAll.js\",\n     \"pretest\": \"npm run lint-files\",\n@@ -104,9 +104,9 @@\n     \"fix\": \"npm run lint -- --fix\",\n     \"beautify-lint\": \"beautify-lint \\\"lib/**/*.js\\\" \\\"hot/**/*.js\\\" \\\"bin/**/*.js\\\" \\\"benchmark/*.js\\\" \\\"test/*.js\\\"\",\n     \"nsp\": \"nsp check --output summary\",\n-    \"benchmark\": \"mocha --max-old-space-size=4096 --harmony test/*.benchmark.js -R spec\",\n-    \"cover\": \"node --max-old-space-size=4096 --harmony ./node_modules/istanbul/lib/cli.js cover -x '**/*.runtime.js' node_modules/mocha/bin/_mocha -- test/*.test.js\",\n-    \"cover:min\": \"node --max-old-space-size=4096 --harmony ./node_modules/istanbul/lib/cli.js cover -x '**/*.runtime.js' --report lcovonly node_modules/mocha/bin/_mocha -- test/*.test.js\",\n+    \"benchmark\": \"mocha --max-old-space-size=4096 --harmony --trace-deprecation test/*.benchmark.js -R spec\",\n+    \"cover\": \"node --max-old-space-size=4096 --harmony --trace-deprecation ./node_modules/istanbul/lib/cli.js cover -x '**/*.runtime.js' node_modules/mocha/bin/_mocha -- test/*.test.js\",\n+    \"cover:min\": \"node --max-old-space-size=4096 --harmony --trace-deprecation ./node_modules/istanbul/lib/cli.js cover -x '**/*.runtime.js' --report lcovonly node_modules/mocha/bin/_mocha -- test/*.test.js\",\n     \"publish-patch\": \"npm run lint && npm run beautify-lint && mocha && npm version patch && git push && git push --tags && npm publish\"\n   }\n }"
      },
      {
        "sha": "d83dfbe5b92c6cb30c6f44dd63ef1901f100fe2c",
        "filename": "test/Chunk.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/test%2FChunk.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/test%2FChunk.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FChunk.test.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -128,7 +128,7 @@ describe(\"Chunk\", () => {\n \t\t});\n \t\tdescribe(\"and the chunk does contain this module\", function() {\n \t\t\tbeforeEach(function() {\n-\t\t\t\tChunkInstance.chunks = [chunk];\n+\t\t\t\tChunkInstance._chunks = new Set([chunk]);\n \t\t\t});\n \t\t\tit(\"calls module.removeChunk with itself and returns true\", function() {\n \t\t\t\tChunkInstance.removeChunk(chunk).should.eql(true);"
      },
      {
        "sha": "886e7e8e1b6134b06a8878e1de3cc4d213226563",
        "filename": "test/WebWorkerMainTemplatePlugin.test.js",
        "status": "modified",
        "additions": 43,
        "deletions": 41,
        "changes": 84,
        "blob_url": "https://github.com/webpack/webpack/blob/c7b80cf7798e93f37ac8b550f66df546379aa509/test%2FWebWorkerMainTemplatePlugin.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/c7b80cf7798e93f37ac8b550f66df546379aa509/test%2FWebWorkerMainTemplatePlugin.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FWebWorkerMainTemplatePlugin.test.js?ref=c7b80cf7798e93f37ac8b550f66df546379aa509",
        "patch": "@@ -1,10 +1,24 @@\n+/* globals describe, beforeEach, it */\n \"use strict\";\n \n-const should = require(\"should\");\n+require(\"should\");\n const sinon = require(\"sinon\");\n const WebWorkerMainTemplatePlugin = require(\"../lib/webworker/WebWorkerMainTemplatePlugin\");\n const applyPluginWithOptions = require(\"./helpers/applyPluginWithOptions\");\n \n+const createMockChunk = (ids, chunks) => {\n+\treturn {\n+\t\tids: ids,\n+\t\t_chunks: new Set(chunks),\n+\t\tgetChunks() {\n+\t\t\treturn Array.from(this._chunks);\n+\t\t},\n+\t\tgetNumberOfChunks() {\n+\t\t\treturn this._chunks.size;\n+\t\t}\n+\t};\n+};\n+\n describe(\"WebWorkerMainTemplatePlugin\", function() {\n \tlet env;\n \n@@ -20,17 +34,17 @@ describe(\"WebWorkerMainTemplatePlugin\", function() {\n \t\tbeforeEach(function() {\n \t\t\tenv.eventBindings = applyPluginWithOptions(WebWorkerMainTemplatePlugin);\n \t\t\tenv.handlerContext = {\n-\t\t\t\trequireFn: 'requireFn',\n-\t\t\t\tindent: (value) => typeof value === 'string' ? value : value.join(\"\\n\"),\n+\t\t\t\trequireFn: \"requireFn\",\n+\t\t\t\tindent: (value) => typeof value === \"string\" ? value : value.join(\"\\n\"),\n \t\t\t\tasString: (values) => values.join(\"\\n\"),\n \t\t\t\trenderCurrentHashCode: (value) => value,\n \t\t\t\toutputOptions: {\n-\t\t\t\t\tchunkFilename: 'chunkFilename'\n+\t\t\t\t\tchunkFilename: \"chunkFilename\"\n \t\t\t\t},\n \t\t\t\tapplyPluginsWaterfall: (moduleName, fileName, data) => {\n-\t\t\t\t\treturn `\"${moduleName}${data.hash}${data.hashWithLength()}${data.chunk && data.chunk.id || ''}\"`;\n+\t\t\t\t\treturn `\"${moduleName}${data.hash}${data.hashWithLength()}${data.chunk && data.chunk.id || \"\"}\"`;\n \t\t\t\t},\n-\t\t\t\trenderAddModule: () => 'renderAddModuleSource();',\n+\t\t\t\trenderAddModule: () => \"renderAddModuleSource();\",\n \t\t\t};\n \t\t});\n \n@@ -49,29 +63,23 @@ describe(\"WebWorkerMainTemplatePlugin\", function() {\n \n \t\t\tdescribe(\"when no chunks are provided\", () => {\n \t\t\t\tbeforeEach(() => {\n-\t\t\t\t\tconst chunk = {\n-\t\t\t\t\t\tids: [],\n-\t\t\t\t\t\tchunks: []\n-\t\t\t\t\t};\n+\t\t\t\t\tconst chunk = createMockChunk();\n \t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk);\n \t\t\t\t});\n \n \t\t\t\tit(\"returns the original source\", () => {\n-\t\t\t\t\tenv.source.should.be.exactly(\"moduleSource()\")\n+\t\t\t\t\tenv.source.should.be.exactly(\"moduleSource()\");\n \t\t\t\t});\n \t\t\t});\n \n \t\t\tdescribe(\"when chunks are provided\", () => {\n \t\t\t\tbeforeEach(() => {\n-\t\t\t\t\tconst chunk = {\n-\t\t\t\t\t\tids: [1, 2, 3],\n-\t\t\t\t\t\tchunks: [\n-\t\t\t\t\t\t\t'foo',\n-\t\t\t\t\t\t\t'bar',\n-\t\t\t\t\t\t\t'baz'\n-\t\t\t\t\t\t]\n-\t\t\t\t\t};\n-\t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk, 'abc123');\n+\t\t\t\t\tconst chunk = createMockChunk([1, 2, 3], [\n+\t\t\t\t\t\t\"foo\",\n+\t\t\t\t\t\t\"bar\",\n+\t\t\t\t\t\t\"baz\"\n+\t\t\t\t\t]);\n+\t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk, \"abc123\");\n \t\t\t\t});\n \n \t\t\t\tit(\"returns the original source with installed mapping\", () => {\n@@ -85,7 +93,7 @@ var installedChunks = {\n 2: 1,\n 3: 1\n };\n-`.trim())\n+`.trim());\n \t\t\t\t});\n \t\t\t});\n \t\t});\n@@ -101,8 +109,8 @@ var installedChunks = {\n \n \t\t\tdescribe(\"when called\", () => {\n \t\t\t\tbeforeEach(() => {\n-\t\t\t\t\tconst chunk = {};\n-\t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk, 'abc123');\n+\t\t\t\t\tconst chunk = createMockChunk();\n+\t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk, \"abc123\");\n \t\t\t\t});\n \n \t\t\t\tit(\"creates import scripts call and promise resolve\", () => {\n@@ -114,7 +122,7 @@ importScripts(\"asset-path\" + abc123 + \"\" + abc123 + \"\" + chunkId + \"\");\n }\n resolve();\n });\n-`.trim())\n+`.trim());\n \t\t\t\t});\n \t\t\t});\n \t\t});\n@@ -130,28 +138,22 @@ resolve();\n \n \t\t\tdescribe(\"when no chunks are provided\", () => {\n \t\t\t\tbeforeEach(() => {\n-\t\t\t\t\tconst chunk = {\n-\t\t\t\t\t\tids: [],\n-\t\t\t\t\t\tchunks: []\n-\t\t\t\t\t};\n+\t\t\t\t\tconst chunk = createMockChunk();\n \t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk);\n \t\t\t\t});\n \n \t\t\t\tit(\"returns the original source\", () => {\n-\t\t\t\t\tenv.source.should.be.exactly(\"moduleSource()\")\n+\t\t\t\t\tenv.source.should.be.exactly(\"moduleSource()\");\n \t\t\t\t});\n \t\t\t});\n \n \t\t\tdescribe(\"when chunks are provided\", () => {\n \t\t\t\tbeforeEach(() => {\n-\t\t\t\t\tconst chunk = {\n-\t\t\t\t\t\tids: [1, 2, 3],\n-\t\t\t\t\t\tchunks: [\n-\t\t\t\t\t\t\t'foo',\n-\t\t\t\t\t\t\t'bar',\n-\t\t\t\t\t\t\t'baz'\n-\t\t\t\t\t\t]\n-\t\t\t\t\t};\n+\t\t\t\t\tconst chunk = createMockChunk([1, 2, 3], [\n+\t\t\t\t\t\t\"foo\",\n+\t\t\t\t\t\t\"bar\",\n+\t\t\t\t\t\t\"baz\"\n+\t\t\t\t\t]);\n \t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk);\n \t\t\t\t});\n \n@@ -165,7 +167,7 @@ renderAddModuleSource();\n while(chunkIds.length)\n installedChunks[chunkIds.pop()] = 1;\n };\n-`.trim())\n+`.trim());\n \t\t\t\t});\n \t\t\t});\n \t\t});\n@@ -181,8 +183,8 @@ installedChunks[chunkIds.pop()] = 1;\n \n \t\t\tdescribe(\"when called\", () => {\n \t\t\t\tbeforeEach(() => {\n-\t\t\t\t\tconst chunk = {};\n-\t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk, 'abc123');\n+\t\t\t\t\tconst chunk = createMockChunk();\n+\t\t\t\t\tenv.source = env.eventBinding.handler.call(env.handlerContext, \"moduleSource()\", chunk, \"abc123\");\n \t\t\t\t});\n \n \t\t\t\tit(\"returns the original source with hot update callback\", () => {\n@@ -240,7 +242,7 @@ function hotDownloadManifest(requestTimeout) { // eslint-disable-line no-unused-\n function hotDisposeChunk(chunkId) { //eslint-disable-line no-unused-vars\n \tdelete installedChunks[chunkId];\n }\n-`.trim())\n+`.trim());\n \t\t\t\t});\n \t\t\t});\n \t\t});"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5268",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5268/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5268/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5268/events",
    "html_url": "https://github.com/webpack/webpack/pull/5268",
    "id": 242272127,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTMwMDYzMjA5",
    "number": 5268,
    "title": "Backport performance improvements and devtool fixes to webpack 2",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      },
      {
        "id": 575750469,
        "node_id": "MDU6TGFiZWw1NzU3NTA0Njk=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20non-main",
        "name": "PR: non-main",
        "color": "dbb2f3",
        "default": false,
        "description": ""
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-07-12T06:24:13Z",
    "updated_at": "2017-07-12T06:49:46Z",
    "closed_at": "2017-07-12T06:49:43Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5268",
      "html_url": "https://github.com/webpack/webpack/pull/5268",
      "diff_url": "https://github.com/webpack/webpack/pull/5268.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5268.patch",
      "merged_at": "2017-07-12T06:49:43Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbackport of bugfixs\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nN/A\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nNot everyone can update to webpack 3 yet.\r\nThese user should get the performance improvements and bugfixes made in webpack 3 too.\r\nThis doesn't include all improvements and fixes but hey...\r\nThe PR also includes CI updates from webpack 3.\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5268/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5268/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "d7994514612dc9fe15e08e8acfd1449a581ac34f",
        "filename": ".travis.yml",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/.travis.yml",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/.travis.yml",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/.travis.yml?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -4,6 +4,7 @@ language: node_js\n branches:\n   only:\n     - master\n+    - webpack-2\n \n cache:\n   directories:\n@@ -13,10 +14,10 @@ cache:\n matrix:\n   include:\n     - os: linux\n-      node_js: \"7\"\n+      node_js: \"8\"\n       env: NO_WATCH_TESTS=1 JOB_PART=lint\n     - os: linux\n-      node_js: \"7\"\n+      node_js: \"8\"\n       env: NO_WATCH_TESTS=1 JOB_PART=test\n     - os: linux\n       node_js: \"6\""
      },
      {
        "sha": "063911bfde9fdd8ad5b0ae8e6156ba013a269154",
        "filename": "appveyor.yml",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/appveyor.yml",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/appveyor.yml",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/appveyor.yml?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -4,6 +4,7 @@\n branches:\n   only:\n     - master\n+    - webpack-2\n \n init:\n   - git config --global core.autocrlf input\n@@ -13,17 +14,17 @@ clone_depth: 50\n # what combinations to test\n environment:\n   matrix:\n-    - nodejs_version: 7\n+    - nodejs_version: 8\n       job_part: test\n     - nodejs_version: 6\n       job_part: test\n \n install:\n   - ps: Install-Product node $env:nodejs_version x64\n   - npm install yarn -g\n-  - yarn install\n-  - yarn link || yarn link\n-  - yarn link webpack\n+  - yarn install --frozen-lockfile\n+  - yarn link --frozen-lockfile || yarn link --frozen-lockfile\n+  - yarn link webpack --frozen-lockfile\n \n build: off\n "
      },
      {
        "sha": "cb62471a2b07c128460a82b805a37309ccb3380e",
        "filename": "ci/travis-install.sh",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/ci%2Ftravis-install.sh",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/ci%2Ftravis-install.sh",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/ci%2Ftravis-install.sh?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -1,5 +1,7 @@\n #!/bin/bash\n set -ev\n \n-yarn link || true && yarn link webpack;\n+yarn link --frozen-lockfile || true && yarn link webpack --frozen-lockfile;\n+\n+yarn --frozen-lockfile\n "
      },
      {
        "sha": "10c07fe89a460628fc6b63ce8036a243d191d384",
        "filename": "circle.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/circle.yml",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/circle.yml",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/circle.yml?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -8,7 +8,7 @@ machine:\n \n dependencies:\n   pre:\n-    - case $CIRCLE_NODE_INDEX in 0) NODE_VERSION=4 ;; 1) NODE_VERSION=7 ;; esac; nvm install $NODE_VERSION && nvm alias default $NODE_VERSION\n+    - case $CIRCLE_NODE_INDEX in 0) NODE_VERSION=4 ;; 1) NODE_VERSION=8 ;; esac; nvm install $NODE_VERSION && nvm alias default $NODE_VERSION\n   override:\n     - yarn\n     - yarn link || true && yarn link webpack"
      },
      {
        "sha": "eaa9cc4a247b01d6a9c0adc91997fefe6a62be1f",
        "filename": "input.js",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/7cfd2c490ea96c9676e8de54f2e7b6d1214722da/input.js",
        "raw_url": "https://github.com/webpack/webpack/raw/7cfd2c490ea96c9676e8de54f2e7b6d1214722da/input.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/input.js?ref=7cfd2c490ea96c9676e8de54f2e7b6d1214722da",
        "patch": "@@ -1 +0,0 @@\n-invalid javascript"
      },
      {
        "sha": "31ecfe0584e8d57aab05059725e412335a936e28",
        "filename": "lib/EvalSourceMapDevToolModuleTemplatePlugin.js",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/lib%2FEvalSourceMapDevToolModuleTemplatePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/lib%2FEvalSourceMapDevToolModuleTemplatePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FEvalSourceMapDevToolModuleTemplatePlugin.js?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -10,7 +10,7 @@ const ModuleFilenameHelpers = require(\"./ModuleFilenameHelpers\");\n class EvalSourceMapDevToolModuleTemplatePlugin {\n \tconstructor(compilation, options) {\n \t\tthis.compilation = compilation;\n-\t\tthis.sourceMapComment = options.append || \"//# sourceMappingURL=[url]\";\n+\t\tthis.sourceMapComment = options.append || \"//# sourceURL=[module]\\n//# sourceMappingURL=[url]\";\n \t\tthis.moduleFilenameTemplate = options.moduleFilenameTemplate || \"webpack:///[resource-path]?[hash]\";\n \t\tthis.options = options;\n \t}\n@@ -61,13 +61,14 @@ class EvalSourceMapDevToolModuleTemplatePlugin {\n \t\t\tsourceMap.sourceRoot = options.sourceRoot || \"\";\n \t\t\tsourceMap.file = `${module.id}.js`;\n \n-\t\t\tconst footer = self.sourceMapComment.replace(/\\[url\\]/g, `data:application/json;charset=utf-8;base64,${new Buffer(JSON.stringify(sourceMap), \"utf8\").toString(\"base64\")}`); //eslint-disable-line\n+\t\t\tconst footer = self.sourceMapComment.replace(/\\[url\\]/g, `data:application/json;charset=utf-8;base64,${new Buffer(JSON.stringify(sourceMap), \"utf8\").toString(\"base64\")}`) + //eslint-disable-line\n+\t\t\t\t`\\n//# sourceURL=webpack-internal:///${module.id}\\n`; // workaround for chrome bug\n \t\t\tsource.__EvalSourceMapDevToolData = new RawSource(`eval(${JSON.stringify(content + footer)});`);\n \t\t\treturn source.__EvalSourceMapDevToolData;\n \t\t});\n \t\tmoduleTemplate.plugin(\"hash\", function(hash) {\n \t\t\thash.update(\"eval-source-map\");\n-\t\t\thash.update(\"1\");\n+\t\t\thash.update(\"2\");\n \t\t});\n \t}\n }"
      },
      {
        "sha": "2aec14de0dcf2e16ab2180477d0b05f577f87c27",
        "filename": "lib/SourceMapDevToolPlugin.js",
        "status": "modified",
        "additions": 9,
        "deletions": 4,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/lib%2FSourceMapDevToolPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/lib%2FSourceMapDevToolPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FSourceMapDevToolPlugin.js?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -5,6 +5,7 @@\n \"use strict\";\n \n const path = require(\"path\");\n+const crypto = require(\"crypto\");\n const RequestShortener = require(\"./RequestShortener\");\n const ConcatSource = require(\"webpack-sources\").ConcatSource;\n const RawSource = require(\"webpack-sources\").RawSource;\n@@ -131,6 +132,7 @@ class SourceMapDevToolPlugin {\n \t\t\t\t\tif(currentSourceMappingURLComment !== false && /\\.css($|\\?)/i.test(file)) {\n \t\t\t\t\t\tcurrentSourceMappingURLComment = currentSourceMappingURLComment.replace(/^\\n\\/\\/(.*)$/, \"\\n/*$1*/\");\n \t\t\t\t\t}\n+\t\t\t\t\tconst sourceMapString = JSON.stringify(sourceMap);\n \t\t\t\t\tif(sourceMapFilename) {\n \t\t\t\t\t\tlet filename = file;\n \t\t\t\t\t\tlet query = \"\";\n@@ -139,22 +141,25 @@ class SourceMapDevToolPlugin {\n \t\t\t\t\t\t\tquery = filename.substr(idx);\n \t\t\t\t\t\t\tfilename = filename.substr(0, idx);\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tconst sourceMapFile = compilation.getPath(sourceMapFilename, {\n+\t\t\t\t\t\tlet sourceMapFile = compilation.getPath(sourceMapFilename, {\n \t\t\t\t\t\t\tchunk,\n \t\t\t\t\t\t\tfilename,\n \t\t\t\t\t\t\tquery,\n \t\t\t\t\t\t\tbasename: basename(filename)\n \t\t\t\t\t\t});\n+\t\t\t\t\t\tif(sourceMapFile.indexOf(\"[contenthash]\") !== -1) {\n+\t\t\t\t\t\t\tsourceMapFile = sourceMapFile.replace(/\\[contenthash\\]/g, crypto.createHash(\"md5\").update(sourceMapString).digest(\"hex\"));\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tconst sourceMapUrl = path.relative(path.dirname(file), sourceMapFile).replace(/\\\\/g, \"/\");\n \t\t\t\t\t\tif(currentSourceMappingURLComment !== false) {\n \t\t\t\t\t\t\tasset.__SourceMapDevToolData[file] = compilation.assets[file] = new ConcatSource(new RawSource(source), currentSourceMappingURLComment.replace(/\\[url\\]/g, sourceMapUrl));\n \t\t\t\t\t\t}\n-\t\t\t\t\t\tasset.__SourceMapDevToolData[sourceMapFile] = compilation.assets[sourceMapFile] = new RawSource(JSON.stringify(sourceMap));\n+\t\t\t\t\t\tasset.__SourceMapDevToolData[sourceMapFile] = compilation.assets[sourceMapFile] = new RawSource(sourceMapString);\n \t\t\t\t\t\tchunk.files.push(sourceMapFile);\n \t\t\t\t\t} else {\n \t\t\t\t\t\tasset.__SourceMapDevToolData[file] = compilation.assets[file] = new ConcatSource(new RawSource(source), currentSourceMappingURLComment\n-\t\t\t\t\t\t\t.replace(/\\[map\\]/g, () => JSON.stringify(sourceMap))\n-\t\t\t\t\t\t\t.replace(/\\[url\\]/g, () => `data:application/json;charset=utf-8;base64,${new Buffer(JSON.stringify(sourceMap), \"utf-8\").toString(\"base64\")}`) // eslint-disable-line\n+\t\t\t\t\t\t\t.replace(/\\[map\\]/g, () => sourceMapString)\n+\t\t\t\t\t\t\t.replace(/\\[url\\]/g, () => `data:application/json;charset=utf-8;base64,${new Buffer(sourceMapString, \"utf-8\").toString(\"base64\")}`) // eslint-disable-line\n \t\t\t\t\t\t);\n \t\t\t\t\t}\n \t\t\t\t});"
      },
      {
        "sha": "cfde75880360676476bf5012c9410b612824fc22",
        "filename": "package.json",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -9,7 +9,7 @@\n     \"ajv\": \"^4.7.0\",\n     \"ajv-keywords\": \"^1.1.1\",\n     \"async\": \"^2.1.2\",\n-    \"enhanced-resolve\": \"^3.0.0\",\n+    \"enhanced-resolve\": \"^3.3.0\",\n     \"interpret\": \"^1.0.0\",\n     \"json-loader\": \"^0.5.4\",\n     \"json5\": \"^0.5.1\",\n@@ -23,7 +23,7 @@\n     \"tapable\": \"~0.2.5\",\n     \"uglify-js\": \"^2.8.27\",\n     \"watchpack\": \"^1.3.1\",\n-    \"webpack-sources\": \"^0.2.3\",\n+    \"webpack-sources\": \"^1.0.1\",\n     \"yargs\": \"^6.0.0\"\n   },\n   \"license\": \"MIT\",\n@@ -88,23 +88,23 @@\n     \"schemas/\"\n   ],\n   \"scripts\": {\n-    \"test\": \"mocha test/*.test.js --harmony --check-leaks\",\n+    \"test\": \"mocha test/*.test.js --max_old_space_size=4096 --harmony --check-leaks\",\n     \"travis:test\": \"npm run cover:min\",\n     \"travis:lint\": \"npm run lint-files && npm run nsp\",\n     \"travis:benchmark\": \"npm run benchmark\",\n-    \"appveyor:test\": \"node --max_old_space_size=4096 node_modules\\\\mocha\\\\bin\\\\mocha --harmony test/*.test.js\",\n+    \"appveyor:test\": \"node node_modules\\\\mocha\\\\bin\\\\mocha --max_old_space_size=4096 --harmony test/*.test.js\",\n     \"appveyor:benchmark\": \"npm run benchmark\",\n-    \"circleci:test\": \"node --max_old_space_size=4096 node_modules/mocha/bin/mocha --harmony test/*.test.js\",\n+    \"circleci:test\": \"node node_modules/mocha/bin/mocha --max_old_space_size=4096 --harmony test/*.test.js\",\n     \"circleci:lint\": \"npm run lint-files && npm run nsp\",\n     \"build:examples\": \"cd examples && node buildAll.js\",\n     \"pretest\": \"npm run lint-files\",\n     \"lint-files\": \"npm run lint && npm run beautify-lint\",\n     \"lint\": \"eslint lib bin hot buildin \\\"test/**/webpack.config.js\\\" \\\"test/binCases/**/test.js\\\" \\\"examples/**/webpack.config.js\\\"\",\n     \"beautify-lint\": \"beautify-lint \\\"lib/**/*.js\\\" \\\"hot/**/*.js\\\" \\\"bin/**/*.js\\\" \\\"benchmark/*.js\\\" \\\"test/*.js\\\"\",\n     \"nsp\": \"nsp check --output summary\",\n-    \"benchmark\": \"mocha test/*.benchmark.js --harmony -R spec\",\n-    \"cover\": \"node --harmony ./node_modules/istanbul/lib/cli.js cover -x '**/*.runtime.js' node_modules/mocha/bin/_mocha -- test/*.test.js\",\n-    \"cover:min\": \"node --harmony ./node_modules/.bin/istanbul cover -x '**/*.runtime.js' --report lcovonly node_modules/mocha/bin/_mocha -- test/*.test.js\",\n+    \"benchmark\": \"mocha --max_old_space_size=4096 --harmony test/*.benchmark.js -R spec\",\n+    \"cover\": \"node --max_old_space_size=4096 --harmony ./node_modules/istanbul/lib/cli.js cover -x '**/*.runtime.js' node_modules/mocha/bin/_mocha -- test/*.test.js\",\n+    \"cover:min\": \"node --max_old_space_size=4096 --harmony ./node_modules/.bin/istanbul cover -x '**/*.runtime.js' --report lcovonly node_modules/mocha/bin/_mocha -- test/*.test.js\",\n     \"publish-patch\": \"npm run lint && npm run beautify-lint && mocha && npm version patch && git push && git push --tags && npm publish\"\n   }\n }"
      },
      {
        "sha": "5391e6f1a924ca72bfae6b0927136c3ef49bb41c",
        "filename": "schemas/webpackOptionsSchema.json",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/schemas%2FwebpackOptionsSchema.json",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/schemas%2FwebpackOptionsSchema.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FwebpackOptionsSchema.json?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -459,6 +459,9 @@\n         \"cachePredicate\": {\n           \"instanceof\": \"Function\"\n         },\n+        \"cacheWithContext\": {\n+          \"type\": \"boolean\"\n+        },\n         \"descriptionFiles\": {\n           \"$ref\": \"#/definitions/common.arrayOfStringValues\"\n         },"
      },
      {
        "sha": "455b624c9f2347e735957d5888051251ca527b7e",
        "filename": "test/configCases/source-map/source-map-filename-contenthash/index.js",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/test%2FconfigCases%2Fsource-map%2Fsource-map-filename-contenthash%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/test%2FconfigCases%2Fsource-map%2Fsource-map-filename-contenthash%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsource-map%2Fsource-map-filename-contenthash%2Findex.js?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -0,0 +1,6 @@\n+it(\"should contain contenthash as query parameter and path\", function() {\n+\tvar fs = require(\"fs\");\n+\tvar source = fs.readFileSync(__filename, \"utf-8\");\n+\tvar match = /sourceMappingURL\\s*=.*-([A-Fa-f0-9]{32})\\.map\\?([A-Fa-f0-9]{32})-([A-Fa-f0-9]{32})/.exec(source);\n+\tmatch.length.should.be.eql(4);\n+});"
      },
      {
        "sha": "9671d5a8c90ce469da6ff086d315017521c27a03",
        "filename": "test/configCases/source-map/source-map-filename-contenthash/webpack.config.js",
        "status": "added",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/test%2FconfigCases%2Fsource-map%2Fsource-map-filename-contenthash%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/test%2FconfigCases%2Fsource-map%2Fsource-map-filename-contenthash%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Fsource-map%2Fsource-map-filename-contenthash%2Fwebpack.config.js?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -0,0 +1,16 @@\n+var webpack = require(\"../../../../\");\n+module.exports = {\n+\tnode: {\n+\t\t__dirname: false,\n+\t\t__filename: false\n+\t},\n+\tdevtool: \"source-map\",\n+\toutput: {\n+\t\tsourceMapFilename: \"[file]-[contenthash].map?[contenthash]-[contenthash]\",\n+\t},\n+\tplugins: [\n+\t\tnew webpack.optimize.UglifyJsPlugin({\n+\t\t\tsourceMap: true\n+\t\t})\n+\t]\n+};"
      },
      {
        "sha": "4df75e9d39fa7a432a5438bd38c2e33f8b3773d5",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 10,
        "deletions": 10,
        "changes": 20,
        "blob_url": "https://github.com/webpack/webpack/blob/a333f36e724534d7d957089b06048d921a0d25ab/yarn.lock",
        "raw_url": "https://github.com/webpack/webpack/raw/a333f36e724534d7d957089b06048d921a0d25ab/yarn.lock",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/yarn.lock?ref=a333f36e724534d7d957089b06048d921a0d25ab",
        "patch": "@@ -1086,9 +1086,9 @@ encoding@^0.1.11:\n   dependencies:\n     iconv-lite \"~0.4.13\"\n \n-enhanced-resolve@^3.0.0:\n-  version \"3.1.0\"\n-  resolved \"https://registry.yarnpkg.com/enhanced-resolve/-/enhanced-resolve-3.1.0.tgz#9f4b626f577245edcf4b2ad83d86e17f4f421dec\"\n+enhanced-resolve@^3.3.0:\n+  version \"3.3.0\"\n+  resolved \"https://registry.yarnpkg.com/enhanced-resolve/-/enhanced-resolve-3.3.0.tgz#950964ecc7f0332a42321b673b38dc8ff15535b3\"\n   dependencies:\n     graceful-fs \"^4.1.2\"\n     memory-fs \"^0.4.0\"\n@@ -3689,9 +3689,9 @@ source-list-map@^0.1.4, source-list-map@~0.1.7:\n   version \"0.1.8\"\n   resolved \"https://registry.yarnpkg.com/source-list-map/-/source-list-map-0.1.8.tgz#c550b2ab5427f6b3f21f5afead88c4f5587b2106\"\n \n-source-list-map@^1.1.1:\n-  version \"1.1.2\"\n-  resolved \"https://registry.yarnpkg.com/source-list-map/-/source-list-map-1.1.2.tgz#9889019d1024cce55cdc069498337ef6186a11a1\"\n+source-list-map@^2.0.0:\n+  version \"2.0.0\"\n+  resolved \"https://registry.yarnpkg.com/source-list-map/-/source-list-map-2.0.0.tgz#aaa47403f7b245a92fbc97ea08f250d6087ed085\"\n \n source-map@0.4.x, source-map@^0.4.4:\n   version \"0.4.4\"\n@@ -4158,11 +4158,11 @@ webpack-sources@^0.1.0:\n     source-list-map \"~0.1.7\"\n     source-map \"~0.5.3\"\n \n-webpack-sources@^0.2.3:\n-  version \"0.2.3\"\n-  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-0.2.3.tgz#17c62bfaf13c707f9d02c479e0dcdde8380697fb\"\n+webpack-sources@^1.0.1:\n+  version \"1.0.1\"\n+  resolved \"https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-1.0.1.tgz#c7356436a4d13123be2e2426a05d1dad9cbe65cf\"\n   dependencies:\n-    source-list-map \"^1.1.1\"\n+    source-list-map \"^2.0.0\"\n     source-map \"~0.5.3\"\n \n whatwg-fetch@>=0.10.0:"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/5502",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/5502/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/5502/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/5502/events",
    "html_url": "https://github.com/webpack/webpack/pull/5502",
    "id": 249648096,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTM1MzQ0NjA4",
    "number": 5502,
    "title": "Limit the number of parallel processed modules",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 572817354,
        "node_id": "MDU6TGFiZWw1NzI4MTczNTQ=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed",
        "name": "PR: unreviewed",
        "color": "fbca04",
        "default": false,
        "description": null
      },
      {
        "id": 572838417,
        "node_id": "MDU6TGFiZWw1NzI4Mzg0MTc=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20tests-needed",
        "name": "PR: tests-needed",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
      "url": "https://api.github.com/repos/webpack/webpack/milestones/11",
      "html_url": "https://github.com/webpack/webpack/milestone/11",
      "labels_url": "https://api.github.com/repos/webpack/webpack/milestones/11/labels",
      "id": 2154159,
      "node_id": "MDk6TWlsZXN0b25lMjE1NDE1OQ==",
      "number": 11,
      "title": "webpack 3",
      "description": "",
      "creator": {
        "login": "sokra",
        "id": 1365881,
        "node_id": "MDQ6VXNlcjEzNjU4ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sokra",
        "html_url": "https://github.com/sokra",
        "followers_url": "https://api.github.com/users/sokra/followers",
        "following_url": "https://api.github.com/users/sokra/following{/other_user}",
        "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
        "organizations_url": "https://api.github.com/users/sokra/orgs",
        "repos_url": "https://api.github.com/users/sokra/repos",
        "events_url": "https://api.github.com/users/sokra/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sokra/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 47,
      "state": "closed",
      "created_at": "2016-11-23T16:31:52Z",
      "updated_at": "2021-02-27T14:22:35Z",
      "due_on": null,
      "closed_at": "2020-02-25T13:18:34Z"
    },
    "comments": 1,
    "created_at": "2017-08-11T14:12:44Z",
    "updated_at": "2017-08-11T14:56:43Z",
    "closed_at": "2017-08-11T14:56:41Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/5502",
      "html_url": "https://github.com/webpack/webpack/pull/5502",
      "diff_url": "https://github.com/webpack/webpack/pull/5502.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/5502.patch",
      "merged_at": "2017-08-11T14:56:41Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nfeature, performance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nno\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nTODO\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nLimit the number of parallel processed modules\r\nfixes #3164\r\nfixes #3166\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/5502/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/5502/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "0873eb254c2e27e27272729d89ddd54dd0ee5696",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 158,
        "deletions": 141,
        "changes": 299,
        "blob_url": "https://github.com/webpack/webpack/blob/930c019bef476078c574cf1e8d3ff4780a9a8f53/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/930c019bef476078c574cf1e8d3ff4780a9a8f53/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=930c019bef476078c574cf1e8d3ff4780a9a8f53",
        "patch": "@@ -22,6 +22,7 @@ const Dependency = require(\"./Dependency\");\n const ChunkRenderError = require(\"./ChunkRenderError\");\n const CachedSource = require(\"webpack-sources\").CachedSource;\n const Stats = require(\"./Stats\");\n+const Semaphore = require(\"./util/Semaphore\");\n \n function byId(a, b) {\n \tif(a.id < b.id) return -1;\n@@ -62,6 +63,8 @@ class Compilation extends Tapable {\n \t\tthis.hotUpdateChunkTemplate = new HotUpdateChunkTemplate(this.outputOptions);\n \t\tthis.moduleTemplate = new ModuleTemplate(this.outputOptions);\n \n+\t\tthis.semaphore = new Semaphore(options.parallelism || 100);\n+\n \t\tthis.entries = [];\n \t\tthis.preparedChunks = [];\n \t\tthis.entrypoints = {};\n@@ -229,120 +232,128 @@ class Compilation extends Tapable {\n \t\t\t\tcallback();\n \t\t\t};\n \n-\t\t\tconst factory = item[0];\n-\t\t\tfactory.create({\n-\t\t\t\tcontextInfo: {\n-\t\t\t\t\tissuer: module.nameForCondition && module.nameForCondition(),\n-\t\t\t\t\tcompiler: _this.compiler.name\n-\t\t\t\t},\n-\t\t\t\tcontext: module.context,\n-\t\t\t\tdependencies: dependencies\n-\t\t\t}, function factoryCallback(err, dependentModule) {\n-\t\t\t\tlet afterFactory;\n-\n-\t\t\t\tfunction isOptional() {\n-\t\t\t\t\treturn dependencies.filter(d => !d.optional).length === 0;\n-\t\t\t\t}\n+\t\t\t_this.semaphore.acquire(() => {\n+\t\t\t\tconst factory = item[0];\n+\t\t\t\tfactory.create({\n+\t\t\t\t\tcontextInfo: {\n+\t\t\t\t\t\tissuer: module.nameForCondition && module.nameForCondition(),\n+\t\t\t\t\t\tcompiler: _this.compiler.name\n+\t\t\t\t\t},\n+\t\t\t\t\tcontext: module.context,\n+\t\t\t\t\tdependencies: dependencies\n+\t\t\t\t}, function factoryCallback(err, dependentModule) {\n+\t\t\t\t\tlet afterFactory;\n+\n+\t\t\t\t\tfunction isOptional() {\n+\t\t\t\t\t\treturn dependencies.filter(d => !d.optional).length === 0;\n+\t\t\t\t\t}\n \n-\t\t\t\tfunction errorOrWarningAndCallback(err) {\n-\t\t\t\t\tif(isOptional()) {\n-\t\t\t\t\t\treturn warningAndCallback(err);\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\treturn errorAndCallback(err);\n+\t\t\t\t\tfunction errorOrWarningAndCallback(err) {\n+\t\t\t\t\t\tif(isOptional()) {\n+\t\t\t\t\t\t\treturn warningAndCallback(err);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\treturn errorAndCallback(err);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n \n-\t\t\t\tfunction iterationDependencies(depend) {\n-\t\t\t\t\tfor(let index = 0; index < depend.length; index++) {\n-\t\t\t\t\t\tconst dep = depend[index];\n-\t\t\t\t\t\tdep.module = dependentModule;\n-\t\t\t\t\t\tdependentModule.addReason(module, dep);\n+\t\t\t\t\tfunction iterationDependencies(depend) {\n+\t\t\t\t\t\tfor(let index = 0; index < depend.length; index++) {\n+\t\t\t\t\t\t\tconst dep = depend[index];\n+\t\t\t\t\t\t\tdep.module = dependentModule;\n+\t\t\t\t\t\t\tdependentModule.addReason(module, dep);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n \n-\t\t\t\tif(err) {\n-\t\t\t\t\treturn errorOrWarningAndCallback(new ModuleNotFoundError(module, err, dependencies));\n-\t\t\t\t}\n-\t\t\t\tif(!dependentModule) {\n-\t\t\t\t\treturn process.nextTick(callback);\n-\t\t\t\t}\n-\t\t\t\tif(_this.profile) {\n-\t\t\t\t\tif(!dependentModule.profile) {\n-\t\t\t\t\t\tdependentModule.profile = {};\n+\t\t\t\t\tif(err) {\n+\t\t\t\t\t\t_this.semaphore.release();\n+\t\t\t\t\t\treturn errorOrWarningAndCallback(new ModuleNotFoundError(module, err, dependencies));\n+\t\t\t\t\t}\n+\t\t\t\t\tif(!dependentModule) {\n+\t\t\t\t\t\t_this.semaphore.release();\n+\t\t\t\t\t\treturn process.nextTick(callback);\n+\t\t\t\t\t}\n+\t\t\t\t\tif(_this.profile) {\n+\t\t\t\t\t\tif(!dependentModule.profile) {\n+\t\t\t\t\t\t\tdependentModule.profile = {};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tafterFactory = Date.now();\n+\t\t\t\t\t\tdependentModule.profile.factory = afterFactory - start;\n \t\t\t\t\t}\n-\t\t\t\t\tafterFactory = Date.now();\n-\t\t\t\t\tdependentModule.profile.factory = afterFactory - start;\n-\t\t\t\t}\n \n-\t\t\t\tdependentModule.issuer = module;\n-\t\t\t\tconst newModule = _this.addModule(dependentModule, cacheGroup);\n+\t\t\t\t\tdependentModule.issuer = module;\n+\t\t\t\t\tconst newModule = _this.addModule(dependentModule, cacheGroup);\n \n-\t\t\t\tif(!newModule) { // from cache\n-\t\t\t\t\tdependentModule = _this.getModule(dependentModule);\n+\t\t\t\t\tif(!newModule) { // from cache\n+\t\t\t\t\t\tdependentModule = _this.getModule(dependentModule);\n \n-\t\t\t\t\tif(dependentModule.optional) {\n-\t\t\t\t\t\tdependentModule.optional = isOptional();\n-\t\t\t\t\t}\n+\t\t\t\t\t\tif(dependentModule.optional) {\n+\t\t\t\t\t\t\tdependentModule.optional = isOptional();\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\titerationDependencies(dependencies);\n+\t\t\t\t\t\titerationDependencies(dependencies);\n \n-\t\t\t\t\tif(_this.profile) {\n-\t\t\t\t\t\tif(!module.profile) {\n-\t\t\t\t\t\t\tmodule.profile = {};\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tconst time = Date.now() - start;\n-\t\t\t\t\t\tif(!module.profile.dependencies || time > module.profile.dependencies) {\n-\t\t\t\t\t\t\tmodule.profile.dependencies = time;\n+\t\t\t\t\t\tif(_this.profile) {\n+\t\t\t\t\t\t\tif(!module.profile) {\n+\t\t\t\t\t\t\t\tmodule.profile = {};\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tconst time = Date.now() - start;\n+\t\t\t\t\t\t\tif(!module.profile.dependencies || time > module.profile.dependencies) {\n+\t\t\t\t\t\t\t\tmodule.profile.dependencies = time;\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t_this.semaphore.release();\n+\t\t\t\t\t\treturn process.nextTick(callback);\n \t\t\t\t\t}\n \n-\t\t\t\t\treturn process.nextTick(callback);\n-\t\t\t\t}\n+\t\t\t\t\tif(newModule instanceof Module) {\n+\t\t\t\t\t\tif(_this.profile) {\n+\t\t\t\t\t\t\tnewModule.profile = dependentModule.profile;\n+\t\t\t\t\t\t}\n \n-\t\t\t\tif(newModule instanceof Module) {\n-\t\t\t\t\tif(_this.profile) {\n-\t\t\t\t\t\tnewModule.profile = dependentModule.profile;\n-\t\t\t\t\t}\n+\t\t\t\t\t\tnewModule.optional = isOptional();\n+\t\t\t\t\t\tnewModule.issuer = dependentModule.issuer;\n+\t\t\t\t\t\tdependentModule = newModule;\n \n-\t\t\t\t\tnewModule.optional = isOptional();\n-\t\t\t\t\tnewModule.issuer = dependentModule.issuer;\n-\t\t\t\t\tdependentModule = newModule;\n+\t\t\t\t\t\titerationDependencies(dependencies);\n \n-\t\t\t\t\titerationDependencies(dependencies);\n+\t\t\t\t\t\tif(_this.profile) {\n+\t\t\t\t\t\t\tconst afterBuilding = Date.now();\n+\t\t\t\t\t\t\tmodule.profile.building = afterBuilding - afterFactory;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\tif(_this.profile) {\n-\t\t\t\t\t\tconst afterBuilding = Date.now();\n-\t\t\t\t\t\tmodule.profile.building = afterBuilding - afterFactory;\n+\t\t\t\t\t\t_this.semaphore.release();\n+\t\t\t\t\t\tif(recursive) {\n+\t\t\t\t\t\t\treturn process.nextTick(_this.processModuleDependencies.bind(_this, dependentModule, callback));\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\treturn process.nextTick(callback);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \n-\t\t\t\t\tif(recursive) {\n-\t\t\t\t\t\treturn process.nextTick(_this.processModuleDependencies.bind(_this, dependentModule, callback));\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\treturn process.nextTick(callback);\n-\t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\t\t\tdependentModule.optional = isOptional();\n \n-\t\t\t\tdependentModule.optional = isOptional();\n+\t\t\t\t\titerationDependencies(dependencies);\n \n-\t\t\t\titerationDependencies(dependencies);\n+\t\t\t\t\t_this.buildModule(dependentModule, isOptional(), module, dependencies, err => {\n+\t\t\t\t\t\tif(err) {\n+\t\t\t\t\t\t\t_this.semaphore.release();\n+\t\t\t\t\t\t\treturn errorOrWarningAndCallback(err);\n+\t\t\t\t\t\t}\n \n-\t\t\t\t_this.buildModule(dependentModule, isOptional(), module, dependencies, err => {\n-\t\t\t\t\tif(err) {\n-\t\t\t\t\t\treturn errorOrWarningAndCallback(err);\n-\t\t\t\t\t}\n+\t\t\t\t\t\tif(_this.profile) {\n+\t\t\t\t\t\t\tconst afterBuilding = Date.now();\n+\t\t\t\t\t\t\tdependentModule.profile.building = afterBuilding - afterFactory;\n+\t\t\t\t\t\t}\n \n-\t\t\t\t\tif(_this.profile) {\n-\t\t\t\t\t\tconst afterBuilding = Date.now();\n-\t\t\t\t\t\tdependentModule.profile.building = afterBuilding - afterFactory;\n-\t\t\t\t\t}\n+\t\t\t\t\t\t_this.semaphore.release();\n+\t\t\t\t\t\tif(recursive) {\n+\t\t\t\t\t\t\t_this.processModuleDependencies(dependentModule, callback);\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\treturn callback();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n \n-\t\t\t\t\tif(recursive) {\n-\t\t\t\t\t\t_this.processModuleDependencies(dependentModule, callback);\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\treturn callback();\n-\t\t\t\t\t}\n \t\t\t\t});\n-\n \t\t\t});\n \t\t}, function finalCallbackAddModuleDependencies(err) {\n \t\t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n@@ -379,79 +390,85 @@ class Compilation extends Tapable {\n \t\t\tthrow new Error(`No dependency factory available for this dependency type: ${dependency.constructor.name}`);\n \t\t}\n \n-\t\tmoduleFactory.create({\n-\t\t\tcontextInfo: {\n-\t\t\t\tissuer: \"\",\n-\t\t\t\tcompiler: this.compiler.name\n-\t\t\t},\n-\t\t\tcontext: context,\n-\t\t\tdependencies: [dependency]\n-\t\t}, (err, module) => {\n-\t\t\tif(err) {\n-\t\t\t\treturn errorAndCallback(new EntryModuleNotFoundError(err));\n-\t\t\t}\n-\n-\t\t\tlet afterFactory;\n-\n-\t\t\tif(this.profile) {\n-\t\t\t\tif(!module.profile) {\n-\t\t\t\t\tmodule.profile = {};\n+\t\tthis.semaphore.acquire(() => {\n+\t\t\tmoduleFactory.create({\n+\t\t\t\tcontextInfo: {\n+\t\t\t\t\tissuer: \"\",\n+\t\t\t\t\tcompiler: this.compiler.name\n+\t\t\t\t},\n+\t\t\t\tcontext: context,\n+\t\t\t\tdependencies: [dependency]\n+\t\t\t}, (err, module) => {\n+\t\t\t\tif(err) {\n+\t\t\t\t\tthis.semaphore.release();\n+\t\t\t\t\treturn errorAndCallback(new EntryModuleNotFoundError(err));\n \t\t\t\t}\n-\t\t\t\tafterFactory = Date.now();\n-\t\t\t\tmodule.profile.factory = afterFactory - start;\n-\t\t\t}\n \n-\t\t\tconst result = this.addModule(module);\n-\t\t\tif(!result) {\n-\t\t\t\tmodule = this.getModule(module);\n-\n-\t\t\t\tonModule(module);\n+\t\t\t\tlet afterFactory;\n \n \t\t\t\tif(this.profile) {\n-\t\t\t\t\tconst afterBuilding = Date.now();\n-\t\t\t\t\tmodule.profile.building = afterBuilding - afterFactory;\n+\t\t\t\t\tif(!module.profile) {\n+\t\t\t\t\t\tmodule.profile = {};\n+\t\t\t\t\t}\n+\t\t\t\t\tafterFactory = Date.now();\n+\t\t\t\t\tmodule.profile.factory = afterFactory - start;\n \t\t\t\t}\n \n-\t\t\t\treturn callback(null, module);\n-\t\t\t}\n+\t\t\t\tconst result = this.addModule(module);\n+\t\t\t\tif(!result) {\n+\t\t\t\t\tmodule = this.getModule(module);\n \n-\t\t\tif(result instanceof Module) {\n-\t\t\t\tif(this.profile) {\n-\t\t\t\t\tresult.profile = module.profile;\n-\t\t\t\t}\n+\t\t\t\t\tonModule(module);\n \n-\t\t\t\tmodule = result;\n+\t\t\t\t\tif(this.profile) {\n+\t\t\t\t\t\tconst afterBuilding = Date.now();\n+\t\t\t\t\t\tmodule.profile.building = afterBuilding - afterFactory;\n+\t\t\t\t\t}\n \n-\t\t\t\tonModule(module);\n+\t\t\t\t\tthis.semaphore.release();\n+\t\t\t\t\treturn callback(null, module);\n+\t\t\t\t}\n \n-\t\t\t\tmoduleReady.call(this);\n-\t\t\t\treturn;\n-\t\t\t}\n+\t\t\t\tif(result instanceof Module) {\n+\t\t\t\t\tif(this.profile) {\n+\t\t\t\t\t\tresult.profile = module.profile;\n+\t\t\t\t\t}\n \n-\t\t\tonModule(module);\n+\t\t\t\t\tmodule = result;\n \n-\t\t\tthis.buildModule(module, false, null, null, (err) => {\n-\t\t\t\tif(err) {\n-\t\t\t\t\treturn errorAndCallback(err);\n-\t\t\t\t}\n+\t\t\t\t\tonModule(module);\n \n-\t\t\t\tif(this.profile) {\n-\t\t\t\t\tconst afterBuilding = Date.now();\n-\t\t\t\t\tmodule.profile.building = afterBuilding - afterFactory;\n+\t\t\t\t\tmoduleReady.call(this);\n+\t\t\t\t\treturn;\n \t\t\t\t}\n \n-\t\t\t\tmoduleReady.call(this);\n-\t\t\t});\n+\t\t\t\tonModule(module);\n \n-\t\t\tfunction moduleReady() {\n-\t\t\t\tthis.processModuleDependencies(module, err => {\n+\t\t\t\tthis.buildModule(module, false, null, null, (err) => {\n \t\t\t\t\tif(err) {\n-\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\tthis.semaphore.release();\n+\t\t\t\t\t\treturn errorAndCallback(err);\n \t\t\t\t\t}\n \n-\t\t\t\t\treturn callback(null, module);\n+\t\t\t\t\tif(this.profile) {\n+\t\t\t\t\t\tconst afterBuilding = Date.now();\n+\t\t\t\t\t\tmodule.profile.building = afterBuilding - afterFactory;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tmoduleReady.call(this);\n \t\t\t\t});\n-\t\t\t}\n+\n+\t\t\t\tfunction moduleReady() {\n+\t\t\t\t\tthis.semaphore.release();\n+\t\t\t\t\tthis.processModuleDependencies(module, err => {\n+\t\t\t\t\t\tif(err) {\n+\t\t\t\t\t\t\treturn callback(err);\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\treturn callback(null, module);\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t});\n \t\t});\n \t}\n "
      },
      {
        "sha": "c8cab0a451603419e0997bde19ca7b7aedb418f7",
        "filename": "lib/util/Semaphore.js",
        "status": "added",
        "additions": 32,
        "deletions": 0,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/930c019bef476078c574cf1e8d3ff4780a9a8f53/lib%2Futil%2FSemaphore.js",
        "raw_url": "https://github.com/webpack/webpack/raw/930c019bef476078c574cf1e8d3ff4780a9a8f53/lib%2Futil%2FSemaphore.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2FSemaphore.js?ref=930c019bef476078c574cf1e8d3ff4780a9a8f53",
        "patch": "@@ -0,0 +1,32 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Tobias Koppers @sokra\n+*/\n+\"use strict\";\n+\n+class Semaphore {\n+\tconstructor(available) {\n+\t\tthis.available = available;\n+\t\tthis.waiters = [];\n+\t}\n+\n+\tacquire(callback) {\n+\t\tif(this.available > 0) {\n+\t\t\tthis.available--;\n+\t\t\tcallback();\n+\t\t} else {\n+\t\t\tthis.waiters.push(callback);\n+\t\t}\n+\t}\n+\n+\trelease() {\n+\t\tif(this.waiters.length > 0) {\n+\t\t\tconst callback = this.waiters.pop();\n+\t\t\tprocess.nextTick(callback);\n+\t\t} else {\n+\t\t\tthis.available++;\n+\t\t}\n+\t}\n+}\n+\n+module.exports = Semaphore;"
      },
      {
        "sha": "ada46dd6ffbbb9e55bbbe1fecb9c2fc6ea4391a8",
        "filename": "schemas/webpackOptionsSchema.json",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/930c019bef476078c574cf1e8d3ff4780a9a8f53/schemas%2FwebpackOptionsSchema.json",
        "raw_url": "https://github.com/webpack/webpack/raw/930c019bef476078c574cf1e8d3ff4780a9a8f53/schemas%2FwebpackOptionsSchema.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FwebpackOptionsSchema.json?ref=930c019bef476078c574cf1e8d3ff4780a9a8f53",
        "patch": "@@ -900,6 +900,11 @@\n     \"output\": {\n       \"$ref\": \"#/definitions/output\"\n     },\n+    \"parallelism\": {\n+      \"description\": \"The number of parallel processed modules in the compilation.\",\n+      \"minimum\": 1,\n+      \"type\": \"number\"\n+    },\n     \"performance\": {\n       \"description\": \"Configuration for web performance recommendations.\",\n       \"anyOf\": ["
      },
      {
        "sha": "0c65c1fcddb31cfe63b6bf10cc8629a9f56ba879",
        "filename": "test/Validation.test.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/930c019bef476078c574cf1e8d3ff4780a9a8f53/test%2FValidation.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/930c019bef476078c574cf1e8d3ff4780a9a8f53/test%2FValidation.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FValidation.test.js?ref=930c019bef476078c574cf1e8d3ff4780a9a8f53",
        "patch": "@@ -146,8 +146,8 @@ describe(\"Validation\", () => {\n \t\tmessage: [\n \t\t\t\" - configuration has an unknown property 'postcss'. These properties are valid:\",\n \t\t\t\"   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry, externals?, \" +\n-\t\t\t\"loader?, module?, name?, node?, output?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, \" +\n-\t\t\t\"recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\",\n+\t\t\t\"loader?, module?, name?, node?, output?, parallelism?, performance?, plugins?, profile?, recordsInputPath?, \" +\n+\t\t\t\"recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\",\n \t\t\t\"   For typos: please correct them.\",\n \t\t\t\"   For loader options: webpack 2 no longer allows custom properties in configuration.\",\n \t\t\t\"     Loaders should be updated to allow passing options via loader options in module.rules.\","
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/4402",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/4402/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/4402/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/4402/events",
    "html_url": "https://github.com/webpack/webpack/pull/4402",
    "id": 210989716,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTA4NDc0NTQ5",
    "number": 4402,
    "title": "Removes excess commas from performance hint output",
    "user": {
      "login": "ornj",
      "id": 199645,
      "node_id": "MDQ6VXNlcjE5OTY0NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/199645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ornj",
      "html_url": "https://github.com/ornj",
      "followers_url": "https://api.github.com/users/ornj/followers",
      "following_url": "https://api.github.com/users/ornj/following{/other_user}",
      "gists_url": "https://api.github.com/users/ornj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ornj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ornj/subscriptions",
      "organizations_url": "https://api.github.com/users/ornj/orgs",
      "repos_url": "https://api.github.com/users/ornj/repos",
      "events_url": "https://api.github.com/users/ornj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ornj/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2017-03-01T06:17:28Z",
    "updated_at": "2017-03-01T20:08:20Z",
    "closed_at": "2017-03-01T20:08:14Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/4402",
      "html_url": "https://github.com/webpack/webpack/pull/4402",
      "diff_url": "https://github.com/webpack/webpack/pull/4402.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/4402.patch",
      "merged_at": "2017-03-01T20:08:14Z"
    },
    "body": "**What kind of change does this PR introduce?**\r\nBugfix\r\n\r\n**Did you add tests for your changes?**\r\nYes\r\n\r\n**Summary**\r\nJoining Arrays of strings without providing separator defaults to \",\". This looks odd in the console output when being warned about multiple oversized entry points.\r\n\r\nThis PR fixes #4324 and includes a test case more or less matching the description in that issue.\r\n\r\n**Does this PR introduce a breaking change?**\r\nNo",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/4402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/4402/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "c16a61f29753284aed65e65effbf345b00f4a436",
        "filename": "lib/performance/EntrypointsOverSizeLimitWarning.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/b36a8b63519d0b0657f46ba955e432509dc3fd18/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b36a8b63519d0b0657f46ba955e432509dc3fd18/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js?ref=b36a8b63519d0b0657f46ba955e432509dc3fd18",
        "patch": "@@ -15,10 +15,10 @@ module.exports = class EntrypointsOverSizeLimitWarning extends Error {\n \t\t} (${\n \t\t\tSizeFormatHelpers.formatSize(entrypoint.size)\n \t\t})\\n${\n-\t\t\tentrypoint.files.map(asset => `      ${asset}\\n`).join()\n-\t\t}`).join();\n+\t\t\tentrypoint.files.map(asset => `      ${asset}`).join(\"\\n\")\n+\t\t}`).join(\"\");\n \t\tthis.message = `entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (${SizeFormatHelpers.formatSize(entrypointLimit)}). This can impact web performance.\n-Entrypoints:${entrypointList}`;\n+Entrypoints:${entrypointList}\\n`;\n \t\tError.captureStackTrace(this, this.constructor);\n \t}\n };"
      },
      {
        "sha": "1ea440be75aefb8600125b4dfd872f119fa85eba",
        "filename": "test/statsCases/performance-oversize-limit-error/a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fa.js?ref=b36a8b63519d0b0657f46ba955e432509dc3fd18"
      },
      {
        "sha": "92f30846f77618d46fe509b742b2dc2a0af54c56",
        "filename": "test/statsCases/performance-oversize-limit-error/expected.txt",
        "status": "added",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fexpected.txt?ref=b36a8b63519d0b0657f46ba955e432509dc3fd18",
        "patch": "@@ -0,0 +1,30 @@\n+Time: <CLR=BOLD>X</CLR>ms\n+  <CLR=BOLD>Asset</CLR>    <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22>       <CLR=BOLD>Chunk Names</CLR>\n+ <CLR=33,BOLD>sec.js</CLR>  <CLR=33,BOLD>303 kB</CLR>       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  sec\n+<CLR=33,BOLD>main.js</CLR>  <CLR=33,BOLD>303 kB</CLR>       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n+Entrypoint <CLR=BOLD>main</CLR> <CLR=33,BOLD>[big]</CLR> = <CLR=32,BOLD>main.js</CLR>\n+Entrypoint <CLR=BOLD>sec</CLR> <CLR=33,BOLD>[big]</CLR> = <CLR=32,BOLD>sec.js</CLR>\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>sec.js</CLR> (sec) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-oversize-limit-error/a.js</CLR> 300 kB {<CLR=33,BOLD>0</CLR>} {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/performance-oversize-limit-error/index2.js</CLR> 16 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-oversize-limit-error/a.js</CLR> 300 kB {<CLR=33,BOLD>0</CLR>} {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/performance-oversize-limit-error/index.js</CLR> 16 bytes {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+\n+<CLR=31,BOLD>ERROR in asset size limit: The following asset(s) exceed the recommended size limit (250 kB).\n+This can impact web performance.\n+Assets: \n+  sec.js (303 kB)\n+  main.js (303 kB)</CLR>\n+\n+<CLR=31,BOLD>ERROR in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (250 kB). This can impact web performance.\n+Entrypoints:\n+  main (303 kB)\n+      main.js\n+  sec (303 kB)\n+      sec.js\n+</CLR>\n+\n+<CLR=31,BOLD>ERROR in webpack performance recommendations: \n+You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\n+For more info visit https://webpack.js.org/guides/code-splitting/</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "f0294a0161cb7b05969926a1cec5843f26e7133b",
        "filename": "test/statsCases/performance-oversize-limit-error/index.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-oversize-limit-error%2Findex.js?ref=b36a8b63519d0b0657f46ba955e432509dc3fd18",
        "patch": "@@ -0,0 +1 @@\n+require(\"./a\");"
      },
      {
        "sha": "f0294a0161cb7b05969926a1cec5843f26e7133b",
        "filename": "test/statsCases/performance-oversize-limit-error/index2.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Findex2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Findex2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-oversize-limit-error%2Findex2.js?ref=b36a8b63519d0b0657f46ba955e432509dc3fd18",
        "patch": "@@ -0,0 +1 @@\n+require(\"./a\");"
      },
      {
        "sha": "6010c957827a0903e14cbe78e6deb41743234e8c",
        "filename": "test/statsCases/performance-oversize-limit-error/webpack.config.js",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/webpack/webpack/blob/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/b36a8b63519d0b0657f46ba955e432509dc3fd18/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-oversize-limit-error%2Fwebpack.config.js?ref=b36a8b63519d0b0657f46ba955e432509dc3fd18",
        "patch": "@@ -0,0 +1,14 @@\n+module.exports = {\n+\tentry: {\n+\t\tmain: \"./index\",\n+\t\tsec: \"./index2\"\n+\t},\n+\tstats: {\n+\t\tcolors: true,\n+\t\thash: false,\n+\t\tentrypoints: true\n+\t},\n+\tperformance: {\n+\t\thints: \"error\"\n+\t}\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/3350",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/3350/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/3350/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/3350/events",
    "html_url": "https://github.com/webpack/webpack/pull/3350",
    "id": 191092196,
    "node_id": "MDExOlB1bGxSZXF1ZXN0OTQ4NzQ4MDI=",
    "number": 3350,
    "title": "feat(performance): webpack performance budgets ",
    "user": {
      "login": "TheLarkInn",
      "id": 3408176,
      "node_id": "MDQ6VXNlcjM0MDgxNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3408176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheLarkInn",
      "html_url": "https://github.com/TheLarkInn",
      "followers_url": "https://api.github.com/users/TheLarkInn/followers",
      "following_url": "https://api.github.com/users/TheLarkInn/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheLarkInn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheLarkInn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheLarkInn/subscriptions",
      "organizations_url": "https://api.github.com/users/TheLarkInn/orgs",
      "repos_url": "https://api.github.com/users/TheLarkInn/repos",
      "events_url": "https://api.github.com/users/TheLarkInn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheLarkInn/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2016-11-22T18:49:20Z",
    "updated_at": "2016-12-07T22:11:29Z",
    "closed_at": "2016-12-07T22:11:29Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/3350",
      "html_url": "https://github.com/webpack/webpack/pull/3350",
      "diff_url": "https://github.com/webpack/webpack/pull/3350.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/3350.patch",
      "merged_at": "2016-12-07T22:11:29Z"
    },
    "body": "**What kind of change does this PR introduce?**\r\nA feature\r\n\r\n**Did you add tests for your changes?**\r\nYes \r\n\r\n**If relevant, did you update the documentation?**\r\nNot yet\r\n\r\n**Summary**\r\n\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\nIt doesn't introduce a breaking change. \r\n\r\n**Other information**\r\nPerformance budgets PR here is implementation of @addyosmani's RFC #3216 \r\n\r\nHere are the schema properties with descriptors:\r\n\r\n```json\r\n    \"performance\": {\r\n      \"description\": \"Configuration for web performance recommendations.\",\r\n      \"additionalProperties\": false,\r\n      \"properties\": {\r\n        \"hints\": {\r\n          \"description\": \"Turn hints on or off\",\r\n          \"type\": \"boolean\"\r\n        },\r\n        \"maxInitialChunkSize\": {\r\n          \"description\": \"Total size of all initial chunks (in bytes)\",\r\n          \"type\": \"number\"\r\n        },\r\n        \"maxAssetSize\": {\r\n          \"description\": \"Filesize limit (in bytes) when exceeded, that webpack will provide performance hints\",\r\n          \"type\": \"number\"\r\n        },\r\n        \"errorOnHint\": {\r\n          \"description\": \"Throw errors instead of warnings when performance hints are found\",\r\n          \"type\": \"boolean\"\r\n        }\r\n      },\r\n      \"type\": \"object\"\r\n    }\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/3350/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/3350/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "d7f8bfe701656fceefad64049f378f67817067a4",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -31,6 +31,7 @@ function Compilation(compiler) {\n \tthis.outputOptions = options && options.output;\n \tthis.bail = options && options.bail;\n \tthis.profile = options && options.profile;\n+\tthis.performance = options && options.performance;\n \n \tthis.mainTemplate = new MainTemplate(this.outputOptions);\n \tthis.chunkTemplate = new ChunkTemplate(this.outputOptions, this.mainTemplate);"
      },
      {
        "sha": "51dfcdac50d26243dfb2beb27854fd62cd195ac3",
        "filename": "lib/Entrypoint.js",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FEntrypoint.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FEntrypoint.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FEntrypoint.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -22,3 +22,29 @@ Entrypoint.prototype.insertChunk = function(chunk, before) {\n \t}\n \tchunk.entrypoints.push(this);\n };\n+\n+Entrypoint.prototype.getFiles = function() {\n+\tvar files = [];\n+\n+\tfor(var chunkIdx = 0; chunkIdx < this.chunks.length; chunkIdx++) {\n+\t\tfor(var fileIdx = 0; fileIdx < this.chunks[chunkIdx].files.length; fileIdx++) {\n+\t\t\tif(files.indexOf(this.chunks[chunkIdx].files[fileIdx]) === -1) {\n+\t\t\t\tfiles.push(this.chunks[chunkIdx].files[fileIdx]);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\treturn files;\n+}\n+\n+Entrypoint.prototype.getSize = function(compilation) {\n+\tvar files = this.getFiles();\n+\n+\treturn files\n+\t\t.map(function(file) {\n+\t\t\treturn compilation.assets[file].size()\n+\t\t})\n+\t\t.reduce(function(currentSize, nextSize) {\n+\t\t\treturn currentSize + nextSize\n+\t\t}, 0);\n+}"
      },
      {
        "sha": "c15d59dcce384d5c3bacab2a9877729afd4dab97",
        "filename": "lib/SizeFormatHelpers.js",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FSizeFormatHelpers.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FSizeFormatHelpers.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FSizeFormatHelpers.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,17 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Sean Larkin @thelarkinn\n+*/\n+var SizeFormatHelpers = exports;\n+\n+SizeFormatHelpers.formatSize = function(size) {\n+\tif(size <= 0) {\n+\t\treturn \"0 bytes\";\n+\t}\n+\n+\tvar abbreviations = [\"bytes\", \"kB\", \"MB\", \"GB\"];\n+\tvar index = Math.floor(Math.log(size) / Math.log(1000));\n+\n+\treturn +(size / Math.pow(1000, index))\n+\t\t.toPrecision(3) + \" \" + abbreviations[index];\n+}"
      },
      {
        "sha": "6b6142a299d2fd789204e45b2fa8ba7d0287ebd5",
        "filename": "lib/Stats.js",
        "status": "modified",
        "additions": 65,
        "deletions": 21,
        "changes": 86,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FStats.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FStats.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FStats.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -3,6 +3,7 @@\n \tAuthor Tobias Koppers @sokra\n */\n var RequestShortener = require(\"./RequestShortener\");\n+var formatSize = require(\"./SizeFormatHelpers\").formatSize;\n \n function Stats(compilation) {\n \tthis.compilation = compilation;\n@@ -30,6 +31,7 @@ Stats.prototype.toJson = function toJson(options, forToString) {\n \t}\n \tvar compilation = this.compilation;\n \tvar requestShortener = new RequestShortener(d(options.context, process.cwd()));\n+\tvar showPerformance = d(options.performance, true);\n \tvar showHash = d(options.hash, true);\n \tvar showVersion = d(options.version, true);\n \tvar showTimings = d(options.timings, true);\n@@ -170,6 +172,11 @@ Stats.prototype.toJson = function toJson(options, forToString) {\n \t\t\t\tchunkNames: [],\n \t\t\t\temitted: compilation.assets[asset].emitted\n \t\t\t};\n+\n+\t\t\tif(showPerformance) {\n+\t\t\t\tobj.isOverSizeLimit = compilation.assets[asset].isOverSizeLimit;\n+\t\t\t}\n+\n \t\t\tassetsByFile[asset] = obj;\n \t\t\treturn obj;\n \t\t}).filter(function(asset) {\n@@ -323,6 +330,7 @@ Stats.prototype.toJson = function toJson(options, forToString) {\n \t\t\treturn obj;\n \t\t});\n \t}\n+\n \treturn obj;\n };\n \n@@ -394,7 +402,11 @@ Stats.jsonToString = function jsonToString(obj, useColors) {\n \t\tbuf.push(\"\\n\");\n \t}\n \n-\tfunction table(array, formats, align, splitter) {\n+\tfunction getText(arr, row, col) {\n+\t\treturn arr[row][col].value;\n+\t}\n+\n+\tfunction table(array, align, splitter) {\n \t\tvar row;\n \t\tvar rows = array.length;\n \t\tvar col;\n@@ -405,38 +417,39 @@ Stats.jsonToString = function jsonToString(obj, useColors) {\n \t\t\tcolSizes[col] = 3;\n \t\tfor(row = 0; row < rows; row++) {\n \t\t\tfor(col = 0; col < cols; col++) {\n-\t\t\t\tvalue = array[row][col] + \"\";\n+\t\t\t\tvalue = getText(array, row, col) + \"\";\n+\t\t\t\tif(value.length === 0) {\n+\t\t\t\t\tcolSizes[col] = 0;\n+\t\t\t\t}\n \t\t\t\tif(value.length > colSizes[col]) {\n \t\t\t\t\tcolSizes[col] = value.length;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \t\tfor(row = 0; row < rows; row++) {\n \t\t\tfor(col = 0; col < cols; col++) {\n-\t\t\t\tvar format = row === 0 ? colors.bold : formats[col];\n-\t\t\t\tvalue = array[row][col] + \"\";\n+\t\t\t\tvar format = array[row][col].color;\n+\t\t\t\tvalue = getText(array, row, col) + \"\";\n \t\t\t\tvar l = value.length;\n \t\t\t\tif(align[col] === \"l\")\n \t\t\t\t\tformat(value);\n \t\t\t\tfor(; l < colSizes[col] && col !== cols - 1; l++)\n \t\t\t\t\tcolors.normal(\" \");\n \t\t\t\tif(align[col] === \"r\")\n \t\t\t\t\tformat(value);\n-\t\t\t\tif(col + 1 < cols)\n+\t\t\t\tif(col + 1 < cols && colSizes[col] != 0)\n \t\t\t\t\tcolors.normal(splitter || \"  \");\n \t\t\t}\n \t\t\tnewline();\n \t\t}\n \t}\n \n-\tfunction formatSize(size) {\n-\t\tif(size <= 0) return \"0 bytes\";\n-\n-\t\tvar abbreviations = [\"bytes\", \"kB\", \"MB\", \"GB\"];\n-\t\tvar index = Math.floor(Math.log(size) / Math.log(1000));\n+\tfunction getAssetColor(asset, defaultColor) {\n+\t\tif(asset.isOverSizeLimit) {\n+\t\t\treturn colors.yellow;\n+\t\t}\n \n-\t\treturn +(size / Math.pow(1000, index))\n-\t\t\t.toPrecision(3) + \" \" + abbreviations[index];\n+\t\treturn defaultColor;\n \t}\n \n \tif(obj.hash) {\n@@ -460,20 +473,51 @@ Stats.jsonToString = function jsonToString(obj, useColors) {\n \t\tcolors.bold(obj.publicPath);\n \t\tnewline();\n \t}\n+\n \tif(obj.assets && obj.assets.length > 0) {\n \t\tvar t = [\n-\t\t\t[\"Asset\", \"Size\", \"Chunks\", \"\", \"Chunk Names\"]\n+\t\t\t[{\n+\t\t\t\tvalue: \"Asset\",\n+\t\t\t\tcolor: colors.bold\n+\t\t\t}, {\n+\t\t\t\tvalue: \"Size\",\n+\t\t\t\tcolor: colors.bold\n+\t\t\t}, {\n+\t\t\t\tvalue: \"Chunks\",\n+\t\t\t\tcolor: colors.bold\n+\t\t\t}, {\n+\t\t\t\tvalue: \"\",\n+\t\t\t\tcolor: colors.bold\n+\t\t\t}, {\n+\t\t\t\tvalue: \"\",\n+\t\t\t\tcolor: colors.bold\n+\t\t\t}, {\n+\t\t\t\tvalue: \"Chunk Names\",\n+\t\t\t\tcolor: colors.bold\n+\t\t\t}]\n \t\t];\n \t\tobj.assets.forEach(function(asset) {\n-\t\t\tt.push([\n-\t\t\t\tasset.name,\n-\t\t\t\tformatSize(asset.size),\n-\t\t\t\tasset.chunks.join(\", \"),\n-\t\t\t\tasset.emitted ? \"[emitted]\" : \"\",\n-\t\t\t\tasset.chunkNames.join(\", \")\n-\t\t\t]);\n+\t\t\tt.push([{\n+\t\t\t\tvalue: asset.name,\n+\t\t\t\tcolor: getAssetColor(asset, colors.green)\n+\t\t\t}, {\n+\t\t\t\tvalue: formatSize(asset.size),\n+\t\t\t\tcolor: getAssetColor(asset, colors.normal)\n+\t\t\t}, {\n+\t\t\t\tvalue: asset.chunks.join(\", \"),\n+\t\t\t\tcolor: colors.bold\n+\t\t\t}, {\n+\t\t\t\tvalue: asset.emitted ? \"[emitted]\" : \"\",\n+\t\t\t\tcolor: colors.green\n+\t\t\t}, {\n+\t\t\t\tvalue: asset.isOverSizeLimit ? \"[big]\" : \"\",\n+\t\t\t\tcolor: getAssetColor(asset, colors.normal)\n+\t\t\t}, {\n+\t\t\t\tvalue: asset.chunkNames.join(\", \"),\n+\t\t\t\tcolor: colors.normal\n+\t\t\t}]);\n \t\t});\n-\t\ttable(t, [colors.green, colors.normal, colors.bold, colors.green, colors.normal], \"rrrll\");\n+\t\ttable(t, \"rrrlll\");\n \t}\n \tif(obj.entrypoints) {\n \t\tObject.keys(obj.entrypoints).forEach(function(name) {"
      },
      {
        "sha": "04d585b0ebba721399dad0a474cc24206fa9390d",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -42,6 +42,7 @@ var FlagIncludedChunksPlugin = require(\"./optimize/FlagIncludedChunksPlugin\");\n var OccurrenceOrderPlugin = require(\"./optimize/OccurrenceOrderPlugin\");\n var FlagDependencyUsagePlugin = require(\"./FlagDependencyUsagePlugin\");\n var FlagDependencyExportsPlugin = require(\"./FlagDependencyExportsPlugin\");\n+var EmittedAssetSizeLimitPlugin = require(\"./performance/EmittedAssetSizeLimitPlugin\");\n \n var ResolverFactory = require(\"enhanced-resolve\").ResolverFactory;\n \n@@ -69,6 +70,7 @@ WebpackOptionsApply.prototype.process = function(options, compiler) {\n \t\tvar NodeSourcePlugin;\n \t\tvar NodeTargetPlugin;\n \t\tvar NodeTemplatePlugin;\n+\n \t\tswitch(options.target) {\n \t\t\tcase \"web\":\n \t\t\t\tJsonpTemplatePlugin = require(\"./JsonpTemplatePlugin\");\n@@ -186,6 +188,7 @@ WebpackOptionsApply.prototype.process = function(options, compiler) {\n \t} else {\n \t\tthrow new Error(\"Unsupported target '\" + options.target + \"'.\");\n \t}\n+\n \tif(options.output.library || options.output.libraryTarget !== \"var\") {\n \t\tvar LibraryTemplatePlugin = require(\"./LibraryTemplatePlugin\");\n \t\tcompiler.apply(new LibraryTemplatePlugin(options.output.library, options.output.libraryTarget, options.output.umdNamedDefine, options.output.auxiliaryComment || \"\"));\n@@ -264,6 +267,8 @@ WebpackOptionsApply.prototype.process = function(options, compiler) {\n \t\tnew FlagDependencyUsagePlugin()\n \t);\n \n+\tcompiler.apply(new EmittedAssetSizeLimitPlugin(options.performance));\n+\n \tcompiler.apply(new TemplatedPathPlugin());\n \n \tcompiler.apply(new RecordIdsPlugin());"
      },
      {
        "sha": "bb32999870e33cdda6de1212c4c293500dbcc5fb",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -69,6 +69,16 @@ function WebpackOptionsDefaulter() {\n \tthis.set(\"node.__filename\", \"mock\");\n \tthis.set(\"node.__dirname\", \"mock\");\n \n+\tthis.set(\"performance.maxAssetSize\", 250000);\n+\tthis.set(\"performance.maxInitialChunkSize\", 250000);\n+\tthis.set(\"performance.errorOnHint\", false);\n+\tthis.set(\"performance.hints\", \"make\", function(options) {\n+\t\tif(options.target === \"web\")\n+\t\t\treturn true;\n+\t\telse\n+\t\t\treturn false;\n+\t});\n+\n \tthis.set(\"resolve\", {});\n \tthis.set(\"resolve.unsafeCache\", true);\n \tthis.set(\"resolve.modules\", [\"node_modules\"]);\n@@ -85,7 +95,6 @@ function WebpackOptionsDefaulter() {\n \t\telse\n \t\t\treturn [\"module\", \"main\"];\n \t});\n-\n \tthis.set(\"resolveLoader\", {});\n \tthis.set(\"resolveLoader.unsafeCache\", true);\n \tthis.set(\"resolveLoader.mainFields\", [\"loader\", \"main\"]);"
      },
      {
        "sha": "05d0de0447698c3b7287df793a29e01e48298a05",
        "filename": "lib/performance/AssetsOverSizeLimitWarning.js",
        "status": "added",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FAssetsOverSizeLimitWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FAssetsOverSizeLimitWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FAssetsOverSizeLimitWarning.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,24 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Sean Larkin @thelarkinn\n+*/\n+var SizeFormatHelpers = require('../SizeFormatHelpers');\n+\n+function AssetsOverSizeLimitWarning(assetsOverSizeLimit, assetLimit) {\n+\tError.call(this);\n+\tError.captureStackTrace(this, AssetsOverSizeLimitWarning);\n+\tthis.name = \"AssetsOverSizeLimitWarning\";\n+\tthis.assets = assetsOverSizeLimit;\n+\n+\tvar assetLists = this.assets.map(function(asset) {\n+\t\treturn \"\\n  \" + asset.name + \" (\" + SizeFormatHelpers.formatSize(asset.size) + \")\";\n+\t}).join(\"\");\n+\n+\tthis.message = \"asset size limit: The following asset(s) exceed the recommended size limit (\" + SizeFormatHelpers.formatSize(assetLimit) + \"). \\n\" +\n+\t\t\"This can impact web performance.\\n\" +\n+\t\t\"Assets: \" + assetLists;\n+}\n+module.exports = AssetsOverSizeLimitWarning;\n+\n+AssetsOverSizeLimitWarning.prototype = Object.create(Error.prototype);\n+AssetsOverSizeLimitWarning.prototype.constructor = AssetsOverSizeLimitWarning;"
      },
      {
        "sha": "9645c15fea082719669fc1ce4d9b894c0ab86f92",
        "filename": "lib/performance/EmittedAssetSizeLimitPlugin.js",
        "status": "added",
        "additions": 101,
        "deletions": 0,
        "changes": 101,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FEmittedAssetSizeLimitPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FEmittedAssetSizeLimitPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FEmittedAssetSizeLimitPlugin.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,101 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Sean Larkin @thelarkinn\n+*/\n+var path = require('path');\n+\n+var EntrypointsOverSizeLimitWarning = require('./EntrypointsOverSizeLimitWarning');\n+var AssetsOverSizeLimitWarning = require('./AssetsOverSizeLimitWarning');\n+var NoAsyncChunksWarning = require('./NoAsyncChunksWarning');\n+\n+function EmittedAssetSizeLimitPlugin(performanceOptions) {\n+\tthis.maxAssetSize = performanceOptions.maxAssetSize;\n+\tthis.maxInitialSize = performanceOptions.maxInitialChunkSize;\n+\tthis.hints = performanceOptions.hints;\n+\tthis.errorOnHint = performanceOptions.errorOnHint;\n+}\n+\n+module.exports = EmittedAssetSizeLimitPlugin;\n+\n+// When using this we should always\n+// compare byte size and then format later\n+function doesExceedLimit(limit, actualSize) {\n+\treturn limit < actualSize;\n+}\n+\n+EmittedAssetSizeLimitPlugin.prototype.apply = function(compiler) {\n+\tif(!this.hints) {\n+\t\treturn;\n+\t}\n+\tvar entrypointSizeLimit = this.maxInitialSize;\n+\tvar sizeLimit = this.maxAssetSize;\n+\tvar hints = this.hints;\n+\tvar shouldErrorOnHint = this.errorOnHint;\n+\n+\tcompiler.plugin(\"after-emit\", function(compilation, callback) {\n+\t\tvar warnings = [];\n+\t\tvar assetsOverSizeLimit = [];\n+\n+\t\tObject.keys(compilation.assets).forEach(function(asset) {\n+\t\t\tvar obj = {\n+\t\t\t\tname: asset,\n+\t\t\t\tsize: compilation.assets[asset].size()\n+\t\t\t};\n+\n+\t\t\tif(doesExceedLimit(sizeLimit, obj.size)) {\n+\t\t\t\tobj.isOverSizeLimit = true;\n+\t\t\t\tassetsOverSizeLimit.push(obj);\n+\t\t\t\tcompilation.assets[asset].isOverSizeLimit = true;\n+\t\t\t}\n+\t\t});\n+\n+\t\tvar hasAsyncChunks = compilation.chunks.filter(function(chunk) {\n+\t\t\treturn !chunk.isInitial();\n+\t\t}).length > 0;\n+\n+\t\tvar entrypointsOverLimit = Object.keys(compilation.entrypoints)\n+\t\t\t.map(function(key) {\n+\t\t\t\treturn compilation.entrypoints[key]\n+\t\t\t})\n+\t\t\t.filter(function(entry) {\n+\t\t\t\treturn doesExceedLimit(entrypointSizeLimit, entry.getSize(compilation))\n+\t\t\t});\n+\n+\t\t// 1. Individual Chunk: Size < 250kb\n+\t\t// 2. Collective Initial Chunks [entrypoint] (Each Set?): Size < 250kb\n+\t\t// 3. No Async Chunks\n+\t\t// if !1, then 2, if !2 return\n+\t\tif(assetsOverSizeLimit.length > 0) {\n+\t\t\twarnings.push(\n+\t\t\t\tnew AssetsOverSizeLimitWarning(\n+\t\t\t\t\tassetsOverSizeLimit,\n+\t\t\t\t\tsizeLimit\n+\t\t\t\t)\n+\t\t\t);\n+\t\t}\n+\t\tif(entrypointsOverLimit.length > 0) {\n+\t\t\twarnings.push(\n+\t\t\t\tnew EntrypointsOverSizeLimitWarning(\n+\t\t\t\t\tentrypointsOverLimit,\n+\t\t\t\t\tcompilation,\n+\t\t\t\t\tentrypointSizeLimit\n+\t\t\t\t)\n+\t\t\t);\n+\t\t}\n+\n+\t\tif(warnings.length > 0) {\n+\t\t\tif(!hasAsyncChunks) {\n+\t\t\t\twarnings.push(new NoAsyncChunksWarning());\n+\t\t\t}\n+\n+\t\t\tif(shouldErrorOnHint) {\n+\t\t\t\tArray.prototype.push.apply(compilation.errors, warnings);\n+\t\t\t} else {\n+\t\t\t\tArray.prototype.push.apply(compilation.warnings, warnings);\n+\t\t\t}\n+\t\t}\n+\n+\t\tcallback();\n+\t});\n+\n+};"
      },
      {
        "sha": "e2367819fed9b296e533361a4536363d1255b8dd",
        "filename": "lib/performance/EntrypointsOverSizeLimitWarning.js",
        "status": "added",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,28 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Sean Larkin @thelarkinn\n+*/\n+var SizeFormatHelpers = require('../SizeFormatHelpers');\n+\n+function EntrypointsOverSizeLimitWarning(entrypoints, compilation, entrypointLimit) {\n+\tError.call(this);\n+\tError.captureStackTrace(this, EntrypointsOverSizeLimitWarning);\n+\tthis.name = \"EntrypointsOverSizeLimitWarning\";\n+\tthis.entrypoints = entrypoints;\n+\n+\tvar entrypointCompilation = compilation;\n+\tvar entrypointList = this.entrypoints.map(function(entrypoint) {\n+\t\treturn \"\\n  \" + entrypoint.name + \" (\" + SizeFormatHelpers.formatSize(entrypoint.getSize(entrypointCompilation)) + \")\\n\" +\n+\t\t\tentrypoint.getFiles().map(function(filename, index) {\n+\t\t\t\treturn \"      \" + entrypoint.getFiles()[index] + \"\\n\";\n+\t\t\t}).join(\"\");\n+\t}).join(\"\");\n+\n+\tthis.message = \"entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (\" + SizeFormatHelpers.formatSize(entrypointLimit) + \"). \" +\n+\t\t\"This can impact web performance.\\n\" +\n+\t\t\"Entrypoints:\" + entrypointList;\n+}\n+module.exports = EntrypointsOverSizeLimitWarning;\n+\n+EntrypointsOverSizeLimitWarning.prototype = Object.create(Error.prototype);\n+EntrypointsOverSizeLimitWarning.prototype.constructor = EntrypointsOverSizeLimitWarning;"
      },
      {
        "sha": "58a10159c33bc1fc2462532b6fc2bb634f91811d",
        "filename": "lib/performance/NoAsyncChunksWarning.js",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FNoAsyncChunksWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/lib%2Fperformance%2FNoAsyncChunksWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FNoAsyncChunksWarning.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,17 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Sean Larkin @thelarkinn\n+*/\n+function NoAsyncChunksWarning() {\n+\tError.call(this);\n+\tError.captureStackTrace(this, NoAsyncChunksWarning);\n+\tthis.name = \"NoAsyncChunksWarning\";\n+\n+\tthis.message = \"webpack performance recommendations: \\n\" +\n+\t\t\"You can limit the size of your bundles by using System.import() or require.ensure to lazy load some parts of your application.\\n\" +\n+\t\t\"For more info visit https://webpack.js.org/guides/code-splitting/\";\n+}\n+module.exports = NoAsyncChunksWarning;\n+\n+NoAsyncChunksWarning.prototype = Object.create(Error.prototype);\n+NoAsyncChunksWarning.prototype.constructor = NoAsyncChunksWarning;"
      },
      {
        "sha": "44afc5e615bc29d6b0c519de624d5b9964a98709",
        "filename": "schemas/webpackOptionsSchema.json",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/schemas%2FwebpackOptionsSchema.json",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/schemas%2FwebpackOptionsSchema.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FwebpackOptionsSchema.json?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -747,6 +747,29 @@\n     \"output\": {\n       \"$ref\": \"#/definitions/output\"\n     },\n+    \"performance\": {\n+      \"description\": \"Configuration for web performance recommendations.\",\n+      \"additionalProperties\": false,\n+      \"properties\": {\n+        \"hints\": {\n+          \"description\": \"Turn hints on or off\",\n+          \"type\": \"boolean\"\n+        },\n+        \"maxInitialChunkSize\": {\n+          \"description\": \"Total size of all initial chunks (in bytes)\",\n+          \"type\": \"number\"\n+        },\n+        \"maxAssetSize\": {\n+          \"description\": \"Filesize limit (in bytes) when exceeded, that webpack will provide performance hints\",\n+          \"type\": \"number\"\n+        },\n+        \"errorOnHint\": {\n+          \"description\": \"Throw errors instead of warnings when performance hints are found\",\n+          \"type\": \"boolean\"\n+        }\n+      },\n+      \"type\": \"object\"\n+    },\n     \"plugins\": {\n       \"description\": \"Add additional plugins to the compiler.\",\n       \"type\": \"array\""
      },
      {
        "sha": "57c39e9cbe413189624ba9c7f61f7dedb9b6df33",
        "filename": "test/Validation.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FValidation.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FValidation.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FValidation.test.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -104,7 +104,7 @@ describe(\"Validation\", function() {\n \t\tmessage: [\n \t\t\t\" - configuration has an unknown property 'postcss'. These properties are valid:\",\n \t\t\t\"   object { amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry, externals?, \" +\n-\t\t\t\"loader?, module?, name?, node?, output?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, \" +\n+\t\t\t\"loader?, module?, name?, node?, output?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, \" +\n \t\t\t\"recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? }\",\n \t\t\t\"   For typos: please correct them.\",\n \t\t\t\"   For loader options: webpack 2 no longer allows custom properties in configuration.\","
      },
      {
        "sha": "fe6e43e7caa4a3e94c573d1240ecb0723f0b56bd",
        "filename": "test/WatchDetection.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FWatchDetection.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FWatchDetection.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FWatchDetection.test.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -1,3 +1,4 @@\n+/*globals describe it before after  */\n var should = require(\"should\");\n var path = require(\"path\");\n var fs = require(\"fs\");"
      },
      {
        "sha": "a65179e2b46e67373032acb74165c315b705d2f7",
        "filename": "test/configCases/target/web/webpack.config.js",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FconfigCases%2Ftarget%2Fweb%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FconfigCases%2Ftarget%2Fweb%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FconfigCases%2Ftarget%2Fweb%2Fwebpack.config.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -1,3 +1,6 @@\n module.exports = {\n-\ttarget: \"web\"\n+\ttarget: \"web\",\n+\tperformance: {\n+\t\thints: false\n+\t}\n };"
      },
      {
        "sha": "67a46fff2ca87048fa28993eb5605a7d62ddb1ad",
        "filename": "test/statsCases/color-enabled-custom/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fcolor-enabled-custom%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fcolor-enabled-custom%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fcolor-enabled-custom%2Fexpected.txt?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -1,6 +1,6 @@\n Hash: <CLR=BOLD>6c781fe6bf412ba6435b</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n-  <CLR=BOLD>Asset</CLR>     <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=BOLD>Chunk Names</CLR>\n+  <CLR=BOLD>Asset</CLR>     <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22><CLR=BOLD>Chunk Names</CLR>\n <CLR=32>main.js</CLR>  2.51 kB       <CLR=BOLD>0</CLR>  <CLR=32>[emitted]</CLR>  main\n chunk    {<CLR=33>0</CLR>} <CLR=32>main.js</CLR> (main) 0 bytes<CLR=33> [entry]</CLR><CLR=32> [rendered]</CLR>\n     [0] <CLR=BOLD>(webpack)/test/statsCases/color-enabled-custom/index.js</CLR> 0 bytes {<CLR=33>0</CLR>}<CLR=32> [built]</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "9054ff5870e3fa8c2b80ce2b9892b21e0262f75d",
        "filename": "test/statsCases/color-enabled/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fcolor-enabled%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fcolor-enabled%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fcolor-enabled%2Fexpected.txt?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -1,6 +1,6 @@\n Hash: <CLR=BOLD>6c781fe6bf412ba6435b</CLR>\n Time: <CLR=BOLD>X</CLR>ms\n-  <CLR=BOLD>Asset</CLR>     <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=BOLD>Chunk Names</CLR>\n+  <CLR=BOLD>Asset</CLR>     <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22><CLR=BOLD>Chunk Names</CLR>\n <CLR=32,BOLD>main.js</CLR>  2.51 kB       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>  main\n chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 0 bytes<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n     [0] <CLR=BOLD>(webpack)/test/statsCases/color-enabled/index.js</CLR> 0 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "1ea440be75aefb8600125b4dfd872f119fa85eba",
        "filename": "test/statsCases/performance-error/a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fa.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd"
      },
      {
        "sha": "dfbbeb621fa8e2517125351b211159ec4fc3374f",
        "filename": "test/statsCases/performance-error/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fb.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"b\";"
      },
      {
        "sha": "84bdba76f123099f0a83791f71af03b37b28f36a",
        "filename": "test/statsCases/performance-error/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fc.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+require.ensure([\"./d\", \"./e\"], function(require) {});"
      },
      {
        "sha": "0a281018ca1677568b9f69df38f9a52c7304c527",
        "filename": "test/statsCases/performance-error/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fd.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"d\";"
      },
      {
        "sha": "7884d62f73211b7cccc03faa0703b5d2b7dd7b4f",
        "filename": "test/statsCases/performance-error/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fe.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"e\";"
      },
      {
        "sha": "82f75e26928b5d5f8e94495afb84d2357ffae76e",
        "filename": "test/statsCases/performance-error/expected.txt",
        "status": "added",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fexpected.txt?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,27 @@\n+Time: <CLR=BOLD>X</CLR>ms\n+  <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22>       <CLR=BOLD>Chunk Names</CLR>\n+   <CLR=32,BOLD>0.js</CLR>  227 bytes       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+   <CLR=32,BOLD>1.js</CLR>  106 bytes       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+   <CLR=32,BOLD>2.js</CLR>  200 bytes       <CLR=BOLD>2</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+<CLR=33,BOLD>main.js</CLR>     <CLR=33,BOLD>306 kB</CLR>       <CLR=BOLD>3</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>0.js</CLR> 54 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/performance-error/c.js</CLR> 54 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>1.js</CLR> 22 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/performance-error/b.js</CLR> 22 bytes {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>2</CLR>} <CLR=32,BOLD>2.js</CLR> 44 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [3] <CLR=BOLD>(webpack)/test/statsCases/performance-error/d.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [4] <CLR=BOLD>(webpack)/test/statsCases/performance-error/e.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>3</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-error/a.js</CLR> 300 kB {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [5] <CLR=BOLD>(webpack)/test/statsCases/performance-error/index.js</CLR> 52 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+\n+<CLR=31,BOLD>ERROR in asset size limit: The following asset(s) exceed the recommended size limit (250 kB). \n+This can impact web performance.\n+Assets: \n+  main.js (306 kB)</CLR>\n+\n+<CLR=31,BOLD>ERROR in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (250 kB). This can impact web performance.\n+Entrypoints:\n+  main (306 kB)\n+      main.js\n+</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "0a714cee1359b2c9ff0ca1533c57dbfd73dca11c",
        "filename": "test/statsCases/performance-error/index.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Findex.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,3 @@\n+require(\"./a\");\n+require([\"./b\"]);\n+require([\"./c\"]);"
      },
      {
        "sha": "5ad2e8ec9ddb082b0d2e58c3da10ad9070c9b21b",
        "filename": "test/statsCases/performance-error/webpack.config.js",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-error%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fwebpack.config.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,10 @@\n+module.exports = {\n+\tentry: \"./index\",\n+\tstats: {\n+\t\tcolors: true,\n+\t\thash: false\n+\t},\n+\tperformance: {\n+\t\terrorOnHint: true\n+\t}\n+};"
      },
      {
        "sha": "1ea440be75aefb8600125b4dfd872f119fa85eba",
        "filename": "test/statsCases/performance-no-async-chunks-shown/a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fa.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd"
      },
      {
        "sha": "dfbbeb621fa8e2517125351b211159ec4fc3374f",
        "filename": "test/statsCases/performance-no-async-chunks-shown/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fb.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"b\";"
      },
      {
        "sha": "0a281018ca1677568b9f69df38f9a52c7304c527",
        "filename": "test/statsCases/performance-no-async-chunks-shown/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fd.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"d\";"
      },
      {
        "sha": "7884d62f73211b7cccc03faa0703b5d2b7dd7b4f",
        "filename": "test/statsCases/performance-no-async-chunks-shown/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fe.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"e\";"
      },
      {
        "sha": "11c2c5ff94c1beaae70a34074633b7ff8e0ef95d",
        "filename": "test/statsCases/performance-no-async-chunks-shown/expected.txt",
        "status": "added",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fexpected.txt?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,22 @@\n+Time: <CLR=BOLD>X</CLR>ms\n+  <CLR=BOLD>Asset</CLR>    <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22>       <CLR=BOLD>Chunk Names</CLR>\n+<CLR=33,BOLD>main.js</CLR>  <CLR=33,BOLD>303 kB</CLR>       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/a.js</CLR> 300 kB {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/b.js</CLR> 22 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/index.js</CLR> 32 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+\n+<CLR=33,BOLD>WARNING in asset size limit: The following asset(s) exceed the recommended size limit (250 kB). \n+This can impact web performance.\n+Assets: \n+  main.js (303 kB)</CLR>\n+\n+<CLR=33,BOLD>WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (250 kB). This can impact web performance.\n+Entrypoints:\n+  main (303 kB)\n+      main.js\n+</CLR>\n+\n+<CLR=33,BOLD>WARNING in webpack performance recommendations: \n+You can limit the size of your bundles by using System.import() or require.ensure to lazy load some parts of your application.\n+For more info visit https://webpack.js.org/guides/code-splitting/</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "a53103a1613a70276c0b7e060e211cd68495ae14",
        "filename": "test/statsCases/performance-no-async-chunks-shown/index.js",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Findex.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,2 @@\n+require(\"./a\");\n+require(\"./b\");"
      },
      {
        "sha": "27a578af05e91c2d3ba0bf8d0051bca7d96544f2",
        "filename": "test/statsCases/performance-no-async-chunks-shown/webpack.config.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,7 @@\n+module.exports = {\n+\tentry: \"./index\",\n+\tstats: {\n+\t\tcolors: true,\n+\t\thash: false\n+\t}\n+};"
      },
      {
        "sha": "1ea440be75aefb8600125b4dfd872f119fa85eba",
        "filename": "test/statsCases/preset-normal-performance/a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fa.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd"
      },
      {
        "sha": "dfbbeb621fa8e2517125351b211159ec4fc3374f",
        "filename": "test/statsCases/preset-normal-performance/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fb.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"b\";"
      },
      {
        "sha": "84bdba76f123099f0a83791f71af03b37b28f36a",
        "filename": "test/statsCases/preset-normal-performance/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fc.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+require.ensure([\"./d\", \"./e\"], function(require) {});"
      },
      {
        "sha": "0a281018ca1677568b9f69df38f9a52c7304c527",
        "filename": "test/statsCases/preset-normal-performance/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fd.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"d\";"
      },
      {
        "sha": "7884d62f73211b7cccc03faa0703b5d2b7dd7b4f",
        "filename": "test/statsCases/preset-normal-performance/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fe.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"e\";"
      },
      {
        "sha": "f89429818dc316ae4b94506a9a47446468c631f5",
        "filename": "test/statsCases/preset-normal-performance/expected.txt",
        "status": "added",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fexpected.txt?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,27 @@\n+Time: <CLR=BOLD>X</CLR>ms\n+  <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22>       <CLR=BOLD>Chunk Names</CLR>\n+   <CLR=32,BOLD>0.js</CLR>  227 bytes       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+   <CLR=32,BOLD>1.js</CLR>  106 bytes       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+   <CLR=32,BOLD>2.js</CLR>  200 bytes       <CLR=BOLD>2</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+<CLR=33,BOLD>main.js</CLR>     <CLR=33,BOLD>306 kB</CLR>       <CLR=BOLD>3</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>0.js</CLR> 54 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance/c.js</CLR> 54 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>1.js</CLR> 22 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance/b.js</CLR> 22 bytes {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>2</CLR>} <CLR=32,BOLD>2.js</CLR> 44 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [3] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance/d.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [4] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance/e.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>3</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance/a.js</CLR> 300 kB {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [5] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance/index.js</CLR> 52 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+\n+<CLR=33,BOLD>WARNING in asset size limit: The following asset(s) exceed the recommended size limit (250 kB). \n+This can impact web performance.\n+Assets: \n+  main.js (306 kB)</CLR>\n+\n+<CLR=33,BOLD>WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (250 kB). This can impact web performance.\n+Entrypoints:\n+  main (306 kB)\n+      main.js\n+</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "0a714cee1359b2c9ff0ca1533c57dbfd73dca11c",
        "filename": "test/statsCases/preset-normal-performance/index.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Findex.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,3 @@\n+require(\"./a\");\n+require([\"./b\"]);\n+require([\"./c\"]);"
      },
      {
        "sha": "7907546fa7cb3f8d702396ae523f1f08fe8f45d0",
        "filename": "test/statsCases/preset-normal-performance/webpack.config.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/3dfab1053b59d186a384f0ec5ef7f16eb70c44fd/test%2FstatsCases%2Fpreset-normal-performance%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fwebpack.config.js?ref=3dfab1053b59d186a384f0ec5ef7f16eb70c44fd",
        "patch": "@@ -0,0 +1,7 @@\n+module.exports = {\n+\tentry: \"./index\",\n+\tstats: {\n+\t\thash: false,\n+\t\tcolors: true\n+\t}\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/3428",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/3428/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/3428/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/3428/events",
    "html_url": "https://github.com/webpack/webpack/pull/3428",
    "id": 193849845,
    "node_id": "MDExOlB1bGxSZXF1ZXN0OTY3ODAyOTI=",
    "number": 3428,
    "title": "performance improvements",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
      "url": "https://api.github.com/repos/webpack/webpack/milestones/9",
      "html_url": "https://github.com/webpack/webpack/milestone/9",
      "labels_url": "https://api.github.com/repos/webpack/webpack/milestones/9/labels",
      "id": 1851865,
      "node_id": "MDk6TWlsZXN0b25lMTg1MTg2NQ==",
      "number": 9,
      "title": "2.1-RC Blocking",
      "description": "This milestone marks all bugs/features which are critical for webpack 2's release. ",
      "creator": {
        "login": "TheLarkInn",
        "id": 3408176,
        "node_id": "MDQ6VXNlcjM0MDgxNzY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3408176?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheLarkInn",
        "html_url": "https://github.com/TheLarkInn",
        "followers_url": "https://api.github.com/users/TheLarkInn/followers",
        "following_url": "https://api.github.com/users/TheLarkInn/following{/other_user}",
        "gists_url": "https://api.github.com/users/TheLarkInn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/TheLarkInn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/TheLarkInn/subscriptions",
        "organizations_url": "https://api.github.com/users/TheLarkInn/orgs",
        "repos_url": "https://api.github.com/users/TheLarkInn/repos",
        "events_url": "https://api.github.com/users/TheLarkInn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/TheLarkInn/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 19,
      "state": "closed",
      "created_at": "2016-06-28T02:10:15Z",
      "updated_at": "2016-12-14T21:54:12Z",
      "due_on": null,
      "closed_at": "2016-12-14T21:54:12Z"
    },
    "comments": 0,
    "created_at": "2016-12-06T18:34:29Z",
    "updated_at": "2016-12-14T20:18:44Z",
    "closed_at": "2016-12-14T20:18:44Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/3428",
      "html_url": "https://github.com/webpack/webpack/pull/3428",
      "diff_url": "https://github.com/webpack/webpack/pull/3428.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/3428.patch",
      "merged_at": "2016-12-14T20:18:44Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nperformance\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nN/A\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nimprove the performance, add extra caching layer used in watch mode\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nyes, an internal one\r\nModule has now a \"unbuild\" method that must work correctly\r\nImpact: probably nobody affected.\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/3428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/3428/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "2cc665e9ee33d091350670bef5a7f060266418f3",
        "filename": "benchmark/createFixtures.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/benchmark%2FcreateFixtures.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/benchmark%2FcreateFixtures.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/benchmark%2FcreateFixtures.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -7,7 +7,7 @@ try {\n \tfs.mkdirSync(fixtures);\n } catch(e) {}\n \n-for(var i = 0; i < 1000; i++) {\n+for(var i = 0; i < 10000; i++) {\n \tvar source = [];\n \tif(i > 8)\n \t\tsource.push(\"require(\" + JSON.stringify(\"./\" + (i / 8 | 0) + \".js\") + \");\");\n@@ -21,7 +21,7 @@ for(var i = 0; i < 1000; i++) {\n \tfs.writeFileSync(path.join(fixtures, i + \".js\"), source.join(\"\\n\"), \"utf-8\");\n }\n \n-for(var i = 0; i < 1000; i++) {\n+for(var i = 0; i < 10000; i++) {\n \tvar source = [];\n \tsource.push(\"require.ensure([], function(require) {\");\n \tif(i > 8)"
      },
      {
        "sha": "edb4b12ae19e64489115531919049c935e0850a2",
        "filename": "bin/convert-argv.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/bin%2Fconvert-argv.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/bin%2Fconvert-argv.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/bin%2Fconvert-argv.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -1,7 +1,6 @@\n var path = require(\"path\");\n var fs = require(\"fs\");\n fs.existsSync = fs.existsSync || path.existsSync;\n-var resolve = require(\"enhanced-resolve\");\n var interpret = require(\"interpret\");\n var WebpackOptionsDefaulter = require(\"../lib/WebpackOptionsDefaulter\");\n \n@@ -249,6 +248,7 @@ module.exports = function(yargs, argv, convertOptions) {\n \n \t\t\tvar path;\n \t\t\ttry {\n+\t\t\t\tvar resolve = require(\"enhanced-resolve\");\n \t\t\t\tpath = resolve.sync(process.cwd(), name);\n \t\t\t} catch(e) {\n \t\t\t\tconsole.log(\"Cannot resolve plugin \" + name + \".\");"
      },
      {
        "sha": "0858b78c6989e2896ee096f0590c616d44a711bc",
        "filename": "lib/Chunk.js",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FChunk.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FChunk.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FChunk.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -316,7 +316,9 @@ Chunk.prototype.getChunkMaps = function(includeEntries, realHash) {\n };\n \n function byId(a, b) {\n-\treturn a.id - b.id;\n+\tif(a.id < b.id) return -1;\n+\tif(b.id < a.id) return 1;\n+\treturn 0;\n }\n \n Chunk.prototype.sortItems = function() {\n@@ -332,6 +334,8 @@ Chunk.prototype.sortItems = function() {\n \t\tif(origin.reasons)\n \t\t\torigin.reasons.sort();\n \t});\n+\tthis.parents.sort(byId);\n+\tthis.chunks.sort(byId);\n };\n \n Chunk.prototype.toString = function() {"
      },
      {
        "sha": "7f3eb3823f841a7bd6b38986a2b46ff4b72be67e",
        "filename": "lib/Compilation.js",
        "status": "modified",
        "additions": 153,
        "deletions": 83,
        "changes": 236,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FCompilation.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FCompilation.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompilation.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -96,6 +96,7 @@ Compilation.prototype.addModule = function(module, cacheGroup) {\n \t\t\tmodule.lastId = cacheModule.id;\n \t\t}\n \t}\n+\tmodule.unbuild();\n \tthis._modules[identifier] = module;\n \tif(this.cache) {\n \t\tthis.cache[cacheGroup + identifier] = module;\n@@ -115,7 +116,7 @@ Compilation.prototype.findModule = function(identifier) {\n \n Compilation.prototype.buildModule = function(module, optional, origin, dependencies, thisCallback) {\n \tvar _this = this;\n-\t_this.applyPlugins(\"build-module\", module);\n+\t_this.applyPlugins1(\"build-module\", module);\n \tif(module.building) return module.building.push(thisCallback);\n \tvar building = module.building = [thisCallback];\n \n@@ -141,10 +142,10 @@ Compilation.prototype.buildModule = function(module, optional, origin, dependenc\n \t\t}, this);\n \t\tmodule.dependencies.sort(Dependency.compare);\n \t\tif(err) {\n-\t\t\t_this.applyPlugins(\"failed-module\", module, err);\n+\t\t\t_this.applyPlugins2(\"failed-module\", module, err);\n \t\t\treturn callback(err);\n \t\t}\n-\t\t_this.applyPlugins(\"succeed-module\", module);\n+\t\t_this.applyPlugins1(\"succeed-module\", module);\n \t\treturn callback();\n \t});\n };\n@@ -190,7 +191,7 @@ Compilation.prototype.addModuleDependencies = function(module, dependencies, bai\n \t\t}\n \t\tfactories[i] = [factory, dependencies[i]];\n \t}\n-\tasync.forEach(factories, function(item, callback) {\n+\tasync.forEach(factories, function iteratorFactory(item, callback) {\n \t\tvar dependencies = item[1];\n \n \t\tvar errorAndCallback = function errorAndCallback(err) {\n@@ -215,7 +216,7 @@ Compilation.prototype.addModuleDependencies = function(module, dependencies, bai\n \t\t\t},\n \t\t\tcontext: module.context,\n \t\t\tdependencies: dependencies\n-\t\t}, function(err, dependentModule) {\n+\t\t}, function factoryCallback(err, dependentModule) {\n \t\t\tfunction isOptional() {\n \t\t\t\treturn dependencies.filter(function(d) {\n \t\t\t\t\treturn !d.optional;\n@@ -322,7 +323,7 @@ Compilation.prototype.addModuleDependencies = function(module, dependencies, bai\n \t\t\t});\n \n \t\t});\n-\t}, function(err) {\n+\t}, function finalCallbackAddModuleDependencies(err) {\n \t\t// In V8, the Error objects keep a reference to the functions on the stack. These warnings &\n \t\t// errors are created inside closures that keep a reference to the Compilation, so errors are\n \t\t// leaking the Compilation object. Setting _this to null workarounds the following issue in V8.\n@@ -333,7 +334,7 @@ Compilation.prototype.addModuleDependencies = function(module, dependencies, bai\n \t\t\treturn callback(err);\n \t\t}\n \n-\t\treturn callback();\n+\t\treturn process.nextTick(callback);\n \t});\n };\n \n@@ -501,14 +502,14 @@ Compilation.prototype.rebuildModule = function(module, thisCallback) {\n };\n \n Compilation.prototype.finish = function finish() {\n-\tthis.applyPlugins(\"finish-modules\", this.modules);\n+\tthis.applyPlugins1(\"finish-modules\", this.modules);\n \tthis.modules.forEach(function(m) {\n \t\tthis.reportDependencyWarnings(m, [m]);\n \t}, this);\n };\n \n Compilation.prototype.unseal = function unseal() {\n-\tthis.applyPlugins(\"unseal\");\n+\tthis.applyPlugins0(\"unseal\");\n \tthis.chunks.length = 0;\n \tthis.namedChunks = {};\n \tthis.additionalChunkAssets.length = 0;\n@@ -520,7 +521,7 @@ Compilation.prototype.unseal = function unseal() {\n \n Compilation.prototype.seal = function seal(callback) {\n \tvar self = this;\n-\tself.applyPlugins(\"seal\");\n+\tself.applyPlugins0(\"seal\");\n \tself.nextFreeModuleIndex = 0;\n \tself.nextFreeModuleIndex2 = 0;\n \tself.preparedChunks.forEach(function(preparedChunk) {\n@@ -532,80 +533,75 @@ Compilation.prototype.seal = function seal(callback) {\n \t\tchunk.addModule(module);\n \t\tmodule.addChunk(chunk);\n \t\tchunk.entryModule = module;\n-\t\tif(typeof module.index !== \"number\") {\n-\t\t\tmodule.index = self.nextFreeModuleIndex++;\n-\t\t}\n+\t\tself.assignIndex(module);\n \t\tself.processDependenciesBlockForChunk(module, chunk);\n-\t\tif(typeof module.index2 !== \"number\") {\n-\t\t\tmodule.index2 = self.nextFreeModuleIndex2++;\n-\t\t}\n \t}, self);\n \tself.sortModules(self.modules);\n-\tself.applyPlugins(\"optimize\");\n+\tself.applyPlugins0(\"optimize\");\n \n-\twhile(self.applyPluginsBailResult(\"optimize-modules-basic\", self.modules) ||\n-\t\tself.applyPluginsBailResult(\"optimize-modules\", self.modules) ||\n-\t\tself.applyPluginsBailResult(\"optimize-modules-advanced\", self.modules)); // eslint-disable-line no-extra-semi\n-\tself.applyPlugins(\"after-optimize-modules\", self.modules);\n+\twhile(self.applyPluginsBailResult1(\"optimize-modules-basic\", self.modules) ||\n+\t\tself.applyPluginsBailResult1(\"optimize-modules\", self.modules) ||\n+\t\tself.applyPluginsBailResult1(\"optimize-modules-advanced\", self.modules)); // eslint-disable-line no-extra-semi\n+\tself.applyPlugins1(\"after-optimize-modules\", self.modules);\n \n-\twhile(self.applyPluginsBailResult(\"optimize-chunks-basic\", self.chunks) ||\n-\t\tself.applyPluginsBailResult(\"optimize-chunks\", self.chunks) ||\n-\t\tself.applyPluginsBailResult(\"optimize-chunks-advanced\", self.chunks)); // eslint-disable-line no-extra-semi\n-\tself.applyPlugins(\"after-optimize-chunks\", self.chunks);\n+\twhile(self.applyPluginsBailResult1(\"optimize-chunks-basic\", self.chunks) ||\n+\t\tself.applyPluginsBailResult1(\"optimize-chunks\", self.chunks) ||\n+\t\tself.applyPluginsBailResult1(\"optimize-chunks-advanced\", self.chunks)); // eslint-disable-line no-extra-semi\n+\tself.applyPlugins1(\"after-optimize-chunks\", self.chunks);\n \n-\tself.applyPluginsAsync(\"optimize-tree\", self.chunks, self.modules, function(err) {\n+\tself.applyPluginsAsyncSeries(\"optimize-tree\", self.chunks, self.modules, function sealPart2(err) {\n \t\tif(err) {\n \t\t\treturn callback(err);\n \t\t}\n \n-\t\tself.applyPlugins(\"after-optimize-tree\", self.chunks, self.modules);\n+\t\tself.applyPlugins2(\"after-optimize-tree\", self.chunks, self.modules);\n \n \t\tvar shouldRecord = self.applyPluginsBailResult(\"should-record\") !== false;\n \n \t\tself.sortItemsBeforeIds();\n \n-\t\tself.applyPlugins(\"revive-modules\", self.modules, self.records);\n-\t\tself.applyPlugins(\"optimize-module-order\", self.modules);\n-\t\tself.applyPlugins(\"advanced-optimize-module-order\", self.modules);\n-\t\tself.applyPlugins(\"before-module-ids\", self.modules);\n-\t\tself.applyPlugins(\"module-ids\", self.modules);\n+\t\tself.applyPlugins2(\"revive-modules\", self.modules, self.records);\n+\t\tself.applyPlugins1(\"optimize-module-order\", self.modules);\n+\t\tself.applyPlugins1(\"advanced-optimize-module-order\", self.modules);\n+\t\tself.applyPlugins1(\"before-module-ids\", self.modules);\n+\t\tself.applyPlugins1(\"module-ids\", self.modules);\n \t\tself.applyModuleIds();\n-\t\tself.applyPlugins(\"optimize-module-ids\", self.modules);\n-\t\tself.applyPlugins(\"after-optimize-module-ids\", self.modules);\n+\t\tself.applyPlugins1(\"optimize-module-ids\", self.modules);\n+\t\tself.applyPlugins1(\"after-optimize-module-ids\", self.modules);\n \n \t\tself.sortItemsWithModuleIds();\n \n-\t\tself.applyPlugins(\"revive-chunks\", self.chunks, self.records);\n-\t\tself.applyPlugins(\"optimize-chunk-order\", self.chunks);\n-\t\tself.applyPlugins(\"before-chunk-ids\", self.chunks);\n+\t\tself.applyPlugins2(\"revive-chunks\", self.chunks, self.records);\n+\t\tself.applyPlugins1(\"optimize-chunk-order\", self.chunks);\n+\t\tself.applyPlugins1(\"before-chunk-ids\", self.chunks);\n \t\tself.applyChunkIds();\n-\t\tself.applyPlugins(\"optimize-chunk-ids\", self.chunks);\n-\t\tself.applyPlugins(\"after-optimize-chunk-ids\", self.chunks);\n+\t\tself.applyPlugins1(\"optimize-chunk-ids\", self.chunks);\n+\t\tself.applyPlugins1(\"after-optimize-chunk-ids\", self.chunks);\n \n-\t\tself.sortItemswithChunkIds();\n+\t\tself.sortItemsWithChunkIds();\n \n \t\tif(shouldRecord)\n-\t\t\tself.applyPlugins(\"record-modules\", self.modules, self.records);\n+\t\t\tself.applyPlugins2(\"record-modules\", self.modules, self.records);\n \t\tif(shouldRecord)\n-\t\t\tself.applyPlugins(\"record-chunks\", self.chunks, self.records);\n+\t\t\tself.applyPlugins2(\"record-chunks\", self.chunks, self.records);\n \n-\t\tself.applyPlugins(\"before-hash\");\n+\t\tself.applyPlugins0(\"before-hash\");\n \t\tself.createHash();\n-\t\tself.applyPlugins(\"after-hash\");\n+\t\tself.applyPlugins0(\"after-hash\");\n \n \t\tif(shouldRecord)\n-\t\t\tself.applyPlugins(\"record-hash\", self.records);\n+\t\t\tself.applyPlugins1(\"record-hash\", self.records);\n \n-\t\tself.applyPlugins(\"before-module-assets\");\n+\t\tself.applyPlugins0(\"before-module-assets\");\n \t\tself.createModuleAssets();\n \t\tif(self.applyPluginsBailResult(\"should-generate-chunk-assets\") !== false) {\n-\t\t\tself.applyPlugins(\"before-chunk-assets\");\n+\t\t\tself.applyPlugins0(\"before-chunk-assets\");\n \t\t\tself.createChunkAssets();\n \t\t}\n-\t\tself.applyPlugins(\"additional-chunk-assets\", self.chunks);\n+\t\tself.applyPlugins1(\"additional-chunk-assets\", self.chunks);\n \t\tself.summarizeDependencies();\n \t\tif(shouldRecord)\n-\t\t\tself.applyPlugins(\"record\", self, self.records);\n+\t\t\tself.applyPlugins2(\"record\", self, self.records);\n \n \t\tself.applyPluginsAsync(\"additional-assets\", function(err) {\n \t\t\tif(err) {\n@@ -615,12 +611,12 @@ Compilation.prototype.seal = function seal(callback) {\n \t\t\t\tif(err) {\n \t\t\t\t\treturn callback(err);\n \t\t\t\t}\n-\t\t\t\tself.applyPlugins(\"after-optimize-chunk-assets\", self.chunks);\n+\t\t\t\tself.applyPlugins1(\"after-optimize-chunk-assets\", self.chunks);\n \t\t\t\tself.applyPluginsAsync(\"optimize-assets\", self.assets, function(err) {\n \t\t\t\t\tif(err) {\n \t\t\t\t\t\treturn callback(err);\n \t\t\t\t\t}\n-\t\t\t\t\tself.applyPlugins(\"after-optimize-assets\", self.assets);\n+\t\t\t\t\tself.applyPlugins1(\"after-optimize-assets\", self.assets);\n \t\t\t\t\tif(self.applyPluginsBailResult(\"need-additional-seal\")) {\n \t\t\t\t\t\tself.unseal();\n \t\t\t\t\t\treturn self.seal(callback);\n@@ -675,47 +671,118 @@ Compilation.prototype.addChunk = function addChunk(name, module, loc) {\n \treturn chunk;\n };\n \n-Compilation.prototype.processDependenciesBlockForChunk = function processDependenciesBlockForChunk(block, chunk) {\n-\tif(block.variables) {\n-\t\tblock.variables.forEach(function(v) {\n-\t\t\tv.dependencies.forEach(iteratorDependency, this);\n-\t\t}, this);\n+Compilation.prototype.assignIndex = function assignIndex(module) {\n+\tvar _this = this;\n+\n+\tfunction assignIndexToModule(module) {\n+\t\t// enter module\n+\t\tif(typeof module.index !== \"number\") {\n+\t\t\tmodule.index = _this.nextFreeModuleIndex++;\n+\n+\t\t\tqueue.push(function() {\n+\t\t\t\t// leave module\n+\t\t\t\tmodule.index2 = _this.nextFreeModuleIndex2++;\n+\t\t\t});\n+\n+\t\t\t// enter it as block\n+\t\t\tassignIndexToDependencyBlock(module);\n+\t\t}\n \t}\n-\tif(block.dependencies) {\n-\t\tblock.dependencies.forEach(iteratorDependency, this);\n+\n+\tfunction assignIndexToDependency(dependency) {\n+\t\tif(dependency.module) {\n+\t\t\tqueue.push(function() {\n+\t\t\t\tassignIndexToModule(dependency.module);\n+\t\t\t});\n+\t\t}\n \t}\n-\tif(block.blocks) {\n-\t\tblock.blocks.forEach(function(b) {\n-\t\t\tvar c;\n-\t\t\tif(!b.chunks) {\n-\t\t\t\tc = this.addChunk(b.chunkName, b.module, b.loc);\n-\t\t\t\tb.chunks = [c];\n-\t\t\t\tc.addBlock(b);\n-\t\t\t} else {\n-\t\t\t\tc = b.chunks[0];\n-\t\t\t}\n-\t\t\tchunk.addChunk(c);\n-\t\t\tc.addParent(chunk);\n-\t\t\tthis.processDependenciesBlockForChunk(b, c);\n-\t\t}, this);\n+\n+\tfunction assignIndexToDependencyBlock(block) {\n+\t\tvar allDependencies = [];\n+\n+\t\tfunction iteratorDependency(d) {\n+\t\t\tallDependencies.push(d);\n+\t\t}\n+\n+\t\tfunction iteratorBlock(b) {\n+\t\t\tqueue.push(function() {\n+\t\t\t\tassignIndexToDependencyBlock(b);\n+\t\t\t});\n+\t\t}\n+\n+\t\tif(block.variables) {\n+\t\t\tblock.variables.forEach(function(v) {\n+\t\t\t\tv.dependencies.forEach(iteratorDependency);\n+\t\t\t});\n+\t\t}\n+\t\tif(block.dependencies) {\n+\t\t\tblock.dependencies.forEach(iteratorDependency);\n+\t\t}\n+\t\tif(block.blocks) {\n+\t\t\tblock.blocks.slice().reverse().forEach(iteratorBlock, this);\n+\t\t}\n+\n+\t\tallDependencies.reverse();\n+\t\tallDependencies.forEach(function(d) {\n+\t\t\tqueue.push(function() {\n+\t\t\t\tassignIndexToDependency(d);\n+\t\t\t});\n+\t\t});\n+\t}\n+\n+\tvar queue = [function() {\n+\t\tassignIndexToModule(module);\n+\t}];\n+\twhile(queue.length) {\n+\t\tqueue.pop()();\n+\t}\n+};\n+\n+Compilation.prototype.processDependenciesBlockForChunk = function processDependenciesBlockForChunk(block, chunk) {\n+\tvar queue = [\n+\t\t[block, chunk]\n+\t];\n+\twhile(queue.length) {\n+\t\tvar queueItem = queue.pop();\n+\t\tblock = queueItem[0];\n+\t\tchunk = queueItem[1];\n+\t\tif(block.variables) {\n+\t\t\tblock.variables.forEach(function(v) {\n+\t\t\t\tv.dependencies.forEach(iteratorDependency, this);\n+\t\t\t}, this);\n+\t\t}\n+\t\tif(block.dependencies) {\n+\t\t\tblock.dependencies.forEach(iteratorDependency, this);\n+\t\t}\n+\t\tif(block.blocks) {\n+\t\t\tblock.blocks.forEach(iteratorBlock, this);\n+\t\t}\n+\t}\n+\n+\tfunction iteratorBlock(b) {\n+\t\tvar c;\n+\t\tif(!b.chunks) {\n+\t\t\tc = this.addChunk(b.chunkName, b.module, b.loc);\n+\t\t\tb.chunks = [c];\n+\t\t\tc.addBlock(b);\n+\t\t} else {\n+\t\t\tc = b.chunks[0];\n+\t\t}\n+\t\tchunk.addChunk(c);\n+\t\tc.addParent(chunk);\n+\t\tqueue.push([b, c]);\n \t}\n \n \tfunction iteratorDependency(d) {\n \t\tif(!d.module) {\n \t\t\treturn;\n \t\t}\n-\t\tif(typeof d.module.index !== \"number\") {\n-\t\t\td.module.index = this.nextFreeModuleIndex++;\n-\t\t}\n \t\tif(d.weak) {\n \t\t\treturn;\n \t\t}\n \t\tif(chunk.addModule(d.module)) {\n \t\t\td.module.addChunk(chunk);\n-\t\t\tthis.processDependenciesBlockForChunk(d.module, chunk);\n-\t\t}\n-\t\tif(typeof d.module.index2 !== \"number\") {\n-\t\t\td.module.index2 = this.nextFreeModuleIndex2++;\n+\t\t\tqueue.push([d.module, chunk]);\n \t\t}\n \t}\n };\n@@ -841,11 +908,14 @@ Compilation.prototype.sortItemsWithModuleIds = function sortItemsWithModuleIds()\n \t});\n };\n \n-Compilation.prototype.sortItemswithChunkIds = function sortItemswithChunkIds() {\n+Compilation.prototype.sortItemsWithChunkIds = function sortItemsWithChunkIds() {\n \tthis.chunks.sort(byId);\n \tthis.modules.forEach(function(module) {\n \t\tmodule.sortItems();\n \t});\n+\tthis.chunks.forEach(function(chunk) {\n+\t\tchunk.sortItems();\n+\t});\n };\n \n Compilation.prototype.summarizeDependencies = function summarizeDependencies() {\n@@ -923,7 +993,7 @@ Compilation.prototype.createHash = function createHash() {\n \t\t} else {\n \t\t\tthis.chunkTemplate.updateHashForChunk(chunkHash);\n \t\t}\n-\t\tthis.applyPlugins(\"chunk-hash\", chunk, chunkHash);\n+\t\tthis.applyPlugins2(\"chunk-hash\", chunk, chunkHash);\n \t\tchunk.hash = chunkHash.digest(hashDigest);\n \t\thash.update(chunk.hash);\n \t\tchunk.renderedHash = chunk.hash.substr(0, hashDigestLength);\n@@ -948,7 +1018,7 @@ Compilation.prototype.createModuleAssets = function createModuleAssets() {\n \tvar cacheAssetsAndApplyPlugins = function cacheAssetsAndApplyPlugins(name) {\n \t\tvar file = this.getPath(name);\n \t\tthis.assets[file] = module.assets[name];\n-\t\tthis.applyPlugins(\"module-asset\", module, file);\n+\t\tthis.applyPlugins2(\"module-asset\", module, file);\n \t}\n \n \tfor(var i = 0; i < this.modules.length; i++) {\n@@ -998,7 +1068,7 @@ Compilation.prototype.createChunkAssets = function createChunkAssets() {\n \t\t\t\tthrow new Error(\"Conflict: Multiple assets emit to the same filename '\" + file + \"'\");\n \t\t\tthis.assets[file] = source;\n \t\t\tchunk.files.push(file);\n-\t\t\tthis.applyPlugins(\"chunk-asset\", chunk, file);\n+\t\t\tthis.applyPlugins2(\"chunk-asset\", chunk, file);\n \t\t} catch(err) {\n \t\t\tthis.errors.push(new ChunkRenderError(chunk, file || filenameTemplate, err));\n \t\t}"
      },
      {
        "sha": "286f2e88fe746f28ab7e7dd0a478c72e6e1affb9",
        "filename": "lib/Compiler.js",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FCompiler.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FCompiler.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FCompiler.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -156,9 +156,9 @@ function Compiler() {\n \tthis.contextTimestamps = {};\n \n \tthis.resolvers = {\n-\t\tnormal: new Resolver(null),\n-\t\tloader: new Resolver(null),\n-\t\tcontext: new Resolver(null)\n+\t\tnormal: null,\n+\t\tloader: null,\n+\t\tcontext: null\n \t};\n \tvar deprecationReported = false;\n \tthis.parser = {\n@@ -337,7 +337,7 @@ Compiler.prototype.emitAssets = function(compilation, callback) {\n \t}\n \n \tfunction afterEmit() {\n-\t\tthis.applyPluginsAsync(\"after-emit\", compilation, function(err) {\n+\t\tthis.applyPluginsAsyncSeries1(\"after-emit\", compilation, function(err) {\n \t\t\tif(err) return callback(err);\n \n \t\t\treturn callback();"
      },
      {
        "sha": "3874a510ca2fd45cc780d498f955a0ad88df2a21",
        "filename": "lib/ContextModule.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FContextModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FContextModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FContextModule.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -87,9 +87,9 @@ ContextModule.prototype.needRebuild = function(fileTimestamps, contextTimestamps\n \treturn ts >= this.builtTime;\n };\n \n-ContextModule.prototype.disconnect = function disconnect() {\n+ContextModule.prototype.unbuild = function unbuild() {\n \tthis.built = false;\n-\tModule.prototype.disconnect.call(this);\n+\tModule.prototype.unbuild.call(this);\n };\n \n ContextModule.prototype.build = function(options, compilation, resolver, fs, callback) {"
      },
      {
        "sha": "2f0bc1b06bcca9834a801dd5c27f57a406fe8b26",
        "filename": "lib/DelegatedModule.js",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FDelegatedModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FDelegatedModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FDelegatedModule.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -16,8 +16,7 @@ function DelegatedModule(sourceRequest, data, type, userRequest) {\n \tthis.type = type;\n \tthis.userRequest = userRequest;\n \tthis.built = false;\n-\tthis.usedExports = true;\n-\tthis.providedExports = data.exports || true;\n+\tthis.delegateData = data;\n }\n module.exports = DelegatedModule;\n \n@@ -39,12 +38,20 @@ DelegatedModule.prototype.needRebuild = function() {\n };\n \n DelegatedModule.prototype.build = function(options, compilation, resolver, fs, callback) {\n+\tthis.built = true;\n \tthis.builtTime = new Date().getTime();\n+\tthis.usedExports = true;\n+\tthis.providedExports = this.delegateData.exports || true;\n \tthis.dependencies.length = 0;\n \tthis.addDependency(new DelegatedSourceDependency(this.sourceRequest));\n \tcallback();\n };\n \n+DelegatedModule.prototype.unbuild = function() {\n+\tthis.built = false;\n+\tModule.prototype.unbuild.call(this);\n+}\n+\n DelegatedModule.prototype.source = function() {\n \tvar sourceModule = this.dependencies[0].module;\n \tvar str;"
      },
      {
        "sha": "32ccb0326dad50e486d11ba96d59365a85174ad9",
        "filename": "lib/FlagDependencyUsagePlugin.js",
        "status": "modified",
        "additions": 45,
        "deletions": 34,
        "changes": 79,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FFlagDependencyUsagePlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FFlagDependencyUsagePlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FFlagDependencyUsagePlugin.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -15,53 +15,64 @@ FlagDependencyUsagePlugin.prototype.apply = function(compiler) {\n \t\t\t\tmodule.used = false;\n \t\t\t})\n \n+\t\t\tvar queue = [];\n \t\t\tcompilation.chunks.forEach(function(chunk) {\n \t\t\t\tif(chunk.entryModule) {\n \t\t\t\t\tprocessModule(chunk.entryModule, true);\n \t\t\t\t}\n \t\t\t});\n \n-\t\t});\n+\t\t\twhile(queue.length) {\n+\t\t\t\tvar queueItem = queue.pop();\n+\t\t\t\tprocessDependenciesBlock(queueItem[0], queueItem[1]);\n+\t\t\t}\n \n-\t\tfunction processModule(module, usedExports) {\n-\t\t\tmodule.used = true;\n-\t\t\tif(usedExports === true || module.usedExports === true)\n-\t\t\t\tmodule.usedExports = true;\n-\t\t\telse if(Array.isArray(usedExports))\n-\t\t\t\tmodule.usedExports = addToSet(module.usedExports || [], usedExports)\n-\t\t\telse if(Array.isArray(module.usedExports))\n-\t\t\t\tmodule.usedExports = module.usedExports;\n-\t\t\telse\n-\t\t\t\tmodule.usedExports = false;\n+\t\t\tfunction processModule(module, usedExports) {\n+\t\t\t\tmodule.used = true;\n+\t\t\t\tif(module.usedExports === true)\n+\t\t\t\t\treturn;\n+\t\t\t\telse if(usedExports === true)\n+\t\t\t\t\tmodule.usedExports = true;\n+\t\t\t\telse if(Array.isArray(usedExports)) {\n+\t\t\t\t\tvar old = module.usedExports ? module.usedExports.length : -1;\n+\t\t\t\t\tmodule.usedExports = addToSet(module.usedExports || [], usedExports);\n+\t\t\t\t\tif(module.usedExports.length === old)\n+\t\t\t\t\t\treturn;\n+\t\t\t\t} else if(Array.isArray(module.usedExports))\n+\t\t\t\t\treturn;\n+\t\t\t\telse\n+\t\t\t\t\tmodule.usedExports = false;\n \n-\t\t\tprocessDependenciesBlock(module, module.usedExports);\n-\t\t}\n+\t\t\t\tqueue.push([module, module.usedExports]);\n+\t\t\t}\n \n-\t\tfunction processDependenciesBlock(depBlock, usedExports) {\n-\t\t\tdepBlock.dependencies.forEach(function(dep) {\n-\t\t\t\tprocessDependency(dep, usedExports);\n-\t\t\t});\n-\t\t\tdepBlock.variables.forEach(function(variable) {\n-\t\t\t\tvariable.dependencies.forEach(function(dep) {\n+\t\t\tfunction processDependenciesBlock(depBlock, usedExports) {\n+\t\t\t\tdepBlock.dependencies.forEach(function(dep) {\n \t\t\t\t\tprocessDependency(dep, usedExports);\n \t\t\t\t});\n-\t\t\t});\n-\t\t\tdepBlock.blocks.forEach(function(block) {\n-\t\t\t\tprocessDependenciesBlock(block, usedExports);\n-\t\t\t});\n-\t\t}\n+\t\t\t\tdepBlock.variables.forEach(function(variable) {\n+\t\t\t\t\tvariable.dependencies.forEach(function(dep) {\n+\t\t\t\t\t\tprocessDependency(dep, usedExports);\n+\t\t\t\t\t});\n+\t\t\t\t});\n+\t\t\t\tdepBlock.blocks.forEach(function(block) {\n+\t\t\t\t\tqueue.push([block, usedExports]);\n+\t\t\t\t});\n+\t\t\t}\n \n-\t\tfunction processDependency(dep, usedExports) {\n-\t\t\tvar reference = dep.getReference && dep.getReference();\n-\t\t\tif(!reference) return;\n-\t\t\tvar module = reference.module;\n-\t\t\tvar importedNames = reference.importedNames;\n-\t\t\tvar oldUsed = module.used;\n-\t\t\tvar oldUsedExports = module.usedExports;\n-\t\t\tif(!oldUsed || (importedNames && (!oldUsedExports || !isSubset(oldUsedExports, importedNames)))) {\n-\t\t\t\tprocessModule(module, importedNames);\n+\t\t\tfunction processDependency(dep, usedExports) {\n+\t\t\t\tvar reference = dep.getReference && dep.getReference();\n+\t\t\t\tif(!reference) return;\n+\t\t\t\tvar module = reference.module;\n+\t\t\t\tvar importedNames = reference.importedNames;\n+\t\t\t\tvar oldUsed = module.used;\n+\t\t\t\tvar oldUsedExports = module.usedExports;\n+\t\t\t\tif(!oldUsed || (importedNames && (!oldUsedExports || !isSubset(oldUsedExports, importedNames)))) {\n+\t\t\t\t\tprocessModule(module, importedNames);\n+\t\t\t\t}\n \t\t\t}\n-\t\t}\n+\n+\t\t});\n \n \t\tfunction addToSet(a, b) {\n \t\t\tb.forEach(function(item) {"
      },
      {
        "sha": "077d9e92919bb68db85015a7af09921d651c9f27",
        "filename": "lib/Module.js",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FModule.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FModule.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FModule.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -172,6 +172,10 @@ Module.prototype.sortItems = function() {\n \t});\n };\n \n+Module.prototype.unbuild = function() {\n+\tthis.disconnect();\n+};\n+\n Module.prototype.identifier = null;\n Module.prototype.readableIdentifier = null;\n Module.prototype.build = null;"
      },
      {
        "sha": "e66ff7499854639aa1bfded178c1e2ca93f01b92",
        "filename": "lib/NormalModuleFactory.js",
        "status": "modified",
        "additions": 23,
        "deletions": 9,
        "changes": 32,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FNormalModuleFactory.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FNormalModuleFactory.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FNormalModuleFactory.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -45,6 +45,7 @@ function NormalModuleFactory(context, resolvers, options) {\n \tTapable.call(this);\n \tthis.resolvers = resolvers;\n \tthis.ruleSet = new RuleSet(options.rules || options.loaders);\n+\tthis.cachePredicate = typeof options.unsafeCache === \"function\" ? options.unsafeCache : Boolean.bind(null, options.unsafeCache);\n \tthis.context = context || \"\";\n \tthis.parserCache = {};\n \tthis.plugin(\"factory\", function() {\n@@ -101,6 +102,7 @@ function NormalModuleFactory(context, resolvers, options) {\n \t\t\tvar contextInfo = data.contextInfo;\n \t\t\tvar context = data.context;\n \t\t\tvar request = data.request;\n+\t\t\tvar resolveContextInfo = {};\n \n \t\t\tvar noAutoLoaders = /^-?!/.test(request);\n \t\t\tvar noPrePostAutoLoaders = /^!!/.test(request);\n@@ -111,12 +113,12 @@ function NormalModuleFactory(context, resolvers, options) {\n \n \t\t\tasync.parallel([\n \t\t\t\tfunction(callback) {\n-\t\t\t\t\t_this.resolveRequestArray(contextInfo, context, elements, _this.resolvers.loader, callback);\n+\t\t\t\t\t_this.resolveRequestArray(resolveContextInfo, context, elements, _this.resolvers.loader, callback);\n \t\t\t\t},\n \t\t\t\tfunction(callback) {\n \t\t\t\t\tif(resource === \"\" || resource[0] === \"?\")\n \t\t\t\t\t\treturn callback(null, resource);\n-\t\t\t\t\t_this.resolvers.normal.resolve(contextInfo, context, resource, function(err, result) {\n+\t\t\t\t\t_this.resolvers.normal.resolve(resolveContextInfo, context, resource, function(err, result) {\n \t\t\t\t\t\tif(err) return callback(err);\n \t\t\t\t\t\tcallback(null, result);\n \t\t\t\t\t});\n@@ -175,13 +177,13 @@ function NormalModuleFactory(context, resolvers, options) {\n \t\t\t\t\t}\n \t\t\t\t});\n \t\t\t\tasync.parallel([\n-\t\t\t\t\t_this.resolveRequestArray.bind(_this, contextInfo, _this.context, useLoadersPost, _this.resolvers.loader),\n-\t\t\t\t\t_this.resolveRequestArray.bind(_this, contextInfo, _this.context, useLoaders, _this.resolvers.loader),\n-\t\t\t\t\t_this.resolveRequestArray.bind(_this, contextInfo, _this.context, useLoadersPre, _this.resolvers.loader)\n+\t\t\t\t\t_this.resolveRequestArray.bind(_this, resolveContextInfo, _this.context, useLoadersPost, _this.resolvers.loader),\n+\t\t\t\t\t_this.resolveRequestArray.bind(_this, resolveContextInfo, _this.context, useLoaders, _this.resolvers.loader),\n+\t\t\t\t\t_this.resolveRequestArray.bind(_this, resolveContextInfo, _this.context, useLoadersPre, _this.resolvers.loader)\n \t\t\t\t], function(err, results) {\n \t\t\t\t\tif(err) return callback(err);\n \t\t\t\t\tloaders = results[0].concat(loaders).concat(results[1]).concat(results[2]);\n-\t\t\t\t\tonDoneResolving();\n+\t\t\t\t\tprocess.nextTick(onDoneResolving);\n \t\t\t\t});\n \n \t\t\t\tfunction onDoneResolving() {\n@@ -207,8 +209,10 @@ NormalModuleFactory.prototype.constructor = NormalModuleFactory;\n \n NormalModuleFactory.prototype.create = function(data, callback) {\n \tvar _this = this;\n-\tvar context = data.context || this.context;\n \tvar dependencies = data.dependencies;\n+\tvar cacheEntry = dependencies[0].__NormalModuleFactoryCache;\n+\tif(cacheEntry) return callback(null, cacheEntry);\n+\tvar context = data.context || this.context;\n \tvar request = dependencies[0].request;\n \tvar contextInfo = data.contextInfo || {};\n \t_this.applyPluginsAsyncWaterfall(\"before-resolve\", {\n@@ -227,7 +231,17 @@ NormalModuleFactory.prototype.create = function(data, callback) {\n \t\t// Ignored\n \t\tif(!factory) return callback();\n \n-\t\tfactory(result, callback);\n+\t\tfactory(result, function(err, module) {\n+\t\t\tif(err) return callback(err);\n+\n+\t\t\tif(module && _this.cachePredicate(module)) {\n+\t\t\t\tdependencies.forEach(function(d) {\n+\t\t\t\t\td.__NormalModuleFactoryCache = module;\n+\t\t\t\t});\n+\t\t\t}\n+\n+\t\t\tcallback(null, module);\n+\t\t});\n \n \t});\n };\n@@ -272,6 +286,6 @@ NormalModuleFactory.prototype.getParser = function getParser(parserOptions) {\n \n NormalModuleFactory.prototype.createParser = function createParser(parserOptions) {\n \tvar parser = new Parser();\n-\tthis.applyPlugins(\"parser\", parser, parserOptions || {});\n+\tthis.applyPlugins2(\"parser\", parser, parserOptions || {});\n \treturn parser;\n };"
      },
      {
        "sha": "5dcb6461dbc181462eb057a093a9f322bf13be9b",
        "filename": "lib/Parser.js",
        "status": "modified",
        "additions": 26,
        "deletions": 26,
        "changes": 52,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FParser.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FParser.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FParser.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -178,7 +178,7 @@ Parser.prototype.initializeEvaluating = function() {\n \t\t\tif(expr.argument.type === \"Identifier\") {\n \t\t\t\tvar name = this.scope.renames[\"$\" + expr.argument.name] || expr.argument.name;\n \t\t\t\tif(this.scope.definitions.indexOf(name) === -1) {\n-\t\t\t\t\tres = this.applyPluginsBailResult(\"evaluate typeof \" + name, expr);\n+\t\t\t\t\tres = this.applyPluginsBailResult1(\"evaluate typeof \" + name, expr);\n \t\t\t\t\tif(res !== undefined) return res;\n \t\t\t\t}\n \t\t\t}\n@@ -193,7 +193,7 @@ Parser.prototype.initializeEvaluating = function() {\n \t\t\t\t\texprName.unshift(this.scope.renames[\"$\" + expression.name] || expression.name);\n \t\t\t\t\tif(this.scope.definitions.indexOf(name) === -1) {\n \t\t\t\t\t\texprName = exprName.join(\".\");\n-\t\t\t\t\t\tres = this.applyPluginsBailResult(\"evaluate typeof \" + exprName, expr);\n+\t\t\t\t\t\tres = this.applyPluginsBailResult1(\"evaluate typeof \" + exprName, expr);\n \t\t\t\t\t\tif(res !== undefined) return res;\n \t\t\t\t\t}\n \t\t\t\t}\n@@ -224,11 +224,11 @@ Parser.prototype.initializeEvaluating = function() {\n \tthis.plugin(\"evaluate Identifier\", function(expr) {\n \t\tvar name = this.scope.renames[\"$\" + expr.name] || expr.name;\n \t\tif(this.scope.definitions.indexOf(expr.name) === -1) {\n-\t\t\tvar result = this.applyPluginsBailResult(\"evaluate Identifier \" + name, expr);\n+\t\t\tvar result = this.applyPluginsBailResult1(\"evaluate Identifier \" + name, expr);\n \t\t\tif(result) return result;\n \t\t\treturn new BasicEvaluatedExpression().setIdentifier(name).setRange(expr.range);\n \t\t} else {\n-\t\t\treturn this.applyPluginsBailResult(\"evaluate defined Identifier \" + name, expr);\n+\t\t\treturn this.applyPluginsBailResult1(\"evaluate defined Identifier \" + name, expr);\n \t\t}\n \t});\n \tthis.plugin(\"evaluate MemberExpression\", function(expression) {\n@@ -246,11 +246,11 @@ Parser.prototype.initializeEvaluating = function() {\n \t\t\t\texprName.unshift(name);\n \t\t\t\texprName = exprName.join(\".\");\n \t\t\t\tif(this.scope.definitions.indexOf(expr.name) === -1) {\n-\t\t\t\t\tvar result = this.applyPluginsBailResult(\"evaluate Identifier \" + exprName, expression);\n+\t\t\t\t\tvar result = this.applyPluginsBailResult1(\"evaluate Identifier \" + exprName, expression);\n \t\t\t\t\tif(result) return result;\n \t\t\t\t\treturn new BasicEvaluatedExpression().setIdentifier(exprName).setRange(expression.range);\n \t\t\t\t} else {\n-\t\t\t\t\treturn this.applyPluginsBailResult(\"evaluate defined Identifier \" + exprName, expression);\n+\t\t\t\t\treturn this.applyPluginsBailResult1(\"evaluate defined Identifier \" + exprName, expression);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -427,7 +427,7 @@ Parser.prototype.isHoistedStatement = function isHoistedStatement(statement) {\n };\n \n Parser.prototype.walkStatement = function walkStatement(statement) {\n-\tif(this.applyPluginsBailResult(\"statement\", statement) !== undefined) return;\n+\tif(this.applyPluginsBailResult1(\"statement\", statement) !== undefined) return;\n \tif(this[\"walk\" + statement.type])\n \t\tthis[\"walk\" + statement.type](statement);\n };\n@@ -442,7 +442,7 @@ Parser.prototype.walkExpressionStatement = function walkExpressionStatement(stat\n };\n \n Parser.prototype.walkIfStatement = function walkIfStatement(statement) {\n-\tvar result = this.applyPluginsBailResult(\"statement if\", statement);\n+\tvar result = this.applyPluginsBailResult1(\"statement if\", statement);\n \tif(result === undefined) {\n \t\tthis.walkExpression(statement.test);\n \t\tthis.walkStatement(statement.consequent);\n@@ -457,7 +457,7 @@ Parser.prototype.walkIfStatement = function walkIfStatement(statement) {\n };\n \n Parser.prototype.walkLabeledStatement = function walkLabeledStatement(statement) {\n-\tvar result = this.applyPluginsBailResult(\"label \" + statement.label.name, statement);\n+\tvar result = this.applyPluginsBailResult1(\"label \" + statement.label.name, statement);\n \tif(result !== true)\n \t\tthis.walkStatement(statement.body);\n };\n@@ -568,7 +568,7 @@ Parser.prototype.walkExportNamedDeclaration = function walkExportNamedDeclaratio\n \t\tvar source = statement.source.value;\n \t\tthis.applyPluginsBailResult(\"export import\", statement, source);\n \t} else {\n-\t\tthis.applyPluginsBailResult(\"export\", statement);\n+\t\tthis.applyPluginsBailResult1(\"export\", statement);\n \t}\n \tif(statement.declaration) {\n \t\tif(/Expression$/.test(statement.declaration.type)) {\n@@ -600,7 +600,7 @@ Parser.prototype.walkExportNamedDeclaration = function walkExportNamedDeclaratio\n };\n \n Parser.prototype.walkExportDefaultDeclaration = function walkExportDefaultDeclaration(statement) {\n-\tthis.applyPluginsBailResult(\"export\", statement);\n+\tthis.applyPluginsBailResult1(\"export\", statement);\n \tif(/Declaration$/.test(statement.declaration.type)) {\n \t\tif(!this.applyPluginsBailResult(\"export declaration\", statement, statement.declaration)) {\n \t\t\tvar pos = this.scope.definitions.length;\n@@ -657,16 +657,16 @@ Parser.prototype.walkVariableDeclarators = function walkVariableDeclarators(decl\n \t\tswitch(declarator.type) {\n \t\t\tcase \"VariableDeclarator\":\n \t\t\t\tvar renameIdentifier = declarator.init && _this.getRenameIdentifier(declarator.init);\n-\t\t\t\tif(renameIdentifier && declarator.id.type === \"Identifier\" && _this.applyPluginsBailResult(\"can-rename \" + renameIdentifier, declarator.init)) {\n+\t\t\t\tif(renameIdentifier && declarator.id.type === \"Identifier\" && _this.applyPluginsBailResult1(\"can-rename \" + renameIdentifier, declarator.init)) {\n \t\t\t\t\t// renaming with \"var a = b;\"\n-\t\t\t\t\tif(!_this.applyPluginsBailResult(\"rename \" + renameIdentifier, declarator.init)) {\n+\t\t\t\t\tif(!_this.applyPluginsBailResult1(\"rename \" + renameIdentifier, declarator.init)) {\n \t\t\t\t\t\t_this.scope.renames[\"$\" + declarator.id.name] = _this.scope.renames[\"$\" + renameIdentifier] || renameIdentifier;\n \t\t\t\t\t\tvar idx = _this.scope.definitions.indexOf(declarator.id.name);\n \t\t\t\t\t\tif(idx >= 0) _this.scope.definitions.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\t_this.enterPattern(declarator.id, function(name, decl) {\n-\t\t\t\t\t\tif(!_this.applyPluginsBailResult(\"var \" + name, decl)) {\n+\t\t\t\t\t\tif(!_this.applyPluginsBailResult1(\"var \" + name, decl)) {\n \t\t\t\t\t\t\t_this.scope.renames[\"$\" + name] = undefined;\n \t\t\t\t\t\t\t_this.scope.definitions.push(name);\n \t\t\t\t\t\t}\n@@ -759,7 +759,7 @@ Parser.prototype.walkUnaryExpression = function walkUnaryExpression(expression)\n \t\tif(expr.type === \"Identifier\" && this.scope.definitions.indexOf(expr.name) === -1) {\n \t\t\texprName.unshift(this.scope.renames[\"$\" + expr.name] || expr.name);\n \t\t\texprName = exprName.join(\".\");\n-\t\t\tvar result = this.applyPluginsBailResult(\"typeof \" + exprName, expression);\n+\t\t\tvar result = this.applyPluginsBailResult1(\"typeof \" + exprName, expression);\n \t\t\tif(result === true)\n \t\t\t\treturn;\n \t\t}\n@@ -775,19 +775,19 @@ Parser.prototype.walkBinaryExpression =\n \n Parser.prototype.walkAssignmentExpression = function walkAssignmentExpression(expression) {\n \tvar renameIdentifier = this.getRenameIdentifier(expression.right);\n-\tif(expression.left.type === \"Identifier\" && renameIdentifier && this.applyPluginsBailResult(\"can-rename \" + renameIdentifier, expression.right)) {\n+\tif(expression.left.type === \"Identifier\" && renameIdentifier && this.applyPluginsBailResult1(\"can-rename \" + renameIdentifier, expression.right)) {\n \t\t// renaming \"a = b;\"\n-\t\tif(!this.applyPluginsBailResult(\"rename \" + renameIdentifier, expression.right)) {\n+\t\tif(!this.applyPluginsBailResult1(\"rename \" + renameIdentifier, expression.right)) {\n \t\t\tthis.scope.renames[\"$\" + expression.left.name] = renameIdentifier;\n \t\t\tvar idx = this.scope.definitions.indexOf(expression.left.name);\n \t\t\tif(idx >= 0) this.scope.definitions.splice(idx, 1);\n \t\t}\n \t} else if(expression.left.type === \"Identifier\") {\n-\t\tif(!this.applyPluginsBailResult(\"assigned \" + expression.left.name, expression)) {\n+\t\tif(!this.applyPluginsBailResult1(\"assigned \" + expression.left.name, expression)) {\n \t\t\tthis.walkExpression(expression.right);\n \t\t}\n \t\tthis.scope.renames[\"$\" + expression.left.name] = undefined;\n-\t\tif(!this.applyPluginsBailResult(\"assign \" + expression.left.name, expression)) {\n+\t\tif(!this.applyPluginsBailResult1(\"assign \" + expression.left.name, expression)) {\n \t\t\tthis.walkExpression(expression.left);\n \t\t}\n \t} else {\n@@ -798,7 +798,7 @@ Parser.prototype.walkAssignmentExpression = function walkAssignmentExpression(ex\n };\n \n Parser.prototype.walkConditionalExpression = function walkConditionalExpression(expression) {\n-\tvar result = this.applyPluginsBailResult(\"expression ?:\", expression);\n+\tvar result = this.applyPluginsBailResult1(\"expression ?:\", expression);\n \tif(result === undefined) {\n \t\tthis.walkExpression(expression.test);\n \t\tthis.walkExpression(expression.consequent);\n@@ -846,8 +846,8 @@ Parser.prototype.walkCallExpression = function walkCallExpression(expression) {\n \t\tvar params = functionExpression.params;\n \t\targs = args.map(function(arg) {\n \t\t\tvar renameIdentifier = this.getRenameIdentifier(arg);\n-\t\t\tif(renameIdentifier && this.applyPluginsBailResult(\"can-rename \" + renameIdentifier, arg)) {\n-\t\t\t\tif(!this.applyPluginsBailResult(\"rename \" + renameIdentifier, arg))\n+\t\t\tif(renameIdentifier && this.applyPluginsBailResult1(\"can-rename \" + renameIdentifier, arg)) {\n+\t\t\t\tif(!this.applyPluginsBailResult1(\"rename \" + renameIdentifier, arg))\n \t\t\t\t\treturn renameIdentifier;\n \t\t\t}\n \t\t\tthis.walkExpression(arg);\n@@ -890,7 +890,7 @@ Parser.prototype.walkCallExpression = function walkCallExpression(expression) {\n \n \t\tvar callee = this.evaluateExpression(expression.callee);\n \t\tif(callee.isIdentifier()) {\n-\t\t\tresult = this.applyPluginsBailResult(\"call \" + callee.identifier, expression);\n+\t\t\tresult = this.applyPluginsBailResult1(\"call \" + callee.identifier, expression);\n \t\t\tif(result === true)\n \t\t\t\treturn;\n \t\t}\n@@ -913,11 +913,11 @@ Parser.prototype.walkMemberExpression = function walkMemberExpression(expression\n \t}\n \tif(expr.type === \"Identifier\" && this.scope.definitions.indexOf(expr.name) === -1) {\n \t\texprName.unshift(this.scope.renames[\"$\" + expr.name] || expr.name);\n-\t\tvar result = this.applyPluginsBailResult(\"expression \" + exprName.join(\".\"), expression);\n+\t\tvar result = this.applyPluginsBailResult1(\"expression \" + exprName.join(\".\"), expression);\n \t\tif(result === true)\n \t\t\treturn;\n \t\texprName[exprName.length - 1] = \"*\";\n-\t\tresult = this.applyPluginsBailResult(\"expression \" + exprName.join(\".\"), expression);\n+\t\tresult = this.applyPluginsBailResult1(\"expression \" + exprName.join(\".\"), expression);\n \t\tif(result === true)\n \t\t\treturn;\n \t}\n@@ -928,7 +928,7 @@ Parser.prototype.walkMemberExpression = function walkMemberExpression(expression\n \n Parser.prototype.walkIdentifier = function walkIdentifier(expression) {\n \tif(this.scope.definitions.indexOf(expression.name) === -1) {\n-\t\tvar result = this.applyPluginsBailResult(\"expression \" + (this.scope.renames[\"$\" + expression.name] || expression.name), expression);\n+\t\tvar result = this.applyPluginsBailResult1(\"expression \" + (this.scope.renames[\"$\" + expression.name] || expression.name), expression);\n \t\tif(result === true)\n \t\t\treturn;\n \t}"
      },
      {
        "sha": "d88892b5c4007077c52c3143227079957ba4a4da",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -283,15 +283,16 @@ WebpackOptionsApply.prototype.process = function(options, compiler) {\n \t}\n \n \tcompiler.applyPlugins(\"after-plugins\", compiler);\n+\tif(!compiler.inputFileSystem) throw new Error(\"No input filesystem provided\");\n \tcompiler.resolvers.normal = ResolverFactory.createResolver(assign({\n-\t\tresolver: compiler.resolvers.normal\n+\t\tfileSystem: compiler.inputFileSystem\n \t}, options.resolve));\n \tcompiler.resolvers.context = ResolverFactory.createResolver(assign({\n-\t\tresolver: compiler.resolvers.context,\n+\t\tfileSystem: compiler.inputFileSystem,\n \t\tresolveToContext: true\n \t}, options.resolve));\n \tcompiler.resolvers.loader = ResolverFactory.createResolver(assign({\n-\t\tresolver: compiler.resolvers.loader\n+\t\tfileSystem: compiler.inputFileSystem\n \t}, options.resolveLoader));\n \tcompiler.applyPlugins(\"after-resolvers\", compiler);\n \treturn options;"
      },
      {
        "sha": "14197f2ea6c3e2410108af713bd059fb32071e3c",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -25,6 +25,8 @@ function WebpackOptionsDefaulter() {\n \tthis.set(\"module.wrappedContextRecursive\", true);\n \tthis.set(\"module.wrappedContextCritical\", false);\n \n+\tthis.set(\"module.unsafeCache\", true);\n+\n \tthis.set(\"output\", \"call\", function(value, options) {\n \t\tif(typeof value === \"string\") {\n \t\t\treturn {"
      },
      {
        "sha": "1031741ec8e4425ce6946731c383e86a9c882555",
        "filename": "lib/dependencies/AMDPlugin.js",
        "status": "modified",
        "additions": 16,
        "deletions": 14,
        "changes": 30,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fdependencies%2FAMDPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fdependencies%2FAMDPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fdependencies%2FAMDPlugin.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -118,18 +118,20 @@ AMDPlugin.prototype.apply = function(compiler) {\n \t\t\tsetTypeof(\"require\", \"function\");\n \t\t});\n \t});\n-\tcompiler.resolvers.normal.apply(\n-\t\tnew AliasPlugin(\"described-resolve\", {\n-\t\t\tname: \"amdefine\",\n-\t\t\talias: path.join(__dirname, \"..\", \"..\", \"buildin\", \"amd-define.js\")\n-\t\t}, \"resolve\"),\n-\t\tnew AliasPlugin(\"described-resolve\", {\n-\t\t\tname: \"webpack amd options\",\n-\t\t\talias: path.join(__dirname, \"..\", \"..\", \"buildin\", \"amd-options.js\")\n-\t\t}, \"resolve\"),\n-\t\tnew AliasPlugin(\"described-resolve\", {\n-\t\t\tname: \"webpack amd define\",\n-\t\t\talias: path.join(__dirname, \"..\", \"..\", \"buildin\", \"amd-define.js\")\n-\t\t}, \"resolve\")\n-\t);\n+\tcompiler.plugin(\"after-resolvers\", function() {\n+\t\tcompiler.resolvers.normal.apply(\n+\t\t\tnew AliasPlugin(\"described-resolve\", {\n+\t\t\t\tname: \"amdefine\",\n+\t\t\t\talias: path.join(__dirname, \"..\", \"..\", \"buildin\", \"amd-define.js\")\n+\t\t\t}, \"resolve\"),\n+\t\t\tnew AliasPlugin(\"described-resolve\", {\n+\t\t\t\tname: \"webpack amd options\",\n+\t\t\t\talias: path.join(__dirname, \"..\", \"..\", \"buildin\", \"amd-options.js\")\n+\t\t\t}, \"resolve\"),\n+\t\t\tnew AliasPlugin(\"described-resolve\", {\n+\t\t\t\tname: \"webpack amd define\",\n+\t\t\t\talias: path.join(__dirname, \"..\", \"..\", \"buildin\", \"amd-define.js\")\n+\t\t\t}, \"resolve\")\n+\t\t);\n+\t});\n };"
      },
      {
        "sha": "5d49d09aa8e9a7d129255dbf9a0108ad679a5e98",
        "filename": "lib/node/NodeEnvironmentPlugin.js",
        "status": "modified",
        "additions": 2,
        "deletions": 5,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fnode%2FNodeEnvironmentPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fnode%2FNodeEnvironmentPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fnode%2FNodeEnvironmentPlugin.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -10,11 +10,8 @@ var CachedInputFileSystem = require(\"enhanced-resolve/lib/CachedInputFileSystem\"\n function NodeEnvironmentPlugin() {}\n module.exports = NodeEnvironmentPlugin;\n NodeEnvironmentPlugin.prototype.apply = function(compiler) {\n-\tcompiler.inputFileSystem = new NodeJsInputFileSystem();\n-\tvar inputFileSystem = compiler.inputFileSystem = new CachedInputFileSystem(compiler.inputFileSystem, 60000);\n-\tcompiler.resolvers.normal.fileSystem = compiler.inputFileSystem;\n-\tcompiler.resolvers.context.fileSystem = compiler.inputFileSystem;\n-\tcompiler.resolvers.loader.fileSystem = compiler.inputFileSystem;\n+\tcompiler.inputFileSystem = new CachedInputFileSystem(new NodeJsInputFileSystem(), 60000);\n+\tvar inputFileSystem = compiler.inputFileSystem;\n \tcompiler.outputFileSystem = new NodeOutputFileSystem();\n \tcompiler.watchFileSystem = new NodeWatchFileSystem(compiler.inputFileSystem);\n \tcompiler.plugin(\"before-run\", function(compiler, callback) {"
      },
      {
        "sha": "bd627c75977daef81b7783e265af543942281e54",
        "filename": "lib/optimize/OccurrenceOrderPlugin.js",
        "status": "modified",
        "additions": 18,
        "deletions": 3,
        "changes": 21,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Foptimize%2FOccurrenceOrderPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Foptimize%2FOccurrenceOrderPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FOccurrenceOrderPlugin.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -23,23 +23,27 @@ OccurrenceOrderPlugin.prototype.apply = function(compiler) {\n \t\t\t}\n \n \t\t\tfunction occursInEntry(m) {\n-\t\t\t\treturn m.reasons.map(function(r) {\n+\t\t\t\tif(typeof m.__OccurenceOrderPlugin_occursInEntry === \"number\") return m.__OccurenceOrderPlugin_occursInEntry;\n+\t\t\t\tvar result = m.reasons.map(function(r) {\n \t\t\t\t\tif(!r.module) return 0;\n \t\t\t\t\treturn entryChunks(r.module);\n \t\t\t\t}).reduce(function(a, b) {\n \t\t\t\t\treturn a + b;\n \t\t\t\t}, 0) + entryChunks(m);\n+\t\t\t\treturn m.__OccurenceOrderPlugin_occursInEntry = result;\n \t\t\t}\n \n \t\t\tfunction occurs(m) {\n-\t\t\t\treturn m.reasons.map(function(r) {\n+\t\t\t\tif(typeof m.__OccurenceOrderPlugin_occurs === \"number\") return m.__OccurenceOrderPlugin_occurs;\n+\t\t\t\tvar result = m.reasons.map(function(r) {\n \t\t\t\t\tif(!r.module) return 0;\n \t\t\t\t\treturn r.module.chunks.length;\n \t\t\t\t}).reduce(function(a, b) {\n \t\t\t\t\treturn a + b;\n \t\t\t\t}, 0) + m.chunks.length + m.chunks.filter(function(c) {\n \t\t\t\t\tc.entryModule === m;\n \t\t\t\t}).length;\n+\t\t\t\treturn m.__OccurenceOrderPlugin_occurs = result;\n \t\t\t}\n \t\t\tmodules.sort(function(a, b) {\n \t\t\t\tif(preferEntry) {\n@@ -56,12 +60,19 @@ OccurrenceOrderPlugin.prototype.apply = function(compiler) {\n \t\t\t\tif(a.identifier() < b.identifier()) return -1;\n \t\t\t\treturn 0;\n \t\t\t});\n+\t\t\t// TODO refactor to Map\n+\t\t\tmodules.forEach(function(m) {\n+\t\t\t\tm.__OccurenceOrderPlugin_occursInEntry = undefined;\n+\t\t\t\tm.__OccurenceOrderPlugin_occurs = undefined;\n+\t\t\t});\n \t\t});\n \t\tcompilation.plugin(\"optimize-chunk-order\", function(chunks) {\n \t\t\tfunction occursInEntry(c) {\n-\t\t\t\treturn c.parents.filter(function(p) {\n+\t\t\t\tif(typeof c.__OccurenceOrderPlugin_occursInEntry === \"number\") return c.__OccurenceOrderPlugin_occursInEntry;\n+\t\t\t\tvar result = c.parents.filter(function(p) {\n \t\t\t\t\treturn p.isInitial();\n \t\t\t\t}).length;\n+\t\t\t\treturn c.__OccurenceOrderPlugin_occursInEntry = result;\n \t\t\t}\n \n \t\t\tfunction occurs(c) {\n@@ -91,6 +102,10 @@ OccurrenceOrderPlugin.prototype.apply = function(compiler) {\n \t\t\t\t}\n \t\t\t\treturn 0;\n \t\t\t});\n+\t\t\t// TODO refactor to Map\n+\t\t\tchunks.forEach(function(c) {\n+\t\t\t\tc.__OccurenceOrderPlugin_occursInEntry = undefined;\n+\t\t\t});\n \t\t});\n \t});\n };"
      },
      {
        "sha": "03abf83a7cddec9f7381a2b27c03a7b4f9528678",
        "filename": "lib/web/WebEnvironmentPlugin.js",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fweb%2FWebEnvironmentPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fweb%2FWebEnvironmentPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fweb%2FWebEnvironmentPlugin.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -9,8 +9,5 @@ function WebEnvironmentPlugin(inputFileSystem, outputFileSystem) {\n module.exports = WebEnvironmentPlugin;\n WebEnvironmentPlugin.prototype.apply = function(compiler) {\n \tvar inputFileSystem = compiler.inputFileSystem = this.inputFileSystem;\n-\tcompiler.resolvers.normal.fileSystem = inputFileSystem;\n-\tcompiler.resolvers.context.fileSystem = inputFileSystem;\n-\tcompiler.resolvers.loader.fileSystem = inputFileSystem;\n \tcompiler.outputFileSystem = this.outputFileSystem;\n };"
      },
      {
        "sha": "acccc04129c9c347adc08087d1a7b7f9b531e0d9",
        "filename": "lib/webpack.js",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fwebpack.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/lib%2Fwebpack.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fwebpack.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -25,11 +25,11 @@ function webpack(options, callback) {\n \t\tnew WebpackOptionsDefaulter().process(options);\n \n \t\tcompiler = new Compiler();\n-\t\tcompiler.options = options;\n-\t\tcompiler.options = new WebpackOptionsApply().process(options, compiler);\n \t\tnew NodeEnvironmentPlugin().apply(compiler);\n \t\tcompiler.applyPlugins(\"environment\");\n \t\tcompiler.applyPlugins(\"after-environment\");\n+\t\tcompiler.options = options;\n+\t\tcompiler.options = new WebpackOptionsApply().process(options, compiler);\n \t} else {\n \t\tthrow new Error(\"Invalid argument: options\");\n \t}"
      },
      {
        "sha": "4d09cfc95f92ebdf3e8b84c0f6e1fd3d461df0cd",
        "filename": "package.json",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/package.json",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/package.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/package.json?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -9,7 +9,7 @@\n     \"ajv\": \"^4.7.0\",\n     \"ajv-keywords\": \"^1.1.1\",\n     \"async\": \"^2.1.2\",\n-    \"enhanced-resolve\": \"^2.2.0\",\n+    \"enhanced-resolve\": \"^3.0.0\",\n     \"interpret\": \"^1.0.0\",\n     \"json-loader\": \"^0.5.4\",\n     \"loader-runner\": \"^2.2.0\",\n@@ -20,7 +20,7 @@\n     \"object-assign\": \"^4.0.1\",\n     \"source-map\": \"^0.5.3\",\n     \"supports-color\": \"^3.1.0\",\n-    \"tapable\": \"~0.2.3\",\n+    \"tapable\": \"~0.2.5\",\n     \"uglify-js\": \"~2.7.3\",\n     \"watchpack\": \"^1.0.0\",\n     \"webpack-sources\": \"^0.1.0\","
      },
      {
        "sha": "2252a97351a2709313af73882f631a1ad1342e0b",
        "filename": "schemas/webpackOptionsSchema.json",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/schemas%2FwebpackOptionsSchema.json",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/schemas%2FwebpackOptionsSchema.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FwebpackOptionsSchema.json?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -187,6 +187,16 @@\n         \"unknownContextRequest\": {\n           \"type\": \"string\"\n         },\n+        \"unsafeCache\": {\n+          \"anyOf\": [\n+            {\n+              \"type\": \"boolean\"\n+            },\n+            {\n+              \"instanceof\": \"Function\"\n+            }\n+          ]\n+        },\n         \"wrappedContextCritical\": {\n           \"type\": \"boolean\"\n         },\n@@ -461,6 +471,9 @@\n               \"type\": \"object\"\n             }\n           ]\n+        },\n+        \"useSyncFileSystemCalls\": {\n+          \"type\": \"boolean\"\n         }\n       },\n       \"type\": \"object\""
      },
      {
        "sha": "b6ebf0f5a526ee0837d91e1852f828ef6e506860",
        "filename": "test/Compiler-caching.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/test%2FCompiler-caching.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/test%2FCompiler-caching.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FCompiler-caching.test.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -23,8 +23,8 @@ describe(\"Compiler (caching)\", function() {\n \t\t};\n \n \t\tvar c = new Compiler();\n-\t\tc.options = new WebpackOptionsApply().process(options, c);\n \t\tnew NodeEnvironmentPlugin().apply(c);\n+\t\tc.options = new WebpackOptionsApply().process(options, c);\n \t\tvar files = {};\n \t\tc.outputFileSystem = {\n \t\t\tjoin: path.join.bind(path),"
      },
      {
        "sha": "399c3ca8eb9cea7eb7959b4f94e7f5a3f61de789",
        "filename": "test/Compiler.test.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/test%2FCompiler.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/test%2FCompiler.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FCompiler.test.js?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -20,8 +20,8 @@ describe(\"Compiler\", function() {\n \t\t};\n \n \t\tvar c = new Compiler();\n-\t\tc.options = new WebpackOptionsApply().process(options, c);\n \t\tnew NodeEnvironmentPlugin().apply(c);\n+\t\tc.options = new WebpackOptionsApply().process(options, c);\n \t\tvar files = {};\n \t\tc.outputFileSystem = {\n \t\t\tjoin: path.join.bind(path),"
      },
      {
        "sha": "a1fa8cbbd07cac5947c3e27a2991311606f6e0dd",
        "filename": "test/statsCases/aggressive-splitting-entry/expected.txt",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Faggressive-splitting-entry%2Fexpected.txt?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -1,21 +1,21 @@\n-Hash: 8e46421d7f7a7d266a00\n+Hash: 94ea214f5f8dfcaa01e7\n Time: Xms\n                   Asset       Size  Chunks             Chunk Names\n 48c8b1dae03a37363ec8.js    4.24 kB       1  [emitted]  \n-2fa7af5012a3d8b778dd.js    2.22 kB       2  [emitted]  \n-a5b577236621262c2bcf.js    1.93 kB       3  [emitted]  \n+7ae90280671106fd3e86.js    2.22 kB       2  [emitted]  \n+9356e9a0fb00a97b2e73.js    1.93 kB       3  [emitted]  \n 88d78642a86768757078.js  977 bytes       4  [emitted]  \n-Entrypoint main = 48c8b1dae03a37363ec8.js a5b577236621262c2bcf.js 88d78642a86768757078.js 2fa7af5012a3d8b778dd.js\n+Entrypoint main = 48c8b1dae03a37363ec8.js 9356e9a0fb00a97b2e73.js 88d78642a86768757078.js 7ae90280671106fd3e86.js\n chunk    {1} 48c8b1dae03a37363ec8.js 1.8 kB [entry] [rendered]\n     > aggressive-splitted main [4] (webpack)/test/statsCases/aggressive-splitting-entry/index.js \n     [0] (webpack)/test/statsCases/aggressive-splitting-entry/b.js 899 bytes {1} [built]\n     [1] (webpack)/test/statsCases/aggressive-splitting-entry/c.js 899 bytes {1} [built]\n-chunk    {2} 2fa7af5012a3d8b778dd.js 1.91 kB [initial] [rendered]\n+chunk    {2} 7ae90280671106fd3e86.js 1.91 kB [initial] [rendered]\n     > aggressive-splitted main [4] (webpack)/test/statsCases/aggressive-splitting-entry/index.js \n     [4] (webpack)/test/statsCases/aggressive-splitting-entry/index.js 112 bytes {2} [built]\n     [6] (webpack)/test/statsCases/aggressive-splitting-entry/f.js 899 bytes {2} [built]\n     [7] (webpack)/test/statsCases/aggressive-splitting-entry/g.js 899 bytes {2} [built]\n-chunk    {3} a5b577236621262c2bcf.js 1.8 kB [initial] [rendered] [recorded]\n+chunk    {3} 9356e9a0fb00a97b2e73.js 1.8 kB [initial] [rendered] [recorded]\n     > aggressive-splitted main [4] (webpack)/test/statsCases/aggressive-splitting-entry/index.js \n     [2] (webpack)/test/statsCases/aggressive-splitting-entry/d.js 899 bytes {3} [built]\n     [5] (webpack)/test/statsCases/aggressive-splitting-entry/a.js 899 bytes {3} [built]"
      },
      {
        "sha": "0fa13907acda705e5cc952f2beb84b47d48c3e99",
        "filename": "test/statsCases/aggressive-splitting-on-demand/expected.txt",
        "status": "modified",
        "additions": 18,
        "deletions": 18,
        "changes": 36,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Faggressive-splitting-on-demand%2Fexpected.txt?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -1,49 +1,49 @@\n-Hash: a562f01542f9b2e2ad89\n+Hash: a724b9eabbc88a7196a7\n Time: Xms\n                   Asset       Size  Chunks             Chunk Names\n-7434ce273df5c166f742.js    1.93 kB       0  [emitted]  \n-11324f155de813ceb658.js    1.95 kB       1  [emitted]  \n-5ae9e18455b866684bd0.js    1.94 kB       2  [emitted]  \n-e91ec4902ca3057b42bb.js    1.93 kB       3  [emitted]  \n-0947f0875d56ab0bfe02.js  977 bytes       4  [emitted]  \n-6335d9dcc7fa048743b7.js     7.2 kB       6  [emitted]  main\n-cf500be0e585f01d2ccb.js  983 bytes       9  [emitted]  \n-a7bfb642a544b4302cc4.js  975 bytes      11  [emitted]  \n-Entrypoint main = 6335d9dcc7fa048743b7.js\n-chunk    {0} 7434ce273df5c166f742.js 1.8 kB {6} [recorded]\n+fc930a2adf8206ea2dc5.js    1.93 kB       0  [emitted]  \n+cd45585186d59208602b.js    1.95 kB       1  [emitted]  \n+6b94c231e016c5aaccdb.js    1.94 kB       2  [emitted]  \n+fd0985cee894c4f3f1a6.js    1.93 kB       3  [emitted]  \n+d9fc46873c8ea924b895.js  977 bytes       4  [emitted]  \n+90b55464dc36b9c472a9.js     7.2 kB       6  [emitted]  main\n+b08c507d4e1e05cbab45.js  983 bytes       9  [emitted]  \n+5d50e858fe6e559aa47c.js  975 bytes      11  [emitted]  \n+Entrypoint main = 90b55464dc36b9c472a9.js\n+chunk    {0} fc930a2adf8206ea2dc5.js 1.8 kB {6}\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 4:0-51\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 5:0-44\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 6:0-72\n     [5] (webpack)/test/statsCases/aggressive-splitting-on-demand/f.js 899 bytes {0} [built]\n     [6] (webpack)/test/statsCases/aggressive-splitting-on-demand/g.js 901 bytes {0} [built]\n-chunk    {1} 11324f155de813ceb658.js 1.8 kB {6}\n+chunk    {1} cd45585186d59208602b.js 1.8 kB {6} [recorded]\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 3:0-30\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 5:0-44\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 6:0-72\n     [3] (webpack)/test/statsCases/aggressive-splitting-on-demand/d.js 899 bytes {1} [built]\n     [4] (webpack)/test/statsCases/aggressive-splitting-on-demand/e.js 899 bytes {1} [built]\n-chunk    {2} 5ae9e18455b866684bd0.js 1.8 kB {6} [recorded]\n+chunk    {2} 6b94c231e016c5aaccdb.js 1.8 kB {6}\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 4:0-51\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 6:0-72\n    [10] (webpack)/test/statsCases/aggressive-splitting-on-demand/j.js 901 bytes {2} [built]\n    [11] (webpack)/test/statsCases/aggressive-splitting-on-demand/k.js 899 bytes {2} [built]\n-chunk    {3} e91ec4902ca3057b42bb.js 1.8 kB {6}\n+chunk    {3} fd0985cee894c4f3f1a6.js 1.8 kB {6} [recorded]\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 4:0-51\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 6:0-72\n     [7] (webpack)/test/statsCases/aggressive-splitting-on-demand/h.js 899 bytes {3} [built]\n     [8] (webpack)/test/statsCases/aggressive-splitting-on-demand/i.js 899 bytes {3} [built]\n-chunk    {4} 0947f0875d56ab0bfe02.js 899 bytes {6} [rendered]\n+chunk    {4} d9fc46873c8ea924b895.js 899 bytes {6}\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 2:0-23\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 3:0-30\n     [2] (webpack)/test/statsCases/aggressive-splitting-on-demand/c.js 899 bytes {4} [built]\n-chunk    {6} 6335d9dcc7fa048743b7.js (main) 248 bytes [entry] [rendered]\n+chunk    {6} 90b55464dc36b9c472a9.js (main) 248 bytes [entry]\n     > main [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js \n     [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 248 bytes {6} [built]\n-chunk    {9} cf500be0e585f01d2ccb.js 899 bytes {6}\n+chunk    {9} b08c507d4e1e05cbab45.js 899 bytes {6}\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 2:0-23\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 5:0-44\n     > aggressive-splitted duplicate [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 6:0-72\n     [1] (webpack)/test/statsCases/aggressive-splitting-on-demand/b.js 899 bytes {9} [built]\n-chunk   {11} a7bfb642a544b4302cc4.js 899 bytes {6}\n+chunk   {11} 5d50e858fe6e559aa47c.js 899 bytes {6}\n     > [9] (webpack)/test/statsCases/aggressive-splitting-on-demand/index.js 1:0-16\n     [0] (webpack)/test/statsCases/aggressive-splitting-on-demand/a.js 899 bytes {11} [built]\n\\ No newline at end of file"
      },
      {
        "sha": "edc17592c47463f64f51c54aa7cfed50e1f308c7",
        "filename": "test/statsCases/external/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Fexternal%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Fexternal%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fexternal%2Fexpected.txt?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -1,4 +1,4 @@\n-Hash: 5957a4911072fb217ca1\n+Hash: 2f2e1a6509026c675e46\n Time: Xms\n   Asset     Size  Chunks             Chunk Names\n main.js  2.64 kB       0  [emitted]  main"
      },
      {
        "sha": "d908d081708bf64cc5ab8791e2b7a36f3a5ed463",
        "filename": "test/statsCases/optimize-chunks/expected.txt",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Foptimize-chunks%2Fexpected.txt?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -1,4 +1,4 @@\n-Hash: 2c7426d5dd5764a5cfe8\n+Hash: 98677d85dd05d16cbe7f\n Time: Xms\n   Asset       Size  Chunks             Chunk Names\n    0.js  220 bytes       0  [emitted]  cir1\n@@ -9,7 +9,7 @@ Time: Xms\n    5.js  293 bytes    5, 3  [emitted]  cir2 from cir1\n    6.js   78 bytes       6  [emitted]  ac in ab\n main.js    6.45 kB       7  [emitted]  main\n-chunk    {0} 0.js (cir1) 81 bytes {7} {5} {3} [rendered]\n+chunk    {0} 0.js (cir1) 81 bytes {3} {5} {7} [rendered]\n     > duplicate cir1 from cir2 [3] (webpack)/test/statsCases/optimize-chunks/circular2.js 1:0-79\n     > duplicate cir1 [8] (webpack)/test/statsCases/optimize-chunks/index.js 13:0-54\n     [2] (webpack)/test/statsCases/optimize-chunks/circular1.js 81 bytes {0} [built]\n@@ -25,7 +25,7 @@ chunk    {2} 2.js (ab) 0 bytes {7} [rendered]\n chunk    {3} 3.js (cir2) 81 bytes {7} [rendered]\n     > cir2 [8] (webpack)/test/statsCases/optimize-chunks/index.js 14:0-54\n     [3] (webpack)/test/statsCases/optimize-chunks/circular2.js 81 bytes {3} {5} [built]\n-chunk    {4} 4.js (chunk) 0 bytes {6} {1} [rendered]\n+chunk    {4} 4.js (chunk) 0 bytes {1} {6} [rendered]\n     > chunk [8] (webpack)/test/statsCases/optimize-chunks/index.js 3:2-4:13\n     > chunk [8] (webpack)/test/statsCases/optimize-chunks/index.js 9:1-10:12\n     [4] (webpack)/test/statsCases/optimize-chunks/modules/c.js 0 bytes {4} {6} [built]"
      },
      {
        "sha": "d8d8445425c7726858cc577ec4544466528b232a",
        "filename": "test/statsCases/tree-shaking/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Ftree-shaking%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/2817c3629de4d94d0a831a888183898cc261b02b/test%2FstatsCases%2Ftree-shaking%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Ftree-shaking%2Fexpected.txt?ref=2817c3629de4d94d0a831a888183898cc261b02b",
        "patch": "@@ -1,4 +1,4 @@\n-Hash: 37c14a3d270eb3a66a74\n+Hash: e94a2c6bee98efb02ae8\n Time: Xms\n     Asset     Size  Chunks             Chunk Names\n bundle.js  7.14 kB       0  [emitted]  main"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/4646",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/4646/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/4646/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/4646/events",
    "html_url": "https://github.com/webpack/webpack/pull/4646",
    "id": 219586296,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTE0Mzc5MDEx",
    "number": 4646,
    "title": "unify makeRelative method",
    "user": {
      "login": "timse",
      "id": 749171,
      "node_id": "MDQ6VXNlcjc0OTE3MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/749171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timse",
      "html_url": "https://github.com/timse",
      "followers_url": "https://api.github.com/users/timse/followers",
      "following_url": "https://api.github.com/users/timse/following{/other_user}",
      "gists_url": "https://api.github.com/users/timse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timse/subscriptions",
      "organizations_url": "https://api.github.com/users/timse/orgs",
      "repos_url": "https://api.github.com/users/timse/repos",
      "events_url": "https://api.github.com/users/timse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timse/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 572712741,
        "node_id": "MDU6TGFiZWw1NzI3MTI3NDE=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok",
        "name": "PR: CI-ok",
        "color": "0e8a16",
        "default": false,
        "description": null
      },
      {
        "id": 575750680,
        "node_id": "MDU6TGFiZWw1NzU3NTA2ODA=",
        "url": "https://api.github.com/repos/webpack/webpack/labels/PR:%20reviewed-approved",
        "name": "PR: reviewed-approved",
        "color": "0e8a16",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2017-04-05T13:40:37Z",
    "updated_at": "2017-04-05T16:41:44Z",
    "closed_at": "2017-04-05T16:41:34Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/4646",
      "html_url": "https://github.com/webpack/webpack/pull/4646",
      "diff_url": "https://github.com/webpack/webpack/pull/4646.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/4646.patch",
      "merged_at": "2017-04-05T16:41:34Z"
    },
    "body": "**What kind of change does this PR introduce?**\r\n\r\nrefactoring\r\n\r\n**Did you add tests for your changes?**\r\n\r\nYes\r\n\r\n**If relevant, link to documentation update:**\r\n\r\nN/A\r\n\r\n**Summary**\r\n\r\nReplacement  for #4148 maybe this is good enough performance wise.\r\nSpeeds up unifies the `makeRelative` methods used in AggressiveSplittingPlugin and RecordIdsPlugin\r\n\r\n**Does this PR introduce a breaking change?**\r\n\r\nNo\r\n\r\n**Other information**\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/4646/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/4646/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "ead7437f66e505381c2ea175b875f5c85cc3173c",
        "filename": "lib/RecordIdsPlugin.js",
        "status": "modified",
        "additions": 4,
        "deletions": 15,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/ed51e2ff2c90fa7f589999254c858db749349074/lib%2FRecordIdsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ed51e2ff2c90fa7f589999254c858db749349074/lib%2FRecordIdsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FRecordIdsPlugin.js?ref=ed51e2ff2c90fa7f589999254c858db749349074",
        "patch": "@@ -4,29 +4,18 @@\n */\n \"use strict\";\n \n-const path = require(\"path\");\n+const identifierUtils = require(\"./util/identifier\");\n \n class RecordIdsPlugin {\n \n-\tstatic looksLikeAbsolutePath(maybeAbsolutePath) {\n-\t\treturn /^(?:[a-z]:\\\\|\\/)/i.test(maybeAbsolutePath);\n-\t}\n-\n-\tstatic makeRelative(context, identifier) {\n-\t\treturn identifier\n-\t\t\t.split(/([|! ])/)\n-\t\t\t.map(str => RecordIdsPlugin.looksLikeAbsolutePath(str) ? path.relative(context, str) : str)\n-\t\t\t.join(\"\");\n-\t}\n-\n \tapply(compiler) {\n \t\tcompiler.plugin(\"compilation\", compilation => {\n \t\t\tcompilation.plugin(\"record-modules\", (modules, records) => {\n \t\t\t\tif(!records.modules) records.modules = {};\n \t\t\t\tif(!records.modules.byIdentifier) records.modules.byIdentifier = {};\n \t\t\t\tif(!records.modules.usedIds) records.modules.usedIds = {};\n \t\t\t\tmodules.forEach(function(module) {\n-\t\t\t\t\tif(!module.portableId) module.portableId = RecordIdsPlugin.makeRelative(compiler.context, module.identifier());\n+\t\t\t\t\tif(!module.portableId) module.portableId = identifierUtils.makePathsRelative(compiler.context, module.identifier());\n \t\t\t\t\tconst identifier = module.portableId;\n \t\t\t\t\trecords.modules.byIdentifier[identifier] = module.id;\n \t\t\t\t\trecords.modules.usedIds[module.id] = module.id;\n@@ -38,7 +27,7 @@ class RecordIdsPlugin {\n \t\t\t\t\tconst usedIds = {};\n \t\t\t\t\tmodules.forEach(function(module) {\n \t\t\t\t\t\tif(module.id !== null) return;\n-\t\t\t\t\t\tif(!module.portableId) module.portableId = RecordIdsPlugin.makeRelative(compiler.context, module.identifier());\n+\t\t\t\t\t\tif(!module.portableId) module.portableId = identifierUtils.makePathsRelative(compiler.context, module.identifier());\n \t\t\t\t\t\tconst identifier = module.portableId;\n \t\t\t\t\t\tconst id = records.modules.byIdentifier[identifier];\n \t\t\t\t\t\tif(id === undefined) return;\n@@ -62,7 +51,7 @@ class RecordIdsPlugin {\n \t\t\t\t\tblock = block.parent;\n \t\t\t\t}\n \t\t\t\tif(!block.identifier) return null;\n-\t\t\t\tident.unshift(RecordIdsPlugin.makeRelative(compiler.context, block.identifier()));\n+\t\t\t\tident.unshift(identifierUtils.makePathsRelative(compiler.context, block.identifier()));\n \t\t\t\treturn ident.join(\":\");\n \t\t\t}\n \t\t\tcompilation.plugin(\"record-chunks\", (chunks, records) => {"
      },
      {
        "sha": "3c5006d6d54c70424a60eb39f58dccc12ac84bd8",
        "filename": "lib/optimize/AggressiveSplittingPlugin.js",
        "status": "modified",
        "additions": 4,
        "deletions": 15,
        "changes": 19,
        "blob_url": "https://github.com/webpack/webpack/blob/ed51e2ff2c90fa7f589999254c858db749349074/lib%2Foptimize%2FAggressiveSplittingPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ed51e2ff2c90fa7f589999254c858db749349074/lib%2Foptimize%2FAggressiveSplittingPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Foptimize%2FAggressiveSplittingPlugin.js?ref=ed51e2ff2c90fa7f589999254c858db749349074",
        "patch": "@@ -4,18 +4,7 @@\n */\n \"use strict\";\n \n-let path = require(\"path\");\n-\n-function makeRelative(context) {\n-\treturn function(module) {\n-\t\tconst identifier = module.identifier();\n-\t\treturn identifier.split(\"|\").map((str) => {\n-\t\t\treturn str.split(\"!\").map((str) => {\n-\t\t\t\treturn path.relative(context, str);\n-\t\t\t}).join(\"!\");\n-\t\t}).join(\"|\");\n-\t};\n-}\n+const identifierUtils = require(\"../util/identifier\");\n \n function toIndexOf(list) {\n \treturn function(item) {\n@@ -73,7 +62,7 @@ class AggressiveSplittingPlugin {\n \t\t\t\t\tconst splitData = usedSplits[j];\n \t\t\t\t\tfor(let i = 0; i < chunks.length; i++) {\n \t\t\t\t\t\tconst chunk = chunks[i];\n-\t\t\t\t\t\tconst chunkModuleNames = chunk.modules.map(makeRelative(compiler.context));\n+\t\t\t\t\t\tconst chunkModuleNames = chunk.modules.map(m => identifierUtils.makePathsRelative(compiler.context, m.identifier()));\n \n \t\t\t\t\t\tif(chunkModuleNames.length < splitData.modules.length)\n \t\t\t\t\t\t\tcontinue;\n@@ -148,7 +137,7 @@ class AggressiveSplittingPlugin {\n \t\t\t\t\t\t\tnewChunk.origins = chunk.origins.map(copyWithReason);\n \t\t\t\t\t\t\tchunk.origins = chunk.origins.map(copyWithReason);\n \t\t\t\t\t\t\tcompilation._aggressiveSplittingSplits = (compilation._aggressiveSplittingSplits || []).concat({\n-\t\t\t\t\t\t\t\tmodules: newChunk.modules.map(makeRelative(compiler.context))\n+\t\t\t\t\t\t\t\tmodules: newChunk.modules.map(m => identifierUtils.makePathsRelative(compiler.context, m.identifier()))\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t} else {\n@@ -165,7 +154,7 @@ class AggressiveSplittingPlugin {\n \t\t\t\t\tif(chunk.hasEntryModule()) return;\n \t\t\t\t\tconst size = chunk.size(this.options);\n \t\t\t\t\tconst incorrectSize = size < minSize;\n-\t\t\t\t\tconst modules = chunk.modules.map(makeRelative(compiler.context));\n+\t\t\t\t\tconst modules = chunk.modules.map(m => identifierUtils.makePathsRelative(compiler.context, m.identifier()));\n \t\t\t\t\tif(typeof chunk._fromAggressiveSplittingIndex === \"undefined\") {\n \t\t\t\t\t\tif(incorrectSize) return;\n \t\t\t\t\t\tchunk.recorded = true;"
      },
      {
        "sha": "64f26a9899a840c3a10a3cf880a0f8505f0e2338",
        "filename": "lib/util/identifier.js",
        "status": "added",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/webpack/webpack/blob/ed51e2ff2c90fa7f589999254c858db749349074/lib%2Futil%2Fidentifier.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ed51e2ff2c90fa7f589999254c858db749349074/lib%2Futil%2Fidentifier.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Futil%2Fidentifier.js?ref=ed51e2ff2c90fa7f589999254c858db749349074",
        "patch": "@@ -0,0 +1,13 @@\n+\"use strict\";\n+const path = require(\"path\");\n+\n+const looksLikeAbsolutePath = exports.looksLikeAbsolutePath = (maybeAbsolutePath) => {\n+\treturn /^(?:[a-z]:\\\\|\\/)/i.test(maybeAbsolutePath);\n+};\n+\n+exports.makePathsRelative = (context, identifier) => {\n+\treturn identifier\n+\t\t.split(/([|! ])/)\n+\t\t.map(str => looksLikeAbsolutePath(str) ? path.relative(context, str) : str)\n+\t\t.join(\"\");\n+};"
      },
      {
        "sha": "5d8ba0d35f016cd2fd5570e0ac819ff9fc714a26",
        "filename": "test/RecordIdsPlugin.test.js",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/ed51e2ff2c90fa7f589999254c858db749349074/test%2FRecordIdsPlugin.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ed51e2ff2c90fa7f589999254c858db749349074/test%2FRecordIdsPlugin.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FRecordIdsPlugin.test.js?ref=ed51e2ff2c90fa7f589999254c858db749349074",
        "patch": "@@ -2,11 +2,10 @@\n \"use strict\";\n \n const should = require(\"should\");\n-\n const path = require(\"path\");\n-const webpack = require(\"../lib/webpack\");\n \n-const RecordIdsPlugin = require(\"../lib/RecordIdsPlugin\");\n+const webpack = require(\"../lib/webpack\");\n+const identifierUtils = require(\"../lib/util/identifier\");\n \n describe(\"RecordIdsPlugin\", () => {\n \n@@ -34,7 +33,7 @@ describe(\"RecordIdsPlugin\", () => {\n \t\t\tfor(let i = 0; i < compilation.modules.length; i++) {\n \t\t\t\ttry {\n \t\t\t\t\tshould.exist(compilation.modules[i].portableId);\n-\t\t\t\t\tcompilation.modules[i].portableId.should.equal(RecordIdsPlugin.makeRelative(compiler.context, compilation.modules[i].identifier()));\n+\t\t\t\t\tcompilation.modules[i].portableId.should.equal(identifierUtils.makePathsRelative(compiler.context, compilation.modules[i].identifier()));\n \t\t\t\t} catch(e) {\n \t\t\t\t\tdone(e);\n \t\t\t\t\tpass = false;"
      },
      {
        "sha": "7002509e8f63855f075d876ebd6a6835bdab0cc1",
        "filename": "test/util/identifier.test.js",
        "status": "added",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/webpack/webpack/blob/ed51e2ff2c90fa7f589999254c858db749349074/test%2Futil%2Fidentifier.test.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ed51e2ff2c90fa7f589999254c858db749349074/test%2Futil%2Fidentifier.test.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Futil%2Fidentifier.test.js?ref=ed51e2ff2c90fa7f589999254c858db749349074",
        "patch": "@@ -0,0 +1,24 @@\n+/* globals describe, beforeEach, it */\n+\"use strict\";\n+\n+const should = require(\"should\");\n+const path = require(\"path\");\n+\n+const identifierUtil = require(\"../../lib/util/identifier\");\n+\n+describe(\"pathUtil\", () => {\n+\tdescribe(\"makeRelative\", () => {\n+\t\tdescribe(\"given a context and a pathConstruct\", () => {\n+\t\t\tlet context, pathConstruct, expected;\n+\t\t\tbeforeEach(() => {\n+\t\t\t\tcontext = \"/some/dir/\";\n+\t\t\t\tpathConstruct = \"/some/dir/to/somwhere|some/other/dir!../more/dir\";\n+\t\t\t\texpected = `${path.relative(context, \"/some/dir/to/somwhere\")}|${path.relative(context, \"some/other/dir\")}!${path.relative(context, \"../more/dir\")}`;\n+\t\t\t});\n+\n+\t\t\tit(\"computes the correct relative results for the path construct\", () => {\n+\t\t\t\tshould(identifierUtil.makePathsRelative(context, pathConstruct)).be.exactly(expected);\n+\t\t\t});\n+\t\t});\n+\t});\n+});"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/3483",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/3483/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/3483/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/3483/events",
    "html_url": "https://github.com/webpack/webpack/pull/3483",
    "id": 195566614,
    "node_id": "MDExOlB1bGxSZXF1ZXN0OTc5Nzc5MjY=",
    "number": 3483,
    "title": "Bugfix/performance limit",
    "user": {
      "login": "sokra",
      "id": 1365881,
      "node_id": "MDQ6VXNlcjEzNjU4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sokra",
      "html_url": "https://github.com/sokra",
      "followers_url": "https://api.github.com/users/sokra/followers",
      "following_url": "https://api.github.com/users/sokra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sokra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sokra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sokra/subscriptions",
      "organizations_url": "https://api.github.com/users/sokra/orgs",
      "repos_url": "https://api.github.com/users/sokra/repos",
      "events_url": "https://api.github.com/users/sokra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sokra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2016-12-14T15:47:08Z",
    "updated_at": "2016-12-14T20:15:11Z",
    "closed_at": "2016-12-14T20:15:11Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/3483",
      "html_url": "https://github.com/webpack/webpack/pull/3483",
      "diff_url": "https://github.com/webpack/webpack/pull/3483.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/3483.patch",
      "merged_at": "2016-12-14T20:15:11Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nyes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\n`performance = false` didn't work, now it does\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nno\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/3483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/3483/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "46ef9be8e57469c96feef753eb19eba8ce874079",
        "filename": "lib/OptionsDefaulter.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/lib%2FOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/lib%2FOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FOptionsDefaulter.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -12,15 +12,16 @@ function getProperty(obj, name) {\n \tname = name.split(\".\");\n \tfor(var i = 0; i < name.length - 1; i++) {\n \t\tobj = obj[name[i]];\n-\t\tif(typeof obj != \"object\" || !obj) return;\n+\t\tif(typeof obj !== \"object\" || !obj) return;\n \t}\n \treturn obj[name.pop()];\n }\n \n function setProperty(obj, name, value) {\n \tname = name.split(\".\");\n \tfor(var i = 0; i < name.length - 1; i++) {\n-\t\tif(typeof(obj[name[i]]) !== \"object\" || !obj[name[i]]) obj[name[i]] = {};\n+\t\tif(typeof obj[name[i]] !== \"object\" && typeof obj[name[i]] !== \"undefined\") return;\n+\t\tif(!obj[name[i]]) obj[name[i]] = {};\n \t\tobj = obj[name[i]];\n \t}\n \tobj[name.pop()] = value;"
      },
      {
        "sha": "1ea440be75aefb8600125b4dfd872f119fa85eba",
        "filename": "test/statsCases/performance-disabled/a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Fa.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e"
      },
      {
        "sha": "dfbbeb621fa8e2517125351b211159ec4fc3374f",
        "filename": "test/statsCases/performance-disabled/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Fb.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"b\";"
      },
      {
        "sha": "84bdba76f123099f0a83791f71af03b37b28f36a",
        "filename": "test/statsCases/performance-disabled/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Fc.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+require.ensure([\"./d\", \"./e\"], function(require) {});"
      },
      {
        "sha": "0a281018ca1677568b9f69df38f9a52c7304c527",
        "filename": "test/statsCases/performance-disabled/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Fd.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"d\";"
      },
      {
        "sha": "7884d62f73211b7cccc03faa0703b5d2b7dd7b4f",
        "filename": "test/statsCases/performance-disabled/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Fe.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"e\";"
      },
      {
        "sha": "cd2ae307062918899d8b557cbde5831bd9370f71",
        "filename": "test/statsCases/performance-disabled/expected.txt",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Fexpected.txt?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1,17 @@\n+Time: <CLR=BOLD>X</CLR>ms\n+  <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22><CLR=BOLD>Chunk Names</CLR>\n+   <CLR=32,BOLD>0.js</CLR>  227 bytes       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+   <CLR=32,BOLD>1.js</CLR>  106 bytes       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+   <CLR=32,BOLD>2.js</CLR>  200 bytes       <CLR=BOLD>2</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+<CLR=32,BOLD>main.js</CLR>     306 kB       <CLR=BOLD>3</CLR>  <CLR=32,BOLD>[emitted]</CLR>  main\n+Entrypoint <CLR=BOLD>main</CLR> = <CLR=32,BOLD>main.js</CLR>\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>0.js</CLR> 54 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/performance-disabled/c.js</CLR> 54 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>1.js</CLR> 22 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/performance-disabled/b.js</CLR> 22 bytes {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>2</CLR>} <CLR=32,BOLD>2.js</CLR> 44 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [3] <CLR=BOLD>(webpack)/test/statsCases/performance-disabled/d.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [4] <CLR=BOLD>(webpack)/test/statsCases/performance-disabled/e.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>3</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-disabled/a.js</CLR> 300 kB {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [5] <CLR=BOLD>(webpack)/test/statsCases/performance-disabled/index.js</CLR> 52 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "0a714cee1359b2c9ff0ca1533c57dbfd73dca11c",
        "filename": "test/statsCases/performance-disabled/index.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Findex.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1,3 @@\n+require(\"./a\");\n+require([\"./b\"]);\n+require([\"./c\"]);"
      },
      {
        "sha": "8eadd5d405340225ef98c0c586105452306f8a42",
        "filename": "test/statsCases/performance-disabled/webpack.config.js",
        "status": "added",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-disabled%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-disabled%2Fwebpack.config.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1,9 @@\n+module.exports = {\n+\tentry: \"./index\",\n+\tstats: {\n+\t\tcolors: true,\n+\t\thash: false,\n+\t\tentrypoints: true\n+\t},\n+\tperformance: false\n+};"
      },
      {
        "sha": "1ea440be75aefb8600125b4dfd872f119fa85eba",
        "filename": "test/statsCases/performance-no-hints/a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Fa.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e"
      },
      {
        "sha": "dfbbeb621fa8e2517125351b211159ec4fc3374f",
        "filename": "test/statsCases/performance-no-hints/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Fb.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"b\";"
      },
      {
        "sha": "84bdba76f123099f0a83791f71af03b37b28f36a",
        "filename": "test/statsCases/performance-no-hints/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Fc.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+require.ensure([\"./d\", \"./e\"], function(require) {});"
      },
      {
        "sha": "0a281018ca1677568b9f69df38f9a52c7304c527",
        "filename": "test/statsCases/performance-no-hints/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Fd.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"d\";"
      },
      {
        "sha": "7884d62f73211b7cccc03faa0703b5d2b7dd7b4f",
        "filename": "test/statsCases/performance-no-hints/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Fe.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"e\";"
      },
      {
        "sha": "82eed3967711d60394d19ca5d8f625a15a766f05",
        "filename": "test/statsCases/performance-no-hints/expected.txt",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Fexpected.txt?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1,17 @@\n+Time: <CLR=BOLD>X</CLR>ms\n+  <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22>       <CLR=BOLD>Chunk Names</CLR>\n+   <CLR=32,BOLD>0.js</CLR>  227 bytes       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+   <CLR=32,BOLD>1.js</CLR>  106 bytes       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+   <CLR=32,BOLD>2.js</CLR>  200 bytes       <CLR=BOLD>2</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n+<CLR=33,BOLD>main.js</CLR>     <CLR=33,BOLD>306 kB</CLR>       <CLR=BOLD>3</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n+Entrypoint <CLR=BOLD>main</CLR> <CLR=33,BOLD>[big]</CLR> = <CLR=32,BOLD>main.js</CLR>\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>0.js</CLR> 54 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/performance-no-hints/c.js</CLR> 54 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>1.js</CLR> 22 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/performance-no-hints/b.js</CLR> 22 bytes {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>2</CLR>} <CLR=32,BOLD>2.js</CLR> 44 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [3] <CLR=BOLD>(webpack)/test/statsCases/performance-no-hints/d.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [4] <CLR=BOLD>(webpack)/test/statsCases/performance-no-hints/e.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>3</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-no-hints/a.js</CLR> 300 kB {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [5] <CLR=BOLD>(webpack)/test/statsCases/performance-no-hints/index.js</CLR> 52 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "0a714cee1359b2c9ff0ca1533c57dbfd73dca11c",
        "filename": "test/statsCases/performance-no-hints/index.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Findex.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1,3 @@\n+require(\"./a\");\n+require([\"./b\"]);\n+require([\"./c\"]);"
      },
      {
        "sha": "08023da6895f3f6c0dc4da5ed3f87498a8130479",
        "filename": "test/statsCases/performance-no-hints/webpack.config.js",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/webpack/webpack/blob/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/ca4140f7b4bc5cfd847265e58a7665547a49d96e/test%2FstatsCases%2Fperformance-no-hints%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-hints%2Fwebpack.config.js?ref=ca4140f7b4bc5cfd847265e58a7665547a49d96e",
        "patch": "@@ -0,0 +1,11 @@\n+module.exports = {\n+\tentry: \"./index\",\n+\tstats: {\n+\t\tcolors: true,\n+\t\thash: false,\n+\t\tentrypoints: true\n+\t},\n+\tperformance: {\n+\t\thints: false\n+\t}\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/3471",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/3471/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/3471/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/3471/events",
    "html_url": "https://github.com/webpack/webpack/pull/3471",
    "id": 195300909,
    "node_id": "MDExOlB1bGxSZXF1ZXN0OTc3ODU5MzE=",
    "number": 3471,
    "title": "feat(performance): don't include .map files in perf warnings",
    "user": {
      "login": "TheLarkInn",
      "id": 3408176,
      "node_id": "MDQ6VXNlcjM0MDgxNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3408176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheLarkInn",
      "html_url": "https://github.com/TheLarkInn",
      "followers_url": "https://api.github.com/users/TheLarkInn/followers",
      "following_url": "https://api.github.com/users/TheLarkInn/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheLarkInn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheLarkInn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheLarkInn/subscriptions",
      "organizations_url": "https://api.github.com/users/TheLarkInn/orgs",
      "repos_url": "https://api.github.com/users/TheLarkInn/repos",
      "events_url": "https://api.github.com/users/TheLarkInn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheLarkInn/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": {
      "login": "TheLarkInn",
      "id": 3408176,
      "node_id": "MDQ6VXNlcjM0MDgxNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3408176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheLarkInn",
      "html_url": "https://github.com/TheLarkInn",
      "followers_url": "https://api.github.com/users/TheLarkInn/followers",
      "following_url": "https://api.github.com/users/TheLarkInn/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheLarkInn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheLarkInn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheLarkInn/subscriptions",
      "organizations_url": "https://api.github.com/users/TheLarkInn/orgs",
      "repos_url": "https://api.github.com/users/TheLarkInn/repos",
      "events_url": "https://api.github.com/users/TheLarkInn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheLarkInn/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "TheLarkInn",
        "id": 3408176,
        "node_id": "MDQ6VXNlcjM0MDgxNzY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3408176?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheLarkInn",
        "html_url": "https://github.com/TheLarkInn",
        "followers_url": "https://api.github.com/users/TheLarkInn/followers",
        "following_url": "https://api.github.com/users/TheLarkInn/following{/other_user}",
        "gists_url": "https://api.github.com/users/TheLarkInn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/TheLarkInn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/TheLarkInn/subscriptions",
        "organizations_url": "https://api.github.com/users/TheLarkInn/orgs",
        "repos_url": "https://api.github.com/users/TheLarkInn/repos",
        "events_url": "https://api.github.com/users/TheLarkInn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/TheLarkInn/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 3,
    "created_at": "2016-12-13T16:29:56Z",
    "updated_at": "2016-12-14T12:29:01Z",
    "closed_at": "2016-12-14T12:28:59Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/3471",
      "html_url": "https://github.com/webpack/webpack/pull/3471",
      "diff_url": "https://github.com/webpack/webpack/pull/3471.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/3471.patch",
      "merged_at": "2016-12-14T12:28:59Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nbugfix/feature\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nYes\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nN/A\r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nThis filters out .map files from the performance budget warnings. In addition I have changed the NoAsyncChunksWarning to use `import()` instead of `System.import` as the messaging since it is now in master and released. \r\n\r\nFixes #3470 \r\nFixes #3469 \r\n\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\n\r\n**Does this PR introduce a breaking change?**\r\nNo\r\n\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/3471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/3471/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "bea88f11bc76f72cc77ab354bde3984fd04950a6",
        "filename": "lib/Entrypoint.js",
        "status": "modified",
        "additions": 0,
        "deletions": 12,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FEntrypoint.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FEntrypoint.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FEntrypoint.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -36,15 +36,3 @@ Entrypoint.prototype.getFiles = function() {\n \n \treturn files;\n }\n-\n-Entrypoint.prototype.getSize = function(compilation) {\n-\tvar files = this.getFiles();\n-\n-\treturn files\n-\t\t.map(function(file) {\n-\t\t\treturn compilation.assets[file].size()\n-\t\t})\n-\t\t.reduce(function(currentSize, nextSize) {\n-\t\t\treturn currentSize + nextSize\n-\t\t}, 0);\n-}"
      },
      {
        "sha": "9a43bcfebb969487565eabcc6ff1e079a529216c",
        "filename": "lib/Stats.js",
        "status": "modified",
        "additions": 13,
        "deletions": 5,
        "changes": 18,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FStats.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FStats.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FStats.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -3,7 +3,7 @@\n \tAuthor Tobias Koppers @sokra\n */\n var RequestShortener = require(\"./RequestShortener\");\n-var formatSize = require(\"./SizeFormatHelpers\").formatSize;\n+var SizeFormatHelpers = require(\"./SizeFormatHelpers\");\n \n function Stats(compilation) {\n \tthis.compilation = compilation;\n@@ -212,6 +212,9 @@ Stats.prototype.toJson = function toJson(options, forToString) {\n \t\t\t\tassets: ep.chunks.reduce(function(array, c) {\n \t\t\t\t\treturn array.concat(c.files || []);\n \t\t\t\t}, [])\n+\t\t\t};\n+\t\t\tif(showPerformance) {\n+\t\t\t\tobj.entrypoints[name].isOverSizeLimit = ep.isOverSizeLimit;\n \t\t\t}\n \t\t});\n \t}\n@@ -501,7 +504,7 @@ Stats.jsonToString = function jsonToString(obj, useColors) {\n \t\t\t\tvalue: asset.name,\n \t\t\t\tcolor: getAssetColor(asset, colors.green)\n \t\t\t}, {\n-\t\t\t\tvalue: formatSize(asset.size),\n+\t\t\t\tvalue: SizeFormatHelpers.formatSize(asset.size),\n \t\t\t\tcolor: getAssetColor(asset, colors.normal)\n \t\t\t}, {\n \t\t\t\tvalue: asset.chunks.join(\", \"),\n@@ -521,10 +524,15 @@ Stats.jsonToString = function jsonToString(obj, useColors) {\n \t}\n \tif(obj.entrypoints) {\n \t\tObject.keys(obj.entrypoints).forEach(function(name) {\n+\t\t\tvar ep = obj.entrypoints[name];\n \t\t\tcolors.normal(\"Entrypoint \");\n \t\t\tcolors.bold(name);\n+\t\t\tif(ep.isOverSizeLimit) {\n+\t\t\t\tcolors.normal(\" \");\n+\t\t\t\tcolors.yellow(\"[big]\");\n+\t\t\t}\n \t\t\tcolors.normal(\" =\");\n-\t\t\tobj.entrypoints[name].assets.forEach(function(asset) {\n+\t\t\tep.assets.forEach(function(asset) {\n \t\t\t\tcolors.normal(\" \");\n \t\t\t\tcolors.green(asset);\n \t\t\t});\n@@ -548,7 +556,7 @@ Stats.jsonToString = function jsonToString(obj, useColors) {\n \n \tfunction processModuleAttributes(module) {\n \t\tcolors.normal(\" \");\n-\t\tcolors.normal(formatSize(module.size));\n+\t\tcolors.normal(SizeFormatHelpers.formatSize(module.size));\n \t\tif(module.chunks) {\n \t\t\tmodule.chunks.forEach(function(chunk) {\n \t\t\t\tcolors.normal(\" {\");\n@@ -658,7 +666,7 @@ Stats.jsonToString = function jsonToString(obj, useColors) {\n \t\t\t\tcolors.normal(\")\");\n \t\t\t}\n \t\t\tcolors.normal(\" \");\n-\t\t\tcolors.normal(formatSize(chunk.size));\n+\t\t\tcolors.normal(SizeFormatHelpers.formatSize(chunk.size));\n \t\t\tchunk.parents.forEach(function(id) {\n \t\t\t\tcolors.normal(\" {\");\n \t\t\t\tcolors.yellow(id);"
      },
      {
        "sha": "816e0422db095559693238e36126fc8e036b6254",
        "filename": "lib/WebpackOptionsApply.js",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FWebpackOptionsApply.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FWebpackOptionsApply.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsApply.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -42,7 +42,7 @@ var FlagIncludedChunksPlugin = require(\"./optimize/FlagIncludedChunksPlugin\");\n var OccurrenceOrderPlugin = require(\"./optimize/OccurrenceOrderPlugin\");\n var FlagDependencyUsagePlugin = require(\"./FlagDependencyUsagePlugin\");\n var FlagDependencyExportsPlugin = require(\"./FlagDependencyExportsPlugin\");\n-var EmittedAssetSizeLimitPlugin = require(\"./performance/EmittedAssetSizeLimitPlugin\");\n+var SizeLimitsPlugin = require(\"./performance/SizeLimitsPlugin\");\n \n var ResolverFactory = require(\"enhanced-resolve\").ResolverFactory;\n \n@@ -267,7 +267,9 @@ WebpackOptionsApply.prototype.process = function(options, compiler) {\n \t\tnew FlagDependencyUsagePlugin()\n \t);\n \n-\tcompiler.apply(new EmittedAssetSizeLimitPlugin(options.performance));\n+\tif(options.performance) {\n+\t\tcompiler.apply(new SizeLimitsPlugin(options.performance));\n+\t}\n \n \tcompiler.apply(new TemplatedPathPlugin());\n "
      },
      {
        "sha": "47793e9928b474d562d6bcd1f605aba47e46389c",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -70,11 +70,11 @@ function WebpackOptionsDefaulter() {\n \tthis.set(\"node.__dirname\", \"mock\");\n \n \tthis.set(\"performance.maxAssetSize\", 250000);\n-\tthis.set(\"performance.maxInitialChunkSize\", 250000);\n+\tthis.set(\"performance.maxEntrypointSize\", 250000);\n \tthis.set(\"performance.errorOnHint\", false);\n \tthis.set(\"performance.hints\", \"make\", function(options) {\n-\t\tif(options.target === \"web\")\n-\t\t\treturn true;\n+\t\tif(options.target === \"web\" || options.target === \"webworker\")\n+\t\t\treturn \"warning\";\n \t\telse\n \t\t\treturn false;\n \t});"
      },
      {
        "sha": "896575f76a66be63986dfd5a7c73f49983f3120a",
        "filename": "lib/performance/AssetsOverSizeLimitWarning.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FAssetsOverSizeLimitWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FAssetsOverSizeLimitWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FAssetsOverSizeLimitWarning.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -2,7 +2,7 @@\n \tMIT License http://www.opensource.org/licenses/mit-license.php\n \tAuthor Sean Larkin @thelarkinn\n */\n-var SizeFormatHelpers = require('../SizeFormatHelpers');\n+var SizeFormatHelpers = require(\"../SizeFormatHelpers\");\n \n function AssetsOverSizeLimitWarning(assetsOverSizeLimit, assetLimit) {\n \tError.call(this);"
      },
      {
        "sha": "9645c15fea082719669fc1ce4d9b894c0ab86f92",
        "filename": "lib/performance/EmittedAssetSizeLimitPlugin.js",
        "status": "removed",
        "additions": 0,
        "deletions": 101,
        "changes": 101,
        "blob_url": "https://github.com/webpack/webpack/blob/2e2eac70ab1ba648ef663b9b93fdedd7928672c4/lib%2Fperformance%2FEmittedAssetSizeLimitPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/2e2eac70ab1ba648ef663b9b93fdedd7928672c4/lib%2Fperformance%2FEmittedAssetSizeLimitPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FEmittedAssetSizeLimitPlugin.js?ref=2e2eac70ab1ba648ef663b9b93fdedd7928672c4",
        "patch": "@@ -1,101 +0,0 @@\n-/*\n-\tMIT License http://www.opensource.org/licenses/mit-license.php\n-\tAuthor Sean Larkin @thelarkinn\n-*/\n-var path = require('path');\n-\n-var EntrypointsOverSizeLimitWarning = require('./EntrypointsOverSizeLimitWarning');\n-var AssetsOverSizeLimitWarning = require('./AssetsOverSizeLimitWarning');\n-var NoAsyncChunksWarning = require('./NoAsyncChunksWarning');\n-\n-function EmittedAssetSizeLimitPlugin(performanceOptions) {\n-\tthis.maxAssetSize = performanceOptions.maxAssetSize;\n-\tthis.maxInitialSize = performanceOptions.maxInitialChunkSize;\n-\tthis.hints = performanceOptions.hints;\n-\tthis.errorOnHint = performanceOptions.errorOnHint;\n-}\n-\n-module.exports = EmittedAssetSizeLimitPlugin;\n-\n-// When using this we should always\n-// compare byte size and then format later\n-function doesExceedLimit(limit, actualSize) {\n-\treturn limit < actualSize;\n-}\n-\n-EmittedAssetSizeLimitPlugin.prototype.apply = function(compiler) {\n-\tif(!this.hints) {\n-\t\treturn;\n-\t}\n-\tvar entrypointSizeLimit = this.maxInitialSize;\n-\tvar sizeLimit = this.maxAssetSize;\n-\tvar hints = this.hints;\n-\tvar shouldErrorOnHint = this.errorOnHint;\n-\n-\tcompiler.plugin(\"after-emit\", function(compilation, callback) {\n-\t\tvar warnings = [];\n-\t\tvar assetsOverSizeLimit = [];\n-\n-\t\tObject.keys(compilation.assets).forEach(function(asset) {\n-\t\t\tvar obj = {\n-\t\t\t\tname: asset,\n-\t\t\t\tsize: compilation.assets[asset].size()\n-\t\t\t};\n-\n-\t\t\tif(doesExceedLimit(sizeLimit, obj.size)) {\n-\t\t\t\tobj.isOverSizeLimit = true;\n-\t\t\t\tassetsOverSizeLimit.push(obj);\n-\t\t\t\tcompilation.assets[asset].isOverSizeLimit = true;\n-\t\t\t}\n-\t\t});\n-\n-\t\tvar hasAsyncChunks = compilation.chunks.filter(function(chunk) {\n-\t\t\treturn !chunk.isInitial();\n-\t\t}).length > 0;\n-\n-\t\tvar entrypointsOverLimit = Object.keys(compilation.entrypoints)\n-\t\t\t.map(function(key) {\n-\t\t\t\treturn compilation.entrypoints[key]\n-\t\t\t})\n-\t\t\t.filter(function(entry) {\n-\t\t\t\treturn doesExceedLimit(entrypointSizeLimit, entry.getSize(compilation))\n-\t\t\t});\n-\n-\t\t// 1. Individual Chunk: Size < 250kb\n-\t\t// 2. Collective Initial Chunks [entrypoint] (Each Set?): Size < 250kb\n-\t\t// 3. No Async Chunks\n-\t\t// if !1, then 2, if !2 return\n-\t\tif(assetsOverSizeLimit.length > 0) {\n-\t\t\twarnings.push(\n-\t\t\t\tnew AssetsOverSizeLimitWarning(\n-\t\t\t\t\tassetsOverSizeLimit,\n-\t\t\t\t\tsizeLimit\n-\t\t\t\t)\n-\t\t\t);\n-\t\t}\n-\t\tif(entrypointsOverLimit.length > 0) {\n-\t\t\twarnings.push(\n-\t\t\t\tnew EntrypointsOverSizeLimitWarning(\n-\t\t\t\t\tentrypointsOverLimit,\n-\t\t\t\t\tcompilation,\n-\t\t\t\t\tentrypointSizeLimit\n-\t\t\t\t)\n-\t\t\t);\n-\t\t}\n-\n-\t\tif(warnings.length > 0) {\n-\t\t\tif(!hasAsyncChunks) {\n-\t\t\t\twarnings.push(new NoAsyncChunksWarning());\n-\t\t\t}\n-\n-\t\t\tif(shouldErrorOnHint) {\n-\t\t\t\tArray.prototype.push.apply(compilation.errors, warnings);\n-\t\t\t} else {\n-\t\t\t\tArray.prototype.push.apply(compilation.warnings, warnings);\n-\t\t\t}\n-\t\t}\n-\n-\t\tcallback();\n-\t});\n-\n-};"
      },
      {
        "sha": "45ff0d8f76c39b14f477bc8a8fec0d16fea89135",
        "filename": "lib/performance/EntrypointsOverSizeLimitWarning.js",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FEntrypointsOverSizeLimitWarning.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -2,19 +2,19 @@\n \tMIT License http://www.opensource.org/licenses/mit-license.php\n \tAuthor Sean Larkin @thelarkinn\n */\n-var SizeFormatHelpers = require('../SizeFormatHelpers');\n+var SizeFormatHelpers = require(\"../SizeFormatHelpers\");\n \n-function EntrypointsOverSizeLimitWarning(entrypoints, compilation, entrypointLimit) {\n+function EntrypointsOverSizeLimitWarning(entrypoints, entrypointLimit) {\n \tError.call(this);\n \tError.captureStackTrace(this, EntrypointsOverSizeLimitWarning);\n \tthis.name = \"EntrypointsOverSizeLimitWarning\";\n \tthis.entrypoints = entrypoints;\n \n-\tvar entrypointCompilation = compilation;\n \tvar entrypointList = this.entrypoints.map(function(entrypoint) {\n-\t\treturn \"\\n  \" + entrypoint.name + \" (\" + SizeFormatHelpers.formatSize(entrypoint.getSize(entrypointCompilation)) + \")\\n\" +\n-\t\t\tentrypoint.getFiles().map(function(filename, index) {\n-\t\t\t\treturn \"      \" + entrypoint.getFiles()[index] + \"\\n\";\n+\t\treturn \"\\n  \" + entrypoint.name + \" (\" + SizeFormatHelpers.formatSize(entrypoint.size) + \")\\n\" +\n+\t\t\tentrypoint.files\n+\t\t\t.map(function(asset) {\n+\t\t\t\treturn \"      \" + asset + \"\\n\";\n \t\t\t}).join(\"\");\n \t}).join(\"\");\n "
      },
      {
        "sha": "1fcb4f2a828014e1c5d706599f1736e1ac278003",
        "filename": "lib/performance/NoAsyncChunksWarning.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FNoAsyncChunksWarning.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FNoAsyncChunksWarning.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FNoAsyncChunksWarning.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -8,7 +8,7 @@ function NoAsyncChunksWarning() {\n \tthis.name = \"NoAsyncChunksWarning\";\n \n \tthis.message = \"webpack performance recommendations: \\n\" +\n-\t\t\"You can limit the size of your bundles by using System.import() or require.ensure to lazy load some parts of your application.\\n\" +\n+\t\t\"You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\\n\" +\n \t\t\"For more info visit https://webpack.js.org/guides/code-splitting/\";\n }\n module.exports = NoAsyncChunksWarning;"
      },
      {
        "sha": "9bd824c53678382c3c706a626c18134b0060528a",
        "filename": "lib/performance/SizeLimitsPlugin.js",
        "status": "added",
        "additions": 118,
        "deletions": 0,
        "changes": 118,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FSizeLimitsPlugin.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/lib%2Fperformance%2FSizeLimitsPlugin.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2Fperformance%2FSizeLimitsPlugin.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1,118 @@\n+/*\n+\tMIT License http://www.opensource.org/licenses/mit-license.php\n+\tAuthor Sean Larkin @thelarkinn\n+*/\n+var path = require(\"path\");\n+\n+var EntrypointsOverSizeLimitWarning = require(\"./EntrypointsOverSizeLimitWarning\");\n+var AssetsOverSizeLimitWarning = require(\"./AssetsOverSizeLimitWarning\");\n+var NoAsyncChunksWarning = require(\"./NoAsyncChunksWarning\");\n+\n+function SizeLimitsPlugin(options) {\n+\tthis.hints = options.hints;\n+\tthis.maxAssetSize = options.maxAssetSize;\n+\tthis.maxEntrypointSize = options.maxEntrypointSize;\n+\tthis.assetFilter = options.assetFilter;\n+}\n+\n+module.exports = SizeLimitsPlugin;\n+\n+SizeLimitsPlugin.prototype.apply = function(compiler) {\n+\tvar entrypointSizeLimit = this.maxEntrypointSize;\n+\tvar assetSizeLimit = this.maxAssetSize;\n+\tvar hints = this.hints;\n+\tvar assetFilter = this.assetFilter || function(asset) {\n+\t\treturn !(/\\.map$/.test(asset))\n+\t};\n+\n+\tcompiler.plugin(\"after-emit\", function(compilation, callback) {\n+\t\tvar warnings = [];\n+\n+\t\tvar getEntrypointSize = function(entrypoint) {\n+\t\t\tvar files = entrypoint.getFiles();\n+\n+\t\t\treturn files\n+\t\t\t\t.filter(assetFilter)\n+\t\t\t\t.map(function(file) {\n+\t\t\t\t\treturn compilation.assets[file].size()\n+\t\t\t\t})\n+\t\t\t\t.reduce(function(currentSize, nextSize) {\n+\t\t\t\t\treturn currentSize + nextSize\n+\t\t\t\t}, 0);\n+\t\t};\n+\n+\t\tvar assetsOverSizeLimit = [];\n+\t\tObject.keys(compilation.assets)\n+\t\t\t.filter(assetFilter)\n+\t\t\t.forEach(function(assetName) {\n+\t\t\t\tvar asset = compilation.assets[assetName];\n+\t\t\t\tvar size = asset.size();\n+\n+\t\t\t\tif(size > assetSizeLimit) {\n+\t\t\t\t\tassetsOverSizeLimit.push({\n+\t\t\t\t\t\tname: assetName,\n+\t\t\t\t\t\tsize: size\n+\t\t\t\t\t});\n+\t\t\t\t\tasset.isOverSizeLimit = true;\n+\t\t\t\t}\n+\t\t\t});\n+\n+\t\tvar entrypointsOverLimit = [];\n+\t\tObject.keys(compilation.entrypoints)\n+\t\t\t.forEach(function(key) {\n+\t\t\t\tvar entry = compilation.entrypoints[key];\n+\t\t\t\tvar size = getEntrypointSize(entry, compilation);\n+\n+\t\t\t\tif(size > entrypointSizeLimit) {\n+\t\t\t\t\tentrypointsOverLimit.push({\n+\t\t\t\t\t\tname: key,\n+\t\t\t\t\t\tsize: size,\n+\t\t\t\t\t\tfiles: entry.getFiles().filter(assetFilter)\n+\t\t\t\t\t});\n+\t\t\t\t\tentry.isOverSizeLimit = true;\n+\t\t\t\t}\n+\t\t\t});\n+\n+\t\tif(hints) {\n+\t\t\t// 1. Individual Chunk: Size < 250kb\n+\t\t\t// 2. Collective Initial Chunks [entrypoint] (Each Set?): Size < 250kb\n+\t\t\t// 3. No Async Chunks\n+\t\t\t// if !1, then 2, if !2 return\n+\t\t\tif(assetsOverSizeLimit.length > 0) {\n+\t\t\t\twarnings.push(\n+\t\t\t\t\tnew AssetsOverSizeLimitWarning(\n+\t\t\t\t\t\tassetsOverSizeLimit,\n+\t\t\t\t\t\tassetSizeLimit\n+\t\t\t\t\t)\n+\t\t\t\t);\n+\t\t\t}\n+\t\t\tif(entrypointsOverLimit.length > 0) {\n+\t\t\t\twarnings.push(\n+\t\t\t\t\tnew EntrypointsOverSizeLimitWarning(\n+\t\t\t\t\t\tentrypointsOverLimit,\n+\t\t\t\t\t\tentrypointSizeLimit\n+\t\t\t\t\t)\n+\t\t\t\t);\n+\t\t\t}\n+\n+\t\t\tif(warnings.length > 0) {\n+\t\t\t\tvar hasAsyncChunks = compilation.chunks.filter(function(chunk) {\n+\t\t\t\t\treturn !chunk.isInitial();\n+\t\t\t\t}).length > 0;\n+\n+\t\t\t\tif(!hasAsyncChunks) {\n+\t\t\t\t\twarnings.push(new NoAsyncChunksWarning());\n+\t\t\t\t}\n+\n+\t\t\t\tif(hints === \"error\") {\n+\t\t\t\t\tArray.prototype.push.apply(compilation.errors, warnings);\n+\t\t\t\t} else {\n+\t\t\t\t\tArray.prototype.push.apply(compilation.warnings, warnings);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\tcallback();\n+\t});\n+\n+};"
      },
      {
        "sha": "f1a7374e6a1cc0da2f4f76fa3e957b30a412da8e",
        "filename": "schemas/webpackOptionsSchema.json",
        "status": "modified",
        "additions": 31,
        "deletions": 18,
        "changes": 49,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/schemas%2FwebpackOptionsSchema.json",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/schemas%2FwebpackOptionsSchema.json",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/schemas%2FwebpackOptionsSchema.json?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -749,26 +749,39 @@\n     },\n     \"performance\": {\n       \"description\": \"Configuration for web performance recommendations.\",\n-      \"additionalProperties\": false,\n-      \"properties\": {\n-        \"hints\": {\n-          \"description\": \"Turn hints on or off\",\n-          \"type\": \"boolean\"\n-        },\n-        \"maxInitialChunkSize\": {\n-          \"description\": \"Total size of all initial chunks (in bytes)\",\n-          \"type\": \"number\"\n-        },\n-        \"maxAssetSize\": {\n-          \"description\": \"Filesize limit (in bytes) when exceeded, that webpack will provide performance hints\",\n-          \"type\": \"number\"\n+      \"anyOf\": [\n+        {\n+          \"enum\": [\n+            false\n+          ]\n         },\n-        \"errorOnHint\": {\n-          \"description\": \"Throw errors instead of warnings when performance hints are found\",\n-          \"type\": \"boolean\"\n+        {\n+          \"additionalProperties\": false,\n+          \"properties\": {\n+            \"assetFilter\": {\n+              \"description\": \"Filter function to select assets that are checked\",\n+              \"instanceof\": \"Function\"\n+            },\n+            \"hints\": {\n+              \"description\": \"Sets the format of the hints: warnings, errors or nothing at all\",\n+              \"enum\": [\n+                false,\n+                \"warning\",\n+                \"error\"\n+              ]\n+            },\n+            \"maxEntrypointSize\": {\n+              \"description\": \"Total size of an entry point (in bytes)\",\n+              \"type\": \"number\"\n+            },\n+            \"maxAssetSize\": {\n+              \"description\": \"Filesize limit (in bytes) when exceeded, that webpack will provide performance hints\",\n+              \"type\": \"number\"\n+            }\n+          },\n+          \"type\": \"object\"\n         }\n-      },\n-      \"type\": \"object\"\n+      ]\n     },\n     \"plugins\": {\n       \"description\": \"Add additional plugins to the compiler.\","
      },
      {
        "sha": "ee12d88e5c63261308ad45c185790ff9db9c9f85",
        "filename": "test/statsCases/performance-error/expected.txt",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-error%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-error%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fexpected.txt?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -4,6 +4,7 @@ Time: <CLR=BOLD>X</CLR>ms\n    <CLR=32,BOLD>1.js</CLR>  106 bytes       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n    <CLR=32,BOLD>2.js</CLR>  200 bytes       <CLR=BOLD>2</CLR>  <CLR=32,BOLD>[emitted]</CLR>         \n <CLR=33,BOLD>main.js</CLR>     <CLR=33,BOLD>306 kB</CLR>       <CLR=BOLD>3</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n+Entrypoint <CLR=BOLD>main</CLR> <CLR=33,BOLD>[big]</CLR> = <CLR=32,BOLD>main.js</CLR>\n chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>0.js</CLR> 54 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n     [2] <CLR=BOLD>(webpack)/test/statsCases/performance-error/c.js</CLR> 54 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>1.js</CLR> 22 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>"
      },
      {
        "sha": "6fd96e0eb33bb52aad155912d278846b26cf8e2e",
        "filename": "test/statsCases/performance-error/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-error%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-error%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-error%2Fwebpack.config.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -2,9 +2,10 @@ module.exports = {\n \tentry: \"./index\",\n \tstats: {\n \t\tcolors: true,\n-\t\thash: false\n+\t\thash: false,\n+\t\tentrypoints: true\n \t},\n \tperformance: {\n-\t\terrorOnHint: true\n+\t\thints: \"error\"\n \t}\n };"
      },
      {
        "sha": "f55ffed587c97e5ca9b613f8959b03ab86d77c96",
        "filename": "test/statsCases/performance-no-async-chunks-shown/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fc.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"c\";"
      },
      {
        "sha": "e74f65b77cfae7dbe6c73a38c9b9e20c7eec7886",
        "filename": "test/statsCases/performance-no-async-chunks-shown/expected.txt",
        "status": "modified",
        "additions": 15,
        "deletions": 7,
        "changes": 22,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fexpected.txt?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -1,10 +1,18 @@\n Time: <CLR=BOLD>X</CLR>ms\n-  <CLR=BOLD>Asset</CLR>    <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22>       <CLR=BOLD>Chunk Names</CLR>\n-<CLR=33,BOLD>main.js</CLR>  <CLR=33,BOLD>303 kB</CLR>       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n-chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n-    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/a.js</CLR> 300 kB {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n-    [1] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/b.js</CLR> 22 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n-    [2] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/index.js</CLR> 32 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+  <CLR=BOLD>Asset</CLR>     <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22>       <CLR=BOLD>Chunk Names</CLR>\n+ <CLR=32,BOLD>sec.js</CLR>  2.85 kB       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>         sec\n+<CLR=33,BOLD>main.js</CLR>   <CLR=33,BOLD>303 kB</CLR>       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>  main\n+Entrypoint <CLR=BOLD>main</CLR> <CLR=33,BOLD>[big]</CLR> = <CLR=32,BOLD>main.js</CLR>\n+Entrypoint <CLR=BOLD>sec</CLR> = <CLR=32,BOLD>sec.js</CLR>\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>sec.js</CLR> (sec) 114 bytes<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/b.js</CLR> 22 bytes {<CLR=33,BOLD>0</CLR>} {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/c.js</CLR> 22 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [3] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/d.js</CLR> 22 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [5] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/index2.js</CLR> 48 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>main.js</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/b.js</CLR> 22 bytes {<CLR=33,BOLD>0</CLR>} {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/a.js</CLR> 300 kB {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [4] <CLR=BOLD>(webpack)/test/statsCases/performance-no-async-chunks-shown/index.js</CLR> 32 bytes {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n \n <CLR=33,BOLD>WARNING in asset size limit: The following asset(s) exceed the recommended size limit (250 kB). \n This can impact web performance.\n@@ -18,5 +26,5 @@ Entrypoints:\n </CLR>\n \n <CLR=33,BOLD>WARNING in webpack performance recommendations: \n-You can limit the size of your bundles by using System.import() or require.ensure to lazy load some parts of your application.\n+You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\n For more info visit https://webpack.js.org/guides/code-splitting/</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "d22ef886fd6cc4954803b6feeefdd438f1a53c27",
        "filename": "test/statsCases/performance-no-async-chunks-shown/index2.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Findex2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Findex2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Findex2.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1,3 @@\n+require(\"./b\");\n+require(\"./c\");\n+require(\"./d\");"
      },
      {
        "sha": "366591792a9a6198c60fa499fbed5175b069829b",
        "filename": "test/statsCases/performance-no-async-chunks-shown/webpack.config.js",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -1,7 +1,11 @@\n module.exports = {\n-\tentry: \"./index\",\n+\tentry: {\n+\t\tmain: \"./index\",\n+\t\tsec: \"./index2\"\n+\t},\n \tstats: {\n \t\tcolors: true,\n-\t\thash: false\n+\t\thash: false,\n+\t\tentrypoints: true\n \t}\n };"
      },
      {
        "sha": "1ea440be75aefb8600125b4dfd872f119fa85eba",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/a.js",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fa.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fa.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fa.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3"
      },
      {
        "sha": "dfbbeb621fa8e2517125351b211159ec4fc3374f",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/b.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fb.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fb.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fb.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"b\";"
      },
      {
        "sha": "84bdba76f123099f0a83791f71af03b37b28f36a",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/c.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fc.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fc.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fc.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1 @@\n+require.ensure([\"./d\", \"./e\"], function(require) {});"
      },
      {
        "sha": "0a281018ca1677568b9f69df38f9a52c7304c527",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/d.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fd.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fd.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fd.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"d\";"
      },
      {
        "sha": "7884d62f73211b7cccc03faa0703b5d2b7dd7b4f",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/e.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fe.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fe.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fe.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1 @@\n+module.exports = \"e\";"
      },
      {
        "sha": "4874b20b35498c4177a297fd53238ee8c3e7c1ad",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/expected.txt",
        "status": "added",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fexpected.txt",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fexpected.txt",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fexpected.txt?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1,31 @@\n+Time: <CLR=BOLD>X</CLR>ms\n+      <CLR=BOLD>Asset</CLR>       <CLR=BOLD>Size</CLR>  <CLR=BOLD>Chunks</CLR>  <CLR=39,BOLD><CLR=22>           <CLR=39,BOLD><CLR=22><CLR=BOLD>Chunk Names</CLR>\n+       <CLR=32,BOLD>0.js</CLR>  257 bytes       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+       <CLR=32,BOLD>1.js</CLR>  136 bytes       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+       <CLR=32,BOLD>2.js</CLR>  230 bytes       <CLR=BOLD>2</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+    <CLR=33,BOLD>main.js</CLR>     <CLR=33,BOLD>306 kB</CLR>       <CLR=BOLD>3</CLR>  <CLR=32,BOLD>[emitted]</CLR>  <CLR=33,BOLD>[big]</CLR>main\n+   <CLR=32,BOLD>0.js.map</CLR>  291 bytes       <CLR=BOLD>0</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+   <CLR=32,BOLD>1.js.map</CLR>  250 bytes       <CLR=BOLD>1</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+   <CLR=32,BOLD>2.js.map</CLR>  405 bytes       <CLR=BOLD>2</CLR>  <CLR=32,BOLD>[emitted]</CLR>  \n+<CLR=32,BOLD>main.js.map</CLR>    1.81 MB       <CLR=BOLD>3</CLR>  <CLR=32,BOLD>[emitted]</CLR>  main\n+chunk    {<CLR=33,BOLD>0</CLR>} <CLR=32,BOLD>0.js, 0.js.map</CLR> 54 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [2] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/c.js</CLR> 54 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>1</CLR>} <CLR=32,BOLD>1.js, 1.js.map</CLR> 22 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [1] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/b.js</CLR> 22 bytes {<CLR=33,BOLD>1</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>2</CLR>} <CLR=32,BOLD>2.js, 2.js.map</CLR> 44 bytes {<CLR=33,BOLD>0</CLR>}<CLR=32,BOLD> [rendered]</CLR>\n+    [3] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/d.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [4] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/e.js</CLR> 22 bytes {<CLR=33,BOLD>2</CLR>}<CLR=32,BOLD> [built]</CLR>\n+chunk    {<CLR=33,BOLD>3</CLR>} <CLR=32,BOLD>main.js, main.js.map</CLR> (main) 300 kB<CLR=33,BOLD> [entry]</CLR><CLR=32,BOLD> [rendered]</CLR>\n+    [0] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/a.js</CLR> 300 kB {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+    [5] <CLR=BOLD>(webpack)/test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/index.js</CLR> 52 bytes {<CLR=33,BOLD>3</CLR>}<CLR=32,BOLD> [built]</CLR>\n+\n+<CLR=33,BOLD>WARNING in asset size limit: The following asset(s) exceed the recommended size limit (250 kB). \n+This can impact web performance.\n+Assets: \n+  main.js (306 kB)</CLR>\n+\n+<CLR=33,BOLD>WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (250 kB). This can impact web performance.\n+Entrypoints:\n+  main (306 kB)\n+      main.js\n+</CLR>\n\\ No newline at end of file"
      },
      {
        "sha": "0a714cee1359b2c9ff0ca1533c57dbfd73dca11c",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/index.js",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Findex.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Findex.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Findex.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1,3 @@\n+require(\"./a\");\n+require([\"./b\"]);\n+require([\"./c\"]);"
      },
      {
        "sha": "4ccb6b16e9b56c2ae116388e0642b3a370143e20",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/webpack.config.js",
        "status": "added",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/webpack/webpack/blob/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/a68439da83c2c9d399a05bf770f80d718e1f88d3/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fwebpack.config.js?ref=a68439da83c2c9d399a05bf770f80d718e1f88d3",
        "patch": "@@ -0,0 +1,8 @@\n+module.exports = {\n+\tdevtool: \"sourcemap\",\n+\tentry: \"./index\",\n+\tstats: {\n+\t\thash: false,\n+\t\tcolors: true\n+\t}\n+};"
      }
    ]
  },
  {
    "url": "https://api.github.com/repos/webpack/webpack/issues/3604",
    "repository_url": "https://api.github.com/repos/webpack/webpack",
    "labels_url": "https://api.github.com/repos/webpack/webpack/issues/3604/labels{/name}",
    "comments_url": "https://api.github.com/repos/webpack/webpack/issues/3604/comments",
    "events_url": "https://api.github.com/repos/webpack/webpack/issues/3604/events",
    "html_url": "https://github.com/webpack/webpack/pull/3604",
    "id": 197881585,
    "node_id": "MDExOlB1bGxSZXF1ZXN0OTk1Njg4NDk=",
    "number": 3604,
    "title": "feat(performancebudgets): set warnings in console off by default",
    "user": {
      "login": "TheLarkInn",
      "id": 3408176,
      "node_id": "MDQ6VXNlcjM0MDgxNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3408176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheLarkInn",
      "html_url": "https://github.com/TheLarkInn",
      "followers_url": "https://api.github.com/users/TheLarkInn/followers",
      "following_url": "https://api.github.com/users/TheLarkInn/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheLarkInn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheLarkInn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheLarkInn/subscriptions",
      "organizations_url": "https://api.github.com/users/TheLarkInn/orgs",
      "repos_url": "https://api.github.com/users/TheLarkInn/repos",
      "events_url": "https://api.github.com/users/TheLarkInn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheLarkInn/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2016-12-28T16:41:58Z",
    "updated_at": "2016-12-31T04:23:39Z",
    "closed_at": "2016-12-28T17:27:54Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/webpack/webpack/pulls/3604",
      "html_url": "https://github.com/webpack/webpack/pull/3604",
      "diff_url": "https://github.com/webpack/webpack/pull/3604.diff",
      "patch_url": "https://github.com/webpack/webpack/pull/3604.patch",
      "merged_at": "2016-12-28T17:27:54Z"
    },
    "body": "<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. -->\r\n\r\n**What kind of change does this PR introduce?**\r\nFeature/Bugfix\r\n<!-- E.g. a bugfix, feature, refactoring, build related change, etc… -->\r\n\r\n**Did you add tests for your changes?**\r\nUpdated existing tests to meet changes needs.\r\n<!-- Note that we won't merge your changes if you don't add tests -->\r\n\r\n**If relevant, link to documentation update:**\r\nWill need to create issue. \r\n<!-- Link PR from webpack/webpack.js.org here, or N/A -->\r\n\r\n**Summary**\r\nPerformance Hint warnings and errors will be now opt-in. However, the `[big]` entity will now show by default. Currently there is _no_ way in webpack to discern one env from another for developers, therefore its too difficult to control or _determine_ what env a user might be in and when to intelligently display perf hints. \r\n\r\nAs much as an organization we want to do our part and encourage users to be aware of the sizes of their web application bundles that they are emitting, the feedback that we have gotten is that for this to be a opt-out, it needs to have more intelligent env understandings, as well as calculating gzip and minified sizes during dev env vs prod. \r\n\r\nIt's better to instead have this opt-in for now, and for webpack v2.4-3+ to add more intelligent features that allow this to be turned back to an opt-out feature (which is end goal). \r\n\r\n<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->\r\n<!-- Try to link to an open issue for more information. -->\r\nAddresses concerns from #3485 and comments later in #3216.\r\n**Does this PR introduce a breaking change?**\r\nNo\r\n<!-- If this PR introduces a breaking change, please describe the impact and a migration path for existing applications. -->\r\n\r\n**Other information**\r\nWill need to update Documentation to state that perf.hints is now `false` by default. ",
    "reactions": {
      "url": "https://api.github.com/repos/webpack/webpack/issues/3604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/webpack/webpack/issues/3604/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "score": 1,
    "files": [
      {
        "sha": "9633995e2fe03678800861c99a03a35189423d87",
        "filename": "lib/WebpackOptionsDefaulter.js",
        "status": "modified",
        "additions": 1,
        "deletions": 6,
        "changes": 7,
        "blob_url": "https://github.com/webpack/webpack/blob/707b4d76ed081f8764891b0ed7208761be3a6563/lib%2FWebpackOptionsDefaulter.js",
        "raw_url": "https://github.com/webpack/webpack/raw/707b4d76ed081f8764891b0ed7208761be3a6563/lib%2FWebpackOptionsDefaulter.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/lib%2FWebpackOptionsDefaulter.js?ref=707b4d76ed081f8764891b0ed7208761be3a6563",
        "patch": "@@ -73,12 +73,7 @@ function WebpackOptionsDefaulter() {\n \n \tthis.set(\"performance.maxAssetSize\", 250000);\n \tthis.set(\"performance.maxEntrypointSize\", 250000);\n-\tthis.set(\"performance.hints\", \"make\", function(options) {\n-\t\tif(options.target === \"web\" || options.target === \"webworker\")\n-\t\t\treturn \"warning\";\n-\t\telse\n-\t\t\treturn false;\n-\t});\n+\tthis.set(\"performance.hints\", false);\n \n \tthis.set(\"resolve\", {});\n \tthis.set(\"resolve.unsafeCache\", true);"
      },
      {
        "sha": "05de55605f55e6a33cd5b5c838d3df477d6fa9de",
        "filename": "test/fixtures/temp-1000/file.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/707b4d76ed081f8764891b0ed7208761be3a6563/test%2Ffixtures%2Ftemp-1000%2Ffile.js",
        "raw_url": "https://github.com/webpack/webpack/raw/707b4d76ed081f8764891b0ed7208761be3a6563/test%2Ffixtures%2Ftemp-1000%2Ffile.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Ffixtures%2Ftemp-1000%2Ffile.js?ref=707b4d76ed081f8764891b0ed7208761be3a6563",
        "patch": "@@ -0,0 +1 @@\n+require('./file2'); again\n\\ No newline at end of file"
      },
      {
        "sha": "94f3610c08588440112ed977376f26a8fba169b0",
        "filename": "test/fixtures/temp-1000/file2.js",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/webpack/webpack/blob/707b4d76ed081f8764891b0ed7208761be3a6563/test%2Ffixtures%2Ftemp-1000%2Ffile2.js",
        "raw_url": "https://github.com/webpack/webpack/raw/707b4d76ed081f8764891b0ed7208761be3a6563/test%2Ffixtures%2Ftemp-1000%2Ffile2.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2Ffixtures%2Ftemp-1000%2Ffile2.js?ref=707b4d76ed081f8764891b0ed7208761be3a6563",
        "patch": "@@ -0,0 +1 @@\n+original\n\\ No newline at end of file"
      },
      {
        "sha": "e5cb67d1c471700965b17deee722df100fd1ffe9",
        "filename": "test/statsCases/performance-no-async-chunks-shown/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/707b4d76ed081f8764891b0ed7208761be3a6563/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/707b4d76ed081f8764891b0ed7208761be3a6563/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fperformance-no-async-chunks-shown%2Fwebpack.config.js?ref=707b4d76ed081f8764891b0ed7208761be3a6563",
        "patch": "@@ -3,6 +3,9 @@ module.exports = {\n \t\tmain: \"./index\",\n \t\tsec: \"./index2\"\n \t},\n+\tperformance: {\n+\t\thints: \"warning\"\n+\t},\n \tstats: {\n \t\tcolors: true,\n \t\thash: false,"
      },
      {
        "sha": "4f72073ca68fcc90e66893eb0385dd88abc40b3f",
        "filename": "test/statsCases/preset-normal-performance-ensure-filter-sourcemaps/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/707b4d76ed081f8764891b0ed7208761be3a6563/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/707b4d76ed081f8764891b0ed7208761be3a6563/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance-ensure-filter-sourcemaps%2Fwebpack.config.js?ref=707b4d76ed081f8764891b0ed7208761be3a6563",
        "patch": "@@ -1,5 +1,8 @@\n module.exports = {\n \tdevtool: \"sourcemap\",\n+\tperformance: {\n+\t\thints: \"warning\"\n+\t},\n \tentry: \"./index\",\n \tstats: {\n \t\thash: false,"
      },
      {
        "sha": "354ee3f8ece5951f50a60803c2cda8f3bdd5bc94",
        "filename": "test/statsCases/preset-normal-performance/webpack.config.js",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/webpack/webpack/blob/707b4d76ed081f8764891b0ed7208761be3a6563/test%2FstatsCases%2Fpreset-normal-performance%2Fwebpack.config.js",
        "raw_url": "https://github.com/webpack/webpack/raw/707b4d76ed081f8764891b0ed7208761be3a6563/test%2FstatsCases%2Fpreset-normal-performance%2Fwebpack.config.js",
        "contents_url": "https://api.github.com/repos/webpack/webpack/contents/test%2FstatsCases%2Fpreset-normal-performance%2Fwebpack.config.js?ref=707b4d76ed081f8764891b0ed7208761be3a6563",
        "patch": "@@ -1,5 +1,8 @@\n module.exports = {\n \tentry: \"./index\",\n+\tperformance: {\n+\t\thints: \"warning\"\n+\t},\n \tstats: {\n \t\thash: false,\n \t\tcolors: true"
      }
    ]
  }
]
