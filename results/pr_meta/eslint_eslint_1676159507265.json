[{"url":"https://api.github.com/repos/eslint/eslint/issues/13931","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/13931/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/13931/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/13931/events","html_url":"https://github.com/eslint/eslint/pull/13931","id":768498497,"node_id":"MDExOlB1bGxSZXF1ZXN0NTQwOTI3Njkw","number":13931,"title":"Docs: Remove for deleted npm run profile script","user":{"login":"btmills","id":1709537,"node_id":"MDQ6VXNlcjE3MDk1Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1709537?v=4","gravatar_id":"","url":"https://api.github.com/users/btmills","html_url":"https://github.com/btmills","followers_url":"https://api.github.com/users/btmills/followers","following_url":"https://api.github.com/users/btmills/following{/other_user}","gists_url":"https://api.github.com/users/btmills/gists{/gist_id}","starred_url":"https://api.github.com/users/btmills/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/btmills/subscriptions","organizations_url":"https://api.github.com/users/btmills/orgs","repos_url":"https://api.github.com/users/btmills/repos","events_url":"https://api.github.com/users/btmills/events{/privacy}","received_events_url":"https://api.github.com/users/btmills/received_events","type":"User","site_admin":false},"labels":[{"id":64004798,"node_id":"MDU6TGFiZWw2NDAwNDc5OA==","url":"https://api.github.com/repos/eslint/eslint/labels/documentation","name":"documentation","color":"5319e7","default":true,"description":"Relates to ESLint's documentation"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":360091515,"node_id":"MDU6TGFiZWwzNjAwOTE1MTU=","url":"https://api.github.com/repos/eslint/eslint/labels/chore","name":"chore","color":"c2e0c6","default":false,"description":"This change is not user-facing"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-12-16T06:31:07Z","updated_at":"2021-06-17T11:48:59Z","closed_at":"2020-12-18T04:52:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/eslint/eslint/pulls/13931","html_url":"https://github.com/eslint/eslint/pull/13931","diff_url":"https://github.com/eslint/eslint/pull/13931.diff","patch_url":"https://github.com/eslint/eslint/pull/13931.patch","merged_at":"2020-12-18T04:52:34Z"},"body":"<!--\r\n    Thank you for contributing!\r\n\r\n    ESLint adheres to the [JS Foundation Code of Conduct](https://js.foundation/community/code-of-conduct).\r\n-->\r\n\r\n#### Prerequisites checklist\r\n\r\n- [x] I have read the [contributing guidelines](https://github.com/eslint/eslint/blob/master/CONTRIBUTING.md).\r\n\r\n#### What is the purpose of this pull request? (put an \"X\" next to an item)\r\n\r\n[x] Documentation update\r\n[ ] Bug fix ([template](https://raw.githubusercontent.com/eslint/eslint/master/templates/bug-report.md))\r\n[ ] New rule ([template](https://raw.githubusercontent.com/eslint/eslint/master/templates/rule-proposal.md))\r\n[ ] Changes an existing rule ([template](https://raw.githubusercontent.com/eslint/eslint/master/templates/rule-change-proposal.md))\r\n[ ] Add autofixing to a rule\r\n[ ] Add a CLI option\r\n[ ] Add something to the core\r\n[ ] Other, please explain:\r\n\r\n<!--\r\n    If the item you've checked above has a template, please paste the template questions below and answer them. (If this pull request is addressing an issue, you can just paste a link to the issue here instead.)\r\n-->\r\n\r\n<!--\r\n    Please ensure your pull request is ready:\r\n\r\n    - Read the pull request guide (https://eslint.org/docs/developer-guide/contributing/pull-requests)\r\n    - Include tests for this change\r\n    - Update documentation for this change (if appropriate)\r\n-->\r\n\r\n<!--\r\n    The following is required for all pull requests:\r\n-->\r\n\r\n#### What changes did you make? (Give an overview)\r\n\r\nThe `npm run profile` script was deleted in https://github.com/eslint/eslint/pull/11854 after it stopped working when we moved from Browserify to webpack. This commit removes the leftover docs and two of the three benchmark files. `large.js` is still used by a test case ensuring we can read > 4k data from stdin.\r\n\r\n#### Is there anything you'd like reviewers to focus on?\r\n\r\nI felt safe deleting the previous benchmark examples because if we eventually add in a new profile command, we'll likely want new examples anyway that contain more modern JS rather than just the ES5 examples we had before.","reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/13931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/13931/timeline","performed_via_github_app":null,"state_reason":null,"score":1},{"url":"https://api.github.com/repos/eslint/eslint/issues/11685","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/11685/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/11685/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/11685/events","html_url":"https://github.com/eslint/eslint/pull/11685","id":441630462,"node_id":"MDExOlB1bGxSZXF1ZXN0Mjc2OTE1MDg0","number":11685,"title":"Fix: Unignoring directories in .eslintignore (fixes #11684)","user":{"login":"belochub","id":3501391,"node_id":"MDQ6VXNlcjM1MDEzOTE=","avatar_url":"https://avatars.githubusercontent.com/u/3501391?v=4","gravatar_id":"","url":"https://api.github.com/users/belochub","html_url":"https://github.com/belochub","followers_url":"https://api.github.com/users/belochub/followers","following_url":"https://api.github.com/users/belochub/following{/other_user}","gists_url":"https://api.github.com/users/belochub/gists{/gist_id}","starred_url":"https://api.github.com/users/belochub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/belochub/subscriptions","organizations_url":"https://api.github.com/users/belochub/orgs","repos_url":"https://api.github.com/users/belochub/repos","events_url":"https://api.github.com/users/belochub/events{/privacy}","received_events_url":"https://api.github.com/users/belochub/received_events","type":"User","site_admin":false},"labels":[{"id":45711350,"node_id":"MDU6TGFiZWw0NTcxMTM1MA==","url":"https://api.github.com/repos/eslint/eslint/labels/bug","name":"bug","color":"fc2929","default":true,"description":"ESLint is working incorrectly"},{"id":82922548,"node_id":"MDU6TGFiZWw4MjkyMjU0OA==","url":"https://api.github.com/repos/eslint/eslint/labels/core","name":"core","color":"c7def8","default":false,"description":"Relates to ESLint's core APIs and features"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-08T09:10:03Z","updated_at":"2019-11-15T22:43:42Z","closed_at":"2019-05-18T07:49:53Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/eslint/eslint/pulls/11685","html_url":"https://github.com/eslint/eslint/pull/11685","diff_url":"https://github.com/eslint/eslint/pull/11685.diff","patch_url":"https://github.com/eslint/eslint/pull/11685.patch","merged_at":"2019-05-18T07:49:53Z"},"body":"<!--\r\n    ESLint adheres to the [JS Foundation Code of Conduct](https://js.foundation/community/code-of-conduct).\r\n-->\r\n\r\n**What is the purpose of this pull request? (put an \"X\" next to item)**\r\n\r\n[ ] Documentation update\r\n[x] Bug fix ([template](https://raw.githubusercontent.com/eslint/eslint/master/templates/bug-report.md))\r\n[ ] New rule ([template](https://raw.githubusercontent.com/eslint/eslint/master/templates/rule-proposal.md))\r\n[ ] Changes an existing rule ([template](https://raw.githubusercontent.com/eslint/eslint/master/templates/rule-change-proposal.md))\r\n[ ] Add autofixing to a rule\r\n[ ] Add a CLI option\r\n[ ] Add something to the core\r\n[ ] Other, please explain:\r\n\r\n<!--\r\n    If the item you've checked above has a template, please paste the template questions below and answer them. (If this pull request is addressing an issue, you can just paste a link to the issue here instead.)\r\n-->\r\nhttps://github.com/eslint/eslint/issues/11684\r\n<!--\r\n    Please ensure your pull request is ready:\r\n\r\n    - Read the pull request guide (https://eslint.org/docs/developer-guide/contributing/pull-requests)\r\n    - Include tests for this change\r\n    - Update documentation for this change (if appropriate)\r\n-->\r\n\r\n<!--\r\n    The following is required for all pull requests:\r\n-->\r\n\r\n**What changes did you make? (Give an overview)**\r\n\r\nAs far as I understand the issue, the filtering of files/directories during globbing must pass absolute paths to the filtering function with the trailing slash present for directories to distinguish them from files, and the relative path extracted from the absolute path in this function must preserve the trailing slash as well since the relative path is passed to `ignore` package afterward, and it can not \"unignore\" directories that are \"marked\" as files (have no trailing slash).\r\n\r\n~~First of all, I've noticed that the `_mark()`ing in the overridden `GlobSync.prototype._readdir()` method didn't add the trailing slash to the path, IIUC due to the fact that it only uses cache to check if the path points to a directory and this cache is not created until the first call to the parent's `_readdir()` method, thus I've changed the order in which these methods are called.~~\r\n\r\n~~Secondly, I've changed the `getRelativePath()` function's behavior to preserve the trailing slash.~~\r\n\r\n**Is there anything you'd like reviewers to focus on?**\r\n\r\n~~The change to the `getRelativePath()` function is also related to the `IgnoredPaths.prototype.getIgnoredFoldersGlobChecker()` method's behavior and changes it implicitly.~~\r\n\r\n~~Also, even though paths are cached inside the `glob.GlobSync` instance, I am not sure if this does not significantly degrade the performance of globbing, I would like to get some help with the benchmarking of this change.~~\r\n\r\nEDIT: Some parts of the description above are no longer relevant after https://github.com/eslint/eslint/pull/11546 has landed.","reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/11685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/11685/timeline","performed_via_github_app":null,"state_reason":null,"score":1},{"url":"https://api.github.com/repos/eslint/eslint/issues/9455","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/9455/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/9455/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/9455/events","html_url":"https://github.com/eslint/eslint/pull/9455","id":265665621,"node_id":"MDExOlB1bGxSZXF1ZXN0MTQ2NzA5Nzkw","number":9455,"title":"Build: fix `npm run profile` script (fixes #9397)","user":{"login":"not-an-aardvark","id":11638619,"node_id":"MDQ6VXNlcjExNjM4NjE5","avatar_url":"https://avatars.githubusercontent.com/u/11638619?v=4","gravatar_id":"","url":"https://api.github.com/users/not-an-aardvark","html_url":"https://github.com/not-an-aardvark","followers_url":"https://api.github.com/users/not-an-aardvark/followers","following_url":"https://api.github.com/users/not-an-aardvark/following{/other_user}","gists_url":"https://api.github.com/users/not-an-aardvark/gists{/gist_id}","starred_url":"https://api.github.com/users/not-an-aardvark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/not-an-aardvark/subscriptions","organizations_url":"https://api.github.com/users/not-an-aardvark/orgs","repos_url":"https://api.github.com/users/not-an-aardvark/repos","events_url":"https://api.github.com/users/not-an-aardvark/events{/privacy}","received_events_url":"https://api.github.com/users/not-an-aardvark/received_events","type":"User","site_admin":false},"labels":[{"id":45711350,"node_id":"MDU6TGFiZWw0NTcxMTM1MA==","url":"https://api.github.com/repos/eslint/eslint/labels/bug","name":"bug","color":"fc2929","default":true,"description":"ESLint is working incorrectly"},{"id":72921735,"node_id":"MDU6TGFiZWw3MjkyMTczNQ==","url":"https://api.github.com/repos/eslint/eslint/labels/build","name":"build","color":"fad8c7","default":false,"description":"This change relates to ESLint's build process"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-16T07:04:43Z","updated_at":"2018-04-15T19:20:26Z","closed_at":"2017-10-16T15:17:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/eslint/eslint/pulls/9455","html_url":"https://github.com/eslint/eslint/pull/9455","diff_url":"https://github.com/eslint/eslint/pull/9455.diff","patch_url":"https://github.com/eslint/eslint/pull/9455.patch","merged_at":"2017-10-16T15:17:50Z"},"body":"<!--\r\n    ESLint adheres to the [JS Foundation Code of Conduct](https://js.foundation/community/code-of-conduct).\r\n-->\r\n\r\n**What is the purpose of this pull request? (put an \"X\" next to item)**\r\n\r\n[x] Bug fix (https://github.com/eslint/eslint/issues/9397)\r\n\r\n<!--\r\n    If the item you've checked above has a template, please paste the template questions below and answer them. (If this pull request is addressing an issue, you can just paste a link to the issue here instead.)\r\n-->\r\n\r\n<!--\r\n    Please ensure your pull request is ready:\r\n\r\n    - Read the pull request guide (https://eslint.org/docs/developer-guide/contributing/pull-requests)\r\n    - Include tests for this change\r\n    - Update documentation for this change (if appropriate)\r\n-->\r\n\r\n<!--\r\n    The following is required for all pull requests:\r\n-->\r\n\r\n**What changes did you make? (Give an overview)**\r\n\r\nThis fixes the `npm run profile` script in the repository.\r\n\r\nThis is actually the first time I've tried to use the script, and I'm not very familiar with the design goals (e.g. I'm not sure why it runs the benchmark in chrome rather than Node). I think having a benchmark for `Linter` is a good idea -- if we decide to keep using this, we might want to convert it to ES6 and add tests for it.\r\n\r\n**Is there anything you'd like reviewers to focus on?**\r\n\r\nNothing in particular","reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/9455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/9455/timeline","performed_via_github_app":null,"state_reason":null,"score":1},{"url":"https://api.github.com/repos/eslint/eslint/issues/9283","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/9283/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/9283/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/9283/events","html_url":"https://github.com/eslint/eslint/pull/9283","id":256545755,"node_id":"MDExOlB1bGxSZXF1ZXN0MTQwMjI4NTYz","number":9283,"title":"Update: run rules after `node.parent` is already set (fixes #9122)","user":{"login":"not-an-aardvark","id":11638619,"node_id":"MDQ6VXNlcjExNjM4NjE5","avatar_url":"https://avatars.githubusercontent.com/u/11638619?v=4","gravatar_id":"","url":"https://api.github.com/users/not-an-aardvark","html_url":"https://github.com/not-an-aardvark","followers_url":"https://api.github.com/users/not-an-aardvark/followers","following_url":"https://api.github.com/users/not-an-aardvark/following{/other_user}","gists_url":"https://api.github.com/users/not-an-aardvark/gists{/gist_id}","starred_url":"https://api.github.com/users/not-an-aardvark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/not-an-aardvark/subscriptions","organizations_url":"https://api.github.com/users/not-an-aardvark/orgs","repos_url":"https://api.github.com/users/not-an-aardvark/repos","events_url":"https://api.github.com/users/not-an-aardvark/events{/privacy}","received_events_url":"https://api.github.com/users/not-an-aardvark/received_events","type":"User","site_admin":false},"labels":[{"id":45711352,"node_id":"MDU6TGFiZWw0NTcxMTM1Mg==","url":"https://api.github.com/repos/eslint/eslint/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"This change enhances an existing feature of ESLint"},{"id":82922548,"node_id":"MDU6TGFiZWw4MjkyMjU0OA==","url":"https://api.github.com/repos/eslint/eslint/labels/core","name":"core","color":"c7def8","default":false,"description":"Relates to ESLint's core APIs and features"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-09-10T22:37:42Z","updated_at":"2018-03-15T06:10:38Z","closed_at":"2017-09-15T19:26:02Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/eslint/eslint/pulls/9283","html_url":"https://github.com/eslint/eslint/pull/9283","diff_url":"https://github.com/eslint/eslint/pull/9283.diff","patch_url":"https://github.com/eslint/eslint/pull/9283.patch","merged_at":"2017-09-15T19:26:02Z"},"body":"<!--\r\n    ESLint adheres to the [JS Foundation Code of Conduct](https://js.foundation/community/code-of-conduct).\r\n-->\r\n\r\n**What is the purpose of this pull request? (put an \"X\" next to item)**\r\n\r\n[x] Add something to the core\r\n\r\n<!--\r\n    If the item you've checked above has a template, please paste the template questions below and answer them. (If this pull request is addressing an issue, you can just paste a link to the issue here instead.)\r\n-->\r\n\r\n<!--\r\n    Please ensure your pull request is ready:\r\n\r\n    - Read the pull request guide (http://eslint.org/docs/developer-guide/contributing/pull-requests)\r\n    - Include tests for this change\r\n    - Update documentation for this change (if appropriate)\r\n-->\r\n\r\n<!--\r\n    The following is required for all pull requests:\r\n-->\r\n\r\n**What changes did you make? (Give an overview)**\r\n\r\nThis is a reference implementation of #9122. With this change, rules don't have to worry about whether `node.parent` has been set at any given point, because all of the `node.parent` properties will be assigned by the time the rule gets run.\r\n\r\n~~This builds on https://github.com/eslint/eslint/pull/9268, and should not be merged until https://github.com/eslint/eslint/pull/9268 is merged. For now, only look at the [second commit](https://github.com/eslint/eslint/pull/9283/commits/f65fdac1b0f8962cd44a899a4c6cf1a10e852fbf).~~\r\n\r\nSince this stores nodes in a queue rather than doing another traversal, this has very little performance impact:\r\n\r\n<details>\r\n<summary>Performance metrics</summary>\r\n\r\nOn 9ecd264 (without this change applied):\r\n\r\n```\r\n((HEAD detached at 7685fed3))$ npm run perf\r\n\r\n> eslint@4.6.1 perf /path/to/eslint\r\n> node Makefile.js perf\r\n\r\n\r\nLoading:\r\n  Load performance Run #1:  120.599158ms\r\n  Load performance Run #2:  114.98305ms\r\n  Load performance Run #3:  114.749014ms\r\n  Load performance Run #4:  119.581881ms\r\n  Load performance Run #5:  120.72974ms\r\n\r\n  Load Performance median:  119.581881ms\r\n\r\n\r\nSingle File:\r\n  CPU Speed is 3100 with multiplier 13000000\r\n  Performance Run #1:  5545.881914ms\r\n  Performance Run #2:  5494.320288ms\r\n  Performance Run #3:  5507.513848ms\r\n  Performance Run #4:  5535.386212ms\r\n  Performance Run #5:  5487.6923289999995ms\r\n\r\n  Performance budget exceeded: 5507.513848ms (limit: 4193.548387096775ms)\r\n\r\n\r\nMulti Files (0 files):\r\n  CPU Speed is 3100 with multiplier 39000000\r\n  Performance Run #1:  13472.871353ms\r\n  Performance Run #2:  13794.571958ms\r\n  Performance Run #3:  13790.013038000001ms\r\n  Performance Run #4:  13667.251705ms\r\n  Performance Run #5:  13450.531616ms\r\n\r\n  Performance budget exceeded: 13667.251705ms (limit: 12580.645161290322ms)\r\n```\r\n\r\nOn `deferred-listener-calls` (with this change applied):\r\n\r\n```\r\n(deferred-listener-calls)$ npm run perf\r\n\r\n> eslint@4.6.1 perf /Users/tkatz/code/eslint\r\n> node Makefile.js perf\r\n\r\n\r\nLoading:\r\n  Load performance Run #1:  116.02172ms\r\n  Load performance Run #2:  122.795839ms\r\n  Load performance Run #3:  120.586319ms\r\n  Load performance Run #4:  117.875192ms\r\n  Load performance Run #5:  117.937884ms\r\n\r\n  Load Performance median:  117.937884ms\r\n\r\n\r\nSingle File:\r\n  CPU Speed is 3100 with multiplier 13000000\r\n  Performance Run #1:  5591.12559ms\r\n  Performance Run #2:  5558.3983530000005ms\r\n  Performance Run #3:  5500.023409ms\r\n  Performance Run #4:  5587.691358ms\r\n  Performance Run #5:  5585.687514ms\r\n\r\n  Performance budget exceeded: 5585.687514ms (limit: 4193.548387096775ms)\r\n\r\n\r\nMulti Files (0 files):\r\n  CPU Speed is 3100 with multiplier 39000000\r\n  Performance Run #1:  13529.686102ms\r\n  Performance Run #2:  13508.945281ms\r\n  Performance Run #3:  13482.570723ms\r\n  Performance Run #4:  13340.607641ms\r\n  Performance Run #5:  13524.828015ms\r\n\r\n  Performance budget exceeded: 13508.945281ms (limit: 12580.645161290322ms)\r\n```\r\n\r\nThese numbers indicate a 1% performance decrease on the single-file benchmark, and a 1% improvement on the multi-file benchmark. I suspect at least some of this is noise, but if there is a performance impact it seems quite small.\r\n\r\n**Is there anything you'd like reviewers to focus on?**\r\n\r\nNothing in particular","reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/9283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/9283/timeline","performed_via_github_app":null,"state_reason":null,"score":1},{"url":"https://api.github.com/repos/eslint/eslint/issues/8905","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/8905/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/8905/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/8905/events","html_url":"https://github.com/eslint/eslint/pull/8905","id":241508380,"node_id":"MDExOlB1bGxSZXF1ZXN0MTI5NTU1NjY2","number":8905,"title":"Chore: improve performance of `indent` rule","user":{"login":"not-an-aardvark","id":11638619,"node_id":"MDQ6VXNlcjExNjM4NjE5","avatar_url":"https://avatars.githubusercontent.com/u/11638619?v=4","gravatar_id":"","url":"https://api.github.com/users/not-an-aardvark","html_url":"https://github.com/not-an-aardvark","followers_url":"https://api.github.com/users/not-an-aardvark/followers","following_url":"https://api.github.com/users/not-an-aardvark/following{/other_user}","gists_url":"https://api.github.com/users/not-an-aardvark/gists{/gist_id}","starred_url":"https://api.github.com/users/not-an-aardvark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/not-an-aardvark/subscriptions","organizations_url":"https://api.github.com/users/not-an-aardvark/orgs","repos_url":"https://api.github.com/users/not-an-aardvark/repos","events_url":"https://api.github.com/users/not-an-aardvark/events{/privacy}","received_events_url":"https://api.github.com/users/not-an-aardvark/received_events","type":"User","site_admin":false},"labels":[{"id":360091515,"node_id":"MDU6TGFiZWwzNjAwOTE1MTU=","url":"https://api.github.com/repos/eslint/eslint/labels/chore","name":"chore","color":"c2e0c6","default":false,"description":"This change is not user-facing"},{"id":517845966,"node_id":"MDU6TGFiZWw1MTc4NDU5NjY=","url":"https://api.github.com/repos/eslint/eslint/labels/indent","name":"indent","color":"080016","default":false,"description":"Relates to the `indent` rule"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-07-09T07:58:07Z","updated_at":"2018-02-06T20:52:20Z","closed_at":"2017-07-12T04:30:03Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/eslint/eslint/pulls/8905","html_url":"https://github.com/eslint/eslint/pull/8905","diff_url":"https://github.com/eslint/eslint/pull/8905.diff","patch_url":"https://github.com/eslint/eslint/pull/8905.patch","merged_at":"2017-07-12T04:30:03Z"},"body":"<!--\r\n    ESLint adheres to the [JS Foundation Code of Conduct](https://js.foundation/community/code-of-conduct).\r\n-->\r\n\r\n**What is the purpose of this pull request? (put an \"X\" next to item)**\r\n\r\n[x] Other, please explain:\r\n\r\n<!--\r\n    If the item you've checked above has a template, please paste the template questions below and answer them. (If this pull request is addressing an issue, you can just paste a link to the issue here instead.)\r\n-->\r\n\r\n<!--\r\n    Please ensure your pull request is ready:\r\n\r\n    - Read the pull request guide (http://eslint.org/docs/developer-guide/contributing/pull-requests)\r\n    - Include tests for this change\r\n    - Update documentation for this change (if appropriate)\r\n-->\r\n\r\n<!--\r\n    The following is required for all pull requests:\r\n-->\r\n\r\n**What changes did you make? (Give an overview)**\r\n\r\nThis updates the `indent` rule to be more performant by storing information on ranges of tokens rather than performing operations on many individual tokens one-at-a-time.\r\n\r\nThis results in a *19% end-to-end performance increase (!)* according to our `npm run perf` benchmark.\r\n\r\n<details>\r\n<summary>End-to-end benchmark</summary>\r\n\r\n`master` branch:\r\n\r\n```\r\nSingle File:\r\n  CPU Speed is 3100 with multiplier 13000000\r\n  Performance Run #1:  6601.645335ms\r\n  Performance Run #2:  6537.859522ms\r\n  Performance Run #3:  6469.447266ms\r\n  Performance Run #4:  6777.504465ms\r\n  Performance Run #5:  6431.605835ms\r\n\r\n  Performance budget exceeded: 6537.859522ms (limit: 4193.548387096775ms)\r\n```\r\n\r\n`indent-performance` branch:\r\n\r\n```\r\nSingle File:\r\n  CPU Speed is 3100 with multiplier 13000000\r\n  Performance Run #1:  5287.6544109999995ms\r\n  Performance Run #2:  5284.148783ms\r\n  Performance Run #3:  5326.879172ms\r\n  Performance Run #4:  5338.387146ms\r\n  Performance Run #5:  5340.651033ms\r\n\r\n  Performance budget exceeded: 5326.879172ms (limit: 4193.548387096775ms)\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>Rule-specific benchmark on ESLint codebase</summary>\r\n\r\n`master` branch:\r\n\r\n```\r\n$ TIMING=1 eslint lib/ conf/ bin/ tests/ --no-eslintrc --rule 'indent: [error, 4, {SwitchCase: 1}]' --env=es6 --no-inline-config\r\nRule   | Time (ms) | Relative\r\n:------|----------:|--------:\r\nindent |  5448.737 |   100.0%\r\n```\r\n\r\n`indent-performance` branch:\r\n\r\n```\r\n$ TIMING=1 eslint lib/ conf/ bin/ tests/ --no-eslintrc --rule 'indent: [error, 4, {SwitchCase: 1}]' --env=es6 --no-inline-config\r\nRule   | Time (ms) | Relative\r\n:------|----------:|--------:\r\nindent |  4610.891 |   100.0%\r\n```\r\n</details>\r\n\r\n\r\n**Is there anything you'd like reviewers to focus on?**\r\n\r\nI tried to write descriptive comments to explain what's going on. Is there anything that's unclear or could be improved?","reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/8905/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/8905/timeline","performed_via_github_app":null,"state_reason":null,"score":1},{"url":"https://api.github.com/repos/eslint/eslint/issues/591","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/591/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/591/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/591/events","html_url":"https://github.com/eslint/eslint/pull/591","id":27024961,"node_id":"MDExOlB1bGxSZXF1ZXN0MTIyNTM0MDM=","number":591,"title":"add `npm run profile`.","user":{"login":"chrisdickinson","id":37303,"node_id":"MDQ6VXNlcjM3MzAz","avatar_url":"https://avatars.githubusercontent.com/u/37303?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisdickinson","html_url":"https://github.com/chrisdickinson","followers_url":"https://api.github.com/users/chrisdickinson/followers","following_url":"https://api.github.com/users/chrisdickinson/following{/other_user}","gists_url":"https://api.github.com/users/chrisdickinson/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisdickinson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisdickinson/subscriptions","organizations_url":"https://api.github.com/users/chrisdickinson/orgs","repos_url":"https://api.github.com/users/chrisdickinson/repos","events_url":"https://api.github.com/users/chrisdickinson/events{/privacy}","received_events_url":"https://api.github.com/users/chrisdickinson/received_events","type":"User","site_admin":false},"labels":[{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2014-02-06T03:36:56Z","updated_at":"2018-02-07T02:25:44Z","closed_at":"2014-02-06T04:00:58Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/eslint/eslint/pulls/591","html_url":"https://github.com/eslint/eslint/pull/591","diff_url":"https://github.com/eslint/eslint/pull/591.diff","patch_url":"https://github.com/eslint/eslint/pull/591.patch","merged_at":"2014-02-06T04:00:58Z"},"body":"- This should open up a new window (ideally Chrome).\n- Pop open the Dev Tools. Click on the Profile tab.\n- Hit escape to view the console as well.\n- Once the profile \"all\" is complete, you should be able to inspect the run.\n\nOf note: V8 has a sampling profiler -- so if the stacks look a bit odd, it's usually\nbecause the sampling caught at a weird moment. By default the benchmark is configured\nto run each of:\n1. Large: Unminified, concatenated JSHint codebase.\n2. Medium: Unminified, concatenated jQuery 2.1.0 codebase.\n3. Small: Unminified, concatenated Knockout codebase.\n\n---\n\nThe Chrome dev tools are pretty awesome for inspecting where your JS is spending the most time:\n\nIt can show you what functions are called the most / take the most time out of a run & reasons they haven't been optimized:\n\n![heavy view](https://f.cloud.github.com/assets/37303/2095270/0bcd55fa-8ee0-11e3-8550-b2a211e6b1f6.png)\n\nAs well as a flamegraph:\n\n![flamegraph](https://f.cloud.github.com/assets/37303/2095273/3135081a-8ee0-11e3-9b42-60e8a4f056d4.png?bustcache)\n","reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/591/timeline","performed_via_github_app":null,"state_reason":null,"score":1}]