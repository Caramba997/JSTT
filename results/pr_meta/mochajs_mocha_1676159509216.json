[{"url":"https://api.github.com/repos/mochajs/mocha/issues/4319","repository_url":"https://api.github.com/repos/mochajs/mocha","labels_url":"https://api.github.com/repos/mochajs/mocha/issues/4319/labels{/name}","comments_url":"https://api.github.com/repos/mochajs/mocha/issues/4319/comments","events_url":"https://api.github.com/repos/mochajs/mocha/issues/4319/events","html_url":"https://github.com/mochajs/mocha/pull/4319","id":634984142,"node_id":"MDExOlB1bGxSZXF1ZXN0NDMxNDM3MDE1","number":4319,"title":"disable parallel mode by default","user":{"login":"boneskull","id":924465,"node_id":"MDQ6VXNlcjkyNDQ2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/924465?v=4","gravatar_id":"","url":"https://api.github.com/users/boneskull","html_url":"https://github.com/boneskull","followers_url":"https://api.github.com/users/boneskull/followers","following_url":"https://api.github.com/users/boneskull/following{/other_user}","gists_url":"https://api.github.com/users/boneskull/gists{/gist_id}","starred_url":"https://api.github.com/users/boneskull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boneskull/subscriptions","organizations_url":"https://api.github.com/users/boneskull/orgs","repos_url":"https://api.github.com/users/boneskull/repos","events_url":"https://api.github.com/users/boneskull/events{/privacy}","received_events_url":"https://api.github.com/users/boneskull/received_events","type":"User","site_admin":false},"labels":[{"id":125688233,"node_id":"MDU6TGFiZWwxMjU2ODgyMzM=","url":"https://api.github.com/repos/mochajs/mocha/labels/chore","name":"chore","color":"7F7165","default":false,"description":"generally involving deps, tooling, configuration, etc."},{"id":533082117,"node_id":"MDU6TGFiZWw1MzMwODIxMTc=","url":"https://api.github.com/repos/mochajs/mocha/labels/semver-patch","name":"semver-patch","color":"0e8a16","default":false,"description":"implementation requires increase of \"patch\" version number; \"bug fixes\""}],"state":"closed","locked":false,"assignee":{"login":"boneskull","id":924465,"node_id":"MDQ6VXNlcjkyNDQ2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/924465?v=4","gravatar_id":"","url":"https://api.github.com/users/boneskull","html_url":"https://github.com/boneskull","followers_url":"https://api.github.com/users/boneskull/followers","following_url":"https://api.github.com/users/boneskull/following{/other_user}","gists_url":"https://api.github.com/users/boneskull/gists{/gist_id}","starred_url":"https://api.github.com/users/boneskull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boneskull/subscriptions","organizations_url":"https://api.github.com/users/boneskull/orgs","repos_url":"https://api.github.com/users/boneskull/repos","events_url":"https://api.github.com/users/boneskull/events{/privacy}","received_events_url":"https://api.github.com/users/boneskull/received_events","type":"User","site_admin":false},"assignees":[{"login":"boneskull","id":924465,"node_id":"MDQ6VXNlcjkyNDQ2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/924465?v=4","gravatar_id":"","url":"https://api.github.com/users/boneskull","html_url":"https://github.com/boneskull","followers_url":"https://api.github.com/users/boneskull/followers","following_url":"https://api.github.com/users/boneskull/following{/other_user}","gists_url":"https://api.github.com/users/boneskull/gists{/gist_id}","starred_url":"https://api.github.com/users/boneskull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boneskull/subscriptions","organizations_url":"https://api.github.com/users/boneskull/orgs","repos_url":"https://api.github.com/users/boneskull/repos","events_url":"https://api.github.com/users/boneskull/events{/privacy}","received_events_url":"https://api.github.com/users/boneskull/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/mochajs/mocha/milestones/35","html_url":"https://github.com/mochajs/mocha/milestone/35","labels_url":"https://api.github.com/repos/mochajs/mocha/milestones/35/labels","id":4981046,"node_id":"MDk6TWlsZXN0b25lNDk4MTA0Ng==","number":35,"title":"v8.0.0","description":"","creator":{"login":"juergba","id":44573692,"node_id":"MDQ6VXNlcjQ0NTczNjky","avatar_url":"https://avatars.githubusercontent.com/u/44573692?v=4","gravatar_id":"","url":"https://api.github.com/users/juergba","html_url":"https://github.com/juergba","followers_url":"https://api.github.com/users/juergba/followers","following_url":"https://api.github.com/users/juergba/following{/other_user}","gists_url":"https://api.github.com/users/juergba/gists{/gist_id}","starred_url":"https://api.github.com/users/juergba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juergba/subscriptions","organizations_url":"https://api.github.com/users/juergba/orgs","repos_url":"https://api.github.com/users/juergba/repos","events_url":"https://api.github.com/users/juergba/events{/privacy}","received_events_url":"https://api.github.com/users/juergba/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":23,"state":"closed","created_at":"2020-01-07T08:28:16Z","updated_at":"2020-06-12T19:58:41Z","due_on":null,"closed_at":"2020-06-12T19:58:41Z"},"comments":1,"created_at":"2020-06-08T22:49:57Z","updated_at":"2020-06-09T18:16:53Z","closed_at":"2020-06-09T18:16:47Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/mochajs/mocha/pulls/4319","html_url":"https://github.com/mochajs/mocha/pull/4319","diff_url":"https://github.com/mochajs/mocha/pull/4319.diff","patch_url":"https://github.com/mochajs/mocha/pull/4319.patch","merged_at":"2020-06-09T18:16:47Z"},"body":"Having run benchmarks against our unit tests and integration tests, I've found that the unit tests do not benefit from parallel mode--and in fact, they run more slowly.  Integration tests still see a 50% performance boost, so we will use parallel tests for those only.\r\n","reactions":{"url":"https://api.github.com/repos/mochajs/mocha/issues/4319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mochajs/mocha/issues/4319/timeline","performed_via_github_app":null,"state_reason":null,"score":1},{"url":"https://api.github.com/repos/mochajs/mocha/issues/3830","repository_url":"https://api.github.com/repos/mochajs/mocha","labels_url":"https://api.github.com/repos/mochajs/mocha/issues/3830/labels{/name}","comments_url":"https://api.github.com/repos/mochajs/mocha/issues/3830/comments","events_url":"https://api.github.com/repos/mochajs/mocha/issues/3830/events","html_url":"https://github.com/mochajs/mocha/pull/3830","id":420000885,"node_id":"MDExOlB1bGxSZXF1ZXN0MjYwMzc0MzQz","number":3830,"title":"Replace findup-sync with find-up for faster startup","user":{"login":"cspotcode","id":376504,"node_id":"MDQ6VXNlcjM3NjUwNA==","avatar_url":"https://avatars.githubusercontent.com/u/376504?v=4","gravatar_id":"","url":"https://api.github.com/users/cspotcode","html_url":"https://github.com/cspotcode","followers_url":"https://api.github.com/users/cspotcode/followers","following_url":"https://api.github.com/users/cspotcode/following{/other_user}","gists_url":"https://api.github.com/users/cspotcode/gists{/gist_id}","starred_url":"https://api.github.com/users/cspotcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cspotcode/subscriptions","organizations_url":"https://api.github.com/users/cspotcode/orgs","repos_url":"https://api.github.com/users/cspotcode/repos","events_url":"https://api.github.com/users/cspotcode/events{/privacy}","received_events_url":"https://api.github.com/users/cspotcode/received_events","type":"User","site_admin":false},"labels":[{"id":533082117,"node_id":"MDU6TGFiZWw1MzMwODIxMTc=","url":"https://api.github.com/repos/mochajs/mocha/labels/semver-patch","name":"semver-patch","color":"0e8a16","default":false,"description":"implementation requires increase of \"patch\" version number; \"bug fixes\""},{"id":1268443804,"node_id":"MDU6TGFiZWwxMjY4NDQzODA0","url":"https://api.github.com/repos/mochajs/mocha/labels/performance","name":"performance","color":"ce9bef","default":false,"description":"Performance improvements"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/mochajs/mocha/milestones/27","html_url":"https://github.com/mochajs/mocha/milestone/27","labels_url":"https://api.github.com/repos/mochajs/mocha/milestones/27/labels","id":4087545,"node_id":"MDk6TWlsZXN0b25lNDA4NzU0NQ==","number":27,"title":"v6.1.0","description":"","creator":{"login":"boneskull","id":924465,"node_id":"MDQ6VXNlcjkyNDQ2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/924465?v=4","gravatar_id":"","url":"https://api.github.com/users/boneskull","html_url":"https://github.com/boneskull","followers_url":"https://api.github.com/users/boneskull/followers","following_url":"https://api.github.com/users/boneskull/following{/other_user}","gists_url":"https://api.github.com/users/boneskull/gists{/gist_id}","starred_url":"https://api.github.com/users/boneskull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boneskull/subscriptions","organizations_url":"https://api.github.com/users/boneskull/orgs","repos_url":"https://api.github.com/users/boneskull/repos","events_url":"https://api.github.com/users/boneskull/events{/privacy}","received_events_url":"https://api.github.com/users/boneskull/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":25,"state":"closed","created_at":"2019-02-26T03:56:38Z","updated_at":"2019-04-09T17:38:14Z","due_on":null,"closed_at":"2019-04-09T17:38:14Z"},"comments":5,"created_at":"2019-03-12T13:57:28Z","updated_at":"2019-03-13T22:39:52Z","closed_at":"2019-03-13T22:39:49Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/mochajs/mocha/pulls/3830","html_url":"https://github.com/mochajs/mocha/pull/3830","diff_url":"https://github.com/mochajs/mocha/pull/3830.diff","patch_url":"https://github.com/mochajs/mocha/pull/3830.patch","merged_at":"2019-03-13T22:39:49Z"},"body":"### Requirements\r\n\r\n* Filling out the template is required. Any pull request that does not include enough information to be reviewed in a timely manner may be closed at the maintainers' discretion.\r\n* All new code requires tests to ensure against regressions.\r\n\r\n### Description of the Change\r\n\r\nThis PR replaces findup-sync with find-up, which reduces mocha's startup time. Related to #3743.\r\n\r\nAn informal benchmark shows it reduces startup time by about 30%:\r\nhttps://github.com/cspotcode/repros/tree/mocha-find-up-perf\r\nhttps://github.com/cspotcode/repros/runs/76724994 (pardon the verbose logging; you can search for the word \"real\" to jump to the `time` invocations)\r\n\r\n### Alternate Designs\r\n\r\nI considered using cosmiconfig, but this is a more minimal change that preserves mocha's existing diagnostic logging.  https://github.com/mochajs/mocha/issues/3743#issuecomment-466132812\r\n\r\n### Why should this be in core?\r\n\r\nStartup time for a CLI tool like mocha is important, especially considering that mocha may spawn an extra node process at startup.\r\n\r\n### Benefits\r\n\r\nFast mocha startup; better developer experience.\r\n\r\n### Possible Drawbacks\r\n\r\n`package` flag does not support globs.  I don't think anyone intended or was relying on this behavior, and removing it simplifies mocha's behavior, which should make it easier to debug and triage issues related to `--package` loading.\r\n\r\n### Applicable issues\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mochajs/mocha/issues/3830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mochajs/mocha/issues/3830/timeline","performed_via_github_app":null,"state_reason":null,"score":1},{"url":"https://api.github.com/repos/mochajs/mocha/issues/763","repository_url":"https://api.github.com/repos/mochajs/mocha","labels_url":"https://api.github.com/repos/mochajs/mocha/issues/763/labels{/name}","comments_url":"https://api.github.com/repos/mochajs/mocha/issues/763/comments","events_url":"https://api.github.com/repos/mochajs/mocha/issues/763/events","html_url":"https://github.com/mochajs/mocha/pull/763","id":11680688,"node_id":"MDExOlB1bGxSZXF1ZXN0NDk0MzUxOA==","number":763,"title":"mocha browser runner is 10-100x slower than jasmine on equivalent suites","user":{"login":"jfirebaugh","id":98601,"node_id":"MDQ6VXNlcjk4NjAx","avatar_url":"https://avatars.githubusercontent.com/u/98601?v=4","gravatar_id":"","url":"https://api.github.com/users/jfirebaugh","html_url":"https://github.com/jfirebaugh","followers_url":"https://api.github.com/users/jfirebaugh/followers","following_url":"https://api.github.com/users/jfirebaugh/following{/other_user}","gists_url":"https://api.github.com/users/jfirebaugh/gists{/gist_id}","starred_url":"https://api.github.com/users/jfirebaugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jfirebaugh/subscriptions","organizations_url":"https://api.github.com/users/jfirebaugh/orgs","repos_url":"https://api.github.com/users/jfirebaugh/repos","events_url":"https://api.github.com/users/jfirebaugh/events{/privacy}","received_events_url":"https://api.github.com/users/jfirebaugh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2013-03-05T18:55:22Z","updated_at":"2014-06-12T14:11:25Z","closed_at":"2013-04-03T00:02:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/mochajs/mocha/pulls/763","html_url":"https://github.com/mochajs/mocha/pull/763","diff_url":"https://github.com/mochajs/mocha/pull/763.diff","patch_url":"https://github.com/mochajs/mocha/pull/763.patch","merged_at":"2013-04-03T00:02:42Z"},"body":"So @tmcw and I were petitioning to [convert Leaflet's test suite to mocha](https://github.com/Leaflet/Leaflet/pull/1479) and @mourner brought it to our attention that the result ran ten times slower (2s with mocha vs 0.2s with Jasmine).\n\nI reproduced a similar slowdown in a simple [benchmark](https://github.com/jfirebaugh/jasmine-mocha-benchmark) which does nothing but execute 500 examples. Jasmine does it in about 0.1s, Mocha 3s.\n\nI suspect Mocha is hitting a wall due to the latency of [window.postMessage](https://github.com/visionmedia/mocha/blob/4d95a875d8c45aa228602a6de42a9c56e5b6a9a8/support/tail.js#L39) used by the `process.nextTick` implementation. Replacing this implementation with synchronous execution of `fn` leads to a sizable performance improvement (but of course regresses #153).\n\nI guess to improve this mocha will need a nextTick worker queue and some manual scheduling logic, so that multiple ticks can run in each setTimeout/postMessage \"timeslice\".\n","reactions":{"url":"https://api.github.com/repos/mochajs/mocha/issues/763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mochajs/mocha/issues/763/timeline","performed_via_github_app":null,"state_reason":null,"score":1}]